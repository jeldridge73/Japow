const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./W5nlQS_t.js","./CUkNr16X.js","./PageContent.DRaftbP2.css","./api.SWO78W4O.css","./kH5oY3Pg.js","./Cn8iFQeg.js","./CMsaTiTP.js","./DexCt4m8.js","./qV6Qkje4.js","./useInput.0MsmqXPb.css","./Dat4aOD2.js","./Cre6EDOy.js","./g6Obqf-g.js","./Cov_aLRH.js","./Badge.CnVXOfQY.css","./C0TkPLQ1.js","./CTvYAfjy.js","./buy.DFRRlzho.css","./CFjA04Zp.js","./DliHtpsu.js","./DG4UAT83.js","./Bn03hTDs.js","./B9Lk1Inv.js","./Cn-UK-5Q.js","./Bva8PmrP.js","./8IwcziAB.js","./RangeInput.DKV3z7aG.css","./DvByy-Nt.js","./ClZZ6rQo.js","./Pills.Dz_EBgIy.css","./BAgh4TKk.js","./EstimatedBadge.BowxcWo-.css","./D_nAfx-L.js","./DgFHshDy.js","./UpgradeLink.CfMuvPz0.css","./CAdPVRub.js","./Tabs.DkQmNFJX.css","./DdzauQEB.js","./CtRGu_nO.js","./Cki0TSCL.js","./ResortStatusIndicator.dmXX-h02.css","./D5Tf3d26.js","./B0bI3GPb.js","./BiojztE-.js","./EmptyIcon.BUiFQ5g7.css","./Cd2w82ME.js","./SelectFavoritesList.DEfUmqqP.css","./B_SOXT3i.js","./NotificationDialog.Bd9LcbIY.css","./CvS8H6sq.js","./CCTPbrBU.js","./SnowLocationHeader.MaiLqzyi.css","./BOz0Tyl9.js","./Map.DbYShAY6.css","./Cewx4_Ur.js","./KCG3bzXi.js","./Gxg5PTBP.js","./Chips.B-xHxN_d.css","./BgxOKuLu.js","./WeatherStationPageContent.P8iiX243.css","./DSOueboU.js","./BottomSheet.DFPSr3X4.css","./WeatherStationDialog.DeXM36SG.css","./BV48aOWh.js","./DX9a0gFB.js","./map.DhkHReNb.css","./BBHfHeyP.js","./team.sAiiOaYf.css","./xfJ8GNoH.js","./DnwTXiMp.js","./Be47QbKt.js","./ryD-i-6w.js","./OpenSnowReviews.Beev1oVL.css","./HomePageContent.BEnYq24G.css","./DJHrMXK7.js","./BTvgnUpI.js","./DietYszn.js","./CpMLufJT.js","./B_OBz_MI.js","./ToggleSwitch.CFkvpA1x.css","./CNV6aHZD.js","./CUzF6O4w.js","./DavB5uOg.js","./DjmIxmlx.js","./PostNavigationButton.CFg0WHl1.css","./CLwloKf0.js","./stories.ppervsMH.css","./PgpBoJ4V.js","./CyEelzH7.js","./qb-5JVte.js","./CsnvUvHa.js","./DcE3Kz5e.js","./CKLtiQhx.js","./DczEEeW_.js","./DvA6gN-g.js","./CV4HQrYK.js","./DQnoh_fY.js","./LocationLoading.BAoTooIv.css","./BTFn55w8.js","./hobW8WgS.js","./BTUZvTxm.js","./BF80p-HS.js","./72M6vGFN.js","./BcN5LYZO.js","./MiniMapCard.BSxDMNWD.css","./MoreInfoCard.Be6xi9kS.css","./D4Jp9Jwt.js","./Dhlm_VqK.js","./DyeZnOqL.js","./ForecastList.C20U3_4m.css","./ePOXYCZD.js","./WeatherPageContent.D0pb_Fx5.css","./my-location.Cu_L7h5q.css","./qWxRLgJZ.js","./B0NTsbXd.js","./C74N4ZYX.js","./DjhWbJz8.js","./OpenSnowFeatures.B44XK0eO.css","./subscription.AbFImRBT.css","./BnzrS3u-.js","./WuIW0VoD.js","./BwwvaEdg.js","./CW97H1Iy.js","./C4e9EwLE.js","./index.BX7lbkSy.css","./CyTIdjpb.js","./BP6Ksk5l.js","./B1nmi018.js","./SnowSummaryZoomInToggle.CtnNL-ME.css","./useExplorePage.eWDJ3JgG.css","./CwsZ5FMx.js","./BikazJ17.js","./DailySnowList.CanpZgzt.css","./JByGnRkz.js","./B7VID52p.js","./BRt9pKg3.js","./DToSuZCQ.js","./PzGzPmgT.js","./CXw1uqxx.js","./D8nj0RT9.js","./LinkSentCard.BdayV01b.css","./BuF6tHS5.js","./CbcwQ3QS.js","./A44iLWuo.js","./B9qj3LG0.js","./BgmgANaV.js","./Dh6OwxTO.js","./Cf_E0_7J.js","./CBcJbr7X.js","./2Rb0lAKK.js","./BGRqwkNM.js","./SnowChartHeader.cX7oXENQ.css","./BK28T47h.js","./BCx7FpGf.js","./CpIuxLeL.js","./SnowSummary.KLER4_OG.css","./DXn7tAMF.js","./Bd6I6bcQ.js","./CompareSnowReportCard.BIVY4zQ7.css","./BKdNs6uG.js","./CompareGlobalPage.DUjZsV4j.css","./AvOVGOoK.js","./CB5Ovj0s.js","./CIRMLhdk.js","./DjtvxARJ.js","./BJ6kd51B.js","./CompareLocationsMapPage.CfaigUzU.css","./95k0LdYf.js","./Bgld9R0e.js","./Bf_YyLEE.js","./Clwu1__b.js","./2yiL3uMG.js","./fjpDXVZK.js","./B-re1Z34.js","./TjCHp4H_.js","./DzVLJxLK.js","./BfhGQc5C.js","./SnowLocationPageContent.VbZAhI36.css","./CYQ5hgMM.js","./LdxUH8x5.js","./CIiusRqS.js","./BXmK22A6.js","./BBMrEQmk.js","./D3YWaavS.js","./B7gMZwBj.js","./CQr6g54Q.js","./CY6ci8S-.js","./B3fFFrtG.js","./DQfYfJQF.js","./_postId_.CGHLh8g7.css","./BLsILNdR.js","./C4meia57.js","./5suibtHW.js","./B8KWuEhs.js","./BrJEfNQD.js","./CX72z5wv.js","./C9VcgJ5l.js","./C2aSaKus.js","./preferences.BpvfMu_8.css","./wUKpTAgO.js","./BRB-z_ea.js","./BjfVPZhD.js","./Bto9mTSD.js","./qeq8mXtp.js","./CC7RHfiL.js","./Bi5o_po1.js","./AgentForecast.BrKVj0pa.css","./D4MK6lpa.js","./C6__Xw-_.js","./KDd6E0qK.js","./CgqbbEeJ.js","./P6FTjNVx.js","./D6vcfELR.js","./WeatherStationCard.DkU9vzJc.css","./snow-report.Dz2f0WJU.css","./B_1sNUrm.js","./index.T2hf5eoK.css","./oJ5EIsPy.js","./CAk0ocDs.js","./snow-summary.CpD4G8On.css","./B9FxaLSb.js","./fo2aKfmQ.js","./2vedTRh1.js","./index.CRtIZNOn.css","./I7n8K4KW.js","./MF4lCRmV.js","./CAHSExZb.js","./k9X0DXnj.js","./cu88pvHM.js","./BWxcfB7D.js","./Bu-Ht3_k.js","./CompareLocationsListPage.DAGLKd87.css","./8B9oF3FD.js","./Y0Yv9c0n.js","./B_E9D6f9.js","./index.Bmb7dqV3.css","./BP60spIA.js","./2MFuCDYP.js","./CSN2VklL.js","./DTUKjkVs.js","./deTlz4Xl.js","./Ch6d2KaS.js","./D8LXqnI3.js","./DPpIf5H9.js","./CompareSnowForecastPage.gsMef9PD.css","./CSxvLFUY.js","./tCz-LGqA.js","./fIVAhJa3.js","./BSyM-Owr.js","./Bj1nV6Dw.js","./DgC3Gons.js","./DVt4vWB0.js","./buy.6wX1DnXh.css"])))=>i.map(i=>d[i]);
(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a26cbb50-4f85-4d93-a946-71d2160c1152",e._sentryDebugIdIdentifier="sentry-dbid-a26cbb50-4f85-4d93-a946-71d2160c1152")}catch{}})();var Uhe=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};Uhe.SENTRY_RELEASE={id:"8f990d73bab266bde58236145fe8f1b0a969e7df"};(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ca(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ii={},I_=[],oa=()=>{},v_=()=>!1,Ym=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),x3=e=>e.startsWith("onUpdate:"),Mi=Object.assign,w3=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Hhe=Object.prototype.hasOwnProperty,Yi=(e,t)=>Hhe.call(e,t),ir=Array.isArray,P_=e=>py(e)==="[object Map]",qm=e=>py(e)==="[object Set]",mk=e=>py(e)==="[object Date]",QX=e=>py(e)==="[object RegExp]",kr=e=>typeof e=="function",Kr=e=>typeof e=="string",Cl=e=>typeof e=="symbol",qi=e=>e!==null&&typeof e=="object",S3=e=>(qi(e)||kr(e))&&kr(e.then)&&kr(e.catch),b6=Object.prototype.toString,py=e=>b6.call(e),eZ=e=>py(e).slice(8,-1),AS=e=>py(e)==="[object Object]",E3=e=>Kr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qh=ca(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),tZ=ca("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),T3=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Whe=/-\w/g,Is=T3(e=>e.replace(Whe,t=>t.slice(1).toUpperCase())),Ghe=/\B([A-Z])/g,Ha=T3(e=>e.replace(Ghe,"-$1").toLowerCase()),Xm=T3(e=>e.charAt(0).toUpperCase()+e.slice(1)),O_=T3(e=>e?`on${Xm(e)}`:""),Va=(e,t)=>!Object.is(e,t),D_=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Y_=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},M2=e=>{const t=parseFloat(e);return isNaN(t)?e:t},A2=e=>{const t=Kr(e)?Number(e):NaN;return isNaN(t)?e:t};let pV;const CS=()=>pV||(pV=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Yhe=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;function qhe(e){return Yhe.test(e)?`__props.${e}`:`__props[${JSON.stringify(e)}]`}function Xhe(e,t){return e+JSON.stringify(t,(n,r)=>typeof r=="function"?r.toString():r)}const Zhe={TEXT:1,1:"TEXT",CLASS:2,2:"CLASS",STYLE:4,4:"STYLE",PROPS:8,8:"PROPS",FULL_PROPS:16,16:"FULL_PROPS",NEED_HYDRATION:32,32:"NEED_HYDRATION",STABLE_FRAGMENT:64,64:"STABLE_FRAGMENT",KEYED_FRAGMENT:128,128:"KEYED_FRAGMENT",UNKEYED_FRAGMENT:256,256:"UNKEYED_FRAGMENT",NEED_PATCH:512,512:"NEED_PATCH",DYNAMIC_SLOTS:1024,1024:"DYNAMIC_SLOTS",DEV_ROOT_FRAGMENT:2048,2048:"DEV_ROOT_FRAGMENT",CACHED:-1,"-1":"CACHED",BAIL:-2,"-2":"BAIL"},Khe={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"NEED_HYDRATION",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"CACHED",[-2]:"BAIL"},Jhe={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"},Qhe={STABLE:1,1:"STABLE",DYNAMIC:2,2:"DYNAMIC",FORWARDED:3,3:"FORWARDED"},efe={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},tfe="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",x6=ca(tfe),nfe=x6,mV=2;function nZ(e,t=0,n=e.length){if(t=Math.max(0,Math.min(t,e.length)),n=Math.max(0,Math.min(n,e.length)),t>n)return"";let r=e.split(/(\r?\n)/);const s=r.filter((i,f)=>f%2===1);r=r.filter((i,f)=>f%2===0);let o=0;const c=[];for(let i=0;i<r.length;i++)if(o+=r[i].length+(s[i]&&s[i].length||0),o>=t){for(let f=i-mV;f<=i+mV||n>o;f++){if(f<0||f>=r.length)continue;const g=f+1;c.push(`${g}${" ".repeat(Math.max(3-String(g).length,0))}|  ${r[f]}`);const x=r[f].length,w=s[f]&&s[f].length||0;if(f===i){const A=t-(o-(x+w)),C=Math.max(1,n>o?x-A:n-t);c.push("   |  "+" ".repeat(A)+"^".repeat(C))}else if(f>i){if(n>o){const A=Math.max(Math.min(n-o,x),1);c.push("   |  "+"^".repeat(A))}o+=x+w}}break}return c.join(`
`)}function Ta(e){if(ir(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Kr(r)?w6(r):Ta(r);if(s)for(const o in s)t[o]=s[o]}return t}else if(Kr(e)||qi(e))return e}const rfe=/;(?![^(]*\))/g,ife=/:([^]+)/,sfe=/\/\*[^]*?\*\//g;function w6(e){const t={};return e.replace(sfe,"").split(rfe).forEach(n=>{if(n){const r=n.split(ife);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ofe(e){if(!e)return"";if(Kr(e))return e;let t="";for(const n in e){const r=e[n];if(Kr(r)||typeof r=="number"){const s=n.startsWith("--")?n:Ha(n);t+=`${s}:${r};`}}return t}function Jn(e){let t="";if(Kr(e))t=e;else if(ir(e))for(let n=0;n<e.length;n++){const r=Jn(e[n]);r&&(t+=r+" ")}else if(qi(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function ym(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Kr(t)&&(e.class=Jn(t)),n&&(e.style=Ta(n)),e}const afe="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",lfe="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",cfe="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",ufe="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",rZ=ca(afe),iZ=ca(lfe),sZ=ca(cfe),oZ=ca(ufe),aZ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lZ=ca(aZ),dfe=ca(aZ+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function S6(e){return!!e||e===""}const hfe=/[>/="'\u0009\u000a\u000c\u0020]/,yD={};function ffe(e){if(yD.hasOwnProperty(e))return yD[e];const t=hfe.test(e);return t&&console.error(`unsafe attribute name: ${e}`),yD[e]=!t}const pfe={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},mfe=ca("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),gfe=ca("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan"),_fe=ca("accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns");function yfe(e){if(e==null)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"}const vfe=/["'&<>]/;function bfe(e){const t=""+e,n=vfe.exec(t);if(!n)return t;let r="",s,o,c=0;for(o=n.index;o<t.length;o++){switch(t.charCodeAt(o)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#39;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}c!==o&&(r+=t.slice(c,o)),c=o+1,r+=s}return c!==o?r+t.slice(c,o):r}const xfe=/^-?>|<!--|-->|--!>|<!-$/g;function wfe(e){return e.replace(xfe,"")}const cZ=/[ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g;function Sfe(e,t){return e.replace(cZ,n=>t?n==='"'?'\\\\\\"':`\\\\${n}`:`\\${n}`)}function Efe(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=nf(e[r],t[r]);return n}function nf(e,t){if(e===t)return!0;let n=mk(e),r=mk(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Cl(e),r=Cl(t),n||r)return e===t;if(n=ir(e),r=ir(t),n||r)return n&&r?Efe(e,t):!1;if(n=qi(e),r=qi(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,o=Object.keys(t).length;if(s!==o)return!1;for(const c in e){const i=e.hasOwnProperty(c),f=t.hasOwnProperty(c);if(i&&!f||!i&&f||!nf(e[c],t[c]))return!1}}return String(e)===String(t)}function IS(e,t){return e.findIndex(n=>nf(n,t))}const uZ=e=>!!(e&&e.__v_isRef===!0),is=e=>Kr(e)?e:e==null?"":ir(e)||qi(e)&&(e.toString===b6||!kr(e.toString))?uZ(e)?is(e.value):JSON.stringify(e,dZ,2):String(e),dZ=(e,t)=>uZ(t)?dZ(e,t.value):P_(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],o)=>(n[vD(r,o)+" =>"]=s,n),{})}:qm(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>vD(n))}:Cl(t)?vD(t):qi(t)&&!ir(t)&&!AS(t)?String(t):t,vD=(e,t="")=>{var n;return Cl(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};function hZ(e){return e==null?"initial":typeof e=="string"?e===""?" ":e:String(e)}const Tfe=Object.freeze(Object.defineProperty({__proto__:null,EMPTY_ARR:I_,EMPTY_OBJ:Ii,NO:v_,NOOP:oa,PatchFlagNames:Khe,PatchFlags:Zhe,ShapeFlags:Jhe,SlotFlags:Qhe,camelize:Is,capitalize:Xm,cssVarNameEscapeSymbolsRE:cZ,def:Y_,escapeHtml:bfe,escapeHtmlComment:wfe,extend:Mi,genCacheKey:Xhe,genPropsAccessExp:qhe,generateCodeFrame:nZ,getEscapedCssVarName:Sfe,getGlobalThis:CS,hasChanged:Va,hasOwn:Yi,hyphenate:Ha,includeBooleanAttr:S6,invokeArrayFns:D_,isArray:ir,isBooleanAttr:dfe,isBuiltInDirective:tZ,isDate:mk,isFunction:kr,isGloballyAllowed:x6,isGloballyWhitelisted:nfe,isHTMLTag:rZ,isIntegerKey:E3,isKnownHtmlAttr:mfe,isKnownMathMLAttr:_fe,isKnownSvgAttr:gfe,isMap:P_,isMathMLTag:sZ,isModelListener:x3,isObject:qi,isOn:Ym,isPlainObject:AS,isPromise:S3,isRegExp:QX,isRenderableAttrValue:yfe,isReservedProp:qh,isSSRSafeAttrName:ffe,isSVGTag:iZ,isSet:qm,isSpecialBooleanAttr:lZ,isString:Kr,isSymbol:Cl,isVoidTag:oZ,looseEqual:nf,looseIndexOf:IS,looseToNumber:M2,makeMap:ca,normalizeClass:Jn,normalizeCssVarValue:hZ,normalizeProps:ym,normalizeStyle:Ta,objectToString:b6,parseStringStyle:w6,propsToAttrMap:pfe,remove:w3,slotFlagsText:efe,stringifyStyle:ofe,toDisplayString:is,toHandlerKey:O_,toNumber:A2,toRawType:eZ,toTypeString:py},Symbol.toStringTag,{value:"Module"}));/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fa;class E6{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fa,!t&&Fa&&(this.index=(Fa.scopes||(Fa.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Fa;try{return Fa=this,t()}finally{Fa=n}}}on(){++this._on===1&&(this.prevScope=Fa,Fa=this)}off(){this._on>0&&--this._on===0&&(Fa=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function M3(e){return new E6(e)}function my(){return Fa}function F0(e,t=!1){Fa&&Fa.cleanups.push(e)}let Ms;const bD=new WeakSet;class C2{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fa&&Fa.active&&Fa.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,bD.has(this)&&(bD.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||pZ(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,gV(this),mZ(this);const t=Ms,n=Zu;Ms=this,Zu=!0;try{return this.fn()}finally{gZ(this),Ms=t,Zu=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)A6(t);this.deps=this.depsTail=void 0,gV(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?bD.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){gk(this)&&this.run()}get dirty(){return gk(this)}}let fZ=0,Ww,Gw;function pZ(e,t=!1){if(e.flags|=8,t){e.next=Gw,Gw=e;return}e.next=Ww,Ww=e}function T6(){fZ++}function M6(){if(--fZ>0)return;if(Gw){let t=Gw;for(Gw=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ww;){let t=Ww;for(Ww=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function mZ(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function gZ(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),A6(r),Mfe(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function gk(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(_Z(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function _Z(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===I2)||(e.globalVersion=I2,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!gk(e))))return;e.flags|=2;const t=e.dep,n=Ms,r=Zu;Ms=e,Zu=!0;try{mZ(e);const s=e.fn(e._value);(t.version===0||Va(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Ms=n,Zu=r,gZ(e),e.flags&=-3}}function A6(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)A6(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Mfe(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}function Afe(e,t){e.effect instanceof C2&&(e=e.effect.fn);const n=new C2(e);t&&Mi(n,t);try{n.run()}catch(s){throw n.stop(),s}const r=n.run.bind(n);return r.effect=n,r}function Cfe(e){e.effect.stop()}let Zu=!0;const yZ=[];function rf(){yZ.push(Zu),Zu=!1}function sf(){const e=yZ.pop();Zu=e===void 0?!0:e}function gV(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ms;Ms=void 0;try{t()}finally{Ms=n}}}let I2=0;class Ife{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class A3{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ms||!Zu||Ms===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ms)n=this.activeLink=new Ife(Ms,this),Ms.deps?(n.prevDep=Ms.depsTail,Ms.depsTail.nextDep=n,Ms.depsTail=n):Ms.deps=Ms.depsTail=n,vZ(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ms.depsTail,n.nextDep=void 0,Ms.depsTail.nextDep=n,Ms.depsTail=n,Ms.deps===n&&(Ms.deps=r)}return n}trigger(t){this.version++,I2++,this.notify(t)}notify(t){T6();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{M6()}}}function vZ(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)vZ(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const zC=new WeakMap,R_=Symbol(""),_k=Symbol(""),P2=Symbol("");function ja(e,t,n){if(Zu&&Ms){let r=zC.get(e);r||zC.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new A3),s.map=r,s.key=n),s.track()}}function $h(e,t,n,r,s,o){const c=zC.get(e);if(!c){I2++;return}const i=f=>{f&&f.trigger()};if(T6(),t==="clear")c.forEach(i);else{const f=ir(e),g=f&&E3(n);if(f&&n==="length"){const x=Number(r);c.forEach((w,A)=>{(A==="length"||A===P2||!Cl(A)&&A>=x)&&i(w)})}else switch((n!==void 0||c.has(void 0))&&i(c.get(n)),g&&i(c.get(P2)),t){case"add":f?g&&i(c.get("length")):(i(c.get(R_)),P_(e)&&i(c.get(_k)));break;case"delete":f||(i(c.get(R_)),P_(e)&&i(c.get(_k)));break;case"set":P_(e)&&i(c.get(R_));break}}M6()}function Pfe(e,t){const n=zC.get(e);return n&&n.get(t)}function Vv(e){const t=gi(e);return t===e?t:(ja(t,"iterate",P2),Ec(e)?t:t.map(xa))}function C3(e){return ja(e=gi(e),"iterate",P2),e}const Ofe={__proto__:null,[Symbol.iterator](){return xD(this,Symbol.iterator,xa)},concat(...e){return Vv(this).concat(...e.map(t=>ir(t)?Vv(t):t))},entries(){return xD(this,"entries",e=>(e[1]=xa(e[1]),e))},every(e,t){return Sh(this,"every",e,t,void 0,arguments)},filter(e,t){return Sh(this,"filter",e,t,n=>n.map(xa),arguments)},find(e,t){return Sh(this,"find",e,t,xa,arguments)},findIndex(e,t){return Sh(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Sh(this,"findLast",e,t,xa,arguments)},findLastIndex(e,t){return Sh(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Sh(this,"forEach",e,t,void 0,arguments)},includes(...e){return wD(this,"includes",e)},indexOf(...e){return wD(this,"indexOf",e)},join(e){return Vv(this).join(e)},lastIndexOf(...e){return wD(this,"lastIndexOf",e)},map(e,t){return Sh(this,"map",e,t,void 0,arguments)},pop(){return Zx(this,"pop")},push(...e){return Zx(this,"push",e)},reduce(e,...t){return _V(this,"reduce",e,t)},reduceRight(e,...t){return _V(this,"reduceRight",e,t)},shift(){return Zx(this,"shift")},some(e,t){return Sh(this,"some",e,t,void 0,arguments)},splice(...e){return Zx(this,"splice",e)},toReversed(){return Vv(this).toReversed()},toSorted(e){return Vv(this).toSorted(e)},toSpliced(...e){return Vv(this).toSpliced(...e)},unshift(...e){return Zx(this,"unshift",e)},values(){return xD(this,"values",xa)}};function xD(e,t,n){const r=C3(e),s=r[t]();return r!==e&&!Ec(e)&&(s._next=s.next,s.next=()=>{const o=s._next();return o.done||(o.value=n(o.value)),o}),s}const Dfe=Array.prototype;function Sh(e,t,n,r,s,o){const c=C3(e),i=c!==e&&!Ec(e),f=c[t];if(f!==Dfe[t]){const w=f.apply(e,o);return i?xa(w):w}let g=n;c!==e&&(i?g=function(w,A){return n.call(this,xa(w),A,e)}:n.length>2&&(g=function(w,A){return n.call(this,w,A,e)}));const x=f.call(c,g,r);return i&&s?s(x):x}function _V(e,t,n,r){const s=C3(e);let o=n;return s!==e&&(Ec(e)?n.length>3&&(o=function(c,i,f){return n.call(this,c,i,f,e)}):o=function(c,i,f){return n.call(this,c,xa(i),f,e)}),s[t](o,...r)}function wD(e,t,n){const r=gi(e);ja(r,"iterate",P2);const s=r[t](...n);return(s===-1||s===!1)&&O3(n[0])?(n[0]=gi(n[0]),r[t](...n)):s}function Zx(e,t,n=[]){rf(),T6();const r=gi(e)[t].apply(e,n);return M6(),sf(),r}const Rfe=ca("__proto__,__v_isRef,__isVue"),bZ=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Cl));function kfe(e){Cl(e)||(e=String(e));const t=gi(this);return ja(t,"has",e),t.hasOwnProperty(e)}class xZ{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(s?o?AZ:MZ:o?TZ:EZ).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const c=ir(t);if(!s){let f;if(c&&(f=Ofe[n]))return f;if(n==="hasOwnProperty")return kfe}const i=Reflect.get(t,n,Fi(t)?t:r);if((Cl(n)?bZ.has(n):Rfe(n))||(s||ja(t,"get",n),o))return i;if(Fi(i)){const f=c&&E3(n)?i:i.value;return s&&qi(f)?q_(f):f}return qi(i)?s?q_(i):Bo(i):i}}class wZ extends xZ{constructor(t=!1){super(!1,t)}set(t,n,r,s){let o=t[n];if(!this._isShallow){const f=Zd(o);if(!Ec(r)&&!Zd(r)&&(o=gi(o),r=gi(r)),!ir(t)&&Fi(o)&&!Fi(r))return f||(o.value=r),!0}const c=ir(t)&&E3(n)?Number(n)<t.length:Yi(t,n),i=Reflect.set(t,n,r,Fi(t)?t:s);return t===gi(s)&&(c?Va(r,o)&&$h(t,"set",n,r):$h(t,"add",n,r)),i}deleteProperty(t,n){const r=Yi(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&$h(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Cl(n)||!bZ.has(n))&&ja(t,"has",n),r}ownKeys(t){return ja(t,"iterate",ir(t)?"length":R_),Reflect.ownKeys(t)}}class SZ extends xZ{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Lfe=new wZ,Nfe=new SZ,Ffe=new wZ(!0),zfe=new SZ(!0),yk=e=>e,iM=e=>Reflect.getPrototypeOf(e);function Bfe(e,t,n){return function(...r){const s=this.__v_raw,o=gi(s),c=P_(o),i=e==="entries"||e===Symbol.iterator&&c,f=e==="keys"&&c,g=s[e](...r),x=n?yk:t?BC:xa;return!t&&ja(o,"iterate",f?_k:R_),{next(){const{value:w,done:A}=g.next();return A?{value:w,done:A}:{value:i?[x(w[0]),x(w[1])]:x(w),done:A}},[Symbol.iterator](){return this}}}}function sM(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function $fe(e,t){const n={get(s){const o=this.__v_raw,c=gi(o),i=gi(s);e||(Va(s,i)&&ja(c,"get",s),ja(c,"get",i));const{has:f}=iM(c),g=t?yk:e?BC:xa;if(f.call(c,s))return g(o.get(s));if(f.call(c,i))return g(o.get(i));o!==c&&o.get(s)},get size(){const s=this.__v_raw;return!e&&ja(gi(s),"iterate",R_),s.size},has(s){const o=this.__v_raw,c=gi(o),i=gi(s);return e||(Va(s,i)&&ja(c,"has",s),ja(c,"has",i)),s===i?o.has(s):o.has(s)||o.has(i)},forEach(s,o){const c=this,i=c.__v_raw,f=gi(i),g=t?yk:e?BC:xa;return!e&&ja(f,"iterate",R_),i.forEach((x,w)=>s.call(o,g(x),g(w),c))}};return Mi(n,e?{add:sM("add"),set:sM("set"),delete:sM("delete"),clear:sM("clear")}:{add(s){!t&&!Ec(s)&&!Zd(s)&&(s=gi(s));const o=gi(this);return iM(o).has.call(o,s)||(o.add(s),$h(o,"add",s,s)),this},set(s,o){!t&&!Ec(o)&&!Zd(o)&&(o=gi(o));const c=gi(this),{has:i,get:f}=iM(c);let g=i.call(c,s);g||(s=gi(s),g=i.call(c,s));const x=f.call(c,s);return c.set(s,o),g?Va(o,x)&&$h(c,"set",s,o):$h(c,"add",s,o),this},delete(s){const o=gi(this),{has:c,get:i}=iM(o);let f=c.call(o,s);f||(s=gi(s),f=c.call(o,s)),i&&i.call(o,s);const g=o.delete(s);return f&&$h(o,"delete",s,void 0),g},clear(){const s=gi(this),o=s.size!==0,c=s.clear();return o&&$h(s,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Bfe(s,e,t)}),n}function I3(e,t){const n=$fe(e,t);return(r,s,o)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Yi(n,s)&&s in r?n:r,s,o)}const Vfe={get:I3(!1,!1)},jfe={get:I3(!1,!0)},Ufe={get:I3(!0,!1)},Hfe={get:I3(!0,!0)},EZ=new WeakMap,TZ=new WeakMap,MZ=new WeakMap,AZ=new WeakMap;function Wfe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gfe(e){return e.__v_skip||!Object.isExtensible(e)?0:Wfe(eZ(e))}function Bo(e){return Zd(e)?e:P3(e,!1,Lfe,Vfe,EZ)}function Yu(e){return P3(e,!1,Ffe,jfe,TZ)}function q_(e){return P3(e,!0,Nfe,Ufe,MZ)}function Yfe(e){return P3(e,!0,zfe,Hfe,AZ)}function P3(e,t,n,r,s){if(!qi(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Gfe(e);if(o===0)return e;const c=s.get(e);if(c)return c;const i=new Proxy(e,o===2?r:n);return s.set(e,i),i}function Ku(e){return Zd(e)?Ku(e.__v_raw):!!(e&&e.__v_isReactive)}function Zd(e){return!!(e&&e.__v_isReadonly)}function Ec(e){return!!(e&&e.__v_isShallow)}function O3(e){return e?!!e.__v_raw:!1}function gi(e){const t=e&&e.__v_raw;return t?gi(t):e}function X_(e){return!Yi(e,"__v_skip")&&Object.isExtensible(e)&&Y_(e,"__v_skip",!0),e}const xa=e=>qi(e)?Bo(e):e,BC=e=>qi(e)?q_(e):e;function Fi(e){return e?e.__v_isRef===!0:!1}function yr(e){return CZ(e,!1)}function mo(e){return CZ(e,!0)}function CZ(e,t){return Fi(e)?e:new qfe(e,t)}class qfe{constructor(t,n){this.dep=new A3,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:gi(t),this._value=n?t:xa(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Ec(t)||Zd(t);t=r?t:gi(t),Va(t,n)&&(this._rawValue=t,this._value=r?t:xa(t),this.dep.trigger())}}function Xfe(e){e.dep&&e.dep.trigger()}function fn(e){return Fi(e)?e.value:e}function Xn(e){return kr(e)?e():fn(e)}const Zfe={get:(e,t,n)=>t==="__v_raw"?e:fn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Fi(s)&&!Fi(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function C6(e){return Ku(e)?e:new Proxy(e,Zfe)}class Kfe{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new A3,{get:r,set:s}=t(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(t){this._set(t)}}function D3(e){return new Kfe(e)}function I6(e){const t=ir(e)?new Array(e.length):{};for(const n in e)t[n]=IZ(e,n);return t}class Jfe{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Pfe(gi(this._object),this._key)}}class Qfe{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function vl(e,t,n){return Fi(e)?e:kr(e)?new Qfe(e):qi(e)&&arguments.length>1?IZ(e,t,n):yr(e)}function IZ(e,t,n){const r=e[t];return Fi(r)?r:new Jfe(e,t,n)}class epe{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new A3(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=I2-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ms!==this)return pZ(this,!0),!0}get value(){const t=this.dep.track();return _Z(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function tpe(e,t,n=!1){let r,s;return kr(e)?r=e:(r=e.get,s=e.set),new epe(r,s,n)}const npe={GET:"get",HAS:"has",ITERATE:"iterate"},rpe={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},oM={},$C=new WeakMap;let Hp;function ipe(){return Hp}function PZ(e,t=!1,n=Hp){if(n){let r=$C.get(n);r||$C.set(n,r=[]),r.push(e)}}function spe(e,t,n=Ii){const{immediate:r,deep:s,once:o,scheduler:c,augmentJob:i,call:f}=n,g=J=>s?J:Ec(J)||s===!1||s===0?Vh(J,1):Vh(J);let x,w,A,C,F=!1,z=!1;if(Fi(e)?(w=()=>e.value,F=Ec(e)):Ku(e)?(w=()=>g(e),F=!0):ir(e)?(z=!0,F=e.some(J=>Ku(J)||Ec(J)),w=()=>e.map(J=>{if(Fi(J))return J.value;if(Ku(J))return g(J);if(kr(J))return f?f(J,2):J()})):kr(e)?t?w=f?()=>f(e,2):e:w=()=>{if(A){rf();try{A()}finally{sf()}}const J=Hp;Hp=x;try{return f?f(e,3,[C]):e(C)}finally{Hp=J}}:w=oa,t&&s){const J=w,ee=s===!0?1/0:s;w=()=>Vh(J(),ee)}const j=my(),V=()=>{x.stop(),j&&j.active&&w3(j.effects,x)};if(o&&t){const J=t;t=(...ee)=>{J(...ee),V()}}let Y=z?new Array(e.length).fill(oM):oM;const te=J=>{if(!(!(x.flags&1)||!x.dirty&&!J))if(t){const ee=x.run();if(s||F||(z?ee.some((le,oe)=>Va(le,Y[oe])):Va(ee,Y))){A&&A();const le=Hp;Hp=x;try{const oe=[ee,Y===oM?void 0:z&&Y[0]===oM?[]:Y,C];Y=ee,f?f(t,3,oe):t(...oe)}finally{Hp=le}}}else x.run()};return i&&i(te),x=new C2(w),x.scheduler=c?()=>c(te,!1):te,C=J=>PZ(J,!1,x),A=x.onStop=()=>{const J=$C.get(x);if(J){if(f)f(J,4);else for(const ee of J)ee();$C.delete(x)}},t?r?te(!0):Y=x.run():c?c(te.bind(null,!0),!0):x.run(),V.pause=x.pause.bind(x),V.resume=x.resume.bind(x),V.stop=V,V}function Vh(e,t=1/0,n){if(t<=0||!qi(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Fi(e))Vh(e.value,t,n);else if(ir(e))for(let r=0;r<e.length;r++)Vh(e[r],t,n);else if(qm(e)||P_(e))e.forEach(r=>{Vh(r,t,n)});else if(AS(e)){for(const r in e)Vh(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Vh(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const OZ=[];function ope(e){OZ.push(e)}function ape(){OZ.pop()}function lpe(e,t){}const cpe={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},upe={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function I1(e,t,n,r){try{return r?e(...r):e()}catch(s){gy(s,t,n)}}function eu(e,t,n,r){if(kr(e)){const s=I1(e,t,n,r);return s&&S3(s)&&s.catch(o=>{gy(o,t,n)}),s}if(ir(e)){const s=[];for(let o=0;o<e.length;o++)s.push(eu(e[o],t,n,r));return s}}function gy(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:c}=t&&t.appContext.config||Ii;if(t){let i=t.parent;const f=t.proxy,g=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const x=i.ec;if(x){for(let w=0;w<x.length;w++)if(x[w](e,f,g)===!1)return}i=i.parent}if(o){rf(),I1(o,null,10,[e,f,g]),sf();return}}dpe(e,n,s,r,c)}function dpe(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const gl=[];let Rd=-1;const b0=[];let Wp=null,Qv=0;const DZ=Promise.resolve();let VC=null;function es(e){const t=VC||DZ;return e?t.then(this?e.bind(this):e):t}function hpe(e){let t=Rd+1,n=gl.length;for(;t<n;){const r=t+n>>>1,s=gl[r],o=D2(s);o<e||o===e&&s.flags&2?t=r+1:n=r}return t}function P6(e){if(!(e.flags&1)){const t=D2(e),n=gl[gl.length-1];!n||!(e.flags&2)&&t>=D2(n)?gl.push(e):gl.splice(hpe(t),0,e),e.flags|=1,RZ()}}function RZ(){VC||(VC=DZ.then(kZ))}function O2(e){ir(e)?b0.push(...e):Wp&&e.id===-1?Wp.splice(Qv+1,0,e):e.flags&1||(b0.push(e),e.flags|=1),RZ()}function yV(e,t,n=Rd+1){for(;n<gl.length;n++){const r=gl[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;gl.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function jC(e){if(b0.length){const t=[...new Set(b0)].sort((n,r)=>D2(n)-D2(r));if(b0.length=0,Wp){Wp.push(...t);return}for(Wp=t,Qv=0;Qv<Wp.length;Qv++){const n=Wp[Qv];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Wp=null,Qv=0}}const D2=e=>e.id==null?e.flags&2?-1:1/0:e.id;function kZ(e){try{for(Rd=0;Rd<gl.length;Rd++){const t=gl[Rd];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),I1(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Rd<gl.length;Rd++){const t=gl[Rd];t&&(t.flags&=-2)}Rd=-1,gl.length=0,jC(),VC=null,(gl.length||b0.length)&&kZ()}}let Hu,Mw=[],vk=!1;function R3(e,...t){Hu?Hu.emit(e,...t):vk||Mw.push({event:e,args:t})}function O6(e,t){var n,r;Hu=e,Hu?(Hu.enabled=!0,Mw.forEach(({event:s,args:o})=>Hu.emit(s,...o)),Mw=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(o=>{O6(o,t)}),setTimeout(()=>{Hu||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,vk=!0,Mw=[])},3e3)):(vk=!0,Mw=[])}function fpe(e,t){R3("app:init",e,t,{Fragment:ei,Text:Xh,Comment:po,Static:bm})}function ppe(e){R3("app:unmount",e)}const bk=D6("component:added"),LZ=D6("component:updated"),mpe=D6("component:removed"),gpe=e=>{Hu&&typeof Hu.cleanupBuffer=="function"&&!Hu.cleanupBuffer(e)&&mpe(e)};function D6(e){return t=>{R3(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}function _pe(e,t,n){R3("component:emit",e.appContext.app,e,t,n)}let Sa=null,k3=null;function R2(e){const t=Sa;return Sa=e,k3=e&&e.type.__scopeId||null,t}function NZ(e){k3=e}function FZ(){k3=null}const zZ=e=>Dr;function Dr(e,t=Sa,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&F2(-1);const o=R2(t);let c;try{c=e(...s)}finally{R2(o),r._d&&F2(1)}return LZ(t),c};return r._n=!0,r._c=!0,r._d=!0,r}function k2(e,t){if(Sa===null)return e;const n=DS(Sa),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,c,i,f=Ii]=t[s];o&&(kr(o)&&(o={mounted:o,updated:o}),o.deep&&Vh(c),r.push({dir:o,instance:n,value:c,oldValue:void 0,arg:i,modifiers:f}))}return e}function Ld(e,t,n,r){const s=e.dirs,o=t&&t.dirs;for(let c=0;c<s.length;c++){const i=s[c];o&&(i.oldValue=o[c].value);let f=i.dir[r];f&&(rf(),eu(f,n,8,[e.el,i,e,t]),sf())}}const BZ=Symbol("_vte"),$Z=e=>e.__isTeleport,Yw=e=>e&&(e.disabled||e.disabled===""),vV=e=>e&&(e.defer||e.defer===""),bV=e=>typeof SVGElement<"u"&&e instanceof SVGElement,xV=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,xk=(e,t)=>{const n=e&&e.to;return Kr(n)?t?t(n):null:n},VZ={name:"Teleport",__isTeleport:!0,process(e,t,n,r,s,o,c,i,f,g){const{mc:x,pc:w,pbc:A,o:{insert:C,querySelector:F,createText:z,createComment:j}}=g,V=Yw(t.props);let{shapeFlag:Y,children:te,dynamicChildren:J}=t;if(e==null){const ee=t.el=z(""),le=t.anchor=z("");C(ee,n,r),C(le,n,r);const oe=(se,ie)=>{Y&16&&x(te,se,ie,s,o,c,i,f)},ve=()=>{const se=t.target=xk(t.props,F),ie=jZ(se,t,z,C);se&&(c!=="svg"&&bV(se)?c="svg":c!=="mathml"&&xV(se)&&(c="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(se),V||(oe(se,ie),kA(t,!1)))};V&&(oe(n,le),kA(t,!0)),vV(t.props)?(t.el.__isMounted=!1,qo(()=>{ve(),delete t.el.__isMounted},o)):ve()}else{if(vV(t.props)&&e.el.__isMounted===!1){qo(()=>{VZ.process(e,t,n,r,s,o,c,i,f,g)},o);return}t.el=e.el,t.targetStart=e.targetStart;const ee=t.anchor=e.anchor,le=t.target=e.target,oe=t.targetAnchor=e.targetAnchor,ve=Yw(e.props),se=ve?n:le,ie=ve?ee:oe;if(c==="svg"||bV(le)?c="svg":(c==="mathml"||xV(le))&&(c="mathml"),J?(A(e.dynamicChildren,J,se,s,o,c,i),Y6(e,t,!0)):f||w(e,t,se,ie,s,o,c,i,!1),V)ve?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):aM(t,n,ee,g,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const pe=t.target=xk(t.props,F);pe&&aM(t,pe,null,g,0)}else ve&&aM(t,le,oe,g,1);kA(t,V)}},remove(e,t,n,{um:r,o:{remove:s}},o){const{shapeFlag:c,children:i,anchor:f,targetStart:g,targetAnchor:x,target:w,props:A}=e;if(w&&(s(g),s(x)),o&&s(f),c&16){const C=o||!Yw(A);for(let F=0;F<i.length;F++){const z=i[F];r(z,t,n,C,!!z.dynamicChildren)}}},move:aM,hydrate:ype};function aM(e,t,n,{o:{insert:r},m:s},o=2){o===0&&r(e.targetAnchor,t,n);const{el:c,anchor:i,shapeFlag:f,children:g,props:x}=e,w=o===2;if(w&&r(c,t,n),(!w||Yw(x))&&f&16)for(let A=0;A<g.length;A++)s(g[A],t,n,2);w&&r(i,t,n)}function ype(e,t,n,r,s,o,{o:{nextSibling:c,parentNode:i,querySelector:f,insert:g,createText:x}},w){function A(z,j,V,Y){j.anchor=w(c(z),j,i(z),n,r,s,o),j.targetStart=V,j.targetAnchor=Y}const C=t.target=xk(t.props,f),F=Yw(t.props);if(C){const z=C._lpa||C.firstChild;if(t.shapeFlag&16)if(F)A(e,t,z,z&&c(z));else{t.anchor=c(e);let j=z;for(;j;){if(j&&j.nodeType===8){if(j.data==="teleport start anchor")t.targetStart=j;else if(j.data==="teleport anchor"){t.targetAnchor=j,C._lpa=t.targetAnchor&&c(t.targetAnchor);break}}j=c(j)}t.targetAnchor||jZ(C,t,x,g),w(z&&c(z),t,C,n,r,s,o)}kA(t,F)}else F&&t.shapeFlag&16&&A(e,t,e,c(e));return t.anchor&&c(t.anchor)}const vpe=VZ;function kA(e,t){const n=e.ctx;if(n&&n.ut){let r,s;for(t?(r=e.el,s=e.anchor):(r=e.targetStart,s=e.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function jZ(e,t,n,r){const s=t.targetStart=n(""),o=t.targetAnchor=n("");return s[BZ]=o,e&&(r(s,e),r(o,e)),o}const Nh=Symbol("_leaveCb"),lM=Symbol("_enterCb");function R6(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ua(()=>{e.isMounted=!0}),Mf(()=>{e.isUnmounting=!0}),e}const $c=[Function,Array],k6={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:$c,onEnter:$c,onAfterEnter:$c,onEnterCancelled:$c,onBeforeLeave:$c,onLeave:$c,onAfterLeave:$c,onLeaveCancelled:$c,onBeforeAppear:$c,onAppear:$c,onAfterAppear:$c,onAppearCancelled:$c},UZ=e=>{const t=e.subTree;return t.component?UZ(t.component):t},bpe={name:"BaseTransition",props:k6,setup(e,{slots:t}){const n=zs(),r=R6();return()=>{const s=t.default&&L3(t.default(),!0);if(!s||!s.length)return;const o=HZ(s),c=gi(e),{mode:i}=c;if(r.isLeaving)return SD(o);const f=wV(o);if(!f)return SD(o);let g=z0(f,c,r,n,w=>g=w);f.type!==po&&of(f,g);let x=n.subTree&&wV(n.subTree);if(x&&x.type!==po&&!Wu(x,f)&&UZ(n).type!==po){let w=z0(x,c,r,n);if(of(x,w),i==="out-in"&&f.type!==po)return r.isLeaving=!0,w.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete w.afterLeave,x=void 0},SD(o);i==="in-out"&&f.type!==po?w.delayLeave=(A,C,F)=>{const z=GZ(r,x);z[String(x.key)]=x,A[Nh]=()=>{C(),A[Nh]=void 0,delete g.delayedLeave,x=void 0},g.delayedLeave=()=>{F(),delete g.delayedLeave,x=void 0}}:x=void 0}else x&&(x=void 0);return o}}};function HZ(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==po){t=n;break}}return t}const WZ=bpe;function GZ(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function z0(e,t,n,r,s){const{appear:o,mode:c,persisted:i=!1,onBeforeEnter:f,onEnter:g,onAfterEnter:x,onEnterCancelled:w,onBeforeLeave:A,onLeave:C,onAfterLeave:F,onLeaveCancelled:z,onBeforeAppear:j,onAppear:V,onAfterAppear:Y,onAppearCancelled:te}=t,J=String(e.key),ee=GZ(n,e),le=(se,ie)=>{se&&eu(se,r,9,ie)},oe=(se,ie)=>{const pe=ie[1];le(se,ie),ir(se)?se.every(be=>be.length<=1)&&pe():se.length<=1&&pe()},ve={mode:c,persisted:i,beforeEnter(se){let ie=f;if(!n.isMounted)if(o)ie=j||f;else return;se[Nh]&&se[Nh](!0);const pe=ee[J];pe&&Wu(e,pe)&&pe.el[Nh]&&pe.el[Nh](),le(ie,[se])},enter(se){let ie=g,pe=x,be=w;if(!n.isMounted)if(o)ie=V||g,pe=Y||x,be=te||w;else return;let Se=!1;const Ce=se[lM]=Ee=>{Se||(Se=!0,Ee?le(be,[se]):le(pe,[se]),ve.delayedLeave&&ve.delayedLeave(),se[lM]=void 0)};ie?oe(ie,[se,Ce]):Ce()},leave(se,ie){const pe=String(e.key);if(se[lM]&&se[lM](!0),n.isUnmounting)return ie();le(A,[se]);let be=!1;const Se=se[Nh]=Ce=>{be||(be=!0,ie(),Ce?le(z,[se]):le(F,[se]),se[Nh]=void 0,ee[pe]===e&&delete ee[pe])};ee[pe]=e,C?oe(C,[se,Se]):Se()},clone(se){const ie=z0(se,t,n,r,s);return s&&s(ie),ie}};return ve}function SD(e){if(PS(e))return e=rd(e),e.children=null,e}function wV(e){if(!PS(e))return $Z(e.type)&&e.children?HZ(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&kr(n.default))return n.default()}}function of(e,t){e.shapeFlag&6&&e.component?(e.transition=t,of(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function L3(e,t=!1,n){let r=[],s=0;for(let o=0;o<e.length;o++){let c=e[o];const i=n==null?c.key:String(n)+String(c.key!=null?c.key:o);c.type===ei?(c.patchFlag&128&&s++,r=r.concat(L3(c.children,t,i))):(t||c.type!==po)&&r.push(i!=null?rd(c,{key:i}):c)}if(s>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function ki(e,t){return kr(e)?Mi({name:e.name},t,{setup:e}):e}function xpe(){const e=zs();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function L6(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function LA(e){const t=zs(),n=mo(null);if(t){const s=t.refs===Ii?t.refs={}:t.refs;Object.defineProperty(s,e,{enumerable:!0,get:()=>n.value,set:o=>n.value=o})}return n}const UC=new WeakMap;function x0(e,t,n,r,s=!1){if(ir(e)){e.forEach((F,z)=>x0(F,t&&(ir(t)?t[z]:t),n,r,s));return}if(vm(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&x0(e,t,n,r.component.subTree);return}const o=r.shapeFlag&4?DS(r.component):r.el,c=s?null:o,{i,r:f}=e,g=t&&t.r,x=i.refs===Ii?i.refs={}:i.refs,w=i.setupState,A=gi(w),C=w===Ii?v_:F=>Yi(A,F);if(g!=null&&g!==f){if(SV(t),Kr(g))x[g]=null,C(g)&&(w[g]=null);else if(Fi(g)){g.value=null;const F=t;F.k&&(x[F.k]=null)}}if(kr(f))I1(f,i,12,[c,x]);else{const F=Kr(f),z=Fi(f);if(F||z){const j=()=>{if(e.f){const V=F?C(f)?w[f]:x[f]:f.value;if(s)ir(V)&&w3(V,o);else if(ir(V))V.includes(o)||V.push(o);else if(F)x[f]=[o],C(f)&&(w[f]=x[f]);else{const Y=[o];f.value=Y,e.k&&(x[e.k]=Y)}}else F?(x[f]=c,C(f)&&(w[f]=c)):z&&(f.value=c,e.k&&(x[e.k]=c))};if(c){const V=()=>{j(),UC.delete(e)};V.id=-1,UC.set(e,V),qo(V,n)}else SV(e),j()}}}function SV(e){const t=UC.get(e);t&&(t.flags|=8,UC.delete(e))}let EV=!1;const jv=()=>{EV||(console.error("Hydration completed but contains mismatches."),EV=!0)},wpe=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",Spe=e=>e.namespaceURI.includes("MathML"),cM=e=>{if(e.nodeType===1){if(wpe(e))return"svg";if(Spe(e))return"mathml"}},o0=e=>e.nodeType===8;function Epe(e){const{mt:t,p:n,o:{patchProp:r,createText:s,nextSibling:o,parentNode:c,remove:i,insert:f,createComment:g}}=e,x=(te,J)=>{if(!J.hasChildNodes()){n(null,te,J),jC(),J._vnode=te;return}w(J.firstChild,te,null,null,null),jC(),J._vnode=te},w=(te,J,ee,le,oe,ve=!1)=>{ve=ve||!!J.dynamicChildren;const se=o0(te)&&te.data==="[",ie=()=>z(te,J,ee,le,oe,se),{type:pe,ref:be,shapeFlag:Se,patchFlag:Ce}=J;let Ee=te.nodeType;J.el=te,Y_(te,"__vnode",J,!0),Y_(te,"__vueParentComponent",ee,!0),Ce===-2&&(ve=!1,J.dynamicChildren=null);let xe=null;switch(pe){case Xh:Ee!==3?J.children===""?(f(J.el=s(""),c(te),te),xe=te):xe=ie():(te.data!==J.children&&(jv(),te.data=J.children),xe=o(te));break;case po:Y(te)?(xe=o(te),V(J.el=te.content.firstChild,te,ee)):Ee!==8||se?xe=ie():xe=o(te);break;case bm:if(se&&(te=o(te),Ee=te.nodeType),Ee===1||Ee===3){xe=te;const ke=!J.children.length;for(let He=0;He<J.staticCount;He++)ke&&(J.children+=xe.nodeType===1?xe.outerHTML:xe.data),He===J.staticCount-1&&(J.anchor=xe),xe=o(xe);return se?o(xe):xe}else ie();break;case ei:se?xe=F(te,J,ee,le,oe,ve):xe=ie();break;default:if(Se&1)(Ee!==1||J.type.toLowerCase()!==te.tagName.toLowerCase())&&!Y(te)?xe=ie():xe=A(te,J,ee,le,oe,ve);else if(Se&6){J.slotScopeIds=oe;const ke=c(te);if(se?xe=j(te):o0(te)&&te.data==="teleport start"?xe=j(te,te.data,"teleport end"):xe=o(te),t(J,ke,null,ee,le,cM(ke),ve),vm(J)&&!J.type.__asyncResolved){let He;se?(He=Un(ei),He.anchor=xe?xe.previousSibling:ke.lastChild):He=te.nodeType===3?Rr(""):Un("div"),He.el=te,J.component.subTree=He}}else Se&64?Ee!==8?xe=ie():xe=J.type.hydrate(te,J,ee,le,oe,ve,e,C):Se&128&&(xe=J.type.hydrate(te,J,ee,le,cM(c(te)),oe,ve,e,w))}return be!=null&&x0(be,null,le,J),xe},A=(te,J,ee,le,oe,ve)=>{ve=ve||!!J.dynamicChildren;const{type:se,props:ie,patchFlag:pe,shapeFlag:be,dirs:Se,transition:Ce}=J,Ee=se==="input"||se==="option";if(Ee||pe!==-1){Se&&Ld(J,null,ee,"created");let xe=!1;if(Y(te)){xe=mK(null,Ce)&&ee&&ee.vnode.props&&ee.vnode.props.appear;const He=te.content.firstChild;if(xe){const Ke=He.getAttribute("class");Ke&&(He.$cls=Ke),Ce.beforeEnter(He)}V(He,te,ee),J.el=te=He}if(be&16&&!(ie&&(ie.innerHTML||ie.textContent))){let He=C(te.firstChild,J,te,ee,le,oe,ve);for(;He;){uM(te,1)||jv();const Ke=He;He=He.nextSibling,i(Ke)}}else if(be&8){let He=J.children;He[0]===`
`&&(te.tagName==="PRE"||te.tagName==="TEXTAREA")&&(He=He.slice(1)),te.textContent!==He&&(uM(te,0)||jv(),te.textContent=J.children)}if(ie){if(Ee||!ve||pe&48){const He=te.tagName.includes("-");for(const Ke in ie)(Ee&&(Ke.endsWith("value")||Ke==="indeterminate")||Ym(Ke)&&!qh(Ke)||Ke[0]==="."||He)&&r(te,Ke,null,ie[Ke],void 0,ee)}else if(ie.onClick)r(te,"onClick",null,ie.onClick,void 0,ee);else if(pe&4&&Ku(ie.style))for(const He in ie.style)ie.style[He]}let ke;(ke=ie&&ie.onVnodeBeforeMount)&&Xl(ke,ee,J),Se&&Ld(J,null,ee,"beforeMount"),((ke=ie&&ie.onVnodeMounted)||Se||xe)&&EK(()=>{ke&&Xl(ke,ee,J),xe&&Ce.enter(te),Se&&Ld(J,null,ee,"mounted")},le)}return te.nextSibling},C=(te,J,ee,le,oe,ve,se)=>{se=se||!!J.dynamicChildren;const ie=J.children,pe=ie.length;for(let be=0;be<pe;be++){const Se=se?ie[be]:ie[be]=Zl(ie[be]),Ce=Se.type===Xh;te?(Ce&&!se&&be+1<pe&&Zl(ie[be+1]).type===Xh&&(f(s(te.data.slice(Se.children.length)),ee,o(te)),te.data=Se.children),te=w(te,Se,le,oe,ve,se)):Ce&&!Se.children?f(Se.el=s(""),ee):(uM(ee,1)||jv(),n(null,Se,ee,null,le,oe,cM(ee),ve))}return te},F=(te,J,ee,le,oe,ve)=>{const{slotScopeIds:se}=J;se&&(oe=oe?oe.concat(se):se);const ie=c(te),pe=C(o(te),J,ie,ee,le,oe,ve);return pe&&o0(pe)&&pe.data==="]"?o(J.anchor=pe):(jv(),f(J.anchor=g("]"),ie,pe),pe)},z=(te,J,ee,le,oe,ve)=>{if(uM(te.parentElement,1)||jv(),J.el=null,ve){const pe=j(te);for(;;){const be=o(te);if(be&&be!==pe)i(be);else break}}const se=o(te),ie=c(te);return i(te),n(null,J,ie,se,ee,le,cM(ie),oe),ee&&(ee.vnode.el=J.el,B3(ee,J.el)),se},j=(te,J="[",ee="]")=>{let le=0;for(;te;)if(te=o(te),te&&o0(te)&&(te.data===J&&le++,te.data===ee)){if(le===0)return o(te);le--}return te},V=(te,J,ee)=>{const le=J.parentNode;le&&le.replaceChild(te,J);let oe=ee;for(;oe;)oe.vnode.el===J&&(oe.vnode.el=oe.subTree.el=te),oe=oe.parent},Y=te=>te.nodeType===1&&te.tagName==="TEMPLATE";return[x,w]}const TV="data-allow-mismatch",Tpe={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function uM(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(TV);)e=e.parentElement;const n=e&&e.getAttribute(TV);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return t===0&&r.includes("children")?!0:r.includes(Tpe[t])}}const Mpe=CS().requestIdleCallback||(e=>setTimeout(e,1)),Ape=CS().cancelIdleCallback||(e=>clearTimeout(e)),Cpe=(e=1e4)=>t=>{const n=Mpe(t,{timeout:e});return()=>Ape(n)};function Ipe(e){const{top:t,left:n,bottom:r,right:s}=e.getBoundingClientRect(),{innerHeight:o,innerWidth:c}=window;return(t>0&&t<o||r>0&&r<o)&&(n>0&&n<c||s>0&&s<c)}const Ppe=e=>(t,n)=>{const r=new IntersectionObserver(s=>{for(const o of s)if(o.isIntersecting){r.disconnect(),t();break}},e);return n(s=>{if(s instanceof Element){if(Ipe(s))return t(),r.disconnect(),!1;r.observe(s)}}),()=>r.disconnect()},Ope=e=>t=>{if(e){const n=matchMedia(e);if(n.matches)t();else return n.addEventListener("change",t,{once:!0}),()=>n.removeEventListener("change",t)}},Dpe=(e=[])=>(t,n)=>{Kr(e)&&(e=[e]);let r=!1;const s=c=>{r||(r=!0,o(),t(),c.target.dispatchEvent(new c.constructor(c.type,c)))},o=()=>{n(c=>{for(const i of e)c.removeEventListener(i,s)})};return n(c=>{for(const i of e)c.addEventListener(i,s,{once:!0})}),o};function Rpe(e,t){if(o0(e)&&e.data==="["){let n=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(t(r)===!1)break}else if(o0(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else t(e)}const vm=e=>!!e.type.__asyncLoader;function sm(e){kr(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:o,timeout:c,suspensible:i=!0,onError:f}=e;let g=null,x,w=0;const A=()=>(w++,g=null,C()),C=()=>{let F;return g||(F=g=t().catch(z=>{if(z=z instanceof Error?z:new Error(String(z)),f)return new Promise((j,V)=>{f(z,()=>j(A()),()=>V(z),w+1)});throw z}).then(z=>F!==g&&g?g:(z&&(z.__esModule||z[Symbol.toStringTag]==="Module")&&(z=z.default),x=z,z)))};return ki({name:"AsyncComponentWrapper",__asyncLoader:C,__asyncHydrate(F,z,j){let V=!1;(z.bu||(z.bu=[])).push(()=>V=!0);const Y=()=>{V||j()},te=o?()=>{const J=o(Y,ee=>Rpe(F,ee));J&&(z.bum||(z.bum=[])).push(J)}:Y;x?te():C().then(()=>!z.isUnmounted&&te())},get __asyncResolved(){return x},setup(){const F=wa;if(L6(F),x)return()=>ED(x,F);const z=te=>{g=null,gy(te,F,13,!r)};if(i&&F.suspense||$0)return C().then(te=>()=>ED(te,F)).catch(te=>(z(te),()=>r?Un(r,{error:te}):null));const j=yr(!1),V=yr(),Y=yr(!!s);return s&&setTimeout(()=>{Y.value=!1},s),c!=null&&setTimeout(()=>{if(!j.value&&!V.value){const te=new Error(`Async component timed out after ${c}ms.`);z(te),V.value=te}},c),C().then(()=>{j.value=!0,F.parent&&PS(F.parent.vnode)&&F.parent.update()}).catch(te=>{z(te),V.value=te}),()=>{if(j.value&&x)return ED(x,F);if(V.value&&r)return Un(r,{error:V.value});if(n&&!Y.value)return Un(n)}}})}function ED(e,t){const{ref:n,props:r,children:s,ce:o}=t.vnode,c=Un(e,r,s);return c.ref=n,c.ce=o,delete t.vnode.ce,c}const PS=e=>e.type.__isKeepAlive,kpe={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=zs(),r=n.ctx;if(!r.renderer)return()=>{const Y=t.default&&t.default();return Y&&Y.length===1?Y[0]:Y};const s=new Map,o=new Set;let c=null;n.__v_cache=s;const i=n.suspense,{renderer:{p:f,m:g,um:x,o:{createElement:w}}}=r,A=w("div");r.activate=(Y,te,J,ee,le)=>{const oe=Y.component;g(Y,te,J,0,i),f(oe.vnode,Y,te,J,oe,i,ee,Y.slotScopeIds,le),qo(()=>{oe.isDeactivated=!1,oe.a&&D_(oe.a);const ve=Y.props&&Y.props.onVnodeMounted;ve&&Xl(ve,oe.parent,Y)},i),bk(oe)},r.deactivate=Y=>{const te=Y.component;GC(te.m),GC(te.a),g(Y,A,null,1,i),qo(()=>{te.da&&D_(te.da);const J=Y.props&&Y.props.onVnodeUnmounted;J&&Xl(J,te.parent,Y),te.isDeactivated=!0},i),bk(te)};function C(Y){TD(Y),x(Y,n,i,!0)}function F(Y){s.forEach((te,J)=>{const ee=Dk(te.type);ee&&!Y(ee)&&z(J)})}function z(Y){const te=s.get(Y);te&&(!c||!Wu(te,c))?C(te):c&&TD(c),s.delete(Y),o.delete(Y)}Hr(()=>[e.include,e.exclude],([Y,te])=>{Y&&F(J=>Aw(Y,J)),te&&F(J=>!Aw(te,J))},{flush:"post",deep:!0});let j=null;const V=()=>{j!=null&&(YC(n.subTree.type)?qo(()=>{s.set(j,dM(n.subTree))},n.subTree.suspense):s.set(j,dM(n.subTree)))};return ua(V),F3(V),Mf(()=>{s.forEach(Y=>{const{subTree:te,suspense:J}=n,ee=dM(te);if(Y.type===ee.type&&Y.key===ee.key){TD(ee);const le=ee.component.da;le&&qo(le,J);return}C(Y)})}),()=>{if(j=null,!t.default)return c=null;const Y=t.default(),te=Y[0];if(Y.length>1)return c=null,Y;if(!af(te)||!(te.shapeFlag&4)&&!(te.shapeFlag&128))return c=null,te;let J=dM(te);if(J.type===po)return c=null,J;const ee=J.type,le=Dk(vm(J)?J.type.__asyncResolved||{}:ee),{include:oe,exclude:ve,max:se}=e;if(oe&&(!le||!Aw(oe,le))||ve&&le&&Aw(ve,le))return J.shapeFlag&=-257,c=J,te;const ie=J.key==null?ee:J.key,pe=s.get(ie);return J.el&&(J=rd(J),te.shapeFlag&128&&(te.ssContent=J)),j=ie,pe?(J.el=pe.el,J.component=pe.component,J.transition&&of(J,J.transition),J.shapeFlag|=512,o.delete(ie),o.add(ie)):(o.add(ie),se&&o.size>parseInt(se,10)&&z(o.values().next().value)),J.shapeFlag|=256,c=J,YC(te.type)?te:J}}},YZ=kpe;function Aw(e,t){return ir(e)?e.some(n=>Aw(n,t)):Kr(e)?e.split(",").includes(t):QX(e)?(e.lastIndex=0,e.test(t)):!1}function N6(e,t){qZ(e,"a",t)}function F6(e,t){qZ(e,"da",t)}function qZ(e,t,n=wa){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(N3(t,r,n),n){let s=n.parent;for(;s&&s.parent;)PS(s.parent.vnode)&&Lpe(r,t,n,s),s=s.parent}}function Lpe(e,t,n,r){const s=N3(t,e,r,!0);_y(()=>{w3(r[t],s)},n)}function TD(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function dM(e){return e.shapeFlag&128?e.ssContent:e}function N3(e,t,n=wa,r=!1){if(n){const s=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...c)=>{rf();const i=K_(n),f=eu(t,n,e,c);return i(),sf(),f});return r?s.unshift(o):s.push(o),o}}const Tf=e=>(t,n=wa)=>{(!$0||e==="sp")&&N3(e,(...r)=>t(...r),n)},XZ=Tf("bm"),ua=Tf("m"),z6=Tf("bu"),F3=Tf("u"),Mf=Tf("bum"),_y=Tf("um"),B6=Tf("sp"),ZZ=Tf("rtg"),KZ=Tf("rtc");function HC(e,t=wa){N3("ec",e,t)}const $6="components",Npe="directives";function eo(e,t){return j6($6,e,!0,t)||e}const JZ=Symbol.for("v-ndc");function P1(e){return Kr(e)?j6($6,e,!1)||e:e||JZ}function V6(e){return j6(Npe,e)}function j6(e,t,n=!0,r=!1){const s=Sa||wa;if(s){const o=s.type;if(e===$6){const i=Dk(o,!1);if(i&&(i===t||i===Is(t)||i===Xm(Is(t))))return o}const c=MV(s[e]||o[e],t)||MV(s.appContext[e],t);return!c&&r?o:c}}function MV(e,t){return e&&(e[t]||e[Is(t)]||e[Xm(Is(t))])}function So(e,t,n,r){let s;const o=n&&n[r],c=ir(e);if(c||Kr(e)){const i=c&&Ku(e);let f=!1,g=!1;i&&(f=!Ec(e),g=Zd(e),e=C3(e)),s=new Array(e.length);for(let x=0,w=e.length;x<w;x++)s[x]=t(f?g?BC(xa(e[x])):xa(e[x]):e[x],x,void 0,o&&o[x])}else if(typeof e=="number"){s=new Array(e);for(let i=0;i<e;i++)s[i]=t(i+1,i,void 0,o&&o[i])}else if(qi(e))if(e[Symbol.iterator])s=Array.from(e,(i,f)=>t(i,f,void 0,o&&o[f]));else{const i=Object.keys(e);s=new Array(i.length);for(let f=0,g=i.length;f<g;f++){const x=i[f];s[f]=t(e[x],x,f,o&&o[f])}}else s=[];return n&&(n[r]=s),s}function Fpe(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(ir(r))for(let s=0;s<r.length;s++)e[r[s].name]=r[s].fn;else r&&(e[r.name]=r.key?(...s)=>{const o=r.fn(...s);return o&&(o.key=r.key),o}:r.fn)}return e}function Co(e,t,n={},r,s){if(Sa.ce||Sa.parent&&vm(Sa.parent)&&Sa.parent.ce){const g=Object.keys(n).length>0;return t!=="default"&&(n.name=t),ln(),Zr(ei,null,[Un("slot",n,r&&r())],g?-2:64)}let o=e[t];o&&o._c&&(o._d=!1),ln();const c=o&&U6(o(n)),i=n.key||c&&c.key,f=Zr(ei,{key:(i&&!Cl(i)?i:`_${t}`)+(!c&&r?"_fb":"")},c||(r?r():[]),c&&e._===1?64:-2);return!s&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),o&&o._c&&(o._d=!0),f}function U6(e){return e.some(t=>af(t)?!(t.type===po||t.type===ei&&!U6(t.children)):!0)?e:null}function QZ(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:O_(r)]=e[r];return n}const wk=e=>e?IK(e)?DS(e):wk(e.parent):null,qw=Mi(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>wk(e.parent),$root:e=>wk(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>H6(e),$forceUpdate:e=>e.f||(e.f=()=>{P6(e.update)}),$nextTick:e=>e.n||(e.n=es.bind(e.proxy)),$watch:e=>hme.bind(e)}),MD=(e,t)=>e!==Ii&&!e.__isScriptSetup&&Yi(e,t),Sk={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:o,accessCache:c,type:i,appContext:f}=e;let g;if(t[0]!=="$"){const C=c[t];if(C!==void 0)switch(C){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return o[t]}else{if(MD(r,t))return c[t]=1,r[t];if(s!==Ii&&Yi(s,t))return c[t]=2,s[t];if((g=e.propsOptions[0])&&Yi(g,t))return c[t]=3,o[t];if(n!==Ii&&Yi(n,t))return c[t]=4,n[t];Ek&&(c[t]=0)}}const x=qw[t];let w,A;if(x)return t==="$attrs"&&ja(e.attrs,"get",""),x(e);if((w=i.__cssModules)&&(w=w[t]))return w;if(n!==Ii&&Yi(n,t))return c[t]=4,n[t];if(A=f.config.globalProperties,Yi(A,t))return A[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:o}=e;return MD(s,t)?(s[t]=n,!0):r!==Ii&&Yi(r,t)?(r[t]=n,!0):Yi(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:o,type:c}},i){let f,g;return!!(n[i]||e!==Ii&&i[0]!=="$"&&Yi(e,i)||MD(t,i)||(f=o[0])&&Yi(f,i)||Yi(r,i)||Yi(qw,i)||Yi(s.config.globalProperties,i)||(g=c.__cssModules)&&g[i])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Yi(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},zpe=Mi({},Sk,{get(e,t){if(t!==Symbol.unscopables)return Sk.get(e,t,e)},has(e,t){return t[0]!=="_"&&!x6(t)}});function Bpe(){return null}function $pe(){return null}function Vpe(e){}function jpe(e){}function Upe(){return null}function Hpe(){}function Wpe(e,t){return null}function eK(){return tK().slots}function Gpe(){return tK().attrs}function tK(e){const t=zs();return t.setupContext||(t.setupContext=DK(t))}function L2(e){return ir(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function Ype(e,t){const n=L2(e);for(const r in t){if(r.startsWith("__skip"))continue;let s=n[r];s?ir(s)||kr(s)?s=n[r]={type:s,default:t[r]}:s.default=t[r]:s===null&&(s=n[r]={default:t[r]}),s&&t[`__skip_${r}`]&&(s.skipFactory=!0)}return n}function qpe(e,t){return!e||!t?e||t:ir(e)&&ir(t)?e.concat(t):Mi({},L2(e),L2(t))}function Xpe(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function Zpe(e){const t=zs();let n=e();return Ik(),S3(n)&&(n=n.catch(r=>{throw K_(t),r})),[n,()=>K_(t)]}let Ek=!0;function Kpe(e){const t=H6(e),n=e.proxy,r=e.ctx;Ek=!1,t.beforeCreate&&AV(t.beforeCreate,e,"bc");const{data:s,computed:o,methods:c,watch:i,provide:f,inject:g,created:x,beforeMount:w,mounted:A,beforeUpdate:C,updated:F,activated:z,deactivated:j,beforeDestroy:V,beforeUnmount:Y,destroyed:te,unmounted:J,render:ee,renderTracked:le,renderTriggered:oe,errorCaptured:ve,serverPrefetch:se,expose:ie,inheritAttrs:pe,components:be,directives:Se,filters:Ce}=t;if(g&&Jpe(g,r,null),c)for(const ke in c){const He=c[ke];kr(He)&&(r[ke]=He.bind(n))}if(s){const ke=s.call(n,n);qi(ke)&&(e.data=Bo(ke))}if(Ek=!0,o)for(const ke in o){const He=o[ke],Ke=kr(He)?He.bind(n,n):kr(He.get)?He.get.bind(n,n):oa,Ge=!kr(He)&&kr(He.set)?He.set.bind(n):oa,$t=Ct({get:Ke,set:Ge});Object.defineProperty(r,ke,{enumerable:!0,configurable:!0,get:()=>$t.value,set:Ft=>$t.value=Ft})}if(i)for(const ke in i)nK(i[ke],r,n,ke);if(f){const ke=kr(f)?f.call(n):f;Reflect.ownKeys(ke).forEach(He=>{Ko(He,ke[He])})}x&&AV(x,e,"c");function xe(ke,He){ir(He)?He.forEach(Ke=>ke(Ke.bind(n))):He&&ke(He.bind(n))}if(xe(XZ,w),xe(ua,A),xe(z6,C),xe(F3,F),xe(N6,z),xe(F6,j),xe(HC,ve),xe(KZ,le),xe(ZZ,oe),xe(Mf,Y),xe(_y,J),xe(B6,se),ir(ie))if(ie.length){const ke=e.exposed||(e.exposed={});ie.forEach(He=>{Object.defineProperty(ke,He,{get:()=>n[He],set:Ke=>n[He]=Ke,enumerable:!0})})}else e.exposed||(e.exposed={});ee&&e.render===oa&&(e.render=ee),pe!=null&&(e.inheritAttrs=pe),be&&(e.components=be),Se&&(e.directives=Se),se&&L6(e)}function Jpe(e,t,n=oa){ir(e)&&(e=Tk(e));for(const r in e){const s=e[r];let o;qi(s)?"default"in s?o=bs(s.from||r,s.default,!0):o=bs(s.from||r):o=bs(s),Fi(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:c=>o.value=c}):t[r]=o}}function AV(e,t,n){eu(ir(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function nK(e,t,n,r){let s=r.includes(".")?bK(n,r):()=>n[r];if(Kr(e)){const o=t[e];kr(o)&&Hr(s,o)}else if(kr(e))Hr(s,e.bind(n));else if(qi(e))if(ir(e))e.forEach(o=>nK(o,t,n,r));else{const o=kr(e.handler)?e.handler.bind(n):t[e.handler];kr(o)&&Hr(s,o,e)}}function H6(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:o,config:{optionMergeStrategies:c}}=e.appContext,i=o.get(t);let f;return i?f=i:!s.length&&!n&&!r?f=t:(f={},s.length&&s.forEach(g=>WC(f,g,c,!0)),WC(f,t,c)),qi(t)&&o.set(t,f),f}function WC(e,t,n,r=!1){const{mixins:s,extends:o}=t;o&&WC(e,o,n,!0),s&&s.forEach(c=>WC(e,c,n,!0));for(const c in t)if(!(r&&c==="expose")){const i=Qpe[c]||n&&n[c];e[c]=i?i(e[c],t[c]):t[c]}return e}const Qpe={data:CV,props:IV,emits:IV,methods:Cw,computed:Cw,beforeCreate:cl,created:cl,beforeMount:cl,mounted:cl,beforeUpdate:cl,updated:cl,beforeDestroy:cl,beforeUnmount:cl,destroyed:cl,unmounted:cl,activated:cl,deactivated:cl,errorCaptured:cl,serverPrefetch:cl,components:Cw,directives:Cw,watch:tme,provide:CV,inject:eme};function CV(e,t){return t?e?function(){return Mi(kr(e)?e.call(this,this):e,kr(t)?t.call(this,this):t)}:t:e}function eme(e,t){return Cw(Tk(e),Tk(t))}function Tk(e){if(ir(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function cl(e,t){return e?[...new Set([].concat(e,t))]:t}function Cw(e,t){return e?Mi(Object.create(null),e,t):t}function IV(e,t){return e?ir(e)&&ir(t)?[...new Set([...e,...t])]:Mi(Object.create(null),L2(e),L2(t??{})):t}function tme(e,t){if(!e)return t;if(!t)return e;const n=Mi(Object.create(null),e);for(const r in t)n[r]=cl(e[r],t[r]);return n}function rK(){return{app:null,config:{isNativeTag:v_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nme=0;function rme(e,t){return function(r,s=null){kr(r)||(r=Mi({},r)),s!=null&&!qi(s)&&(s=null);const o=rK(),c=new WeakSet,i=[];let f=!1;const g=o.app={_uid:nme++,_component:r,_props:s,_container:null,_context:o,_instance:null,version:Rk,get config(){return o.config},set config(x){},use(x,...w){return c.has(x)||(x&&kr(x.install)?(c.add(x),x.install(g,...w)):kr(x)&&(c.add(x),x(g,...w))),g},mixin(x){return o.mixins.includes(x)||o.mixins.push(x),g},component(x,w){return w?(o.components[x]=w,g):o.components[x]},directive(x,w){return w?(o.directives[x]=w,g):o.directives[x]},mount(x,w,A){if(!f){const C=g._ceVNode||Un(r,s);return C.appContext=o,A===!0?A="svg":A===!1&&(A=void 0),w&&t?t(C,x):e(C,x,A),f=!0,g._container=x,x.__vue_app__=g,g._instance=C.component,fpe(g,Rk),DS(C.component)}},onUnmount(x){i.push(x)},unmount(){f&&(eu(i,g._instance,16),e(null,g._container),g._instance=null,ppe(g),delete g._container.__vue_app__)},provide(x,w){return o.provides[x]=w,g},runWithContext(x){const w=k_;k_=g;try{return x()}finally{k_=w}}};return g}}let k_=null;function Ko(e,t){if(wa){let n=wa.provides;const r=wa.parent&&wa.parent.provides;r===n&&(n=wa.provides=Object.create(r)),n[e]=t}}function bs(e,t,n=!1){const r=zs();if(r||k_){let s=k_?k_._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&kr(t)?t.call(r&&r.proxy):t}}function Zm(){return!!(zs()||k_)}const iK={},sK=()=>Object.create(iK),oK=e=>Object.getPrototypeOf(e)===iK;function ime(e,t,n,r=!1){const s={},o=sK();e.propsDefaults=Object.create(null),aK(e,t,s,o);for(const c in e.propsOptions[0])c in s||(s[c]=void 0);n?e.props=r?s:Yu(s):e.type.props?e.props=s:e.props=o,e.attrs=o}function sme(e,t,n,r){const{props:s,attrs:o,vnode:{patchFlag:c}}=e,i=gi(s),[f]=e.propsOptions;let g=!1;if((r||c>0)&&!(c&16)){if(c&8){const x=e.vnode.dynamicProps;for(let w=0;w<x.length;w++){let A=x[w];if(z3(e.emitsOptions,A))continue;const C=t[A];if(f)if(Yi(o,A))C!==o[A]&&(o[A]=C,g=!0);else{const F=Is(A);s[F]=Mk(f,i,F,C,e,!1)}else C!==o[A]&&(o[A]=C,g=!0)}}}else{aK(e,t,s,o)&&(g=!0);let x;for(const w in i)(!t||!Yi(t,w)&&((x=Ha(w))===w||!Yi(t,x)))&&(f?n&&(n[w]!==void 0||n[x]!==void 0)&&(s[w]=Mk(f,i,w,void 0,e,!0)):delete s[w]);if(o!==i)for(const w in o)(!t||!Yi(t,w))&&(delete o[w],g=!0)}g&&$h(e.attrs,"set","")}function aK(e,t,n,r){const[s,o]=e.propsOptions;let c=!1,i;if(t)for(let f in t){if(qh(f))continue;const g=t[f];let x;s&&Yi(s,x=Is(f))?!o||!o.includes(x)?n[x]=g:(i||(i={}))[x]=g:z3(e.emitsOptions,f)||(!(f in r)||g!==r[f])&&(r[f]=g,c=!0)}if(o){const f=gi(n),g=i||Ii;for(let x=0;x<o.length;x++){const w=o[x];n[w]=Mk(s,f,w,g[w],e,!Yi(g,w))}}return c}function Mk(e,t,n,r,s,o){const c=e[n];if(c!=null){const i=Yi(c,"default");if(i&&r===void 0){const f=c.default;if(c.type!==Function&&!c.skipFactory&&kr(f)){const{propsDefaults:g}=s;if(n in g)r=g[n];else{const x=K_(s);r=g[n]=f.call(null,t),x()}}else r=f;s.ce&&s.ce._setProp(n,r)}c[0]&&(o&&!i?r=!1:c[1]&&(r===""||r===Ha(n))&&(r=!0))}return r}const ome=new WeakMap;function lK(e,t,n=!1){const r=n?ome:t.propsCache,s=r.get(e);if(s)return s;const o=e.props,c={},i=[];let f=!1;if(!kr(e)){const x=w=>{f=!0;const[A,C]=lK(w,t,!0);Mi(c,A),C&&i.push(...C)};!n&&t.mixins.length&&t.mixins.forEach(x),e.extends&&x(e.extends),e.mixins&&e.mixins.forEach(x)}if(!o&&!f)return qi(e)&&r.set(e,I_),I_;if(ir(o))for(let x=0;x<o.length;x++){const w=Is(o[x]);PV(w)&&(c[w]=Ii)}else if(o)for(const x in o){const w=Is(x);if(PV(w)){const A=o[x],C=c[w]=ir(A)||kr(A)?{type:A}:Mi({},A),F=C.type;let z=!1,j=!0;if(ir(F))for(let V=0;V<F.length;++V){const Y=F[V],te=kr(Y)&&Y.name;if(te==="Boolean"){z=!0;break}else te==="String"&&(j=!1)}else z=kr(F)&&F.name==="Boolean";C[0]=z,C[1]=j,(z||Yi(C,"default"))&&i.push(w)}}const g=[c,i];return qi(e)&&r.set(e,g),g}function PV(e){return e[0]!=="$"&&!qh(e)}const W6=e=>e==="_"||e==="_ctx"||e==="$stable",G6=e=>ir(e)?e.map(Zl):[Zl(e)],ame=(e,t,n)=>{if(t._n)return t;const r=Dr((...s)=>G6(t(...s)),n);return r._c=!1,r},cK=(e,t,n)=>{const r=e._ctx;for(const s in e){if(W6(s))continue;const o=e[s];if(kr(o))t[s]=ame(s,o,r);else if(o!=null){const c=G6(o);t[s]=()=>c}}},uK=(e,t)=>{const n=G6(t);e.slots.default=()=>n},dK=(e,t,n)=>{for(const r in t)(n||!W6(r))&&(e[r]=t[r])},lme=(e,t,n)=>{const r=e.slots=sK();if(e.vnode.shapeFlag&32){const s=t._;s?(dK(r,t,n),n&&Y_(r,"_",s,!0)):cK(t,r)}else t&&uK(e,t)},cme=(e,t,n)=>{const{vnode:r,slots:s}=e;let o=!0,c=Ii;if(r.shapeFlag&32){const i=t._;i?n&&i===1?o=!1:dK(s,t,n):(o=!t.$stable,cK(t,s)),c=t}else t&&(uK(e,t),c={default:1});if(o)for(const i in s)!W6(i)&&c[i]==null&&delete s[i]},qo=EK;function hK(e){return pK(e)}function fK(e){return pK(e,Epe)}function pK(e,t){const n=CS();n.__VUE__=!0,O6(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:r,remove:s,patchProp:o,createElement:c,createText:i,createComment:f,setText:g,setElementText:x,parentNode:w,nextSibling:A,setScopeId:C=oa,insertStaticContent:F}=e,z=(je,ge,nt,It=null,ht=null,ut=null,Rt=void 0,ze=null,lt=!!ge.dynamicChildren)=>{if(je===ge)return;je&&!Wu(je,ge)&&(It=mt(je),Ft(je,ht,ut,!0),je=null),ge.patchFlag===-2&&(lt=!1,ge.dynamicChildren=null);const{type:at,ref:Et,shapeFlag:$e}=ge;switch(at){case Xh:j(je,ge,nt,It);break;case po:V(je,ge,nt,It);break;case bm:je==null&&Y(ge,nt,It,Rt);break;case ei:be(je,ge,nt,It,ht,ut,Rt,ze,lt);break;default:$e&1?ee(je,ge,nt,It,ht,ut,Rt,ze,lt):$e&6?Se(je,ge,nt,It,ht,ut,Rt,ze,lt):($e&64||$e&128)&&at.process(je,ge,nt,It,ht,ut,Rt,ze,lt,_e)}Et!=null&&ht?x0(Et,je&&je.ref,ut,ge||je,!ge):Et==null&&je&&je.ref!=null&&x0(je.ref,null,ut,je,!0)},j=(je,ge,nt,It)=>{if(je==null)r(ge.el=i(ge.children),nt,It);else{const ht=ge.el=je.el;ge.children!==je.children&&g(ht,ge.children)}},V=(je,ge,nt,It)=>{je==null?r(ge.el=f(ge.children||""),nt,It):ge.el=je.el},Y=(je,ge,nt,It)=>{[je.el,je.anchor]=F(je.children,ge,nt,It,je.el,je.anchor)},te=({el:je,anchor:ge},nt,It)=>{let ht;for(;je&&je!==ge;)ht=A(je),r(je,nt,It),je=ht;r(ge,nt,It)},J=({el:je,anchor:ge})=>{let nt;for(;je&&je!==ge;)nt=A(je),s(je),je=nt;s(ge)},ee=(je,ge,nt,It,ht,ut,Rt,ze,lt)=>{ge.type==="svg"?Rt="svg":ge.type==="math"&&(Rt="mathml"),je==null?le(ge,nt,It,ht,ut,Rt,ze,lt):se(je,ge,ht,ut,Rt,ze,lt)},le=(je,ge,nt,It,ht,ut,Rt,ze)=>{let lt,at;const{props:Et,shapeFlag:$e,transition:Mt,dirs:tn}=je;if(lt=je.el=c(je.type,ut,Et&&Et.is,Et),$e&8?x(lt,je.children):$e&16&&ve(je.children,lt,null,It,ht,AD(je,ut),Rt,ze),tn&&Ld(je,null,It,"created"),oe(lt,je,je.scopeId,Rt,It),Et){for(const vn in Et)vn!=="value"&&!qh(vn)&&o(lt,vn,null,Et[vn],ut,It);"value"in Et&&o(lt,"value",null,Et.value,ut),(at=Et.onVnodeBeforeMount)&&Xl(at,It,je)}Y_(lt,"__vnode",je,!0),Y_(lt,"__vueParentComponent",It,!0),tn&&Ld(je,null,It,"beforeMount");const on=mK(ht,Mt);on&&Mt.beforeEnter(lt),r(lt,ge,nt),((at=Et&&Et.onVnodeMounted)||on||tn)&&qo(()=>{at&&Xl(at,It,je),on&&Mt.enter(lt),tn&&Ld(je,null,It,"mounted")},ht)},oe=(je,ge,nt,It,ht)=>{if(nt&&C(je,nt),It)for(let ut=0;ut<It.length;ut++)C(je,It[ut]);if(ht){let ut=ht.subTree;if(ge===ut||YC(ut.type)&&(ut.ssContent===ge||ut.ssFallback===ge)){const Rt=ht.vnode;oe(je,Rt,Rt.scopeId,Rt.slotScopeIds,ht.parent)}}},ve=(je,ge,nt,It,ht,ut,Rt,ze,lt=0)=>{for(let at=lt;at<je.length;at++){const Et=je[at]=ze?Gp(je[at]):Zl(je[at]);z(null,Et,ge,nt,It,ht,ut,Rt,ze)}},se=(je,ge,nt,It,ht,ut,Rt)=>{const ze=ge.el=je.el;ze.__vnode=ge;let{patchFlag:lt,dynamicChildren:at,dirs:Et}=ge;lt|=je.patchFlag&16;const $e=je.props||Ii,Mt=ge.props||Ii;let tn;if(nt&&e_(nt,!1),(tn=Mt.onVnodeBeforeUpdate)&&Xl(tn,nt,ge,je),Et&&Ld(ge,je,nt,"beforeUpdate"),nt&&e_(nt,!0),($e.innerHTML&&Mt.innerHTML==null||$e.textContent&&Mt.textContent==null)&&x(ze,""),at?ie(je.dynamicChildren,at,ze,nt,It,AD(ge,ht),ut):Rt||He(je,ge,ze,null,nt,It,AD(ge,ht),ut,!1),lt>0){if(lt&16)pe(ze,$e,Mt,nt,ht);else if(lt&2&&$e.class!==Mt.class&&o(ze,"class",null,Mt.class,ht),lt&4&&o(ze,"style",$e.style,Mt.style,ht),lt&8){const on=ge.dynamicProps;for(let vn=0;vn<on.length;vn++){const _t=on[vn],wt=$e[_t],Ve=Mt[_t];(Ve!==wt||_t==="value")&&o(ze,_t,wt,Ve,ht,nt)}}lt&1&&je.children!==ge.children&&x(ze,ge.children)}else!Rt&&at==null&&pe(ze,$e,Mt,nt,ht);((tn=Mt.onVnodeUpdated)||Et)&&qo(()=>{tn&&Xl(tn,nt,ge,je),Et&&Ld(ge,je,nt,"updated")},It)},ie=(je,ge,nt,It,ht,ut,Rt)=>{for(let ze=0;ze<ge.length;ze++){const lt=je[ze],at=ge[ze],Et=lt.el&&(lt.type===ei||!Wu(lt,at)||lt.shapeFlag&198)?w(lt.el):nt;z(lt,at,Et,null,It,ht,ut,Rt,!0)}},pe=(je,ge,nt,It,ht)=>{if(ge!==nt){if(ge!==Ii)for(const ut in ge)!qh(ut)&&!(ut in nt)&&o(je,ut,ge[ut],null,ht,It);for(const ut in nt){if(qh(ut))continue;const Rt=nt[ut],ze=ge[ut];Rt!==ze&&ut!=="value"&&o(je,ut,ze,Rt,ht,It)}"value"in nt&&o(je,"value",ge.value,nt.value,ht)}},be=(je,ge,nt,It,ht,ut,Rt,ze,lt)=>{const at=ge.el=je?je.el:i(""),Et=ge.anchor=je?je.anchor:i("");let{patchFlag:$e,dynamicChildren:Mt,slotScopeIds:tn}=ge;tn&&(ze=ze?ze.concat(tn):tn),je==null?(r(at,nt,It),r(Et,nt,It),ve(ge.children||[],nt,Et,ht,ut,Rt,ze,lt)):$e>0&&$e&64&&Mt&&je.dynamicChildren?(ie(je.dynamicChildren,Mt,nt,ht,ut,Rt,ze),(ge.key!=null||ht&&ge===ht.subTree)&&Y6(je,ge,!0)):He(je,ge,nt,Et,ht,ut,Rt,ze,lt)},Se=(je,ge,nt,It,ht,ut,Rt,ze,lt)=>{ge.slotScopeIds=ze,je==null?ge.shapeFlag&512?ht.ctx.activate(ge,nt,It,Rt,lt):Ce(ge,nt,It,ht,ut,Rt,lt):Ee(je,ge,lt)},Ce=(je,ge,nt,It,ht,ut,Rt)=>{const ze=je.component=CK(je,It,ht);if(PS(je)&&(ze.ctx.renderer=_e),PK(ze,!1,Rt),ze.asyncDep){if(ht&&ht.registerDep(ze,xe,Rt),!je.el){const lt=ze.subTree=Un(po);V(null,lt,ge,nt),je.placeholder=lt.el}}else xe(ze,je,ge,nt,ht,ut,Rt)},Ee=(je,ge,nt)=>{const It=ge.component=je.component;if(vme(je,ge,nt))if(It.asyncDep&&!It.asyncResolved){ke(It,ge,nt);return}else It.next=ge,It.update();else ge.el=je.el,It.vnode=ge},xe=(je,ge,nt,It,ht,ut,Rt)=>{const ze=()=>{if(je.isMounted){let{next:$e,bu:Mt,u:tn,parent:on,vnode:vn}=je;{const Pt=gK(je);if(Pt){$e&&($e.el=vn.el,ke(je,$e,Rt)),Pt.asyncDep.then(()=>{je.isUnmounted||ze()});return}}let _t=$e,wt;e_(je,!1),$e?($e.el=vn.el,ke(je,$e,Rt)):$e=vn,Mt&&D_(Mt),(wt=$e.props&&$e.props.onVnodeBeforeUpdate)&&Xl(wt,on,$e,vn),e_(je,!0);const Ve=NA(je),qe=je.subTree;je.subTree=Ve,z(qe,Ve,w(qe.el),mt(qe),je,ht,ut),$e.el=Ve.el,_t===null&&B3(je,Ve.el),tn&&qo(tn,ht),(wt=$e.props&&$e.props.onVnodeUpdated)&&qo(()=>Xl(wt,on,$e,vn),ht),LZ(je)}else{let $e;const{el:Mt,props:tn}=ge,{bm:on,m:vn,parent:_t,root:wt,type:Ve}=je,qe=vm(ge);if(e_(je,!1),on&&D_(on),!qe&&($e=tn&&tn.onVnodeBeforeMount)&&Xl($e,_t,ge),e_(je,!0),Mt&&On){const Pt=()=>{je.subTree=NA(je),On(Mt,je.subTree,je,ht,null)};qe&&Ve.__asyncHydrate?Ve.__asyncHydrate(Mt,je,Pt):Pt()}else{wt.ce&&wt.ce._def.shadowRoot!==!1&&wt.ce._injectChildStyle(Ve);const Pt=je.subTree=NA(je);z(null,Pt,nt,It,je,ht,ut),ge.el=Pt.el}if(vn&&qo(vn,ht),!qe&&($e=tn&&tn.onVnodeMounted)){const Pt=ge;qo(()=>Xl($e,_t,Pt),ht)}(ge.shapeFlag&256||_t&&vm(_t.vnode)&&_t.vnode.shapeFlag&256)&&je.a&&qo(je.a,ht),je.isMounted=!0,bk(je),ge=nt=It=null}};je.scope.on();const lt=je.effect=new C2(ze);je.scope.off();const at=je.update=lt.run.bind(lt),Et=je.job=lt.runIfDirty.bind(lt);Et.i=je,Et.id=je.uid,lt.scheduler=()=>P6(Et),e_(je,!0),at()},ke=(je,ge,nt)=>{ge.component=je;const It=je.vnode.props;je.vnode=ge,je.next=null,sme(je,ge.props,It,nt),cme(je,ge.children,nt),rf(),yV(je),sf()},He=(je,ge,nt,It,ht,ut,Rt,ze,lt=!1)=>{const at=je&&je.children,Et=je?je.shapeFlag:0,$e=ge.children,{patchFlag:Mt,shapeFlag:tn}=ge;if(Mt>0){if(Mt&128){Ge(at,$e,nt,It,ht,ut,Rt,ze,lt);return}else if(Mt&256){Ke(at,$e,nt,It,ht,ut,Rt,ze,lt);return}}tn&8?(Et&16&&Xt(at,ht,ut),$e!==at&&x(nt,$e)):Et&16?tn&16?Ge(at,$e,nt,It,ht,ut,Rt,ze,lt):Xt(at,ht,ut,!0):(Et&8&&x(nt,""),tn&16&&ve($e,nt,It,ht,ut,Rt,ze,lt))},Ke=(je,ge,nt,It,ht,ut,Rt,ze,lt)=>{je=je||I_,ge=ge||I_;const at=je.length,Et=ge.length,$e=Math.min(at,Et);let Mt;for(Mt=0;Mt<$e;Mt++){const tn=ge[Mt]=lt?Gp(ge[Mt]):Zl(ge[Mt]);z(je[Mt],tn,nt,null,ht,ut,Rt,ze,lt)}at>Et?Xt(je,ht,ut,!0,!1,$e):ve(ge,nt,It,ht,ut,Rt,ze,lt,$e)},Ge=(je,ge,nt,It,ht,ut,Rt,ze,lt)=>{let at=0;const Et=ge.length;let $e=je.length-1,Mt=Et-1;for(;at<=$e&&at<=Mt;){const tn=je[at],on=ge[at]=lt?Gp(ge[at]):Zl(ge[at]);if(Wu(tn,on))z(tn,on,nt,null,ht,ut,Rt,ze,lt);else break;at++}for(;at<=$e&&at<=Mt;){const tn=je[$e],on=ge[Mt]=lt?Gp(ge[Mt]):Zl(ge[Mt]);if(Wu(tn,on))z(tn,on,nt,null,ht,ut,Rt,ze,lt);else break;$e--,Mt--}if(at>$e){if(at<=Mt){const tn=Mt+1,on=tn<Et?ge[tn].el:It;for(;at<=Mt;)z(null,ge[at]=lt?Gp(ge[at]):Zl(ge[at]),nt,on,ht,ut,Rt,ze,lt),at++}}else if(at>Mt)for(;at<=$e;)Ft(je[at],ht,ut,!0),at++;else{const tn=at,on=at,vn=new Map;for(at=on;at<=Mt;at++){const dn=ge[at]=lt?Gp(ge[at]):Zl(ge[at]);dn.key!=null&&vn.set(dn.key,at)}let _t,wt=0;const Ve=Mt-on+1;let qe=!1,Pt=0;const Qt=new Array(Ve);for(at=0;at<Ve;at++)Qt[at]=0;for(at=tn;at<=$e;at++){const dn=je[at];if(wt>=Ve){Ft(dn,ht,ut,!0);continue}let Te;if(dn.key!=null)Te=vn.get(dn.key);else for(_t=on;_t<=Mt;_t++)if(Qt[_t-on]===0&&Wu(dn,ge[_t])){Te=_t;break}Te===void 0?Ft(dn,ht,ut,!0):(Qt[Te-on]=at+1,Te>=Pt?Pt=Te:qe=!0,z(dn,ge[Te],nt,null,ht,ut,Rt,ze,lt),wt++)}const cn=qe?ume(Qt):I_;for(_t=cn.length-1,at=Ve-1;at>=0;at--){const dn=on+at,Te=ge[dn],ye=ge[dn+1],We=dn+1<Et?ye.el||ye.placeholder:It;Qt[at]===0?z(null,Te,nt,We,ht,ut,Rt,ze,lt):qe&&(_t<0||at!==cn[_t]?$t(Te,nt,We,2):_t--)}}},$t=(je,ge,nt,It,ht=null)=>{const{el:ut,type:Rt,transition:ze,children:lt,shapeFlag:at}=je;if(at&6){$t(je.component.subTree,ge,nt,It);return}if(at&128){je.suspense.move(ge,nt,It);return}if(at&64){Rt.move(je,ge,nt,_e);return}if(Rt===ei){r(ut,ge,nt);for(let $e=0;$e<lt.length;$e++)$t(lt[$e],ge,nt,It);r(je.anchor,ge,nt);return}if(Rt===bm){te(je,ge,nt);return}if(It!==2&&at&1&&ze)if(It===0)ze.beforeEnter(ut),r(ut,ge,nt),qo(()=>ze.enter(ut),ht);else{const{leave:$e,delayLeave:Mt,afterLeave:tn}=ze,on=()=>{je.ctx.isUnmounted?s(ut):r(ut,ge,nt)},vn=()=>{ut._isLeaving&&ut[Nh](!0),$e(ut,()=>{on(),tn&&tn()})};Mt?Mt(ut,on,vn):vn()}else r(ut,ge,nt)},Ft=(je,ge,nt,It=!1,ht=!1)=>{const{type:ut,props:Rt,ref:ze,children:lt,dynamicChildren:at,shapeFlag:Et,patchFlag:$e,dirs:Mt,cacheIndex:tn}=je;if($e===-2&&(ht=!1),ze!=null&&(rf(),x0(ze,null,nt,je,!0),sf()),tn!=null&&(ge.renderCache[tn]=void 0),Et&256){ge.ctx.deactivate(je);return}const on=Et&1&&Mt,vn=!vm(je);let _t;if(vn&&(_t=Rt&&Rt.onVnodeBeforeUnmount)&&Xl(_t,ge,je),Et&6)mn(je.component,nt,It);else{if(Et&128){je.suspense.unmount(nt,It);return}on&&Ld(je,null,ge,"beforeUnmount"),Et&64?je.type.remove(je,ge,nt,_e,It):at&&!at.hasOnce&&(ut!==ei||$e>0&&$e&64)?Xt(at,ge,nt,!1,!0):(ut===ei&&$e&384||!ht&&Et&16)&&Xt(lt,ge,nt),It&&Lt(je)}(vn&&(_t=Rt&&Rt.onVnodeUnmounted)||on)&&qo(()=>{_t&&Xl(_t,ge,je),on&&Ld(je,null,ge,"unmounted")},nt)},Lt=je=>{const{type:ge,el:nt,anchor:It,transition:ht}=je;if(ge===ei){nn(nt,It);return}if(ge===bm){J(je);return}const ut=()=>{s(nt),ht&&!ht.persisted&&ht.afterLeave&&ht.afterLeave()};if(je.shapeFlag&1&&ht&&!ht.persisted){const{leave:Rt,delayLeave:ze}=ht,lt=()=>Rt(nt,ut);ze?ze(je.el,ut,lt):lt()}else ut()},nn=(je,ge)=>{let nt;for(;je!==ge;)nt=A(je),s(je),je=nt;s(ge)},mn=(je,ge,nt)=>{const{bum:It,scope:ht,job:ut,subTree:Rt,um:ze,m:lt,a:at}=je;GC(lt),GC(at),It&&D_(It),ht.stop(),ut&&(ut.flags|=8,Ft(Rt,je,ge,nt)),ze&&qo(ze,ge),qo(()=>{je.isUnmounted=!0},ge),gpe(je)},Xt=(je,ge,nt,It=!1,ht=!1,ut=0)=>{for(let Rt=ut;Rt<je.length;Rt++)Ft(je[Rt],ge,nt,It,ht)},mt=je=>{if(je.shapeFlag&6)return mt(je.component.subTree);if(je.shapeFlag&128)return je.suspense.next();const ge=A(je.anchor||je.el),nt=ge&&ge[BZ];return nt?A(nt):ge};let Jt=!1;const Kt=(je,ge,nt)=>{je==null?ge._vnode&&Ft(ge._vnode,null,null,!0):z(ge._vnode||null,je,ge,null,null,null,nt),ge._vnode=je,Jt||(Jt=!0,yV(),jC(),Jt=!1)},_e={p:z,um:Ft,m:$t,r:Lt,mt:Ce,mc:ve,pc:He,pbc:ie,n:mt,o:e};let bn,On;return t&&([bn,On]=t(_e)),{render:Kt,hydrate:bn,createApp:rme(Kt,bn)}}function AD({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function e_({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function mK(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Y6(e,t,n=!1){const r=e.children,s=t.children;if(ir(r)&&ir(s))for(let o=0;o<r.length;o++){const c=r[o];let i=s[o];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=s[o]=Gp(s[o]),i.el=c.el),!n&&i.patchFlag!==-2&&Y6(c,i)),i.type===Xh&&i.patchFlag!==-1&&(i.el=c.el),i.type===po&&!i.el&&(i.el=c.el)}}function ume(e){const t=e.slice(),n=[0];let r,s,o,c,i;const f=e.length;for(r=0;r<f;r++){const g=e[r];if(g!==0){if(s=n[n.length-1],e[s]<g){t[r]=s,n.push(r);continue}for(o=0,c=n.length-1;o<c;)i=o+c>>1,e[n[i]]<g?o=i+1:c=i;g<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,c=n[o-1];o-- >0;)n[o]=c,c=t[c];return n}function gK(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:gK(t)}function GC(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const _K=Symbol.for("v-scx"),yK=()=>bs(_K);function yy(e,t){return OS(e,null,t)}function dme(e,t){return OS(e,null,{flush:"post"})}function vK(e,t){return OS(e,null,{flush:"sync"})}function Hr(e,t,n){return OS(e,t,n)}function OS(e,t,n=Ii){const{immediate:r,deep:s,flush:o,once:c}=n,i=Mi({},n),f=t&&r||!t&&o!=="post";let g;if($0){if(o==="sync"){const C=yK();g=C.__watcherHandles||(C.__watcherHandles=[])}else if(!f){const C=()=>{};return C.stop=oa,C.resume=oa,C.pause=oa,C}}const x=wa;i.call=(C,F,z)=>eu(C,x,F,z);let w=!1;o==="post"?i.scheduler=C=>{qo(C,x&&x.suspense)}:o!=="sync"&&(w=!0,i.scheduler=(C,F)=>{F?C():P6(C)}),i.augmentJob=C=>{t&&(C.flags|=4),w&&(C.flags|=2,x&&(C.id=x.uid,C.i=x))};const A=spe(e,t,i);return $0&&(g?g.push(A):f&&A()),A}function hme(e,t,n){const r=this.proxy,s=Kr(e)?e.includes(".")?bK(r,e):()=>r[e]:e.bind(r,r);let o;kr(t)?o=t:(o=t.handler,n=t);const c=K_(this),i=OS(s,o.bind(r),n);return c(),i}function bK(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function fme(e,t,n=Ii){const r=zs(),s=Is(t),o=Ha(t),c=xK(e,s),i=D3((f,g)=>{let x,w=Ii,A;return vK(()=>{const C=e[s];Va(x,C)&&(x=C,g())}),{get(){return f(),n.get?n.get(x):x},set(C){const F=n.set?n.set(C):C;if(!Va(F,x)&&!(w!==Ii&&Va(C,w)))return;const z=r.vnode.props;z&&(t in z||s in z||o in z)&&(`onUpdate:${t}`in z||`onUpdate:${s}`in z||`onUpdate:${o}`in z)||(x=C,g()),r.emit(`update:${t}`,F),Va(C,F)&&Va(C,w)&&!Va(F,A)&&g(),w=C,A=F}}});return i[Symbol.iterator]=()=>{let f=0;return{next(){return f<2?{value:f++?c||Ii:i,done:!1}:{done:!0}}}},i}const xK=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Is(t)}Modifiers`]||e[`${Ha(t)}Modifiers`];function pme(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Ii;let s=n;const o=t.startsWith("update:"),c=o&&xK(r,t.slice(7));c&&(c.trim&&(s=n.map(x=>Kr(x)?x.trim():x)),c.number&&(s=n.map(M2))),_pe(e,t,s);let i,f=r[i=O_(t)]||r[i=O_(Is(t))];!f&&o&&(f=r[i=O_(Ha(t))]),f&&eu(f,e,6,s);const g=r[i+"Once"];if(g){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,eu(g,e,6,s)}}const mme=new WeakMap;function wK(e,t,n=!1){const r=n?mme:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const o=e.emits;let c={},i=!1;if(!kr(e)){const f=g=>{const x=wK(g,t,!0);x&&(i=!0,Mi(c,x))};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!o&&!i?(qi(e)&&r.set(e,null),null):(ir(o)?o.forEach(f=>c[f]=null):Mi(c,o),qi(e)&&r.set(e,c),c)}function z3(e,t){return!e||!Ym(t)?!1:(t=t.slice(2).replace(/Once$/,""),Yi(e,t[0].toLowerCase()+t.slice(1))||Yi(e,Ha(t))||Yi(e,t))}function NA(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[o],slots:c,attrs:i,emit:f,render:g,renderCache:x,props:w,data:A,setupState:C,ctx:F,inheritAttrs:z}=e,j=R2(e);let V,Y;try{if(n.shapeFlag&4){const J=s||r,ee=J;V=Zl(g.call(ee,J,x,w,C,A,F)),Y=i}else{const J=t;V=Zl(J.length>1?J(w,{attrs:i,slots:c,emit:f}):J(w,null)),Y=t.props?i:_me(i)}}catch(J){Xw.length=0,gy(J,e,1),V=Un(po)}let te=V;if(Y&&z!==!1){const J=Object.keys(Y),{shapeFlag:ee}=te;J.length&&ee&7&&(o&&J.some(x3)&&(Y=yme(Y,o)),te=rd(te,Y,!1,!0))}return n.dirs&&(te=rd(te,null,!1,!0),te.dirs=te.dirs?te.dirs.concat(n.dirs):n.dirs),n.transition&&of(te,n.transition),V=te,R2(j),V}function gme(e,t=!0){let n;for(let r=0;r<e.length;r++){const s=e[r];if(af(s)){if(s.type!==po||s.children==="v-if"){if(n)return;n=s}}else return}return n}const _me=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ym(n))&&((t||(t={}))[n]=e[n]);return t},yme=(e,t)=>{const n={};for(const r in e)(!x3(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function vme(e,t,n){const{props:r,children:s,component:o}=e,{props:c,children:i,patchFlag:f}=t,g=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return r?OV(r,c,g):!!c;if(f&8){const x=t.dynamicProps;for(let w=0;w<x.length;w++){const A=x[w];if(c[A]!==r[A]&&!z3(g,A))return!0}}}else return(s||i)&&(!i||!i.$stable)?!0:r===c?!1:r?c?OV(r,c,g):!0:!!c;return!1}function OV(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const o=r[s];if(t[o]!==e[o]&&!z3(n,o))return!0}return!1}function B3({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const YC=e=>e.__isSuspense;let Ak=0;const bme={name:"Suspense",__isSuspense:!0,process(e,t,n,r,s,o,c,i,f,g){if(e==null)xme(t,n,r,s,o,c,i,f,g);else{if(o&&o.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}wme(e,t,n,r,s,c,i,f,g)}},hydrate:Sme,normalize:Eme},$3=bme;function N2(e,t){const n=e.props&&e.props[t];kr(n)&&n()}function xme(e,t,n,r,s,o,c,i,f){const{p:g,o:{createElement:x}}=f,w=x("div"),A=e.suspense=SK(e,s,r,t,w,n,o,c,i,f);g(null,A.pendingBranch=e.ssContent,w,null,r,A,o,c),A.deps>0?(N2(e,"onPending"),N2(e,"onFallback"),g(null,e.ssFallback,t,n,r,null,o,c),w0(A,e.ssFallback)):A.resolve(!1,!0)}function wme(e,t,n,r,s,o,c,i,{p:f,um:g,o:{createElement:x}}){const w=t.suspense=e.suspense;w.vnode=t,t.el=e.el;const A=t.ssContent,C=t.ssFallback,{activeBranch:F,pendingBranch:z,isInFallback:j,isHydrating:V}=w;if(z)w.pendingBranch=A,Wu(z,A)?(f(z,A,w.hiddenContainer,null,s,w,o,c,i),w.deps<=0?w.resolve():j&&(V||(f(F,C,n,r,s,null,o,c,i),w0(w,C)))):(w.pendingId=Ak++,V?(w.isHydrating=!1,w.activeBranch=z):g(z,s,w),w.deps=0,w.effects.length=0,w.hiddenContainer=x("div"),j?(f(null,A,w.hiddenContainer,null,s,w,o,c,i),w.deps<=0?w.resolve():(f(F,C,n,r,s,null,o,c,i),w0(w,C))):F&&Wu(F,A)?(f(F,A,n,r,s,w,o,c,i),w.resolve(!0)):(f(null,A,w.hiddenContainer,null,s,w,o,c,i),w.deps<=0&&w.resolve()));else if(F&&Wu(F,A))f(F,A,n,r,s,w,o,c,i),w0(w,A);else if(N2(t,"onPending"),w.pendingBranch=A,A.shapeFlag&512?w.pendingId=A.component.suspenseId:w.pendingId=Ak++,f(null,A,w.hiddenContainer,null,s,w,o,c,i),w.deps<=0)w.resolve();else{const{timeout:Y,pendingId:te}=w;Y>0?setTimeout(()=>{w.pendingId===te&&w.fallback(C)},Y):Y===0&&w.fallback(C)}}function SK(e,t,n,r,s,o,c,i,f,g,x=!1){const{p:w,m:A,um:C,n:F,o:{parentNode:z,remove:j}}=g;let V;const Y=Tme(e);Y&&t&&t.pendingBranch&&(V=t.pendingId,t.deps++);const te=e.props?A2(e.props.timeout):void 0,J=o,ee={vnode:e,parent:t,parentComponent:n,namespace:c,container:r,hiddenContainer:s,deps:0,pendingId:Ak++,timeout:typeof te=="number"?te:-1,activeBranch:null,pendingBranch:null,isInFallback:!x,isHydrating:x,isUnmounted:!1,effects:[],resolve(le=!1,oe=!1){const{vnode:ve,activeBranch:se,pendingBranch:ie,pendingId:pe,effects:be,parentComponent:Se,container:Ce}=ee;let Ee=!1;ee.isHydrating?ee.isHydrating=!1:le||(Ee=se&&ie.transition&&ie.transition.mode==="out-in",Ee&&(se.transition.afterLeave=()=>{pe===ee.pendingId&&(A(ie,Ce,o===J?F(se):o,0),O2(be))}),se&&(z(se.el)===Ce&&(o=F(se)),C(se,Se,ee,!0)),Ee||A(ie,Ce,o,0)),w0(ee,ie),ee.pendingBranch=null,ee.isInFallback=!1;let xe=ee.parent,ke=!1;for(;xe;){if(xe.pendingBranch){xe.effects.push(...be),ke=!0;break}xe=xe.parent}!ke&&!Ee&&O2(be),ee.effects=[],Y&&t&&t.pendingBranch&&V===t.pendingId&&(t.deps--,t.deps===0&&!oe&&t.resolve()),N2(ve,"onResolve")},fallback(le){if(!ee.pendingBranch)return;const{vnode:oe,activeBranch:ve,parentComponent:se,container:ie,namespace:pe}=ee;N2(oe,"onFallback");const be=F(ve),Se=()=>{ee.isInFallback&&(w(null,le,ie,be,se,null,pe,i,f),w0(ee,le))},Ce=le.transition&&le.transition.mode==="out-in";Ce&&(ve.transition.afterLeave=Se),ee.isInFallback=!0,C(ve,se,null,!0),Ce||Se()},move(le,oe,ve){ee.activeBranch&&A(ee.activeBranch,le,oe,ve),ee.container=le},next(){return ee.activeBranch&&F(ee.activeBranch)},registerDep(le,oe,ve){const se=!!ee.pendingBranch;se&&ee.deps++;const ie=le.vnode.el;le.asyncDep.catch(pe=>{gy(pe,le,0)}).then(pe=>{if(le.isUnmounted||ee.isUnmounted||ee.pendingId!==le.suspenseId)return;le.asyncResolved=!0;const{vnode:be}=le;Pk(le,pe,!1),ie&&(be.el=ie);const Se=!ie&&le.subTree.el;oe(le,be,z(ie||le.subTree.el),ie?null:F(le.subTree),ee,c,ve),Se&&j(Se),B3(le,be.el),se&&--ee.deps===0&&ee.resolve()})},unmount(le,oe){ee.isUnmounted=!0,ee.activeBranch&&C(ee.activeBranch,n,le,oe),ee.pendingBranch&&C(ee.pendingBranch,n,le,oe)}};return ee}function Sme(e,t,n,r,s,o,c,i,f){const g=t.suspense=SK(t,r,n,e.parentNode,document.createElement("div"),null,s,o,c,i,!0),x=f(e,g.pendingBranch=t.ssContent,n,g,o,c);return g.deps===0&&g.resolve(!1,!0),x}function Eme(e){const{shapeFlag:t,children:n}=e,r=t&32;e.ssContent=DV(r?n.default:n),e.ssFallback=r?DV(n.fallback):Un(po)}function DV(e){let t;if(kr(e)){const n=Z_&&e._c;n&&(e._d=!1,ln()),e=e(),n&&(e._d=!0,t=Ga,TK())}return ir(e)&&(e=gme(e)),e=Zl(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function EK(e,t){t&&t.pendingBranch?ir(e)?t.effects.push(...e):t.effects.push(e):O2(e)}function w0(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e;let s=t.el;for(;!s&&t.component;)t=t.component.subTree,s=t.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,B3(r,s))}function Tme(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const ei=Symbol.for("v-fgt"),Xh=Symbol.for("v-txt"),po=Symbol.for("v-cmt"),bm=Symbol.for("v-stc"),Xw=[];let Ga=null;function ln(e=!1){Xw.push(Ga=e?null:[])}function TK(){Xw.pop(),Ga=Xw[Xw.length-1]||null}let Z_=1;function F2(e,t=!1){Z_+=e,e<0&&Ga&&t&&(Ga.hasOnce=!0)}function MK(e){return e.dynamicChildren=Z_>0?Ga||I_:null,TK(),Z_>0&&Ga&&Ga.push(e),e}function Nn(e,t,n,r,s,o){return MK(qn(e,t,n,r,s,o,!0))}function Zr(e,t,n,r,s){return MK(Un(e,t,n,r,s,!0))}function af(e){return e?e.__v_isVNode===!0:!1}function Wu(e,t){return e.type===t.type&&e.key===t.key}function Mme(e){}const AK=({key:e})=>e??null,FA=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Kr(e)||Fi(e)||kr(e)?{i:Sa,r:e,k:t,f:!!n}:e:null);function qn(e,t=null,n=null,r=0,s=null,o=e===ei?0:1,c=!1,i=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&AK(t),ref:t&&FA(t),scopeId:k3,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Sa};return i?(X6(f,n),o&128&&e.normalize(f)):n&&(f.shapeFlag|=Kr(n)?8:16),Z_>0&&!c&&Ga&&(f.patchFlag>0||o&6)&&f.patchFlag!==32&&Ga.push(f),f}const Un=Ame;function Ame(e,t=null,n=null,r=0,s=null,o=!1){if((!e||e===JZ)&&(e=po),af(e)){const i=rd(e,t,!0);return n&&X6(i,n),Z_>0&&!o&&Ga&&(i.shapeFlag&6?Ga[Ga.indexOf(e)]=i:Ga.push(i)),i.patchFlag=-2,i}if(kme(e)&&(e=e.__vccOpts),t){t=B0(t);let{class:i,style:f}=t;i&&!Kr(i)&&(t.class=Jn(i)),qi(f)&&(O3(f)&&!ir(f)&&(f=Mi({},f)),t.style=Ta(f))}const c=Kr(e)?1:YC(e)?128:$Z(e)?64:qi(e)?4:kr(e)?2:0;return qn(e,t,n,r,s,c,o,!0)}function B0(e){return e?O3(e)||oK(e)?Mi({},e):e:null}function rd(e,t,n=!1,r=!1){const{props:s,ref:o,patchFlag:c,children:i,transition:f}=e,g=t?iu(s||{},t):s,x={__v_isVNode:!0,__v_skip:!0,type:e.type,props:g,key:g&&AK(g),ref:t&&t.ref?n&&o?ir(o)?o.concat(FA(t)):[o,FA(t)]:FA(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ei?c===-1?16:c|16:c,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&rd(e.ssContent),ssFallback:e.ssFallback&&rd(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&r&&of(x,f.clone(x)),x}function Rr(e=" ",t=0){return Un(Xh,null,e,t)}function q6(e,t){const n=Un(bm,null,e);return n.staticCount=t,n}function fi(e="",t=!1){return t?(ln(),Zr(po,null,e)):Un(po,null,e)}function Zl(e){return e==null||typeof e=="boolean"?Un(po):ir(e)?Un(ei,null,e.slice()):af(e)?Gp(e):Un(Xh,null,String(e))}function Gp(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:rd(e)}function X6(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ir(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),X6(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!oK(t)?t._ctx=Sa:s===3&&Sa&&(Sa.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else kr(t)?(t={default:t,_ctx:Sa},n=32):(t=String(t),r&64?(n=16,t=[Rr(t)]):n=8);e.children=t,e.shapeFlag|=n}function iu(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Jn([t.class,r.class]));else if(s==="style")t.style=Ta([t.style,r.style]);else if(Ym(s)){const o=t[s],c=r[s];c&&o!==c&&!(ir(o)&&o.includes(c))&&(t[s]=o?[].concat(o,c):c)}else s!==""&&(t[s]=r[s])}return t}function Xl(e,t,n,r=null){eu(e,t,7,[n,r])}const Cme=rK();let Ime=0;function CK(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Cme,o={uid:Ime++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new E6(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lK(r,s),emitsOptions:wK(r,s),emit:null,emitted:null,propsDefaults:Ii,inheritAttrs:r.inheritAttrs,ctx:Ii,data:Ii,props:Ii,attrs:Ii,slots:Ii,refs:Ii,setupState:Ii,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=pme.bind(null,o),e.ce&&e.ce(o),o}let wa=null;const zs=()=>wa||Sa;let qC,Ck;{const e=CS(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),o=>{s.length>1?s.forEach(c=>c(o)):s[0](o)}};qC=t("__VUE_INSTANCE_SETTERS__",n=>wa=n),Ck=t("__VUE_SSR_SETTERS__",n=>$0=n)}const K_=e=>{const t=wa;return qC(e),e.scope.on(),()=>{e.scope.off(),qC(t)}},Ik=()=>{wa&&wa.scope.off(),qC(null)};function IK(e){return e.vnode.shapeFlag&4}let $0=!1;function PK(e,t=!1,n=!1){t&&Ck(t);const{props:r,children:s}=e.vnode,o=IK(e);ime(e,r,o,t),lme(e,s,n||t);const c=o?Pme(e,t):void 0;return t&&Ck(!1),c}function Pme(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Sk);const{setup:r}=n;if(r){rf();const s=e.setupContext=r.length>1?DK(e):null,o=K_(e),c=I1(r,e,0,[e.props,s]),i=S3(c);if(sf(),o(),(i||e.sp)&&!vm(e)&&L6(e),i){if(c.then(Ik,Ik),t)return c.then(f=>{Pk(e,f,t)}).catch(f=>{gy(f,e,0)});e.asyncDep=c}else Pk(e,c,t)}else OK(e,t)}function Pk(e,t,n){kr(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:qi(t)&&(e.devtoolsRawSetupState=t,e.setupState=C6(t)),OK(e,n)}let XC,Ok;function Ome(e){XC=e,Ok=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,zpe))}}const Dme=()=>!XC;function OK(e,t,n){const r=e.type;if(!e.render){if(!t&&XC&&!r.render){const s=r.template||H6(e).template;if(s){const{isCustomElement:o,compilerOptions:c}=e.appContext.config,{delimiters:i,compilerOptions:f}=r,g=Mi(Mi({isCustomElement:o,delimiters:i},c),f);r.render=XC(s,g)}}e.render=r.render||oa,Ok&&Ok(e)}{const s=K_(e);rf();try{Kpe(e)}finally{sf(),s()}}}const Rme={get(e,t){return ja(e,"get",""),e[t]}};function DK(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Rme),slots:e.slots,emit:e.emit,expose:t}}function DS(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(C6(X_(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qw)return qw[n](e)},has(t,n){return n in t||n in qw}})):e.proxy}function Dk(e,t=!0){return kr(e)?e.displayName||e.name:e.name||t&&e.__name}function kme(e){return kr(e)&&"__vccOpts"in e}const Ct=(e,t)=>tpe(e,t,$0);function Hs(e,t,n){try{F2(-1);const r=arguments.length;return r===2?qi(t)&&!ir(t)?af(t)?Un(e,null,[t]):Un(e,t):Un(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&af(n)&&(n=[n]),Un(e,t,n))}finally{F2(1)}}function Lme(){}function Nme(e,t,n,r){const s=n[r];if(s&&RK(s,e))return s;const o=t();return o.memo=e.slice(),o.cacheIndex=r,n[r]=o}function RK(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(Va(n[r],t[r]))return!1;return Z_>0&&Ga&&Ga.push(e),!0}const Rk="3.5.22",Fme=oa,zme=upe,Bme=Hu,$me=O6,Vme={createComponentInstance:CK,setupComponent:PK,renderComponentRoot:NA,setCurrentRenderingInstance:R2,isVNode:af,normalizeVNode:Zl,getComponentPublicInstance:DS,ensureValidVNode:U6,pushWarningContext:ope,popWarningContext:ape},jme=Vme,Ume=null,Hme=null,Wme=null;/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kk;const RV=typeof window<"u"&&window.trustedTypes;if(RV)try{kk=RV.createPolicy("vue",{createHTML:e=>e})}catch{}const kK=kk?e=>kk.createHTML(e):e=>e,Gme="http://www.w3.org/2000/svg",Yme="http://www.w3.org/1998/Math/MathML",Rh=typeof document<"u"?document:null,kV=Rh&&Rh.createElement("template"),qme={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Rh.createElementNS(Gme,e):t==="mathml"?Rh.createElementNS(Yme,e):n?Rh.createElement(e,{is:n}):Rh.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Rh.createTextNode(e),createComment:e=>Rh.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Rh.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,o){const c=n?n.previousSibling:t.lastChild;if(s&&(s===o||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===o||!(s=s.nextSibling)););else{kV.innerHTML=kK(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const i=kV.content;if(r==="svg"||r==="mathml"){const f=i.firstChild;for(;f.firstChild;)i.appendChild(f.firstChild);i.removeChild(f)}t.insertBefore(i,n)}return[c?c.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Op="transition",Kx="animation",V0=Symbol("_vtc"),LK={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},NK=Mi({},k6,LK),Xme=e=>(e.displayName="Transition",e.props=NK,e),vy=Xme((e,{slots:t})=>Hs(WZ,FK(e),t)),t_=(e,t=[])=>{ir(e)?e.forEach(n=>n(...t)):e&&e(...t)},LV=e=>e?ir(e)?e.some(t=>t.length>1):e.length>1:!1;function FK(e){const t={};for(const be in e)be in LK||(t[be]=e[be]);if(e.css===!1)return t;const{name:n="v",type:r,duration:s,enterFromClass:o=`${n}-enter-from`,enterActiveClass:c=`${n}-enter-active`,enterToClass:i=`${n}-enter-to`,appearFromClass:f=o,appearActiveClass:g=c,appearToClass:x=i,leaveFromClass:w=`${n}-leave-from`,leaveActiveClass:A=`${n}-leave-active`,leaveToClass:C=`${n}-leave-to`}=e,F=Zme(s),z=F&&F[0],j=F&&F[1],{onBeforeEnter:V,onEnter:Y,onEnterCancelled:te,onLeave:J,onLeaveCancelled:ee,onBeforeAppear:le=V,onAppear:oe=Y,onAppearCancelled:ve=te}=t,se=(be,Se,Ce,Ee)=>{be._enterCancelled=Ee,zp(be,Se?x:i),zp(be,Se?g:c),Ce&&Ce()},ie=(be,Se)=>{be._isLeaving=!1,zp(be,w),zp(be,C),zp(be,A),Se&&Se()},pe=be=>(Se,Ce)=>{const Ee=be?oe:Y,xe=()=>se(Se,be,Ce);t_(Ee,[Se,xe]),NV(()=>{zp(Se,be?f:o),Id(Se,be?x:i),LV(Ee)||FV(Se,r,z,xe)})};return Mi(t,{onBeforeEnter(be){t_(V,[be]),Id(be,o),Id(be,c)},onBeforeAppear(be){t_(le,[be]),Id(be,f),Id(be,g)},onEnter:pe(!1),onAppear:pe(!0),onLeave(be,Se){be._isLeaving=!0;const Ce=()=>ie(be,Se);Id(be,w),be._enterCancelled?(Id(be,A),Lk(be)):(Lk(be),Id(be,A)),NV(()=>{be._isLeaving&&(zp(be,w),Id(be,C),LV(J)||FV(be,r,j,Ce))}),t_(J,[be,Ce])},onEnterCancelled(be){se(be,!1,void 0,!0),t_(te,[be])},onAppearCancelled(be){se(be,!0,void 0,!0),t_(ve,[be])},onLeaveCancelled(be){ie(be),t_(ee,[be])}})}function Zme(e){if(e==null)return null;if(qi(e))return[CD(e.enter),CD(e.leave)];{const t=CD(e);return[t,t]}}function CD(e){return A2(e)}function Id(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[V0]||(e[V0]=new Set)).add(t)}function zp(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[V0];n&&(n.delete(t),n.size||(e[V0]=void 0))}function NV(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Kme=0;function FV(e,t,n,r){const s=e._endId=++Kme,o=()=>{s===e._endId&&r()};if(n!=null)return setTimeout(o,n);const{type:c,timeout:i,propCount:f}=zK(e,t);if(!c)return r();const g=c+"end";let x=0;const w=()=>{e.removeEventListener(g,A),o()},A=C=>{C.target===e&&++x>=f&&w()};setTimeout(()=>{x<f&&w()},i+1),e.addEventListener(g,A)}function zK(e,t){const n=window.getComputedStyle(e),r=F=>(n[F]||"").split(", "),s=r(`${Op}Delay`),o=r(`${Op}Duration`),c=zV(s,o),i=r(`${Kx}Delay`),f=r(`${Kx}Duration`),g=zV(i,f);let x=null,w=0,A=0;t===Op?c>0&&(x=Op,w=c,A=o.length):t===Kx?g>0&&(x=Kx,w=g,A=f.length):(w=Math.max(c,g),x=w>0?c>g?Op:Kx:null,A=x?x===Op?o.length:f.length:0);const C=x===Op&&/\b(?:transform|all)(?:,|$)/.test(r(`${Op}Property`).toString());return{type:x,timeout:w,propCount:A,hasTransform:C}}function zV(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>BV(n)+BV(e[r])))}function BV(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Lk(e){return(e?e.ownerDocument:document).body.offsetHeight}function Jme(e,t,n){const r=e[V0];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ZC=Symbol("_vod"),BK=Symbol("_vsh"),$K={name:"show",beforeMount(e,{value:t},{transition:n}){e[ZC]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Jx(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Jx(e,!0),r.enter(e)):r.leave(e,()=>{Jx(e,!1)}):Jx(e,t))},beforeUnmount(e,{value:t}){Jx(e,t)}};function Jx(e,t){e.style.display=t?e[ZC]:"none",e[BK]=!t}function Qme(){$K.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const VK=Symbol("");function ege(e){const t=zs();if(!t)return;const n=t.ut=(s=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(o=>KC(o,s))},r=()=>{const s=e(t.proxy);t.ce?KC(t.ce,s):Nk(t.subTree,s),n(s)};z6(()=>{O2(r)}),ua(()=>{Hr(r,oa,{flush:"post"});const s=new MutationObserver(r);s.observe(t.subTree.el.parentNode,{childList:!0}),_y(()=>s.disconnect())})}function Nk(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Nk(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)KC(e.el,t);else if(e.type===ei)e.children.forEach(n=>Nk(n,t));else if(e.type===bm){let{el:n,anchor:r}=e;for(;n&&(KC(n,t),n!==r);)n=n.nextSibling}}function KC(e,t){if(e.nodeType===1){const n=e.style;let r="";for(const s in t){const o=hZ(t[s]);n.setProperty(`--${s}`,o),r+=`--${s}: ${o};`}n[VK]=r}}const tge=/(?:^|;)\s*display\s*:/;function nge(e,t,n){const r=e.style,s=Kr(n);let o=!1;if(n&&!s){if(t)if(Kr(t))for(const c of t.split(";")){const i=c.slice(0,c.indexOf(":")).trim();n[i]==null&&zA(r,i,"")}else for(const c in t)n[c]==null&&zA(r,c,"");for(const c in n)c==="display"&&(o=!0),zA(r,c,n[c])}else if(s){if(t!==n){const c=r[VK];c&&(n+=";"+c),r.cssText=n,o=tge.test(n)}}else t&&e.removeAttribute("style");ZC in e&&(e[ZC]=o?r.display:"",e[BK]&&(r.display="none"))}const $V=/\s*!important$/;function zA(e,t,n){if(ir(n))n.forEach(r=>zA(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=rge(e,t);$V.test(n)?e.setProperty(Ha(r),n.replace($V,""),"important"):e[r]=n}}const VV=["Webkit","Moz","ms"],ID={};function rge(e,t){const n=ID[t];if(n)return n;let r=Is(t);if(r!=="filter"&&r in e)return ID[t]=r;r=Xm(r);for(let s=0;s<VV.length;s++){const o=VV[s]+r;if(o in e)return ID[t]=o}return t}const jV="http://www.w3.org/1999/xlink";function UV(e,t,n,r,s,o=lZ(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(jV,t.slice(6,t.length)):e.setAttributeNS(jV,t,n):n==null||o&&!S6(n)?e.removeAttribute(t):e.setAttribute(t,o?"":Cl(n)?String(n):n)}function HV(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?kK(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const i=o==="OPTION"?e.getAttribute("value")||"":e.value,f=n==null?e.type==="checkbox"?"on":"":String(n);(i!==f||!("_value"in e))&&(e.value=f),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const i=typeof e[t];i==="boolean"?n=S6(n):n==null&&i==="string"?(n="",c=!0):i==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(s||t)}function jh(e,t,n,r){e.addEventListener(t,n,r)}function ige(e,t,n,r){e.removeEventListener(t,n,r)}const WV=Symbol("_vei");function sge(e,t,n,r,s=null){const o=e[WV]||(e[WV]={}),c=o[t];if(r&&c)c.value=r;else{const[i,f]=oge(t);if(r){const g=o[t]=cge(r,s);jh(e,i,g,f)}else c&&(ige(e,i,c,f),o[t]=void 0)}}const GV=/(?:Once|Passive|Capture)$/;function oge(e){let t;if(GV.test(e)){t={};let r;for(;r=e.match(GV);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ha(e.slice(2)),t]}let PD=0;const age=Promise.resolve(),lge=()=>PD||(age.then(()=>PD=0),PD=Date.now());function cge(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;eu(uge(r,n.value),t,5,[r])};return n.value=e,n.attached=lge(),n}function uge(e,t){if(ir(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const YV=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,dge=(e,t,n,r,s,o)=>{const c=s==="svg";t==="class"?Jme(e,r,c):t==="style"?nge(e,n,r):Ym(t)?x3(t)||sge(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):hge(e,t,r,c))?(HV(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&UV(e,t,r,c,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Kr(r))?HV(e,Is(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),UV(e,t,r,c))};function hge(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&YV(t)&&kr(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return YV(t)&&Kr(n)?!1:t in e}const qV={};function jK(e,t,n){let r=ki(e,t);AS(r)&&(r=Mi({},r,t));class s extends V3{constructor(c){super(r,c,n)}}return s.def=r,s}const fge=((e,t)=>jK(e,t,J6)),pge=typeof HTMLElement<"u"?HTMLElement:class{};class V3 extends pge{constructor(t,n={},r=B2){super(),this._def=t,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==B2?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow(Mi({},t.shadowRootOptions,{mode:"open"})),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof V3){this._parent=t;break}this._instance||(this._resolved?this._mount(this._def):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._inheritParentContext(t))}_inheritParentContext(t=this._parent){t&&this._app&&Object.setPrototypeOf(this._app._context.provides,t._instance.provides)}disconnectedCallback(){this._connected=!1,es(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null,this._teleportTargets&&(this._teleportTargets.clear(),this._teleportTargets=void 0))})}_processMutations(t){for(const n of t)this._setAttr(n.attributeName)}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(this._processMutations.bind(this)),this._ob.observe(this,{attributes:!0});const t=(r,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:o,styles:c}=r;let i;if(o&&!ir(o))for(const f in o){const g=o[f];(g===Number||g&&g.type===Number)&&(f in this._props&&(this._props[f]=A2(this._props[f])),(i||(i=Object.create(null)))[Is(f)]=!0)}this._numberProps=i,this._resolveProps(r),this.shadowRoot&&this._applyStyles(c),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>{r.configureApp=this._def.configureApp,t(this._def=r,!0)}):t(this._def)}_mount(t){t.name||(t.name="VueElement"),this._app=this._createApp(t),this._inheritParentContext(),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Yi(this,r)||Object.defineProperty(this,r,{get:()=>fn(n[r])})}_resolveProps(t){const{props:n}=t,r=ir(n)?n:Object.keys(n||{});for(const s of Object.keys(this))s[0]!=="_"&&r.includes(s)&&this._setProp(s,this[s]);for(const s of r.map(Is))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(o){this._setProp(s,o,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const n=this.hasAttribute(t);let r=n?this.getAttribute(t):qV;const s=Is(t);n&&this._numberProps&&this._numberProps[s]&&(r=A2(r)),this._setProp(s,r,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,n,r=!0,s=!1){if(n!==this._props[t]&&(n===qV?delete this._props[t]:(this._props[t]=n,t==="key"&&this._app&&(this._app._ceVNode.key=n)),s&&this._instance&&this._update(),r)){const o=this._ob;o&&(this._processMutations(o.takeRecords()),o.disconnect()),n===!0?this.setAttribute(Ha(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Ha(t),n+""):n||this.removeAttribute(Ha(t)),o&&o.observe(this,{attributes:!0})}}_update(){const t=this._createVNode();this._app&&(t.appContext=this._app._context),eJ(t,this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const n=Un(this._def,Mi(t,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const s=(o,c)=>{this.dispatchEvent(new CustomEvent(o,AS(c[0])?Mi({detail:c},c[0]):{detail:c}))};r.emit=(o,...c)=>{s(o,c),Ha(o)!==o&&s(Ha(o),c)},this._setParent()}),n}_applyStyles(t,n){if(!t)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let s=t.length-1;s>=0;s--){const o=document.createElement("style");r&&o.setAttribute("nonce",r),o.textContent=t[s],this.shadowRoot.prepend(o)}}_parseSlots(){const t=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(t[r]||(t[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const t=this._getSlots(),n=this._instance.type.__scopeId;for(let r=0;r<t.length;r++){const s=t[r],o=s.getAttribute("name")||"default",c=this._slots[o],i=s.parentNode;if(c)for(const f of c){if(n&&f.nodeType===1){const g=n+"-s",x=document.createTreeWalker(f,1);f.setAttribute(g,"");let w;for(;w=x.nextNode();)w.setAttribute(g,"")}i.insertBefore(f,s)}else for(;s.firstChild;)i.insertBefore(s.firstChild,s);i.removeChild(s)}}_getSlots(){const t=[this];return this._teleportTargets&&t.push(...this._teleportTargets),t.reduce((n,r)=>(n.push(...Array.from(r.querySelectorAll("slot"))),n),[])}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function UK(e){const t=zs(),n=t&&t.ce;return n||null}function mge(){const e=UK();return e&&e.shadowRoot}function j0(e="$style"){{const t=zs();if(!t)return Ii;const n=t.type.__cssModules;if(!n)return Ii;const r=n[e];return r||Ii}}const HK=new WeakMap,WK=new WeakMap,JC=Symbol("_moveCb"),XV=Symbol("_enterCb"),gge=e=>(delete e.props.mode,e),_ge=gge({name:"TransitionGroup",props:Mi({},NK,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=zs(),r=R6();let s,o;return F3(()=>{if(!s.length)return;const c=e.moveClass||`${e.name||"v"}-move`;if(!wge(s[0].el,n.vnode.el,c)){s=[];return}s.forEach(vge),s.forEach(bge);const i=s.filter(xge);Lk(n.vnode.el),i.forEach(f=>{const g=f.el,x=g.style;Id(g,c),x.transform=x.webkitTransform=x.transitionDuration="";const w=g[JC]=A=>{A&&A.target!==g||(!A||A.propertyName.endsWith("transform"))&&(g.removeEventListener("transitionend",w),g[JC]=null,zp(g,c))};g.addEventListener("transitionend",w)}),s=[]}),()=>{const c=gi(e),i=FK(c);let f=c.tag||ei;if(s=[],o)for(let g=0;g<o.length;g++){const x=o[g];x.el&&x.el instanceof Element&&(s.push(x),of(x,z0(x,i,r,n)),HK.set(x,x.el.getBoundingClientRect()))}o=t.default?L3(t.default()):[];for(let g=0;g<o.length;g++){const x=o[g];x.key!=null&&of(x,z0(x,i,r,n))}return Un(f,null,o)}}}),yge=_ge;function vge(e){const t=e.el;t[JC]&&t[JC](),t[XV]&&t[XV]()}function bge(e){WK.set(e,e.el.getBoundingClientRect())}function xge(e){const t=HK.get(e),n=WK.get(e),r=t.left-n.left,s=t.top-n.top;if(r||s){const o=e.el.style;return o.transform=o.webkitTransform=`translate(${r}px,${s}px)`,o.transitionDuration="0s",e}}function wge(e,t,n){const r=e.cloneNode(),s=e[V0];s&&s.forEach(i=>{i.split(/\s+/).forEach(f=>f&&r.classList.remove(f))}),n.split(/\s+/).forEach(i=>i&&r.classList.add(i)),r.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(r);const{hasTransform:c}=zK(r);return o.removeChild(r),c}const Dm=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ir(t)?n=>D_(t,n):t};function Sge(e){e.target.composing=!0}function ZV(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Xc=Symbol("_assign"),z2={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Xc]=Dm(s);const o=r||s.props&&s.props.type==="number";jh(e,t?"change":"input",c=>{if(c.target.composing)return;let i=e.value;n&&(i=i.trim()),o&&(i=M2(i)),e[Xc](i)}),n&&jh(e,"change",()=>{e.value=e.value.trim()}),t||(jh(e,"compositionstart",Sge),jh(e,"compositionend",ZV),jh(e,"change",ZV))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:o}},c){if(e[Xc]=Dm(c),e.composing)return;const i=(o||e.type==="number")&&!/^0\d/.test(e.value)?M2(e.value):e.value,f=t??"";i!==f&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===f)||(e.value=f))}},Z6={deep:!0,created(e,t,n){e[Xc]=Dm(n),jh(e,"change",()=>{const r=e._modelValue,s=U0(e),o=e.checked,c=e[Xc];if(ir(r)){const i=IS(r,s),f=i!==-1;if(o&&!f)c(r.concat(s));else if(!o&&f){const g=[...r];g.splice(i,1),c(g)}}else if(qm(r)){const i=new Set(r);o?i.add(s):i.delete(s),c(i)}else c(YK(e,o))})},mounted:KV,beforeUpdate(e,t,n){e[Xc]=Dm(n),KV(e,t,n)}};function KV(e,{value:t,oldValue:n},r){e._modelValue=t;let s;if(ir(t))s=IS(t,r.props.value)>-1;else if(qm(t))s=t.has(r.props.value);else{if(t===n)return;s=nf(t,YK(e,!0))}e.checked!==s&&(e.checked=s)}const K6={created(e,{value:t},n){e.checked=nf(t,n.props.value),e[Xc]=Dm(n),jh(e,"change",()=>{e[Xc](U0(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[Xc]=Dm(r),t!==n&&(e.checked=nf(t,r.props.value))}},GK={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=qm(t);jh(e,"change",()=>{const o=Array.prototype.filter.call(e.options,c=>c.selected).map(c=>n?M2(U0(c)):U0(c));e[Xc](e.multiple?s?new Set(o):o:o[0]),e._assigning=!0,es(()=>{e._assigning=!1})}),e[Xc]=Dm(r)},mounted(e,{value:t}){JV(e,t)},beforeUpdate(e,t,n){e[Xc]=Dm(n)},updated(e,{value:t}){e._assigning||JV(e,t)}};function JV(e,t){const n=e.multiple,r=ir(t);if(!(n&&!r&&!qm(t))){for(let s=0,o=e.options.length;s<o;s++){const c=e.options[s],i=U0(c);if(n)if(r){const f=typeof i;f==="string"||f==="number"?c.selected=t.some(g=>String(g)===String(i)):c.selected=IS(t,i)>-1}else c.selected=t.has(i);else if(nf(U0(c),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function U0(e){return"_value"in e?e._value:e.value}function YK(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const qK={created(e,t,n){hM(e,t,n,null,"created")},mounted(e,t,n){hM(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){hM(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){hM(e,t,n,r,"updated")}};function XK(e,t){switch(e){case"SELECT":return GK;case"TEXTAREA":return z2;default:switch(t){case"checkbox":return Z6;case"radio":return K6;default:return z2}}}function hM(e,t,n,r,s){const c=XK(e.tagName,n.props&&n.props.type)[s];c&&c(e,t,n,r)}function Ege(){z2.getSSRProps=({value:e})=>({value:e}),K6.getSSRProps=({value:e},t)=>{if(t.props&&nf(t.props.value,e))return{checked:!0}},Z6.getSSRProps=({value:e},t)=>{if(ir(e)){if(t.props&&IS(e,t.props.value)>-1)return{checked:!0}}else if(qm(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},qK.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=XK(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const Tge=["ctrl","shift","alt","meta"],Mge={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Tge.some(n=>e[`${n}Key`]&&!t.includes(n))},ZK=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=((s,...o)=>{for(let c=0;c<t.length;c++){const i=Mge[t[c]];if(i&&i(s,t))return}return e(s,...o)}))},Age={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},QC=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const o=Ha(s.key);if(t.some(c=>c===o||Age[c]===o))return e(s)}))},KK=Mi({patchProp:dge},qme);let Zw,QV=!1;function JK(){return Zw||(Zw=hK(KK))}function QK(){return Zw=QV?Zw:fK(KK),QV=!0,Zw}const eJ=((...e)=>{JK().render(...e)}),Cge=((...e)=>{QK().hydrate(...e)}),B2=((...e)=>{const t=JK().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=nJ(r);if(!s)return;const o=t._component;!kr(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const c=n(s,!1,tJ(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),c},t}),J6=((...e)=>{const t=QK().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=nJ(r);if(s)return n(s,!0,tJ(s))},t});function tJ(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function nJ(e){return Kr(e)?document.querySelector(e):e}let ej=!1;const Ige=()=>{ej||(ej=!0,Ege(),Qme())},Pge=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:WZ,BaseTransitionPropsValidators:k6,Comment:po,DeprecationTypes:Wme,EffectScope:E6,ErrorCodes:cpe,ErrorTypeStrings:zme,Fragment:ei,KeepAlive:YZ,ReactiveEffect:C2,Static:bm,Suspense:$3,Teleport:vpe,Text:Xh,TrackOpTypes:npe,Transition:vy,TransitionGroup:yge,TriggerOpTypes:rpe,VueElement:V3,assertNumber:lpe,callWithAsyncErrorHandling:eu,callWithErrorHandling:I1,camelize:Is,capitalize:Xm,cloneVNode:rd,compatUtils:Hme,computed:Ct,createApp:B2,createBlock:Zr,createCommentVNode:fi,createElementBlock:Nn,createElementVNode:qn,createHydrationRenderer:fK,createPropsRestProxy:Xpe,createRenderer:hK,createSSRApp:J6,createSlots:Fpe,createStaticVNode:q6,createTextVNode:Rr,createVNode:Un,customRef:D3,defineAsyncComponent:sm,defineComponent:ki,defineCustomElement:jK,defineEmits:$pe,defineExpose:Vpe,defineModel:Hpe,defineOptions:jpe,defineProps:Bpe,defineSSRCustomElement:fge,defineSlots:Upe,devtools:Bme,effect:Afe,effectScope:M3,getCurrentInstance:zs,getCurrentScope:my,getCurrentWatcher:ipe,getTransitionRawChildren:L3,guardReactiveProps:B0,h:Hs,handleError:gy,hasInjectionContext:Zm,hydrate:Cge,hydrateOnIdle:Cpe,hydrateOnInteraction:Dpe,hydrateOnMediaQuery:Ope,hydrateOnVisible:Ppe,initCustomFormatter:Lme,initDirectivesForSSR:Ige,inject:bs,isMemoSame:RK,isProxy:O3,isReactive:Ku,isReadonly:Zd,isRef:Fi,isRuntimeOnly:Dme,isShallow:Ec,isVNode:af,markRaw:X_,mergeDefaults:Ype,mergeModels:qpe,mergeProps:iu,nextTick:es,normalizeClass:Jn,normalizeProps:ym,normalizeStyle:Ta,onActivated:N6,onBeforeMount:XZ,onBeforeUnmount:Mf,onBeforeUpdate:z6,onDeactivated:F6,onErrorCaptured:HC,onMounted:ua,onRenderTracked:KZ,onRenderTriggered:ZZ,onScopeDispose:F0,onServerPrefetch:B6,onUnmounted:_y,onUpdated:F3,onWatcherCleanup:PZ,openBlock:ln,popScopeId:FZ,provide:Ko,proxyRefs:C6,pushScopeId:NZ,queuePostFlushCb:O2,reactive:Bo,readonly:q_,ref:yr,registerRuntimeCompiler:Ome,render:eJ,renderList:So,renderSlot:Co,resolveComponent:eo,resolveDirective:V6,resolveDynamicComponent:P1,resolveFilter:Ume,resolveTransitionHooks:z0,setBlockTracking:F2,setDevtoolsHook:$me,setTransitionHooks:of,shallowReactive:Yu,shallowReadonly:Yfe,shallowRef:mo,ssrContextKey:_K,ssrUtils:jme,stop:Cfe,toDisplayString:is,toHandlerKey:O_,toHandlers:QZ,toRaw:gi,toRef:vl,toRefs:I6,toValue:Xn,transformVNodeArgs:Mme,triggerRef:Xfe,unref:fn,useAttrs:Gpe,useCssModule:j0,useCssVars:ege,useHost:UK,useId:xpe,useModel:fme,useSSRContext:yK,useShadowRoot:mge,useSlots:eK,useTemplateRef:LA,useTransitionState:R6,vModelCheckbox:Z6,vModelDynamic:qK,vModelRadio:K6,vModelSelect:GK,vModelText:z2,vShow:$K,version:Rk,warn:Fme,watch:Hr,watchEffect:yy,watchPostEffect:dme,watchSyncEffect:vK,withAsyncContext:Zpe,withCtx:Dr,withDefaults:Wpe,withDirectives:k2,withKeys:QC,withMemo:Nme,withModifiers:ZK,withScopeId:zZ},Symbol.toStringTag,{value:"Module"})),Oge=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Dge=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Rge=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function kge(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Lge(e);return}return t}function Lge(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function $2(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Rge.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(Oge.test(e)||Dge.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,kge)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}const Nge=/#/g,Fge=/&/g,zge=/\//g,Bge=/=/g,Q6=/\+/g,$ge=/%5e/gi,Vge=/%60/gi,jge=/%7c/gi,Uge=/%20/gi;function Hge(e){return encodeURI(""+e).replace(jge,"|")}function Fk(e){return Hge(typeof e=="string"?e:JSON.stringify(e)).replace(Q6,"%2B").replace(Uge,"+").replace(Nge,"%23").replace(Fge,"%26").replace(Vge,"`").replace($ge,"^").replace(zge,"%2F")}function OD(e){return Fk(e).replace(Bge,"%3D")}function eI(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function Wge(e){return eI(e.replace(Q6," "))}function Gge(e){return eI(e.replace(Q6," "))}function eN(e=""){const t=Object.create(null);e[0]==="?"&&(e=e.slice(1));for(const n of e.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=Wge(r[1]);if(s==="__proto__"||s==="constructor")continue;const o=Gge(r[2]||"");t[s]===void 0?t[s]=o:Array.isArray(t[s])?t[s].push(o):t[s]=[t[s],o]}return t}function Yge(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(n=>`${OD(e)}=${Fk(n)}`).join("&"):`${OD(e)}=${Fk(t)}`:OD(e)}function qge(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>Yge(t,e[t])).filter(Boolean).join("&")}const Xge=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Zge=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Kge=/^([/\\]\s*){2,}[^/\\]/,Jge=/^[\s\0]*(blob|data|javascript|vbscript):$/i,Qge=/\/$|\/\?|\/#/,e_e=/^\.?\//;function Km(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?Xge.test(e):Zge.test(e)||(t.acceptRelative?Kge.test(e):!1)}function t_e(e){return!!e&&Jge.test(e)}function zk(e="",t){return t?Qge.test(e):e.endsWith("/")}function V2(e="",t){if(!t)return(zk(e)?e.slice(0,-1):e)||"/";if(!zk(e,!0))return e||"/";let n=e,r="";const s=e.indexOf("#");s!==-1&&(n=e.slice(0,s),r=e.slice(s));const[o,...c]=n.split("?");return((o.endsWith("/")?o.slice(0,-1):o)||"/")+(c.length>0?`?${c.join("?")}`:"")+r}function rJ(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(zk(e,!0))return e||"/";let n=e,r="";const s=e.indexOf("#");if(s!==-1&&(n=e.slice(0,s),r=e.slice(s),!n))return r;const[o,...c]=n.split("?");return o+"/"+(c.length>0?`?${c.join("?")}`:"")+r}function n_e(e,t){if(iJ(t)||Km(e))return e;const n=V2(t);return e.startsWith(n)?e:j3(n,e)}function tj(e,t){if(iJ(t))return e;const n=V2(t);if(!e.startsWith(n))return e;const r=e.slice(n.length);return r[0]==="/"?r:"/"+r}function j2(e,t){const n=aJ(e),r={...eN(n.search),...t};return n.search=qge(r),s_e(n)}function iJ(e){return!e||e==="/"}function r_e(e){return e&&e!=="/"}function j3(e,...t){let n=e||"";for(const r of t.filter(s=>r_e(s)))if(n){const s=r.replace(e_e,"");n=rJ(n)+s}else n=r;return n}function sJ(...e){const t=/\/(?!\/)/,n=e.filter(Boolean),r=[];let s=0;for(const c of n)if(!(!c||c==="/")){for(const[i,f]of c.split(t).entries())if(!(!f||f===".")){if(f===".."){if(r.length===1&&Km(r[0]))continue;r.pop(),s--;continue}if(i===1&&r[r.length-1]?.endsWith(":/")){r[r.length-1]+="/"+f;continue}r.push(f),s++}}let o=r.join("/");return s>=0?n[0]?.startsWith("/")&&!o.startsWith("/")?o="/"+o:n[0]?.startsWith("./")&&!o.startsWith("./")&&(o="./"+o):o="../".repeat(-1*s)+o,n[n.length-1]?.endsWith("/")&&!o.endsWith("/")&&(o+="/"),o}function i_e(e,t){return eI(V2(e))===eI(V2(t))}const oJ=Symbol.for("ufo:protocolRelative");function aJ(e="",t){const n=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,w,A=""]=n;return{protocol:w.toLowerCase(),pathname:A,href:w+A,auth:"",host:"",search:"",hash:""}}if(!Km(e,{acceptRelative:!0}))return nj(e);const[,r="",s,o=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,c="",i=""]=o.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(i=i.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:f,search:g,hash:x}=nj(i);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:c,pathname:f,search:g,hash:x,[oJ]:!r}}function nj(e=""){const[t="",n="",r=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:n,hash:r}}function s_e(e){const t=e.pathname||"",n=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",r=e.hash||"",s=e.auth?e.auth+"@":"",o=e.host||"";return(e.protocol||e[oJ]?(e.protocol||"")+"//":"")+s+o+t+n+r}class o_e extends Error{constructor(t,n){super(t,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function a_e(e){const t=e.error?.message||e.error?.toString()||"",n=e.request?.method||e.options?.method||"GET",r=e.request?.url||String(e.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,o=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",c=`${s}: ${o}${t?` ${t}`:""}`,i=new o_e(c,e.error?{cause:e.error}:void 0);for(const f of["request","options","response"])Object.defineProperty(i,f,{get(){return e[f]}});for(const[f,g]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(i,f,{get(){return e.response&&e.response[g]}});return i}const l_e=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function rj(e="GET"){return l_e.has(e.toUpperCase())}function c_e(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer||e instanceof FormData||e instanceof URLSearchParams?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const u_e=new Set(["image/svg","application/xml","application/xhtml","application/html"]),d_e=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function h_e(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return d_e.test(t)?"json":t==="text/event-stream"?"stream":u_e.has(t)||t.startsWith("text/")?"text":"blob"}function f_e(e,t,n,r){const s=p_e(t?.headers??e?.headers,n?.headers,r);let o;return(n?.query||n?.params||t?.params||t?.query)&&(o={...n?.params,...n?.query,...t?.params,...t?.query}),{...n,...t,query:o,params:o,headers:s}}function p_e(e,t,n){if(!t)return new n(e);const r=new n(t);if(e)for(const[s,o]of Symbol.iterator in e||Array.isArray(e)?e:new n(e))r.set(s,o);return r}async function fM(e,t){if(t)if(Array.isArray(t))for(const n of t)await n(e);else await t(e)}const m_e=new Set([408,409,425,429,500,502,503,504]),g_e=new Set([101,204,205,304]);function lJ(e={}){const{fetch:t=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=e;async function s(i){const f=i.error&&i.error.name==="AbortError"&&!i.options.timeout||!1;if(i.options.retry!==!1&&!f){let x;typeof i.options.retry=="number"?x=i.options.retry:x=rj(i.options.method)?0:1;const w=i.response&&i.response.status||500;if(x>0&&(Array.isArray(i.options.retryStatusCodes)?i.options.retryStatusCodes.includes(w):m_e.has(w))){const A=typeof i.options.retryDelay=="function"?i.options.retryDelay(i):i.options.retryDelay||0;return A>0&&await new Promise(C=>setTimeout(C,A)),o(i.request,{...i.options,retry:x-1})}}const g=a_e(i);throw Error.captureStackTrace&&Error.captureStackTrace(g,o),g}const o=async function(f,g={}){const x={request:f,options:f_e(f,g,e.defaults,n),response:void 0,error:void 0};if(x.options.method&&(x.options.method=x.options.method.toUpperCase()),x.options.onRequest&&await fM(x,x.options.onRequest),typeof x.request=="string"&&(x.options.baseURL&&(x.request=n_e(x.request,x.options.baseURL)),x.options.query&&(x.request=j2(x.request,x.options.query),delete x.options.query),"query"in x.options&&delete x.options.query,"params"in x.options&&delete x.options.params),x.options.body&&rj(x.options.method))if(c_e(x.options.body)){const C=x.options.headers.get("content-type");typeof x.options.body!="string"&&(x.options.body=C==="application/x-www-form-urlencoded"?new URLSearchParams(x.options.body).toString():JSON.stringify(x.options.body)),x.options.headers=new n(x.options.headers||{}),C||x.options.headers.set("content-type","application/json"),x.options.headers.has("accept")||x.options.headers.set("accept","application/json")}else("pipeTo"in x.options.body&&typeof x.options.body.pipeTo=="function"||typeof x.options.body.pipe=="function")&&("duplex"in x.options||(x.options.duplex="half"));let w;if(!x.options.signal&&x.options.timeout){const C=new r;w=setTimeout(()=>{const F=new Error("[TimeoutError]: The operation was aborted due to timeout");F.name="TimeoutError",F.code=23,C.abort(F)},x.options.timeout),x.options.signal=C.signal}try{x.response=await t(x.request,x.options)}catch(C){return x.error=C,x.options.onRequestError&&await fM(x,x.options.onRequestError),await s(x)}finally{w&&clearTimeout(w)}if((x.response.body||x.response._bodyInit)&&!g_e.has(x.response.status)&&x.options.method!=="HEAD"){const C=(x.options.parseResponse?"json":x.options.responseType)||h_e(x.response.headers.get("content-type")||"");switch(C){case"json":{const F=await x.response.text(),z=x.options.parseResponse||$2;x.response._data=z(F);break}case"stream":{x.response._data=x.response.body||x.response._bodyInit;break}default:x.response._data=await x.response[C]()}}return x.options.onResponse&&await fM(x,x.options.onResponse),!x.options.ignoreResponseError&&x.response.status>=400&&x.response.status<600?(x.options.onResponseError&&await fM(x,x.options.onResponseError),await s(x)):x.response},c=async function(f,g){return(await o(f,g))._data};return c.raw=o,c.native=(...i)=>t(...i),c.create=(i={},f={})=>lJ({...e,...f,defaults:{...e.defaults,...f.defaults,...i}}),c}const tI=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),__e=tI.fetch?(...e)=>tI.fetch(...e):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),y_e=tI.Headers,v_e=tI.AbortController,b_e=lJ({fetch:__e,Headers:y_e,AbortController:v_e}),x_e=b_e,w_e=()=>window?.__NUXT__?.config||window?.useNuxtApp?.().payload?.config,tN=()=>w_e().app,S_e=()=>tN().baseURL,E_e=()=>tN().buildAssetsDir,T_e=(...e)=>sJ(cJ(),E_e(),...e),cJ=(...e)=>{const t=tN(),n=t.cdnURL||t.baseURL;return e.length?sJ(n,...e):n};globalThis.__buildAssetsURL=T_e,globalThis.__publicAssetsURL=cJ;globalThis.$fetch||(globalThis.$fetch=x_e.create({baseURL:S_e()}));"global"in globalThis||(globalThis.global=globalThis);function Bk(e,t={},n){for(const r in e){const s=e[r],o=n?`${n}:${r}`:r;typeof s=="object"&&s!==null?Bk(s,t,o):typeof s=="function"&&(t[o]=s)}return t}const M_e={run:e=>e()},A_e=()=>M_e,uJ=typeof console.createTask<"u"?console.createTask:A_e;function C_e(e,t){const n=t.shift(),r=uJ(n);return e.reduce((s,o)=>s.then(()=>r.run(()=>o(...t))),Promise.resolve())}function I_e(e,t){const n=t.shift(),r=uJ(n);return Promise.all(e.map(s=>r.run(()=>s(...t))))}function DD(e,t){for(const n of[...e])n(t)}class P_e{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,n,r={}){if(!t||typeof n!="function")return()=>{};const s=t;let o;for(;this._deprecatedHooks[t];)o=this._deprecatedHooks[t],t=o.to;if(o&&!r.allowDeprecated){let c=o.message;c||(c=`${s} hook has been deprecated`+(o.to?`, please use ${o.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(c)||(console.warn(c),this._deprecatedMessages.add(c))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(n),()=>{n&&(this.removeHook(t,n),n=void 0)}}hookOnce(t,n){let r,s=(...o)=>(typeof r=="function"&&r(),r=void 0,s=void 0,n(...o));return r=this.hook(t,s),r}removeHook(t,n){if(this._hooks[t]){const r=this._hooks[t].indexOf(n);r!==-1&&this._hooks[t].splice(r,1),this._hooks[t].length===0&&delete this._hooks[t]}}deprecateHook(t,n){this._deprecatedHooks[t]=typeof n=="string"?{to:n}:n;const r=this._hooks[t]||[];delete this._hooks[t];for(const s of r)this.hook(t,s)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const n in t)this.deprecateHook(n,t[n])}addHooks(t){const n=Bk(t),r=Object.keys(n).map(s=>this.hook(s,n[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(t){const n=Bk(t);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...n){return n.unshift(t),this.callHookWith(C_e,t,...n)}callHookParallel(t,...n){return n.unshift(t),this.callHookWith(I_e,t,...n)}callHookWith(t,n,...r){const s=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&DD(this._before,s);const o=t(n in this._hooks?[...this._hooks[n]]:[],r);return o instanceof Promise?o.finally(()=>{this._after&&s&&DD(this._after,s)}):(this._after&&s&&DD(this._after,s),o)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const n=this._before.indexOf(t);n!==-1&&this._before.splice(n,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const n=this._after.indexOf(t);n!==-1&&this._after.splice(n,1)}}}}function dJ(){return new P_e}function O_e(e={}){let t,n=!1;const r=c=>{if(t&&t!==c)throw new Error("Context conflict")};let s;if(e.asyncContext){const c=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;c?s=new c:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const o=()=>{if(s){const c=s.getStore();if(c!==void 0)return c}return t};return{use:()=>{const c=o();if(c===void 0)throw new Error("Context is not available");return c},tryUse:()=>o(),set:(c,i)=>{i||r(c),t=c,n=!0},unset:()=>{t=void 0,n=!1},call:(c,i)=>{r(c),t=c;try{return s?s.run(c,i):i()}finally{n||(t=void 0)}},async callAsync(c,i){t=c;const f=()=>{t=c},g=()=>t===c?f:void 0;$k.add(g);try{const x=s?s.run(c,i):i();return n||(t=void 0),await x}finally{$k.delete(g)}}}}function D_e(e={}){const t={};return{get(n,r={}){return t[n]||(t[n]=O_e({...e,...r})),t[n]}}}const nI=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},ij="__unctx__",R_e=nI[ij]||(nI[ij]=D_e()),k_e=(e,t={})=>R_e.get(e,t),sj="__unctx_async_handlers__",$k=nI[sj]||(nI[sj]=new Set);function Zh(e){const t=[];for(const s of $k){const o=s();o&&t.push(o)}const n=()=>{for(const s of t)s()};let r=e();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(s=>{throw n(),s})),[r,n]}const L_e=!1,oj=!1,N_e=!1,aj={id:"__nuxt-loader"},F_e=!1,z_e={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},Yct={deep:!1},B_e="#__nuxt",hJ="nuxt-app",$_e="vite:preloadError";function fJ(e=hJ){return k_e(e,{asyncContext:!1})}const V_e="__nuxt_plugin";function j_e(e){let t=0;const n={_id:e.id||hJ||"nuxt-app",_scope:M3(),provide:void 0,versions:{get nuxt(){return"4.1.2"},get vue(){return n.vueApp.version}},payload:Yu({...e.ssrContext?.payload||{},data:Yu({}),state:Bo({}),once:new Set,_errors:Yu({})}),static:{data:{}},runWithContext(s){return n._scope.active&&!my()?n._scope.run(()=>lj(n,s)):lj(n,s)},isHydrating:!0,deferHydration(){if(!n.isHydrating)return()=>{};t++;let s=!1;return()=>{if(!s&&(s=!0,t--,t===0))return n.isHydrating=!1,n.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:Yu({}),_payloadRevivers:{},...e};{const s=window.__NUXT__;if(s)for(const o in s)switch(o){case"data":case"state":case"_errors":Object.assign(n.payload[o],s[o]);break;default:n.payload[o]=s[o]}}n.hooks=dJ(),n.hook=n.hooks.hook,n.callHook=n.hooks.callHook,n.provide=(s,o)=>{const c="$"+s;pM(n,c,o),pM(n.vueApp.config.globalProperties,c,o)},pM(n.vueApp,"$nuxt",n),pM(n.vueApp.config.globalProperties,"$nuxt",n);{window.addEventListener($_e,o=>{n.callHook("app:chunkError",{error:o.payload}),o.payload.message.includes("Unable to preload CSS")&&o.preventDefault()}),window.useNuxtApp||=Wn;const s=n.hook("app:error",(...o)=>{console.error("[nuxt] error caught during app initialization",...o)});n.hook("app:mounted",s)}const r=n.payload.config;return n.provide("config",r),n}function U_e(e,t){t.hooks&&e.hooks.addHooks(t.hooks)}async function H_e(e,t){if(typeof t=="function"){const{provide:n}=await e.runWithContext(()=>t(e))||{};if(n&&typeof n=="object")for(const r in n)e.provide(r,n[r])}}async function W_e(e,t){const n=new Set,r=[],s=[];let o,c=0;async function i(f){const g=f.dependsOn?.filter(x=>t.some(w=>w._name===x)&&!n.has(x))??[];if(g.length>0)r.push([new Set(g),f]);else{const x=H_e(e,f).then(async()=>{f._name&&(n.add(f._name),await Promise.all(r.map(async([w,A])=>{w.has(f._name)&&(w.delete(f._name),w.size===0&&(c++,await i(A)))})))}).catch(w=>{if(!f.parallel&&!e.payload.error)throw w;o||=w});f.parallel?s.push(x):await x}}for(const f of t)U_e(e,f);for(const f of t)await i(f);if(await Promise.all(s),c)for(let f=0;f<c;f++)await Promise.all(s);if(o)throw e.payload.error||o}function xs(e){if(typeof e=="function")return e;const t=e._name||e.name;return delete e.name,Object.assign(e.setup||(()=>{}),e,{[V_e]:!0,_name:t})}function lj(e,t,n){const r=()=>t();return fJ(e._id).set(e),e.vueApp.runWithContext(r)}function G_e(e){let t;return Zm()&&(t=zs()?.appContext.app.$nuxt),t||=fJ(e).tryUse(),t||null}function Wn(e){const t=G_e(e);if(!t)throw new Error("[nuxt] instance unavailable");return t}function no(e){return Wn().$config}function pM(e,t,n){Object.defineProperty(e,t,{get:()=>n})}function RD(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function Vk(e,t,n=".",r){if(!RD(t))return Vk(e,{},n,r);const s=Object.assign({},t);for(const o in e){if(o==="__proto__"||o==="constructor")continue;const c=e[o];c!=null&&(r&&r(s,o,c,n)||(Array.isArray(c)&&Array.isArray(s[o])?s[o]=[...c,...s[o]]:RD(c)&&RD(s[o])?s[o]=Vk(c,s[o],(n?`${n}.`:"")+o.toString(),r):s[o]=c))}return s}function Y_e(e){return(...t)=>t.reduce((n,r)=>Vk(n,r,"",e),{})}const q_e=Y_e();function X_e(e,t){try{return t in e}catch{return!1}}class cj extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(t,n={}){super(t,n),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const t={message:this.message,statusCode:jk(this.statusCode,500)};return this.statusMessage&&(t.statusMessage=pJ(this.statusMessage)),this.data!==void 0&&(t.data=this.data),t}}function Z_e(e){if(typeof e=="string")return new cj(e);if(K_e(e))return e;const t=new cj(e.message??e.statusMessage??"",{cause:e.cause||e});if(X_e(e,"stack"))try{Object.defineProperty(t,"stack",{get(){return e.stack}})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=jk(e.statusCode,t.statusCode):e.status&&(t.statusCode=jk(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const n=t.statusMessage;pJ(t.statusMessage)!==n&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return e.fatal!==void 0&&(t.fatal=e.fatal),e.unhandled!==void 0&&(t.unhandled=e.unhandled),t}function K_e(e){return e?.constructor?.__h3_error__===!0}const J_e=/[^\u0009\u0020-\u007E]/g;function pJ(e=""){return e.replace(J_e,"")}function jk(e,t=200){return!e||(typeof e=="string"&&(e=Number.parseInt(e,10)),e<100||e>999)?t:e}const mJ=Symbol("layout-meta"),Kd=Symbol("route");import.meta.url.replace(/\/app\/.*$/,"/");const aa=()=>Wn()?.$router,Tc=()=>Zm()?bs(Kd,Wn()._route):Wn()._route;const Q_e=()=>{try{if(Wn()._processingMiddleware)return!0}catch{return!1}return!1},L_=(e,t)=>{e||="/";const n=typeof e=="string"?e:"path"in e?Uk(e):aa().resolve(e).href;if(t?.open){const{target:f="_blank",windowFeatures:g={}}=t.open,x=[];for(const[w,A]of Object.entries(g))A!==void 0&&x.push(`${w.toLowerCase()}=${A}`);return open(n,f,x.join(", ")),Promise.resolve()}const r=Km(n,{acceptRelative:!0}),s=t?.external||r;if(s){if(!t?.external)throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:f}=new URL(n,window.location.href);if(f&&t_e(f))throw new Error(`Cannot navigate to a URL with '${f}' protocol.`)}const o=Q_e();if(!s&&o){if(t?.replace){if(typeof e=="string"){const{pathname:f,search:g,hash:x}=aJ(e);return{path:f,...g&&{query:eN(g)},...x&&{hash:x},replace:!0}}return{...e,replace:!0}}return e}const c=aa(),i=Wn();return s?(i._scope.stop(),t?.replace?location.replace(n):location.href=n,o?i.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):t?.replace?c.replace(e):c.push(e)};function Uk(e){return j2(e.path||"",e.query||{})+(e.hash||"")}const gJ="__nuxt_error",U2=()=>vl(Wn().payload,"error"),Yp=e=>{const t=N_(e);try{const n=Wn(),r=U2();n.hooks.callHook("app:error",t),r.value||=t}catch{throw t}return t},_J=async(e={})=>{const t=Wn(),n=U2();t.callHook("app:error:cleared",e),e.redirect&&await aa().replace(e.redirect),n.value=void 0},Hk=e=>!!e&&typeof e=="object"&&gJ in e,N_=e=>{const t=Z_e(e);return Object.defineProperty(t,gJ,{value:!0,configurable:!1,writable:!1}),t};function eye(e){const t=nye(e),n=new ArrayBuffer(t.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,t.charCodeAt(s));return n}const tye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function nye(e){e.length%4===0&&(e=e.replace(/==?$/,""));let t="",n=0,r=0;for(let s=0;s<e.length;s++)n<<=6,n|=tye.indexOf(e[s]),r+=6,r===24&&(t+=String.fromCharCode((n&16711680)>>16),t+=String.fromCharCode((n&65280)>>8),t+=String.fromCharCode(n&255),n=r=0);return r===12?(n>>=4,t+=String.fromCharCode(n)):r===18&&(n>>=2,t+=String.fromCharCode((n&65280)>>8),t+=String.fromCharCode(n&255)),t}const rye=-1,iye=-2,sye=-3,oye=-4,aye=-5,lye=-6;function cye(e,t){return uye(JSON.parse(e),t)}function uye(e,t){if(typeof e=="number")return s(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const n=e,r=Array(n.length);function s(o,c=!1){if(o===rye)return;if(o===sye)return NaN;if(o===oye)return 1/0;if(o===aye)return-1/0;if(o===lye)return-0;if(c||typeof o!="number")throw new Error("Invalid input");if(o in r)return r[o];const i=n[o];if(!i||typeof i!="object")r[o]=i;else if(Array.isArray(i))if(typeof i[0]=="string"){const f=i[0],g=t?.[f];if(g){let x=i[1];return typeof x!="number"&&(x=n.push(i[1])-1),r[o]=g(s(x))}switch(f){case"Date":r[o]=new Date(i[1]);break;case"Set":const x=new Set;r[o]=x;for(let C=1;C<i.length;C+=1)x.add(s(i[C]));break;case"Map":const w=new Map;r[o]=w;for(let C=1;C<i.length;C+=2)w.set(s(i[C]),s(i[C+1]));break;case"RegExp":r[o]=new RegExp(i[1],i[2]);break;case"Object":r[o]=Object(i[1]);break;case"BigInt":r[o]=BigInt(i[1]);break;case"null":const A=Object.create(null);r[o]=A;for(let C=1;C<i.length;C+=2)A[i[C]]=s(i[C+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const C=globalThis[f],F=new C(s(i[1]));r[o]=i[2]!==void 0?F.subarray(i[2],i[3]):F;break}case"ArrayBuffer":{const C=i[1],F=eye(C);r[o]=F;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const C=f.slice(9);r[o]=Temporal[C].from(i[1]);break}case"URL":{const C=new URL(i[1]);r[o]=C;break}case"URLSearchParams":{const C=new URLSearchParams(i[1]);r[o]=C;break}default:throw new Error(`Unknown type ${f}`)}}else{const f=new Array(i.length);r[o]=f;for(let g=0;g<i.length;g+=1){const x=i[g];x!==iye&&(f[g]=s(x))}}else{const f={};r[o]=f;for(const g in i){if(g==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const x=i[g];f[g]=s(x)}}return r[o]}return s(0)}const dye=new Set(["link","style","script","noscript"]),hye=new Set(["title","titleTemplate","script","style","noscript"]),uj=new Set(["base","meta","link","style","script","noscript"]),fye=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),pye=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),mye=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),gye=new Set(["templateParams","htmlAttrs","bodyAttrs"]),nN=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),H2={META:new Set(["twitter"]),OG:new Set(["og","book","article","profile","fb"]),MEDIA:new Set(["ogImage","ogVideo","ogAudio","twitterImage"]),HTTP_EQUIV:new Set(["contentType","defaultStyle","xUaCompatible"])},_ye={articleExpirationTime:"article:expiration_time",articleModifiedTime:"article:modified_time",articlePublishedTime:"article:published_time",bookReleaseDate:"book:release_date",fbAppId:"fb:app_id",ogAudioSecureUrl:"og:audio:secure_url",ogAudioUrl:"og:audio",ogImageSecureUrl:"og:image:secure_url",ogImageUrl:"og:image",ogSiteName:"og:site_name",ogVideoSecureUrl:"og:video:secure_url",ogVideoUrl:"og:video",profileFirstName:"profile:first_name",profileLastName:"profile:last_name",profileUsername:"profile:username",msapplicationConfig:"msapplication-Config",msapplicationTileColor:"msapplication-TileColor",msapplicationTileImage:"msapplication-TileImage"},yJ={appleItunesApp:{unpack:{entrySeparator:", ",resolve:({key:e,value:t})=>`${Wh(e)}=${t}`}},refresh:{metaKey:"http-equiv",unpack:{entrySeparator:";",resolve:({key:e,value:t})=>e==="seconds"?`${t}`:void 0}},robots:{unpack:{entrySeparator:", ",resolve:({key:e,value:t})=>typeof t=="boolean"?Wh(e):`${Wh(e)}:${t}`}},contentSecurityPolicy:{metaKey:"http-equiv",unpack:{entrySeparator:"; ",resolve:({key:e,value:t})=>`${Wh(e)} ${t}`}},charset:{}};function Wh(e){const t=e.replace(/([A-Z])/g,"-$1").toLowerCase(),n=t.indexOf("-");return n===-1?t:H2.META.has(t.slice(0,n))||H2.OG.has(t.slice(0,n))?e.replace(/([A-Z])/g,":$1").toLowerCase():t}function vJ(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>String(n)!=="false"&&t))}function Wk(e){return Array.isArray(e)?e.map(Wk):!e||typeof e!="object"?e:Object.fromEntries(Object.entries(e).map(([t,n])=>[Wh(t),Wk(n)]))}function bJ(e,t={}){const{entrySeparator:n="",keyValueSeparator:r="",wrapValue:s,resolve:o}=t;return Object.entries(e).map(([c,i])=>{if(o){const g=o({key:c,value:i});if(g!==void 0)return g}const f=typeof i=="object"?bJ(i,t):typeof i=="number"?i.toString():typeof i=="string"&&s?`${s}${i.replace(new RegExp(s,"g"),`\\${s}`)}${s}`:i;return`${c}${r}${f}`}).join(n)}function dj(e,t){const n=vJ(t),r=Wh(e),s=xJ(r);if(!nN.has(r))return[{[s]:r,...n}];const o=Object.fromEntries(Object.entries(n).map(([c,i])=>[`${e}${c==="url"?"":`${c[0].toUpperCase()}${c.slice(1)}`}`,i]));return rI(o||{}).sort((c,i)=>(c[s]?.length||0)-(i[s]?.length||0))}function xJ(e){if(yJ[e]?.metaKey==="http-equiv"||H2.HTTP_EQUIV.has(e))return"http-equiv";const t=Wh(e),n=t.indexOf(":");return n===-1?"name":H2.OG.has(t.slice(0,n))?"property":"name"}function yye(e){return _ye[e]||Wh(e)}function vye(e,t){return t==="refresh"?`${e.seconds};url=${e.url}`:bJ(Wk(e),{keyValueSeparator:"=",entrySeparator:", ",resolve:({value:n,key:r})=>n===null?"":typeof n=="boolean"?r:void 0,...yJ[t]?.unpack})}function rI(e){const t=[],n={};for(const[s,o]of Object.entries(e)){if(Array.isArray(o)){if(s==="themeColor"){o.forEach(c=>{typeof c=="object"&&c!==null&&t.push({name:"theme-color",...c})});continue}for(const c of o)if(typeof c=="object"&&c!==null){const i=[],f=[];for(const[g,x]of Object.entries(c)){const w=`${s}${g==="url"?"":`:${g}`}`,A=rI({[w]:x});(g==="url"?i:f).push(...A)}t.push(...i,...f)}else t.push(...typeof c=="string"?rI({[s]:c}):dj(s,c));continue}if(typeof o=="object"&&o)if(H2.MEDIA.has(s)){const c=s.startsWith("twitter")?"twitter":"og",i=s.replace(/^(og|twitter)/,"").toLowerCase(),f=c==="twitter"?"name":"property";o.url&&t.push({[f]:`${c}:${i}`,content:o.url}),o.secureUrl&&t.push({[f]:`${c}:${i}:secure_url`,content:o.secureUrl});for(const[g,x]of Object.entries(o))g!=="url"&&g!=="secureUrl"&&t.push({[f]:`${c}:${i}:${g}`,content:x})}else nN.has(Wh(s))?t.push(...dj(s,o)):n[s]=vJ(o);else n[s]=o}const r=Object.entries(n).map(([s,o])=>{if(s==="charset")return{charset:o===null?"_null":o};const c=xJ(s),i=yye(s),f=o===null?"_null":typeof o=="object"?vye(o,s):typeof o=="number"?o.toString():o;return c==="http-equiv"?{"http-equiv":i,content:f}:{[c]:i,content:f}});return[...t,...r].map(s=>"content"in s&&s.content==="_null"?{...s,content:null}:s)}const bye={key:"flatMeta",hooks:{"entries:normalize":e=>{const t=[];e.tags=e.tags.map(n=>n.tag!=="_flatMeta"?n:(t.push(rI(n.props).map(r=>({...n,tag:"meta",props:r}))),!1)).filter(Boolean).concat(...t)}}},xye=["name","property","http-equiv"],wye=new Set(["viewport","description","keywords","robots"]);function wJ(e){const t=e.split(":");return t.length?nN.has(t[1]):!1}function Gk(e){const{props:t,tag:n}=e;if(pye.has(n))return n;if(n==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";if(e.tag==="meta"){for(const r of xye)if(t[r]!==void 0){const s=t[r],o=s.includes(":"),c=wye.has(s),f=!(o||c)&&e.key?`:key:${e.key}`:"";return`${n}:${s}${f}`}}if(e.key)return`${n}:key:${e.key}`;if(t.id)return`${n}:id:${t.id}`;if(hye.has(n)){const r=e.textContent||e.innerHTML;if(r)return`${n}:content:${r}`}}function hj(e){const t=e._h||e._d;if(t)return t;const n=e.textContent||e.innerHTML;return n||`${e.tag}:${Object.entries(e.props).map(([r,s])=>`${r}:${String(s)}`).join(",")}`}function iI(e,t,n){typeof e==="function"&&(!n||n!=="titleTemplate"&&!(n[0]==="o"&&n[1]==="n"))&&(e=e());let s;if(t&&(s=t(n,e)),Array.isArray(s))return s.map(o=>iI(o,t));if(s?.constructor===Object){const o={};for(const c of Object.keys(s))o[c]=iI(s[c],t,c);return o}return s}function Sye(e,t){const n=e==="style"?new Map:new Set;function r(s){const o=s.trim();if(o)if(e==="style"){const[c,...i]=o.split(":").map(f=>f.trim());c&&i.length&&n.set(c,i.join(":"))}else o.split(" ").filter(Boolean).forEach(c=>n.add(c))}return typeof t=="string"?e==="style"?t.split(";").forEach(r):r(t):Array.isArray(t)?t.forEach(s=>r(s)):t&&typeof t=="object"&&Object.entries(t).forEach(([s,o])=>{o&&o!=="false"&&(e==="style"?n.set(s.trim(),o):r(s))}),n}function SJ(e,t){return e.props=e.props||{},t?e.tag==="templateParams"?(e.props=t,e):(Object.entries(t).forEach(([n,r])=>{if(r===null){e.props[n]=null;return}if(n==="class"||n==="style"){e.props[n]=Sye(n,r);return}if(mye.has(n)){if(["textContent","innerHTML"].includes(n)&&typeof r=="object"){let c=t.type;if(t.type||(c="application/json"),!c?.endsWith("json")&&c!=="speculationrules")return;t.type=c,e.props.type=c,e[n]=JSON.stringify(r)}else e[n]=r;return}const s=String(r),o=n.startsWith("data-");s==="true"||s===""?e.props[n]=o?s:!0:!r&&o&&s==="false"?e.props[n]="false":r!==void 0&&(e.props[n]=r)}),e):e}function Eye(e,t){const n=typeof t=="object"&&typeof t!="function"?t:{[e==="script"||e==="noscript"||e==="style"?"innerHTML":"textContent"]:t},r=SJ({tag:e,props:{}},n);return r.key&&dye.has(r.tag)&&(r.props["data-hid"]=r._h=r.key),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function Tye(e,t){if(!e)return[];typeof e=="function"&&(e=e());const n=(s,o)=>{for(let c=0;c<t.length;c++)o=t[c](s,o);return o};e=n(void 0,e);const r=[];return e=iI(e,n),Object.entries(e||{}).forEach(([s,o])=>{if(o!==void 0)for(const c of Array.isArray(o)?o:[o])r.push(Eye(s,c))}),r.flat()}const fj=(e,t)=>e._w===t._w?e._p-t._p:e._w-t._w,pj={base:-10,title:10},Mye={critical:-8,high:-1,low:2},mj={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},Aye=/@import/,Qx=e=>e===""||e===!0;function Cye(e,t){if(typeof t.tagPriority=="number")return t.tagPriority;let n=100;const r=Mye[t.tagPriority]||0,s=e.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:mj;if(t.tag in pj)n=pj[t.tag];else if(t.tag==="meta"){const o=t.props["http-equiv"]==="content-security-policy"?"content-security-policy":t.props.charset?"charset":t.props.name==="viewport"?"viewport":null;o&&(n=mj.meta[o])}else t.tag==="link"&&t.props.rel?n=s.link[t.props.rel]:t.tag==="script"?Qx(t.props.async)?n=s.script.async:t.props.src&&!Qx(t.props.defer)&&!Qx(t.props.async)&&t.props.type!=="module"&&!t.props.type?.endsWith("json")?n=s.script.sync:Qx(t.props.defer)&&t.props.src&&!Qx(t.props.async)&&(n=s.script.defer):t.tag==="style"&&(n=t.innerHTML&&Aye.test(t.innerHTML)?s.style.imported:s.style.sync);return(n||100)+r}function gj(e,t){const n=typeof t=="function"?t(e):t,r=n.key||String(e.plugins.size+1);e.plugins.get(r)||(e.plugins.set(r,n),e.hooks.addHooks(n.hooks||{}))}function Iye(e={}){const t=dJ();t.addHooks(e.hooks||{});const n=!e.document,r=new Map,s=new Map,o=new Set,c={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:e,hooks:t,ssr:n,entries:r,headEntries(){return[...r.values()]},use:i=>gj(c,i),push(i,f){const g={...f||{}};delete g.head;const x=g._index??c._entryCount++,w={_i:x,input:i,options:g},A={_poll(C=!1){c.dirty=!0,!C&&o.add(x),t.callHook("entries:updated",c)},dispose(){r.delete(x)&&c.invalidate()},patch(C){(!g.mode||g.mode==="server"&&n||g.mode==="client"&&!n)&&(w.input=C,r.set(x,w),A._poll())}};return A.patch(i),A},async resolveTags(){const i={tagMap:new Map,tags:[],entries:[...c.entries.values()]};for(await t.callHook("entries:resolve",i);o.size;){const A=o.values().next().value;o.delete(A);const C=r.get(A);if(C){const F={tags:Tye(C.input,e.propResolvers||[]).map(z=>Object.assign(z,C.options)),entry:C};await t.callHook("entries:normalize",F),C._tags=F.tags.map((z,j)=>(z._w=Cye(c,z),z._p=(C._i<<10)+j,z._d=Gk(z),z))}}let f=!1;i.entries.flatMap(A=>(A._tags||[]).map(C=>({...C,props:{...C.props}}))).sort(fj).reduce((A,C)=>{const F=String(C._d||C._p);if(!A.has(F))return A.set(F,C);const z=A.get(F);if((C?.tagDuplicateStrategy||(gye.has(C.tag)?"merge":null)||(C.key&&C.key===z.key?"merge":null))==="merge"){const V={...z.props};Object.entries(C.props).forEach(([Y,te])=>V[Y]=Y==="style"?new Map([...z.props.style||new Map,...te]):Y==="class"?new Set([...z.props.class||new Set,...te]):te),A.set(F,{...C,props:V})}else C._p>>10===z._p>>10&&C.tag==="meta"&&wJ(F)?(A.set(F,Object.assign([...Array.isArray(z)?z:[z],C],C)),f=!0):(C._w===z._w?C._p>z._p:C?._w<z?._w)&&A.set(F,C);return A},i.tagMap);const g=i.tagMap.get("title"),x=i.tagMap.get("titleTemplate");if(c._title=g?.textContent,x){const A=x?.textContent;if(c._titleTemplate=A,A){let C=typeof A=="function"?A(g?.textContent):A;typeof C=="string"&&!c.plugins.has("template-params")&&(C=C.replace("%s",g?.textContent||"")),g?C===null?i.tagMap.delete("title"):i.tagMap.set("title",{...g,textContent:C}):(x.tag="title",x.textContent=C)}}i.tags=Array.from(i.tagMap.values()),f&&(i.tags=i.tags.flat().sort(fj)),await t.callHook("tags:beforeResolve",i),await t.callHook("tags:resolve",i),await t.callHook("tags:afterResolve",i);const w=[];for(const A of i.tags){const{innerHTML:C,tag:F,props:z}=A;if(fye.has(F)&&!(Object.keys(z).length===0&&!A.innerHTML&&!A.textContent)&&!(F==="meta"&&!z.content&&!z["http-equiv"]&&!z.charset)){if(F==="script"&&C){if(z.type?.endsWith("json")){const j=typeof C=="string"?C:JSON.stringify(C);A.innerHTML=j.replace(/</g,"\\u003C")}else typeof C=="string"&&(A.innerHTML=C.replace(new RegExp(`</${F}`,"g"),`<\\/${F}`));A._d=Gk(A)}w.push(A)}}return w},invalidate(){for(const i of r.values())o.add(i._i);c.dirty=!0,t.callHook("entries:updated",c)}};return(e?.plugins||[]).forEach(i=>gj(c,i)),c.hooks.callHook("init",c),e.init?.forEach(i=>i&&c.push(i)),c}const Pye=(e,t)=>Fi(t)?Xn(t):t,rN="usehead";function Oye(e){return{install(n){n.config.globalProperties.$unhead=e,n.config.globalProperties.$head=e,n.provide(rN,e)}}.install}function EJ(){if(Zm()){const e=bs(rN);if(!e)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return e}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function TJ(e,t={}){const n=t.head||EJ();return n.ssr?n.push(e||{},t):Dye(n,e,t)}function Dye(e,t,n={}){const r=yr(!1);let s;return yy(()=>{const c=r.value?{}:iI(t,Pye);s?s.patch(c):s=e.push(c,n)}),zs()&&(Mf(()=>{s.dispose()}),F6(()=>{r.value=!0}),N6(()=>{r.value=!1})),s}function Rye(e={},t={}){(t.head||EJ()).use(bye);const{title:r,titleTemplate:s,...o}=e;return TJ({title:r,titleTemplate:s,_flatMeta:o},t)}function MJ(e){const t=e||Wn();return t.ssrContext?.head||t.runWithContext(()=>{if(Zm()){const n=bs(rN);if(!n)throw new Error("[nuxt] [unhead] Missing Unhead instance.");return n}})}function iN(e,t={}){const n=MJ(t.nuxt);return TJ(e,{head:n,...t})}function kye(e,t={}){const n=MJ(t.nuxt);return Rye(e,{head:n,...t})}const Lye="modulepreload",Nye=function(e,t){return new URL(e,t).href},_j={},Pn=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let g=function(x){return Promise.all(x.map(w=>Promise.resolve(w).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};const c=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),f=i?.nonce||i?.getAttribute("nonce");s=g(n.map(x=>{if(x=Nye(x,r),x in _j)return;_j[x]=!0;const w=x.endsWith(".css"),A=w?'[rel="stylesheet"]':"";if(r)for(let F=c.length-1;F>=0;F--){const z=c[F];if(z.href===x&&(!w||z.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${A}`))return;const C=document.createElement("link");if(C.rel=w?"stylesheet":Lye,w||(C.as="script"),C.crossOrigin="",C.href=x,f&&C.setAttribute("nonce",f),document.head.appendChild(C),w)return new Promise((F,z)=>{C.addEventListener("load",F),C.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${x}`)))})}))}function o(c){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=c,window.dispatchEvent(i),!i.defaultPrevented)throw c}return s.then(c=>{for(const i of c||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})};async function yj(e,t={}){if(!await CJ(e))return null;const r=await zye(e,t);return await AJ(r)||null}const Fye="_payload.json";async function zye(e,t={}){const n=new URL(e,"http://localhost");if(n.host!=="localhost"||Km(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+e);const r=no(),s=t.hash||(t.fresh?Date.now():r.app.buildId),o=r.app.cdnURL,c=o&&await CJ(e)?o:r.app.baseURL;return j3(c,n.pathname,Fye+(s?`?${s}`:""))}async function AJ(e){const t=fetch(e,{cache:"force-cache"}).then(n=>n.text().then(IJ));try{return await t}catch(n){console.warn("[nuxt] Cannot load payload ",e,n)}return null}async function CJ(e=Tc().path){return!!Wn().payload.prerenderedAt}let n_=null;async function Bye(){if(n_)return n_;const e=document.getElementById("__NUXT_DATA__");if(!e)return{};const t=await IJ(e.textContent||""),n=e.dataset.src?await AJ(e.dataset.src):void 0;return n_={...t,...n,...window.__NUXT__},n_.config?.public&&(n_.config.public=Bo(n_.config.public)),n_}async function IJ(e){return await cye(e,Wn()._payloadRevivers)}function $ye(e,t){Wn()._payloadRevivers[e]=t}const Vye=[["NuxtError",e=>N_(e)],["EmptyShallowRef",e=>mo(e==="_"?void 0:e==="0n"?BigInt(0):$2(e))],["EmptyRef",e=>yr(e==="_"?void 0:e==="0n"?BigInt(0):$2(e))],["ShallowRef",e=>mo(e)],["ShallowReactive",e=>Yu(e)],["Ref",e=>yr(e)],["Reactive",e=>Bo(e)]],jye=xs({name:"nuxt:revive-payload:client",order:-30,async setup(e){let t,n;for(const[r,s]of Vye)$ye(r,s);Object.assign(e.payload,([t,n]=Zh(()=>e.runWithContext(Bye)),t=await t,n(),t)),delete window.__NUXT__}});async function sN(e,t={}){const n=t.document||e.resolvedOptions.document;if(!n||!e.dirty)return;const r={shouldRender:!0,tags:[]};if(await e.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return e._domUpdatePromise||(e._domUpdatePromise=new Promise(async s=>{const o=new Map,c=new Promise(C=>{e.resolveTags().then(F=>{C(F.map(z=>{const j=o.get(z._d)||0,V={tag:z,id:(j?`${z._d}:${j}`:z._d)||hj(z),shouldRender:!0};return z._d&&wJ(z._d)&&o.set(z._d,j+1),V}))})});let i=e._dom;if(!i){i={title:n.title,elMap:new Map().set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const C of["body","head"]){const F=n[C]?.children;for(const z of F){const j=z.tagName.toLowerCase();if(!uj.has(j))continue;const V=SJ({tag:j,props:{}},{innerHTML:z.innerHTML,...z.getAttributeNames().reduce((Y,te)=>(Y[te]=z.getAttribute(te),Y),{})||{}});if(V.key=z.getAttribute("data-hid")||void 0,V._d=Gk(V)||hj(V),i.elMap.has(V._d)){let Y=1,te=V._d;for(;i.elMap.has(te);)te=`${V._d}:${Y++}`;i.elMap.set(te,z)}else i.elMap.set(V._d,z)}}}i.pendingSideEffects={...i.sideEffects},i.sideEffects={};function f(C,F,z){const j=`${C}:${F}`;i.sideEffects[j]=z,delete i.pendingSideEffects[j]}function g({id:C,$el:F,tag:z}){const j=z.tag.endsWith("Attrs");i.elMap.set(C,F),j||(z.textContent&&z.textContent!==F.textContent&&(F.textContent=z.textContent),z.innerHTML&&z.innerHTML!==F.innerHTML&&(F.innerHTML=z.innerHTML),f(C,"el",()=>{F?.remove(),i.elMap.delete(C)}));for(const V in z.props){if(!Object.prototype.hasOwnProperty.call(z.props,V))continue;const Y=z.props[V];if(V.startsWith("on")&&typeof Y=="function"){const J=F?.dataset;if(J&&J[`${V}fired`]){const ee=V.slice(0,-5);Y.call(F,new Event(ee.substring(2)))}F.getAttribute(`data-${V}`)!==""&&((z.tag==="bodyAttrs"?n.defaultView:F).addEventListener(V.substring(2),Y.bind(F)),F.setAttribute(`data-${V}`,""));continue}const te=`attr:${V}`;if(V==="class"){if(!Y)continue;for(const J of Y)j&&f(C,`${te}:${J}`,()=>F.classList.remove(J)),!F.classList.contains(J)&&F.classList.add(J)}else if(V==="style"){if(!Y)continue;for(const[J,ee]of Y)f(C,`${te}:${J}`,()=>{F.style.removeProperty(J)}),F.style.setProperty(J,ee)}else Y!==!1&&Y!==null&&(F.getAttribute(V)!==Y&&F.setAttribute(V,Y===!0?"":String(Y)),j&&f(C,te,()=>F.removeAttribute(V)))}}const x=[],w={bodyClose:void 0,bodyOpen:void 0,head:void 0},A=await c;for(const C of A){const{tag:F,shouldRender:z,id:j}=C;if(z){if(F.tag==="title"){n.title=F.textContent,f("title","",()=>n.title=i.title);continue}C.$el=C.$el||i.elMap.get(j),C.$el?g(C):uj.has(F.tag)&&x.push(C)}}for(const C of x){const F=C.tag.tagPosition||"head";C.$el=n.createElement(C.tag.tag),g(C),w[F]=w[F]||n.createDocumentFragment(),w[F].appendChild(C.$el)}for(const C of A)await e.hooks.callHook("dom:renderTag",C,n,f);w.head&&n.head.appendChild(w.head),w.bodyOpen&&n.body.insertBefore(w.bodyOpen,n.body.firstChild),w.bodyClose&&n.body.appendChild(w.bodyClose);for(const C in i.pendingSideEffects)i.pendingSideEffects[C]();e._dom=i,await e.hooks.callHook("dom:rendered",{renders:A}),s()}).finally(()=>{e._domUpdatePromise=void 0,e.dirty=!1})),e._domUpdatePromise}function Uye(e={}){const t=e.domOptions?.render||sN;e.document=e.document||(typeof window<"u"?document:void 0);const n=e.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return Iye({...e,plugins:[...e.plugins||[],{key:"client",hooks:{"entries:updated":t}}],init:[n?JSON.parse(n):!1,...e.init||[]]})}function Hye(e,t){let n=0;return()=>{const r=++n;t(()=>{n===r&&e()})}}function Wye(e={}){const t=Uye({domOptions:{render:Hye(()=>sN(t),n=>setTimeout(n,0))},...e});return t.install=Oye(t),t}const Gye={disableDefaults:!0},Yye=xs({name:"nuxt:head",enforce:"pre",setup(e){const t=Wye(Gye);e.vueApp.use(t);{let n=!0;const r=async()=>{n=!1,await sN(t)};t.hooks.hook("dom:beforeRender",s=>{s.shouldRender=!n}),e.hooks.hook("page:start",()=>{n=!0}),e.hooks.hook("page:finish",()=>{e.isHydrating||r()}),e.hooks.hook("app:error",r),e.hooks.hook("app:suspense:resolve",r)}}});function qye(){return PJ().__VUE_DEVTOOLS_GLOBAL_HOOK__}function PJ(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const Xye=typeof Proxy=="function",Zye="devtools-plugin:setup",Kye="plugin:settings:set";let Uv,Yk;function Jye(){var e;return Uv!==void 0||(typeof window<"u"&&window.performance?(Uv=!0,Yk=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(Uv=!0,Yk=globalThis.perf_hooks.performance):Uv=!1),Uv}function Qye(){return Jye()?Yk.now():Date.now()}class eve{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const r={};if(t.settings)for(const c in t.settings){const i=t.settings[c];r[c]=i.defaultValue}const s=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},r);try{const c=localStorage.getItem(s),i=JSON.parse(c);Object.assign(o,i)}catch{}this.fallbacks={getSettings(){return o},setSettings(c){try{localStorage.setItem(s,JSON.stringify(c))}catch{}o=c},now(){return Qye()}},n&&n.on(Kye,(c,i)=>{c===this.plugin.id&&this.fallbacks.setSettings(i)}),this.proxiedOn=new Proxy({},{get:(c,i)=>this.target?this.target.on[i]:(...f)=>{this.onQueue.push({method:i,args:f})}}),this.proxiedTarget=new Proxy({},{get:(c,i)=>this.target?this.target[i]:i==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(i)?(...f)=>(this.targetQueue.push({method:i,args:f,resolve:()=>{}}),this.fallbacks[i](...f)):(...f)=>new Promise(g=>{this.targetQueue.push({method:i,args:f,resolve:g})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function oN(e,t){const n=e,r=PJ(),s=qye(),o=Xye&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))s.emit(Zye,e,t);else{const c=o?new eve(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:c}),c&&t(c.proxiedTarget)}}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Fh=typeof document<"u";function OJ(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function tve(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&OJ(e.default)}const Ki=Object.assign;function kD(e,t){const n={};for(const r in t){const s=t[r];n[r]=Mc(s)?s.map(e):e(s)}return n}const Kw=()=>{},Mc=Array.isArray;function vj(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function nve(e){const t=Array.from(arguments).slice(1);console.warn.apply(console,["[Vue Router warn]: "+e].concat(t))}const DJ=/#/g,rve=/&/g,ive=/\//g,sve=/=/g,ove=/\?/g,RJ=/\+/g,ave=/%5B/g,lve=/%5D/g,kJ=/%5E/g,cve=/%60/g,LJ=/%7B/g,uve=/%7C/g,NJ=/%7D/g,dve=/%20/g;function aN(e){return e==null?"":encodeURI(""+e).replace(uve,"|").replace(ave,"[").replace(lve,"]")}function hve(e){return aN(e).replace(LJ,"{").replace(NJ,"}").replace(kJ,"^")}function qk(e){return aN(e).replace(RJ,"%2B").replace(dve,"+").replace(DJ,"%23").replace(rve,"%26").replace(cve,"`").replace(LJ,"{").replace(NJ,"}").replace(kJ,"^")}function fve(e){return qk(e).replace(sve,"%3D")}function pve(e){return aN(e).replace(DJ,"%23").replace(ove,"%3F")}function mve(e){return pve(e).replace(ive,"%2F")}function H0(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const gve=/\/$/,_ve=e=>e.replace(gve,"");function LD(e,t,n="/"){let r,s={},o="",c="";const i=t.indexOf("#");let f=t.indexOf("?");return f=i>=0&&f>i?-1:f,f>=0&&(r=t.slice(0,f),o=t.slice(f,i>0?i:t.length),s=e(o.slice(1))),i>=0&&(r=r||t.slice(0,i),c=t.slice(i,t.length)),r=xve(r??t,n),{fullPath:r+o+c,path:r,query:s,hash:H0(c)}}function yve(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function bj(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function vve(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Rm(t.matched[r],n.matched[s])&&FJ(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Rm(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function FJ(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!bve(e[n],t[n]))return!1;return!0}function bve(e,t){return Mc(e)?xj(e,t):Mc(t)?xj(t,e):e===t}function xj(e,t){return Mc(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function xve(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let o=n.length-1,c,i;for(c=0;c<r.length;c++)if(i=r[c],i!==".")if(i==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(c).join("/")}const Uc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Xk=(function(e){return e.pop="pop",e.push="push",e})({}),ND=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function wve(e){if(!e)if(Fh){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),_ve(e)}const Sve=/^[^#]+#/;function Eve(e,t){return e.replace(Sve,"#")+t}function Tve(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const U3=()=>({left:window.scrollX,top:window.scrollY});function Mve(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=Tve(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function wj(e,t){return(history.state?history.state.position-t:-1)+e}const Zk=new Map;function Ave(e,t){Zk.set(e,t)}function Cve(e){const t=Zk.get(e);return Zk.delete(e),t}function zJ(e){return typeof e=="string"||e&&typeof e=="object"}function BJ(e){return typeof e=="string"||typeof e=="symbol"}let uo=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const $J=Symbol("");uo.MATCHER_NOT_FOUND+"",uo.NAVIGATION_GUARD_REDIRECT+"",uo.NAVIGATION_ABORTED+"",uo.NAVIGATION_CANCELLED+"",uo.NAVIGATION_DUPLICATED+"";function W0(e,t){return Ki(new Error,{type:e,[$J]:!0},t)}function Eh(e,t){return e instanceof Error&&$J in e&&(t==null||!!(e.type&t))}const Ive=["params","query","hash"];function Pve(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of Ive)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function Ove(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(RJ," "),o=s.indexOf("="),c=H0(o<0?s:s.slice(0,o)),i=o<0?null:H0(s.slice(o+1));if(c in t){let f=t[c];Mc(f)||(f=t[c]=[f]),f.push(i)}else t[c]=i}return t}function Sj(e){let t="";for(let n in e){const r=e[n];if(n=fve(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Mc(r)?r.map(s=>s&&qk(s)):[r&&qk(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function Dve(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Mc(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const Rve=Symbol(""),Ej=Symbol(""),H3=Symbol(""),lN=Symbol(""),Kk=Symbol("");function ew(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function qp(e,t,n,r,s,o=c=>c()){const c=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((i,f)=>{const g=A=>{A===!1?f(W0(uo.NAVIGATION_ABORTED,{from:n,to:t})):A instanceof Error?f(A):zJ(A)?f(W0(uo.NAVIGATION_GUARD_REDIRECT,{from:t,to:A})):(c&&r.enterCallbacks[s]===c&&typeof A=="function"&&c.push(A),i())},x=o(()=>e.call(r&&r.instances[s],t,n,g));let w=Promise.resolve(x);e.length<3&&(w=w.then(g)),w.catch(A=>f(A))})}function FD(e,t,n,r,s=o=>o()){const o=[];for(const c of e)for(const i in c.components){let f=c.components[i];if(!(t!=="beforeRouteEnter"&&!c.instances[i]))if(OJ(f)){const g=(f.__vccOpts||f)[t];g&&o.push(qp(g,n,r,c,i,s))}else{let g=f();o.push(()=>g.then(x=>{if(!x)throw new Error(`Couldn't resolve component "${i}" at "${c.path}"`);const w=tve(x)?x.default:x;c.mods[i]=x,c.components[i]=w;const A=(w.__vccOpts||w)[t];return A&&qp(A,n,r,c,i,s)()}))}}return o}function kve(e,t){const n=[],r=[],s=[],o=Math.max(t.matched.length,e.matched.length);for(let c=0;c<o;c++){const i=t.matched[c];i&&(e.matched.find(g=>Rm(g,i))?r.push(i):n.push(i));const f=e.matched[c];f&&(t.matched.find(g=>Rm(g,f))||s.push(f))}return[n,r,s]}function tw(e,t){const n=Ki({},e,{matched:e.matched.map(r=>Wve(r,["instances","children","aliasOf"]))});return{_custom:{type:null,readOnly:!0,display:e.fullPath,tooltip:t,value:n}}}function mM(e){return{_custom:{display:e}}}let Lve=0;function Nve(e,t,n){if(t.__hasDevtools)return;t.__hasDevtools=!0;const r=Lve++;oN({id:"org.vuejs.router"+(r?"."+r:""),label:"Vue Router",packageName:"vue-router",homepage:"https://router.vuejs.org",logo:"https://router.vuejs.org/logo.png",componentStateTypes:["Routing"],app:e},s=>{typeof s.now!="function"&&nve("[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),s.on.inspectComponent((x,w)=>{x.instanceData&&x.instanceData.state.push({type:"Routing",key:"$route",editable:!1,value:tw(t.currentRoute.value,"Current Route")})}),s.on.visitComponentTree(({treeNode:x,componentInstance:w})=>{if(w.__vrv_devtools){const A=w.__vrv_devtools;x.tags.push({label:(A.name?`${A.name.toString()}: `:"")+A.path,textColor:0,tooltip:"This component is rendered by &lt;router-view&gt;",backgroundColor:VJ})}Mc(w.__vrl_devtools)&&(w.__devtoolsApi=s,w.__vrl_devtools.forEach(A=>{let C=A.route.path,F=HJ,z="",j=0;A.error?(C=A.error,F=Vve,j=jve):A.isExactActive?(F=UJ,z="This is exactly active"):A.isActive&&(F=jJ,z="This link is active"),x.tags.push({label:C,textColor:j,tooltip:z,backgroundColor:F})}))}),Hr(t.currentRoute,()=>{f(),s.notifyComponentUpdate(),s.sendInspectorTree(i),s.sendInspectorState(i)});const o="router:navigations:"+r;s.addTimelineLayer({id:o,label:`Router${r?" "+r:""} Navigations`,color:4237508}),t.onError((x,w)=>{s.addTimelineEvent({layerId:o,event:{title:"Error during Navigation",subtitle:w.fullPath,logType:"error",time:s.now(),data:{error:x},groupId:w.meta.__navigationId}})});let c=0;t.beforeEach((x,w)=>{const A={guard:mM("beforeEach"),from:tw(w,"Current Location during this navigation"),to:tw(x,"Target location")};Object.defineProperty(x.meta,"__navigationId",{value:c++}),s.addTimelineEvent({layerId:o,event:{time:s.now(),title:"Start of navigation",subtitle:x.fullPath,data:A,groupId:x.meta.__navigationId}})}),t.afterEach((x,w,A)=>{const C={guard:mM("afterEach")};A?(C.failure={_custom:{type:Error,readOnly:!0,display:A?A.message:"",tooltip:"Navigation Failure",value:A}},C.status=mM("")):C.status=mM(""),C.from=tw(w,"Current Location during this navigation"),C.to=tw(x,"Target location"),s.addTimelineEvent({layerId:o,event:{title:"End of navigation",subtitle:x.fullPath,time:s.now(),data:C,logType:A?"warning":"default",groupId:x.meta.__navigationId}})});const i="router-inspector:"+r;s.addInspector({id:i,label:"Routes"+(r?" "+r:""),icon:"book",treeFilterPlaceholder:"Search routes"});function f(){if(!g)return;const x=g;let w=n.getRoutes().filter(A=>!A.parent||!A.parent.record.components);w.forEach(YJ),x.filter&&(w=w.filter(A=>Jk(A,x.filter.toLowerCase()))),w.forEach(A=>GJ(A,t.currentRoute.value)),x.rootNodes=w.map(WJ)}let g;s.on.getInspectorTree(x=>{g=x,x.app===e&&x.inspectorId===i&&f()}),s.on.getInspectorState(x=>{if(x.app===e&&x.inspectorId===i){const w=n.getRoutes().find(A=>A.record.__vd_id===x.nodeId);w&&(x.state={options:zve(w)})}}),s.sendInspectorTree(i),s.sendInspectorState(i)})}function Fve(e){return e.optional?e.repeatable?"*":"?":e.repeatable?"+":""}function zve(e){const{record:t}=e,n=[{editable:!1,key:"path",value:t.path}];return t.name!=null&&n.push({editable:!1,key:"name",value:t.name}),n.push({editable:!1,key:"regexp",value:e.re}),e.keys.length&&n.push({editable:!1,key:"keys",value:{_custom:{type:null,readOnly:!0,display:e.keys.map(r=>`${r.name}${Fve(r)}`).join(" "),tooltip:"Param keys",value:e.keys}}}),t.redirect!=null&&n.push({editable:!1,key:"redirect",value:t.redirect}),e.alias.length&&n.push({editable:!1,key:"aliases",value:e.alias.map(r=>r.record.path)}),Object.keys(e.record.meta).length&&n.push({editable:!1,key:"meta",value:e.record.meta}),n.push({key:"score",editable:!1,value:{_custom:{type:null,readOnly:!0,display:e.score.map(r=>r.join(", ")).join(" | "),tooltip:"Score used to sort routes",value:e.score}}}),n}const VJ=15485081,jJ=2450411,UJ=8702998,Bve=2282478,HJ=16486972,$ve=6710886,Vve=16704226,jve=12131356;function WJ(e){const t=[],{record:n}=e;n.name!=null&&t.push({label:String(n.name),textColor:0,backgroundColor:Bve}),n.aliasOf&&t.push({label:"alias",textColor:0,backgroundColor:HJ}),e.__vd_match&&t.push({label:"matches",textColor:0,backgroundColor:VJ}),e.__vd_exactActive&&t.push({label:"exact",textColor:0,backgroundColor:UJ}),e.__vd_active&&t.push({label:"active",textColor:0,backgroundColor:jJ}),n.redirect&&t.push({label:typeof n.redirect=="string"?`redirect: ${n.redirect}`:"redirects",textColor:16777215,backgroundColor:$ve});let r=n.__vd_id;return r==null&&(r=String(Uve++),n.__vd_id=r),{id:r,label:n.path,tags:t,children:e.children.map(WJ)}}let Uve=0;const Hve=/^\/(.*)\/([a-z]*)$/;function GJ(e,t){const n=t.matched.length&&Rm(t.matched[t.matched.length-1],e.record);e.__vd_exactActive=e.__vd_active=n,n||(e.__vd_active=t.matched.some(r=>Rm(r,e.record))),e.children.forEach(r=>GJ(r,t))}function YJ(e){e.__vd_match=!1,e.children.forEach(YJ)}function Jk(e,t){const n=String(e.re).match(Hve);if(e.__vd_match=!1,!n||n.length<3)return!1;if(new RegExp(n[1].replace(/\$$/,""),n[2]).test(t))return e.children.forEach(o=>Jk(o,t)),e.record.path!=="/"||t==="/"?(e.__vd_match=e.re.test(t),!0):!1;const r=e.record.path.toLowerCase(),s=H0(r);return!t.startsWith("/")&&(s.includes(t)||r.includes(t))||s.startsWith(t)||r.startsWith(t)||e.record.name&&String(e.record.name).includes(t)?!0:e.children.some(o=>Jk(o,t))}function Wve(e,t){const n={};for(const r in e)t.includes(r)||(n[r]=e[r]);return n}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Gve=()=>location.protocol+"//"+location.host;function qJ(e,t){const{pathname:n,search:r,hash:s}=t,o=e.indexOf("#");if(o>-1){let c=s.includes(e.slice(o))?e.slice(o).length:1,i=s.slice(c);return i[0]!=="/"&&(i="/"+i),bj(i,"")}return bj(n,e)+r+s}function Yve(e,t,n,r){let s=[],o=[],c=null;const i=({state:A})=>{const C=qJ(e,location),F=n.value,z=t.value;let j=0;if(A){if(n.value=C,t.value=A,c&&c===F){c=null;return}j=z?A.position-z.position:0}else r(C);s.forEach(V=>{V(n.value,F,{delta:j,type:Xk.pop,direction:j?j>0?ND.forward:ND.back:ND.unknown})})};function f(){c=n.value}function g(A){s.push(A);const C=()=>{const F=s.indexOf(A);F>-1&&s.splice(F,1)};return o.push(C),C}function x(){if(document.visibilityState==="hidden"){const{history:A}=window;if(!A.state)return;A.replaceState(Ki({},A.state,{scroll:U3()}),"")}}function w(){for(const A of o)A();o=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",x),document.removeEventListener("visibilitychange",x)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",x),document.addEventListener("visibilitychange",x),{pauseListeners:f,listen:g,destroy:w}}function Tj(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?U3():null}}function qve(e){const{history:t,location:n}=window,r={value:qJ(e,n)},s={value:t.state};s.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(f,g,x){const w=e.indexOf("#"),A=w>-1?(n.host&&document.querySelector("base")?e:e.slice(w))+f:Gve()+e+f;try{t[x?"replaceState":"pushState"](g,"",A),s.value=g}catch(C){console.error(C),n[x?"replace":"assign"](A)}}function c(f,g){o(f,Ki({},t.state,Tj(s.value.back,f,s.value.forward,!0),g,{position:s.value.position}),!0),r.value=f}function i(f,g){const x=Ki({},s.value,t.state,{forward:f,scroll:U3()});o(x.current,x,!0),o(f,Ki({},Tj(r.value,f,null),{position:x.position+1},g),!1),r.value=f}return{location:r,state:s,push:i,replace:c}}function XJ(e){e=wve(e);const t=qve(e),n=Yve(e,t.state,t.location,t.replace);function r(o,c=!0){c||n.pauseListeners(),history.go(o)}const s=Ki({location:"",base:e,go:r,createHref:Eve.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function Xve(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),XJ(e)}let b_=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Yo=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Yo||{});const Zve={type:b_.Static,value:""},Kve=/[a-zA-Z0-9_]/;function Jve(e){if(!e)return[[]];if(e==="/")return[[Zve]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(C){throw new Error(`ERR (${n})/"${g}": ${C}`)}let n=Yo.Static,r=n;const s=[];let o;function c(){o&&s.push(o),o=[]}let i=0,f,g="",x="";function w(){g&&(n===Yo.Static?o.push({type:b_.Static,value:g}):n===Yo.Param||n===Yo.ParamRegExp||n===Yo.ParamRegExpEnd?(o.length>1&&(f==="*"||f==="+")&&t(`A repeatable param (${g}) must be alone in its segment. eg: '/:ids+.`),o.push({type:b_.Param,value:g,regexp:x,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):t("Invalid state to consume buffer"),g="")}function A(){g+=f}for(;i<e.length;){if(f=e[i++],f==="\\"&&n!==Yo.ParamRegExp){r=n,n=Yo.EscapeNext;continue}switch(n){case Yo.Static:f==="/"?(g&&w(),c()):f===":"?(w(),n=Yo.Param):A();break;case Yo.EscapeNext:A(),n=r;break;case Yo.Param:f==="("?n=Yo.ParamRegExp:Kve.test(f)?A():(w(),n=Yo.Static,f!=="*"&&f!=="?"&&f!=="+"&&i--);break;case Yo.ParamRegExp:f===")"?x[x.length-1]=="\\"?x=x.slice(0,-1)+f:n=Yo.ParamRegExpEnd:x+=f;break;case Yo.ParamRegExpEnd:w(),n=Yo.Static,f!=="*"&&f!=="?"&&f!=="+"&&i--,x="";break;default:t("Unknown state");break}}return n===Yo.ParamRegExp&&t(`Unfinished custom RegExp for param "${g}"`),w(),c(),s}const Mj="[^/]+?",Qve={sensitive:!1,strict:!1,start:!0,end:!0};var fl=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(fl||{});const e0e=/[.+*?^${}()[\]/\\]/g;function t0e(e,t){const n=Ki({},Qve,t),r=[];let s=n.start?"^":"";const o=[];for(const g of e){const x=g.length?[]:[fl.Root];n.strict&&!g.length&&(s+="/");for(let w=0;w<g.length;w++){const A=g[w];let C=fl.Segment+(n.sensitive?fl.BonusCaseSensitive:0);if(A.type===b_.Static)w||(s+="/"),s+=A.value.replace(e0e,"\\$&"),C+=fl.Static;else if(A.type===b_.Param){const{value:F,repeatable:z,optional:j,regexp:V}=A;o.push({name:F,repeatable:z,optional:j});const Y=V||Mj;if(Y!==Mj){C+=fl.BonusCustomRegExp;try{`${Y}`}catch(J){throw new Error(`Invalid custom RegExp for param "${F}" (${Y}): `+J.message)}}let te=z?`((?:${Y})(?:/(?:${Y}))*)`:`(${Y})`;w||(te=j&&g.length<2?`(?:/${te})`:"/"+te),j&&(te+="?"),s+=te,C+=fl.Dynamic,j&&(C+=fl.BonusOptional),z&&(C+=fl.BonusRepeatable),Y===".*"&&(C+=fl.BonusWildcard)}x.push(C)}r.push(x)}if(n.strict&&n.end){const g=r.length-1;r[g][r[g].length-1]+=fl.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const c=new RegExp(s,n.sensitive?"":"i");function i(g){const x=g.match(c),w={};if(!x)return null;for(let A=1;A<x.length;A++){const C=x[A]||"",F=o[A-1];w[F.name]=C&&F.repeatable?C.split("/"):C}return w}function f(g){let x="",w=!1;for(const A of e){(!w||!x.endsWith("/"))&&(x+="/"),w=!1;for(const C of A)if(C.type===b_.Static)x+=C.value;else if(C.type===b_.Param){const{value:F,repeatable:z,optional:j}=C,V=F in g?g[F]:"";if(Mc(V)&&!z)throw new Error(`Provided param "${F}" is an array but it is not repeatable (* or + modifiers)`);const Y=Mc(V)?V.join("/"):V;if(!Y)if(j)A.length<2&&(x.endsWith("/")?x=x.slice(0,-1):w=!0);else throw new Error(`Missing required param "${F}"`);x+=Y}}return x||"/"}return{re:c,score:r,keys:o,parse:i,stringify:f}}function n0e(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===fl.Static+fl.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===fl.Static+fl.Segment?1:-1:0}function ZJ(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const o=n0e(r[n],s[n]);if(o)return o;n++}if(Math.abs(s.length-r.length)===1){if(Aj(r))return 1;if(Aj(s))return-1}return s.length-r.length}function Aj(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const r0e={strict:!1,end:!0,sensitive:!1};function i0e(e,t,n){const r=t0e(Jve(e.path),n),s=Ki(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function s0e(e,t){const n=[],r=new Map;t=vj(r0e,t);function s(w){return r.get(w)}function o(w,A,C){const F=!C,z=Ij(w);z.aliasOf=C&&C.record;const j=vj(t,w),V=[z];if("alias"in w){const J=typeof w.alias=="string"?[w.alias]:w.alias;for(const ee of J)V.push(Ij(Ki({},z,{components:C?C.record.components:z.components,path:ee,aliasOf:C?C.record:z})))}let Y,te;for(const J of V){const{path:ee}=J;if(A&&ee[0]!=="/"){const le=A.record.path,oe=le[le.length-1]==="/"?"":"/";J.path=A.record.path+(ee&&oe+ee)}if(Y=i0e(J,A,j),C?C.alias.push(Y):(te=te||Y,te!==Y&&te.alias.push(Y),F&&w.name&&!Pj(Y)&&c(w.name)),KJ(Y)&&f(Y),z.children){const le=z.children;for(let oe=0;oe<le.length;oe++)o(le[oe],Y,C&&C.children[oe])}C=C||Y}return te?()=>{c(te)}:Kw}function c(w){if(BJ(w)){const A=r.get(w);A&&(r.delete(w),n.splice(n.indexOf(A),1),A.children.forEach(c),A.alias.forEach(c))}else{const A=n.indexOf(w);A>-1&&(n.splice(A,1),w.record.name&&r.delete(w.record.name),w.children.forEach(c),w.alias.forEach(c))}}function i(){return n}function f(w){const A=l0e(w,n);n.splice(A,0,w),w.record.name&&!Pj(w)&&r.set(w.record.name,w)}function g(w,A){let C,F={},z,j;if("name"in w&&w.name){if(C=r.get(w.name),!C)throw W0(uo.MATCHER_NOT_FOUND,{location:w});j=C.record.name,F=Ki(Cj(A.params,C.keys.filter(te=>!te.optional).concat(C.parent?C.parent.keys.filter(te=>te.optional):[]).map(te=>te.name)),w.params&&Cj(w.params,C.keys.map(te=>te.name))),z=C.stringify(F)}else if(w.path!=null)z=w.path,C=n.find(te=>te.re.test(z)),C&&(F=C.parse(z),j=C.record.name);else{if(C=A.name?r.get(A.name):n.find(te=>te.re.test(A.path)),!C)throw W0(uo.MATCHER_NOT_FOUND,{location:w,currentLocation:A});j=C.record.name,F=Ki({},A.params,w.params),z=C.stringify(F)}const V=[];let Y=C;for(;Y;)V.unshift(Y.record),Y=Y.parent;return{name:j,path:z,params:F,matched:V,meta:a0e(V)}}e.forEach(w=>o(w));function x(){n.length=0,r.clear()}return{addRoute:o,resolve:g,removeRoute:c,clearRoutes:x,getRoutes:i,getRecordMatcher:s}}function Cj(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Ij(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:o0e(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function o0e(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Pj(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function a0e(e){return e.reduce((t,n)=>Ki(t,n.meta),{})}function l0e(e,t){let n=0,r=t.length;for(;n!==r;){const o=n+r>>1;ZJ(e,t[o])<0?r=o:n=o+1}const s=c0e(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function c0e(e){let t=e;for(;t=t.parent;)if(KJ(t)&&ZJ(e,t)===0)return t}function KJ({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Oj(e){const t=bs(H3),n=bs(lN),r=Ct(()=>{const f=fn(e.to);return t.resolve(f)}),s=Ct(()=>{const{matched:f}=r.value,{length:g}=f,x=f[g-1],w=n.matched;if(!x||!w.length)return-1;const A=w.findIndex(Rm.bind(null,x));if(A>-1)return A;const C=Dj(f[g-2]);return g>1&&Dj(x)===C&&w[w.length-1].path!==C?w.findIndex(Rm.bind(null,f[g-2])):A}),o=Ct(()=>s.value>-1&&p0e(n.params,r.value.params)),c=Ct(()=>s.value>-1&&s.value===n.matched.length-1&&FJ(n.params,r.value.params));function i(f={}){if(f0e(f)){const g=t[fn(e.replace)?"replace":"push"](fn(e.to)).catch(Kw);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>g),g}return Promise.resolve()}if(Fh){const f=zs();if(f){const g={route:r.value,isActive:o.value,isExactActive:c.value,error:null};f.__vrl_devtools=f.__vrl_devtools||[],f.__vrl_devtools.push(g),yy(()=>{g.route=r.value,g.isActive=o.value,g.isExactActive=c.value,g.error=zJ(fn(e.to))?null:'Invalid "to" value'},{flush:"post"})}}return{route:r,href:Ct(()=>r.value.href),isActive:o,isExactActive:c,navigate:i}}function u0e(e){return e.length===1?e[0]:e}const d0e=ki({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Oj,setup(e,{slots:t}){const n=Bo(Oj(e)),{options:r}=bs(H3),s=Ct(()=>({[Rj(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Rj(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&u0e(t.default(n));return e.custom?o:Hs("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},o)}}}),h0e=d0e;function f0e(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function p0e(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Mc(s)||s.length!==r.length||r.some((o,c)=>o!==s[c]))return!1}return!0}function Dj(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Rj=(e,t,n)=>e??t??n,m0e=ki({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=bs(Kk),s=Ct(()=>e.route||r.value),o=bs(Ej,0),c=Ct(()=>{let g=fn(o);const{matched:x}=s.value;let w;for(;(w=x[g])&&!w.components;)g++;return g}),i=Ct(()=>s.value.matched[c.value]);Ko(Ej,Ct(()=>c.value+1)),Ko(Rve,i),Ko(Kk,s);const f=yr();return Hr(()=>[f.value,i.value,e.name],([g,x,w],[A,C,F])=>{x&&(x.instances[w]=g,C&&C!==x&&g&&g===A&&(x.leaveGuards.size||(x.leaveGuards=C.leaveGuards),x.updateGuards.size||(x.updateGuards=C.updateGuards))),g&&x&&(!C||!Rm(x,C)||!A)&&(x.enterCallbacks[w]||[]).forEach(z=>z(g))},{flush:"post"}),()=>{const g=s.value,x=e.name,w=i.value,A=w&&w.components[x];if(!A)return kj(n.default,{Component:A,route:g});const C=w.props[x],F=C?C===!0?g.params:typeof C=="function"?C(g):C:null,j=Hs(A,Ki({},F,t,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(w.instances[x]=null)},ref:f}));if(Fh&&j.ref){const V={depth:c.value,name:w.name,path:w.path,meta:w.meta};(Mc(j.ref)?j.ref.map(Y=>Y.i):[j.ref.i]).forEach(Y=>{Y.__vrv_devtools=V})}return kj(n.default,{Component:j,route:g})||j}}});function kj(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const JJ=m0e;function g0e(e){const t=s0e(e.routes,e),n=e.parseQuery||Ove,r=e.stringifyQuery||Sj,s=e.history,o=ew(),c=ew(),i=ew(),f=mo(Uc);let g=Uc;Fh&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const x=kD.bind(null,mt=>""+mt),w=kD.bind(null,mve),A=kD.bind(null,H0);function C(mt,Jt){let Kt,_e;return BJ(mt)?(Kt=t.getRecordMatcher(mt),_e=Jt):_e=mt,t.addRoute(_e,Kt)}function F(mt){const Jt=t.getRecordMatcher(mt);Jt&&t.removeRoute(Jt)}function z(){return t.getRoutes().map(mt=>mt.record)}function j(mt){return!!t.getRecordMatcher(mt)}function V(mt,Jt){if(Jt=Ki({},Jt||f.value),typeof mt=="string"){const ge=LD(n,mt,Jt.path),nt=t.resolve({path:ge.path},Jt),It=s.createHref(ge.fullPath);return Ki(ge,nt,{params:A(nt.params),hash:H0(ge.hash),redirectedFrom:void 0,href:It})}let Kt;if(mt.path!=null)Kt=Ki({},mt,{path:LD(n,mt.path,Jt.path).path});else{const ge=Ki({},mt.params);for(const nt in ge)ge[nt]==null&&delete ge[nt];Kt=Ki({},mt,{params:w(ge)}),Jt.params=w(Jt.params)}const _e=t.resolve(Kt,Jt),bn=mt.hash||"";_e.params=x(A(_e.params));const On=yve(r,Ki({},mt,{hash:hve(bn),path:_e.path})),je=s.createHref(On);return Ki({fullPath:On,hash:bn,query:r===Sj?Dve(mt.query):mt.query||{}},_e,{redirectedFrom:void 0,href:je})}function Y(mt){return typeof mt=="string"?LD(n,mt,f.value.path):Ki({},mt)}function te(mt,Jt){if(g!==mt)return W0(uo.NAVIGATION_CANCELLED,{from:Jt,to:mt})}function J(mt){return oe(mt)}function ee(mt){return J(Ki(Y(mt),{replace:!0}))}function le(mt,Jt){const Kt=mt.matched[mt.matched.length-1];if(Kt&&Kt.redirect){const{redirect:_e}=Kt;let bn=typeof _e=="function"?_e(mt,Jt):_e;return typeof bn=="string"&&(bn=bn.includes("?")||bn.includes("#")?bn=Y(bn):{path:bn},bn.params={}),Ki({query:mt.query,hash:mt.hash,params:bn.path!=null?{}:mt.params},bn)}}function oe(mt,Jt){const Kt=g=V(mt),_e=f.value,bn=mt.state,On=mt.force,je=mt.replace===!0,ge=le(Kt,_e);if(ge)return oe(Ki(Y(ge),{state:typeof ge=="object"?Ki({},bn,ge.state):bn,force:On,replace:je}),Jt||Kt);const nt=Kt;nt.redirectedFrom=Jt;let It;return!On&&vve(r,_e,Kt)&&(It=W0(uo.NAVIGATION_DUPLICATED,{to:nt,from:_e}),$t(_e,_e,!0,!1)),(It?Promise.resolve(It):ie(nt,_e)).catch(ht=>Eh(ht)?Eh(ht,uo.NAVIGATION_GUARD_REDIRECT)?ht:Ge(ht):He(ht,nt,_e)).then(ht=>{if(ht){if(Eh(ht,uo.NAVIGATION_GUARD_REDIRECT))return oe(Ki({replace:je},Y(ht.to),{state:typeof ht.to=="object"?Ki({},bn,ht.to.state):bn,force:On}),Jt||nt)}else ht=be(nt,_e,!0,je,bn);return pe(nt,_e,ht),ht})}function ve(mt,Jt){const Kt=te(mt,Jt);return Kt?Promise.reject(Kt):Promise.resolve()}function se(mt){const Jt=nn.values().next().value;return Jt&&typeof Jt.runWithContext=="function"?Jt.runWithContext(mt):mt()}function ie(mt,Jt){let Kt;const[_e,bn,On]=kve(mt,Jt);Kt=FD(_e.reverse(),"beforeRouteLeave",mt,Jt);for(const ge of _e)ge.leaveGuards.forEach(nt=>{Kt.push(qp(nt,mt,Jt))});const je=ve.bind(null,mt,Jt);return Kt.push(je),Xt(Kt).then(()=>{Kt=[];for(const ge of o.list())Kt.push(qp(ge,mt,Jt));return Kt.push(je),Xt(Kt)}).then(()=>{Kt=FD(bn,"beforeRouteUpdate",mt,Jt);for(const ge of bn)ge.updateGuards.forEach(nt=>{Kt.push(qp(nt,mt,Jt))});return Kt.push(je),Xt(Kt)}).then(()=>{Kt=[];for(const ge of On)if(ge.beforeEnter)if(Mc(ge.beforeEnter))for(const nt of ge.beforeEnter)Kt.push(qp(nt,mt,Jt));else Kt.push(qp(ge.beforeEnter,mt,Jt));return Kt.push(je),Xt(Kt)}).then(()=>(mt.matched.forEach(ge=>ge.enterCallbacks={}),Kt=FD(On,"beforeRouteEnter",mt,Jt,se),Kt.push(je),Xt(Kt))).then(()=>{Kt=[];for(const ge of c.list())Kt.push(qp(ge,mt,Jt));return Kt.push(je),Xt(Kt)}).catch(ge=>Eh(ge,uo.NAVIGATION_CANCELLED)?ge:Promise.reject(ge))}function pe(mt,Jt,Kt){i.list().forEach(_e=>se(()=>_e(mt,Jt,Kt)))}function be(mt,Jt,Kt,_e,bn){const On=te(mt,Jt);if(On)return On;const je=Jt===Uc,ge=Fh?history.state:{};Kt&&(_e||je?s.replace(mt.fullPath,Ki({scroll:je&&ge&&ge.scroll},bn)):s.push(mt.fullPath,bn)),f.value=mt,$t(mt,Jt,Kt,je),Ge()}let Se;function Ce(){Se||(Se=s.listen((mt,Jt,Kt)=>{if(!mn.listening)return;const _e=V(mt),bn=le(_e,mn.currentRoute.value);if(bn){oe(Ki(bn,{replace:!0,force:!0}),_e).catch(Kw);return}g=_e;const On=f.value;Fh&&Ave(wj(On.fullPath,Kt.delta),U3()),ie(_e,On).catch(je=>Eh(je,uo.NAVIGATION_ABORTED|uo.NAVIGATION_CANCELLED)?je:Eh(je,uo.NAVIGATION_GUARD_REDIRECT)?(oe(Ki(Y(je.to),{force:!0}),_e).then(ge=>{Eh(ge,uo.NAVIGATION_ABORTED|uo.NAVIGATION_DUPLICATED)&&!Kt.delta&&Kt.type===Xk.pop&&s.go(-1,!1)}).catch(Kw),Promise.reject()):(Kt.delta&&s.go(-Kt.delta,!1),He(je,_e,On))).then(je=>{je=je||be(_e,On,!1),je&&(Kt.delta&&!Eh(je,uo.NAVIGATION_CANCELLED)?s.go(-Kt.delta,!1):Kt.type===Xk.pop&&Eh(je,uo.NAVIGATION_ABORTED|uo.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),pe(_e,On,je)}).catch(Kw)}))}let Ee=ew(),xe=ew(),ke;function He(mt,Jt,Kt){Ge(mt);const _e=xe.list();return _e.length?_e.forEach(bn=>bn(mt,Jt,Kt)):console.error(mt),Promise.reject(mt)}function Ke(){return ke&&f.value!==Uc?Promise.resolve():new Promise((mt,Jt)=>{Ee.add([mt,Jt])})}function Ge(mt){return ke||(ke=!mt,Ce(),Ee.list().forEach(([Jt,Kt])=>mt?Kt(mt):Jt()),Ee.reset()),mt}function $t(mt,Jt,Kt,_e){const{scrollBehavior:bn}=e;if(!Fh||!bn)return Promise.resolve();const On=!Kt&&Cve(wj(mt.fullPath,0))||(_e||!Kt)&&history.state&&history.state.scroll||null;return es().then(()=>bn(mt,Jt,On)).then(je=>je&&Mve(je)).catch(je=>He(je,mt,Jt))}const Ft=mt=>s.go(mt);let Lt;const nn=new Set,mn={currentRoute:f,listening:!0,addRoute:C,removeRoute:F,clearRoutes:t.clearRoutes,hasRoute:j,getRoutes:z,resolve:V,options:e,push:J,replace:ee,go:Ft,back:()=>Ft(-1),forward:()=>Ft(1),beforeEach:o.add,beforeResolve:c.add,afterEach:i.add,onError:xe.add,isReady:Ke,install(mt){mt.component("RouterLink",h0e),mt.component("RouterView",JJ),mt.config.globalProperties.$router=mn,Object.defineProperty(mt.config.globalProperties,"$route",{enumerable:!0,get:()=>fn(f)}),Fh&&!Lt&&f.value===Uc&&(Lt=!0,J(s.location).catch(_e=>{}));const Jt={};for(const _e in Uc)Object.defineProperty(Jt,_e,{get:()=>f.value[_e],enumerable:!0});mt.provide(H3,mn),mt.provide(lN,Yu(Jt)),mt.provide(Kk,f);const Kt=mt.unmount;nn.add(mt),mt.unmount=function(){nn.delete(mt),nn.size<1&&(g=Uc,Se&&Se(),Se=null,f.value=Uc,Lt=!1,ke=!1),Kt()},Fh&&Nve(mt,mn,t)}};function Xt(mt){return mt.reduce((Jt,Kt)=>Jt.then(()=>se(Kt)),Promise.resolve())}return mn}function qct(){return bs(H3)}function QJ(e){return bs(lN)}const _0e=/(:\w+)\([^)]+\)/g,y0e=/(:\w+)[?+*]/g,v0e=/:\w+/g,b0e=(e,t)=>t.path.replace(_0e,"$1").replace(y0e,"$1").replace(v0e,n=>e.params[n.slice(1)]?.toString()||""),Qk=(e,t)=>{const n=e.route.matched.find(s=>s.components?.default===e.Component.type),r=t??n?.meta.key??(n&&b0e(e.route,n));return typeof r=="function"?r(e.route):r},x0e=(e,t)=>({default:()=>e?Hs(YZ,e===!0?{}:e,t):t});function cN(e){return Array.isArray(e)?e:[e]}const Lj={layout:"buy"},w0e={layout:"authorized"},S0e={layout:"authorized"},Nj={layout:"guest-or-apply-promo-code"},Fj={layout:!1},zj={layout:"authorized"},E0e={layout:"authorized"},T0e={layout:"guest"},M0e={layout:"guest-or-apply-promo-code"},Bj={layout:!1},A0e={layout:!1},$j={layout:!1},C0e={layout:"authorized"},I0e={layout:"authorized"},Vj={layout:!1},P0e={layout:"authorized"},O0e={layout:"authorized"},D0e={layout:"authorized"},jj={layout:!1},R0e={layout:"authorized"},Uj={layout:"authorized"},Hj={layout:!1},k0e={layout:"authorized"},L0e={layout:"authorized"},N0e={layout:"authorized"},Wj={layout:"guest"},F0e={layout:"authorized"},z0e={layout:"authorized"},B0e={layout:"authorized"},$0e={layout:"authorized"},V0e={layout:"authorized"},j0e={layout:"authorized"},U0e={layout:"authorized"},H0e={layout:!1},zD=[{name:"api",path:"/api",component:()=>Pn(()=>import("./W5nlQS_t.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)},{name:"app",path:"/app",component:()=>Pn(()=>import("./kH5oY3Pg.js"),__vite__mapDeps([4,1,2]),import.meta.url)},{name:"buy",path:"/buy",meta:Lj||{},component:()=>Pn(()=>import("./Cn8iFQeg.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url)},{name:"map",path:"/map",component:()=>Pn(()=>import("./CFjA04Zp.js"),__vite__mapDeps([18,19,20,21,22,13,14,23,24,25,26,27,28,29,30,31,32,33,34,35,36,1,2,37,38,39,40,41,42,43,44,45,46,47,48,49,50,7,8,9,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65]),import.meta.url)},{name:"team",path:"/team",component:()=>Pn(()=>import("./BBHfHeyP.js"),__vite__mapDeps([66,38,1,2,67]),import.meta.url)},{name:"about",path:"/about",component:()=>Pn(()=>import("./xfJ8GNoH.js"),__vite__mapDeps([68,69,70,71,6,72,1,2,73]),import.meta.url)},{name:"index",path:"/",component:()=>Pn(()=>import("./DJHrMXK7.js"),__vite__mapDeps([74,69,70,71,6,72,1,2,73,32]),import.meta.url)},{name:"stories",path:"/stories",meta:w0e||{},component:()=>Pn(()=>import("./BTvgnUpI.js"),__vite__mapDeps([75,1,2,13,14,30,31,22,23,76,60,61,56,28,57,50,43,44,77,7,8,9,11,12,25,26,16,78,79,80,27,29,38,81,35,36,20,39,40,82,83,84,85,86]),import.meta.url)},{name:"publicapi",path:"/publicapi",component:()=>Pn(()=>import("./PgpBoJ4V.js"),__vite__mapDeps([87,1,2]),import.meta.url)},{name:"news",path:"/news",component:()=>Pn(()=>import("./CyEelzH7.js"),__vite__mapDeps([88,89,90,91,56,28,57,32,92,77,1,2,93,94,47]),import.meta.url)},{name:"my-location",path:"/my-location",meta:S0e||{},component:()=>Pn(()=>import("./CV4HQrYK.js"),__vite__mapDeps([95,96,97,37,38,39,40,41,42,1,2,43,44,45,46,25,26,20,23,32,47,48,49,50,7,8,9,51,98,99,52,100,30,13,14,31,101,19,21,22,24,27,28,29,33,34,35,36,53,63,64,58,102,103,104,80,56,57,105,106,107,108,109,110,111,112]),import.meta.url)},{name:"user-logout",path:"/user/logout",component:()=>Pn(()=>import("./qWxRLgJZ.js"),__vite__mapDeps([113,114,1,2,10]),import.meta.url)},{name:"subscription",path:"/subscription",component:()=>Pn(()=>import("./C74N4ZYX.js"),__vite__mapDeps([115,71,70,6,72,116,13,14,15,16,117,1,2,118]),import.meta.url)},{name:"explore",path:"/explore",component:()=>Pn(()=>import("./BnzrS3u-.js"),__vite__mapDeps([119,101,19,20,21,22,13,14,23,24,25,26,27,28,29,30,31,32,33,34,35,36,1,2,37,38,39,40,41,42,43,44,45,46,47,48,49,50,7,8,9,51,52,53,63,64,58,102,103,104,120,121,77,122,110,80,123,93,124]),import.meta.url)},{name:"dailysnow",path:"/dailysnow",component:()=>Pn(()=>import("./CyTIdjpb.js"),__vite__mapDeps([125,126,127,1,2,123,128,56,28,57,12,42,43,44,38,45,46,60,61,32,129,90,91,96,97,130,131,132,24,133,47]),import.meta.url)},{name:"news-category",path:"/news/:category()",component:()=>Pn(()=>import("./B7VID52p.js"),__vite__mapDeps([134,89,90,91,56,28,57,32,92,77,1,2,93,94,47]),import.meta.url)},{name:"user-login",path:"/user/login",meta:Nj||{},component:()=>Pn(()=>import("./BRt9pKg3.js"),__vite__mapDeps([135,114,136,10,1,2,137,7,8,9,138,11,139,140,47]),import.meta.url)},{name:"user-login-verify",path:"/user/login/verify",meta:Fj||{},component:()=>Pn(()=>import("./BuF6tHS5.js"),__vite__mapDeps([141,10]),import.meta.url)},{name:"explore-powder-map",path:"/explore/powder/map",component:()=>Pn(()=>import("./CbcwQ3QS.js"),__vite__mapDeps([142,143,144,123,32,126,127,1,2,128,56,28,57,12,42,43,44,38,45,46,60,61,129,91,145,19,20,21,22,13,14,23,24,25,26,27,29,30,31,33,34,35,36,37,39,40,41,47,48,49,50,7,8,9,51,52,53,102,103,64,146,147,148,149,150,151,152,58,153,80,154,155,156,157,81,100,158,159,160]),import.meta.url)},{name:"explore-snowstakes",path:"/explore/snowstakes",component:()=>Pn(()=>import("./AvOVGOoK.js"),__vite__mapDeps([161,91,56,28,57,32,162,120,121,23,77,1,2,103,122,147,47]),import.meta.url)},{name:"user-favorites-map",path:"/user/favorites/map",meta:zj||{},component:()=>Pn(()=>import("./CIRMLhdk.js"),__vite__mapDeps([163,164,165,12,1,2,144,123,32,126,127,128,56,28,57,42,43,44,38,45,46,60,61,129,91,145,19,20,21,22,13,14,23,24,25,26,27,29,30,31,33,34,35,36,37,39,40,41,47,48,49,50,7,8,9,51,52,53,102,103,64,159,166]),import.meta.url)},{name:"user-favorites-cams",path:"/user/favorites/cams",meta:E0e||{},component:()=>Pn(()=>import("./95k0LdYf.js"),__vite__mapDeps([167,168,165,12,1,2,169,35,28,36,159,170,42,43,44,38,45,46,171,162,120,121,23,32,77,94,47]),import.meta.url)},{name:"user-forgotpassword",path:"/user/forgotpassword",meta:T0e||{},component:()=>Pn(()=>import("./fjpDXVZK.js"),__vite__mapDeps([172,114,136,10,1,2,137,7,8,9,139,140]),import.meta.url)},{name:"user-register",path:"/user/register",meta:M0e||{},component:()=>Pn(()=>import("./B-re1Z34.js"),__vite__mapDeps([173,114,136,10,1,2,137,7,8,9,139,140,47]),import.meta.url)},{name:"explore-powder",path:"/explore/powder",component:()=>Pn(()=>import("./TjCHp4H_.js"),__vite__mapDeps([174,143,144,123,32,126,127,1,2,128,56,28,57,12,42,43,44,38,45,46,60,61,129,91,145,19,20,21,22,13,14,23,24,25,26,27,29,30,31,33,34,35,36,37,39,40,41,47,48,49,50,7,8,9,51,52,53,102,103,64,146,147,148,149,150,151,152,58,153,80,154,155,156,157,81,100,158,159,160]),import.meta.url)},{name:"location-slug-cams",path:"/location/:slug()/cams",component:()=>Pn(()=>import("./DzVLJxLK.js"),__vite__mapDeps([175,20,170,42,1,2,43,44,38,45,46,171,162,120,121,23,32,77,28,94,176,37,39,40,41,25,26,47,48,49,50,7,8,9,51,35,36,177,178]),import.meta.url)},{name:"location-slug-info",path:"/location/:slug()/info",component:()=>Pn(()=>import("./LdxUH8x5.js"),__vite__mapDeps([179,180,181,176,37,38,39,40,41,42,1,2,43,44,45,46,25,26,20,23,32,47,48,49,50,7,8,9,51,35,28,36,177,178]),import.meta.url)},{name:"news-post-idOrSlug",path:"/news/post/:idOrSlug()",component:()=>Pn(()=>import("./BBMrEQmk.js"),__vite__mapDeps([182,82,83,38,28,84,183,81,47,123,32,103,92,77,1,2,93]),import.meta.url)},{name:"user-register-verify",path:"/user/register/verify",meta:Bj||{},component:()=>Pn(()=>import("./B7gMZwBj.js"),__vite__mapDeps([184,10]),import.meta.url)},{name:"location-slug",path:"/location/:slug()",meta:A0e||{},component:()=>Pn(()=>import("./CzFbVhZ2.js"),[],import.meta.url)},{name:"avalanche-slug",path:"/avalanche/:slug()",component:()=>Pn(()=>import("./CQr6g54Q.js"),__vite__mapDeps([185,186,19,20,21,22,13,14,23,24,25,26,27,28,29,30,31,32,33,34,35,36,1,2,37,38,39,40,41,42,43,44,45,46,47,48,49,50,7,8,9,51,52,53]),import.meta.url)},{name:"user-group-join-verify",path:"/user/group/join/verify",meta:$j||{},component:()=>Pn(()=>import("./B3fFFrtG.js"),__vite__mapDeps([187,10]),import.meta.url)},{name:"dailysnow-post-postId",path:"/dailysnow/post/:postId()",component:()=>Pn(()=>import("./DQfYfJQF.js"),__vite__mapDeps([188,83,38,28,84,47,20,23,183,81,123,32,103,92,77,1,2,45,93,189]),import.meta.url)},{name:"location-slug-weather",path:"/location/:slug()/weather",component:()=>Pn(()=>import("./BLsILNdR.js"),__vite__mapDeps([190,98,20,99,52,100,30,13,14,31,101,19,21,22,23,24,25,26,27,28,29,32,33,34,35,36,1,2,37,38,39,40,41,42,43,44,45,46,47,48,49,50,7,8,9,51,53,63,64,58,102,103,104,80,56,57,105,106,107,108,109,110,111,176,177,178]),import.meta.url)},{name:"user-favorites-trail-maps",path:"/user/favorites/trail-maps",meta:C0e||{},component:()=>Pn(()=>import("./C4meia57.js"),__vite__mapDeps([191,168,165,12,1,2,169,35,28,36,159,192,171,162,120,121,23,32,77,94,42,43,44,38,45,46,47]),import.meta.url)},{name:"user-settings-changeemail",path:"/user/settings/changeemail",meta:I0e||{},component:()=>Pn(()=>import("./B8KWuEhs.js"),__vite__mapDeps([193,114,194,35,28,36,195,136,10,1,2,137,7,8,9,139,140]),import.meta.url)},{name:"user-settings-group",path:"/user/settings/group",meta:Vj||{},component:()=>Pn(()=>import("./2GcuT8d6.js"),[],import.meta.url)},{name:"user-settings-group-leave",path:"/user/settings/group/leave",component:()=>Pn(()=>import("./C9VcgJ5l.js"),__vite__mapDeps([196,114,194,35,28,36,195,1,2]),import.meta.url)},{name:"user-settings-preferences",path:"/user/settings/preferences",meta:P0e||{},component:()=>Pn(()=>import("./C2aSaKus.js"),__vite__mapDeps([197,114,194,35,28,36,85,12,1,2,78,79,198]),import.meta.url)},{name:"user-settings-start-trial",path:"/user/settings/start-trial",component:()=>Pn(()=>import("./wUKpTAgO.js"),__vite__mapDeps([199,47]),import.meta.url)},{name:"location-slug-trail-maps",path:"/location/:slug()/trail-maps",component:()=>Pn(()=>import("./BRB-z_ea.js"),__vite__mapDeps([200,192,171,162,120,121,23,32,77,28,94,42,1,2,43,44,38,45,46,176,37,39,40,41,25,26,20,47,48,49,50,7,8,9,51,35,36,177,178]),import.meta.url)},{name:"user-favorites-daily-snows",path:"/user/favorites/daily-snows",meta:O0e||{},component:()=>Pn(()=>import("./BjfVPZhD.js"),__vite__mapDeps([201,168,165,12,1,2,169,35,28,36,159,130,38,131,42,43,44,45,46,132,47]),import.meta.url)},{name:"user-settings-delete",path:"/user/settings/delete",meta:D0e||{},component:()=>Pn(()=>import("./Bto9mTSD.js"),__vite__mapDeps([202,114,194,35,28,36,195,136,10,1,2,139,140]),import.meta.url)},{name:"user-settings-email-verify",path:"/user/settings/email/verify",meta:jj||{},component:()=>Pn(()=>import("./qeq8mXtp.js"),__vite__mapDeps([203,10,47]),import.meta.url)},{name:"location-slug-ai-overview",path:"/location/:slug()/ai-overview",meta:R0e||{},component:()=>Pn(()=>import("./CC7RHfiL.js"),__vite__mapDeps([204,37,38,39,40,41,42,1,2,43,44,45,46,25,26,20,23,32,47,48,49,50,7,8,9,51,205,106,56,28,57,107,206]),import.meta.url)},{name:"location-slug-daily-snows",path:"/location/:slug()/daily-snows",component:()=>Pn(()=>import("./D4MK6lpa.js"),__vite__mapDeps([207,90,91,56,28,57,32,130,38,131,42,1,2,43,44,45,46,132,176,37,39,40,41,25,26,20,23,47,48,49,50,7,8,9,51,35,36,177,208,133]),import.meta.url)},{name:"location-slug-snow-report",path:"/location/:slug()/snow-report",component:()=>Pn(()=>import("./KDd6E0qK.js"),__vite__mapDeps([209,181,210,55,38,35,28,36,56,57,30,13,14,31,20,58,23,32,59,121,150,151,211,1,2,212,213,81,157,153,100,152,33,34,180,54,60,61,62,176,37,39,40,41,42,43,44,45,46,25,26,47,48,49,50,7,8,9,51,177,208,214]),import.meta.url)},{name:"user-settings-account",path:"/user/settings/account",meta:Uj||{},component:()=>Pn(()=>import("./B_1sNUrm.js"),__vite__mapDeps([215,114,194,35,28,36,195,116,13,14,15,6,71,16,117,7,8,9,76,50,1,2,23,32,216]),import.meta.url)},{name:"user-settings-delete-verify",path:"/user/settings/delete/verify",meta:Hj||{},component:()=>Pn(()=>import("./oJ5EIsPy.js"),__vite__mapDeps([217,10,47]),import.meta.url)},{name:"location-slug-snow-summary",path:"/location/:slug()/snow-summary",component:()=>Pn(()=>import("./CAk0ocDs.js"),__vite__mapDeps([218,127,1,2,123,128,99,52,100,30,13,14,31,101,19,20,21,22,23,24,25,26,27,28,29,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,7,8,9,51,53,63,64,58,102,103,104,80,56,57,105,149,150,151,152,153,154,155,131,107,211,176,177,178,219]),import.meta.url)},{name:"user-favorites-season-passes",path:"/user/favorites/season-passes",meta:k0e||{},component:()=>Pn(()=>import("./B9FxaLSb.js"),__vite__mapDeps([220,168,165,12,1,2,169,35,28,36,159,38,81,42,43,44,45,46,47]),import.meta.url)},{name:"user-settings-changepassword",path:"/user/settings/changepassword",meta:L0e||{},component:()=>Pn(()=>import("./fo2aKfmQ.js"),__vite__mapDeps([221,114,194,35,28,36,195,11,8,9,1,2]),import.meta.url)},{name:"user-settings-favorites",path:"/user/settings/favorites",meta:N0e||{},component:()=>Pn(()=>import("./2vedTRh1.js"),__vite__mapDeps([222,165,12,1,2,194,35,28,36,27,29,42,43,44,38,45,46,49,50,223]),import.meta.url)},{name:"user-settings-password-verify",path:"/user/settings/password/verify",meta:Wj||{},component:()=>Pn(()=>import("./I7n8K4KW.js"),__vite__mapDeps([224,114,138,11,8,9,10,136,1,2]),import.meta.url)},{name:"weather-stations-slug",path:"/weather-stations/:slug()",component:()=>Pn(()=>import("./MF4lCRmV.js"),__vite__mapDeps([225,55,38,35,28,36,56,57,30,13,14,31,20,58,23,32,59,1,2,47]),import.meta.url)},{name:"user-favorites-locations",path:"/user/favorites/locations",meta:F0e||{},component:()=>Pn(()=>import("./CAHSExZb.js"),__vite__mapDeps([226,159]),import.meta.url)},{name:"location-slug-weather-stations",path:"/location/:slug()/weather-stations",component:()=>Pn(()=>import("./k9X0DXnj.js"),__vite__mapDeps([227,42,1,2,43,44,38,45,46,20,181,210,55,35,28,36,56,57,30,13,14,31,58,23,32,59,121,150,151,211,212,213,54,60,61,62,176,37,39,40,41,25,26,47,48,49,50,7,8,9,51,177,21,178]),import.meta.url)},{name:"user-favorites-locations-weather",path:"/user/favorites/locations/weather",meta:z0e||{},component:()=>Pn(()=>import("./cu88pvHM.js"),__vite__mapDeps([228,229,230,165,12,1,2,144,123,32,169,35,28,36,159,126,127,128,56,57,42,43,44,38,45,46,60,61,129,90,91,20,146,147,103,23,24,47,231,37,39,40,41,25,26,48,49,50,7,8,9,51,52,108,80,109,154]),import.meta.url)},{name:"user-favorites-locations-all-cams",path:"/user/favorites/locations/all-cams",meta:B0e||{},component:()=>Pn(()=>import("./8B9oF3FD.js"),__vite__mapDeps([232,233,230,165,12,1,2,144,123,32,169,35,28,36,159,126,127,128,56,57,42,43,44,38,45,46,60,61,129,90,91,20,146,147,103,23,24,47,231,37,39,40,41,25,26,48,49,50,7,8,9,51,120,121,77,212]),import.meta.url)},{name:"user-settings-notifications",path:"/user/settings/notifications",meta:$0e||{},component:()=>Pn(()=>import("./B_E9D6f9.js"),__vite__mapDeps([234,114,194,35,28,36,78,79,43,44,42,1,2,38,45,46,41,25,26,20,23,32,47,48,12,147,235]),import.meta.url)},{name:"location-slug-avalanche-forecast",path:"/location/:slug()/avalanche-forecast",component:()=>Pn(()=>import("./BP60spIA.js"),__vite__mapDeps([236,186,19,20,21,22,13,14,23,24,25,26,27,28,29,30,31,32,33,34,35,36,1,2,37,38,39,40,41,42,43,44,45,46,47,48,49,50,7,8,9,51,52,53,176,177,208]),import.meta.url)},{name:"user-favorites-locations-snow-report",path:"/user/favorites/locations/snow-report",meta:V0e||{},component:()=>Pn(()=>import("./2MFuCDYP.js"),__vite__mapDeps([237,230,165,12,1,2,144,123,32,169,35,28,36,159,126,127,128,56,57,42,43,44,38,45,46,60,61,129,90,91,20,146,147,103,23,24,47,231,238,156,37,39,40,41,25,26,48,49,50,7,8,9,51,157,153,81,100,30,13,14,31,158]),import.meta.url)},{name:"explore-compareType-compareId-map",path:"/explore/:compareType()/:compareId()/map",component:()=>Pn(()=>import("./DTUKjkVs.js"),__vite__mapDeps([239,164,165,12,1,2,144,123,32,126,127,128,56,28,57,42,43,44,38,45,46,60,61,129,91,145,19,20,21,22,13,14,23,24,25,26,27,29,30,31,33,34,35,36,37,39,40,41,47,48,49,50,7,8,9,51,52,53,102,103,64,159,166]),import.meta.url)},{name:"user-favorites-locations-snow-summary",path:"/user/favorites/locations/snow-summary",meta:j0e||{},component:()=>Pn(()=>import("./deTlz4Xl.js"),__vite__mapDeps([240,241,230,165,12,1,2,144,123,32,169,35,28,36,159,126,127,128,56,57,42,43,44,38,45,46,60,61,129,90,91,20,146,147,103,23,24,47,231,148,37,39,40,41,25,26,48,49,50,7,8,9,51,149,150,151,152,33,34,58,153,80,154,155]),import.meta.url)},{name:"user-favorites-locations-snow-forecast",path:"/user/favorites/locations/snow-forecast",meta:U0e||{},component:()=>Pn(()=>import("./D8LXqnI3.js"),__vite__mapDeps([242,243,230,165,12,1,2,144,123,32,169,35,28,36,159,126,127,128,56,57,42,43,44,38,45,46,60,61,129,90,91,20,146,147,103,23,24,47,231,37,39,40,41,25,26,48,49,50,7,8,9,51,80,58,154,244]),import.meta.url)},{name:"explore-compareType-compareId",path:"/explore/:compareType()/:compareId()",meta:H0e||{},component:()=>Pn(()=>import("./CSxvLFUY.js"),__vite__mapDeps([245,159]),import.meta.url)},{name:"explore-compareType-compareId-weather",path:"/explore/:compareType()/:compareId()/weather",component:()=>Pn(()=>import("./tCz-LGqA.js"),__vite__mapDeps([246,229,230,165,12,1,2,144,123,32,169,35,28,36,159,126,127,128,56,57,42,43,44,38,45,46,60,61,129,90,91,20,146,147,103,23,24,47,231,37,39,40,41,25,26,48,49,50,7,8,9,51,52,108,80,109,154]),import.meta.url)},{name:"explore-compareType-compareId-all-cams",path:"/explore/:compareType()/:compareId()/all-cams",component:()=>Pn(()=>import("./fIVAhJa3.js"),__vite__mapDeps([247,233,230,165,12,1,2,144,123,32,169,35,28,36,159,126,127,128,56,57,42,43,44,38,45,46,60,61,129,90,91,20,146,147,103,23,24,47,231,37,39,40,41,25,26,48,49,50,7,8,9,51,120,121,77,212]),import.meta.url)},{name:"explore-compareType-compareId-snow-report",path:"/explore/:compareType()/:compareId()/snow-report",component:()=>Pn(()=>import("./BSyM-Owr.js"),__vite__mapDeps([248,230,165,12,1,2,144,123,32,169,35,28,36,159,126,127,128,56,57,42,43,44,38,45,46,60,61,129,90,91,20,146,147,103,23,24,47,231,238,156,37,39,40,41,25,26,48,49,50,7,8,9,51,157,153,81,100,30,13,14,31,158]),import.meta.url)},{name:"explore-compareType-compareId-snow-summary",path:"/explore/:compareType()/:compareId()/snow-summary",component:()=>Pn(()=>import("./Bj1nV6Dw.js"),__vite__mapDeps([249,241,230,165,12,1,2,144,123,32,169,35,28,36,159,126,127,128,56,57,42,43,44,38,45,46,60,61,129,90,91,20,146,147,103,23,24,47,231,148,37,39,40,41,25,26,48,49,50,7,8,9,51,149,150,151,152,33,34,58,153,80,154,155]),import.meta.url)},{name:"explore-compareType-compareId-snow-forecast",path:"/explore/:compareType()/:compareId()/snow-forecast",component:()=>Pn(()=>import("./DgC3Gons.js"),__vite__mapDeps([250,243,230,165,12,1,2,144,123,32,169,35,28,36,159,126,127,128,56,57,42,43,44,38,45,46,60,61,129,90,91,20,146,147,103,23,24,47,231,37,39,40,41,25,26,48,49,50,7,8,9,51,80,58,154,244]),import.meta.url)},{name:"dailysnow-slug-post-id",path:"/dailysnow/:slug/post/:postId",component:()=>Pn(()=>import("./DQfYfJQF.js"),__vite__mapDeps([188,83,38,28,84,47,20,23,183,81,123,32,103,92,77,1,2,45,93,189]),import.meta.url)},{name:"dailysnow-slug",path:"/dailysnow/:slug",component:()=>Pn(()=>import("./DQfYfJQF.js"),__vite__mapDeps([188,83,38,28,84,47,20,23,183,81,123,32,103,92,77,1,2,45,93,189]),import.meta.url)},{name:"explore-type-id-map-latlngzoom",path:"/explore/:compareType/:compareId/map/:latlngzoom",component:()=>Pn(()=>import("./DTUKjkVs.js"),__vite__mapDeps([239,164,165,12,1,2,144,123,32,126,127,128,56,28,57,42,43,44,38,45,46,60,61,129,91,145,19,20,21,22,13,14,23,24,25,26,27,29,30,31,33,34,35,36,37,39,40,41,47,48,49,50,7,8,9,51,52,53,102,103,64,159,166]),import.meta.url)},{name:"explore-powder-map-latlngzoom",path:"/explore/powder/map/:latlngzoom",component:()=>Pn(()=>import("./CbcwQ3QS.js"),__vite__mapDeps([142,143,144,123,32,126,127,1,2,128,56,28,57,12,42,43,44,38,45,46,60,61,129,91,145,19,20,21,22,13,14,23,24,25,26,27,29,30,31,33,34,35,36,37,39,40,41,47,48,49,50,7,8,9,51,52,53,102,103,64,146,147,148,149,150,151,152,58,153,80,154,155,156,157,81,100,158,159,160]),import.meta.url)},{name:"map-basemap",path:"/map/:basemap",component:()=>Pn(()=>import("./CFjA04Zp.js"),__vite__mapDeps([18,19,20,21,22,13,14,23,24,25,26,27,28,29,30,31,32,33,34,35,36,1,2,37,38,39,40,41,42,43,44,45,46,47,48,49,50,7,8,9,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65]),import.meta.url)},{name:"map-basemap-overlay",path:"/map/:basemap/:overlay",component:()=>Pn(()=>import("./CFjA04Zp.js"),__vite__mapDeps([18,19,20,21,22,13,14,23,24,25,26,27,28,29,30,31,32,33,34,35,36,1,2,37,38,39,40,41,42,43,44,45,46,47,48,49,50,7,8,9,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65]),import.meta.url)},{name:"map-basemap-overlay-latlngzoom",path:"/map/:basemap/:overlay/:latlngzoom",component:()=>Pn(()=>import("./CFjA04Zp.js"),__vite__mapDeps([18,19,20,21,22,13,14,23,24,25,26,27,28,29,30,31,32,33,34,35,36,1,2,37,38,39,40,41,42,43,44,45,46,47,48,49,50,7,8,9,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65]),import.meta.url)},{name:"user-buy-now",path:"/user/buy-now",component:()=>Pn(()=>import("./Cn8iFQeg.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url)},{name:"user-favorites-map-latlngzoom",path:"/user/favorites/map/:latlngzoom",meta:zj||{},component:()=>Pn(()=>import("./CIRMLhdk.js"),__vite__mapDeps([163,164,165,12,1,2,144,123,32,126,127,128,56,28,57,42,43,44,38,45,46,60,61,129,91,145,19,20,21,22,13,14,23,24,25,26,27,29,30,31,33,34,35,36,37,39,40,41,47,48,49,50,7,8,9,51,52,53,102,103,64,159,166]),import.meta.url)},{name:"user-settings",path:"/user/settings",component:()=>Pn(()=>import("./B_1sNUrm.js"),__vite__mapDeps([215,114,194,35,28,36,195,116,13,14,15,6,71,16,117,7,8,9,76,50,1,2,23,32,216]),import.meta.url)},{name:"user-settings-profile",path:"/user/settings/profile",component:()=>Pn(()=>import("./B_1sNUrm.js"),__vite__mapDeps([215,114,194,35,28,36,195,116,13,14,15,6,71,16,117,7,8,9,76,50,1,2,23,32,216]),import.meta.url)},{name:"user-settings-subscription",path:"/user/settings/subscription",component:()=>Pn(()=>import("./B_1sNUrm.js"),__vite__mapDeps([215,114,194,35,28,36,195,116,13,14,15,6,71,16,117,7,8,9,76,50,1,2,23,32,216]),import.meta.url)},{name:"user-settings-upgrade",path:"/user/settings/upgrade",component:()=>Pn(()=>import("./Cn8iFQeg.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url)},{name:"user-favorites-cam-id",path:"/user/favorites/cam/:id",component:()=>Pn(()=>import("./95k0LdYf.js"),__vite__mapDeps([167,168,165,12,1,2,169,35,28,36,159,170,42,43,44,38,45,46,171,162,120,121,23,32,77,94,47]),import.meta.url)},{name:"user-favorites",path:"/user/favorites",meta:{layout:"authorized"},component:()=>Pn(()=>import("./CAHSExZb.js"),__vite__mapDeps([226,159]),import.meta.url)},{name:"weblink-app",path:"/weblink/app",component:()=>Pn(()=>import("./kH5oY3Pg.js"),__vite__mapDeps([4,1,2]),import.meta.url)},{name:"weblink-buy",path:"/weblink/buy",meta:Lj||{},component:()=>Pn(()=>import("./Cn8iFQeg.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url)},{name:"weblink-team",path:"/weblink/team",component:()=>Pn(()=>import("./BBHfHeyP.js"),__vite__mapDeps([66,38,1,2,67]),import.meta.url)},{name:"weblink-about",path:"/weblink/about",component:()=>Pn(()=>import("./xfJ8GNoH.js"),__vite__mapDeps([68,69,70,71,6,72,1,2,73]),import.meta.url)},{name:"weblink-subscription",path:"/weblink/subscription",component:()=>Pn(()=>import("./C74N4ZYX.js"),__vite__mapDeps([115,71,70,6,72,116,13,14,15,16,117,1,2,118]),import.meta.url)},{name:"weblink-user-login",path:"/weblink/user/login",meta:Nj||{},component:()=>Pn(()=>import("./BRt9pKg3.js"),__vite__mapDeps([135,114,136,10,1,2,137,7,8,9,138,11,139,140,47]),import.meta.url)},{name:"weblink-user-login-verify",path:"/weblink/user/login/verify",meta:Fj||{},component:()=>Pn(()=>import("./BuF6tHS5.js"),__vite__mapDeps([141,10]),import.meta.url)},{name:"weblink-user-register-verify",path:"/weblink/user/register/verify",meta:Bj||{},component:()=>Pn(()=>import("./B7gMZwBj.js"),__vite__mapDeps([184,10]),import.meta.url)},{name:"weblink-user-group-join-verify",path:"/weblink/user/group/join/verify",meta:$j||{},component:()=>Pn(()=>import("./B3fFFrtG.js"),__vite__mapDeps([187,10]),import.meta.url)},{name:"weblink-user-settings-group",path:"/weblink/user/settings/group",meta:Vj||{},component:()=>Pn(()=>import("./2GcuT8d6.js"),[],import.meta.url)},{name:"weblink-user-settings-email-verify",path:"/weblink/user/settings/email/verify",meta:jj||{},component:()=>Pn(()=>import("./qeq8mXtp.js"),__vite__mapDeps([203,10,47]),import.meta.url)},{name:"weblink-user-settings-account",path:"/weblink/user/settings/account",meta:Uj||{},component:()=>Pn(()=>import("./B_1sNUrm.js"),__vite__mapDeps([215,114,194,35,28,36,195,116,13,14,15,6,71,16,117,7,8,9,76,50,1,2,23,32,216]),import.meta.url)},{name:"weblink-user-settings-delete-verify",path:"/weblink/user/settings/delete/verify",meta:Hj||{},component:()=>Pn(()=>import("./oJ5EIsPy.js"),__vite__mapDeps([217,10,47]),import.meta.url)},{name:"weblink-user-settings-password-verify",path:"/weblink/user/settings/password/verify",meta:Wj||{},component:()=>Pn(()=>import("./I7n8K4KW.js"),__vite__mapDeps([224,114,138,11,8,9,10,136,1,2]),import.meta.url)},{name:"weblink-user-buy-now",path:"/weblink/user/buy-now",component:()=>Pn(()=>import("./Cn8iFQeg.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url)},{name:"weblink-user-settings",path:"/weblink/user/settings",component:()=>Pn(()=>import("./B_1sNUrm.js"),__vite__mapDeps([215,114,194,35,28,36,195,116,13,14,15,6,71,16,117,7,8,9,76,50,1,2,23,32,216]),import.meta.url)},{name:"weblink-user-settings-profile",path:"/weblink/user/settings/profile",component:()=>Pn(()=>import("./B_1sNUrm.js"),__vite__mapDeps([215,114,194,35,28,36,195,116,13,14,15,6,71,16,117,7,8,9,76,50,1,2,23,32,216]),import.meta.url)},{name:"weblink-user-settings-subscription",path:"/weblink/user/settings/subscription",component:()=>Pn(()=>import("./B_1sNUrm.js"),__vite__mapDeps([215,114,194,35,28,36,195,116,13,14,15,6,71,16,117,7,8,9,76,50,1,2,23,32,216]),import.meta.url)},{name:"weblink-user-settings-upgrade",path:"/weblink/user/settings/upgrade",component:()=>Pn(()=>import("./Cn8iFQeg.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url)}],eQ=(e,t)=>({default:()=>e?Hs(vy,e===!0?{}:e,t):t.default?.()}),W0e=/(:\w+)\([^)]+\)/g,G0e=/(:\w+)[?+*]/g,Y0e=/:\w+/g;function Gj(e){const t=e?.meta.key??e.path.replace(W0e,"$1").replace(G0e,"$1").replace(Y0e,n=>e.params[n.slice(1)]?.toString()||"");return typeof t=="function"?t(e):t}function q0e(e,t){return e===t||t===Uc?!1:Gj(e)!==Gj(t)?!0:!e.matched.every((r,s)=>r.components&&r.components.default===t.matched[s]?.components?.default)}const X0e={scrollBehavior(e,t,n){const r=Wn(),s=aa().options?.scrollBehaviorType??"auto";if(e.path===t.path)return t.hash&&!e.hash?{left:0,top:0}:e.hash?{el:e.hash,top:tQ(e.hash),behavior:s}:!1;if((typeof e.meta.scrollToTop=="function"?e.meta.scrollToTop(e,t):e.meta.scrollToTop)===!1)return!1;const c=r._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(i=>{if(t===Uc){i(Yj(e,t,n,s));return}r.hooks.hookOnce(c,()=>{requestAnimationFrame(()=>i(Yj(e,t,n,s)))})})}};function tQ(e){try{const t=document.querySelector(e);if(t)return(Number.parseFloat(getComputedStyle(t).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function Yj(e,t,n,r){if(n)return n;const s=q0e(e,t);return e.hash?{el:e.hash,top:tQ(e.hash),behavior:s?r:"instant"}:{left:0,top:0}}const nQ={scrollBehavior(e,t,n){let r=0,s={left:0,top:0,behavior:"smooth"};return n?(s={...n},r=1e3):e.hash&&(s.el=e.hash,s.top=84,r=1e3),new Promise(o=>{window.setTimeout(()=>{o(s)},r)})}},Z0e={hashMode:!1,scrollBehaviorType:"auto"},eL=nQ.hashMode??!1,Dp={...Z0e,...X0e,...nQ},K0e=async(e,t)=>{let n,r;if(!e.meta?.validate)return;const s=([n,r]=Zh(()=>Promise.resolve(e.meta.validate(e))),n=await n,r(),n);if(s===!0)return;const o=N_({fatal:!0,statusCode:s&&s.statusCode||404,statusMessage:s&&s.statusMessage||`Page Not Found: ${e.fullPath}`,data:{path:e.fullPath}});return typeof window<"u"&&window.history.pushState({},"",t.fullPath),o};function qj(e){return typeof e=="string"?`'${e}'`:new J0e().serialize(e)}const J0e=(function(){class e{#e=new Map;compare(n,r){const s=typeof n,o=typeof r;return s==="string"&&o==="string"?n.localeCompare(r):s==="number"&&o==="number"?n-r:String.prototype.localeCompare.call(this.serialize(n,!0),this.serialize(r,!0))}serialize(n,r){if(n===null)return"null";switch(typeof n){case"string":return r?n:`'${n}'`;case"bigint":return`${n}n`;case"object":return this.$object(n);case"function":return this.$function(n)}return String(n)}serializeObject(n){const r=Object.prototype.toString.call(n);if(r!=="[object Object]")return this.serializeBuiltInType(r.length<10?`unknown:${r}`:r.slice(8,-1),n);const s=n.constructor,o=s===Object||s===void 0?"":s.name;if(o!==""&&globalThis[o]===s)return this.serializeBuiltInType(o,n);if(typeof n.toJSON=="function"){const c=n.toJSON();return o+(c!==null&&typeof c=="object"?this.$object(c):`(${this.serialize(c)})`)}return this.serializeObjectEntries(o,Object.entries(n))}serializeBuiltInType(n,r){const s=this["$"+n];if(s)return s.call(this,r);if(typeof r?.entries=="function")return this.serializeObjectEntries(n,r.entries());throw new Error(`Cannot serialize ${n}`)}serializeObjectEntries(n,r){const s=Array.from(r).sort((c,i)=>this.compare(c[0],i[0]));let o=`${n}{`;for(let c=0;c<s.length;c++){const[i,f]=s[c];o+=`${this.serialize(i,!0)}:${this.serialize(f)}`,c<s.length-1&&(o+=",")}return o+"}"}$object(n){let r=this.#e.get(n);return r===void 0&&(this.#e.set(n,`#${this.#e.size}`),r=this.serializeObject(n),this.#e.set(n,r)),r}$function(n){const r=Function.prototype.toString.call(n);return r.slice(-15)==="[native code] }"?`${n.name||""}()[native]`:`${n.name}(${n.length})${r.replace(/\s*\n\s*/g,"")}`}$Array(n){let r="[";for(let s=0;s<n.length;s++)r+=this.serialize(n[s]),s<n.length-1&&(r+=",");return r+"]"}$Date(n){try{return`Date(${n.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(n){return`ArrayBuffer[${new Uint8Array(n).join(",")}]`}$Set(n){return`Set${this.$Array(Array.from(n).sort((r,s)=>this.compare(r,s)))}`}$Map(n){return this.serializeObjectEntries("Map",n.entries())}}for(const t of["Error","RegExp","URL"])e.prototype["$"+t]=function(n){return`${t}(${n})`};for(const t of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])e.prototype["$"+t]=function(n){return`${t}[${n.join(",")}]`};for(const t of["BigInt64Array","BigUint64Array"])e.prototype["$"+t]=function(n){return`${t}[${n.join("n,")}${n.length>0?"n":""}]`};return e})();function Q0e(e,t){return e===t||qj(e)===qj(t)}const e1e=Symbol.for("nuxt:client-only"),rQ=ki({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:t,attrs:n}){const r=mo(!1);ua(()=>{r.value=!0});const s=zs();return s&&(s._nuxtClientOnly=!0),Ko(e1e,!0),()=>{if(r.value){const f=t.default?.();return f&&f.length===1?[rd(f[0],n)]:f}const o=t.fallback||t.placeholder;if(o)return Hs(o);const c=e.fallback||e.placeholder||"",i=e.fallbackTag||e.placeholderTag||"span";return Nn(i,n,c)}}}),tL=globalThis.requestIdleCallback||(e=>{const t=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))};return setTimeout(()=>{e(n)},1)}),t1e=globalThis.cancelIdleCallback||(e=>{clearTimeout(e)}),uN=e=>{const t=Wn();t.isHydrating?t.hooks.hookOnce("app:suspense:resolve",()=>{tL(()=>e())}):tL(()=>e())};async function n1e(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(t);const[n,r,s]=e;if(!n||typeof n!="string")throw new TypeError("[nuxt] [callOnce] key must be a string: "+n);if(r!==void 0&&typeof r!="function")throw new Error("[nuxt] [callOnce] fn must be a function: "+r);const o=Wn();if(s?.mode==="navigation"){let c=function(){o.payload.once.delete(n);for(const f of i)f()};const i=[];i.push(o.hooks.hook("page:start",c),aa().beforeResolve(c))}o.payload.once.has(n)||(o._once||={},o._once[n]||=r()||!0,await o._once[n],o.payload.once.add(n),delete o._once[n])}function r1e(e){return{}}function Xct(e){return yr()}function i1e(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");const n={},r=t||{},s=r.decode||s1e;let o=0;for(;o<e.length;){const c=e.indexOf("=",o);if(c===-1)break;let i=e.indexOf(";",o);if(i===-1)i=e.length;else if(i<c){o=e.lastIndexOf(";",c-1)+1;continue}const f=e.slice(o,c).trim();if(r?.filter&&!r?.filter(f)){o=i+1;continue}if(n[f]===void 0){let g=e.slice(c+1,i).trim();g.codePointAt(0)===34&&(g=g.slice(1,-1)),n[f]=o1e(g,s)}o=i+1}return n}function s1e(e){return e.includes("%")?decodeURIComponent(e):e}function o1e(e,t){try{return t(e)}catch{return e}}const gM=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function Xj(e,t,n){const r=n||{},s=r.encode||encodeURIComponent;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!gM.test(e))throw new TypeError("argument name is invalid");const o=s(t);if(o&&!gM.test(o))throw new TypeError("argument val is invalid");let c=e+"="+o;if(r.maxAge!==void 0&&r.maxAge!==null){const i=r.maxAge-0;if(Number.isNaN(i)||!Number.isFinite(i))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(i)}if(r.domain){if(!gM.test(r.domain))throw new TypeError("option domain is invalid");c+="; Domain="+r.domain}if(r.path){if(!gM.test(r.path))throw new TypeError("option path is invalid");c+="; Path="+r.path}if(r.expires){if(!a1e(r.expires)||Number.isNaN(r.expires.valueOf()))throw new TypeError("option expires is invalid");c+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(c+="; HttpOnly"),r.secure&&(c+="; Secure"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():r.priority){case"low":{c+="; Priority=Low";break}case"medium":{c+="; Priority=Medium";break}case"high":{c+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:{c+="; SameSite=Strict";break}case"lax":{c+="; SameSite=Lax";break}case"strict":{c+="; SameSite=Strict";break}case"none":{c+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(c+="; Partitioned"),c}function a1e(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function Bu(e){if(typeof e!="object")return e;var t,n,r=Object.prototype.toString.call(e);if(r==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){n=new e.constructor;for(t in e)e.hasOwnProperty(t)&&n[t]!==e[t]&&(n[t]=Bu(e[t]))}else{n={};for(t in e)t==="__proto__"?Object.defineProperty(n,t,{value:Bu(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=Bu(e[t])}return n}if(r==="[object Array]"){for(t=e.length,n=Array(t);t--;)n[t]=Bu(e[t]);return n}return r==="[object Set]"?(n=new Set,e.forEach(function(s){n.add(Bu(s))}),n):r==="[object Map]"?(n=new Map,e.forEach(function(s,o){n.set(Bu(o),Bu(s))}),n):r==="[object Date]"?new Date(+e):r==="[object RegExp]"?(n=new RegExp(e.source,e.flags),n.lastIndex=e.lastIndex,n):r==="[object DataView]"?new e.constructor(Bu(e.buffer)):r==="[object ArrayBuffer]"?e.slice(0):r.slice(-6)==="Array]"?new e.constructor(e):e}const l1e={path:"/",watch:!0,decode:e=>$2(decodeURIComponent(e)),encode:e=>encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))},_M=globalThis.cookieStore;function c1e(e,t){const n={...l1e,...t};n.filter??=g=>g===e;const r=Zj(n)||{};let s;n.maxAge!==void 0?s=n.maxAge*1e3:n.expires&&(s=n.expires.getTime()-Date.now());const o=s!==void 0&&s<=0,c=o||r[e]===void 0||r[e]===null,i=Bu(o?void 0:r[e]??n.default?.()),f=s&&!o?h1e(i,s,n.watch&&n.watch!=="shallow"):yr(i);{let g=null;try{!_M&&typeof BroadcastChannel<"u"&&(g=new BroadcastChannel(`nuxt:cookies:${e}`))}catch{}const x=(F=!1)=>{!F&&(n.readonly||Q0e(f.value,r[e]))||(d1e(e,f.value,n),r[e]=Bu(f.value),g?.postMessage({value:n.encode(f.value)}))},w=F=>{const z=F.refresh?Zj(n)?.[e]:n.decode(F.value);A=!0,f.value=z,r[e]=Bu(z),es(()=>{A=!1})};let A=!1;const C=!!my();if(C&&F0(()=>{A=!0,x(),g?.close()}),_M){const F=z=>{const j=z.changed.find(Y=>Y.name===e),V=z.deleted.find(Y=>Y.name===e);j&&w({value:j.value}),V&&w({value:null})};_M.addEventListener("change",F),C&&F0(()=>_M.removeEventListener("change",F))}else g&&(g.onmessage=({data:F})=>w(F));n.watch&&Hr(f,()=>{A||x()},{deep:n.watch!=="shallow"}),c&&x(c)}return f}function Zj(e={}){return i1e(document.cookie,e)}function u1e(e,t,n={}){return t==null?Xj(e,t,{...n,maxAge:-1}):Xj(e,t,n)}function d1e(e,t,n={}){document.cookie=u1e(e,t,n)}const Kj=2147483647;function h1e(e,t,n){let r,s,o=0;const c=n?yr(e):{value:e};return my()&&F0(()=>{s?.(),clearTimeout(r)}),D3((i,f)=>{n&&(s=Hr(c,f));function g(){o=0,clearTimeout(r);const x=t-o,w=x<Kj?x:Kj;r=setTimeout(()=>{if(o+=w,o<t)return g();c.value=void 0,f()},w)}return{get(){return i(),c.value},set(x){g(),c.value=x,f()}}})}function f1e(e){if(e?.__asyncLoader&&!e.__asyncResolved)return e.__asyncLoader()}async function iQ(e,t=aa()){const{path:n,matched:r}=t.resolve(e);if(!r.length||(t._routePreloaded||=new Set,t._routePreloaded.has(n)))return;const s=t._preloadPromises||=[];if(s.length>4)return Promise.all(s).then(()=>iQ(e,t));t._routePreloaded.add(n);for(const o of r){const c=o.components?.default;if(typeof c!="function")continue;const i=Promise.resolve(c()).catch(()=>{}).finally(()=>s.splice(s.indexOf(i)));s.push(i)}await Promise.all(s)}function p1e(e={}){const t=e.path||window.location.pathname;let n={};try{n=$2(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(e.force||n?.path!==t||n?.expires<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:t,expires:Date.now()+(e.ttl??1e4)}))}catch{}if(e.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:Wn().payload.state}))}catch{}window.location.pathname!==t?window.location.href=t:window.location.reload()}}const m1e=(...e)=>e.find(t=>t!==void 0);function g1e(e){const t=e.componentName||"NuxtLink";function n(o){return!eL&&typeof o=="string"&&o.startsWith("#")}function r(o,c,i){const f=i??e.trailingSlash;if(!o||f!=="append"&&f!=="remove")return o;if(typeof o=="string")return yM(o,f);const g="path"in o&&o.path!==void 0?o.path:c(o).path;return{...o,name:void 0,path:yM(g,f)}}function s(o){const c=aa(),i=no(),f=Ct(()=>!!o.target&&o.target!=="_self"),g=Ct(()=>{const j=o.to||o.href||"";return typeof j=="string"&&Km(j,{acceptRelative:!0})}),x=eo("RouterLink"),w=x&&typeof x!="string"?x.useLink:void 0,A=Ct(()=>{if(o.external)return!0;const j=o.to||o.href||"";return typeof j=="object"?!1:j===""||g.value}),C=Ct(()=>{const j=o.to||o.href||"";return A.value?j:r(j,c.resolve,o.trailingSlash)}),F=A.value?void 0:w?.({...o,to:C}),z=Ct(()=>{const j=o.trailingSlash??e.trailingSlash;if(!C.value||g.value||n(C.value))return C.value;if(A.value){const V=typeof C.value=="object"&&"path"in C.value?Uk(C.value):C.value,Y=typeof V=="object"?c.resolve(V).href:V;return yM(Y,j)}return typeof C.value=="object"?c.resolve(C.value)?.href??null:yM(j3(i.app.baseURL,C.value),j)});return{to:C,hasTarget:f,isAbsoluteUrl:g,isExternal:A,href:z,isActive:F?.isActive??Ct(()=>C.value===c.currentRoute.value.path),isExactActive:F?.isExactActive??Ct(()=>C.value===c.currentRoute.value.path),route:F?.route??Ct(()=>c.resolve(C.value)),async navigate(j){await L_(z.value,{replace:o.replace,external:A.value||f.value})}}}return ki({name:t,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},prefetchOn:{type:[String,Object],default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1},trailingSlash:{type:String,default:void 0,required:!1}},useLink:s,setup(o,{slots:c}){const i=aa(),{to:f,href:g,navigate:x,isExternal:w,hasTarget:A,isAbsoluteUrl:C}=s(o),F=mo(!1),z=yr(null),j=te=>{z.value=o.custom?te?.$el?.nextElementSibling:te?.$el};function V(te){return!F.value&&(typeof o.prefetchOn=="string"?o.prefetchOn===te:o.prefetchOn?.[te]??e.prefetchOn?.[te])&&(o.prefetch??e.prefetch)!==!1&&o.noPrefetch!==!0&&o.target!=="_blank"&&!v1e()}async function Y(te=Wn()){if(F.value)return;F.value=!0;const J=typeof f.value=="string"?f.value:w.value?Uk(f.value):i.resolve(f.value).fullPath,ee=w.value?new URL(J,window.location.href).href:J;await Promise.all([te.hooks.callHook("link:prefetch",ee).catch(()=>{}),!w.value&&!A.value&&iQ(f.value,i).catch(()=>{})])}if(V("visibility")){const te=Wn();let J,ee=null;ua(()=>{const le=_1e();uN(()=>{J=tL(()=>{z?.value?.tagName&&(ee=le.observe(z.value,async()=>{ee?.(),ee=null,await Y(te)}))})})}),Mf(()=>{J&&t1e(J),ee?.(),ee=null})}return()=>{if(!w.value&&!A.value&&!n(f.value)){const ee={ref:j,to:f.value,activeClass:o.activeClass||e.activeClass,exactActiveClass:o.exactActiveClass||e.exactActiveClass,replace:o.replace,ariaCurrentValue:o.ariaCurrentValue,custom:o.custom};return o.custom||(V("interaction")&&(ee.onPointerenter=Y.bind(null,void 0),ee.onFocus=Y.bind(null,void 0)),F.value&&(ee.class=o.prefetchedClass||e.prefetchedClass),ee.rel=o.rel||void 0),Hs(eo("RouterLink"),ee,c.default)}const te=o.target||null,J=m1e(o.noRel?"":o.rel,e.externalRelAttribute,C.value||A.value?"noopener noreferrer":"")||null;return o.custom?c.default?c.default({href:g.value,navigate:x,prefetch:Y,get route(){if(!g.value)return;const ee=new URL(g.value,window.location.href);return{path:ee.pathname,fullPath:ee.pathname,get query(){return eN(ee.search)},hash:ee.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:g.value}},rel:J,target:te,isExternal:w.value||A.value,isActive:!1,isExactActive:!1}):null:Hs("a",{ref:z,href:g.value||null,rel:J,target:te,onClick:ee=>{if(!(w.value||A.value))return ee.preventDefault(),o.replace?i.replace(g.value):i.push(g.value)}},c.default?.())}}})}const W3=g1e(z_e);function yM(e,t){const n=t==="append"?rJ:V2;return Km(e)&&!e.startsWith("http")?e:n(e,!0)}function _1e(){const e=Wn();if(e._observer)return e._observer;let t=null;const n=new Map,r=(o,c)=>(t||=new IntersectionObserver(i=>{for(const f of i){const g=n.get(f.target);(f.isIntersecting||f.intersectionRatio>0)&&g&&g()}}),n.set(o,c),t.observe(o),()=>{n.delete(o),t?.unobserve(o),n.size===0&&(t?.disconnect(),t=null)});return e._observer={observe:r}}const y1e=/2g/;function v1e(){const e=navigator.connection;return!!(e&&(e.saveData||y1e.test(e.effectiveType)))}const b1e=e=>{const t=f=>String(e?.path).startsWith(f),n=e?.fullPath.match(/\/explore\/(.+)\/(.+)\/snow-history/),r=e?.fullPath.match(/\/explore\/(.+)\/(.+)\/summary/),s=e?.fullPath.match(/\/explore\/(.+)\/(.+)\/temperature/);let o;const c={};let i;if(n?i=`/explore/${n[1]}/${n[2]}/snow-summary`:r?i=`/explore/${r[1]}/${r[2]}/snow-summary`:s?i=`/explore/${s[1]}/${s[2]}/weather`:t("/user/favorites/locations/snow-history")||t("/user/favorites/locations/summary")?i="/user/favorites/locations/snow-summary":t("/user/favorites/locations/temperature")?i="/user/favorites/locations/weather":t("/user/notifications/newsletters")?(o="#email-newsletters",i="/user/settings/notifications"):t("/user/settings/alerts/dailysnow")?(o="#expert-local-forecasters",i="/user/settings/notifications"):t("/user/settings/alerts/snow")?(o="#snow-forecasts-and-reports",i="/user/settings/notifications"):t("/user/settings/alerts")?i="/user/settings/notifications":t("/user/settings/privacy")?(o="#privacy",i="/user/settings/preferences"):t("/terms")?(c.external=!0,i="https://support.opensnow.com/legal/terms"):t("/privacy")?(c.external=!0,i="https://support.opensnow.com/legal/privacy"):t("/partnerships")?(c.external=!0,i="https://support.opensnow.com/legal/partnerships"):t("/contact")?(c.external=!0,i="https://support.opensnow.com/contact-us/contact"):t("/careers")?(c.external=!0,i="https://support.opensnow.com/legal/careers"):t("/allaccess")&&(i="/subscription"),i)return L_({hash:o,path:i,query:e.query},c)},Qo=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},x1e={name:"CardCloseButton",props:{buttonClass:{type:[Array,String],default:"tw-inline-block tw-w-3/4 tw-h-3/4 tw-text-gray-400"},customButtonWrapperClass:{type:String,default:null},hasBodyPaddingSmall:{type:Boolean,default:!1},size:{type:String,default:"tw-w-8 tw-h-8"}},emits:["click"],computed:{buttonWrapperClass(){const e=["tw-flex tw-items-center tw-justify-center",this.size];return this.customButtonWrapperClass?[this.customButtonWrapperClass,...e]:["tw-absolute tw-right-0",this.hasBodyPaddingSmall?"tw-top-1.5 lg:tw-right-1":"tw-top-3 lg:tw-right-3",...e]}}};function w1e(e,t,n,r,s,o){const c=eo("font-awesome-icon");return ln(),Nn("div",{class:Jn(o.buttonWrapperClass)},[qn("button",{class:Jn(n.buttonClass),onClick:t[0]||(t[0]=i=>e.$emit("click"))},[Un(c,{class:"tw-inline-block tw-h-full tw-w-full",icon:"times-circle"})],2)],2)}const sQ=Object.assign(Qo(x1e,[["render",w1e],["__file","CardCloseButton.vue"]]),{__name:"CardCloseButton"}),S1e="Button__allAccess",E1e="Button__bannerBuyNow",T1e="Button__card",M1e="Button__cardBorder",A1e="Button__danger",C1e="Button__help",I1e="Button__homePageBuyNow",P1e="Button__homePageBuyNowThemeable",O1e="Button__pill",D1e="Button__active",R1e="Button__strongButton",k1e="Button__chipSecondary",L1e="Button__pillSecondary",N1e="Button__chip",F1e="Button__chipCard",z1e="Button__primary",B1e="Button__chipCardAllAccess",$1e="Button__secondary",V1e="Button__secondaryCard",j1e="Button__upgrade",U1e="Button__upgradeSecondary",H1e="Button__upgradePremium",W1e="Button__upgradeInline",G1e={allAccess:S1e,bannerBuyNow:E1e,card:T1e,cardBorder:M1e,danger:A1e,help:C1e,homePageBuyNow:I1e,homePageBuyNowThemeable:P1e,pill:O1e,active:D1e,strongButton:R1e,chipSecondary:k1e,pillSecondary:L1e,chip:N1e,chipCard:F1e,primary:z1e,chipCardAllAccess:B1e,secondary:$1e,secondaryCard:V1e,upgrade:j1e,upgradeSecondary:U1e,upgradePremium:H1e,upgradeInline:W1e},Tr={allAccess:"allAccess",bannerBuyNow:"bannerBuyNow",card:"card",cardBorder:"cardBorder",chip:"chip",chipCard:"chipCard",chipCardAllAccess:"chipCardAllAccess",chipSecondary:"chipSecondary",danger:"danger",help:"help",homePageBuyNow:"homePageBuyNow",homePageBuyNowThemeable:"homePageBuyNowThemeable",none:"none",pill:"pill",pillSecondary:"pillSecondary",primary:"primary",secondary:"secondary",secondaryCard:"secondaryCard",upgrade:"upgrade",upgradePremium:"upgradePremium",upgradeSecondary:"upgradeSecondary",upgradeInline:"upgradeInline"},Y1e={__name:"Button",props:{active:{type:Boolean,default:!1},additionalClassNames:{type:String,default:""},canUnderlineOnHover:{type:Boolean,default:!1},canShowChipActiveIcon:{type:Boolean,default:!0},disabled:{type:Boolean,default:null},disableHover:{type:Boolean,default:!1},displayBlock:{type:Boolean,default:!1},extraLarge:{type:Boolean,default:!1},isStrongButton:{type:Boolean,default:!1},href:{type:String,default:null},large:{type:Boolean,default:!1},rel:{type:String,default:null},roundedFull:{type:Boolean,default:!1},small:{type:Boolean,default:!1},target:{type:String,default:null},title:{type:String,default:null},to:{type:String,default:null},type:{type:String,default:Tr.primary,validator(e){return Object.values(Tr).includes(e)}}},emits:["click","mousedown"],setup(e,{expose:t,emit:n}){t();const r=j0(),s=e,o=n,c=Ct(()=>[Tr.pill,Tr.pillSecondary].includes(s.type)),i=Ct(()=>[Tr.chip,Tr.chipCard,Tr.chipCardAllAccess,Tr.chipSecondary].includes(s.type)),f=Ct(()=>s.type===Tr.none),g=Ct(()=>s.active&&(c.value||i.value)),x=Ct(()=>{const z=[Tr.bannerBuyNow,Tr.help,Tr.none,Tr.chipSecondary,Tr.homePageBuyNowThemeable,Tr.secondary,Tr.secondaryCard,Tr.card,Tr.cardBorder,Tr.pill,Tr.pillSecondary,Tr.upgrade,Tr.upgradePremium,Tr.upgradeSecondary,Tr.upgradeInline];return s.type===Tr.chip&&!s.active&&z.push(Tr.chip),s.type===Tr.chipCard&&!s.active&&z.push(Tr.chipCard),s.type===Tr.chipCardAllAccess&&!s.active&&z.push(Tr.chipCardAllAccess),!z.includes(s.type)}),w=Ct(()=>{const z=()=>s.type===Tr.upgrade?"text-darkest-color-not-themed":null,j=()=>s.type===Tr.upgradeInline?"tw-inline-flex":s.displayBlock?"tw-block":"tw-inline-block",V=()=>s.extraLarge||s.large?"tw-px-4":s.small?"tw-px-2":c.value||s.type===Tr.upgrade||s.type===Tr.upgradeSecondary?"tw-px-4":s.type==Tr.upgradeInline?"tw-px-1.5":"tw-px-3",Y=()=>s.extraLarge?"tw-py-3":s.large?"tw-py-2":s.type===Tr.upgrade||s.type===Tr.upgradeSecondary?null:(s.type==Tr.upgradeInline,"tw-py-1.5"),te=()=>s.roundedFull||s.type===Tr.upgrade||s.type===Tr.upgradeSecondary||s.type===Tr.upgradeInline||c.value?"tw-rounded-full":"tw-rounded-lg",J=()=>s.type==Tr.upgradeInline?"tw-items-center tw-justify-center":null,ee=()=>s.type===Tr.upgrade||s.type===Tr.upgradeSecondary?"tw-font-bold":s.type===Tr.upgradePremium?"tw-font-medium":"tw-font-normal",le=()=>s.large?"tw-text-xl":c.value||s.small||s.type===Tr.upgrade?"tw-text-sm":s.type===Tr.upgradeSecondary||s.type===Tr.upgradeInline?"tw-text-xs":"tw-text-base",oe=()=>s.type===Tr.upgradeInline?"tw-w-6 tw-h-6":null;return[g.value?r.active:null,z(),j(),te(),ee(),oe(),f.value?null:Y(),f.value?null:V(),"tw-transition-all","tw-no-underline","tw-text-center",le(),J(),s.isStrongButton?"tw-shadow-md":null,s.canUnderlineOnHover?"hover:tw-underline":"hover:tw-no-underline",s.disabled?"tw-opacity-50 tw-pointer-events-none":null,s.disableHover?"tw-pointer-events-none":null,x.value?"tw-text-white":null,r[s.type],s.isStrongButton?r.strongButton:null,s.additionalClassNames].filter(ve=>ve!==null)});function A(z){s.disabled?(z.preventDefault(),z.stopPropagation()):o("click",{originalEvent:z}),z?.target&&z.target.blur()}function C(z){s.disabled?(z.preventDefault(),z.stopPropagation()):o("mousedown",{originalEvent:z})}const F={ButtonTypes:Tr,$style:r,props:s,$emit:o,isPill:c,isChip:i,isNone:f,isActive:g,useWhiteText:x,classNames:w,handleClick:A,handleMousedown:C,useCssModule:j0};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}},q1e=["disabled","href","rel","target","title"],X1e=["disabled","title"];function Z1e(e,t,n,r,s,o){const c=W3,i=eo("font-awesome-icon");return n.href?(ln(),Nn("a",{key:0,class:Jn(r.classNames),disabled:n.disabled,href:n.href,rel:n.rel,target:n.target,title:n.title,onClick:r.handleClick,onMousedown:r.handleMousedown},[Co(e.$slots,"default")],42,q1e)):n.to?(ln(),Zr(c,{key:1,class:Jn(r.classNames),disabled:n.disabled,title:n.title,to:n.to,onClick:r.handleClick,onMousedown:r.handleMousedown},{default:Dr(()=>[Co(e.$slots,"default")]),_:3},8,["class","disabled","title","to"])):(ln(),Nn("button",{key:2,class:Jn(r.classNames),disabled:n.disabled,title:n.title,onClick:r.handleClick,onMousedown:r.handleMousedown},[r.isChip&&r.isActive&&n.canShowChipActiveIcon?(ln(),Zr(i,{key:0,class:"tw-text-white tw-fill-current tw-mr-1 tw-align-middle",icon:"check-circle"})):fi("",!0),t[0]||(t[0]=Rr()),Co(e.$slots,"default")],42,X1e))}const K1e={$style:G1e},RS=Qo(Y1e,[["render",Z1e],["__cssModules",K1e],["__file","Button.vue"]]);var vM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ih(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function G3(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var BA={exports:{}},J1e=BA.exports,Jj;function Q1e(){return Jj||(Jj=1,(function(e,t){(function(n,r){e.exports=r()})(J1e,(function(){var n=1e3,r=6e4,s=36e5,o="millisecond",c="second",i="minute",f="hour",g="day",x="week",w="month",A="quarter",C="year",F="date",z="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,V=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ce){var Ee=["th","st","nd","rd"],xe=Ce%100;return"["+Ce+(Ee[(xe-20)%10]||Ee[xe]||Ee[0])+"]"}},te=function(Ce,Ee,xe){var ke=String(Ce);return!ke||ke.length>=Ee?Ce:""+Array(Ee+1-ke.length).join(xe)+Ce},J={s:te,z:function(Ce){var Ee=-Ce.utcOffset(),xe=Math.abs(Ee),ke=Math.floor(xe/60),He=xe%60;return(Ee<=0?"+":"-")+te(ke,2,"0")+":"+te(He,2,"0")},m:function Ce(Ee,xe){if(Ee.date()<xe.date())return-Ce(xe,Ee);var ke=12*(xe.year()-Ee.year())+(xe.month()-Ee.month()),He=Ee.clone().add(ke,w),Ke=xe-He<0,Ge=Ee.clone().add(ke+(Ke?-1:1),w);return+(-(ke+(xe-He)/(Ke?He-Ge:Ge-He))||0)},a:function(Ce){return Ce<0?Math.ceil(Ce)||0:Math.floor(Ce)},p:function(Ce){return{M:w,y:C,w:x,d:g,D:F,h:f,m:i,s:c,ms:o,Q:A}[Ce]||String(Ce||"").toLowerCase().replace(/s$/,"")},u:function(Ce){return Ce===void 0}},ee="en",le={};le[ee]=Y;var oe="$isDayjsObject",ve=function(Ce){return Ce instanceof be||!(!Ce||!Ce[oe])},se=function Ce(Ee,xe,ke){var He;if(!Ee)return ee;if(typeof Ee=="string"){var Ke=Ee.toLowerCase();le[Ke]&&(He=Ke),xe&&(le[Ke]=xe,He=Ke);var Ge=Ee.split("-");if(!He&&Ge.length>1)return Ce(Ge[0])}else{var $t=Ee.name;le[$t]=Ee,He=$t}return!ke&&He&&(ee=He),He||!ke&&ee},ie=function(Ce,Ee){if(ve(Ce))return Ce.clone();var xe=typeof Ee=="object"?Ee:{};return xe.date=Ce,xe.args=arguments,new be(xe)},pe=J;pe.l=se,pe.i=ve,pe.w=function(Ce,Ee){return ie(Ce,{locale:Ee.$L,utc:Ee.$u,x:Ee.$x,$offset:Ee.$offset})};var be=(function(){function Ce(xe){this.$L=se(xe.locale,null,!0),this.parse(xe),this.$x=this.$x||xe.x||{},this[oe]=!0}var Ee=Ce.prototype;return Ee.parse=function(xe){this.$d=(function(ke){var He=ke.date,Ke=ke.utc;if(He===null)return new Date(NaN);if(pe.u(He))return new Date;if(He instanceof Date)return new Date(He);if(typeof He=="string"&&!/Z$/i.test(He)){var Ge=He.match(j);if(Ge){var $t=Ge[2]-1||0,Ft=(Ge[7]||"0").substring(0,3);return Ke?new Date(Date.UTC(Ge[1],$t,Ge[3]||1,Ge[4]||0,Ge[5]||0,Ge[6]||0,Ft)):new Date(Ge[1],$t,Ge[3]||1,Ge[4]||0,Ge[5]||0,Ge[6]||0,Ft)}}return new Date(He)})(xe),this.init()},Ee.init=function(){var xe=this.$d;this.$y=xe.getFullYear(),this.$M=xe.getMonth(),this.$D=xe.getDate(),this.$W=xe.getDay(),this.$H=xe.getHours(),this.$m=xe.getMinutes(),this.$s=xe.getSeconds(),this.$ms=xe.getMilliseconds()},Ee.$utils=function(){return pe},Ee.isValid=function(){return this.$d.toString()!==z},Ee.isSame=function(xe,ke){var He=ie(xe);return this.startOf(ke)<=He&&He<=this.endOf(ke)},Ee.isAfter=function(xe,ke){return ie(xe)<this.startOf(ke)},Ee.isBefore=function(xe,ke){return this.endOf(ke)<ie(xe)},Ee.$g=function(xe,ke,He){return pe.u(xe)?this[ke]:this.set(He,xe)},Ee.unix=function(){return Math.floor(this.valueOf()/1e3)},Ee.valueOf=function(){return this.$d.getTime()},Ee.startOf=function(xe,ke){var He=this,Ke=!!pe.u(ke)||ke,Ge=pe.p(xe),$t=function(Kt,_e){var bn=pe.w(He.$u?Date.UTC(He.$y,_e,Kt):new Date(He.$y,_e,Kt),He);return Ke?bn:bn.endOf(g)},Ft=function(Kt,_e){return pe.w(He.toDate()[Kt].apply(He.toDate("s"),(Ke?[0,0,0,0]:[23,59,59,999]).slice(_e)),He)},Lt=this.$W,nn=this.$M,mn=this.$D,Xt="set"+(this.$u?"UTC":"");switch(Ge){case C:return Ke?$t(1,0):$t(31,11);case w:return Ke?$t(1,nn):$t(0,nn+1);case x:var mt=this.$locale().weekStart||0,Jt=(Lt<mt?Lt+7:Lt)-mt;return $t(Ke?mn-Jt:mn+(6-Jt),nn);case g:case F:return Ft(Xt+"Hours",0);case f:return Ft(Xt+"Minutes",1);case i:return Ft(Xt+"Seconds",2);case c:return Ft(Xt+"Milliseconds",3);default:return this.clone()}},Ee.endOf=function(xe){return this.startOf(xe,!1)},Ee.$set=function(xe,ke){var He,Ke=pe.p(xe),Ge="set"+(this.$u?"UTC":""),$t=(He={},He[g]=Ge+"Date",He[F]=Ge+"Date",He[w]=Ge+"Month",He[C]=Ge+"FullYear",He[f]=Ge+"Hours",He[i]=Ge+"Minutes",He[c]=Ge+"Seconds",He[o]=Ge+"Milliseconds",He)[Ke],Ft=Ke===g?this.$D+(ke-this.$W):ke;if(Ke===w||Ke===C){var Lt=this.clone().set(F,1);Lt.$d[$t](Ft),Lt.init(),this.$d=Lt.set(F,Math.min(this.$D,Lt.daysInMonth())).$d}else $t&&this.$d[$t](Ft);return this.init(),this},Ee.set=function(xe,ke){return this.clone().$set(xe,ke)},Ee.get=function(xe){return this[pe.p(xe)]()},Ee.add=function(xe,ke){var He,Ke=this;xe=Number(xe);var Ge=pe.p(ke),$t=function(nn){var mn=ie(Ke);return pe.w(mn.date(mn.date()+Math.round(nn*xe)),Ke)};if(Ge===w)return this.set(w,this.$M+xe);if(Ge===C)return this.set(C,this.$y+xe);if(Ge===g)return $t(1);if(Ge===x)return $t(7);var Ft=(He={},He[i]=r,He[f]=s,He[c]=n,He)[Ge]||1,Lt=this.$d.getTime()+xe*Ft;return pe.w(Lt,this)},Ee.subtract=function(xe,ke){return this.add(-1*xe,ke)},Ee.format=function(xe){var ke=this,He=this.$locale();if(!this.isValid())return He.invalidDate||z;var Ke=xe||"YYYY-MM-DDTHH:mm:ssZ",Ge=pe.z(this),$t=this.$H,Ft=this.$m,Lt=this.$M,nn=He.weekdays,mn=He.months,Xt=He.meridiem,mt=function(_e,bn,On,je){return _e&&(_e[bn]||_e(ke,Ke))||On[bn].slice(0,je)},Jt=function(_e){return pe.s($t%12||12,_e,"0")},Kt=Xt||function(_e,bn,On){var je=_e<12?"AM":"PM";return On?je.toLowerCase():je};return Ke.replace(V,(function(_e,bn){return bn||(function(On){switch(On){case"YY":return String(ke.$y).slice(-2);case"YYYY":return pe.s(ke.$y,4,"0");case"M":return Lt+1;case"MM":return pe.s(Lt+1,2,"0");case"MMM":return mt(He.monthsShort,Lt,mn,3);case"MMMM":return mt(mn,Lt);case"D":return ke.$D;case"DD":return pe.s(ke.$D,2,"0");case"d":return String(ke.$W);case"dd":return mt(He.weekdaysMin,ke.$W,nn,2);case"ddd":return mt(He.weekdaysShort,ke.$W,nn,3);case"dddd":return nn[ke.$W];case"H":return String($t);case"HH":return pe.s($t,2,"0");case"h":return Jt(1);case"hh":return Jt(2);case"a":return Kt($t,Ft,!0);case"A":return Kt($t,Ft,!1);case"m":return String(Ft);case"mm":return pe.s(Ft,2,"0");case"s":return String(ke.$s);case"ss":return pe.s(ke.$s,2,"0");case"SSS":return pe.s(ke.$ms,3,"0");case"Z":return Ge}return null})(_e)||Ge.replace(":","")}))},Ee.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ee.diff=function(xe,ke,He){var Ke,Ge=this,$t=pe.p(ke),Ft=ie(xe),Lt=(Ft.utcOffset()-this.utcOffset())*r,nn=this-Ft,mn=function(){return pe.m(Ge,Ft)};switch($t){case C:Ke=mn()/12;break;case w:Ke=mn();break;case A:Ke=mn()/3;break;case x:Ke=(nn-Lt)/6048e5;break;case g:Ke=(nn-Lt)/864e5;break;case f:Ke=nn/s;break;case i:Ke=nn/r;break;case c:Ke=nn/n;break;default:Ke=nn}return He?Ke:pe.a(Ke)},Ee.daysInMonth=function(){return this.endOf(w).$D},Ee.$locale=function(){return le[this.$L]},Ee.locale=function(xe,ke){if(!xe)return this.$L;var He=this.clone(),Ke=se(xe,ke,!0);return Ke&&(He.$L=Ke),He},Ee.clone=function(){return pe.w(this.$d,this)},Ee.toDate=function(){return new Date(this.valueOf())},Ee.toJSON=function(){return this.isValid()?this.toISOString():null},Ee.toISOString=function(){return this.$d.toISOString()},Ee.toString=function(){return this.$d.toUTCString()},Ce})(),Se=be.prototype;return ie.prototype=Se,[["$ms",o],["$s",c],["$m",i],["$H",f],["$W",g],["$M",w],["$y",C],["$D",F]].forEach((function(Ce){Se[Ce[1]]=function(Ee){return this.$g(Ee,Ce[0],Ce[1])}})),ie.extend=function(Ce,Ee){return Ce.$i||(Ce(Ee,be,ie),Ce.$i=!0),ie},ie.locale=se,ie.isDayjs=ve,ie.unix=function(Ce){return ie(1e3*Ce)},ie.en=le[ee],ie.Ls=le,ie.p={},ie}))})(BA)),BA.exports}var ebe=Q1e();const Jd=ih(ebe),Cc="N/A",tbe="var(--text-darkest)",Zct={none:0,snow:1,mix:2,rain:3},W2={unknown:-1,notAvailable:0,open:1,temporarilyClosed:2,closed:3,summerOperations:4},Kct={high:"#dc3545"};function Jct(e,t=3){const n=e[e.length-1].display_at,r=Jd.utc(n);for(let s=0;s<t;s+=1){const o=r.add(s+1,"day");e.push({display_at:`${o.format("YYYY-MM-DDThh:mm:ss")}Z`,display_at_local_label:o.format("ddd D")})}}function dN(e,t={}){if(Object.keys(t).length===0)return e;const[n,r=""]=String(e).split("?"),s=new URLSearchParams(r);return Object.entries(t).forEach(([o,c])=>s.set(o,c)),`${n}?${s.toString()}`}function Qct(e,t){return t?.is_custom?dN(e,{is_custom:!0}):e}function eut(e,t){return t?dN(e,{in_app_view:!0}):e}function tut(e=[],t=[]){return e.filter(n=>!t.includes(n)).concat(t.filter(n=>!e.includes(n))).length>0}const Qj=(e,t="id")=>e.reduce((n,r)=>(n[r[t]]=r,n),{});function nut(e){return window?.getComputedStyle(document.body)?.getPropertyValue(e)}function rut(e,t=!1){return e==="imperial"?t?"'":"ft":"m"}function iut(e,t){const{shortname:n,slug:r,type_id:s}=e,o=t.map(({id:c})=>c).includes(s);return`/location/${r||n}/${o?"snow-summary":"weather"}`}function nbe(e,t=!1){return e==="imperial"?t?'"':"in":"mm"}function rbe(e,t=!1){return["imperial","us","uk"].includes(e)?t?'"':"in":"cm"}function ibe(e){return["imperial","us"].includes(e)?"F":"C"}function sbe(e){return["imperial","us"].includes(e)?"mph":"kmh"}function sut(e){const t=e.reduce((s,o)=>(s[o]=(s[o]||0)+1,s),{}),n=Math.max(...Object.values(t));if(n===1)return null;const r=Object.keys(t).filter(s=>t[s]===n)[0];return Number(r)}function out(e,t=!0){if(typeof e=="number"){const n=Math.round(e*100/10)*10;return t?`${n}%`:`${n}`}return Cc}function obe(e,t){if(typeof e=="number"){const n=t==="metric"?"m":"ft";return`${e.toLocaleString("en-US")} ${n}`}return Cc}function aut(e,t){if(typeof e=="number"){const n=Math.round(e/100)*100;return obe(n,t)}return Cc}function lut(e,t){return typeof Intl<"u"&&Intl.DateTimeFormat?Jd.utc(e).tz(t).format("ddd MMM DD h:mma z"):Cc}function cut(e){return typeof e!="number"?Cc:typeof Intl<"u"&&Intl.NumberFormat?Intl.NumberFormat("en-us").format(e):e}function uut(e){return typeof e!="number"?Cc:Math.round(e)===0?"0":`${Math.round(e)}:1`}function dut(e,t,n=!1,r={}){return typeof e=="number"?`${e.toLocaleString("en-US",r)}${rbe(t,n)}`:Cc}function hN(e,t=!0,n={}){if(typeof e!="number")return Cc;if(typeof Intl<"u"&&Intl.NumberFormat){const s=Intl.NumberFormat("en-us",{style:"percent",...n}).format(e);return t?s:s.replace("%","")}const r=t?"%":"";return`${(e*100).toFixed(0)}${r}`}function d_(e,t){const n=`${e}e${t}`;return+`${Math.round(n)}e-${t}`}function hut(e,t="imperial",n=!1){if(typeof e!="number")return Cc;const r=Number(d_(e,2)).toFixed(2);return n?`${r}${nbe(t,n)}`:String(r)}function fut(e){if(typeof e=="number"){const t=Math.round(e*100/5)*5;return hN(t/100)}return Cc}function put(e,t=!0){if(typeof e=="number"){if(e<1)return hN(e,t);const n=Math.round(e);return t?`${n}%`:String(n)}return Cc}function mut(e,t){return typeof e=="number"?`${Math.round(e)} ${ibe(t)}`:Cc}function gut(e,t="imperial",n=!0,r=""){if(typeof e=="number"){const s=Math.round(e/5)*5;return s===0?"Calm":n?`${r}${s} ${sbe(t)}`:`${r}${s}`}return Cc}function fN(e,t){return e?.[t]||e?.level?.[t]||tbe}function _ut(e){return fN(e,"color_foreground")}function yut(e){return fN(e,"color_primary")}function vut(e){return fN(e,"description")}function but(e){return hN(e?.percent_open)}function xut(e){return e?.status_id===W2.temporarilyClosed?"Temporarily Closed":e?.status_id===W2.closed?"Closed":""}function oQ(e,t){return e?.length?e[e.length-1]:t}function wut(e=[],t={}){return[...e].reverse().find(r=>r.precip_snow!==null)||t}function Sut(e){const{precip_snow:t}=oQ(e,{});return typeof t=="number"?Math.round(t):void 0}function e0(e){const t=`url(${e})`;return{"-webkit-mask-image":t,"-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat",maskImage:t,maskPosition:"center",maskRepeat:"no-repeat"}}function Eut(e){const{error:t,messages:n}=e;if(t){const r=new Error(t);throw r.messages=n?.length>0?n:["Something went wrong. Please try again."],r}}function Tut(e){return typeof e=="number"?Math.round(e):void 0}function Mut(e){return e<33.75?"N":e>=33.75&&e<78.75?"NE":e>=78.75&&e<123.75?"E":e>=123.75&&e<168.75?"SE":e>=168.75&&e<213.75?"S":e>=213.75&&e<258.75?"SW":e>=258.75&&e<303.75?"W":e>=303.75&&e<348.75?"NW":(e>=348.75,"N")}function Aut(e){const{notAvailable:t,unknown:n}=W2,{resort_report:r}=e,s=[t,n];return!!r&&e.has_resort_report&&s.includes(r?.status_id)===!1}function Cut(e){if(e?.status_id){const{temporarilyClosed:t,closed:n}=W2;return[t,n].includes(e.status_id)}}function Iut(e){if(e?.status_id){const{temporarilyClosed:t,closed:n}=W2;return[t,n].includes(e.status_id)===!1}}function abe(e,t){return t[e]?.is_estimate}function Put(e,t){const{source_id:n}=oQ(e.history_snow_daily,{});return abe(n,t)}function Out(e){const t=Jd().utc(),n=Jd(e);return t.diff(n,"days")>=1}function Dut(e){return e==="metric"}function Rut(e){return e?.id>0}function eU(){return window.matchMedia("(max-width: 767px)").matches}function tU(){return window.matchMedia("(min-width: 992px)").matches}function lbe({src:e,innerText:t}){return new Promise((n,r)=>{const s=document.createElement("script");s.async=!0,t&&(window.resolveLoadScript=()=>n(),s.innerText=`${t}; window.resolveLoadScript(); delete window.resolveLoadScript;`),e&&(s.onload=()=>{n()},s.onerror=o=>{r(o)},s.src=e),document.head.appendChild(s)})}function kut(e){const{data:t,message:n,statusCode:r,statusMessage:s,stack:o}=e||{};return{data:t,fatal:!0,message:t?.messages?.length?t.messages.join(" "):n,statusCode:r,statusMessage:s,stack:o}}function Lut(e){const t=window?.history?.state?.current?{...window.history.state,current:e}:null;window.history.replaceState(t,"",e)}function Nut(e){const t=[{src:e,type:"image"}],n={autoFocus:!1,infinite:!1};window.Fancybox.show(t,n)}function cbe(e,t="/user/favorites"){const n=no().public.baseUrl.toLowerCase(),r=decodeURIComponent(e),s=new URL(r,n);return s.origin===n||s.protocol==="opensnow:"?s.href.replace(n,""):t}const pl={disclaimer:"d",error:"e",info:"i",membership:"m",warning:"w"},ube={__name:"Banner",props:{action:{type:String,default:""},action_url:{type:String,default:""},icon:{type:[String,Array],default:null},iconClass:{type:[String,Array],default:null},is_dismissable:{type:Boolean,default:!0},message:{type:String,default:""},type:{type:String,default:"m",validator(e){return Object.values(pl).includes(e)}}},emits:["dismiss"],setup(e,{expose:t,emit:n}){t();const r=e,s=n,o=Ct(()=>r.type===pl.disclaimer?Tr.help:Tr.bannerBuyNow),c=Ct(()=>r.type===pl.disclaimer?"text-regular-color":r.type===pl.warning?"tw-text-black":"tw-text-white"),i=Ct(()=>eU()),f=Ct(()=>["tw-relative","tw-p-4 tw-rounded-lg","tw-text-base tw-font-medium tw-text-center tw-text-balance",{[pl.disclaimer]:"tw-border-2 disclaimer",[pl.info]:"tw-text-white tw-border-2 background-color-light-blue border-color-saturated-blue-50",[pl.error]:"tw-text-white tw-border-2 background-color-light-red border-color-saturated-red",[pl.membership]:"tw-text-white tw-border-2 background-color-saturated-teal border-color-dark-teal",[pl.warning]:"tw-text-black tw-border-2 background-color-light-orange border-color-saturated-orange"}[r.type]]),g=Ct(()=>{const w=["tw-mr-1"];return Array.isArray(r.iconClass)?w.push(...r.iconClass):typeof r.iconClass=="string"&&w.push(r.iconClass),w}),x={bannerTypes:pl,props:r,$emit:s,actionButtonType:o,buttonClass:c,buttonDisplayBlock:i,classNames:f,iconClassNames:g,ButtonTypes:Tr,get isScreenSm(){return eU}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}};function dbe(e,t,n,r,s,o){const c=sQ,i=eo("font-awesome-icon"),f=RS;return ln(),Nn("p",{class:Jn(r.classNames)},[n.is_dismissable?(ln(),Zr(c,{key:0,"button-class":r.buttonClass,onClick:t[0]||(t[0]=g=>r.$emit("dismiss"))},null,8,["button-class"])):fi("",!0),t[1]||(t[1]=Rr()),n.icon?(ln(),Zr(i,{key:1,class:Jn(r.iconClassNames),icon:n.icon},null,8,["class","icon"])):fi("",!0),Rr(" "+is(n.message)+" ",1),n.action&&n.action_url?(ln(),Zr(f,{key:2,class:"tw-block md:tw-inline-block tw-mt-2 md:tw-mt-0 md:tw-ml-2","display-block":r.buttonDisplayBlock,to:n.action_url,type:r.actionButtonType},{default:Dr(()=>[Rr(is(n.action),1)]),_:1},8,["display-block","to","type"])):fi("",!0)],2)}const Fut=Qo(ube,[["render",dbe],["__file","Banner.vue"]]);/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let aQ;const kS=e=>aQ=e,lQ=Symbol();function nL(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Wd;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Wd||(Wd={}));const S0=typeof window<"u",nU=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null};function hbe(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function pN(e,t,n){const r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){dQ(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function cQ(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function $A(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}const VA=typeof navigator=="object"?navigator:{userAgent:""},uQ=/Macintosh/.test(VA.userAgent)&&/AppleWebKit/.test(VA.userAgent)&&!/Safari/.test(VA.userAgent),dQ=S0?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!uQ?fbe:"msSaveOrOpenBlob"in VA?pbe:mbe:()=>{};function fbe(e,t="download",n){const r=document.createElement("a");r.download=t,r.rel="noopener",typeof e=="string"?(r.href=e,r.origin!==location.origin?cQ(r.href)?pN(e,t,n):(r.target="_blank",$A(r)):$A(r)):(r.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(r.href)},4e4),setTimeout(function(){$A(r)},0))}function pbe(e,t="download",n){if(typeof e=="string")if(cQ(e))pN(e,t,n);else{const r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){$A(r)})}else navigator.msSaveOrOpenBlob(hbe(e,n),t)}function mbe(e,t,n,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return pN(e,t,n);const s=e.type==="application/octet-stream",o=/constructor/i.test(String(nU.HTMLElement))||"safari"in nU,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&o||uQ)&&typeof FileReader<"u"){const i=new FileReader;i.onloadend=function(){let f=i.result;if(typeof f!="string")throw r=null,new Error("Wrong reader.result type");f=c?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location.assign(f),r=null},i.readAsDataURL(e)}else{const i=URL.createObjectURL(e);r?r.location.assign(i):location.href=i,r=null,setTimeout(function(){URL.revokeObjectURL(i)},4e4)}}function ia(e,t){const n=" "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(n,t):t==="error"?console.error(n):t==="warn"?console.warn(n):console.log(n)}function mN(e){return"_a"in e&&"install"in e}function hQ(){if(!("clipboard"in navigator))return ia("Your browser doesn't support the Clipboard API","error"),!0}function fQ(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(ia('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function gbe(e){if(!hQ())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),ia("Global state copied to clipboard.")}catch(t){if(fQ(t))return;ia("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function _be(e){if(!hQ())try{pQ(e,JSON.parse(await navigator.clipboard.readText())),ia("Global state pasted from clipboard.")}catch(t){if(fQ(t))return;ia("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function ybe(e){try{dQ(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){ia("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let Th;function vbe(){Th||(Th=document.createElement("input"),Th.type="file",Th.accept=".json");function e(){return new Promise((t,n)=>{Th.onchange=async()=>{const r=Th.files;if(!r)return t(null);const s=r.item(0);return t(s?{text:await s.text(),file:s}:null)},Th.oncancel=()=>t(null),Th.onerror=n,Th.click()})}return e}async function bbe(e){try{const n=await vbe()();if(!n)return;const{text:r,file:s}=n;pQ(e,JSON.parse(r)),ia(`Global state imported from "${s.name}".`)}catch(t){ia("Failed to import the state from JSON. Check the console for more details.","error"),console.error(t)}}function pQ(e,t){for(const n in t){const r=e.state.value[n];r?Object.assign(r,t[n]):e.state.value[n]=t[n]}}function Fu(e){return{_custom:{display:e}}}const mQ=" Pinia (root)",jA="_root";function xbe(e){return mN(e)?{id:jA,label:mQ}:{id:e.$id,label:e.$id}}function wbe(e){if(mN(e)){const n=Array.from(e._s.keys()),r=e._s;return{state:n.map(o=>({editable:!0,key:o,value:e.state.value[o]})),getters:n.filter(o=>r.get(o)._getters).map(o=>{const c=r.get(o);return{editable:!1,key:o,value:c._getters.reduce((i,f)=>(i[f]=c[f],i),{})}})}}const t={state:Object.keys(e.$state).map(n=>({editable:!0,key:n,value:e.$state[n]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(n=>({editable:!1,key:n,value:e[n]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(n=>({editable:!0,key:n,value:e[n]}))),t}function Sbe(e){return e?Array.isArray(e)?e.reduce((t,n)=>(t.keys.push(n.key),t.operations.push(n.type),t.oldValue[n.key]=n.oldValue,t.newValue[n.key]=n.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:Fu(e.type),key:Fu(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function Ebe(e){switch(e){case Wd.direct:return"mutation";case Wd.patchFunction:return"$patch";case Wd.patchObject:return"$patch";default:return"unknown"}}let a0=!0;const UA=[],h_="pinia:mutations",Ba="pinia",{assign:Tbe}=Object,sI=e=>" "+e;function Mbe(e,t){oN({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:UA,app:e},n=>{typeof n.now!="function"&&ia("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addTimelineLayer({id:h_,label:"Pinia ",color:15064968}),n.addInspector({id:Ba,label:"Pinia ",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{gbe(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await _be(t),n.sendInspectorTree(Ba),n.sendInspectorState(Ba)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{ybe(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await bbe(t),n.sendInspectorTree(Ba),n.sendInspectorState(Ba)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:'Reset the state (with "$reset")',action:r=>{const s=t._s.get(r);s?typeof s.$reset!="function"?ia(`Cannot reset "${r}" store because it doesn't have a "$reset" method implemented.`,"warn"):(s.$reset(),ia(`Store "${r}" reset.`)):ia(`Cannot reset "${r}" store because it wasn't found.`,"warn")}}]}),n.on.inspectComponent((r,s)=>{const o=r.componentInstance&&r.componentInstance.proxy;if(o&&o._pStores){const c=r.componentInstance.proxy._pStores;Object.values(c).forEach(i=>{r.instanceData.state.push({type:sI(i.$id),key:"state",editable:!0,value:i._isOptionsAPI?{_custom:{value:gi(i.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>i.$reset()}]}}:Object.keys(i.$state).reduce((f,g)=>(f[g]=i.$state[g],f),{})}),i._getters&&i._getters.length&&r.instanceData.state.push({type:sI(i.$id),key:"getters",editable:!1,value:i._getters.reduce((f,g)=>{try{f[g]=i[g]}catch(x){f[g]=x}return f},{})})})}}),n.on.getInspectorTree(r=>{if(r.app===e&&r.inspectorId===Ba){let s=[t];s=s.concat(Array.from(t._s.values())),r.rootNodes=(r.filter?s.filter(o=>"$id"in o?o.$id.toLowerCase().includes(r.filter.toLowerCase()):mQ.toLowerCase().includes(r.filter.toLowerCase())):s).map(xbe)}}),globalThis.$pinia=t,n.on.getInspectorState(r=>{if(r.app===e&&r.inspectorId===Ba){const s=r.nodeId===jA?t:t._s.get(r.nodeId);if(!s)return;s&&(r.nodeId!==jA&&(globalThis.$store=gi(s)),r.state=wbe(s))}}),n.on.editInspectorState((r,s)=>{if(r.app===e&&r.inspectorId===Ba){const o=r.nodeId===jA?t:t._s.get(r.nodeId);if(!o)return ia(`store "${r.nodeId}" not found`,"error");const{path:c}=r;mN(o)?c.unshift("state"):(c.length!==1||!o._customProperties.has(c[0])||c[0]in o.$state)&&c.unshift("$state"),a0=!1,r.set(o,c,r.state.value),a0=!0}}),n.on.editComponentState(r=>{if(r.type.startsWith("")){const s=r.type.replace(/^\s*/,""),o=t._s.get(s);if(!o)return ia(`store "${s}" not found`,"error");const{path:c}=r;if(c[0]!=="state")return ia(`Invalid path for store "${s}":
${c}
Only state can be modified.`);c[0]="$state",a0=!1,r.set(o,c,r.state.value),a0=!0}})})}function Abe(e,t){UA.includes(sI(t.$id))||UA.push(sI(t.$id)),oN({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:UA,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},n=>{const r=typeof n.now=="function"?n.now.bind(n):Date.now;t.$onAction(({after:c,onError:i,name:f,args:g})=>{const x=gQ++;n.addTimelineEvent({layerId:h_,event:{time:r(),title:" "+f,subtitle:"start",data:{store:Fu(t.$id),action:Fu(f),args:g},groupId:x}}),c(w=>{cm=void 0,n.addTimelineEvent({layerId:h_,event:{time:r(),title:" "+f,subtitle:"end",data:{store:Fu(t.$id),action:Fu(f),args:g,result:w},groupId:x}})}),i(w=>{cm=void 0,n.addTimelineEvent({layerId:h_,event:{time:r(),logType:"error",title:" "+f,subtitle:"end",data:{store:Fu(t.$id),action:Fu(f),args:g,error:w},groupId:x}})})},!0),t._customProperties.forEach(c=>{Hr(()=>fn(t[c]),(i,f)=>{n.notifyComponentUpdate(),n.sendInspectorState(Ba),a0&&n.addTimelineEvent({layerId:h_,event:{time:r(),title:"Change",subtitle:c,data:{newValue:i,oldValue:f},groupId:cm}})},{deep:!0})}),t.$subscribe(({events:c,type:i},f)=>{if(n.notifyComponentUpdate(),n.sendInspectorState(Ba),!a0)return;const g={time:r(),title:Ebe(i),data:Tbe({store:Fu(t.$id)},Sbe(c)),groupId:cm};i===Wd.patchFunction?g.subtitle="":i===Wd.patchObject?g.subtitle="":c&&!Array.isArray(c)&&(g.subtitle=c.type),c&&(g.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:c}}),n.addTimelineEvent({layerId:h_,event:g})},{detached:!0,flush:"sync"});const s=t._hotUpdate;t._hotUpdate=X_(c=>{s(c),n.addTimelineEvent({layerId:h_,event:{time:r(),title:" "+t.$id,subtitle:"HMR update",data:{store:Fu(t.$id),info:Fu("HMR update")}}}),n.notifyComponentUpdate(),n.sendInspectorTree(Ba),n.sendInspectorState(Ba)});const{$dispose:o}=t;t.$dispose=()=>{o(),n.notifyComponentUpdate(),n.sendInspectorTree(Ba),n.sendInspectorState(Ba),n.getSettings().logStoreChanges&&ia(`Disposed "${t.$id}" store `)},n.notifyComponentUpdate(),n.sendInspectorTree(Ba),n.sendInspectorState(Ba),n.getSettings().logStoreChanges&&ia(`"${t.$id}" store installed `)})}let gQ=0,cm;function rU(e,t,n){const r=t.reduce((s,o)=>(s[o]=gi(e)[o],s),{});for(const s in r)e[s]=function(){const o=gQ,c=n?new Proxy(e,{get(...f){return cm=o,Reflect.get(...f)},set(...f){return cm=o,Reflect.set(...f)}}):e;cm=o;const i=r[s].apply(c,arguments);return cm=void 0,i}}function Cbe({app:e,store:t,options:n}){if(!t.$id.startsWith("__hot:")){if(t._isOptionsAPI=!!n.state,!t._p._testing){rU(t,Object.keys(n.actions),t._isOptionsAPI);const r=t._hotUpdate;gi(t)._hotUpdate=function(s){r.apply(this,arguments),rU(t,Object.keys(s._hmrPayload.actions),!!t._isOptionsAPI)}}Abe(e,t)}}function Ibe(){const e=M3(!0),t=e.run(()=>yr({}));let n=[],r=[];const s=X_({install(o){kS(s),s._a=o,o.provide(lQ,s),o.config.globalProperties.$pinia=s,S0&&Mbe(o,s),r.forEach(c=>n.push(c)),r=[]},use(o){return this._a?n.push(o):r.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return S0&&typeof Proxy<"u"&&s.use(Cbe),s}const _Q=()=>{};function iU(e,t,n,r=_Q){e.push(t);const s=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),r())};return!n&&my()&&F0(s),s}function Hv(e,...t){e.slice().forEach(n=>{n(...t)})}const Pbe=e=>e(),sU=Symbol(),BD=Symbol();function rL(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];nL(s)&&nL(r)&&e.hasOwnProperty(n)&&!Fi(r)&&!Ku(r)?e[n]=rL(s,r):e[n]=r}return e}const Obe=Symbol();function Dbe(e){return!nL(e)||!e.hasOwnProperty(Obe)}const{assign:Ru}=Object;function Rbe(e){return!!(Fi(e)&&e.effect)}function kbe(e,t,n,r){const{state:s,actions:o,getters:c}=t,i=n.state.value[e];let f;function g(){i||(n.state.value[e]=s?s():{});const x=I6(n.state.value[e]);return Ru(x,o,Object.keys(c||{}).reduce((w,A)=>(w[A]=X_(Ct(()=>{kS(n);const C=n._s.get(e);return c[A].call(C,C)})),w),{}))}return f=yQ(e,g,t,n,r,!0),f}function yQ(e,t,n={},r,s,o){let c;const i=Ru({actions:{}},n),f={deep:!0};let g,x,w=[],A=[],C;const F=r.state.value[e];!o&&!F&&(r.state.value[e]={});const z=yr({});let j;function V(ie){let pe;g=x=!1,typeof ie=="function"?(ie(r.state.value[e]),pe={type:Wd.patchFunction,storeId:e,events:C}):(rL(r.state.value[e],ie),pe={type:Wd.patchObject,payload:ie,storeId:e,events:C});const be=j=Symbol();es().then(()=>{j===be&&(g=!0)}),x=!0,Hv(w,pe,r.state.value[e])}const Y=o?function(){const{state:pe}=n,be=pe?pe():{};this.$patch(Se=>{Ru(Se,be)})}:_Q;function te(){c.stop(),w=[],A=[],r._s.delete(e)}const J=(ie,pe="")=>{if(sU in ie)return ie[BD]=pe,ie;const be=function(){kS(r);const Se=Array.from(arguments),Ce=[],Ee=[];function xe(Ke){Ce.push(Ke)}function ke(Ke){Ee.push(Ke)}Hv(A,{args:Se,name:be[BD],store:oe,after:xe,onError:ke});let He;try{He=ie.apply(this&&this.$id===e?this:oe,Se)}catch(Ke){throw Hv(Ee,Ke),Ke}return He instanceof Promise?He.then(Ke=>(Hv(Ce,Ke),Ke)).catch(Ke=>(Hv(Ee,Ke),Promise.reject(Ke))):(Hv(Ce,He),He)};return be[sU]=!0,be[BD]=pe,be},ee=X_({actions:{},getters:{},state:[],hotState:z}),le={_p:r,$id:e,$onAction:iU.bind(null,A),$patch:V,$reset:Y,$subscribe(ie,pe={}){const be=iU(w,ie,pe.detached,()=>Se()),Se=c.run(()=>Hr(()=>r.state.value[e],Ce=>{(pe.flush==="sync"?x:g)&&ie({storeId:e,type:Wd.direct,events:C},Ce)},Ru({},f,pe)));return be},$dispose:te},oe=Bo(S0?Ru({_hmrPayload:ee,_customProperties:X_(new Set)},le):le);r._s.set(e,oe);const se=(r._a&&r._a.runWithContext||Pbe)(()=>r._e.run(()=>(c=M3()).run(()=>t({action:J}))));for(const ie in se){const pe=se[ie];if(Fi(pe)&&!Rbe(pe)||Ku(pe))o||(F&&Dbe(pe)&&(Fi(pe)?pe.value=F[ie]:rL(pe,F[ie])),r.state.value[e][ie]=pe);else if(typeof pe=="function"){const be=J(pe,ie);se[ie]=be,i.actions[ie]=pe}}if(Ru(oe,se),Ru(gi(oe),se),Object.defineProperty(oe,"$state",{get:()=>r.state.value[e],set:ie=>{V(pe=>{Ru(pe,ie)})}}),S0){const ie={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(pe=>{Object.defineProperty(oe,pe,Ru({value:oe[pe]},ie))})}return r._p.forEach(ie=>{if(S0){const pe=c.run(()=>ie({store:oe,app:r._a,pinia:r,options:i}));Object.keys(pe||{}).forEach(be=>oe._customProperties.add(be)),Ru(oe,pe)}else Ru(oe,c.run(()=>ie({store:oe,app:r._a,pinia:r,options:i})))}),F&&o&&n.hydrate&&n.hydrate(oe.$state,F),g=!0,x=!0,oe}/*! #__NO_SIDE_EFFECTS__ */function Jm(e,t,n){let r,s;const o=typeof t=="function";typeof e=="string"?(r=e,s=o?n:t):(s=e,r=e.id);function c(i,f){const g=Zm();return i=i||(g?bs(lQ,null):null),i&&kS(i),i=aQ,i._s.has(r)||(o?yQ(r,t,s,i):kbe(r,s,i)),i._s.get(r)}return c.$id=r,c}let Lbe="Store";function zut(...e){return e.reduce((t,n)=>(t[n.$id+Lbe]=function(){return n(this.$pinia)},t),{})}function Nbe(e,t){return Array.isArray(t)?t.reduce((n,r)=>(n[r]=function(){return e(this.$pinia)[r]},n),{}):Object.keys(t).reduce((n,r)=>(n[r]=function(){const s=e(this.$pinia),o=t[r];return typeof o=="function"?o.call(this,s):s[o]},n),{})}function HA(e,t){return Array.isArray(t)?t.reduce((n,r)=>(n[r]=function(...s){return e(this.$pinia)[r](...s)},n),{}):Object.keys(t).reduce((n,r)=>(n[r]=function(...s){return e(this.$pinia)[t[r]](...s)},n),{})}function But(e){{const t=gi(e),n={};for(const r in t){const s=t[r];s.effect?n[r]=Ct({get:()=>e[r],set(o){e[r]=o}}):(Fi(s)||Ku(s))&&(n[r]=vl(e,r))}return n}}function gN(e){return my()?(F0(e),!0):!1}const $D=new WeakMap,Fbe=(...e)=>{var t;const n=e[0],r=(t=zs())==null?void 0:t.proxy;if(r==null&&!Zm())throw new Error("injectLocal must be called in setup");return r&&$D.has(r)&&n in $D.get(r)?$D.get(r)[n]:bs(...e)},vQ=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const zbe=e=>e!=null,Bbe=Object.prototype.toString,$be=e=>Bbe.call(e)==="[object Object]",Ua=()=>{},Vbe=jbe();function jbe(){var e,t;return vQ&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function _N(e,t){function n(...r){return new Promise((s,o)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(s).catch(o)})}return n}const bQ=e=>e();function Ube(e,t={}){let n,r,s=Ua;const o=f=>{clearTimeout(f),s(),s=Ua};let c;return f=>{const g=Xn(e),x=Xn(t.maxWait);return n&&o(n),g<=0||x!==void 0&&x<=0?(r&&(o(r),r=null),Promise.resolve(f())):new Promise((w,A)=>{s=t.rejectOnCancel?A:w,c=f,x&&!r&&(r=setTimeout(()=>{n&&o(n),r=null,w(c())},x)),n=setTimeout(()=>{r&&o(r),r=null,w(f())},g)})}}function Hbe(...e){let t=0,n,r=!0,s=Ua,o,c,i,f,g;!Fi(e[0])&&typeof e[0]=="object"?{delay:c,trailing:i=!0,leading:f=!0,rejectOnCancel:g=!1}=e[0]:[c,i=!0,f=!0,g=!1]=e;const x=()=>{n&&(clearTimeout(n),n=void 0,s(),s=Ua)};return A=>{const C=Xn(c),F=Date.now()-t,z=()=>o=A();return x(),C<=0?(t=Date.now(),z()):(F>C&&(f||!r)?(t=Date.now(),z()):i&&(o=new Promise((j,V)=>{s=g?V:j,n=setTimeout(()=>{t=Date.now(),r=!0,j(z()),x()},Math.max(0,C-F))})),!f&&!n&&(n=setTimeout(()=>r=!0,C)),r=!1,o)}}function Wbe(e=bQ,t={}){const{initialState:n="active"}=t,r=qbe(n==="active");function s(){r.value=!1}function o(){r.value=!0}const c=(...i)=>{r.value&&e(...i)};return{isActive:q_(r),pause:s,resume:o,eventFilter:c}}function Gbe(e,t){var n;if(typeof e=="number")return e+t;const r=((n=e.match(/^-?\d+\.?\d*/))==null?void 0:n[0])||"",s=e.slice(r.length),o=Number.parseFloat(r)+t;return Number.isNaN(o)?e:o+s}function Jw(e){return e.endsWith("rem")?Number.parseFloat(e)*16:Number.parseFloat(e)}function Ybe(e){return zs()}function WA(e){return Array.isArray(e)?e:[e]}function qbe(...e){if(e.length!==1)return vl(...e);const t=e[0];return typeof t=="function"?q_(D3(()=>({get:t,set:Ua}))):yr(t)}function Xbe(e,t=200,n={}){return _N(Ube(t,n),e)}function Zbe(e,t=200,n=!1,r=!0,s=!1){return _N(Hbe(t,n,r,s),e)}function Kbe(e,t,n={}){const{eventFilter:r=bQ,...s}=n;return Hr(e,_N(r,t),s)}function Jbe(e,t,n={}){const{eventFilter:r,initialState:s="active",...o}=n,{eventFilter:c,pause:i,resume:f,isActive:g}=Wbe(r,{initialState:s});return{stop:Kbe(e,t,{...o,eventFilter:c}),pause:i,resume:f,isActive:g}}function yN(e,t=!0,n){Ybe()?ua(e,n):t?e():es(e)}function Qbe(e,t,n){return Hr(e,t,{...n,immediate:!0})}function exe(e,t,n){const r=Hr(e,(...s)=>(es(()=>r()),t(...s)),n);return r}const id=vQ?window:void 0;function qu(e){var t;const n=Xn(e);return(t=n?.$el)!=null?t:n}function Nd(...e){const t=[],n=()=>{t.forEach(i=>i()),t.length=0},r=(i,f,g,x)=>(i.addEventListener(f,g,x),()=>i.removeEventListener(f,g,x)),s=Ct(()=>{const i=WA(Xn(e[0])).filter(f=>f!=null);return i.every(f=>typeof f!="string")?i:void 0}),o=Qbe(()=>{var i,f;return[(f=(i=s.value)==null?void 0:i.map(g=>qu(g)))!=null?f:[id].filter(g=>g!=null),WA(Xn(s.value?e[1]:e[0])),WA(fn(s.value?e[2]:e[1])),Xn(s.value?e[3]:e[2])]},([i,f,g,x])=>{if(n(),!i?.length||!f?.length||!g?.length)return;const w=$be(x)?{...x}:x;t.push(...i.flatMap(A=>f.flatMap(C=>g.map(F=>r(A,C,F,w)))))},{flush:"post"}),c=()=>{o(),n()};return gN(n),c}let oU=!1;function aU(e,t,n={}){const{window:r=id,ignore:s=[],capture:o=!0,detectIframe:c=!1,controls:i=!1}=n;if(!r)return i?{stop:Ua,cancel:Ua,trigger:Ua}:Ua;if(Vbe&&!oU){oU=!0;const j={passive:!0};Array.from(r.document.body.children).forEach(V=>Nd(V,"click",Ua,j)),Nd(r.document.documentElement,"click",Ua,j)}let f=!0;const g=j=>Xn(s).some(V=>{if(typeof V=="string")return Array.from(r.document.querySelectorAll(V)).some(Y=>Y===j.target||j.composedPath().includes(Y));{const Y=qu(V);return Y&&(j.target===Y||j.composedPath().includes(Y))}});function x(j){const V=Xn(j);return V&&V.$.subTree.shapeFlag===16}function w(j,V){const Y=Xn(j),te=Y.$.subTree&&Y.$.subTree.children;return te==null||!Array.isArray(te)?!1:te.some(J=>J.el===V.target||V.composedPath().includes(J.el))}const A=j=>{const V=qu(e);if(j.target!=null&&!(!(V instanceof Element)&&x(e)&&w(e,j))&&!(!V||V===j.target||j.composedPath().includes(V))){if("detail"in j&&j.detail===0&&(f=!g(j)),!f){f=!0;return}t(j)}};let C=!1;const F=[Nd(r,"click",j=>{C||(C=!0,setTimeout(()=>{C=!1},0),A(j))},{passive:!0,capture:o}),Nd(r,"pointerdown",j=>{const V=qu(e);f=!g(j)&&!!(V&&!j.composedPath().includes(V))},{passive:!0}),c&&Nd(r,"blur",j=>{setTimeout(()=>{var V;const Y=qu(e);((V=r.document.activeElement)==null?void 0:V.tagName)==="IFRAME"&&!Y?.contains(r.document.activeElement)&&t(j)},0)},{passive:!0})].filter(Boolean),z=()=>F.forEach(j=>j());return i?{stop:z,cancel:()=>{f=!1},trigger:j=>{f=!0,A(j),f=!1}}:z}function txe(){const e=mo(!1),t=zs();return t&&ua(()=>{e.value=!0},t),e}function vN(e){const t=txe();return Ct(()=>(t.value,!!e()))}const nxe=Symbol("vueuse-ssr-width");function xQ(){const e=Zm()?Fbe(nxe,null):null;return typeof e=="number"?e:void 0}function __(e,t={}){const{window:n=id,ssrWidth:r=xQ()}=t,s=vN(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function"),o=mo(typeof r=="number"),c=mo(),i=mo(!1),f=g=>{i.value=g.matches};return yy(()=>{if(o.value){o.value=!s.value;const g=Xn(e).split(",");i.value=g.some(x=>{const w=x.includes("not all"),A=x.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),C=x.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let F=!!(A||C);return A&&F&&(F=r>=Jw(A[1])),C&&F&&(F=r<=Jw(C[1])),w?!F:F});return}s.value&&(c.value=n.matchMedia(Xn(e)),i.value=c.value.matches)}),Nd(c,"change",f,{passive:!0}),Ct(()=>i.value)}const $ut={xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400};function Vut(e,t={}){function n(C,F){let z=Xn(e[Xn(C)]);return F!=null&&(z=Gbe(z,F)),typeof z=="number"&&(z=`${z}px`),z}const{window:r=id,strategy:s="min-width",ssrWidth:o=xQ()}=t,c=typeof o=="number",i=c?mo(!1):{value:!0};c&&yN(()=>i.value=!!r);function f(C,F){return!i.value&&c?C==="min"?o>=Jw(F):o<=Jw(F):r?r.matchMedia(`(${C}-width: ${F})`).matches:!1}const g=C=>__(()=>`(min-width: ${n(C)})`,t),x=C=>__(()=>`(max-width: ${n(C)})`,t),w=Object.keys(e).reduce((C,F)=>(Object.defineProperty(C,F,{get:()=>s==="min-width"?g(F):x(F),enumerable:!0,configurable:!0}),C),{});function A(){const C=Object.keys(e).map(F=>[F,w[F],Jw(n(F))]).sort((F,z)=>F[2]-z[2]);return Ct(()=>C.filter(([,F])=>F.value).map(([F])=>F))}return Object.assign(w,{greaterOrEqual:g,smallerOrEqual:x,greater(C){return __(()=>`(min-width: ${n(C,.1)})`,t)},smaller(C){return __(()=>`(max-width: ${n(C,-.1)})`,t)},between(C,F){return __(()=>`(min-width: ${n(C)}) and (max-width: ${n(F,-.1)})`,t)},isGreater(C){return f("min",n(C,.1))},isGreaterOrEqual(C){return f("min",n(C))},isSmaller(C){return f("max",n(C,-.1))},isSmallerOrEqual(C){return f("max",n(C))},isInBetween(C,F){return f("min",n(C))&&f("max",n(F,-.1))},current:A,active(){const C=A();return Ct(()=>C.value.length===0?"":C.value.at(s==="min-width"?-1:0))}})}const bM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xM="__vueuse_ssr_handlers__",rxe=ixe();function ixe(){return xM in bM||(bM[xM]=bM[xM]||{}),bM[xM]}function sxe(e,t){return rxe[e]||t}function oxe(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const axe={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},lU="vueuse-storage";function lxe(e,t,n,r={}){var s;const{flush:o="pre",deep:c=!0,listenToStorageChanges:i=!0,writeDefaults:f=!0,mergeDefaults:g=!1,shallow:x,window:w=id,eventFilter:A,onError:C=pe=>{console.error(pe)},initOnMounted:F}=r,z=(x?mo:yr)(typeof t=="function"?t():t),j=Ct(()=>Xn(e));if(!n)try{n=sxe("getDefaultStorage",()=>{var pe;return(pe=id)==null?void 0:pe.localStorage})()}catch(pe){C(pe)}if(!n)return z;const V=Xn(t),Y=oxe(V),te=(s=r.serializer)!=null?s:axe[Y],{pause:J,resume:ee}=Jbe(z,()=>oe(z.value),{flush:o,deep:c,eventFilter:A});Hr(j,()=>se(),{flush:o}),w&&i&&yN(()=>{n instanceof Storage?Nd(w,"storage",se,{passive:!0}):Nd(w,lU,ie),F&&se()}),F||se();function le(pe,be){if(w){const Se={key:j.value,oldValue:pe,newValue:be,storageArea:n};w.dispatchEvent(n instanceof Storage?new StorageEvent("storage",Se):new CustomEvent(lU,{detail:Se}))}}function oe(pe){try{const be=n.getItem(j.value);if(pe==null)le(be,null),n.removeItem(j.value);else{const Se=te.write(pe);be!==Se&&(n.setItem(j.value,Se),le(be,Se))}}catch(be){C(be)}}function ve(pe){const be=pe?pe.newValue:n.getItem(j.value);if(be==null)return f&&V!=null&&n.setItem(j.value,te.write(V)),V;if(!pe&&g){const Se=te.read(be);return typeof g=="function"?g(Se,V):Y==="object"&&!Array.isArray(Se)?{...V,...Se}:Se}else return typeof be!="string"?be:te.read(be)}function se(pe){if(!(pe&&pe.storageArea!==n)){if(pe&&pe.key==null){z.value=V;return}if(!(pe&&pe.key!==j.value)){J();try{pe?.newValue!==te.write(z.value)&&(z.value=ve(pe))}catch(be){C(be)}finally{pe?es(ee):ee()}}}}function ie(pe){se(pe.detail)}return z}function jut(e,t,n={}){const{window:r=id,...s}=n;let o;const c=vN(()=>r&&"ResizeObserver"in r),i=()=>{o&&(o.disconnect(),o=void 0)},f=Ct(()=>{const w=Xn(e);return Array.isArray(w)?w.map(A=>qu(A)):[qu(w)]}),g=Hr(f,w=>{if(i(),c.value&&r){o=new ResizeObserver(t);for(const A of w)A&&o.observe(A,s)}},{immediate:!0,flush:"post"}),x=()=>{i(),g()};return gN(x),{isSupported:c,stop:x}}function cxe(e,t,n={}){const{root:r,rootMargin:s="0px",threshold:o=0,window:c=id,immediate:i=!0}=n,f=vN(()=>c&&"IntersectionObserver"in c),g=Ct(()=>{const F=Xn(e);return WA(F).map(qu).filter(zbe)});let x=Ua;const w=mo(i),A=f.value?Hr(()=>[g.value,qu(r),w.value],([F,z])=>{if(x(),!w.value||!F.length)return;const j=new IntersectionObserver(t,{root:qu(z),rootMargin:s,threshold:o});F.forEach(V=>V&&j.observe(V)),x=()=>{j.disconnect(),x=Ua}},{immediate:i,flush:"post"}):Ua,C=()=>{x(),A(),w.value=!1};return gN(C),{isSupported:f,isActive:w,pause(){x(),w.value=!1},resume(){w.value=!0},stop:C}}function Uut(e,t={}){const{window:n=id,scrollTarget:r,threshold:s=0,rootMargin:o,once:c=!1}=t,i=mo(!1),{stop:f}=cxe(e,g=>{let x=i.value,w=0;for(const A of g)A.time>=w&&(w=A.time,x=A.isIntersecting);i.value=x,c&&exe(i,()=>{f()})},{root:r,window:n,threshold:s,rootMargin:Xn(o)});return i}const cU=1;function Hut(e,t={}){const{throttle:n=0,idle:r=200,onStop:s=Ua,onScroll:o=Ua,offset:c={left:0,right:0,top:0,bottom:0},eventListenerOptions:i={capture:!1,passive:!0},behavior:f="auto",window:g=id,onError:x=oe=>{console.error(oe)}}=t,w=mo(0),A=mo(0),C=Ct({get(){return w.value},set(oe){z(oe,void 0)}}),F=Ct({get(){return A.value},set(oe){z(void 0,oe)}});function z(oe,ve){var se,ie,pe,be;if(!g)return;const Se=Xn(e);if(!Se)return;(pe=Se instanceof Document?g.document.body:Se)==null||pe.scrollTo({top:(se=Xn(ve))!=null?se:F.value,left:(ie=Xn(oe))!=null?ie:C.value,behavior:Xn(f)});const Ce=((be=Se?.document)==null?void 0:be.documentElement)||Se?.documentElement||Se;C!=null&&(w.value=Ce.scrollLeft),F!=null&&(A.value=Ce.scrollTop)}const j=mo(!1),V=Bo({left:!0,right:!1,top:!0,bottom:!1}),Y=Bo({left:!1,right:!1,top:!1,bottom:!1}),te=oe=>{j.value&&(j.value=!1,Y.left=!1,Y.right=!1,Y.top=!1,Y.bottom=!1,s(oe))},J=Xbe(te,n+r),ee=oe=>{var ve;if(!g)return;const se=((ve=oe?.document)==null?void 0:ve.documentElement)||oe?.documentElement||qu(oe),{display:ie,flexDirection:pe,direction:be}=getComputedStyle(se),Se=be==="rtl"?-1:1,Ce=se.scrollLeft;Y.left=Ce<w.value,Y.right=Ce>w.value;const Ee=Math.abs(Ce*Se)<=(c.left||0),xe=Math.abs(Ce*Se)+se.clientWidth>=se.scrollWidth-(c.right||0)-cU;ie==="flex"&&pe==="row-reverse"?(V.left=xe,V.right=Ee):(V.left=Ee,V.right=xe),w.value=Ce;let ke=se.scrollTop;oe===g.document&&!ke&&(ke=g.document.body.scrollTop),Y.top=ke<A.value,Y.bottom=ke>A.value;const He=Math.abs(ke)<=(c.top||0),Ke=Math.abs(ke)+se.clientHeight>=se.scrollHeight-(c.bottom||0)-cU;ie==="flex"&&pe==="column-reverse"?(V.top=Ke,V.bottom=He):(V.top=He,V.bottom=Ke),A.value=ke},le=oe=>{var ve;if(!g)return;const se=(ve=oe.target.documentElement)!=null?ve:oe.target;ee(se),j.value=!0,J(oe),o(oe)};return Nd(e,"scroll",n?Zbe(le,n,!0,!1):le,i),yN(()=>{try{const oe=Xn(e);if(!oe)return;ee(oe)}catch(oe){x(oe)}}),Nd(e,"scrollend",te,i),{x:C,y:F,isScrolling:j,arrivedState:V,directions:Y,measure(){const oe=Xn(e);g&&oe&&ee(oe)}}}function iL(e){const t=__("(prefers-color-scheme: light)",e),n=__("(prefers-color-scheme: dark)",e);return Ct(()=>n.value?"dark":t.value?"light":"no-preference")}function uxe(e,t,n={}){const{window:r=id}=n;return lxe(e,t,r?.sessionStorage,n)}const wQ=e=>({getItem(t){try{const n=window?.[e]?.getItem(t);return JSON.parse(n)}catch{return}},removeItem(t){try{window?.[e]?.removeItem(t)}catch{}},setItem(t,n){try{window?.[e]?.setItem(t,JSON.stringify(n))}catch{}},clear(){try{window?.[e]?.clear()}catch{}}}),Qw=wQ("localStorage"),l0=wQ("sessionStorage");function Gc(e,t=1440*60*60){const n=no().public,{siteName:r="OpenSnow"}=n,s=`${r}-${e}`.toLowerCase(),c={domain:`${r.toLowerCase()}.com`,maxAge:t,path:"/"};return c1e(s,c)}const wM={stripe:"s",apple:"i",google:"a",test:"t"},_s=Jm("user",{state:()=>({canShowAuthContent:!1,computedTheme:null,banner:null,location:null,notifications:null,preferences:{theme:"system",units:"imperial"},user:null}),actions:{async fetchUser(e){try{const{$api:t}=Wn();let n;({user:n}=await t.get("/user")),this.saveUser(n);const{units:r}=n;this.savePreference({key:"units",value:r})}catch{this.saveUser(null)}this.setCanShowAuthContent(!0)},async getBanner(){const e=l0.getItem("bannerMessage"),t=Gc("bannerMessage");e?(this.banner=e,l0.removeItem("bannerMessage")):t.value&&(this.banner=t.value,t.value=null)},setBanner(e={}){const{banner:t,saveToCookie:n=!1,saveToSessionStorage:r=!1}=e;if(n||r)if(n){const s=Gc("bannerMessage",10);s.value=t}else l0.setItem("bannerMessage",t);else this.banner=t},removeBanner(){l0.removeItem("bannerMessage");const e=Gc("bannerMessage",10);e.value=null,this.banner=null},async setCacheKey(e){this.user?.cache_key&&(this.user.cache_key=e)},setCanShowAuthContent(e){this.canShowAuthContent=e},saveUser(e){return this.user=e,!0},getTheme(){let e="system";const t=new URL(window.location.href);if(t.searchParams.get("in_app_view")==="true")return e=t.searchParams.get("mode")||"light",e;const r=Qw.getItem("theme");return r||e},setTheme(e){if(e==="system"){Qw.removeItem("theme");const t=iL();this.computedTheme=t.value==="dark"?"dark":"light"}else Qw.setItem("theme",e),this.computedTheme=e;this.setPreference({theme:e})},async getUnits(){if(!this.isGuest)return;const e=Gc("units");return e.value&&(e.value!=="metric"&&e.value!=="imperial"&&(e.value="imperial"),this.setPreference({units:e.value})),e.value},async applyPromoCode(e){const{$api:t}=Wn(),n={promo_code:e};return await t.post("/user/settings/promo-code",void 0,n)},async makeUserSettingsPasswordRequest(e){const{$api:t}=Wn(),n={password:e};return(await t.post("/user/settings/password",void 0,n)).password_changed},savePreference({key:e,value:t}){e==="theme"||e==="units"?this.preferences[e]=t:this.user.preferences[e]=t},async setPreference(e){const{$api:t}=Wn(),[[n,r]]=Object.entries(e);if(this.savePreference({key:n,value:r}),n==="units")if(this.isGuest){const s=Gc("units",86400);s.value=r}else await t.post("/user/settings/units",void 0,{[n]:r});if(this.user?.preferences?.[n]!==void 0){const{preferences:s}=this.user;await t.post("/user/settings/preferences",void 0,{preferences:s})}},async updatePrivacy(e){const{$api:t}=Wn(),n={privacy:{data_collection:e}};return t.post("/user/privacy",void 0,n)},async getGroupMembers(){const{$api:e}=Wn();return(await e.get("/user/group")).members},async addGroupMember({email:e}){const{$api:t}=Wn();return(await t.post("/user/group",void 0,{email:e})).members},async removeGroupMember({id:e,type:t}){const{$api:n}=Wn();return(await n.delete(`/user/group/${e}`,{user_type:t})).members},async leaveGroup(){const{$api:e}=Wn(),t=await e.post("/user/group/leave",void 0,{});return this.saveUser(t.user),t.user},async getSubscriptionSettings(){const{$api:e}=Wn();return e.get("/user/settings/subscription")},async initStripePortalSession({targetPlanId:e=null,returnUrl:t=null,flow:n=null}={}){const{$api:r}=Wn(),s=e?{plan_id:e,flow:"switch-plan"}:{flow:n??"manage-subscription"};return(await r.post("/subscription/stripe/portal-session",void 0,{...s,return_url:t||window.location.href})).url}},getters:{addRelatedFavorites(e){return e?.user?.preferences?.favorites_add_related===!0},groupAccountType(){return"Subscription"},isAllAccess(e){return e?.user?.membership?.is_all_access===!0},isFree(e){return!e.isPayingCustomer},isChild(e){return e?.user?.membership?.is_group_child===!0},isGuest(e){return e.user===null},isParent(e){return e?.user?.membership?.is_group_owner===!0},isTrialing(e){return e?.user?.membership?.is_trialing===!0},isPayingCustomer(e){return e.isAllAccess&&!e.isTrialing&&!e.isChild},isStripeCustomer(e){return this.isPayingCustomer&&e?.user?.membership?.payment_type===wM.stripe},isAppleCustomer(e){return this.isPayingCustomer&&e?.user?.membership?.payment_type===wM.apple},isGoogleCustomer(e){return this.isPayingCustomer&&e?.user?.membership?.payment_type===wM.google},isTestCustomer(e){return this.isPayingCustomer&&e?.user?.membership?.payment_type===wM.test}}}),Pu=(e,t,n)=>{const r=e?.find(s=>s.alert_id===t);return r?{...r,level:n.getLevelForAlert(r)}:null},pc=(e,t)=>e?.forecast_alerts?.find(n=>n.slug===t),LS=Jm("meta",{state:()=>({countries:null,data_sources:null,defaults:null,favorite_list_types:null,forecast_alerts:null,location_types:null,location_types_maps:null,pricing:null,regions:null,season_passes:null}),actions:{async fetchLocationTypes(){const{$api:e}=Wn(),{location_types:t,location_types_maps:n}=await e.get("/meta/location-types");this.setProperty({location_types:t}),this.setProperty({location_types_maps:n})},async fetchPricing(){if(!this.pricing){const{$api:e}=Wn(),t=await e.get("/meta/pricing",{all:!0});this.setProperty({pricing:t})}},async fetchSeasonPasses(){const{$api:e}=Wn(),{season_passes:t}=await e.get("/meta/season-passes");return t},async fetchSeed(e={}){const t=_s(),{forceUpdate:n=!1,units:r=t?.preferences?.units||"imperial"}=e;if(!(n||!this.countries||!this.data_sources||!this.defaults||!this.favorite_list_types||!this.forecast_alerts||!this.location_types||!this.location_types_maps||!this.pricing||!this.regions||!this.season_passes))return;const{$api:o}=Wn(),c=await o.get("/meta/seed",{units:r}),{countries:i,data_sources:f,defaults:g,favorite_list_types:x,forecast_alerts:w,location_types:A,location_types_maps:C,pricing:F,regions:z,season_passes:j}=c;this.setProperty({countries:i}),this.setProperty({data_sources:f}),this.setProperty({defaults:g}),this.setProperty({favorite_list_types:x}),this.setProperty({forecast_alerts:w}),this.setProperty({location_types:A}),this.setProperty({location_types_maps:C}),this.setProperty({pricing:F}),this.setProperty({regions:z}),this.setProperty({season_passes:j})},setProperty(e){const[t,n]=Object.entries(e)[0];this[t]=n}},getters:{dataSourcesById(e){return e.data_sources?Qj(e.data_sources):{}},featuresBySlug(e){return e.pricing?.features?.length?Object.groupBy(e.pricing.features,({feature:t})=>t):{}},getAttribution(){const e=this;return(t,n)=>{const r=e.dataSourcesById[t];return r?r.attribution.find(s=>s.applies_to.includes(n)):null}},getAttributionDetailUrl(){const e=this;return(t,n)=>{const r=typeof t=="string"?e.getDataSourceBySlug(t):e.dataSourcesById[t];return e.getAttribution(r?.id,n)?.detail_url}},getDataSourceBySlug(){const e=this;return t=>e.data_sources.find(n=>n.slug===t)},getDefaultLocationCompareView(){return this.defaults?.favorites?.location_compare_view},getDefaultPostRegView(){return this.defaults?.post_reg_view},getFeelsLikeAlert(){const e=this;return(t=[])=>Pu(t,e.feelsLikeAlert.id,e)},getForecastAlertById:e=>t=>e?.forecast_alerts?.find(n=>n.id===t),getLevelForAlert(){const e=this;return t=>e.getForecastAlertById(t?.alert_id)?.levels.find(r=>r.id===t.level_id)},getLocationTypeBySlug(){const e=this;return t=>e.location_types?.find(n=>n.slug===t)},getLightningAlert(){const e=this;return(t=[])=>Pu(t,e.lightningForecastAlert.id,e)},getPowderAlert(){const e=this;return(t=[])=>Pu(t,e.powderForecastAlert.id,e)},getPricingPlans(e){return e.pricing?.plans?.reduce((t,n)=>(n.is_active&&(t[n.slug]=n),t),{})},getSnowLevelAlert(){const e=this;return(t=[])=>Pu(t,e.snowLevelForecastAlert.id,e)},getSnowObservationAlert(){const e=this;return(t=[])=>Pu(t,e.snowObservationAlert.id,e)},getSuspectObservationAlert(){const e=this;return(t=[])=>Pu(t,e.suspectObservationAlert.id,e)},getSuspectReportAlert(){const e=this;return(t=[])=>Pu(t,e.suspectReportAlert.id,e)},getTemperatureForecastAlert(){const e=this;return(t=[])=>Pu(t,e.temperatureForecastAlert.id,e)},getTrailConditionsAlert(){const e=this;return(t=[])=>Pu(t,e.trailConditionsForecastAlert.id,e)},getWindGustAlert(){const e=this;return(t=[])=>Pu(t,e.windGustForecastAlert.id,e)},getWindAlert(){const e=this;return(t=[])=>Pu(t,e.windForecastAlert.id,e)},cloudCoverForecastAlert(e){return pc(e,"cloud-cover")},cloudCoverForecastAlertIcon(){return this.cloudCoverForecastAlert?.icon_url},feelsLikeAlert(e){return pc(e,"feels-like")},lightningForecastAlert(e){return pc(e,"lightning")},lightningForecastAlertIcon(){return this.lightningForecastAlert?.icon_url},locationTypesById(e){return e.location_types?Qj(e.location_types):{}},plansBySlug(e){return e.pricing?.plans?.length?Object.groupBy(e.pricing.plans,({slug:t})=>t):{}},powderForecastAlert(e){return pc(e,"powder")},precipForecastAlert(e){return pc(e,"precip")},precipForecastAlertIcon(){return this.precipForecastAlert?.icon_url},skiAreaLocationTypes(e){return e.location_types?.filter(({slug:t})=>t.includes("-ski"))},snowLevelForecastAlert(e){return pc(e,"snow-level")},snowObservationAlert(e){return pc(e,"snow-observation")},suspectObservationAlert(e){return pc(e,"suspect-observation")},suspectReportAlert(e){return pc(e,"suspect-report")},temperatureForecastAlert(e){return pc(e,"temp")},temperatureForecastAlertIcon(){return this.temperatureForecastAlert?.icon_url},trailConditionsForecastAlert(e){return pc(e,"trail-conditions")},windGustForecastAlert(e){return pc(e,"wind-gust")},windForecastAlert(e){return pc(e,"wind")},windForecastAlertIcon(){return this.windForecastAlert?.icon_url}}}),uU=(e,t)=>{if(!t?.return_to)return e;const[n,r=""]=String(e).split("?"),s=new URLSearchParams(r);return s.set("return_to",t.return_to),`${n}?${s.toString()}`},Wut=(e,t)=>{t=cbe(t);const n=e.resolve(t).matched.length;L_(t,{external:!n})},Gut=e=>{const{loginError:t}=e;return e.setLoginError(null),t},dxe=e=>e?.is_active===!1?pl.error:pl.membership,Yut=e=>{const t=LS();return e||(t.getDefaultPostRegView==="my-location"?"/my-location":"/user/favorites")},dU=(e={})=>{const{isGuest:t=!0,query:n={}}=e,r=t?"/user/register":"/buy",s=new URLSearchParams(n).toString();return s?`${r}?${s}`:r},hxe=async e=>{let t,n;const r=void 0,s=LS(),o=_s();[t,n]=Zh(()=>Promise.all([o.user?!0:o.fetchUser(r),e.meta.layout==="buy"?s.fetchPricing():s.fetchSeed()])),await t,n(),o.isGuest&&o.getUnits();const{query:c}=e,i=e.fullPath;if(e.meta.layout==="authorized"&&o.isGuest){const f=i.includes("user/")?"/user/login":"/user/register";return L_({path:f,query:{...c,return_to:i}})}if(e.meta.layout==="guest"&&!o.isGuest)return L_({path:"/user/favorites/locations",query:c});if(e.meta.layout==="guest-or-apply-promo-code"&&!o.isGuest){if(e.query.promo_code){const f={message:"",type:null};try{const{messages:g,promo_code:x}=([t,n]=Zh(()=>o.applyPromoCode(e.query.promo_code)),t=await t,n(),t);f.message=g.join(" "),f.type=dxe(x)}catch(g){f.message=g?.messages?g.messages.join(" "):`An error occurred applying the promo code ${e.query.promo_code}.`,f.type=pl.error}o.setBanner({banner:f,saveToCookie:!0})}return L_({path:"/user/favorites/locations",query:c})}},fxe=async()=>{let e,t;const n=_s();if(n.user){const r=Gc("cookienotice-accepted"),s=r.value;typeof s=="boolean"&&([e,t]=Zh(()=>n.updatePrivacy(s)),await e,t(),r.value=null)}},pxe=[K0e,b1e,hxe,fxe],sL={};function mxe(e,t,n){const{pathname:r,search:s,hash:o}=t,c=e.indexOf("#");if(c>-1){const g=o.includes(e.slice(c))?e.slice(c).length:1;let x=o.slice(g);return x[0]!=="/"&&(x="/"+x),tj(x,"")}const i=tj(r,e),f=!n||i_e(i,n)?i:n;return f+(f.includes("?")?"":s)+o}const gxe=xs({name:"nuxt:router",enforce:"pre",async setup(e){let t,n,r=no().app.baseURL;eL&&!r.includes("#")&&(r+="#");const s=Dp.history?.(r)??(eL?Xve(r):XJ(r)),o=Dp.routes?([t,n]=Zh(()=>Dp.routes(zD)),t=await t,n(),t??zD):zD;let c;const i=g0e({...Dp,scrollBehavior:(j,V,Y)=>{if(V===Uc){c=Y;return}if(Dp.scrollBehavior){if(i.options.scrollBehavior=Dp.scrollBehavior,"scrollRestoration"in window.history){const te=i.beforeEach(()=>{te(),window.history.scrollRestoration="manual"})}return Dp.scrollBehavior(j,Uc,c||Y)}},history:s,routes:o});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),e.vueApp.use(i);const f=mo(i.currentRoute.value);i.afterEach((j,V)=>{f.value=V}),Object.defineProperty(e.vueApp.config.globalProperties,"previousRoute",{get:()=>f.value});const g=mxe(r,window.location,e.payload.path),x=mo(i.currentRoute.value),w=()=>{x.value=i.currentRoute.value};e.hook("page:finish",w),i.afterEach((j,V)=>{j.matched[j.matched.length-1]?.components?.default===V.matched[V.matched.length-1]?.components?.default&&w()});const A={};for(const j in x.value)Object.defineProperty(A,j,{get:()=>x.value[j],enumerable:!0});e._route=Yu(A),e._middleware||={global:[],named:{}};const C=U2();i.afterEach(async(j,V,Y)=>{delete e._processingMiddleware,!e.isHydrating&&C.value&&await e.runWithContext(_J),Y&&await e.callHook("page:loading:end")});try{[t,n]=Zh(()=>i.isReady()),await t,n()}catch(j){[t,n]=Zh(()=>e.runWithContext(()=>Yp(j))),await t,n()}const F=g!==i.currentRoute.value.fullPath?i.resolve(g):i.currentRoute.value;w();const z=e.payload.state._layout;return i.beforeEach(async(j,V)=>{await e.callHook("page:loading:start"),j.meta=Bo(j.meta),e.isHydrating&&z&&!Zd(j.meta.layout)&&(j.meta.layout=z),e._processingMiddleware=!0;{const Y=new Set([...pxe,...e._middleware.global]);for(const te of j.matched){const J=te.meta.middleware;if(J)for(const ee of cN(J))Y.add(ee)}for(const te of Y){const J=typeof te=="string"?e._middleware.named[te]||await sL[te]?.().then(ee=>ee.default||ee):te;if(!J)throw new Error(`Unknown route middleware: '${te}'.`);try{const ee=await e.runWithContext(()=>J(j,V));if(!e.payload.serverRendered&&e.isHydrating&&(ee===!1||ee instanceof Error)){const le=ee||N_({statusCode:404,statusMessage:`Page Not Found: ${g}`});return await e.runWithContext(()=>Yp(le)),!1}if(ee===!0)continue;if(ee===!1)return ee;if(ee)return Hk(ee)&&ee.fatal&&await e.runWithContext(()=>Yp(ee)),ee}catch(ee){const le=N_(ee);return le.fatal&&await e.runWithContext(()=>Yp(le)),le}}}}),i.onError(async()=>{delete e._processingMiddleware,await e.callHook("page:loading:end")}),i.afterEach(j=>{if(j.matched.length===0)return e.runWithContext(()=>Yp(N_({statusCode:404,fatal:!1,statusMessage:`Page not found: ${j.fullPath}`,data:{path:j.fullPath}})))}),e.hooks.hookOnce("app:created",async()=>{try{"name"in F&&(F.name=void 0),await i.replace({...F,force:!0}),i.options.scrollBehavior=Dp.scrollBehavior}catch(j){await e.runWithContext(()=>Yp(j))}}),{provide:{router:i}}}}),_xe=xs({name:"nuxt:payload",setup(e){const t=new Set;aa().beforeResolve(async(n,r)=>{if(n.path===r.path)return;const s=await yj(n.path);if(s){for(const o of t)delete e.static.data[o];for(const o in s.data)o in e.static.data||t.add(o),e.static.data[o]=s.data[o]}}),uN(()=>{e.hooks.hook("link:prefetch",async n=>{const{hostname:r}=new URL(n,window.location.href);r===window.location.hostname&&await yj(n).catch(()=>{console.warn("[nuxt] Error preloading payload for",n)})})})}}),yxe=xs(()=>{const e=aa();uN(()=>{e.beforeResolve(async()=>{await new Promise(t=>{setTimeout(t,100),requestAnimationFrame(()=>{setTimeout(t,0)})})})})}),vxe=xs({name:"nuxt:chunk-reload",setup(e){const t=aa(),n=no(),r=new Set;t.beforeEach(()=>{r.clear()}),e.hook("app:chunkError",({error:o})=>{r.add(o)});function s(o){const c=j3(n.app.baseURL,o.fullPath);p1e({path:c,persistState:!0})}e.hook("app:manifest:update",()=>{t.beforeResolve(s)}),t.onError((o,c)=>{r.has(o)&&s(c)})}}),bxe=xs({name:"pinia",setup(e){const t=Ibe();return e.vueApp.use(t),kS(t),e.payload&&e.payload.pinia&&(t.state.value=e.payload.pinia),{provide:{pinia:t}}}}),xxe=sm(()=>Pn(()=>import("./Bi5o_po1.js"),__vite__mapDeps([205,106,56,28,57,20,107,23,32,206]),import.meta.url).then(e=>e.default||e.default||e)),wxe=[["AgentForecast",xxe]],Sxe=xs({name:"nuxt:global-components",setup(e){for(const[t,n]of wxe)e.vueApp.component(t,n),e.vueApp.component("Lazy"+t,n)}}),um={authorized:sm(()=>Pn(()=>import("./Bir_x5kE.js"),[],import.meta.url).then(e=>e.default||e)),buy:sm(()=>Pn(()=>import("./DVt4vWB0.js"),__vite__mapDeps([251,252]),import.meta.url).then(e=>e.default||e)),default:sm(()=>Pn(()=>import("./C1zwnDW1.js"),[],import.meta.url).then(e=>e.default||e)),guest:sm(()=>Pn(()=>import("./DHySV1iY.js"),[],import.meta.url).then(e=>e.default||e)),"guest-or-apply-promo-code":sm(()=>Pn(()=>import("./BBKMbNeT.js"),[],import.meta.url).then(e=>e.default||e))},Exe=xs({name:"nuxt:prefetch",setup(e){const t=aa();e.hooks.hook("app:mounted",()=>{t.beforeEach(async n=>{const r=n?.meta?.layout;r&&typeof um[r]=="function"&&await um[r]()})}),e.hooks.hook("link:prefetch",n=>{if(Km(n))return;const r=t.resolve(n);if(!r)return;const s=r.meta.layout;let o=cN(r.meta.middleware);o=o.filter(c=>typeof c=="string");for(const c of o)typeof sL[c]=="function"&&sL[c]();typeof s=="string"&&s in um&&f1e(um[s])})}});function GA(...e){window.dataLayer?.push(arguments)}function SQ({tags:e}){window.dataLayer=window.dataLayer||[];for(const t of e)for(const n of t.initCommands??[])GA(...n);GA("js",new Date);for(const t of e)GA("config",t.id,t.config??{})}function EQ(e){const t=gi(e),n=t.tags.filter(Boolean).map(r=>typeof r=="string"?{id:r}:r);if(t.id){const{id:r,config:s,initCommands:o}=t;n.unshift({id:r,config:s,initCommands:o})}return n}const Txe=xs({parallel:!0,setup(){const e=no().public.gtag,t=EQ(e);if(!t.length||(SQ({tags:t}),e.initMode==="manual"))return;const n=e.loadingStrategy==="async"?"async":"defer";iN({link:[{rel:"preload",as:"script",href:j2(e.url,{id:t[0].id})}],script:[{src:j2(e.url,{id:t[0].id}),[n]:!0,"data-gtag":""}]})}}),Mxe=["top","right","bottom","left"],hU=["start","end"],fU=Mxe.reduce((e,t)=>e.concat(t,t+"-"+hU[0],t+"-"+hU[1]),[]),G2=Math.min,f_=Math.max,Axe={left:"right",right:"left",bottom:"top",top:"bottom"},Cxe={start:"end",end:"start"};function oL(e,t,n){return f_(e,G2(t,n))}function by(e,t){return typeof e=="function"?e(t):e}function Qd(e){return e.split("-")[0]}function Ju(e){return e.split("-")[1]}function TQ(e){return e==="x"?"y":"x"}function bN(e){return e==="y"?"height":"width"}function xm(e){return["top","bottom"].includes(Qd(e))?"y":"x"}function xN(e){return TQ(xm(e))}function MQ(e,t,n){n===void 0&&(n=!1);const r=Ju(e),s=xN(e),o=bN(s);let c=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(c=aI(c)),[c,aI(c)]}function Ixe(e){const t=aI(e);return[oI(e),t,oI(t)]}function oI(e){return e.replace(/start|end/g,t=>Cxe[t])}function Pxe(e,t,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],c=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?o:c;default:return[]}}function Oxe(e,t,n,r){const s=Ju(e);let o=Pxe(Qd(e),n==="start",r);return s&&(o=o.map(c=>c+"-"+s),t&&(o=o.concat(o.map(oI)))),o}function aI(e){return e.replace(/left|right|bottom|top/g,t=>Axe[t])}function Dxe(e){return{top:0,right:0,bottom:0,left:0,...e}}function AQ(e){return typeof e!="number"?Dxe(e):{top:e,right:e,bottom:e,left:e}}function e2(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function pU(e,t,n){let{reference:r,floating:s}=e;const o=xm(t),c=xN(t),i=bN(c),f=Qd(t),g=o==="y",x=r.x+r.width/2-s.width/2,w=r.y+r.height/2-s.height/2,A=r[i]/2-s[i]/2;let C;switch(f){case"top":C={x,y:r.y-s.height};break;case"bottom":C={x,y:r.y+r.height};break;case"right":C={x:r.x+r.width,y:w};break;case"left":C={x:r.x-s.width,y:w};break;default:C={x:r.x,y:r.y}}switch(Ju(t)){case"start":C[c]-=A*(n&&g?-1:1);break;case"end":C[c]+=A*(n&&g?-1:1);break}return C}const Rxe=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:c}=n,i=o.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(t));let g=await c.getElementRects({reference:e,floating:t,strategy:s}),{x,y:w}=pU(g,r,f),A=r,C={},F=0;for(let z=0;z<i.length;z++){const{name:j,fn:V}=i[z],{x:Y,y:te,data:J,reset:ee}=await V({x,y:w,initialPlacement:r,placement:A,strategy:s,middlewareData:C,rects:g,platform:c,elements:{reference:e,floating:t}});x=Y??x,w=te??w,C={...C,[j]:{...C[j],...J}},ee&&F<=50&&(F++,typeof ee=="object"&&(ee.placement&&(A=ee.placement),ee.rects&&(g=ee.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:s}):ee.rects),{x,y:w}=pU(g,A,f)),z=-1)}return{x,y:w,placement:A,strategy:s,middlewareData:C}};async function Y3(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:c,elements:i,strategy:f}=e,{boundary:g="clippingAncestors",rootBoundary:x="viewport",elementContext:w="floating",altBoundary:A=!1,padding:C=0}=by(t,e),F=AQ(C),j=i[A?w==="floating"?"reference":"floating":w],V=e2(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(j)))==null||n?j:j.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(i.floating)),boundary:g,rootBoundary:x,strategy:f})),Y=w==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,te=await(o.getOffsetParent==null?void 0:o.getOffsetParent(i.floating)),J=await(o.isElement==null?void 0:o.isElement(te))?await(o.getScale==null?void 0:o.getScale(te))||{x:1,y:1}:{x:1,y:1},ee=e2(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:Y,offsetParent:te,strategy:f}):Y);return{top:(V.top-ee.top+F.top)/J.y,bottom:(ee.bottom-V.bottom+F.bottom)/J.y,left:(V.left-ee.left+F.left)/J.x,right:(ee.right-V.right+F.right)/J.x}}const kxe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:c,elements:i,middlewareData:f}=t,{element:g,padding:x=0}=by(e,t)||{};if(g==null)return{};const w=AQ(x),A={x:n,y:r},C=xN(s),F=bN(C),z=await c.getDimensions(g),j=C==="y",V=j?"top":"left",Y=j?"bottom":"right",te=j?"clientHeight":"clientWidth",J=o.reference[F]+o.reference[C]-A[C]-o.floating[F],ee=A[C]-o.reference[C],le=await(c.getOffsetParent==null?void 0:c.getOffsetParent(g));let oe=le?le[te]:0;(!oe||!await(c.isElement==null?void 0:c.isElement(le)))&&(oe=i.floating[te]||o.floating[F]);const ve=J/2-ee/2,se=oe/2-z[F]/2-1,ie=G2(w[V],se),pe=G2(w[Y],se),be=ie,Se=oe-z[F]-pe,Ce=oe/2-z[F]/2+ve,Ee=oL(be,Ce,Se),xe=!f.arrow&&Ju(s)!=null&&Ce!==Ee&&o.reference[F]/2-(Ce<be?ie:pe)-z[F]/2<0,ke=xe?Ce<be?Ce-be:Ce-Se:0;return{[C]:A[C]+ke,data:{[C]:Ee,centerOffset:Ce-Ee-ke,...xe&&{alignmentOffset:ke}},reset:xe}}});function Lxe(e,t,n){return(e?[...n.filter(s=>Ju(s)===e),...n.filter(s=>Ju(s)!==e)]:n.filter(s=>Qd(s)===s)).filter(s=>e?Ju(s)===e||(t?oI(s)!==s:!1):!0)}const Nxe=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,s;const{rects:o,middlewareData:c,placement:i,platform:f,elements:g}=t,{crossAxis:x=!1,alignment:w,allowedPlacements:A=fU,autoAlignment:C=!0,...F}=by(e,t),z=w!==void 0||A===fU?Lxe(w||null,C,A):A,j=await Y3(t,F),V=((n=c.autoPlacement)==null?void 0:n.index)||0,Y=z[V];if(Y==null)return{};const te=MQ(Y,o,await(f.isRTL==null?void 0:f.isRTL(g.floating)));if(i!==Y)return{reset:{placement:z[0]}};const J=[j[Qd(Y)],j[te[0]],j[te[1]]],ee=[...((r=c.autoPlacement)==null?void 0:r.overflows)||[],{placement:Y,overflows:J}],le=z[V+1];if(le)return{data:{index:V+1,overflows:ee},reset:{placement:le}};const oe=ee.map(ie=>{const pe=Ju(ie.placement);return[ie.placement,pe&&x?ie.overflows.slice(0,2).reduce((be,Se)=>be+Se,0):ie.overflows[0],ie.overflows]}).sort((ie,pe)=>ie[1]-pe[1]),se=((s=oe.filter(ie=>ie[2].slice(0,Ju(ie[0])?2:3).every(pe=>pe<=0))[0])==null?void 0:s[0])||oe[0][0];return se!==i?{data:{index:V+1,overflows:ee},reset:{placement:se}}:{}}}},Fxe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:c,initialPlacement:i,platform:f,elements:g}=t,{mainAxis:x=!0,crossAxis:w=!0,fallbackPlacements:A,fallbackStrategy:C="bestFit",fallbackAxisSideDirection:F="none",flipAlignment:z=!0,...j}=by(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const V=Qd(s),Y=xm(i),te=Qd(i)===i,J=await(f.isRTL==null?void 0:f.isRTL(g.floating)),ee=A||(te||!z?[aI(i)]:Ixe(i)),le=F!=="none";!A&&le&&ee.push(...Oxe(i,z,F,J));const oe=[i,...ee],ve=await Y3(t,j),se=[];let ie=((r=o.flip)==null?void 0:r.overflows)||[];if(x&&se.push(ve[V]),w){const Ee=MQ(s,c,J);se.push(ve[Ee[0]],ve[Ee[1]])}if(ie=[...ie,{placement:s,overflows:se}],!se.every(Ee=>Ee<=0)){var pe,be;const Ee=(((pe=o.flip)==null?void 0:pe.index)||0)+1,xe=oe[Ee];if(xe){var Se;const He=w==="alignment"?Y!==xm(xe):!1,Ke=((Se=ie[0])==null?void 0:Se.overflows[0])>0;if(!He||Ke)return{data:{index:Ee,overflows:ie},reset:{placement:xe}}}let ke=(be=ie.filter(He=>He.overflows[0]<=0).sort((He,Ke)=>He.overflows[1]-Ke.overflows[1])[0])==null?void 0:be.placement;if(!ke)switch(C){case"bestFit":{var Ce;const He=(Ce=ie.filter(Ke=>{if(le){const Ge=xm(Ke.placement);return Ge===Y||Ge==="y"}return!0}).map(Ke=>[Ke.placement,Ke.overflows.filter(Ge=>Ge>0).reduce((Ge,$t)=>Ge+$t,0)]).sort((Ke,Ge)=>Ke[1]-Ge[1])[0])==null?void 0:Ce[0];He&&(ke=He);break}case"initialPlacement":ke=i;break}if(s!==ke)return{reset:{placement:ke}}}return{}}}};async function zxe(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=Qd(n),i=Ju(n),f=xm(n)==="y",g=["left","top"].includes(c)?-1:1,x=o&&f?-1:1,w=by(t,e);let{mainAxis:A,crossAxis:C,alignmentAxis:F}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:w.mainAxis||0,crossAxis:w.crossAxis||0,alignmentAxis:w.alignmentAxis};return i&&typeof F=="number"&&(C=i==="end"?F*-1:F),f?{x:C*x,y:A*g}:{x:A*g,y:C*x}}const Bxe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:c,middlewareData:i}=t,f=await zxe(t,e);return c===((n=i.offset)==null?void 0:n.placement)&&(r=i.arrow)!=null&&r.alignmentOffset?{}:{x:s+f.x,y:o+f.y,data:{...f,placement:c}}}}},$xe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:c=!1,limiter:i={fn:j=>{let{x:V,y:Y}=j;return{x:V,y:Y}}},...f}=by(e,t),g={x:n,y:r},x=await Y3(t,f),w=xm(Qd(s)),A=TQ(w);let C=g[A],F=g[w];if(o){const j=A==="y"?"top":"left",V=A==="y"?"bottom":"right",Y=C+x[j],te=C-x[V];C=oL(Y,C,te)}if(c){const j=w==="y"?"top":"left",V=w==="y"?"bottom":"right",Y=F+x[j],te=F-x[V];F=oL(Y,F,te)}const z=i.fn({...t,[A]:C,[w]:F});return{...z,data:{x:z.x-n,y:z.y-r,enabled:{[A]:o,[w]:c}}}}}},Vxe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:c,elements:i}=t,{apply:f=()=>{},...g}=by(e,t),x=await Y3(t,g),w=Qd(s),A=Ju(s),C=xm(s)==="y",{width:F,height:z}=o.floating;let j,V;w==="top"||w==="bottom"?(j=w,V=A===(await(c.isRTL==null?void 0:c.isRTL(i.floating))?"start":"end")?"left":"right"):(V=w,j=A==="end"?"top":"bottom");const Y=z-x.top-x.bottom,te=F-x.left-x.right,J=G2(z-x[j],Y),ee=G2(F-x[V],te),le=!t.middlewareData.shift;let oe=J,ve=ee;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(ve=te),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(oe=Y),le&&!A){const ie=f_(x.left,0),pe=f_(x.right,0),be=f_(x.top,0),Se=f_(x.bottom,0);C?ve=F-2*(ie!==0||pe!==0?ie+pe:f_(x.left,x.right)):oe=z-2*(be!==0||Se!==0?be+Se:f_(x.top,x.bottom))}await f({...t,availableWidth:ve,availableHeight:oe});const se=await c.getDimensions(i.floating);return F!==se.width||z!==se.height?{reset:{rects:!0}}:{}}}};function Yc(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Gd(e){return Yc(e).getComputedStyle(e)}const mU=Math.min,t2=Math.max,lI=Math.round;function CQ(e){const t=Gd(e);let n=parseFloat(t.width),r=parseFloat(t.height);const s=e.offsetWidth,o=e.offsetHeight,c=lI(n)!==s||lI(r)!==o;return c&&(n=s,r=o),{width:n,height:r,fallback:c}}function km(e){return PQ(e)?(e.nodeName||"").toLowerCase():""}let SM;function IQ(){if(SM)return SM;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(SM=e.brands.map((t=>t.brand+"/"+t.version)).join(" "),SM):navigator.userAgent}function Yd(e){return e instanceof Yc(e).HTMLElement}function wm(e){return e instanceof Yc(e).Element}function PQ(e){return e instanceof Yc(e).Node}function gU(e){return typeof ShadowRoot>"u"?!1:e instanceof Yc(e).ShadowRoot||e instanceof ShadowRoot}function q3(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Gd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function jxe(e){return["table","td","th"].includes(km(e))}function aL(e){const t=/firefox/i.test(IQ()),n=Gd(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some((s=>n.willChange.includes(s)))||["paint","layout","strict","content"].some((s=>{const o=n.contain;return o!=null&&o.includes(s)}))}function OQ(){return!/^((?!chrome|android).)*safari/i.test(IQ())}function wN(e){return["html","body","#document"].includes(km(e))}function DQ(e){return wm(e)?e:e.contextElement}const RQ={x:1,y:1};function E0(e){const t=DQ(e);if(!Yd(t))return RQ;const n=t.getBoundingClientRect(),{width:r,height:s,fallback:o}=CQ(t);let c=(o?lI(n.width):n.width)/r,i=(o?lI(n.height):n.height)/s;return c&&Number.isFinite(c)||(c=1),i&&Number.isFinite(i)||(i=1),{x:c,y:i}}function Y2(e,t,n,r){var s,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const c=e.getBoundingClientRect(),i=DQ(e);let f=RQ;t&&(r?wm(r)&&(f=E0(r)):f=E0(e));const g=i?Yc(i):window,x=!OQ()&&n;let w=(c.left+(x&&((s=g.visualViewport)==null?void 0:s.offsetLeft)||0))/f.x,A=(c.top+(x&&((o=g.visualViewport)==null?void 0:o.offsetTop)||0))/f.y,C=c.width/f.x,F=c.height/f.y;if(i){const z=Yc(i),j=r&&wm(r)?Yc(r):r;let V=z.frameElement;for(;V&&r&&j!==z;){const Y=E0(V),te=V.getBoundingClientRect(),J=getComputedStyle(V);te.x+=(V.clientLeft+parseFloat(J.paddingLeft))*Y.x,te.y+=(V.clientTop+parseFloat(J.paddingTop))*Y.y,w*=Y.x,A*=Y.y,C*=Y.x,F*=Y.y,w+=te.x,A+=te.y,V=Yc(V).frameElement}}return{width:C,height:F,top:A,right:w+C,bottom:A+F,left:w,x:w,y:A}}function Sm(e){return((PQ(e)?e.ownerDocument:e.document)||window.document).documentElement}function X3(e){return wm(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function kQ(e){return Y2(Sm(e)).left+X3(e).scrollLeft}function q2(e){if(km(e)==="html")return e;const t=e.assignedSlot||e.parentNode||gU(e)&&e.host||Sm(e);return gU(t)?t.host:t}function LQ(e){const t=q2(e);return wN(t)?t.ownerDocument.body:Yd(t)&&q3(t)?t:LQ(t)}function cI(e,t){var n;t===void 0&&(t=[]);const r=LQ(e),s=r===((n=e.ownerDocument)==null?void 0:n.body),o=Yc(r);return s?t.concat(o,o.visualViewport||[],q3(r)?r:[]):t.concat(r,cI(r))}function _U(e,t,n){return t==="viewport"?e2((function(r,s){const o=Yc(r),c=Sm(r),i=o.visualViewport;let f=c.clientWidth,g=c.clientHeight,x=0,w=0;if(i){f=i.width,g=i.height;const A=OQ();(A||!A&&s==="fixed")&&(x=i.offsetLeft,w=i.offsetTop)}return{width:f,height:g,x,y:w}})(e,n)):wm(t)?e2((function(r,s){const o=Y2(r,!0,s==="fixed"),c=o.top+r.clientTop,i=o.left+r.clientLeft,f=Yd(r)?E0(r):{x:1,y:1};return{width:r.clientWidth*f.x,height:r.clientHeight*f.y,x:i*f.x,y:c*f.y}})(t,n)):e2((function(r){const s=Sm(r),o=X3(r),c=r.ownerDocument.body,i=t2(s.scrollWidth,s.clientWidth,c.scrollWidth,c.clientWidth),f=t2(s.scrollHeight,s.clientHeight,c.scrollHeight,c.clientHeight);let g=-o.scrollLeft+kQ(r);const x=-o.scrollTop;return Gd(c).direction==="rtl"&&(g+=t2(s.clientWidth,c.clientWidth)-i),{width:i,height:f,x:g,y:x}})(Sm(e)))}function yU(e){return Yd(e)&&Gd(e).position!=="fixed"?e.offsetParent:null}function vU(e){const t=Yc(e);let n=yU(e);for(;n&&jxe(n)&&Gd(n).position==="static";)n=yU(n);return n&&(km(n)==="html"||km(n)==="body"&&Gd(n).position==="static"&&!aL(n))?t:n||(function(r){let s=q2(r);for(;Yd(s)&&!wN(s);){if(aL(s))return s;s=q2(s)}return null})(e)||t}function Uxe(e,t,n){const r=Yd(t),s=Sm(t),o=Y2(e,!0,n==="fixed",t);let c={scrollLeft:0,scrollTop:0};const i={x:0,y:0};if(r||!r&&n!=="fixed")if((km(t)!=="body"||q3(s))&&(c=X3(t)),Yd(t)){const f=Y2(t,!0);i.x=f.x+t.clientLeft,i.y=f.y+t.clientTop}else s&&(i.x=kQ(s));return{x:o.left+c.scrollLeft-i.x,y:o.top+c.scrollTop-i.y,width:o.width,height:o.height}}const Hxe={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=n==="clippingAncestors"?(function(g,x){const w=x.get(g);if(w)return w;let A=cI(g).filter((j=>wm(j)&&km(j)!=="body")),C=null;const F=Gd(g).position==="fixed";let z=F?q2(g):g;for(;wm(z)&&!wN(z);){const j=Gd(z),V=aL(z);(F?V||C:V||j.position!=="static"||!C||!["absolute","fixed"].includes(C.position))?C=j:A=A.filter((Y=>Y!==z)),z=q2(z)}return x.set(g,A),A})(t,this._c):[].concat(n),c=[...o,r],i=c[0],f=c.reduce(((g,x)=>{const w=_U(t,x,s);return g.top=t2(w.top,g.top),g.right=mU(w.right,g.right),g.bottom=mU(w.bottom,g.bottom),g.left=t2(w.left,g.left),g}),_U(t,i,s));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const s=Yd(n),o=Sm(n);if(n===o)return t;let c={scrollLeft:0,scrollTop:0},i={x:1,y:1};const f={x:0,y:0};if((s||!s&&r!=="fixed")&&((km(n)!=="body"||q3(o))&&(c=X3(n)),Yd(n))){const g=Y2(n);i=E0(n),f.x=g.x+n.clientLeft,f.y=g.y+n.clientTop}return{width:t.width*i.x,height:t.height*i.y,x:t.x*i.x-c.scrollLeft*i.x+f.x,y:t.y*i.y-c.scrollTop*i.y+f.y}},isElement:wm,getDimensions:function(e){return Yd(e)?CQ(e):e.getBoundingClientRect()},getOffsetParent:vU,getDocumentElement:Sm,getScale:E0,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const s=this.getOffsetParent||vU,o=this.getDimensions;return{reference:Uxe(t,await s(n),r),floating:{x:0,y:0,...await o(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Gd(e).direction==="rtl"},Wxe=(e,t,n)=>{const r=new Map,s={platform:Hxe,...n},o={...s.platform,_c:r};return Rxe(e,t,{...s,platform:o})};function NQ(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]=="object"&&e[n]?NQ(e[n],t[n]):e[n]=t[n])}const Qu={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:150,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,autoHideOnMousedown:!1,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:e=>[...e,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover"],delay:{show:0,hide:400}}}};function X2(e,t){let n=Qu.themes[e]||{},r;do r=n[t],typeof r>"u"?n.$extend?n=Qu.themes[n.$extend]||{}:(n=null,r=Qu[t]):n=null;while(n);return r}function Gxe(e){const t=[e];let n=Qu.themes[e]||{};do n.$extend&&!n.$resetCss?(t.push(n.$extend),n=Qu.themes[n.$extend]||{}):n=null;while(n);return t.map(r=>`v-popper--theme-${r}`)}function bU(e){const t=[e];let n=Qu.themes[e]||{};do n.$extend?(t.push(n.$extend),n=Qu.themes[n.$extend]||{}):n=null;while(n);return t}let G0=!1;if(typeof window<"u"){G0=!1;try{const e=Object.defineProperty({},"passive",{get(){G0=!0}});window.addEventListener("test",null,e)}catch{}}let FQ=!1;typeof window<"u"&&typeof navigator<"u"&&(FQ=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const zQ=["auto","top","bottom","left","right"].reduce((e,t)=>e.concat([t,`${t}-start`,`${t}-end`]),[]),xU={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart",pointer:"pointerdown"},wU={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend",pointer:"pointerup"};function SU(e,t){const n=e.indexOf(t);n!==-1&&e.splice(n,1)}function VD(){return new Promise(e=>requestAnimationFrame(()=>{requestAnimationFrame(e)}))}const Gu=[];let r_=null;const EU={};function TU(e){let t=EU[e];return t||(t=EU[e]=[]),t}let lL=function(){};typeof window<"u"&&(lL=window.Element);function ji(e){return function(t){return X2(t.theme,e)}}const jD="__floating-vue__popper",BQ=()=>ki({name:"VPopper",provide(){return{[jD]:{parentPopper:this}}},inject:{[jD]:{default:null}},props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,default:null},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:ji("disabled")},positioningDisabled:{type:Boolean,default:ji("positioningDisabled")},placement:{type:String,default:ji("placement"),validator:e=>zQ.includes(e)},delay:{type:[String,Number,Object],default:ji("delay")},distance:{type:[Number,String],default:ji("distance")},skidding:{type:[Number,String],default:ji("skidding")},triggers:{type:Array,default:ji("triggers")},showTriggers:{type:[Array,Function],default:ji("showTriggers")},hideTriggers:{type:[Array,Function],default:ji("hideTriggers")},popperTriggers:{type:Array,default:ji("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:ji("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:ji("popperHideTriggers")},container:{type:[String,Object,lL,Boolean],default:ji("container")},boundary:{type:[String,lL],default:ji("boundary")},strategy:{type:String,validator:e=>["absolute","fixed"].includes(e),default:ji("strategy")},autoHide:{type:[Boolean,Function],default:ji("autoHide")},handleResize:{type:Boolean,default:ji("handleResize")},instantMove:{type:Boolean,default:ji("instantMove")},eagerMount:{type:Boolean,default:ji("eagerMount")},popperClass:{type:[String,Array,Object],default:ji("popperClass")},computeTransformOrigin:{type:Boolean,default:ji("computeTransformOrigin")},autoMinSize:{type:Boolean,default:ji("autoMinSize")},autoSize:{type:[Boolean,String],default:ji("autoSize")},autoMaxSize:{type:Boolean,default:ji("autoMaxSize")},autoBoundaryMaxSize:{type:Boolean,default:ji("autoBoundaryMaxSize")},preventOverflow:{type:Boolean,default:ji("preventOverflow")},overflowPadding:{type:[Number,String],default:ji("overflowPadding")},arrowPadding:{type:[Number,String],default:ji("arrowPadding")},arrowOverflow:{type:Boolean,default:ji("arrowOverflow")},flip:{type:Boolean,default:ji("flip")},shift:{type:Boolean,default:ji("shift")},shiftCrossAxis:{type:Boolean,default:ji("shiftCrossAxis")},noAutoFocus:{type:Boolean,default:ji("noAutoFocus")},disposeTimeout:{type:Number,default:ji("disposeTimeout")}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null},randomId:`popper_${[Math.random(),Date.now()].map(e=>e.toString(36).substring(2,10)).join("_")}`,shownChildren:new Set,lastAutoHide:!0,pendingHide:!1,containsGlobalTarget:!1,isDisposed:!0,mouseDownContains:!1}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:typeof this.autoHide=="function"?this.lastAutoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:{...this.classes,popperClass:this.popperClass},result:this.positioningDisabled?null:this.result,attrs:this.$attrs}},parentPopper(){var e;return(e=this[jD])==null?void 0:e.parentPopper},hasPopperShowTriggerHover(){var e,t;return((e=this.popperTriggers)==null?void 0:e.includes("hover"))||((t=this.popperShowTriggers)==null?void 0:t.includes("hover"))}},watch:{shown:"$_autoShowHide",disabled(e){e?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers:{handler:"$_refreshListeners",deep:!0},positioningDisabled:"$_refreshListeners",...["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((e,t)=>(e[t]="$_computePosition",e),{})},created(){this.autoMinSize&&console.warn('[floating-vue] `autoMinSize` option is deprecated. Use `autoSize="min"` instead.'),this.autoMaxSize&&console.warn("[floating-vue] `autoMaxSize` option is deprecated. Use `autoBoundaryMaxSize` instead.")},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:e=null,skipDelay:t=!1,force:n=!1}={}){var r,s;(r=this.parentPopper)!=null&&r.lockedChild&&this.parentPopper.lockedChild!==this||(this.pendingHide=!1,(n||!this.disabled)&&(((s=this.parentPopper)==null?void 0:s.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.$_scheduleShow(e,t),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0))},hide({event:e=null,skipDelay:t=!1}={}){var n;if(!this.$_hideInProgress){if(this.shownChildren.size>0){this.pendingHide=!0;return}if(this.hasPopperShowTriggerHover&&this.$_isAimingPopper()){this.parentPopper&&(this.parentPopper.lockedChild=this,clearTimeout(this.parentPopper.lockedChildTimer),this.parentPopper.lockedChildTimer=setTimeout(()=>{this.parentPopper.lockedChild===this&&(this.parentPopper.lockedChild.hide({skipDelay:t}),this.parentPopper.lockedChild=null)},1e3));return}((n=this.parentPopper)==null?void 0:n.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.pendingHide=!1,this.$_scheduleHide(e,t),this.$emit("hide"),this.$emit("update:shown",!1)}},init(){var e;this.isDisposed&&(this.isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=((e=this.referenceNode)==null?void 0:e.call(this))??this.$el,this.$_targetNodes=this.targetNodes().filter(t=>t.nodeType===t.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.isDisposed||(this.isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_updateParentShownChildren(!1),this.$_swapTargetAttrs("data-original-title","title"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){if(this.isDisposed||this.positioningDisabled)return;const e={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&e.middleware.push(Bxe({mainAxis:this.distance,crossAxis:this.skidding}));const t=this.placement.startsWith("auto");if(t?e.middleware.push(Nxe({alignment:this.placement.split("-")[1]??""})):e.placement=this.placement,this.preventOverflow&&(this.shift&&e.middleware.push($xe({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!t&&this.flip&&e.middleware.push(Fxe({padding:this.overflowPadding,boundary:this.boundary}))),e.middleware.push(kxe({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&e.middleware.push({name:"arrowOverflow",fn:({placement:r,rects:s,middlewareData:o})=>{let c;const{centerOffset:i}=o.arrow;return r.startsWith("top")||r.startsWith("bottom")?c=Math.abs(i)>s.reference.width/2:c=Math.abs(i)>s.reference.height/2,{data:{overflow:c}}}}),this.autoMinSize||this.autoSize){const r=this.autoSize?this.autoSize:this.autoMinSize?"min":null;e.middleware.push({name:"autoSize",fn:({rects:s,placement:o,middlewareData:c})=>{var i;if((i=c.autoSize)!=null&&i.skip)return{};let f,g;return o.startsWith("top")||o.startsWith("bottom")?f=s.reference.width:g=s.reference.height,this.$_innerNode.style[r==="min"?"minWidth":r==="max"?"maxWidth":"width"]=f!=null?`${f}px`:null,this.$_innerNode.style[r==="min"?"minHeight":r==="max"?"maxHeight":"height"]=g!=null?`${g}px`:null,{data:{skip:!0},reset:{rects:!0}}}})}(this.autoMaxSize||this.autoBoundaryMaxSize)&&(this.$_innerNode.style.maxWidth=null,this.$_innerNode.style.maxHeight=null,e.middleware.push(Vxe({boundary:this.boundary,padding:this.overflowPadding,apply:({availableWidth:r,availableHeight:s})=>{this.$_innerNode.style.maxWidth=r!=null?`${r}px`:null,this.$_innerNode.style.maxHeight=s!=null?`${s}px`:null}})));const n=await Wxe(this.$_referenceNode,this.$_popperNode,e);Object.assign(this.result,{x:n.x,y:n.y,placement:n.placement,strategy:n.strategy,arrow:{...n.middlewareData.arrow,...n.middlewareData.arrowOverflow}})},$_scheduleShow(e,t=!1){if(this.$_updateParentShownChildren(!0),this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),r_&&this.instantMove&&r_.instantMove&&r_!==this.parentPopper){r_.$_applyHide(!0),this.$_applyShow(!0);return}t?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(e,t=!1){if(this.shownChildren.size>0){this.pendingHide=!0;return}this.$_updateParentShownChildren(!1),this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(r_=this),t?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(e){const t=this.delay;return parseInt(t&&t[e]||t||0)},async $_applyShow(e=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=e,!this.isShown&&(this.$_ensureTeleport(),await VD(),await this.$_computePosition(),await this.$_applyShowEffect(),this.positioningDisabled||this.$_registerEventListeners([...cI(this.$_referenceNode),...cI(this.$_popperNode)],"scroll",()=>{this.$_computePosition()}))},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const t=this.$_referenceNode.getBoundingClientRect(),n=this.$_popperNode.querySelector(".v-popper__wrapper"),r=n.parentNode.getBoundingClientRect(),s=t.x+t.width/2-(r.left+n.offsetLeft),o=t.y+t.height/2-(r.top+n.offsetTop);this.result.transformOrigin=`${s}px ${o}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const e=this.showGroup;if(e){let t;for(let n=0;n<Gu.length;n++)t=Gu[n],t.showGroup!==e&&(t.hide(),t.$emit("close-group"))}Gu.push(this),document.body.classList.add("v-popper--some-open");for(const t of bU(this.theme))TU(t).push(this),document.body.classList.add(`v-popper--some-open--${t}`);this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await VD(),this.classes.showFrom=!1,this.classes.showTo=!0,this.noAutoFocus||this.$_popperNode.focus()},async $_applyHide(e=!1){if(this.shownChildren.size>0){this.pendingHide=!0,this.$_hideInProgress=!1;return}if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=e,SU(Gu,this),Gu.length===0&&document.body.classList.remove("v-popper--some-open");for(const n of bU(this.theme)){const r=TU(n);SU(r,this),r.length===0&&document.body.classList.remove(`v-popper--some-open--${n}`)}r_===this&&(r_=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const t=this.disposeTimeout;t!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},t)),this.$_removeEventListeners("scroll"),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await VD(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.isDisposed)return;let e=this.container;if(typeof e=="string"?e=window.document.querySelector(e):e===!1&&(e=this.$_targetNodes[0].parentNode),!e)throw new Error("No container for popover: "+this.container);e.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const e=n=>{this.isShown&&!this.$_hideInProgress||(n.usedByTooltip=!0,!this.$_preventShow&&this.show({event:n}))};this.$_registerTriggerListeners(this.$_targetNodes,xU,this.triggers,this.showTriggers,e),this.$_registerTriggerListeners([this.$_popperNode],xU,this.popperTriggers,this.popperShowTriggers,e);const t=n=>{n.usedByTooltip||this.hide({event:n})};this.$_registerTriggerListeners(this.$_targetNodes,wU,this.triggers,this.hideTriggers,t),this.$_registerTriggerListeners([this.$_popperNode],wU,this.popperTriggers,this.popperHideTriggers,t)},$_registerEventListeners(e,t,n){this.$_events.push({targetNodes:e,eventType:t,handler:n}),e.forEach(r=>r.addEventListener(t,n,G0?{passive:!0}:void 0))},$_registerTriggerListeners(e,t,n,r,s){let o=n;r!=null&&(o=typeof r=="function"?r(o):r),o.forEach(c=>{const i=t[c];i&&this.$_registerEventListeners(e,i,s)})},$_removeEventListeners(e){const t=[];this.$_events.forEach(n=>{const{targetNodes:r,eventType:s,handler:o}=n;!e||e===s?r.forEach(c=>c.removeEventListener(s,o)):t.push(n)}),this.$_events=t},$_refreshListeners(){this.isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())},$_handleGlobalClose(e,t=!1){this.$_showFrameLocked||(this.hide({event:e}),e.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),t&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(e,t){for(const n of this.$_targetNodes){const r=n.getAttribute(e);r&&(n.removeAttribute(e),n.setAttribute(t,r))}},$_applyAttrsToTarget(e){for(const t of this.$_targetNodes)for(const n in e){const r=e[n];r==null?t.removeAttribute(n):t.setAttribute(n,r)}},$_updateParentShownChildren(e){let t=this.parentPopper;for(;t;)e?t.shownChildren.add(this.randomId):(t.shownChildren.delete(this.randomId),t.pendingHide&&t.hide()),t=t.parentPopper},$_isAimingPopper(){const e=this.$_referenceNode.getBoundingClientRect();if(n2>=e.left&&n2<=e.right&&r2>=e.top&&r2<=e.bottom){const t=this.$_popperNode.getBoundingClientRect(),n=n2-Bp,r=r2-$p,s=t.left+t.width/2-Bp+(t.top+t.height/2)-$p+t.width+t.height,o=Bp+n*s,c=$p+r*s;return EM(Bp,$p,o,c,t.left,t.top,t.left,t.bottom)||EM(Bp,$p,o,c,t.left,t.top,t.right,t.top)||EM(Bp,$p,o,c,t.right,t.top,t.right,t.bottom)||EM(Bp,$p,o,c,t.left,t.bottom,t.right,t.bottom)}return!1}},render(){return this.$slots.default(this.slotData)}});if(typeof document<"u"&&typeof window<"u"){if(FQ){const e=G0?{passive:!0,capture:!0}:!0;document.addEventListener("touchstart",t=>MU(t,!0),e),document.addEventListener("touchend",t=>AU(t,!0),e)}else window.addEventListener("mousedown",e=>MU(e,!1),!0),window.addEventListener("click",e=>AU(e,!1),!0);window.addEventListener("resize",qxe)}function MU(e,t){if(Qu.autoHideOnMousedown)$Q(e,t);else for(let n=0;n<Gu.length;n++){const r=Gu[n];try{r.mouseDownContains=r.popperNode().contains(e.target)}catch{}}}function AU(e,t){Qu.autoHideOnMousedown||$Q(e,t)}function $Q(e,t){const n={};for(let r=Gu.length-1;r>=0;r--){const s=Gu[r];try{const o=s.containsGlobalTarget=s.mouseDownContains||s.popperNode().contains(e.target);s.pendingHide=!1,requestAnimationFrame(()=>{if(s.pendingHide=!1,!n[s.randomId]&&CU(s,o,e)){if(s.$_handleGlobalClose(e,t),!e.closeAllPopover&&e.closePopover&&o){let i=s.parentPopper;for(;i;)n[i.randomId]=!0,i=i.parentPopper;return}let c=s.parentPopper;for(;c&&CU(c,c.containsGlobalTarget,e);)c.$_handleGlobalClose(e,t),c=c.parentPopper}})}catch{}}}function CU(e,t,n){return n.closeAllPopover||n.closePopover&&t||Yxe(e,n)&&!t}function Yxe(e,t){if(typeof e.autoHide=="function"){const n=e.autoHide(t);return e.lastAutoHide=n,n}return e.autoHide}function qxe(){for(let e=0;e<Gu.length;e++)Gu[e].$_computePosition()}let Bp=0,$p=0,n2=0,r2=0;typeof window<"u"&&window.addEventListener("mousemove",e=>{Bp=n2,$p=r2,n2=e.clientX,r2=e.clientY},G0?{passive:!0}:void 0);function EM(e,t,n,r,s,o,c,i){const f=((c-s)*(t-o)-(i-o)*(e-s))/((i-o)*(n-e)-(c-s)*(r-t)),g=((n-e)*(t-o)-(r-t)*(e-s))/((i-o)*(n-e)-(c-s)*(r-t));return f>=0&&f<=1&&g>=0&&g<=1}const Xxe={extends:BQ()},Z3=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n};function Zxe(e,t,n,r,s,o){return ln(),Nn("div",{ref:"reference",class:Jn(["v-popper",{"v-popper--shown":e.slotData.isShown}])},[Co(e.$slots,"default",ym(B0(e.slotData)))],2)}const Kxe=Z3(Xxe,[["render",Zxe]]);function Jxe(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var s=e.indexOf("Edge/");return s>0?parseInt(e.substring(s+5,e.indexOf(".",s)),10):-1}let YA;function cL(){cL.init||(cL.init=!0,YA=Jxe()!==-1)}var K3={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){cL(),es(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",YA&&this.$el.appendChild(e),e.data="about:blank",YA||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!YA&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Qxe=zZ();NZ("data-v-b329ee4c");const ewe={class:"resize-observer",tabindex:"-1"};FZ();const twe=Qxe((e,t,n,r,s,o)=>(ln(),Zr("div",ewe)));K3.render=twe;K3.__scopeId="data-v-b329ee4c";K3.__file="src/components/ResizeObserver.vue";const VQ=(e="theme")=>({computed:{themeClass(){return Gxe(this[e])}}}),nwe=ki({name:"VPopperContent",components:{ResizeObserver:K3},mixins:[VQ()],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(e){return e!=null&&!isNaN(e)?`${e}px`:null}}}),rwe=["id","aria-hidden","tabindex","data-popper-placement"],iwe={ref:"inner",class:"v-popper__inner"},swe=qn("div",{class:"v-popper__arrow-outer"},null,-1),owe=qn("div",{class:"v-popper__arrow-inner"},null,-1),awe=[swe,owe];function lwe(e,t,n,r,s,o){const c=eo("ResizeObserver");return ln(),Nn("div",{id:e.popperId,ref:"popover",class:Jn(["v-popper__popper",[e.themeClass,e.classes.popperClass,{"v-popper__popper--shown":e.shown,"v-popper__popper--hidden":!e.shown,"v-popper__popper--show-from":e.classes.showFrom,"v-popper__popper--show-to":e.classes.showTo,"v-popper__popper--hide-from":e.classes.hideFrom,"v-popper__popper--hide-to":e.classes.hideTo,"v-popper__popper--skip-transition":e.skipTransition,"v-popper__popper--arrow-overflow":e.result&&e.result.arrow.overflow,"v-popper__popper--no-positioning":!e.result}]]),style:Ta(e.result?{position:e.result.strategy,transform:`translate3d(${Math.round(e.result.x)}px,${Math.round(e.result.y)}px,0)`}:void 0),"aria-hidden":e.shown?"false":"true",tabindex:e.autoHide?0:void 0,"data-popper-placement":e.result?e.result.placement:void 0,onKeyup:t[2]||(t[2]=QC(i=>e.autoHide&&e.$emit("hide"),["esc"]))},[qn("div",{class:"v-popper__backdrop",onClick:t[0]||(t[0]=i=>e.autoHide&&e.$emit("hide"))}),qn("div",{class:"v-popper__wrapper",style:Ta(e.result?{transformOrigin:e.result.transformOrigin}:void 0)},[qn("div",iwe,[e.mounted?(ln(),Nn(ei,{key:0},[qn("div",null,[Co(e.$slots,"default")]),e.handleResize?(ln(),Zr(c,{key:0,onNotify:t[1]||(t[1]=i=>e.$emit("resize",i))})):fi("",!0)],64)):fi("",!0)],512),qn("div",{ref:"arrow",class:"v-popper__arrow-container",style:Ta(e.result?{left:e.toPx(e.result.arrow.x),top:e.toPx(e.result.arrow.y)}:void 0)},awe,4)],4)],46,rwe)}const jQ=Z3(nwe,[["render",lwe]]),UQ={methods:{show(...e){return this.$refs.popper.show(...e)},hide(...e){return this.$refs.popper.hide(...e)},dispose(...e){return this.$refs.popper.dispose(...e)},onResize(...e){return this.$refs.popper.onResize(...e)}}};let uL=function(){};typeof window<"u"&&(uL=window.Element);const cwe=ki({name:"VPopperWrapper",components:{Popper:Kxe,PopperContent:jQ},mixins:[UQ,VQ("finalTheme")],props:{theme:{type:String,default:null},referenceNode:{type:Function,default:null},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:void 0},positioningDisabled:{type:Boolean,default:void 0},placement:{type:String,default:void 0},delay:{type:[String,Number,Object],default:void 0},distance:{type:[Number,String],default:void 0},skidding:{type:[Number,String],default:void 0},triggers:{type:Array,default:void 0},showTriggers:{type:[Array,Function],default:void 0},hideTriggers:{type:[Array,Function],default:void 0},popperTriggers:{type:Array,default:void 0},popperShowTriggers:{type:[Array,Function],default:void 0},popperHideTriggers:{type:[Array,Function],default:void 0},container:{type:[String,Object,uL,Boolean],default:void 0},boundary:{type:[String,uL],default:void 0},strategy:{type:String,default:void 0},autoHide:{type:[Boolean,Function],default:void 0},handleResize:{type:Boolean,default:void 0},instantMove:{type:Boolean,default:void 0},eagerMount:{type:Boolean,default:void 0},popperClass:{type:[String,Array,Object],default:void 0},computeTransformOrigin:{type:Boolean,default:void 0},autoMinSize:{type:Boolean,default:void 0},autoSize:{type:[Boolean,String],default:void 0},autoMaxSize:{type:Boolean,default:void 0},autoBoundaryMaxSize:{type:Boolean,default:void 0},preventOverflow:{type:Boolean,default:void 0},overflowPadding:{type:[Number,String],default:void 0},arrowPadding:{type:[Number,String],default:void 0},arrowOverflow:{type:Boolean,default:void 0},flip:{type:Boolean,default:void 0},shift:{type:Boolean,default:void 0},shiftCrossAxis:{type:Boolean,default:void 0},noAutoFocus:{type:Boolean,default:void 0},disposeTimeout:{type:Number,default:void 0}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},computed:{finalTheme(){return this.theme??this.$options.vPopperTheme}},methods:{getTargetNodes(){return Array.from(this.$el.children).filter(e=>e!==this.$refs.popperContent.$el)}}});function uwe(e,t,n,r,s,o){const c=eo("PopperContent"),i=eo("Popper");return ln(),Zr(i,iu({ref:"popper"},e.$props,{theme:e.finalTheme,"target-nodes":e.getTargetNodes,"popper-node":()=>e.$refs.popperContent.$el,class:[e.themeClass],onShow:t[0]||(t[0]=()=>e.$emit("show")),onHide:t[1]||(t[1]=()=>e.$emit("hide")),"onUpdate:shown":t[2]||(t[2]=f=>e.$emit("update:shown",f)),onApplyShow:t[3]||(t[3]=()=>e.$emit("apply-show")),onApplyHide:t[4]||(t[4]=()=>e.$emit("apply-hide")),onCloseGroup:t[5]||(t[5]=()=>e.$emit("close-group")),onCloseDirective:t[6]||(t[6]=()=>e.$emit("close-directive")),onAutoHide:t[7]||(t[7]=()=>e.$emit("auto-hide")),onResize:t[8]||(t[8]=()=>e.$emit("resize"))}),{default:Dr(({popperId:f,isShown:g,shouldMountContent:x,skipTransition:w,autoHide:A,show:C,hide:F,handleResize:z,onResize:j,classes:V,result:Y})=>[Co(e.$slots,"default",{shown:g,show:C,hide:F}),Un(c,{ref:"popperContent","popper-id":f,theme:e.finalTheme,shown:g,mounted:x,"skip-transition":w,"auto-hide":A,"handle-resize":z,classes:V,result:Y,onHide:F,onResize:j},{default:Dr(()=>[Co(e.$slots,"popper",{shown:g,hide:F})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:3},16,["theme","target-nodes","popper-node","class"])}const SN=Z3(cwe,[["render",uwe]]),dwe={...SN,name:"VDropdown",vPopperTheme:"dropdown"},hwe={...SN,name:"VMenu",vPopperTheme:"menu"},HQ={...SN,name:"VTooltip",vPopperTheme:"tooltip"},fwe=ki({name:"VTooltipDirective",components:{Popper:BQ(),PopperContent:jQ},mixins:[UQ],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:e=>X2(e.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:e=>X2(e.theme,"loadingContent")},targetNodes:{type:Function,required:!0}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(e){if(typeof this.content=="function"&&this.$_isShown&&(e||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const t=++this.$_fetchId,n=this.content(this);n.then?n.then(r=>this.onResult(t,r)):this.onResult(t,n)}},onResult(e,t){e===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=t)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),pwe=["innerHTML"],mwe=["textContent"];function gwe(e,t,n,r,s,o){const c=eo("PopperContent"),i=eo("Popper");return ln(),Zr(i,iu({ref:"popper"},e.$attrs,{theme:e.theme,"target-nodes":e.targetNodes,"popper-node":()=>e.$refs.popperContent.$el,onApplyShow:e.onShow,onApplyHide:e.onHide}),{default:Dr(({popperId:f,isShown:g,shouldMountContent:x,skipTransition:w,autoHide:A,hide:C,handleResize:F,onResize:z,classes:j,result:V})=>[Un(c,{ref:"popperContent",class:Jn({"v-popper--tooltip-loading":e.loading}),"popper-id":f,theme:e.theme,shown:g,mounted:x,"skip-transition":w,"auto-hide":A,"handle-resize":F,classes:j,result:V,onHide:C,onResize:z},{default:Dr(()=>[e.html?(ln(),Nn("div",{key:0,innerHTML:e.finalContent},null,8,pwe)):(ln(),Nn("div",{key:1,textContent:is(e.finalContent)},null,8,mwe))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","target-nodes","popper-node","onApplyShow","onApplyHide"])}const _we=Z3(fwe,[["render",gwe]]),WQ="v-popper--has-tooltip";function ywe(e,t){let n=e.placement;if(!n&&t)for(const r of zQ)t[r]&&(n=r);return n||(n=X2(e.theme||"tooltip","placement")),n}function GQ(e,t,n){let r;const s=typeof t;return s==="string"?r={content:t}:t&&s==="object"?r=t:r={content:!1},r.placement=ywe(r,n),r.targetNodes=()=>[e],r.referenceNode=()=>e,r}let UD,Z2,vwe=0;function bwe(){if(UD)return;Z2=yr([]),UD=B2({name:"VTooltipDirectiveApp",setup(){return{directives:Z2}},render(){return this.directives.map(t=>Hs(_we,{...t.options,shown:t.shown||t.options.shown,key:t.id}))},devtools:{hide:!0}});const e=document.createElement("div");document.body.appendChild(e),UD.mount(e)}function xwe(e,t,n){bwe();const r=yr(GQ(e,t,n)),s=yr(!1),o={id:vwe++,options:r,shown:s};return Z2.value.push(o),e.classList&&e.classList.add(WQ),e.$_popper={options:r,item:o,show(){s.value=!0},hide(){s.value=!1}}}function YQ(e){if(e.$_popper){const t=Z2.value.indexOf(e.$_popper.item);t!==-1&&Z2.value.splice(t,1),delete e.$_popper,delete e.$_popperOldShown,delete e.$_popperMountTarget}e.classList&&e.classList.remove(WQ)}function IU(e,{value:t,modifiers:n}){const r=GQ(e,t,n);if(!r.content||X2(r.theme||"tooltip","disabled"))YQ(e);else{let s;e.$_popper?(s=e.$_popper,s.options.value=r):s=xwe(e,t,n),typeof t.shown<"u"&&t.shown!==e.$_popperOldShown&&(e.$_popperOldShown=t.shown,t.shown?s.show():s.hide())}}const wwe={beforeMount:IU,updated:IU,beforeUnmount(e){YQ(e)}};function PU(e){e.addEventListener("mousedown",uI),e.addEventListener("click",uI),e.addEventListener("touchstart",qQ,G0?{passive:!0}:!1)}function OU(e){e.removeEventListener("mousedown",uI),e.removeEventListener("click",uI),e.removeEventListener("touchstart",qQ),e.removeEventListener("touchend",XQ),e.removeEventListener("touchcancel",ZQ)}function uI(e){const t=e.currentTarget;e.closePopover=!t.$_vclosepopover_touch,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}function qQ(e){if(e.changedTouches.length===1){const t=e.currentTarget;t.$_vclosepopover_touch=!0;const n=e.changedTouches[0];t.$_vclosepopover_touchPoint=n,t.addEventListener("touchend",XQ),t.addEventListener("touchcancel",ZQ)}}function XQ(e){const t=e.currentTarget;if(t.$_vclosepopover_touch=!1,e.changedTouches.length===1){const n=e.changedTouches[0],r=t.$_vclosepopover_touchPoint;e.closePopover=Math.abs(n.screenY-r.screenY)<20&&Math.abs(n.screenX-r.screenX)<20,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}}function ZQ(e){const t=e.currentTarget;t.$_vclosepopover_touch=!1}const Swe={beforeMount(e,{value:t,modifiers:n}){e.$_closePopoverModifiers=n,(typeof t>"u"||t)&&PU(e)},updated(e,{value:t,oldValue:n,modifiers:r}){e.$_closePopoverModifiers=r,t!==n&&(typeof t>"u"||t?PU(e):OU(e))},beforeUnmount(e){OU(e)}},qut=HQ;function Ewe(e,t={}){e.$_vTooltipInstalled||(e.$_vTooltipInstalled=!0,NQ(Qu,t),e.directive("tooltip",wwe),e.directive("close-popper",Swe),e.component("VTooltip",HQ),e.component("VDropdown",dwe),e.component("VMenu",hwe))}const KQ={version:"5.2.2",install:Ewe,options:Qu},Twe=xs(e=>{e.vueApp.use(KQ)});var qA={exports:{}},Mwe=qA.exports,DU;function Awe(){return DU||(DU=1,(function(e,t){(function(n,r){e.exports=r()})(Mwe,(function(){return function(n,r,s){s.updateLocale=function(o,c){var i=s.Ls[o];if(i)return(c?Object.keys(c):[]).forEach((function(f){i[f]=c[f]})),i}}}))})(qA)),qA.exports}var Cwe=Awe();const Iwe=ih(Cwe);var XA={exports:{}},Pwe=XA.exports,RU;function Owe(){return RU||(RU=1,(function(e,t){(function(n,r){e.exports=r()})(Pwe,(function(){return function(n,r){var s=r.prototype,o=s.format;s.format=function(c){var i=this,f=this.$locale();if(!this.isValid())return o.bind(this)(c);var g=this.$utils(),x=(c||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(w){switch(w){case"Q":return Math.ceil((i.$M+1)/3);case"Do":return f.ordinal(i.$D);case"gggg":return i.weekYear();case"GGGG":return i.isoWeekYear();case"wo":return f.ordinal(i.week(),"W");case"w":case"ww":return g.s(i.week(),w==="w"?1:2,"0");case"W":case"WW":return g.s(i.isoWeek(),w==="W"?1:2,"0");case"k":case"kk":return g.s(String(i.$H===0?24:i.$H),w==="k"?1:2,"0");case"X":return Math.floor(i.$d.getTime()/1e3);case"x":return i.$d.getTime();case"z":return"["+i.offsetName()+"]";case"zzz":return"["+i.offsetName("long")+"]";default:return w}}));return o.bind(this)(x)}}}))})(XA)),XA.exports}var Dwe=Owe();const Rwe=ih(Dwe);var ZA={exports:{}},kwe=ZA.exports,kU;function Lwe(){return kU||(kU=1,(function(e,t){(function(n,r){e.exports=r()})(kwe,(function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(s,o,c){var i,f=function(A,C,F){F===void 0&&(F={});var z=new Date(A),j=(function(V,Y){Y===void 0&&(Y={});var te=Y.timeZoneName||"short",J=V+"|"+te,ee=r[J];return ee||(ee=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:V,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:te}),r[J]=ee),ee})(C,F);return j.formatToParts(z)},g=function(A,C){for(var F=f(A,C),z=[],j=0;j<F.length;j+=1){var V=F[j],Y=V.type,te=V.value,J=n[Y];J>=0&&(z[J]=parseInt(te,10))}var ee=z[3],le=ee===24?0:ee,oe=z[0]+"-"+z[1]+"-"+z[2]+" "+le+":"+z[4]+":"+z[5]+":000",ve=+A;return(c.utc(oe).valueOf()-(ve-=ve%1e3))/6e4},x=o.prototype;x.tz=function(A,C){A===void 0&&(A=i);var F,z=this.utcOffset(),j=this.toDate(),V=j.toLocaleString("en-US",{timeZone:A}),Y=Math.round((j-new Date(V))/1e3/60),te=15*-Math.round(j.getTimezoneOffset()/15)-Y;if(!Number(te))F=this.utcOffset(0,C);else if(F=c(V,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(te,!0),C){var J=F.utcOffset();F=F.add(z-J,"minute")}return F.$x.$timezone=A,F},x.offsetName=function(A){var C=this.$x.$timezone||c.tz.guess(),F=f(this.valueOf(),C,{timeZoneName:A}).find((function(z){return z.type.toLowerCase()==="timezonename"}));return F&&F.value};var w=x.startOf;x.startOf=function(A,C){if(!this.$x||!this.$x.$timezone)return w.call(this,A,C);var F=c(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return w.call(F,A,C).tz(this.$x.$timezone,!0)},c.tz=function(A,C,F){var z=F&&C,j=F||C||i,V=g(+c(),j);if(typeof A!="string")return c(A).tz(j);var Y=(function(le,oe,ve){var se=le-60*oe*1e3,ie=g(se,ve);if(oe===ie)return[se,oe];var pe=g(se-=60*(ie-oe)*1e3,ve);return ie===pe?[se,ie]:[le-60*Math.min(ie,pe)*1e3,Math.max(ie,pe)]})(c.utc(A,z).valueOf(),V,j),te=Y[0],J=Y[1],ee=c(te).utcOffset(J);return ee.$x.$timezone=j,ee},c.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},c.tz.setDefault=function(A){i=A}}}))})(ZA)),ZA.exports}var Nwe=Lwe();const Fwe=ih(Nwe);var KA={exports:{}},zwe=KA.exports,LU;function Bwe(){return LU||(LU=1,(function(e,t){(function(n,r){e.exports=r()})(zwe,(function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(o,c,i){var f=c.prototype;i.utc=function(z){var j={date:z,utc:!0,args:arguments};return new c(j)},f.utc=function(z){var j=i(this.toDate(),{locale:this.$L,utc:!0});return z?j.add(this.utcOffset(),n):j},f.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var g=f.parse;f.parse=function(z){z.utc&&(this.$u=!0),this.$utils().u(z.$offset)||(this.$offset=z.$offset),g.call(this,z)};var x=f.init;f.init=function(){if(this.$u){var z=this.$d;this.$y=z.getUTCFullYear(),this.$M=z.getUTCMonth(),this.$D=z.getUTCDate(),this.$W=z.getUTCDay(),this.$H=z.getUTCHours(),this.$m=z.getUTCMinutes(),this.$s=z.getUTCSeconds(),this.$ms=z.getUTCMilliseconds()}else x.call(this)};var w=f.utcOffset;f.utcOffset=function(z,j){var V=this.$utils().u;if(V(z))return this.$u?0:V(this.$offset)?w.call(this):this.$offset;if(typeof z=="string"&&(z=(function(ee){ee===void 0&&(ee="");var le=ee.match(r);if(!le)return null;var oe=(""+le[0]).match(s)||["-",0,0],ve=oe[0],se=60*+oe[1]+ +oe[2];return se===0?0:ve==="+"?se:-se})(z),z===null))return this;var Y=Math.abs(z)<=16?60*z:z,te=this;if(j)return te.$offset=Y,te.$u=z===0,te;if(z!==0){var J=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(te=this.local().add(Y+J,n)).$offset=Y,te.$x.$localOffset=J}else te=this.utc();return te};var A=f.format;f.format=function(z){var j=z||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return A.call(this,j)},f.valueOf=function(){var z=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*z},f.isUTC=function(){return!!this.$u},f.toISOString=function(){return this.toDate().toISOString()},f.toString=function(){return this.toDate().toUTCString()};var C=f.toDate;f.toDate=function(z){return z==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():C.call(this)};var F=f.diff;f.diff=function(z,j,V){if(z&&this.$u===z.$u)return F.call(this,z,j,V);var Y=this.local(),te=i(z).local();return F.call(Y,te,j,V)}}}))})(KA)),KA.exports}var $we=Bwe();const Vwe=ih($we);var JA={exports:{}},jwe=JA.exports,NU;function Uwe(){return NU||(NU=1,(function(e,t){(function(n,r){e.exports=r()})(jwe,(function(){return function(n,r,s){n=n||{};var o=r.prototype,c={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(g,x,w,A){return o.fromToBase(g,x,w,A)}s.en.relativeTime=c,o.fromToBase=function(g,x,w,A,C){for(var F,z,j,V=w.$locale().relativeTime||c,Y=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],te=Y.length,J=0;J<te;J+=1){var ee=Y[J];ee.d&&(F=A?s(g).diff(w,ee.d,!0):w.diff(g,ee.d,!0));var le=(n.rounding||Math.round)(Math.abs(F));if(j=F>0,le<=ee.r||!ee.r){le<=1&&J>0&&(ee=Y[J-1]);var oe=V[ee.l];C&&(le=C(""+le)),z=typeof oe=="string"?oe.replace("%d",le):oe(le,x,ee.l,j);break}}if(x)return z;var ve=j?V.future:V.past;return typeof ve=="function"?ve(z):ve.replace("%s",z)},o.to=function(g,x){return i(g,x,this,!0)},o.from=function(g,x){return i(g,x,this)};var f=function(g){return g.$u?s.utc():s()};o.toNow=function(g){return this.to(f(this),g)},o.fromNow=function(g){return this.from(f(this),g)}}}))})(JA)),JA.exports}var Hwe=Uwe();const Wwe=ih(Hwe);Jd.extend(Iwe);Jd.extend(Rwe);Jd.extend(Fwe);Jd.extend(Vwe);Jd.extend(Wwe);const Gwe=xs(async e=>e.provide("dayjs",Jd)),Ur=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ed="8.55.0",Fr=globalThis;function NS(e,t,n){const r=Fr,s=r.__SENTRY__=r.__SENTRY__||{},o=s[ed]=s[ed]||{};return o[e]||(o[e]=t())}const Qm=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ywe="Sentry Logger ",dI=["debug","info","warn","error","log","assert","trace"],hI={};function su(e){if(!("console"in Fr))return e();const t=Fr.console,n={},r=Object.keys(hI);r.forEach(s=>{const o=hI[s];n[s]=t[s],t[s]=o});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function qwe(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Qm?dI.forEach(n=>{t[n]=(...r)=>{e&&su(()=>{Fr.console[n](`${Ywe}[${n}]:`,...r)})}}):dI.forEach(n=>{t[n]=()=>{}}),t}const En=NS("logger",qwe),JQ=50,eh="?",FU=/\(error: (.*)\)/,zU=/captureMessage|captureException/;function QQ(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const o=[],c=n.split(`
`);for(let i=r;i<c.length;i++){const f=c[i];if(f.length>1024)continue;const g=FU.test(f)?f.replace(FU,"$1"):f;if(!g.match(/\S*Error: /)){for(const x of t){const w=x(g);if(w){o.push(w);break}}if(o.length>=JQ+s)break}}return Zwe(o.slice(s))}}function Xwe(e){return Array.isArray(e)?QQ(...e):e}function Zwe(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(TM(t).function||"")&&t.pop(),t.reverse(),zU.test(TM(t).function||"")&&(t.pop(),zU.test(TM(t).function||"")&&t.pop()),t.slice(0,JQ).map(n=>({...n,filename:n.filename||TM(t).filename,function:n.function||eh}))}function TM(e){return e[e.length-1]||{}}const HD="<anonymous>";function lf(e){try{return!e||typeof e!="function"?HD:e.name||HD}catch{return HD}}function dL(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const QA={},BU={};function eg(e,t){QA[e]=QA[e]||[],QA[e].push(t)}function tg(e,t){if(!BU[e]){BU[e]=!0;try{t()}catch(n){Qm&&En.error(`Error while instrumenting ${e}`,n)}}}function Zc(e,t){const n=e&&QA[e];if(n)for(const r of n)try{r(t)}catch(s){Qm&&En.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${lf(r)}
Error:`,s)}}let WD=null;function eee(e){const t="error";eg(t,e),tg(t,Kwe)}function Kwe(){WD=Fr.onerror,Fr.onerror=function(e,t,n,r,s){return Zc("error",{column:r,error:s,line:n,msg:e,url:t}),WD?WD.apply(this,arguments):!1},Fr.onerror.__SENTRY_INSTRUMENTED__=!0}let GD=null;function tee(e){const t="unhandledrejection";eg(t,e),tg(t,Jwe)}function Jwe(){GD=Fr.onunhandledrejection,Fr.onunhandledrejection=function(e){return Zc("unhandledrejection",e),GD?GD.apply(this,arguments):!0},Fr.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Af(){return EN(Fr),Fr}function EN(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ed,t[ed]=t[ed]||{}}const nee=Object.prototype.toString;function Em(e){switch(nee.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return cf(e,Error)}}function O1(e,t){return nee.call(e)===`[object ${t}]`}function ree(e){return O1(e,"ErrorEvent")}function $U(e){return O1(e,"DOMError")}function Qwe(e){return O1(e,"DOMException")}function Kh(e){return O1(e,"String")}function TN(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function MN(e){return e===null||TN(e)||typeof e!="object"&&typeof e!="function"}function J_(e){return O1(e,"Object")}function J3(e){return typeof Event<"u"&&cf(e,Event)}function e2e(e){return typeof Element<"u"&&cf(e,Element)}function t2e(e){return O1(e,"RegExp")}function FS(e){return!!(e&&e.then&&typeof e.then=="function")}function n2e(e){return J_(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function cf(e,t){try{return e instanceof t}catch{return!1}}function iee(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}const T0=Fr,r2e=80;function uf(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let o=0,c=0;const i=" > ",f=i.length;let g;const x=Array.isArray(t)?t:t.keyAttrs,w=!Array.isArray(t)&&t.maxStringLength||r2e;for(;n&&o++<r&&(g=i2e(n,x),!(g==="html"||o>1&&c+s.length*f+g.length>=w));)s.push(g),c+=g.length,n=n.parentNode;return s.reverse().join(i)}catch{return"<unknown>"}}function i2e(e,t){const n=e,r=[];if(!n||!n.tagName)return"";if(T0.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t&&t.length?t.filter(c=>n.getAttribute(c)).map(c=>[c,n.getAttribute(c)]):null;if(s&&s.length)s.forEach(c=>{r.push(`[${c[0]}="${c[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const c=n.className;if(c&&Kh(c)){const i=c.split(/\s+/);for(const f of i)r.push(`.${f}`)}}const o=["aria-label","type","name","title","alt"];for(const c of o){const i=n.getAttribute(c);i&&r.push(`[${c}="${i}"]`)}return r.join("")}function AN(){try{return T0.document.location.href}catch{return""}}function s2e(e){return T0.document&&T0.document.querySelector?T0.document.querySelector(e):null}function see(e){if(!T0.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Tm(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function YD(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let s=Math.max(t-60,0);s<5&&(s=0);let o=Math.min(s+140,r);return o>r-5&&(o=r),o===r&&(s=Math.max(o-140,0)),n=n.slice(s,o),s>0&&(n=`'{snip} ${n}`),o<r&&(n+=" {snip}"),n}function fI(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{iee(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function o2e(e,t,n=!1){return Kh(e)?t2e(t)?t.test(e):Kh(t)?n?e===t:e.includes(t):!1:!1}function Mm(e,t=[],n=!1){return t.some(r=>o2e(e,r,n))}function wl(e,t,n){if(!(t in e))return;const r=e[t],s=n(r);typeof s=="function"&&oee(s,r);try{e[t]=s}catch{Qm&&En.log(`Failed to replace method "${t}" in object`,e)}}function rc(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Qm&&En.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function oee(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,rc(e,"__sentry_original__",t)}catch{}}function CN(e){return e.__sentry_original__}function aee(e){if(Em(e))return{message:e.message,name:e.name,stack:e.stack,...jU(e)};if(J3(e)){const t={type:e.type,target:VU(e.target),currentTarget:VU(e.currentTarget),...jU(e)};return typeof CustomEvent<"u"&&cf(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function VU(e){try{return e2e(e)?uf(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function jU(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function a2e(e,t=40){const n=Object.keys(aee(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return Tm(r,t);for(let s=n.length;s>0;s--){const o=n.slice(0,s).join(", ");if(!(o.length>t))return s===n.length?o:Tm(o,t)}return""}function Eo(e){return hL(e,new Map)}function hL(e,t){if(l2e(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const s of Object.getOwnPropertyNames(e))typeof e[s]<"u"&&(r[s]=hL(e[s],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(s=>{r.push(hL(s,t))}),r}return e}function l2e(e){if(!J_(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const lee=1e3;function zS(){return Date.now()/lee}function c2e(){const{performance:e}=Fr;if(!e||!e.now)return zS;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/lee}const Gs=c2e(),Aa=(()=>{const{performance:e}=Fr;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=s<t,c=e.timing&&e.timing.navigationStart,f=typeof c=="number"?Math.abs(c+n-r):t,g=f<t;return o||g?s<=f?e.timeOrigin:c:r})();function Tl(){const e=Fr,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function cee(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Xp(e){const{message:t,event_id:n}=e;if(t)return t;const r=cee(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function fL(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{};o.value||(o.value=t||""),o.type||(o.type="Error")}function Lm(e,t){const n=cee(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const o={...s&&s.data,...t.data};n.mechanism.data=o}}function u2e(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map(c=>YD(c,0));const o=Math.min(r-1,s);t.context_line=YD(e[o],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map(c=>YD(c,0))}function UU(e){if(d2e(e))return!0;try{rc(e,"__sentry_captured__",!0)}catch{}return!1}function d2e(e){try{return e.__sentry_captured__}catch{}}var kh;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(kh||(kh={}));function df(e){return new Wc(t=>{t(e)})}function pI(e){return new Wc((t,n)=>{n(e)})}class Wc{constructor(t){Wc.prototype.__init.call(this),Wc.prototype.__init2.call(this),Wc.prototype.__init3.call(this),Wc.prototype.__init4.call(this),this._state=kh.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new Wc((r,s)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(c){s(c)}},o=>{if(!n)s(o);else try{r(n(o))}catch(c){s(c)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Wc((n,r)=>{let s,o;return this.then(c=>{o=!1,s=c,t&&t()},c=>{o=!0,s=c,t&&t()}).then(()=>{if(o){r(s);return}n(s)})})}__init(){this._resolve=t=>{this._setResult(kh.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(kh.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===kh.PENDING){if(FS(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===kh.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===kh.RESOLVED&&n[1](this._value),this._state===kh.REJECTED&&n[2](this._value),n[0]=!0)})}}}function h2e(e){const t=Gs(),n={sid:Tl(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>p2e(n)};return e&&Y0(n,e),n}function Y0(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Gs(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Tl()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function f2e(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),Y0(e,n)}function p2e(e){return Eo({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function hf(){return Tl()}function Nm(){return Tl().substring(16)}function Q3(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&t&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=Q3(r[s],t[s],n-1));return r}const pL="_sentrySpan";function Q_(e,t){t?rc(e,pL,t):delete e[pL]}function mI(e){return e[pL]}const m2e=100;class IN{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:hf(),spanId:Nm()}}clone(){const t=new IN;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Q_(t,mI(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Y0(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,[r,s]=n instanceof ff?[n.getScopeData(),n.getRequestSession()]:J_(n)?[t,t.requestSession]:[],{tags:o,extra:c,user:i,contexts:f,level:g,fingerprint:x=[],propagationContext:w}=r||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...c},this._contexts={...this._contexts,...f},i&&Object.keys(i).length&&(this._user=i),g&&(this._level=g),x.length&&(this._fingerprint=x),w&&(this._propagationContext=w),s&&(this._requestSession=s),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Q_(this,void 0),this._attachments=[],this.setPropagationContext({traceId:hf()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:m2e;if(r<=0)return this;const s={timestamp:zS(),...t};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:mI(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Q3(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext={spanId:Nm(),...t},this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:Tl();if(!this._client)return En.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r&&r.event_id?r.event_id:Tl();if(!this._client)return En.warn("No client configured on scope - will not capture message!"),s;const o=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:s},this),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:Tl();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(En.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}const ff=IN;function g2e(){return NS("defaultCurrentScope",()=>new ff)}function _2e(){return NS("defaultIsolationScope",()=>new ff)}class y2e{constructor(t,n){let r;t?r=t:r=new ff;let s;n?s=n:s=new ff,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return FS(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function q0(){const e=Af(),t=EN(e);return t.stack=t.stack||new y2e(g2e(),_2e())}function v2e(e){return q0().withScope(e)}function b2e(e,t){const n=q0();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function HU(e){return q0().withScope(()=>e(q0().getIsolationScope()))}function x2e(){return{withIsolationScope:HU,withScope:v2e,withSetScope:b2e,withSetIsolationScope:(e,t)=>HU(t),getCurrentScope:()=>q0().getScope(),getIsolationScope:()=>q0().getIsolationScope()}}function ng(e){const t=EN(e);return t.acs?t.acs:x2e()}function hi(){const e=Af();return ng(e).getCurrentScope()}function $o(){const e=Af();return ng(e).getIsolationScope()}function eP(){return NS("globalScope",()=>new ff)}function ou(...e){const t=Af(),n=ng(t);if(e.length===2){const[r,s]=e;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(e[0])}function w2e(...e){const t=Af(),n=ng(t);if(e.length===2){const[r,s]=e;return r?n.withSetIsolationScope(r,s):n.withIsolationScope(s)}return n.withIsolationScope(e[0])}function mr(){return hi().getClient()}function S2e(e){const t=e.getPropagationContext(),{traceId:n,spanId:r,parentSpanId:s}=t;return Eo({trace_id:n,span_id:r,parent_span_id:s})}const mL="_sentryMetrics";function gL(e){const t=e[mL];if(!t)return;const n={};for(const[,[r,s]]of t)(n[r]||(n[r]=[])).push(Eo(s));return n}function E2e(e,t,n,r,s,o,c){const f=e[mL]||(e[mL]=new Map),g=`${t}:${n}@${s}`,x=f.get(c);if(x){const[,w]=x;f.set(c,[g,{min:Math.min(w.min,r),max:Math.max(w.max,r),count:w.count+=1,sum:w.sum+=r,tags:w.tags}])}else f.set(c,[g,{min:r,max:r,count:1,sum:r,tags:o}])}const Sl="sentry.source",PN="sentry.sample_rate",Fm="sentry.op",Ys="sentry.origin",_L="sentry.idle_span_finish_reason",tP="sentry.measurement_unit",nP="sentry.measurement_value",yL="sentry.custom_span_name",T2e="sentry.profile_id",ON="sentry.exclusive_time",M2e=0,uee=1,Fo=2;function dee(e){if(e<400&&e>=100)return{code:uee};if(e>=400&&e<500)switch(e){case 401:return{code:Fo,message:"unauthenticated"};case 403:return{code:Fo,message:"permission_denied"};case 404:return{code:Fo,message:"not_found"};case 409:return{code:Fo,message:"already_exists"};case 413:return{code:Fo,message:"failed_precondition"};case 429:return{code:Fo,message:"resource_exhausted"};case 499:return{code:Fo,message:"cancelled"};default:return{code:Fo,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:Fo,message:"unimplemented"};case 503:return{code:Fo,message:"unavailable"};case 504:return{code:Fo,message:"deadline_exceeded"};default:return{code:Fo,message:"internal_error"}}return{code:Fo,message:"unknown_error"}}function DN(e,t){e.setAttribute("http.response.status_code",t);const n=dee(t);n.message!=="unknown_error"&&e.setStatus(n)}const RN="sentry-",A2e=/^sentry-/,C2e=8192;function hee(e){const t=I2e(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,o])=>{if(s.match(A2e)){const c=s.slice(RN.length);r[c]=o}return r},{});if(Object.keys(n).length>0)return n}function fee(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${RN}${r}`]=s),n),{});return P2e(t)}function I2e(e){if(!(!e||!Kh(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=WU(n);return Object.entries(r).forEach(([s,o])=>{t[s]=o}),t},{}):WU(e)}function WU(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function P2e(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const o=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,c=s===0?o:`${t},${o}`;return c.length>C2e?(Qm&&En.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):c},"")}const pee=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function O2e(e){if(!e)return;const t=e.match(pee);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function mee(e,t){const n=O2e(e),r=hee(t);if(!n||!n.traceId)return{traceId:hf(),spanId:Nm()};const{traceId:s,parentSpanId:o,parentSampled:c}=n,i=Nm();return{traceId:s,parentSpanId:o,spanId:i,sampled:c,dsc:r||{}}}function gee(e=hf(),t=Nm(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}const _ee=0,yee=1;let GU=!1;function D2e(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:o,status:c,origin:i}=pi(e);return Eo({parent_span_id:o,span_id:t,trace_id:n,data:r,op:s,status:c,origin:i})}function R2e(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:pi(e).parent_span_id,o=r?Nm():t;return Eo({parent_span_id:s,span_id:o,trace_id:n})}function vee(e){const{traceId:t,spanId:n}=e.spanContext(),r=xy(e);return gee(t,n,r)}function F_(e){return typeof e=="number"?YU(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?YU(e.getTime()):Gs()}function YU(e){return e>9999999999?e/1e3:e}function pi(e){if(L2e(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(k2e(e)){const{attributes:r,startTime:s,name:o,endTime:c,parentSpanId:i,status:f}=e;return Eo({span_id:t,trace_id:n,data:r,description:o,parent_span_id:i,start_timestamp:F_(s),timestamp:F_(c)||void 0,status:bee(f),op:r[Fm],origin:r[Ys],_metrics_summary:gL(e)})}return{span_id:t,trace_id:n}}catch{return{}}}function k2e(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function L2e(e){return typeof e.getSpanJSON=="function"}function xy(e){const{traceFlags:t}=e.spanContext();return t===yee}function bee(e){if(!(!e||e.code===M2e))return e.code===uee?"ok":e.message||"unknown_error"}const z_="_sentryChildSpans",vL="_sentryRootSpan";function xee(e,t){const n=e[vL]||e;rc(t,vL,n),e[z_]?e[z_].add(t):rc(e,z_,new Set([t]))}function N2e(e,t){e[z_]&&e[z_].delete(t)}function i2(e){const t=new Set;function n(r){if(!t.has(r)&&xy(r)){t.add(r);const s=r[z_]?Array.from(r[z_]):[];for(const o of s)n(o)}}return n(e),Array.from(t)}function go(e){return e[vL]||e}function qs(){const e=Af(),t=ng(e);return t.getActiveSpan?t.getActiveSpan():mI(hi())}function F2e(e,t,n,r,s,o){const c=qs();c&&E2e(c,e,t,n,r,s,o)}function wee(){GU||(su(()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")}),GU=!0)}function z2e(e,t){e.updateName(t),e.setAttributes({[Sl]:"custom",[yL]:t})}let qU=!1;function kN(){qU||(qU=!0,eee(bL),tee(bL))}function bL(){const e=qs(),t=e&&go(e);if(t){const n="internal_error";Ur&&En.log(`[Tracing] Root span: ${n} -> Global error occurred`),t.setStatus({code:Fo,message:n})}}bL.tag="sentry_tracingErrorCallback";const See="_sentryScope",Eee="_sentryIsolationScope";function B2e(e,t,n){e&&(rc(e,Eee,n),rc(e,See,t))}function XU(e){return{scope:e[See],isolationScope:e[Eee]}}function $2e(){kN()}function pf(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=mr(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}class rg{constructor(t={}){this._traceId=t.traceId||hf(),this._spanId=t.spanId||Nm()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:_ee}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function LN(e,t,n=()=>{}){let r;try{r=e()}catch(s){throw t(s),n(),s}return V2e(r,t,n)}function V2e(e,t,n){return FS(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}const rP="production",Tee="_frozenDsc";function ZU(e,t){rc(e,Tee,t)}function Mee(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s=Eo({environment:n.environment||rP,release:n.release,public_key:r,trace_id:e});return t.emit("createDsc",s),s}function Aee(e,t){const n=t.getPropagationContext();return n.dsc||Mee(n.traceId,e)}function ig(e){const t=mr();if(!t)return{};const n=go(e),r=n[Tee];if(r)return r;const s=n.spanContext().traceState,o=s&&s.get("sentry.dsc"),c=o&&hee(o);if(c)return c;const i=Mee(e.spanContext().traceId,t),f=pi(n),g=f.data||{},x=g[PN];x!=null&&(i.sample_rate=`${x}`);const w=g[Sl],A=f.description;return w!=="url"&&A&&(i.transaction=A),pf()&&(i.sampled=String(xy(n))),t.emit("createDsc",i,n),i}function j2e(e){const t=ig(e);return fee(t)}function U2e(e){if(!Ur)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=pi(e),{spanId:s}=e.spanContext(),o=xy(e),c=go(e),i=c===e,f=`[Tracing] Starting ${o?"sampled":"unsampled"} ${i?"root ":""}span`,g=[`op: ${n}`,`name: ${t}`,`ID: ${s}`];if(r&&g.push(`parent ID: ${r}`),!i){const{op:x,description:w}=pi(c);g.push(`root ID: ${c.spanContext().spanId}`),x&&g.push(`root op: ${x}`),w&&g.push(`root description: ${w}`)}En.log(`${f}
  ${g.join(`
  `)}`)}function H2e(e){if(!Ur)return;const{description:t="< unknown name >",op:n="< unknown op >"}=pi(e),{spanId:r}=e.spanContext(),o=go(e)===e,c=`[Tracing] Finishing "${n}" ${o?"root ":""}span "${t}" with ID ${r}`;En.log(c)}function gI(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(typeof t!="number"||isNaN(t)||t<0||t>1){Ur&&En.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`);return}return t}function W2e(e,t){if(!pf(e))return[!1];const n=$o().getScopeData().sdkProcessingMetadata.normalizedRequest,r={...t,normalizedRequest:t.normalizedRequest||n};let s;typeof e.tracesSampler=="function"?s=e.tracesSampler(r):r.parentSampled!==void 0?s=r.parentSampled:typeof e.tracesSampleRate<"u"?s=e.tracesSampleRate:s=1;const o=gI(s);return o===void 0?(Ur&&En.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):o?Math.random()<o?[!0,o]:(Ur&&En.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[!1,o]):(Ur&&En.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,o])}const G2e=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Y2e(e){return e==="http"||e==="https"}function wy(e,t=!1){const{host:n,path:r,pass:s,port:o,projectId:c,protocol:i,publicKey:f}=e;return`${i}://${f}${t&&s?`:${s}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${c}`}function Cee(e){const t=G2e.exec(e);if(!t){su(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",o="",c="",i=""]=t.slice(1);let f="",g=i;const x=g.split("/");if(x.length>1&&(f=x.slice(0,-1).join("/"),g=x.pop()),g){const w=g.match(/^\d+/);w&&(g=w[0])}return Iee({host:o,pass:s,path:f,projectId:g,port:c,protocol:n,publicKey:r})}function Iee(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function q2e(e){if(!Qm)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(c=>e[c]?!1:(En.error(`Invalid Sentry Dsn: ${c} missing`),!0))?!1:n.match(/^\d+$/)?Y2e(r)?t&&isNaN(parseInt(t,10))?(En.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(En.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(En.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Pee(e){const t=typeof e=="string"?Cee(e):Iee(e);if(!(!t||!q2e(t)))return t}function X2e(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(s){if(e)return t.has(s)?!0:(t.add(s),!1);for(let o=0;o<t.length;o++)if(t[o]===s)return!0;return t.push(s),!1}function r(s){if(e)t.delete(s);else for(let o=0;o<t.length;o++)if(t[o]===s){t.splice(o,1);break}}return[n,r]}function Hc(e,t=100,n=1/0){try{return xL("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Oee(e,t=3,n=100*1024){const r=Hc(e,t);return Q2e(r)>n?Oee(e,t-1,n):r}function xL(e,t,n=1/0,r=1/0,s=X2e()){const[o,c]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const i=Z2e(e,t);if(!i.startsWith("[object "))return i;if(t.__sentry_skip_normalization__)return t;const f=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(f===0)return i.replace("object ","");if(o(t))return"[Circular ~]";const g=t;if(g&&typeof g.toJSON=="function")try{const C=g.toJSON();return xL("",C,f-1,r,s)}catch{}const x=Array.isArray(t)?[]:{};let w=0;const A=aee(t);for(const C in A){if(!Object.prototype.hasOwnProperty.call(A,C))continue;if(w>=r){x[C]="[MaxProperties ~]";break}const F=A[C];x[C]=xL(C,F,f-1,r,s),w++}return c(t),x}function Z2e(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(iee(t))return"[VueViewModel]";if(n2e(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${lf(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=K2e(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function K2e(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function J2e(e){return~-encodeURI(e).split(/%..|./).length}function Q2e(e){return J2e(JSON.stringify(e))}function Cf(e,t=[]){return[e,t]}function eSe(e,t){const[n,r]=e;return[n,[...r,t]]}function ey(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function KU(e,t){return ey(e,(n,r)=>t.includes(r))}function _I(e){return Fr.__SENTRY__&&Fr.__SENTRY__.encodePolyfill?Fr.__SENTRY__.encodePolyfill(e):new TextEncoder().encode(e)}function tSe(e){return Fr.__SENTRY__&&Fr.__SENTRY__.decodePolyfill?Fr.__SENTRY__.decodePolyfill(e):new TextDecoder().decode(e)}function yI(e){const[t,n]=e;let r=JSON.stringify(t);function s(o){typeof r=="string"?r=typeof o=="string"?r+o:[_I(r),o]:r.push(typeof o=="string"?_I(o):o)}for(const o of n){const[c,i]=o;if(s(`
${JSON.stringify(c)}
`),typeof i=="string"||i instanceof Uint8Array)s(i);else{let f;try{f=JSON.stringify(i)}catch{f=JSON.stringify(Hc(i))}s(f)}}return typeof r=="string"?r:nSe(r)}function nSe(e){const t=e.reduce((s,o)=>s+o.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function rSe(e){let t=typeof e=="string"?_I(e):e;function n(c){const i=t.subarray(0,c);return t=t.subarray(c+1),i}function r(){let c=t.indexOf(10);return c<0&&(c=t.length),JSON.parse(tSe(n(c)))}const s=r(),o=[];for(;t.length;){const c=r(),i=typeof c.length=="number"?c.length:void 0;o.push([c,i?n(i):r()])}return[s,o]}function iSe(e){return[{type:"span"},e]}function sSe(e){const t=typeof e.data=="string"?_I(e.data):e.data;return[Eo({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const oSe={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function JU(e){return oSe[e]}function NN(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Dee(e,t,n,r){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:wy(r)},...s&&{trace:Eo({...s})}}}function aSe(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function lSe(e,t,n,r){const s=NN(n),o={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:wy(t)}},c="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Cf(o,[c])}function cSe(e,t,n,r){const s=NN(n),o=e.type&&e.type!=="replay_event"?e.type:"event";aSe(e,n&&n.sdk);const c=Dee(e,s,r,t);return delete e.sdkProcessingMetadata,Cf(c,[[{type:o},e]])}function uSe(e,t){function n(x){return!!x.trace_id&&!!x.public_key}const r=ig(e[0]),s=t&&t.getDsn(),o=t&&t.getOptions().tunnel,c={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!o&&s&&{dsn:wy(s)}},i=t&&t.getOptions().beforeSendSpan,f=i?x=>{const w=i(pi(x));return w||wee(),w}:x=>pi(x),g=[];for(const x of e){const w=f(x);w&&g.push(iSe(w))}return Cf(c,g)}function Ree(e,t,n,r=qs()){const s=r&&go(r);s&&(Ur&&En.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),s.addEvent(e,{[nP]:t,[tP]:n}))}function QU(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},s=r[tP],o=r[nP];typeof s=="string"&&typeof o=="number"&&(t[n.name]={value:o,unit:s})}),t}const e9=1e3;class FN{constructor(t={}){this._traceId=t.traceId||hf(),this._spanId=t.spanId||Nm(),this._startTime=t.startTimestamp||Gs(),this._attributes={},this.setAttributes({[Ys]:"manual",[Fm]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this}addLinks(t){return this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?yee:_ee}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=F_(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(Sl,"custom"),this}end(t){this._endTime||(this._endTime=F_(t),H2e(this),this._onSpanEnded())}getSpanJSON(){return Eo({data:this._attributes,description:this._name,op:this._attributes[Fm],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:bee(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ys],_metrics_summary:gL(this),profile_id:this._attributes[T2e],exclusive_time:this._attributes[ON],measurements:QU(this._events),is_segment:this._isStandaloneSpan&&go(this)===this||void 0,segment_id:this._isStandaloneSpan?go(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){Ur&&En.log("[Tracing] Adding an event to span:",t);const s=t9(n)?n:r||Gs(),o=t9(n)?{}:n||{},c={name:t,time:F_(s),attributes:o};return this._events.push(c),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=mr();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===go(this)))return;if(this._isStandaloneSpan){this._sampled?hSe(uSe([this],t)):(Ur&&En.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(XU(this).scope||hi()).captureEvent(r)}_convertSpanToTransaction(){if(!n9(pi(this)))return;this._name||(Ur&&En.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=XU(this),s=(t||hi()).getClient()||mr();if(this._sampled!==!0){Ur&&En.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),s&&s.recordDroppedEvent("sample_rate","transaction");return}const c=i2(this).filter(w=>w!==this&&!dSe(w)).map(w=>pi(w)).filter(n9),i=this._attributes[Sl];delete this._attributes[yL],c.forEach(w=>{w.data&&delete w.data[yL]});const f={contexts:{trace:D2e(this)},spans:c.length>e9?c.sort((w,A)=>w.start_timestamp-A.start_timestamp).slice(0,e9):c,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,...Eo({dynamicSamplingContext:ig(this)})},_metrics_summary:gL(this),...i&&{transaction_info:{source:i}}},g=QU(this._events);return g&&Object.keys(g).length&&(Ur&&En.log("[Measurements] Adding measurements to transaction event",JSON.stringify(g,void 0,2)),f.measurements=g),f}}function t9(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function n9(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function dSe(e){return e instanceof FN&&e.isStandaloneSpan()}function hSe(e){const t=mr();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}const zN="__SENTRY_SUPPRESS_TRACING__";function fSe(e,t){const n=$S();if(n.startSpan)return n.startSpan(e,t);const r=$N(e),{forceTransaction:s,parentSpan:o}=e;return ou(e.scope,()=>Lee(o)(()=>{const i=hi(),f=VN(i),x=e.onlyIfParent&&!f?new rg:BN({parentSpan:f,spanArguments:r,forceTransaction:s,scope:i});return Q_(i,x),LN(()=>t(x),()=>{const{status:w}=pi(x);x.isRecording()&&(!w||w==="ok")&&x.setStatus({code:Fo,message:"internal_error"})},()=>x.end())}))}function kee(e,t){const n=$S();if(n.startSpanManual)return n.startSpanManual(e,t);const r=$N(e),{forceTransaction:s,parentSpan:o}=e;return ou(e.scope,()=>Lee(o)(()=>{const i=hi(),f=VN(i),x=e.onlyIfParent&&!f?new rg:BN({parentSpan:f,spanArguments:r,forceTransaction:s,scope:i});Q_(i,x);function w(){x.end()}return LN(()=>t(x,w),()=>{const{status:A}=pi(x);x.isRecording()&&(!A||A==="ok")&&x.setStatus({code:Fo,message:"internal_error"})})}))}function zm(e){const t=$S();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=$N(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?c=>ou(e.scope,c):s!==void 0?c=>BS(s,c):c=>c())(()=>{const c=hi(),i=VN(c);return e.onlyIfParent&&!i?new rg:BN({parentSpan:i,spanArguments:n,forceTransaction:r,scope:c})})}const pSe=(e,t)=>{const n=Af(),r=ng(n);if(r.continueTrace)return r.continueTrace(e,t);const{sentryTrace:s,baggage:o}=e;return ou(c=>{const i=mee(s,o);return c.setPropagationContext(i),t()})};function BS(e,t){const n=$S();return n.withActiveSpan?n.withActiveSpan(e,t):ou(r=>(Q_(r,e||void 0),t(r)))}function mSe(e){const t=$S();return t.suppressTracing?t.suppressTracing(e):ou(n=>(n.setSDKProcessingMetadata({[zN]:!0}),e()))}function gSe(e){return ou(t=>(t.setPropagationContext({traceId:hf()}),Ur&&En.info(`Starting a new trace with id ${t.getPropagationContext().traceId}`),BS(null,e)))}function BN({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!pf())return new rg;const s=$o();let o;if(e&&!n)o=_Se(e,r,t),xee(e,o);else if(e){const c=ig(e),{traceId:i,spanId:f}=e.spanContext(),g=xy(e);o=r9({traceId:i,parentSpanId:f,...t},r,g),ZU(o,c)}else{const{traceId:c,dsc:i,parentSpanId:f,sampled:g}={...s.getPropagationContext(),...r.getPropagationContext()};o=r9({traceId:c,parentSpanId:f,...t},r,g),i&&ZU(o,i)}return U2e(o),B2e(o,r,s),o}function $N(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=F_(e.startTime),delete r.startTime,r}return n}function $S(){const e=Af();return ng(e)}function r9(e,t,n){const r=mr(),s=r&&r.getOptions()||{},{name:o="",attributes:c}=e,[i,f]=t.getScopeData().sdkProcessingMetadata[zN]?[!1]:W2e(s,{name:o,parentSampled:n,attributes:c,transactionContext:{name:o,parentSampled:n}}),g=new FN({...e,attributes:{[Sl]:"custom",...e.attributes},sampled:i});return f!==void 0&&g.setAttribute(PN,f),r&&r.emit("spanStart",g),g}function _Se(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),o=t.getScopeData().sdkProcessingMetadata[zN]?!1:xy(e),c=o?new FN({...n,parentSpanId:r,traceId:s,sampled:o}):new rg({traceId:s});xee(e,c);const i=mr();return i&&(i.emit("spanStart",c),n.endTimestamp&&i.emit("spanEnd",c)),c}function VN(e){const t=mI(e);if(!t)return;const n=mr();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?go(t):t}function Lee(e){return e!==void 0?t=>BS(e,t):t=>t()}const eC={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},ySe="heartbeatFailed",vSe="idleTimeout",bSe="finalTimeout",xSe="externalFinish";function Nee(e,t={}){const n=new Map;let r=!1,s,o=xSe,c=!t.disableAutoFinish;const i=[],{idleTimeout:f=eC.idleTimeout,finalTimeout:g=eC.finalTimeout,childSpanTimeout:x=eC.childSpanTimeout,beforeSpanEnd:w}=t,A=mr();if(!A||!pf())return new rg;const C=hi(),F=qs(),z=wSe(e);z.end=new Proxy(z.end,{apply(le,oe,ve){w&&w(z);const[se,...ie]=ve,pe=se||Gs(),be=F_(pe),Se=i2(z).filter(He=>He!==z);if(!Se.length)return ee(be),Reflect.apply(le,oe,[be,...ie]);const Ce=Se.map(He=>pi(He).timestamp).filter(He=>!!He),Ee=Ce.length?Math.max(...Ce):void 0,xe=pi(z).start_timestamp,ke=Math.min(xe?xe+g/1e3:1/0,Math.max(xe||-1/0,Math.min(be,Ee||1/0)));return ee(ke),Reflect.apply(le,oe,[ke,...ie])}});function j(){s&&(clearTimeout(s),s=void 0)}function V(le){j(),s=setTimeout(()=>{!r&&n.size===0&&c&&(o=vSe,z.end(le))},f)}function Y(le){s=setTimeout(()=>{!r&&c&&(o=ySe,z.end(le))},x)}function te(le){j(),n.set(le,!0);const oe=Gs();Y(oe+x/1e3)}function J(le){if(n.has(le)&&n.delete(le),n.size===0){const oe=Gs();V(oe+f/1e3)}}function ee(le){r=!0,n.clear(),i.forEach(be=>be()),Q_(C,F);const oe=pi(z),{start_timestamp:ve}=oe;if(!ve)return;(oe.data||{})[_L]||z.setAttribute(_L,o),En.log(`[Tracing] Idle span "${oe.op}" finished`);const ie=i2(z).filter(be=>be!==z);let pe=0;ie.forEach(be=>{be.isRecording()&&(be.setStatus({code:Fo,message:"cancelled"}),be.end(le),Ur&&En.log("[Tracing] Cancelling span since span ended early",JSON.stringify(be,void 0,2)));const Se=pi(be),{timestamp:Ce=0,start_timestamp:Ee=0}=Se,xe=Ee<=le,ke=(g+f)/1e3,He=Ce-Ee<=ke;if(Ur){const Ke=JSON.stringify(be,void 0,2);xe?He||En.log("[Tracing] Discarding span since it finished after idle span final timeout",Ke):En.log("[Tracing] Discarding span since it happened after idle span was finished",Ke)}(!He||!xe)&&(N2e(z,be),pe++)}),pe>0&&z.setAttribute("sentry.idle_span_discarded_spans",pe)}return i.push(A.on("spanStart",le=>{if(r||le===z||pi(le).timestamp)return;i2(z).includes(le)&&te(le.spanContext().spanId)})),i.push(A.on("spanEnd",le=>{r||J(le.spanContext().spanId)})),i.push(A.on("idleSpanEnableAutoFinish",le=>{le===z&&(c=!0,V(),n.size&&Y())})),t.disableAutoFinish||V(),setTimeout(()=>{r||(z.setStatus({code:Fo,message:"deadline_exceeded"}),o=bSe,z.end())},g),z}function wSe(e){const t=zm(e);return Q_(hi(),t),Ur&&En.log("[Tracing] Started span is an idle span"),t}function wL(e,t,n,r=0){return new Wc((s,o)=>{const c=e[r];if(t===null||typeof c!="function")s(t);else{const i=c({...t},n);Ur&&c.id&&i===null&&En.log(`Event processor "${c.id}" dropped event`),FS(i)?i.then(f=>wL(e,f,n,r+1).then(s)).then(null,o):wL(e,i,n,r+1).then(s).then(null,o)}})}let MM,i9,AM;function Fee(e){const t=Fr._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return AM&&n.length===i9||(i9=n.length,AM=n.reduce((r,s)=>{MM||(MM={});const o=MM[s];if(o)r[o[0]]=o[1];else{const c=e(s);for(let i=c.length-1;i>=0;i--){const f=c[i],g=f&&f.filename,x=t[s];if(g&&x){r[g]=x,MM[s]=[g,x];break}}}return r},{})),AM}function SSe(e,t){const n=Fee(e);if(!n)return[];const r=[];for(const s of t)s&&n[s]&&r.push({type:"sourcemap",code_file:s,debug_id:n[s]});return r}function ESe(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:o}=t;TSe(e,t),r&&CSe(e,r),ISe(e,n),MSe(e,s),ASe(e,o)}function s9(e,t){const{extra:n,tags:r,user:s,contexts:o,level:c,sdkProcessingMetadata:i,breadcrumbs:f,fingerprint:g,eventProcessors:x,attachments:w,propagationContext:A,transactionName:C,span:F}=t;CM(e,"extra",n),CM(e,"tags",r),CM(e,"user",s),CM(e,"contexts",o),e.sdkProcessingMetadata=Q3(e.sdkProcessingMetadata,i,2),c&&(e.level=c),C&&(e.transactionName=C),F&&(e.span=F),f.length&&(e.breadcrumbs=[...e.breadcrumbs,...f]),g.length&&(e.fingerprint=[...e.fingerprint,...g]),x.length&&(e.eventProcessors=[...e.eventProcessors,...x]),w.length&&(e.attachments=[...e.attachments,...w]),e.propagationContext={...e.propagationContext,...A}}function CM(e,t,n){e[t]=Q3(e[t],n,1)}function TSe(e,t){const{extra:n,tags:r,user:s,contexts:o,level:c,transactionName:i}=t,f=Eo(n);f&&Object.keys(f).length&&(e.extra={...f,...e.extra});const g=Eo(r);g&&Object.keys(g).length&&(e.tags={...g,...e.tags});const x=Eo(s);x&&Object.keys(x).length&&(e.user={...x,...e.user});const w=Eo(o);w&&Object.keys(w).length&&(e.contexts={...w,...e.contexts}),c&&(e.level=c),i&&e.type!=="transaction"&&(e.transaction=i)}function MSe(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function ASe(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function CSe(e,t){e.contexts={trace:R2e(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:ig(t),...e.sdkProcessingMetadata};const n=go(t),r=pi(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function ISe(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}function zee(e,t,n,r,s,o){const{normalizeDepth:c=3,normalizeMaxBreadth:i=1e3}=e,f={...t,event_id:t.event_id||n.event_id||Tl(),timestamp:t.timestamp||zS()},g=n.integrations||e.integrations.map(j=>j.name);PSe(f,e),RSe(f,g),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&OSe(f,e.stackParser);const x=LSe(r,n.captureContext);n.mechanism&&Lm(f,n.mechanism);const w=s?s.getEventProcessors():[],A=eP().getScopeData();if(o){const j=o.getScopeData();s9(A,j)}if(x){const j=x.getScopeData();s9(A,j)}const C=[...n.attachments||[],...A.attachments];C.length&&(n.attachments=C),ESe(f,A);const F=[...w,...A.eventProcessors];return wL(F,f,n).then(j=>(j&&DSe(j),typeof c=="number"&&c>0?kSe(j,c,i):j))}function PSe(e,t){const{environment:n,release:r,dist:s,maxValueLength:o=250}=t;e.environment=e.environment||n||rP,!e.release&&r&&(e.release=r),!e.dist&&s&&(e.dist=s),e.message&&(e.message=Tm(e.message,o));const c=e.exception&&e.exception.values&&e.exception.values[0];c&&c.value&&(c.value=Tm(c.value,o));const i=e.request;i&&i.url&&(i.url=Tm(i.url,o))}function OSe(e,t){const n=Fee(t);try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(s=>{n&&s.filename&&(s.debug_id=n[s.filename])})})}catch{}}function DSe(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,s])=>{n.push({type:"sourcemap",code_file:r,debug_id:s})})}function RSe(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function kSe(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:Hc(s.data,t,n)}}))},...e.user&&{user:Hc(e.user,t,n)},...e.contexts&&{contexts:Hc(e.contexts,t,n)},...e.extra&&{extra:Hc(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Hc(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>({...s,...s.data&&{data:Hc(s.data,t,n)}}))),e.contexts&&e.contexts.flags&&r.contexts&&(r.contexts.flags=Hc(e.contexts.flags,3,n)),r}function LSe(e,t){if(!t)return e;const n=e?e.clone():new ff;return n.update(t),n}function NSe(e){if(e)return FSe(e)?{captureContext:e}:BSe(e)?{captureContext:e}:e}function FSe(e){return e instanceof ff||typeof e=="function"}const zSe=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function BSe(e){return Object.keys(e).some(t=>zSe.includes(t))}function If(e,t){return hi().captureException(e,NSe(t))}function vI(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return hi().captureMessage(e,n,r)}function D1(e,t){return hi().captureEvent(e,t)}function jN(e,t){$o().setContext(e,t)}function Bee(e){$o().setExtras(e)}function $ee(e,t){$o().setExtra(e,t)}function Vee(e){$o().setTags(e)}function jee(e,t){$o().setTag(e,t)}function Uee(e){$o().setUser(e)}function Hee(){return $o().lastEventId()}async function $Se(e){const t=mr();return t?t.flush(e):(Ur&&En.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function VSe(e){const t=mr();return t?t.close(e):(Ur&&En.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function jSe(){return!!mr()}function USe(){const e=mr();return!!e&&e.getOptions().enabled!==!1&&!!e.getTransport()}function Wee(e){$o().addEventProcessor(e)}function bI(e){const t=mr(),n=$o(),r=hi(),{release:s,environment:o=rP}=t&&t.getOptions()||{},{userAgent:c}=Fr.navigator||{},i=h2e({release:s,environment:o,user:r.getUser()||n.getUser(),...c&&{userAgent:c},...e}),f=n.getSession();return f&&f.status==="ok"&&Y0(f,{status:"exited"}),K2(),n.setSession(i),r.setSession(i),i}function K2(){const e=$o(),t=hi(),n=t.getSession()||e.getSession();n&&f2e(n),Gee(),e.setSession(),t.setSession()}function Gee(){const e=$o(),t=hi(),n=mr(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function SL(e=!1){if(e){K2();return}Gee()}const HSe="7";function Yee(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function WSe(e){return`${Yee(e)}${e.projectId}/envelope/`}function GSe(e,t){const n={sentry_version:HSe};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function qee(e,t,n){return t||`${WSe(e)}?${GSe(e,n)}`}function YSe(e,t){const n=Pee(e);if(!n)return"";const r=`${Yee(n)}embed/error-page/`;let s=`dsn=${wy(n)}`;for(const o in t)if(o!=="dsn"&&o!=="onClose")if(o==="user"){const c=t.user;if(!c)continue;c.name&&(s+=`&name=${encodeURIComponent(c.name)}`),c.email&&(s+=`&email=${encodeURIComponent(c.email)}`)}else s+=`&${encodeURIComponent(o)}=${encodeURIComponent(t[o])}`;return`${r}?${s}`}const o9=[];function qSe(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function XSe(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(c=>{c.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const c=n(t);r=Array.isArray(c)?c:[c]}else r=t;const s=qSe(r),o=s.findIndex(c=>c.name==="Debug");if(o>-1){const[c]=s.splice(o,1);s.push(c)}return s}function ZSe(e,t){const n={};return t.forEach(r=>{r&&Xee(e,r,n)}),n}function a9(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Xee(e,t,n){if(n[t.name]){Ur&&En.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,o9.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),o9.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,o)=>r(s,o,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((o,c)=>r(o,c,e),{id:t.name});e.addEventProcessor(s)}Ur&&En.log(`Integration installed: ${t.name}`)}function EL(e){const t=mr();if(!t){Ur&&En.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function KSe(e,t,n){const r=[{type:"client_report"},{timestamp:zS(),discarded_events:e}];return Cf(t?{dsn:t}:{},[r])}class ju extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}}const l9="Not capturing exception because it's already been captured.";class JSe{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Pee(t.dsn):Ur&&En.warn("No DSN provided, client will not send events."),this._dsn){const s=qee(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:s})}const r=["enableTracing","tracesSampleRate","tracesSampler"].find(s=>s in t&&t[s]==null);r&&su(()=>{console.warn(`[Sentry] Deprecation warning: \`${r}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)})}captureException(t,n,r){const s=Tl();if(UU(t))return Ur&&En.log(l9),s;const o={event_id:s,...n};return this._process(this.eventFromException(t,o).then(c=>this._captureEvent(c,o,r))),o.event_id}captureMessage(t,n,r,s){const o={event_id:Tl(),...r},c=TN(t)?t:String(t),i=MN(t)?this.eventFromMessage(c,n,o):this.eventFromException(t,o);return this._process(i.then(f=>this._captureEvent(f,o,s))),o.event_id}captureEvent(t,n,r){const s=Tl();if(n&&n.originalException&&UU(n.originalException))return Ur&&En.log(l9),s;const o={event_id:s,...n},i=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,o,i||r)),o.event_id}captureSession(t){typeof t.release!="string"?Ur&&En.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),Y0(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(s=>r&&s))):df(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];Xee(this,t,this._integrations),n||a9(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=cSe(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of n.attachments||[])r=eSe(r,sSe(o));const s=this.sendEnvelope(r);s&&s.then(o=>this.emit("afterSendEvent",t,o),null)}sendSession(t){const n=lSe(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const s=typeof r=="number"?r:1,o=`${t}:${n}`;Ur&&En.log(`Recording outcome: "${o}"${s>1?` (${s} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+s}}on(t,n){const r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{const s=r.indexOf(n);s>-1&&r.splice(s,1)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(s=>s(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(Ur&&En.error("Error while sending envelope:",n),n)):(Ur&&En.error("Transport disabled"),df({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=ZSe(this,t),a9(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",s=!1;const o=n.exception&&n.exception.values;if(o){s=!0;for(const f of o){const g=f.mechanism;if(g&&g.handled===!1){r=!0;break}}}const c=t.status==="ok";(c&&t.errors===0||c&&r)&&(Y0(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Wc(n=>{let r=0;const s=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),n(!0)):(r+=s,t&&r>=t&&(clearInterval(o),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r=hi(),s=$o()){const o=this.getOptions(),c=Object.keys(this._integrations);return!n.integrations&&c.length>0&&(n.integrations=c),this.emit("preprocessEvent",t,n),t.type||s.setLastEventId(t.event_id||n.event_id),zee(o,t,n,r,this,s).then(i=>{if(i===null)return i;i.contexts={trace:S2e(r),...i.contexts};const f=Aee(this,r);return i.sdkProcessingMetadata={dynamicSamplingContext:f,...i.sdkProcessingMetadata},i})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(s=>s.event_id,s=>{Ur&&(s instanceof ju&&s.logLevel==="log"?En.log(s.message):En.warn(s))})}_processEvent(t,n,r){const s=this.getOptions(),{sampleRate:o}=s,c=Kee(t),i=Zee(t),f=t.type||"error",g=`before send for type \`${f}\``,x=typeof o>"u"?void 0:gI(o);if(i&&typeof x=="number"&&Math.random()>x)return this.recordDroppedEvent("sample_rate","error",t),pI(new ju(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const w=f==="replay_event"?"replay":f,C=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,C).then(F=>{if(F===null)throw this.recordDroppedEvent("event_processor",w,t),new ju("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return F;const j=eEe(this,s,F,n);return QSe(j,g)}).then(F=>{if(F===null){if(this.recordDroppedEvent("before_send",w,t),c){const Y=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",Y)}throw new ju(`${g} returned \`null\`, will not send event.`,"log")}const z=r&&r.getSession();if(!c&&z&&this._updateSessionFromEvent(z,F),c){const V=F.sdkProcessingMetadata&&F.sdkProcessingMetadata.spanCountBeforeProcessing||0,Y=F.spans?F.spans.length:0,te=V-Y;te>0&&this.recordDroppedEvent("before_send","span",te)}const j=F.transaction_info;if(c&&j&&F.transaction!==t.transaction){const V="custom";F.transaction_info={...j,source:V}}return this.sendEvent(F,n),F}).then(null,F=>{throw F instanceof ju?F:(this.captureException(F,{data:{__sentry__:!0},originalException:F}),new ju(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${F}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[s,o]=n.split(":");return{reason:s,category:o,quantity:r}})}_flushOutcomes(){Ur&&En.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){Ur&&En.log("No outcomes to send");return}if(!this._dsn){Ur&&En.log("No dsn provided, will not send outcomes");return}Ur&&En.log("Sending outcomes:",t);const n=KSe(t,this._options.tunnel&&wy(this._dsn));this.sendEnvelope(n)}}function QSe(e,t){const n=`${t} must return \`null\` or a valid event.`;if(FS(e))return e.then(r=>{if(!J_(r)&&r!==null)throw new ju(n);return r},r=>{throw new ju(`${t} rejected with ${r}`)});if(!J_(e)&&e!==null)throw new ju(n);return e}function eEe(e,t,n,r){const{beforeSend:s,beforeSendTransaction:o,beforeSendSpan:c}=t;if(Zee(n)&&s)return s(n,r);if(Kee(n)){if(n.spans&&c){const i=[];for(const f of n.spans){const g=c(f);g?i.push(g):(wee(),e.recordDroppedEvent("before_send","span"))}n.spans=i}if(o){if(n.spans){const i=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:i}}return o(n,r)}}return n}function Zee(e){return e.type===void 0}function Kee(e){return e.type==="transaction"}function tEe(e,t){t.debug===!0&&(Ur?En.enable():su(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),hi().update(t.initialScope);const r=new e(t);return Jee(r),r.init(),r}function Jee(e){hi().setClient(e)}function nEe(e){const t=[];function n(){return e===void 0||t.length<e}function r(c){return t.splice(t.indexOf(c),1)[0]||Promise.resolve(void 0)}function s(c){if(!n())return pI(new ju("Not adding Promise because buffer limit was reached."));const i=c();return t.indexOf(i)===-1&&t.push(i),i.then(()=>r(i)).then(null,()=>r(i).then(null,()=>{})),i}function o(c){return new Wc((i,f)=>{let g=t.length;if(!g)return i(!0);const x=setTimeout(()=>{c&&c>0&&i(!1)},c);t.forEach(w=>{df(w).then(()=>{--g||(clearTimeout(x),i(!0))},f)})})}return{$:t,add:s,drain:o}}const rEe=60*1e3;function Qee(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?rEe:r-t}function iEe(e,t){return e[t]||e.all||0}function ete(e,t,n=Date.now()){return iEe(e,t)>n}function tte(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},o=n&&n["x-sentry-rate-limits"],c=n&&n["retry-after"];if(o)for(const i of o.trim().split(",")){const[f,g,,,x]=i.split(":",5),w=parseInt(f,10),A=(isNaN(w)?60:w)*1e3;if(!g)s.all=r+A;else for(const C of g.split(";"))C==="metric_bucket"?(!x||x.split(";").includes("custom"))&&(s[C]=r+A):s[C]=r+A}else c?s.all=r+Qee(c,r):t===429&&(s.all=r+60*1e3);return s}const sEe=64;function nte(e,t,n=nEe(e.bufferSize||sEe)){let r={};const s=c=>n.drain(c);function o(c){const i=[];if(ey(c,(w,A)=>{const C=JU(A);if(ete(r,C)){const F=c9(w,A);e.recordDroppedEvent("ratelimit_backoff",C,F)}else i.push(w)}),i.length===0)return df({});const f=Cf(c[0],i),g=w=>{ey(f,(A,C)=>{const F=c9(A,C);e.recordDroppedEvent(w,JU(C),F)})},x=()=>t({body:yI(f)}).then(w=>(w.statusCode!==void 0&&(w.statusCode<200||w.statusCode>=300)&&Ur&&En.warn(`Sentry responded with status code ${w.statusCode} to sent event.`),r=tte(r,w),w),w=>{throw g("network_error"),w});return n.add(x).then(w=>w,w=>{if(w instanceof ju)return Ur&&En.error("Skipped sending event because buffer is full."),g("queue_overflow"),df({});throw w})}return{send:o,flush:s}}function c9(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}const qD=100,XD=5e3,oEe=36e5;function aEe(e){function t(...n){Ur&&En.info("[Offline]:",...n)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const s=n.createStore(n);let o=XD,c;function i(w,A,C){return KU(w,["client_report"])?!1:n.shouldStore?n.shouldStore(w,A,C):!0}function f(w){c&&clearTimeout(c),c=setTimeout(async()=>{c=void 0;const A=await s.shift();A&&(t("Attempting to send previously queued event"),A[0].sent_at=new Date().toISOString(),x(A,!0).catch(C=>{t("Failed to retry sending",C)}))},w),typeof c!="number"&&c.unref&&c.unref()}function g(){c||(f(o),o=Math.min(o*2,oEe))}async function x(w,A=!1){if(!A&&KU(w,["replay_event","replay_recording"]))return await s.push(w),f(qD),{};try{const C=await r.send(w);let F=qD;if(C){if(C.headers&&C.headers["retry-after"])F=Qee(C.headers["retry-after"]);else if(C.headers&&C.headers["x-sentry-rate-limits"])F=6e4;else if((C.statusCode||0)>=400)return C}return f(F),o=XD,C}catch(C){if(await i(w,C,o))return A?await s.unshift(w):await s.push(w),g(),t("Error sending. Event queued.",C),{};throw C}}return n.flushAtStartup&&g(),{send:x,flush:w=>(w===void 0&&(o=XD,f(qD)),r.flush(w))}}}function rte(e,t){let n;return ey(e,(r,s)=>(t.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function lEe(e,t){return n=>{const r=e(n);return{...r,send:async s=>{const o=rte(s,["event","transaction","profile","replay_event"]);return o&&(o.release=t),r.send(s)}}}}function cEe(e,t){return Cf(t?{...e[0],dsn:t}:e[0],e[1])}function uEe(e,t){return n=>{const r=e(n),s=new Map;function o(f,g){const x=g?`${f}:${g}`:f;let w=s.get(x);if(!w){const A=Cee(f);if(!A)return;const C=qee(A,n.tunnel);w=g?lEe(e,g)({...n,url:C}):e({...n,url:C}),s.set(x,w)}return[f,w]}async function c(f){function g(C){const F=C&&C.length?C:["event"];return rte(f,F)}const x=t({envelope:f,getEvent:g}).map(C=>typeof C=="string"?o(C,void 0):o(C.dsn,C.release)).filter(C=>!!C),w=x.length?x:[["",r]];return(await Promise.all(w.map(([C,F])=>F.send(cEe(f,C)))))[0]}async function i(f){const g=[...s.values(),r];return(await Promise.all(g.map(w=>w.flush(f)))).every(w=>w)}return{send:c,flush:i}}}function ite(e,t){const n=t&&t.getDsn(),r=t&&t.getOptions().tunnel;return hEe(e,n)||dEe(e,r)}function dEe(e,t){return t?u9(e)===u9(t):!1}function hEe(e,t){return t?e.includes(t.host):!1}function u9(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function fEe(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}function pEe(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(o=>({name:`${r}:@sentry/${o}`,version:ed})),version:ed}),e._metadata=s}function ste(e={}){const t=mr();if(!USe()||!t)return{};const n=Af(),r=ng(n);if(r.getTraceData)return r.getTraceData(e);const s=hi(),o=e.span||qs(),c=o?vee(o):mEe(s),i=o?ig(o):Aee(t,s),f=fee(i);return pee.test(c)?{"sentry-trace":c,baggage:f}:(En.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function mEe(e){const{traceId:t,sampled:n,spanId:r}=e.getPropagationContext();return gee(t,r,n)}const gEe=100;function sd(e,t){const n=mr(),r=$o();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=gEe}=n.getOptions();if(o<=0)return;const i={timestamp:zS(),...e},f=s?su(()=>s(i,t)):i;f!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",f,t),r.addBreadcrumb(f,o))}let d9;const _Ee="FunctionToString",h9=new WeakMap,yEe=(()=>({name:_Ee,setupOnce(){d9=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=CN(this),n=h9.has(mr())&&t!==void 0?t:this;return d9.apply(n,e)}}catch{}},setup(e){h9.set(e,!0)}})),ote=yEe,vEe=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],bEe="InboundFilters",xEe=((e={})=>({name:bEe,processEvent(t,n,r){const s=r.getOptions(),o=wEe(e,s);return SEe(t,o)?null:t}})),ate=xEe;function wEe(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:vEe],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function SEe(e,t){return t.ignoreInternal&&IEe(e)?(Ur&&En.warn(`Event dropped due to being internal Sentry Error.
Event: ${Xp(e)}`),!0):EEe(e,t.ignoreErrors)?(Ur&&En.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Xp(e)}`),!0):OEe(e)?(Ur&&En.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Xp(e)}`),!0):TEe(e,t.ignoreTransactions)?(Ur&&En.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Xp(e)}`),!0):MEe(e,t.denyUrls)?(Ur&&En.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Xp(e)}.
Url: ${xI(e)}`),!0):AEe(e,t.allowUrls)?!1:(Ur&&En.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Xp(e)}.
Url: ${xI(e)}`),!0)}function EEe(e,t){return e.type||!t||!t.length?!1:CEe(e).some(n=>Mm(n,t))}function TEe(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?Mm(n,t):!1}function MEe(e,t){if(!t||!t.length)return!1;const n=xI(e);return n?Mm(n,t):!1}function AEe(e,t){if(!t||!t.length)return!0;const n=xI(e);return n?Mm(n,t):!0}function CEe(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),t}function IEe(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function PEe(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function xI(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?PEe(t):null}catch{return Ur&&En.error(`Cannot extract url for event ${Xp(e)}`),null}}function OEe(e){return e.type||!e.exception||!e.exception.values||e.exception.values.length===0?!1:!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value)}function DEe(e,t,n=250,r,s,o,c){if(!o.exception||!o.exception.values||!c||!cf(c.originalException,Error))return;const i=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;i&&(o.exception.values=REe(TL(e,t,s,c.originalException,r,o.exception.values,i,0),n))}function TL(e,t,n,r,s,o,c,i){if(o.length>=n+1)return o;let f=[...o];if(cf(r[s],Error)){f9(c,i);const g=e(t,r[s]),x=f.length;p9(g,s,x,i),f=TL(e,t,n,r[s],s,[g,...f],g,x)}return Array.isArray(r.errors)&&r.errors.forEach((g,x)=>{if(cf(g,Error)){f9(c,i);const w=e(t,g),A=f.length;p9(w,`errors[${x}]`,A,i),f=TL(e,t,n,g,s,[w,...f],w,A)}}),f}function f9(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function p9(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function REe(e,t){return e.map(n=>(n.value&&(n.value=Tm(n.value,t)),n))}const lte=new Map,m9=new Set;function kEe(e){if(Fr._sentryModuleMetadata)for(const t of Object.keys(Fr._sentryModuleMetadata)){const n=Fr._sentryModuleMetadata[t];if(m9.has(t))continue;m9.add(t);const r=e(t);for(const s of r.reverse())if(s.filename){lte.set(s.filename,n);break}}}function LEe(e,t){return kEe(e),lte.get(t)}function cte(e,t){try{t.exception.values.forEach(n=>{if(n.stacktrace)for(const r of n.stacktrace.frames||[]){if(!r.filename||r.module_metadata)continue;const s=LEe(e,r.filename);s&&(r.module_metadata=s)}})}catch{}}function ute(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[])delete n.module_metadata})}catch{}}const NEe=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{ey(t,(n,r)=>{if(r==="event"){const s=Array.isArray(n)?n[1]:void 0;s&&(ute(s),n[1]=s)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const n=e.getOptions().stackParser;cte(n,t)})}});function B_(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function FEe(e){return e.split(/[?#]/,1)[0]}function dte(e){const t="console";eg(t,e),tg(t,zEe)}function zEe(){"console"in Fr&&dI.forEach(function(e){e in Fr.console&&wl(Fr.console,e,function(t){return hI[e]=t,function(...n){Zc("console",{args:n,level:e});const s=hI[e];s&&s.apply(Fr.console,n)}})})}function UN(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const BEe="CaptureConsole",$Ee=((e={})=>{const t=e.levels||dI,n=!!e.handled;return{name:BEe,setup(r){"console"in Fr&&dte(({args:s,level:o})=>{mr()!==r||!t.includes(o)||jEe(s,o,n)})}}}),VEe=$Ee;function jEe(e,t,n){const r={level:UN(t),extra:{arguments:e}};ou(s=>{if(s.addEventProcessor(i=>(i.logger="console",Lm(i,{handled:n,type:"console"}),i)),t==="assert"){if(!e[0]){const i=`Assertion failed: ${fI(e.slice(1)," ")||"console.assert"}`;s.setExtra("arguments",e.slice(1)),vI(i,r)}return}const o=e.find(i=>i instanceof Error);if(o){If(o,r);return}const c=fI(e," ");vI(c,r)})}const UEe="Debug",HEe=((e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:UEe,setup(n){n.on("beforeSendEvent",(r,s)=>{if(t.debugger)debugger;su(()=>{t.stringify?(console.log(JSON.stringify(r,null,2)),s&&Object.keys(s).length&&console.log(JSON.stringify(s,null,2))):(console.log(r),s&&Object.keys(s).length&&console.log(s))})})}}}),WEe=HEe,GEe="Dedupe",YEe=(()=>{let e;return{name:GEe,processEvent(t){if(t.type)return t;try{if(qEe(t,e))return Ur&&En.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),hte=YEe;function qEe(e,t){return t?!!(XEe(e,t)||ZEe(e,t)):!1}function XEe(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!pte(e,t)||!fte(e,t))}function ZEe(e,t){const n=g9(t),r=g9(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!pte(e,t)||!fte(e,t))}function fte(e,t){let n=dL(e),r=dL(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const o=r[s],c=n[s];if(o.filename!==c.filename||o.lineno!==c.lineno||o.colno!==c.colno||o.function!==c.function)return!1}return!0}function pte(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function g9(e){return e.exception&&e.exception.values&&e.exception.values[0]}const KEe="ExtraErrorData",JEe=((e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:KEe,processEvent(r,s,o){const{maxValueLength:c=250}=o.getOptions();return eTe(r,s,t,n,c)}}}),QEe=JEe;function eTe(e,t={},n,r,s){if(!t.originalException||!Em(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,c=tTe(t.originalException,r,s);if(c){const i={...e.contexts},f=Hc(c,n);return J_(f)&&(rc(f,"__sentry_skip_normalization__",!0),i[o]=f),{...e,contexts:i}}return e}function tTe(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(const o of Object.keys(e)){if(r.indexOf(o)!==-1)continue;const c=e[o];s[o]=Em(c)||typeof c=="string"?Tm(`${c}`,n):c}if(t&&e.cause!==void 0&&(s.cause=Em(e.cause)?e.cause.toString():e.cause),typeof e.toJSON=="function"){const o=e.toJSON();for(const c of Object.keys(o)){const i=o[c];s[c]=Em(i)?i.toString():i}}return s}catch(r){Ur&&En.error("Unable to extract extra data from the Error object:",r)}return null}function nTe(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const s=e[r];s==="."?e.splice(r,1):s===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const rTe=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function iTe(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=rTe.exec(t);return n?n.slice(1):[]}function _9(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const s=r>=0?e[r]:"/";s&&(t=`${s}/${t}`,n=s.charAt(0)==="/")}return t=nTe(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function y9(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function sTe(e,t){e=_9(e).slice(1),t=_9(t).slice(1);const n=y9(e.split("/")),r=y9(t.split("/")),s=Math.min(n.length,r.length);let o=s;for(let i=0;i<s;i++)if(n[i]!==r[i]){o=i;break}let c=[];for(let i=o;i<n.length;i++)c.push("..");return c=c.concat(r.slice(o)),c.join("/")}function oTe(e,t){return iTe(e)[2]||""}const aTe="RewriteFrames",lTe=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in Fr&&Fr.window!==void 0,s=e.iteratee||cTe({isBrowser:r,root:t,prefix:n});function o(i){try{return{...i,exception:{...i.exception,values:i.exception.values.map(f=>({...f,...f.stacktrace&&{stacktrace:c(f.stacktrace)}}))}}}catch{return i}}function c(i){return{...i,frames:i&&i.frames&&i.frames.map(f=>s(f))}}return{name:aTe,processEvent(i){let f=i;return i.exception&&Array.isArray(i.exception.values)&&(f=o(f)),f}}};function cTe({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const s=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),o=/^\//.test(r.filename);if(e){if(t){const c=r.filename;c.indexOf(t)===0&&(r.filename=c.replace(t,n))}}else if(s||o){const c=s?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,i=t?sTe(t,c):oTe(c);r.filename=`${n}${i}`}return r}}const uTe="SessionTiming",dTe=(()=>{const e=Gs()*1e3;return{name:uTe,processEvent(t){const n=Gs()*1e3;return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}}),hTe=dTe,fTe=10,pTe="ZodErrors";function mTe(e){return Em(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function gTe(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function _Te(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function yTe(e){const t=new Set;for(const r of e.issues){const s=_Te(r.path);s.length>0&&t.add(s)}const n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){const s=e.issues[0];s!==void 0&&"expected"in s&&typeof s.expected=="string"&&(r=s.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${Tm(n.join(", "),100)}`}function vTe(e,t=!1,n,r){if(!n.exception||!n.exception.values||!r||!r.originalException||!mTe(r.originalException)||r.originalException.issues.length===0)return n;try{const o=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(gTe);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:o})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:yTe(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":o.slice(0,e)}}}catch(s){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:s instanceof Error?`${s.name}: ${s.message}
${s.stack}`:"unknown"}}}}}const bTe=((e={})=>{const t=typeof e.limit>"u"?fTe:e.limit;return{name:pTe,processEvent(n,r){return vTe(t,e.saveZodIssuesAsAttachment,n,r)}}}),xTe=bTe,wTe=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{ey(n,(r,s)=>{if(s==="event"){const o=Array.isArray(r)?r[1]:void 0;o&&(ute(o),r[1]=o)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const r=t.getOptions().stackParser;cte(r,n)})},processEvent(t){const n=STe(t);if(n){const r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](o=>!o.some(c=>e.filterKeys.includes(c)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function STe(e){const t=dL(e);if(t)return t.filter(n=>!!n.filename).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(v9)).map(r=>r.slice(v9.length)):[])}const v9="_sentryBundlerPluginAppKey:",mte="c",gte="g",HN="s",_te="d",ETe=5e3;function yte(e,t){const n=NS("globalMetricsAggregators",()=>new WeakMap),r=n.get(e);if(r)return r;const s=new t(e);return e.on("flush",()=>s.flush()),e.on("close",()=>s.close()),n.set(e,s),s}function iP(e,t,n,r,s={}){const o=s.client||mr();if(!o)return;const c=qs(),i=c?go(c):void 0,f=i&&pi(i).description,{unit:g,tags:x,timestamp:w}=s,{release:A,environment:C}=o.getOptions(),F={};A&&(F.release=A),C&&(F.environment=C),f&&(F.transaction=f),Ur&&En.log(`Adding value of ${r} to ${t} metric ${n}`),yte(o,e).add(t,n,r,g,{...F,...x},w)}function TTe(e,t,n=1,r){iP(e,mte,t,WN(n),r)}function ML(e,t,n,r){iP(e,_te,t,WN(n),r)}function MTe(e,t,n,r="second",s){if(typeof n=="function"){const o=Gs();return kee({op:"metrics.timing",name:t,startTime:o,onlyIfParent:!0},c=>LN(()=>n(),()=>{},()=>{const i=Gs(),f=i-o;ML(e,t,f,{...s,unit:"second"}),c.end(i)}))}ML(e,t,n,{...s,unit:r})}function ATe(e,t,n,r){iP(e,HN,t,n,r)}function CTe(e,t,n,r){iP(e,gte,t,WN(n),r)}const VS={increment:TTe,distribution:ML,set:ATe,gauge:CTe,timing:MTe,getMetricsAggregatorForClient:yte};function WN(e){return typeof e=="string"?parseInt(e):e}function ITe(e,t,n,r){const s=Object.entries(Eo(r)).sort((o,c)=>o[0].localeCompare(c[0]));return`${e}${t}${n}${s}`}function PTe(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t>>>0}function OTe(e){let t="";for(const n of e){const r=Object.entries(n.tags),s=r.length>0?`|#${r.map(([o,c])=>`${o}:${c}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${s}|T${n.timestamp}
`}return t}function DTe(e){return e.replace(/[^\w]+/gi,"_")}function RTe(e){return e.replace(/[^\w\-.]+/gi,"_")}function kTe(e){return e.replace(/[^\w\-./]+/gi,"")}const LTe=[[`
`,"\\n"],["\r","\\r"],["	","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function NTe(e){for(const[t,n]of LTe)if(e===t)return n;return e}function FTe(e){return[...e].reduce((t,n)=>t+NTe(n),"")}function zTe(e){const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=kTe(n);t[r]=FTe(String(e[n]))}return t}function BTe(e,t){En.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=e.getDsn(),r=e.getSdkMetadata(),s=e.getOptions().tunnel,o=$Te(t,n,r,s);e.sendEnvelope(o)}function $Te(e,t,n,r){const s={sent_at:new Date().toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(s.dsn=wy(t));const o=VTe(e);return Cf(s,[o])}function VTe(e){const t=OTe(e);return[{type:"statsd",length:t.length},t]}class jTe{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}}class UTe{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}class HTe{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}}class WTe{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map(t=>typeof t=="string"?PTe(t):t).join(":")}}const GTe={[mte]:jTe,[gte]:UTe,[_te]:HTe,[HN]:WTe};class jS{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),ETe)}add(t,n,r,s="none",o={},c=Gs()){const i=Math.floor(c),f=RTe(n),g=zTe(o),x=DTe(s),w=ITe(t,f,x,g);let A=this._buckets.get(w);const C=A&&t===HN?A.metric.weight:0;A?(A.metric.add(r),A.timestamp<i&&(A.timestamp=i)):(A={metric:new GTe[t](r),timestamp:i,metricType:t,name:f,unit:x,tags:g},this._buckets.set(w,A));const F=typeof r=="string"?A.metric.weight-C:r;F2e(t,f,F,x,o,w)}flush(){if(this._buckets.size===0)return;const t=Array.from(this._buckets.values());BTe(this._client,t),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}function YTe(e,t,n,r,s="auto.http.browser"){if(!e.fetchData)return;const o=pf()&&t(e.fetchData.url);if(e.endTimestamp&&o){const A=e.fetchData.__span;if(!A)return;const C=r[A];C&&(ZTe(C,e),delete r[A]);return}const{method:c,url:i}=e.fetchData,f=XTe(i),g=f?B_(f).host:void 0,x=!!qs(),w=o&&x?zm({name:`${c} ${i}`,attributes:{url:i,type:"fetch","http.method":c,"http.url":f,"server.address":g,[Ys]:s,[Fm]:"http.client"}}):new rg;if(e.fetchData.__span=w.spanContext().spanId,r[w.spanContext().spanId]=w,n(e.fetchData.url)){const A=e.args[0],C=e.args[1]||{},F=qTe(A,C,pf()&&x?w:void 0);F&&(e.args[1]=C,C.headers=F)}return w}function qTe(e,t,n){const r=ste({span:n}),s=r["sentry-trace"],o=r.baggage;if(!s)return;const c=t.headers||(KTe(e)?e.headers:void 0);if(c)if(JTe(c)){const i=new Headers(c);if(i.set("sentry-trace",s),o){const f=i.get("baggage");if(f){const g=IM(f);i.set("baggage",g?`${g},${o}`:o)}else i.set("baggage",o)}return i}else if(Array.isArray(c)){const i=[...c.filter(f=>!(Array.isArray(f)&&f[0]==="sentry-trace")).map(f=>{if(Array.isArray(f)&&f[0]==="baggage"&&typeof f[1]=="string"){const[g,x,...w]=f;return[g,IM(x),...w]}else return f}),["sentry-trace",s]];return o&&i.push(["baggage",o]),i}else{const i="baggage"in c?c.baggage:void 0;let f=[];return Array.isArray(i)?f=i.map(g=>typeof g=="string"?IM(g):g).filter(g=>g===""):i&&f.push(IM(i)),o&&f.push(o),{...c,"sentry-trace":s,baggage:f.length>0?f.join(","):void 0}}else return{...r}}function XTe(e){try{return new URL(e).href}catch{return}}function ZTe(e,t){if(t.response){DN(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:Fo,message:"internal_error"});e.end()}function IM(e){return e.split(",").filter(t=>!t.split("=")[0].startsWith(RN)).join(",")}function KTe(e){return typeof Request<"u"&&cf(e,Request)}function JTe(e){return typeof Headers<"u"&&cf(e,Headers)}function vte(e,t={},n=hi()){const{message:r,name:s,email:o,url:c,source:i,associatedEventId:f,tags:g}=e,x={contexts:{feedback:Eo({contact_email:o,name:s,message:r,url:c,source:i,associated_event_id:f})},type:"feedback",level:"info",tags:g},w=n&&n.getClient()||mr();return w&&w.emit("beforeSendFeedback",x,t),n.captureEvent(x,t)}function QTe(){return{bindClient(e){hi().setClient(e)},withScope:ou,getClient:()=>mr(),getScope:hi,getIsolationScope:$o,captureException:(e,t)=>hi().captureException(e,t),captureMessage:(e,t,n)=>hi().captureMessage(e,t,n),captureEvent:D1,addBreadcrumb:sd,setUser:Uee,setTags:Vee,setTag:jee,setExtra:$ee,setExtras:Bee,setContext:jN,getIntegration(e){const t=mr();return t&&t.getIntegrationByName(e.id)||null},startSession:bI,endSession:K2,captureSession(e){if(e)return K2();tMe()}}}const eMe=QTe;function tMe(){const e=hi(),t=mr(),n=e.getSession();t&&n&&t.captureSession(n)}function bte(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const wI=Fr;function xte(){if(!("fetch"in wI))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function AL(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function wte(){if(typeof EdgeRuntime=="string")return!0;if(!xte())return!1;if(AL(wI.fetch))return!0;let e=!1;const t=wI.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=AL(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){Qm&&En.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function nMe(){return"ReportingObserver"in wI}function GN(e,t){const n="fetch";eg(n,e),tg(n,()=>Ste(void 0,t))}function rMe(e){const t="fetch-body-resolved";eg(t,e),tg(t,()=>Ste(sMe))}function Ste(e,t=!1){t&&!wte()||wl(Fr,"fetch",function(n){return function(...r){const s=new Error,{method:o,url:c}=oMe(r),i={args:r,fetchData:{method:o,url:c},startTimestamp:Gs()*1e3,virtualError:s};return e||Zc("fetch",{...i}),n.apply(Fr,r).then(async f=>(e?e(f):Zc("fetch",{...i,endTimestamp:Gs()*1e3,response:f}),f),f=>{throw Zc("fetch",{...i,endTimestamp:Gs()*1e3,error:f}),Em(f)&&f.stack===void 0&&(f.stack=s.stack,rc(f,"framesToPop",1)),f})}})}async function iMe(e,t){if(e&&e.body){const n=e.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let o=!0;for(;o;){let c;try{c=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:i}=await r.read();clearTimeout(c),i&&(t(),o=!1)}catch{o=!1}finally{clearTimeout(c)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function sMe(e){let t;try{t=e.clone()}catch{return}iMe(t,()=>{Zc("fetch-body-resolved",{endTimestamp:Gs()*1e3,response:e})})}function CL(e,t){return!!e&&typeof e=="object"&&!!e[t]}function b9(e){return typeof e=="string"?e:e?CL(e,"url")?e.url:e.toString?e.toString():"":""}function oMe(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:b9(n),method:CL(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:b9(t),method:CL(t,"method")?String(t.method).toUpperCase():"GET"}}function aMe(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function lMe(){return"npm"}function cMe(){return!aMe()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function IL(){return typeof window<"u"&&(!cMe()||uMe())}function uMe(){const e=Fr.process;return!!e&&e.type==="renderer"}const PM=Fr;function dMe(){const e=PM.chrome,t=e&&e.app&&e.app.runtime,n="history"in PM&&!!PM.history.pushState&&!!PM.history.replaceState;return!t&&n}function hMe(e,t){return e??t()}function $_(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=o(n)):(s==="call"||s==="optionalCall")&&(n=o((...c)=>n.call(t,...c)),t=void 0)}return n}const lr=Fr;let PL=0;function Ete(){return PL>0}function fMe(){PL++,setTimeout(()=>{PL--})}function X0(e,t={}){function n(s){return typeof s=="function"}if(!n(e))return e;try{const s=e.__sentry_wrapped__;if(s)return typeof s=="function"?s:e;if(CN(e))return e}catch{return e}const r=function(...s){try{const o=s.map(c=>X0(c,t));return e.apply(this,o)}catch(o){throw fMe(),ou(c=>{c.addEventProcessor(i=>(t.mechanism&&(fL(i,void 0),Lm(i,t.mechanism)),i.extra={...i.extra,arguments:s},i)),If(o)}),o}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}oee(r,e),rc(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const Ti=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function sP(e,t){const n=YN(e,t),r={type:yMe(t),value:vMe(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function pMe(e,t,n,r){const s=mr(),o=s&&s.getOptions().normalizeDepth,c=wMe(t),i={__serialized__:Oee(t,o)};if(c)return{exception:{values:[sP(e,c)]},extra:i};const f={exception:{values:[{type:J3(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:bMe(t,{isUnhandledRejection:r})}]},extra:i};if(n){const g=YN(e,n);g.length&&(f.exception.values[0].stacktrace={frames:g})}return f}function ZD(e,t){return{exception:{values:[sP(e,t)]}}}function YN(e,t){const n=t.stacktrace||t.stack||"",r=gMe(t),s=_Me(t);try{return e(n,r,s)}catch{}return[]}const mMe=/Minified React error #\d+;/i;function gMe(e){return e&&mMe.test(e.message)?1:0}function _Me(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function Tte(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function yMe(e){const t=e&&e.name;return!t&&Tte(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function vMe(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:Tte(e)&&Array.isArray(e.message)&&e.message.length==2?e.message[1]:t:"No error message"}function Mte(e,t,n,r){const s=n&&n.syntheticException||void 0,o=qN(e,t,s,r);return Lm(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),df(o)}function Ate(e,t,n="info",r,s){const o=r&&r.syntheticException||void 0,c=OL(e,t,o,s);return c.level=n,r&&r.event_id&&(c.event_id=r.event_id),df(c)}function qN(e,t,n,r,s){let o;if(ree(t)&&t.error)return ZD(e,t.error);if($U(t)||Qwe(t)){const c=t;if("stack"in t)o=ZD(e,t);else{const i=c.name||($U(c)?"DOMError":"DOMException"),f=c.message?`${i}: ${c.message}`:i;o=OL(e,f,n,r),fL(o,f)}return"code"in c&&(o.tags={...o.tags,"DOMException.code":`${c.code}`}),o}return Em(t)?ZD(e,t):J_(t)||J3(t)?(o=pMe(e,t,n,s),Lm(o,{synthetic:!0}),o):(o=OL(e,t,n,r),fL(o,`${t}`),Lm(o,{synthetic:!0}),o)}function OL(e,t,n,r){const s={};if(r&&n){const o=YN(e,n);o.length&&(s.exception={values:[{value:t,stacktrace:{frames:o}}]}),Lm(s,{synthetic:!0})}if(TN(t)){const{__sentry_template_string__:o,__sentry_template_values__:c}=t;return s.logentry={message:o,params:c},s}return s.message=t,s}function bMe(e,{isUnhandledRejection:t}){const n=a2e(e),r=t?"promise rejection":"exception";return ree(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:J3(e)?`Event \`${xMe(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function xMe(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function wMe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}function Cte(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:wy(r)}},o=SMe(e);return Cf(s,[o])}function SMe(e){return[{type:"user_report"},e]}class Ite extends JSe{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},r=lr.SENTRY_SDK_SOURCE||lMe();pEe(n,"browser",["browser"],r),super(n),n.sendClientReports&&lr.document&&lr.document.addEventListener("visibilitychange",()=>{lr.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return Mte(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Ate(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){Ti&&En.warn("SDK not enabled, will not capture user feedback.");return}const n=Cte(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}}const XN=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,EMe=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",R1=(e,t,n,r)=>{let s,o;return c=>{t.value>=0&&(c||r)&&(o=t.value-(s||0),(o||s===void 0)&&(s=t.value,t.delta=o,t.rating=EMe(t.value,n),e(t)))}},Nr=Fr,TMe=()=>`v4-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,US=(e=!0)=>{const t=Nr.performance&&Nr.performance.getEntriesByType&&Nr.performance.getEntriesByType("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},HS=()=>{const e=US();return e&&e.activationStart||0},k1=(e,t)=>{const n=US();let r="navigate";return n&&(Nr.document&&Nr.document.prerendering||HS()>0?r="prerender":Nr.document&&Nr.document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:TMe(),navigationType:r}},Sy=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{t(s.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},L1=e=>{const t=n=>{(n.type==="pagehide"||Nr.document&&Nr.document.visibilityState==="hidden")&&e(n)};Nr.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},oP=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let s2=-1;const MMe=()=>Nr.document.visibilityState==="hidden"&&!Nr.document.prerendering?0:1/0,SI=e=>{Nr.document.visibilityState==="hidden"&&s2>-1&&(s2=e.type==="visibilitychange"?e.timeStamp:0,CMe())},AMe=()=>{addEventListener("visibilitychange",SI,!0),addEventListener("prerenderingchange",SI,!0)},CMe=()=>{removeEventListener("visibilitychange",SI,!0),removeEventListener("prerenderingchange",SI,!0)},aP=()=>(Nr.document&&s2<0&&(s2=MMe(),AMe()),{get firstHiddenTime(){return s2}}),WS=e=>{Nr.document&&Nr.document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},IMe=[1800,3e3],PMe=(e,t={})=>{WS(()=>{const n=aP(),r=k1("FCP");let s;const c=Sy("paint",i=>{i.forEach(f=>{f.name==="first-contentful-paint"&&(c.disconnect(),f.startTime<n.firstHiddenTime&&(r.value=Math.max(f.startTime-HS(),0),r.entries.push(f),s(!0)))})});c&&(s=R1(e,r,IMe,t.reportAllChanges))})},OMe=[.1,.25],DMe=(e,t={})=>{PMe(oP(()=>{const n=k1("CLS",0);let r,s=0,o=[];const c=f=>{f.forEach(g=>{if(!g.hadRecentInput){const x=o[0],w=o[o.length-1];s&&x&&w&&g.startTime-w.startTime<1e3&&g.startTime-x.startTime<5e3?(s+=g.value,o.push(g)):(s=g.value,o=[g])}}),s>n.value&&(n.value=s,n.entries=o,r())},i=Sy("layout-shift",c);i&&(r=R1(e,n,OMe,t.reportAllChanges),L1(()=>{c(i.takeRecords()),r(!0)}),setTimeout(r,0))}))},RMe=[100,300],kMe=(e,t={})=>{WS(()=>{const n=aP(),r=k1("FID");let s;const o=f=>{f.startTime<n.firstHiddenTime&&(r.value=f.processingStart-f.startTime,r.entries.push(f),s(!0))},c=f=>{f.forEach(o)},i=Sy("first-input",c);s=R1(e,r,RMe,t.reportAllChanges),i&&L1(oP(()=>{c(i.takeRecords()),i.disconnect()}))})};let Pte=0,KD=1/0,OM=0;const LMe=e=>{e.forEach(t=>{t.interactionId&&(KD=Math.min(KD,t.interactionId),OM=Math.max(OM,t.interactionId),Pte=OM?(OM-KD)/7+1:0)})};let DL;const NMe=()=>DL?Pte:performance.interactionCount||0,FMe=()=>{"interactionCount"in performance||DL||(DL=Sy("event",LMe,{type:"event",buffered:!0,durationThreshold:0}))},Lh=[],JD=new Map,zMe=40;let BMe=0;const $Me=()=>NMe()-BMe,VMe=()=>{const e=Math.min(Lh.length-1,Math.floor($Me()/50));return Lh[e]},QD=10,jMe=[],UMe=e=>{if(jMe.forEach(r=>r(e)),!(e.interactionId||e.entryType==="first-input"))return;const t=Lh[Lh.length-1],n=JD.get(e.interactionId);if(n||Lh.length<QD||t&&e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===(n.entries[0]&&n.entries[0].startTime)&&n.entries.push(e);else{const r={id:e.interactionId,latency:e.duration,entries:[e]};JD.set(r.id,r),Lh.push(r)}Lh.sort((r,s)=>s.latency-r.latency),Lh.length>QD&&Lh.splice(QD).forEach(r=>JD.delete(r.id))}},Ote=e=>{const t=Nr.requestIdleCallback||Nr.setTimeout;let n=-1;return e=oP(e),Nr.document&&Nr.document.visibilityState==="hidden"?e():(n=t(e),L1(e)),n},HMe=[200,500],WMe=(e,t={})=>{"PerformanceEventTiming"in Nr&&"interactionId"in PerformanceEventTiming.prototype&&WS(()=>{FMe();const n=k1("INP");let r;const s=c=>{Ote(()=>{c.forEach(UMe);const i=VMe();i&&i.latency!==n.value&&(n.value=i.latency,n.entries=i.entries,r())})},o=Sy("event",s,{durationThreshold:t.durationThreshold!=null?t.durationThreshold:zMe});r=R1(e,n,HMe,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),L1(()=>{s(o.takeRecords()),r(!0)}))})},GMe=[2500,4e3],x9={},YMe=(e,t={})=>{WS(()=>{const n=aP(),r=k1("LCP");let s;const o=i=>{t.reportAllChanges||(i=i.slice(-1)),i.forEach(f=>{f.startTime<n.firstHiddenTime&&(r.value=Math.max(f.startTime-HS(),0),r.entries=[f],s())})},c=Sy("largest-contentful-paint",o);if(c){s=R1(e,r,GMe,t.reportAllChanges);const i=oP(()=>{x9[r.id]||(o(c.takeRecords()),c.disconnect(),x9[r.id]=!0,s(!0))});["keydown","click"].forEach(f=>{Nr.document&&addEventListener(f,()=>Ote(i),{once:!0,capture:!0})}),L1(i)}})},qMe=[800,1800],RL=e=>{Nr.document&&Nr.document.prerendering?WS(()=>RL(e)):Nr.document&&Nr.document.readyState!=="complete"?addEventListener("load",()=>RL(e),!0):setTimeout(e,0)},XMe=(e,t={})=>{const n=k1("TTFB"),r=R1(e,n,qMe,t.reportAllChanges);RL(()=>{const s=US();s&&(n.value=Math.max(s.responseStart-HS(),0),n.entries=[s],r(!0))})},o2={},EI={};let Dte,Rte,kte,Lte,Nte;function ZN(e,t=!1){return GS("cls",e,KMe,Dte,t)}function Fte(e,t=!1){return GS("lcp",e,QMe,kte,t)}function zte(e){return GS("fid",e,JMe,Rte)}function ZMe(e){return GS("ttfb",e,eAe,Lte)}function Bte(e){return GS("inp",e,tAe,Nte)}function Z0(e,t){return $te(e,t),EI[e]||(nAe(e),EI[e]=!0),Vte(e,t)}function N1(e,t){const n=o2[e];if(!(!n||!n.length))for(const r of n)try{r(t)}catch(s){XN&&En.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${lf(r)}
Error:`,s)}}function KMe(){return DMe(e=>{N1("cls",{metric:e}),Dte=e},{reportAllChanges:!0})}function JMe(){return kMe(e=>{N1("fid",{metric:e}),Rte=e})}function QMe(){return YMe(e=>{N1("lcp",{metric:e}),kte=e},{reportAllChanges:!0})}function eAe(){return XMe(e=>{N1("ttfb",{metric:e}),Lte=e})}function tAe(){return WMe(e=>{N1("inp",{metric:e}),Nte=e})}function GS(e,t,n,r,s=!1){$te(e,t);let o;return EI[e]||(o=n(),EI[e]=!0),r&&t({metric:r}),Vte(e,t,s?o:void 0)}function nAe(e){const t={};e==="event"&&(t.durationThreshold=0),Sy(e,n=>{N1(e,{entries:n})},t)}function $te(e,t){o2[e]=o2[e]||[],o2[e].push(t)}function Vte(e,t,n){return()=>{n&&n();const r=o2[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function rAe(e){return"duration"in e}function eR(e){return typeof e=="number"&&isFinite(e)}function mf(e,t,n,{...r}){const s=pi(e).start_timestamp;return s&&s>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),BS(e,()=>{const o=zm({startTime:t,...r});return o&&o.end(n),o})}function jte(e){const t=mr();if(!t)return;const{name:n,transaction:r,attributes:s,startTime:o}=e,{release:c,environment:i}=t.getOptions(),f=t.getIntegrationByName("Replay"),g=f&&f.getReplayId(),x=hi(),w=x.getUser(),A=w!==void 0?w.email||w.id||w.ip_address:void 0;let C;try{C=x.getScopeData().contexts.profile.profile_id}catch{}const F={release:c,environment:i,user:A||void 0,profile_id:C||void 0,replay_id:g||void 0,transaction:r,"user_agent.original":Nr.navigator&&Nr.navigator.userAgent,...s};return zm({name:n,attributes:F,startTime:o,experimental:{standalone:!0}})}function KN(){return Nr&&Nr.addEventListener&&Nr.performance}function To(e){return e/1e3}function Ute(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function iAe(){let e=0,t,n;if(!oAe())return;let r=!1;function s(){r||(r=!0,n&&sAe(e,t,n),o())}const o=ZN(({metric:c})=>{const i=c.entries[c.entries.length-1];i&&(e=c.value,t=i)},!0);L1(()=>{s()}),setTimeout(()=>{const c=mr();if(!c)return;const i=c.on("startNavigationSpan",()=>{s(),i&&i()}),f=qs(),g=f&&go(f),x=g&&pi(g);x&&x.op==="pageload"&&(n=g.spanContext().spanId)},0)}function sAe(e,t,n){XN&&En.log(`Sending CLS span (${e})`);const r=To((Aa||0)+(t&&t.startTime||0)),s=hi().getScopeData().transactionName,o=t?uf(t.sources[0]&&t.sources[0].node):"Layout shift",c=Eo({[Ys]:"auto.http.browser.cls",[Fm]:"ui.webvital.cls",[ON]:t&&t.duration||0,"sentry.pageload.span_id":n}),i=jte({name:o,transaction:s,attributes:c,startTime:r});i&&(i.addEvent("cls",{[tP]:"",[nP]:e}),i.end(r))}function oAe(){try{return PerformanceObserver.supportedEntryTypes.includes("layout-shift")}catch{return!1}}const aAe=2147483647;let w9=0,va={},Gl,a2;function lAe({recordClsStandaloneSpans:e}){const t=KN();if(t&&Aa){t.mark&&Nr.performance.mark("sentry-tracing-init");const n=pAe(),r=fAe(),s=mAe(),o=e?iAe():hAe();return()=>{n(),r(),s(),o&&o()}}return()=>{}}function cAe(){Z0("longtask",({entries:e})=>{const t=qs();if(!t)return;const{op:n,start_timestamp:r}=pi(t);for(const s of e){const o=To(Aa+s.startTime),c=To(s.duration);n==="navigation"&&r&&o<r||mf(t,o,o+c,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Ys]:"auto.ui.browser.metrics"}})}})}function uAe(){new PerformanceObserver(t=>{const n=qs();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const s=To(Aa+r.startTime),{start_timestamp:o,op:c}=pi(n);if(c==="navigation"&&o&&s<o)continue;const i=To(r.duration),f={[Ys]:"auto.ui.browser.metrics"},g=r.scripts[0],{invoker:x,invokerType:w,sourceURL:A,sourceFunctionName:C,sourceCharPosition:F}=g;f["browser.script.invoker"]=x,f["browser.script.invoker_type"]=w,A&&(f["code.filepath"]=A),C&&(f["code.function"]=C),F!==-1&&(f["browser.script.source_char_position"]=F),mf(n,s,s+i,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:f})}}).observe({type:"long-animation-frame",buffered:!0})}function dAe(){Z0("event",({entries:e})=>{const t=qs();if(t){for(const n of e)if(n.name==="click"){const r=To(Aa+n.startTime),s=To(n.duration),o={name:uf(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[Ys]:"auto.ui.browser.metrics"}},c=see(n.target);c&&(o.attributes["ui.component_name"]=c),mf(t,r,r+s,o)}}})}function hAe(){return ZN(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(va.cls={value:e.value,unit:""},a2=t)},!0)}function fAe(){return Fte(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(va.lcp={value:e.value,unit:"millisecond"},Gl=t)},!0)}function pAe(){return zte(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=To(Aa),r=To(t.startTime);va.fid={value:e.value,unit:"millisecond"},va["mark.fid"]={value:n+r,unit:"second"}})}function mAe(){return ZMe(({metric:e})=>{e.entries[e.entries.length-1]&&(va.ttfb={value:e.value,unit:"millisecond"})})}function gAe(e,t){const n=KN();if(!n||!n.getEntries||!Aa)return;const r=To(Aa),s=n.getEntries(),{op:o,start_timestamp:c}=pi(e);if(s.slice(w9).forEach(i=>{const f=To(i.startTime),g=To(Math.max(0,i.duration));if(!(o==="navigation"&&c&&r+f<c))switch(i.entryType){case"navigation":{yAe(e,i,r);break}case"mark":case"paint":case"measure":{_Ae(e,i,f,g,r);const x=aP(),w=i.startTime<x.firstHiddenTime;i.name==="first-paint"&&w&&(va.fp={value:i.startTime,unit:"millisecond"}),i.name==="first-contentful-paint"&&w&&(va.fcp={value:i.startTime,unit:"millisecond"});break}case"resource":{xAe(e,i,i.name,f,g,r);break}}}),w9=Math.max(s.length-1,0),wAe(e),o==="pageload"){EAe(va);const i=va["mark.fid"];i&&va.fid&&(mf(e,i.value,i.value+To(va.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Ys]:"auto.ui.browser.metrics"}}),delete va["mark.fid"]),(!("fcp"in va)||!t.recordClsOnPageloadSpan)&&delete va.cls,Object.entries(va).forEach(([f,g])=>{Ree(f,g.value,g.unit)}),e.setAttribute("performance.timeOrigin",r),e.setAttribute("performance.activationStart",HS()),SAe(e)}Gl=void 0,a2=void 0,va={}}function _Ae(e,t,n,r,s){const o=US(!1),c=To(o?o.requestStart:0),i=s+Math.max(n,c),f=s+n,g=f+r,x={[Ys]:"auto.resource.browser.metrics"};return i!==f&&(x["sentry.browser.measure_happened_before_request"]=!0,x["sentry.browser.measure_start_time"]=i),mf(e,i,g,{name:t.name,op:t.entryType,attributes:x}),i}function yAe(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{DM(e,t,r,n)}),DM(e,t,"secureConnection",n,"TLS/SSL"),DM(e,t,"fetch",n,"cache"),DM(e,t,"domainLookup",n,"DNS"),bAe(e,t,n)}function DM(e,t,n,r,s=n){const o=vAe(n),c=t[o],i=t[`${n}Start`];!i||!c||mf(e,r+To(i),r+To(c),{op:`browser.${s}`,name:t.name,attributes:{[Ys]:"auto.ui.browser.metrics"}})}function vAe(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function bAe(e,t,n){const r=n+To(t.requestStart),s=n+To(t.responseEnd),o=n+To(t.responseStart);t.responseEnd&&(mf(e,r,s,{op:"browser.request",name:t.name,attributes:{[Ys]:"auto.ui.browser.metrics"}}),mf(e,o,s,{op:"browser.response",name:t.name,attributes:{[Ys]:"auto.ui.browser.metrics"}}))}function xAe(e,t,n,r,s,o){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const c=B_(n),i={[Ys]:"auto.resource.browser.metrics"};tR(i,t,"transferSize","http.response_transfer_size"),tR(i,t,"encodedBodySize","http.response_content_length"),tR(i,t,"decodedBodySize","http.decoded_response_content_length");const f=t.deliveryType;f!=null&&(i["http.response_delivery_type"]=f);const g=t.renderBlockingStatus;g&&(i["resource.render_blocking_status"]=g),c.protocol&&(i["url.scheme"]=c.protocol.split(":").pop()),c.host&&(i["server.address"]=c.host),i["url.same_origin"]=n.includes(Nr.location.origin);const{name:x,version:w}=Ute(t.nextHopProtocol);i["network.protocol.name"]=x,i["network.protocol.version"]=w;const A=o+r,C=A+s;mf(e,A,C,{name:n.replace(Nr.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:i})}function wAe(e){const t=Nr.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),eR(n.rtt)&&(va["connection.rtt"]={value:n.rtt,unit:"millisecond"})),eR(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),eR(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function SAe(e){Gl&&(Gl.element&&e.setAttribute("lcp.element",uf(Gl.element)),Gl.id&&e.setAttribute("lcp.id",Gl.id),Gl.url&&e.setAttribute("lcp.url",Gl.url.trim().slice(0,200)),Gl.loadTime!=null&&e.setAttribute("lcp.loadTime",Gl.loadTime),Gl.renderTime!=null&&e.setAttribute("lcp.renderTime",Gl.renderTime),e.setAttribute("lcp.size",Gl.size)),a2&&a2.sources&&a2.sources.forEach((t,n)=>e.setAttribute(`cls.source.${n+1}`,uf(t.node)))}function tR(e,t,n,r){const s=t[n];s!=null&&s<aAe&&(e[r]=s)}function EAe(e){const t=US(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}const TAe=1e3;let S9,kL,LL;function Hte(e){eg("dom",e),tg("dom",MAe)}function MAe(){if(!Nr.document)return;const e=Zc.bind(null,"dom"),t=E9(e,!0);Nr.document.addEventListener("click",t,!1),Nr.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const s=Nr[n],o=s&&s.prototype;!o||!o.hasOwnProperty||!o.hasOwnProperty("addEventListener")||(wl(o,"addEventListener",function(c){return function(i,f,g){if(i==="click"||i=="keypress")try{const x=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},w=x[i]=x[i]||{refCount:0};if(!w.handler){const A=E9(e);w.handler=A,c.call(this,i,A,g)}w.refCount++}catch{}return c.call(this,i,f,g)}}),wl(o,"removeEventListener",function(c){return function(i,f,g){if(i==="click"||i=="keypress")try{const x=this.__sentry_instrumentation_handlers__||{},w=x[i];w&&(w.refCount--,w.refCount<=0&&(c.call(this,i,w.handler,g),w.handler=void 0,delete x[i]),Object.keys(x).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return c.call(this,i,f,g)}}))})}function AAe(e){if(e.type!==kL)return!1;try{if(!e.target||e.target._sentryId!==LL)return!1}catch{}return!0}function CAe(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function E9(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=IAe(n);if(CAe(n.type,r))return;rc(n,"_sentryCaptured",!0),r&&!r._sentryId&&rc(r,"_sentryId",Tl());const s=n.type==="keypress"?"input":n.type;AAe(n)||(e({event:n,name:s,global:t}),kL=n.type,LL=r?r._sentryId:void 0),clearTimeout(S9),S9=Nr.setTimeout(()=>{LL=void 0,kL=void 0},TAe)}}function IAe(e){try{return e.target}catch{return null}}let RM;function lP(e){const t="history";eg(t,e),tg(t,PAe)}function PAe(){if(!dMe())return;const e=Nr.onpopstate;Nr.onpopstate=function(...n){const r=Nr.location.href,s=RM;if(RM=r,Zc("history",{from:s,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const o=RM,c=String(s);RM=c,Zc("history",{from:o,to:c})}return n.apply(this,r)}}wl(Nr.history,"pushState",t),wl(Nr.history,"replaceState",t)}const tC={};function JN(e){const t=tC[e];if(t)return t;let n=Nr[e];if(AL(n))return tC[e]=n.bind(Nr);const r=Nr.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(n=o[e]),r.head.removeChild(s)}catch(s){XN&&En.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,s)}return n&&(tC[e]=n.bind(Nr))}function T9(e){tC[e]=void 0}function K0(...e){return JN("setTimeout")(...e)}const dm="__sentry_xhr_v3__";function QN(e){eg("xhr",e),tg("xhr",OAe)}function OAe(){if(!Nr.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const s=new Error,o=Gs()*1e3,c=Kh(r[0])?r[0].toUpperCase():void 0,i=DAe(r[1]);if(!c||!i)return t.apply(n,r);n[dm]={method:c,url:i,request_headers:{}},c==="POST"&&i.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const f=()=>{const g=n[dm];if(g&&n.readyState===4){try{g.status_code=n.status}catch{}const x={endTimestamp:Gs()*1e3,startTimestamp:o,xhr:n,virtualError:s};Zc("xhr",x)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(g,x,w){return f(),g.apply(x,w)}}):n.addEventListener("readystatechange",f),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(g,x,w){const[A,C]=w,F=x[dm];return F&&Kh(A)&&Kh(C)&&(F.request_headers[A.toLowerCase()]=C),g.apply(x,w)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const s=n[dm];if(!s)return t.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const o={startTimestamp:Gs()*1e3,xhr:n};return Zc("xhr",o),t.apply(n,r)}})}function DAe(e){if(Kh(e))return e;try{return e.toString()}catch{}}const nR=[],nC=new Map;function RAe(){if(KN()&&Aa){const t=kAe();return()=>{t()}}return()=>{}}const M9={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function kAe(){return Bte(({metric:e})=>{if(e.value==null)return;const t=e.entries.find(F=>F.duration===e.value&&M9[F.name]);if(!t)return;const{interactionId:n}=t,r=M9[t.name],s=To(Aa+t.startTime),o=To(e.value),c=qs(),i=c?go(c):void 0,g=(n!=null?nC.get(n):void 0)||i,x=g?pi(g).description:hi().getScopeData().transactionName,w=uf(t.target),A=Eo({[Ys]:"auto.http.browser.inp",[Fm]:`ui.interaction.${r}`,[ON]:t.duration}),C=jte({name:w,transaction:x,attributes:A,startTime:s});C&&(C.addEvent("inp",{[tP]:"millisecond",[nP]:e.value}),C.end(s+o))})}function LAe(e){const t=({entries:n})=>{const r=qs(),s=r&&go(r);n.forEach(o=>{if(!rAe(o)||!s)return;const c=o.interactionId;if(c!=null&&!nC.has(c)){if(nR.length>10){const i=nR.shift();nC.delete(i)}nR.push(c),nC.set(c,s)}})};Z0("event",t),Z0("first-input",t)}function eF(e,t=JN("fetch")){let n=0,r=0;function s(o){const c=o.body.length;n+=c,r++;const i={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return T9("fetch"),pI("No fetch implementation available");try{return t(e.url,i).then(f=>(n-=c,r--,{statusCode:f.status,headers:{"x-sentry-rate-limits":f.headers.get("X-Sentry-Rate-Limits"),"retry-after":f.headers.get("Retry-After")}}))}catch(f){return T9("fetch"),n-=c,r--,pI(f)}}return nte(e,s)}const NAe=10,FAe=20,zAe=30,BAe=40,$Ae=50;function J0(e,t,n,r){const s={filename:e,function:t==="<anonymous>"?eh:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const VAe=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,jAe=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,UAe=/\((\S*)(?::(\d+))(?::(\d+))\)/,HAe=e=>{const t=VAe.exec(e);if(t){const[,r,s,o]=t;return J0(r,eh,+s,+o)}const n=jAe.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const c=UAe.exec(n[2]);c&&(n[2]=c[1],n[3]=c[2],n[4]=c[3])}const[s,o]=Xte(n[1]||eh,n[2]);return J0(o,s,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},Wte=[zAe,HAe],WAe=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,GAe=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,YAe=e=>{const t=WAe.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const o=GAe.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],s=t[1]||eh;return[s,r]=Xte(s,r),J0(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Gte=[$Ae,YAe],qAe=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,XAe=e=>{const t=qAe.exec(e);return t?J0(t[2],t[1]||eh,+t[3],t[4]?+t[4]:void 0):void 0},ZAe=[BAe,XAe],KAe=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,JAe=e=>{const t=KAe.exec(e);return t?J0(t[2],t[3]||eh,+t[1]):void 0},QAe=[NAe,JAe],eCe=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,tCe=e=>{const t=eCe.exec(e);return t?J0(t[5],t[3]||t[4]||eh,+t[1],+t[2]):void 0},nCe=[FAe,tCe],Yte=[Wte,Gte],qte=QQ(...Yte),Xte=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:eh,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},kM=1024,rCe="Breadcrumbs",iCe=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:rCe,setup(n){t.console&&dte(aCe(n)),t.dom&&Hte(oCe(n,t.dom)),t.xhr&&QN(lCe(n)),t.fetch&&GN(cCe(n)),t.history&&lP(uCe(n)),t.sentry&&n.on("beforeSendEvent",sCe(n))}}}),Zte=iCe;function sCe(e){return function(n){mr()===e&&sd({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Xp(n)},{event:n})}}function oCe(e,t){return function(r){if(mr()!==e)return;let s,o,c=typeof t=="object"?t.serializeAttribute:void 0,i=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;i&&i>kM&&(Ti&&En.warn(`\`dom.maxStringLength\` cannot exceed ${kM}, but a value of ${i} was configured. Sentry will use ${kM} instead.`),i=kM),typeof c=="string"&&(c=[c]);try{const g=r.event,x=dCe(g)?g.target:g;s=uf(x,{keyAttrs:c,maxStringLength:i}),o=see(x)}catch{s="<unknown>"}if(s.length===0)return;const f={category:`ui.${r.name}`,message:s};o&&(f.data={"ui.component_name":o}),sd(f,{event:r.event,name:r.name,global:r.global})}}function aCe(e){return function(n){if(mr()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:UN(n.level),message:fI(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${fI(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;sd(r,{input:n.args,level:n.level})}}function lCe(e){return function(n){if(mr()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,o=n.xhr[dm];if(!r||!s||!o)return;const{method:c,url:i,status_code:f,body:g}=o,x={method:c,url:i,status_code:f},w={xhr:n.xhr,input:g,startTimestamp:r,endTimestamp:s},A=bte(f);sd({category:"xhr",data:x,type:"http",level:A},w)}}function cCe(e){return function(n){if(mr()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const o=n.fetchData,c={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s};sd({category:"fetch",data:o,level:"error",type:"http"},c)}else{const o=n.response,c={...n.fetchData,status_code:o&&o.status},i={input:n.args,response:o,startTimestamp:r,endTimestamp:s},f=bte(c.status_code);sd({category:"fetch",data:c,type:"http",level:f},i)}}}function uCe(e){return function(n){if(mr()!==e)return;let r=n.from,s=n.to;const o=B_(lr.location.href);let c=r?B_(r):void 0;const i=B_(s);(!c||!c.path)&&(c=o),o.protocol===i.protocol&&o.host===i.host&&(s=i.relative),o.protocol===c.protocol&&o.host===c.host&&(r=c.relative),sd({category:"navigation",data:{from:r,to:s}})}}function dCe(e){return!!e&&!!e.target}const hCe=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],fCe="BrowserApiErrors",pCe=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:fCe,setupOnce(){t.setTimeout&&wl(lr,"setTimeout",A9),t.setInterval&&wl(lr,"setInterval",A9),t.requestAnimationFrame&&wl(lr,"requestAnimationFrame",mCe),t.XMLHttpRequest&&"XMLHttpRequest"in lr&&wl(XMLHttpRequest.prototype,"send",gCe);const n=t.eventTarget;n&&(Array.isArray(n)?n:hCe).forEach(_Ce)}}}),Kte=pCe;function A9(e){return function(...t){const n=t[0];return t[0]=X0(n,{mechanism:{data:{function:lf(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function mCe(e){return function(t){return e.apply(this,[X0(t,{mechanism:{data:{function:"requestAnimationFrame",handler:lf(e)},handled:!1,type:"instrument"}})])}}function gCe(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&wl(n,s,function(o){const c={mechanism:{data:{function:s,handler:lf(o)},handled:!1,type:"instrument"}},i=CN(o);return i&&(c.mechanism.data.handler=lf(i)),X0(o,c)})}),e.apply(this,t)}}function _Ce(e){const n=lr[e],r=n&&n.prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(wl(r,"addEventListener",function(s){return function(o,c,i){try{yCe(c)&&(c.handleEvent=X0(c.handleEvent,{mechanism:{data:{function:"handleEvent",handler:lf(c),target:e},handled:!1,type:"instrument"}}))}catch{}return s.apply(this,[o,X0(c,{mechanism:{data:{function:"addEventListener",handler:lf(c),target:e},handled:!1,type:"instrument"}}),i])}}),wl(r,"removeEventListener",function(s){return function(o,c,i){try{const f=c.__sentry_wrapped__;f&&s.call(this,o,f,i)}catch{}return s.call(this,o,c,i)}}))}function yCe(e){return typeof e.handleEvent=="function"}const Jte=()=>({name:"BrowserSession",setupOnce(){if(typeof lr.document>"u"){Ti&&En.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}bI({ignoreDuration:!0}),SL(),lP(({from:e,to:t})=>{e!==void 0&&e!==t&&(bI({ignoreDuration:!0}),SL())})}}),vCe="GlobalHandlers",bCe=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:vCe,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(xCe(n),C9("onerror")),t.onunhandledrejection&&(wCe(n),C9("onunhandledrejection"))}}}),Qte=bCe;function xCe(e){eee(t=>{const{stackParser:n,attachStacktrace:r}=ene();if(mr()!==e||Ete())return;const{msg:s,url:o,line:c,column:i,error:f}=t,g=TCe(qN(n,f||s,void 0,r,!1),o,c,i);g.level="error",D1(g,{originalException:f,mechanism:{handled:!1,type:"onerror"}})})}function wCe(e){tee(t=>{const{stackParser:n,attachStacktrace:r}=ene();if(mr()!==e||Ete())return;const s=SCe(t),o=MN(s)?ECe(s):qN(n,s,void 0,r,!0);o.level="error",D1(o,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function SCe(e){if(MN(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function ECe(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function TCe(e,t,n,r){const s=e.exception=e.exception||{},o=s.values=s.values||[],c=o[0]=o[0]||{},i=c.stacktrace=c.stacktrace||{},f=i.frames=i.frames||[],g=r,x=n,w=Kh(t)&&t.length>0?t:AN();return f.length===0&&f.push({colno:g,filename:w,function:eh,in_app:!0,lineno:x}),e}function C9(e){Ti&&En.log(`Global Handler attached: ${e}`)}function ene(){const e=mr();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const tne=()=>({name:"HttpContext",preprocessEvent(e){if(!lr.navigator&&!lr.location&&!lr.document)return;const t=e.request&&e.request.url||lr.location&&lr.location.href,{referrer:n}=lr.document||{},{userAgent:r}=lr.navigator||{},s={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},o={...e.request,...t&&{url:t},headers:s};e.request=o}}),MCe="cause",ACe=5,CCe="LinkedErrors",ICe=((e={})=>{const t=e.limit||ACe,n=e.key||MCe;return{name:CCe,preprocessEvent(r,s,o){const c=o.getOptions();DEe(sP,c.stackParser,c.maxValueLength,n,t,r,s)}}}),nne=ICe;function tF(e){const t=[ate(),ote(),Kte(),Zte(),Qte(),nne(),hte(),tne()];return e.autoSessionTracking!==!1&&t.push(Jte()),t}function PCe(e={}){const t={defaultIntegrations:tF(e),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:lr.SENTRY_RELEASE&&lr.SENTRY_RELEASE.id?lr.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return e.defaultIntegrations==null&&delete e.defaultIntegrations,{...t,...e}}function OCe(){const e=typeof lr.window<"u"&&lr;if(!e)return!1;const t=e.chrome?"chrome":"browser",n=e[t],r=n&&n.runtime&&n.runtime.id,s=lr.location&&lr.location.href||"",o=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],c=!!r&&lr===lr.top&&o.some(f=>s.startsWith(`${f}//`)),i=typeof e.nw<"u";return!!r&&!c&&!i}function DCe(e={}){const t=PCe(e);if(!t.skipBrowserExtensionCheck&&OCe()){su(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}Ti&&(xte()||En.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const n={...t,stackParser:Xwe(t.stackParser||qte),integrations:XSe(t),transport:t.transport||eF};return tEe(Ite,n)}function RCe(e={}){if(!lr.document){Ti&&En.error("Global document not defined in showReportDialog call");return}const t=hi(),n=t.getClient(),r=n&&n.getDsn();if(!r){Ti&&En.error("DSN not configured for showReportDialog call");return}if(t&&(e.user={...t.getUser(),...e.user}),!e.eventId){const i=Hee();i&&(e.eventId=i)}const s=lr.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=YSe(r,e),e.onLoad&&(s.onload=e.onLoad);const{onClose:o}=e;if(o){const i=f=>{if(f.data==="__sentry_reportdialog_closed__")try{o()}finally{lr.removeEventListener("message",i)}};lr.addEventListener("message",i)}const c=lr.document.head||lr.document.body;c?c.appendChild(s):Ti&&En.error("Not injecting report dialog. No injection point found in HTML")}function kCe(){}function LCe(e){e()}function NCe(e){const t=mr();t&&t.captureUserFeedback(e)}const FCe={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata"},I9=lr;async function rne(e,t){const n=FCe[e],r=I9.Sentry=I9.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const s=r[e];if(typeof s=="function"&&!("_isShim"in s))return s;const o=zCe(n),c=lr.document.createElement("script");c.src=o,c.crossOrigin="anonymous",c.referrerPolicy="origin",t&&c.setAttribute("nonce",t);const i=new Promise((w,A)=>{c.addEventListener("load",()=>w()),c.addEventListener("error",A)}),f=lr.document.currentScript,g=lr.document.body||lr.document.head||f&&f.parentElement;if(g)g.appendChild(c);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await i}catch{throw new Error(`Error when loading integration: ${e}`)}const x=r[e];if(typeof x!="function")throw new Error(`Could not load integration: ${e}`);return x}function zCe(e){const t=mr(),n=t&&t.getOptions(),r=n&&n.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${ed}/${e}.min.js`,r).toString()}const BCe=Fr,$Ce="ReportingObserver",P9=new WeakMap,VCe=((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(r){if(P9.has(mr()))for(const s of r)ou(o=>{o.setExtra("url",s.url);const c=`ReportingObserver [${s.type}]`;let i="No details available";if(s.body){const f={};for(const g in s.body)f[g]=s.body[g];if(o.setExtra("body",f),s.type==="crash"){const g=s.body;i=[g.crashId||"",g.reason||""].join(" ").trim()||i}else i=s.body.message||i}vI(`${c}: ${i}`)})}return{name:$Ce,setupOnce(){if(!nMe())return;new BCe.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){P9.set(r,!0)}}}),jCe=VCe,UCe="HttpClient",HCe=((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:UCe,setup(n){QCe(n,t),eIe(n,t)}}}),WCe=HCe;function GCe(e,t,n,r,s){if(sne(e,n.status,n.url)){const o=tIe(t,r);let c,i,f,g;ane()&&([c,f]=O9("Cookie",o),[i,g]=O9("Set-Cookie",n));const x=one({url:o.url,method:o.method,status:n.status,requestHeaders:c,responseHeaders:i,requestCookies:f,responseCookies:g,error:s});D1(x)}}function O9(e,t){const n=XCe(t.headers);let r;try{const s=n[e]||n[e.toLowerCase()]||void 0;s&&(r=ine(s))}catch{}return[n,r]}function YCe(e,t,n,r,s){if(sne(e,t.status,t.responseURL)){let o,c,i;if(ane()){try{const g=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;g&&(c=ine(g))}catch{}try{i=ZCe(t)}catch{}o=r}const f=one({url:t.responseURL,method:n,status:t.status,requestHeaders:o,responseHeaders:i,responseCookies:c,error:s});D1(f)}}function qCe(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function ine(e){return e.split("; ").reduce((t,n)=>{const[r,s]=n.split("=");return r&&s&&(t[r]=s),t},{})}function XCe(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function ZCe(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return s&&o&&(n[s]=o),n},{}):{}}function KCe(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function JCe(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function QCe(e,t){wte()&&GN(n=>{if(mr()!==e)return;const{response:r,args:s,error:o,virtualError:c}=n,[i,f]=s;r&&GCe(t,i,r,f,o||c)},!1)}function eIe(e,t){"XMLHttpRequest"in Fr&&QN(n=>{if(mr()!==e)return;const{error:r,virtualError:s}=n,o=n.xhr,c=o[dm];if(!c)return;const{method:i,request_headers:f}=c;try{YCe(t,o,i,f,r||s)}catch(g){Ti&&En.warn("Error while extracting response event form XHR response",g)}})}function sne(e,t,n){return JCe(e.failedRequestStatusCodes,t)&&KCe(e.failedRequestTargets,n)&&!ite(n,mr())}function one(e){const t=mr(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,s=`HTTP Client Error with status code: ${e.status}`,o={message:s,exception:{values:[{type:"Error",value:s,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:qCe(e.responseHeaders)}}};return Lm(o,{type:"http.client",handled:!1}),o}function tIe(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function ane(){const e=mr();return e?!!e.getOptions().sendDefaultPii:!1}const rR=Fr,nIe=7,rIe="ContextLines",iIe=((e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:nIe;return{name:rIe,processEvent(n){return oIe(n,t)}}}),sIe=iIe;function oIe(e,t){const n=rR.document,r=rR.location&&FEe(rR.location.href);if(!n||!r)return e;const s=e.exception&&e.exception.values;if(!s||!s.length)return e;const o=n.documentElement.innerHTML;if(!o)return e;const c=["<!DOCTYPE html>","<html>",...o.split(`
`),"</html>"];return s.forEach(i=>{const f=i.stacktrace;f&&f.frames&&(f.frames=f.frames.map(g=>aIe(g,c,r,t)))}),e}function aIe(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||u2e(t,e,r),e}const As=Fr,nF="sentryReplaySession",lIe="replay_event",rF="Unable to send Replay",cIe=3e5,uIe=9e5,dIe=5e3,hIe=5500,fIe=6e4,pIe=5e3,mIe=3,D9=15e4,LM=5e3,gIe=3e3,_Ie=300,iF=2e7,yIe=4999,vIe=15e3,R9=36e5;function NL(e,t){return e??t()}function J2(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=o(n)):(s==="call"||s==="optionalCall")&&(n=o((...c)=>n.call(t,...c)),t=void 0)}return n}var Xo;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(Xo||(Xo={}));function bIe(e){return e.nodeType===e.ELEMENT_NODE}function l2(e){const t=J2([e,"optionalAccess",n=>n.host]);return J2([t,"optionalAccess",n=>n.shadowRoot])===e}function c2(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function xIe(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function wIe(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function TI(e){try{const t=e.rules||e.cssRules;return t?xIe(Array.from(t,lne).join("")):null}catch{return null}}function SIe(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,s=r[n],o=r.getPropertyPriority(s);t+=`${s}:${r.getPropertyValue(s)}${o?" !important":""};`}return`${e.selectorText} { ${t} }`}function lne(e){let t;if(TIe(e))try{t=TI(e.styleSheet)||wIe(e)}catch{}else if(MIe(e)){let n=e.cssText;const r=e.selectorText.includes(":"),s=typeof e.style.all=="string"&&e.style.all;if(s&&(n=SIe(e)),r&&(n=EIe(n)),r||s)return n}return t||e.cssText}function EIe(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function TIe(e){return"styleSheet"in e}function MIe(e){return"selectorText"in e}class cne{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;const n=J2([this,"access",r=>r.getMeta,"call",r=>r(t),"optionalAccess",r=>r.id]);return NL(n,()=>-1)}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function AIe(){return new cne}function cP({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Q2({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function Q0(e){return e.toLowerCase()}function FL(e){return e.toUpperCase()}const k9="__rrweb_original__";function CIe(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const o=t.getImageData,c=k9 in o?o[k9]:o;if(new Uint32Array(c.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(f=>f!==0))return!1}return!0}function sF(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Q0(t):null}function MI(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function une(e,t){let n;try{n=new URL(e,NL(t,()=>window.location.href))}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i,s=n.pathname.match(r);return NL(J2([s,"optionalAccess",o=>o[1]]),()=>null)}const L9={};function dne(e){const t=L9[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return L9[e]=r.bind(window)}function zL(...e){return dne("setTimeout")(...e)}function hne(...e){return dne("clearTimeout")(...e)}function fne(e){try{return e.contentDocument}catch{}}let IIe=1;const PIe=new RegExp("[^a-z0-9-_:]"),eS=-2;function oF(){return IIe++}function OIe(e){if(e instanceof HTMLFormElement)return"form";const t=Q0(e.tagName);return PIe.test(t)?"div":t}function DIe(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Wv,N9;const RIe=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,kIe=/^(?:[a-z+]+:)?\/\//i,LIe=/^www\..*/i,NIe=/^(data:)([^,]*),(.*)/i;function AI(e,t){return(e||"").replace(RIe,(n,r,s,o,c,i)=>{const f=s||c||i,g=r||o||"";if(!f)return n;if(kIe.test(f)||LIe.test(f))return`url(${g}${f}${g})`;if(NIe.test(f))return`url(${g}${f}${g})`;if(f[0]==="/")return`url(${g}${DIe(t)+f}${g})`;const x=t.split("/"),w=f.split("/");x.pop();for(const A of w)A!=="."&&(A===".."?x.pop():x.push(A));return`url(${g}${x.join("/")}${g})`})}const FIe=/^[^ \t\n\r\u000c]+/,zIe=/^[, \t\n\r\u000c]+/;function BIe(e,t){if(t.trim()==="")return t;let n=0;function r(o){let c;const i=o.exec(t.substring(n));return i?(c=i[0],n+=c.length,c):""}const s=[];for(;r(zIe),!(n>=t.length);){let o=r(FIe);if(o.slice(-1)===",")o=c0(e,o.substring(0,o.length-1)),s.push(o);else{let c="";o=c0(e,o);let i=!1;for(;;){const f=t.charAt(n);if(f===""){s.push((o+c).trim());break}else if(i)f===")"&&(i=!1);else if(f===","){n+=1,s.push((o+c).trim());break}else f==="("&&(i=!0);c+=f,n+=1}}}return s.join(", ")}const F9=new WeakMap;function c0(e,t){return!t||t.trim()===""?t:uP(e,t)}function $Ie(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function uP(e,t){let n=F9.get(e);if(n||(n=e.createElement("a"),F9.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function pne(e,t,n,r,s,o){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?c0(e,r):n==="srcset"?BIe(e,r):n==="style"?AI(r,uP(e)):t==="object"&&n==="data"?c0(e,r):typeof o=="function"?o(n,r,s):r)}function mne(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function VIe(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const o=e.classList[s];if(t.test(o))return!0}if(n)return e.matches(n)}catch{}return!1}function jIe(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function x_(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:x_(e.parentNode,t,n,r+1)}function u0(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(jIe(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function e1(e,t,n,r,s,o){try{const c=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(c===null)return!1;if(c.tagName==="INPUT"){const g=c.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(g))return!0}let i=-1,f=-1;if(o){if(f=x_(c,u0(r,s)),f<0)return!0;i=x_(c,u0(t,n),f>=0?f:1/0)}else{if(i=x_(c,u0(t,n)),i<0)return!1;f=x_(c,u0(r,s),i>=0?i:1/0)}return i>=0?f>=0?i<=f:!0:f>=0?!1:!!o}catch{}return!!o}function UIe(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,o;try{o=r.document.readyState}catch{return}if(o!=="complete"){const i=zL(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{hne(i),s=!0,t()});return}const c="about:blank";if(r.location.href!==c||e.src===c||e.src==="")return zL(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function HIe(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const o=zL(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{hne(o),r=!0,t()})}function WIe(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:c,maskAllText:i,maskAttributeFn:f,maskTextClass:g,unmaskTextClass:x,maskTextSelector:w,unmaskTextSelector:A,inlineStylesheet:C,maskInputOptions:F={},maskTextFn:z,maskInputFn:j,dataURLOptions:V={},inlineImages:Y,recordCanvas:te,keepIframeSrcFn:J,newlyAddedElement:ee=!1}=t,le=GIe(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Xo.Document,childNodes:[],compatMode:e.compatMode}:{type:Xo.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Xo.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:le};case e.ELEMENT_NODE:return qIe(e,{doc:n,blockClass:s,blockSelector:o,unblockSelector:c,inlineStylesheet:C,maskAttributeFn:f,maskInputOptions:F,maskInputFn:j,dataURLOptions:V,inlineImages:Y,recordCanvas:te,keepIframeSrcFn:J,newlyAddedElement:ee,rootId:le,maskTextClass:g,unmaskTextClass:x,maskTextSelector:w,unmaskTextSelector:A});case e.TEXT_NODE:return YIe(e,{doc:n,maskAllText:i,maskTextClass:g,unmaskTextClass:x,maskTextSelector:w,unmaskTextSelector:A,maskTextFn:z,maskInputOptions:F,maskInputFn:j,rootId:le});case e.CDATA_SECTION_NODE:return{type:Xo.CDATA,textContent:"",rootId:le};case e.COMMENT_NODE:return{type:Xo.Comment,textContent:e.textContent||"",rootId:le};default:return!1}}function GIe(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function YIe(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:o,unmaskTextSelector:c,maskTextFn:i,maskInputOptions:f,maskInputFn:g,rootId:x}=t,w=e.parentNode&&e.parentNode.tagName;let A=e.textContent;const C=w==="STYLE"?!0:void 0,F=w==="SCRIPT"?!0:void 0,z=w==="TEXTAREA"?!0:void 0;if(C&&A){try{e.nextSibling||e.previousSibling||J2([e,"access",V=>V.parentNode,"access",V=>V.sheet,"optionalAccess",V=>V.cssRules])&&(A=TI(e.parentNode.sheet))}catch(V){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${V}`,e)}A=AI(A,uP(t.doc))}F&&(A="SCRIPT_PLACEHOLDER");const j=e1(e,r,o,s,c,n);if(!C&&!F&&!z&&A&&j&&(A=i?i(A,e.parentElement):A.replace(/[\S]/g,"*")),z&&A&&(f.textarea||j)&&(A=g?g(A,e.parentNode):A.replace(/[\S]/g,"*")),w==="OPTION"&&A){const V=cP({type:null,tagName:w,maskInputOptions:f});A=Q2({isMasked:e1(e,r,o,s,c,V),element:e,value:A,maskInputFn:g})}return{type:Xo.Text,textContent:A||"",isStyle:C,rootId:x}}function qIe(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:o,inlineStylesheet:c,maskInputOptions:i={},maskAttributeFn:f,maskInputFn:g,dataURLOptions:x={},inlineImages:w,recordCanvas:A,keepIframeSrcFn:C,newlyAddedElement:F=!1,rootId:z,maskTextClass:j,unmaskTextClass:V,maskTextSelector:Y,unmaskTextSelector:te}=t,J=VIe(e,r,s,o),ee=OIe(e);let le={};const oe=e.attributes.length;for(let se=0;se<oe;se++){const ie=e.attributes[se];ie.name&&!mne(ee,ie.name,ie.value)&&(le[ie.name]=pne(n,ee,Q0(ie.name),ie.value,e,f))}if(ee==="link"&&c){const se=Array.from(n.styleSheets).find(pe=>pe.href===e.href);let ie=null;se&&(ie=TI(se)),ie&&(le.rel=null,le.href=null,le.crossorigin=null,le._cssText=AI(ie,se.href))}if(ee==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const se=TI(e.sheet);se&&(le._cssText=AI(se,uP(n)))}if(ee==="input"||ee==="textarea"||ee==="select"||ee==="option"){const se=e,ie=sF(se),pe=MI(se,FL(ee),ie),be=se.checked;if(ie!=="submit"&&ie!=="button"&&pe){const Se=e1(se,j,Y,V,te,cP({type:ie,tagName:FL(ee),maskInputOptions:i}));le.value=Q2({isMasked:Se,element:se,value:pe,maskInputFn:g})}be&&(le.checked=be)}if(ee==="option"&&(e.selected&&!i.select?le.selected=!0:delete le.selected),ee==="canvas"&&A){if(e.__context==="2d")CIe(e)||(le.rr_dataURL=e.toDataURL(x.type,x.quality));else if(!("__context"in e)){const se=e.toDataURL(x.type,x.quality),ie=n.createElement("canvas");ie.width=e.width,ie.height=e.height;const pe=ie.toDataURL(x.type,x.quality);se!==pe&&(le.rr_dataURL=se)}}if(ee==="img"&&w){Wv||(Wv=n.createElement("canvas"),N9=Wv.getContext("2d"));const se=e,ie=se.currentSrc||se.getAttribute("src")||"<unknown-src>",pe=se.crossOrigin,be=()=>{se.removeEventListener("load",be);try{Wv.width=se.naturalWidth,Wv.height=se.naturalHeight,N9.drawImage(se,0,0),le.rr_dataURL=Wv.toDataURL(x.type,x.quality)}catch(Se){if(se.crossOrigin!=="anonymous"){se.crossOrigin="anonymous",se.complete&&se.naturalWidth!==0?be():se.addEventListener("load",be);return}else console.warn(`Cannot inline img src=${ie}! Error: ${Se}`)}se.crossOrigin==="anonymous"&&(pe?le.crossOrigin=pe:se.removeAttribute("crossorigin"))};se.complete&&se.naturalWidth!==0?be():se.addEventListener("load",be)}if((ee==="audio"||ee==="video")&&(le.rr_mediaState=e.paused?"paused":"played",le.rr_mediaCurrentTime=e.currentTime),F||(e.scrollLeft&&(le.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(le.rr_scrollTop=e.scrollTop)),J){const{width:se,height:ie}=e.getBoundingClientRect();le={class:le.class,rr_width:`${se}px`,rr_height:`${ie}px`}}ee==="iframe"&&!C(le.src)&&(!J&&!fne(e)&&(le.rr_src=le.src),delete le.src);let ve;try{customElements.get(ee)&&(ve=!0)}catch{}return{type:Xo.Element,tagName:ee,attributes:le,childNodes:[],isSVG:$Ie(e)||void 0,needBlock:J,rootId:z,isCustom:ve}}function Es(e){return e==null?"":e.toLowerCase()}function XIe(e,t){if(t.comment&&e.type===Xo.Comment)return!0;if(e.type===Xo.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&une(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Es(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Es(e.attributes.name)==="application-name"||Es(e.attributes.rel)==="icon"||Es(e.attributes.rel)==="apple-touch-icon"||Es(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Es(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Es(e.attributes.property).match(/^(og|twitter|fb):/)||Es(e.attributes.name).match(/^(og|twitter):/)||Es(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Es(e.attributes.name)==="robots"||Es(e.attributes.name)==="googlebot"||Es(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Es(e.attributes.name)==="author"||Es(e.attributes.name)==="generator"||Es(e.attributes.name)==="framework"||Es(e.attributes.name)==="publisher"||Es(e.attributes.name)==="progid"||Es(e.attributes.property).match(/^article:/)||Es(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Es(e.attributes.name)==="google-site-verification"||Es(e.attributes.name)==="yandex-verification"||Es(e.attributes.name)==="csrf-token"||Es(e.attributes.name)==="p:domain_verify"||Es(e.attributes.name)==="verify-v1"||Es(e.attributes.name)==="verification"||Es(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function d0(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:c,maskAllText:i,maskTextClass:f,unmaskTextClass:g,maskTextSelector:x,unmaskTextSelector:w,skipChild:A=!1,inlineStylesheet:C=!0,maskInputOptions:F={},maskAttributeFn:z,maskTextFn:j,maskInputFn:V,slimDOMOptions:Y,dataURLOptions:te={},inlineImages:J=!1,recordCanvas:ee=!1,onSerialize:le,onIframeLoad:oe,iframeLoadTimeout:ve=5e3,onStylesheetLoad:se,stylesheetLoadTimeout:ie=5e3,keepIframeSrcFn:pe=()=>!1,newlyAddedElement:be=!1}=t;let{preserveWhiteSpace:Se=!0}=t;const Ce=WIe(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:i,unblockSelector:c,maskTextClass:f,unmaskTextClass:g,maskTextSelector:x,unmaskTextSelector:w,inlineStylesheet:C,maskInputOptions:F,maskAttributeFn:z,maskTextFn:j,maskInputFn:V,dataURLOptions:te,inlineImages:J,recordCanvas:ee,keepIframeSrcFn:pe,newlyAddedElement:be});if(!Ce)return console.warn(e,"not serialized"),null;let Ee;r.hasNode(e)?Ee=r.getId(e):XIe(Ce,Y)||!Se&&Ce.type===Xo.Text&&!Ce.isStyle&&!Ce.textContent.replace(/^\s+|\s+$/gm,"").length?Ee=eS:Ee=oF();const xe=Object.assign(Ce,{id:Ee});if(r.add(e,xe),Ee===eS)return null;le&&le(e);let ke=!A;if(xe.type===Xo.Element){ke=ke&&!xe.needBlock,delete xe.needBlock;const He=e.shadowRoot;He&&c2(He)&&(xe.isShadowHost=!0)}if((xe.type===Xo.Document||xe.type===Xo.Element)&&ke){Y.headWhitespace&&xe.type===Xo.Element&&xe.tagName==="head"&&(Se=!1);const He={doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:i,unblockSelector:c,maskTextClass:f,unmaskTextClass:g,maskTextSelector:x,unmaskTextSelector:w,skipChild:A,inlineStylesheet:C,maskInputOptions:F,maskAttributeFn:z,maskTextFn:j,maskInputFn:V,slimDOMOptions:Y,dataURLOptions:te,inlineImages:J,recordCanvas:ee,preserveWhiteSpace:Se,onSerialize:le,onIframeLoad:oe,iframeLoadTimeout:ve,onStylesheetLoad:se,stylesheetLoadTimeout:ie,keepIframeSrcFn:pe};for(const Ke of Array.from(e.childNodes)){const Ge=d0(Ke,He);Ge&&xe.childNodes.push(Ge)}if(bIe(e)&&e.shadowRoot)for(const Ke of Array.from(e.shadowRoot.childNodes)){const Ge=d0(Ke,He);Ge&&(c2(e.shadowRoot)&&(Ge.isShadow=!0),xe.childNodes.push(Ge))}}return e.parentNode&&l2(e.parentNode)&&c2(e.parentNode)&&(xe.isShadow=!0),xe.type===Xo.Element&&xe.tagName==="iframe"&&UIe(e,()=>{const He=fne(e);if(He&&oe){const Ke=d0(He,{doc:He,mirror:r,blockClass:s,blockSelector:o,unblockSelector:c,maskAllText:i,maskTextClass:f,unmaskTextClass:g,maskTextSelector:x,unmaskTextSelector:w,skipChild:!1,inlineStylesheet:C,maskInputOptions:F,maskAttributeFn:z,maskTextFn:j,maskInputFn:V,slimDOMOptions:Y,dataURLOptions:te,inlineImages:J,recordCanvas:ee,preserveWhiteSpace:Se,onSerialize:le,onIframeLoad:oe,iframeLoadTimeout:ve,onStylesheetLoad:se,stylesheetLoadTimeout:ie,keepIframeSrcFn:pe});Ke&&oe(e,Ke)}},ve),xe.type===Xo.Element&&xe.tagName==="link"&&typeof xe.attributes.rel=="string"&&(xe.attributes.rel==="stylesheet"||xe.attributes.rel==="preload"&&typeof xe.attributes.href=="string"&&une(xe.attributes.href)==="css")&&HIe(e,()=>{if(se){const He=d0(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:c,maskAllText:i,maskTextClass:f,unmaskTextClass:g,maskTextSelector:x,unmaskTextSelector:w,skipChild:!1,inlineStylesheet:C,maskInputOptions:F,maskAttributeFn:z,maskTextFn:j,maskInputFn:V,slimDOMOptions:Y,dataURLOptions:te,inlineImages:J,recordCanvas:ee,preserveWhiteSpace:Se,onSerialize:le,onIframeLoad:oe,iframeLoadTimeout:ve,onStylesheetLoad:se,stylesheetLoadTimeout:ie,keepIframeSrcFn:pe});He&&se(e,He)}},ie),xe}function ZIe(e,t){const{mirror:n=new cne,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:o=null,maskAllText:c=!1,maskTextClass:i="rr-mask",unmaskTextClass:f=null,maskTextSelector:g=null,unmaskTextSelector:x=null,inlineStylesheet:w=!0,inlineImages:A=!1,recordCanvas:C=!1,maskAllInputs:F=!1,maskAttributeFn:z,maskTextFn:j,maskInputFn:V,slimDOM:Y=!1,dataURLOptions:te,preserveWhiteSpace:J,onSerialize:ee,onIframeLoad:le,iframeLoadTimeout:oe,onStylesheetLoad:ve,stylesheetLoadTimeout:se,keepIframeSrcFn:ie=()=>!1}=t||{};return d0(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:c,maskTextClass:i,unmaskTextClass:f,maskTextSelector:g,unmaskTextSelector:x,skipChild:!1,inlineStylesheet:w,maskInputOptions:F===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:F===!1?{}:F,maskAttributeFn:z,maskTextFn:j,maskInputFn:V,slimDOMOptions:Y===!0||Y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:Y==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:Y===!1?{}:Y,dataURLOptions:te,inlineImages:A,recordCanvas:C,preserveWhiteSpace:J,onSerialize:ee,onIframeLoad:le,iframeLoadTimeout:oe,onStylesheetLoad:ve,stylesheetLoadTimeout:se,keepIframeSrcFn:ie,newlyAddedElement:!1})}function Zp(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=o(n)):(s==="call"||s==="optionalCall")&&(n=o((...c)=>n.call(t,...c)),t=void 0)}return n}function bl(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const t0=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let z9={map:{},getId(){return console.error(t0),-1},getNode(){return console.error(t0),null},removeNodeFromMap(){console.error(t0)},has(){return console.error(t0),!1},reset(){console.error(t0)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(z9=new Proxy(z9,{get(e,t,n){return t==="map"&&console.error(t0),Reflect.get(e,t,n)}}));function tS(e,t,n={}){let r=null,s=0;return function(...o){const c=Date.now();!s&&n.leading===!1&&(s=c);const i=t-(c-s),f=this;i<=0||i>t?(r&&(r3e(r),r=null),s=c,e.apply(f,o)):!r&&n.trailing!==!1&&(r=dP(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(f,o)},i))}}function gne(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(c){dP(()=>{n.set.call(this,c)},0),o&&o.set&&o.set.call(this,c)}}),()=>gne(e,t,o||{},!0)}function aF(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let CI=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(CI=()=>new Date().getTime());function _ne(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:Zp([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||Zp([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||Zp([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:Zp([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||Zp([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||Zp([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function yne(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function vne(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function bne(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function bc(e,t,n,r,s){if(!e)return!1;const o=bne(e);if(!o)return!1;const c=u0(t,n);if(!s){const g=r&&o.matches(r);return c(o)&&!g}const i=x_(o,c);let f=-1;return i<0?!1:(r&&(f=x_(o,u0(null,r))),i>-1&&f<0?!0:i<f)}function KIe(e,t){return t.getId(e)!==-1}function iR(e,t){return t.getId(e)===eS}function xne(e,t){if(l2(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?xne(e.parentNode,t):!0:!0}function BL(e){return!!e.changedTouches}function JIe(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function wne(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Sne(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function $L(e){return!!Zp([e,"optionalAccess",t=>t.shadowRoot])}class QIe{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return hMe(this.styleIDMap.get(t),()=>-1)}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Ene(e){let t=null;return Zp([e,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function e3e(e){let t=e,n;for(;n=Ene(t);)t=n;return t}function t3e(e){const t=e.ownerDocument;if(!t)return!1;const n=e3e(e);return t.contains(n)}function Tne(e){const t=e.ownerDocument;return t?t.contains(e)||t3e(e):!1}const B9={};function lF(e){const t=B9[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return B9[e]=r.bind(window)}function n3e(...e){return lF("requestAnimationFrame")(...e)}function dP(...e){return lF("setTimeout")(...e)}function r3e(...e){return lF("clearTimeout")(...e)}var xi=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(xi||{}),oi=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(oi||{}),dl=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(dl||{}),Ah=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Ah||{}),$9;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})($9||($9={}));var V9;(function(e){e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"})(V9||(V9={}));function cF(e){try{return e.contentDocument}catch{}}function i3e(e){try{return e.contentWindow}catch{}}function s3e(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=o(n)):(s==="call"||s==="optionalCall")&&(n=o((...c)=>n.call(t,...c)),t=void 0)}return n}function j9(e){return"__ln"in e}class o3e{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=s3e([n,"optionalAccess",s=>s.next])||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&j9(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&j9(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const U9=(e,t)=>`${e}@${t}`;class a3e{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new o3e,s=f=>{let g=f,x=eS;for(;x===eS;)g=g&&g.nextSibling,x=g&&this.mirror.getId(g);return x},o=f=>{if(!f.parentNode||!Tne(f))return;const g=l2(f.parentNode)?this.mirror.getId(Ene(f)):this.mirror.getId(f.parentNode),x=s(f);if(g===-1||x===-1)return r.addNode(f);const w=d0(f,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:A=>{wne(A,this.mirror)&&!bc(A,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(A),Sne(A,this.mirror)&&this.stylesheetManager.trackLinkElement(A),$L(f)&&this.shadowDomManager.addShadowRoot(f.shadowRoot,this.doc)},onIframeLoad:(A,C)=>{bc(A,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(A,C),A.contentWindow&&this.canvasManager.addWindow(A.contentWindow),this.shadowDomManager.observeAttachShadow(A))},onStylesheetLoad:(A,C)=>{this.stylesheetManager.attachLinkElement(A,C)}});w&&(t.push({parentId:g,nextId:x,node:w}),n.add(w.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const f of this.movedSet)H9(this.removes,f,this.mirror)&&!this.movedSet.has(f.parentNode)||o(f);for(const f of this.addedSet)!W9(this.droppedSet,f)&&!H9(this.removes,f,this.mirror)||W9(this.movedSet,f)?o(f):this.droppedSet.add(f);let c=null;for(;r.length;){let f=null;if(c){const g=this.mirror.getId(c.value.parentNode),x=s(c.value);g!==-1&&x!==-1&&(f=c)}if(!f){let g=r.tail;for(;g;){const x=g;if(g=g.previous,x){const w=this.mirror.getId(x.value.parentNode);if(s(x.value)===-1)continue;if(w!==-1){f=x;break}else{const C=x.value;if(C.parentNode&&C.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const F=C.parentNode.host;if(this.mirror.getId(F)!==-1){f=x;break}}}}}}if(!f){for(;r.head;)r.removeNode(r.head.value);break}c=f.previous,r.removeNode(f.value),o(f.value)}const i={texts:this.texts.map(f=>({id:this.mirror.getId(f.node),value:f.value})).filter(f=>!n.has(f.id)).filter(f=>this.mirror.has(f.id)),attributes:this.attributes.map(f=>{const{attributes:g}=f;if(typeof g.style=="string"){const x=JSON.stringify(f.styleDiff),w=JSON.stringify(f._unchangedStyles);x.length<g.style.length&&(x+w).split("var(").length===g.style.split("var(").length&&(g.style=f.styleDiff)}return{id:this.mirror.getId(f.node),attributes:g}}).filter(f=>!n.has(f.id)).filter(f=>this.mirror.has(f.id)),removes:this.removes,adds:t};!i.texts.length&&!i.attributes.length&&!i.removes.length&&!i.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=t=>{if(!iR(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!bc(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:e1(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,bne(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if(r==="value"){const c=sF(n),i=n.tagName;s=MI(n,i,c);const f=cP({maskInputOptions:this.maskInputOptions,tagName:i,type:c}),g=e1(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,f);s=Q2({isMasked:g,element:n,value:s,maskInputFn:this.maskInputFn})}if(bc(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let o=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!cF(n))r="rr_src";else return;if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(t.target,o)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!mne(n.tagName,r)&&(o.attributes[r]=pne(this.doc,Q0(n.tagName),Q0(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const c=this.unattachedDoc.createElement("span");t.oldValue&&c.setAttribute("style",t.oldValue);for(const i of Array.from(n.style)){const f=n.style.getPropertyValue(i),g=n.style.getPropertyPriority(i);f!==c.style.getPropertyValue(i)||g!==c.style.getPropertyPriority(i)?g===""?o.styleDiff[i]=f:o.styleDiff[i]=[f,g]:o._unchangedStyles[i]=[f,g]}for(const i of Array.from(c.style))n.style.getPropertyValue(i)===""&&(o.styleDiff[i]=!1)}break}case"childList":{if(bc(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=l2(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);bc(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||iR(n,this.mirror)||!KIe(n,this.mirror)||(this.addedSet.has(n)?(VL(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||xne(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[U9(r,s)]?VL(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:l2(t.target)&&c2(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(iR(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[U9(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);bc(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),$L(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function VL(e,t){e.delete(t),t.childNodes.forEach(n=>VL(e,n))}function H9(e,t,n){return e.length===0?!1:l3e(e,t,n)}function l3e(e,t,n){let r=t.parentNode;for(;r;){const s=n.getId(r);if(e.some(o=>o.id===s))return!0;r=r.parentNode}return!1}function W9(e,t){return e.size===0?!1:Mne(e,t)}function Mne(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:Mne(e,n):!1}let u2;function c3e(e){u2=e}function u3e(){u2=void 0}const Ui=e=>u2?((...n)=>{try{return e(...n)}catch(r){if(u2&&u2(r)===!0)return()=>{};throw r}}):e;function Uu(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=o(n)):(s==="call"||s==="optionalCall")&&(n=o((...c)=>n.call(t,...c)),t=void 0)}return n}const h0=[];function YS(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Ane(e,t){const n=new a3e;h0.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=Uu([window,"optionalAccess",c=>c.Zone,"optionalAccess",c=>c.__symbol__,"optionalCall",c=>c("MutationObserver")]);s&&window[s]&&(r=window[s]);const o=new r(Ui(c=>{e.onMutation&&e.onMutation(c)===!1||n.processMutations.bind(n)(c)}));return o.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function d3e({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,o=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let c=[],i;const f=tS(Ui(w=>{const A=Date.now()-i;e(c.map(C=>(C.timeOffset-=A,C)),w),c=[],i=null}),o),g=Ui(tS(Ui(w=>{const A=YS(w),{clientX:C,clientY:F}=BL(w)?w.changedTouches[0]:w;i||(i=CI()),c.push({x:C,y:F,id:r.getId(A),timeOffset:CI()-i}),f(typeof DragEvent<"u"&&w instanceof DragEvent?oi.Drag:w instanceof MouseEvent?oi.MouseMove:oi.TouchMove)}),s,{trailing:!1})),x=[bl("mousemove",g,n),bl("touchmove",g,n),bl("drag",g,n)];return Ui(()=>{x.forEach(w=>w())})}function h3e({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:c}){if(c.mouseInteraction===!1)return()=>{};const i=c.mouseInteraction===!0||c.mouseInteraction===void 0?{}:c.mouseInteraction,f=[];let g=null;const x=w=>A=>{const C=YS(A);if(bc(C,r,s,o,!0))return;let F=null,z=w;if("pointerType"in A){switch(A.pointerType){case"mouse":F=Ah.Mouse;break;case"touch":F=Ah.Touch;break;case"pen":F=Ah.Pen;break}F===Ah.Touch?dl[w]===dl.MouseDown?z="TouchStart":dl[w]===dl.MouseUp&&(z="TouchEnd"):Ah.Pen}else BL(A)&&(F=Ah.Touch);F!==null?(g=F,(z.startsWith("Touch")&&F===Ah.Touch||z.startsWith("Mouse")&&F===Ah.Mouse)&&(F=null)):dl[w]===dl.Click&&(F=g,g=null);const j=BL(A)?A.changedTouches[0]:A;if(!j)return;const V=n.getId(C),{clientX:Y,clientY:te}=j;Ui(e)({type:dl[z],id:V,x:Y,y:te,...F!==null&&{pointerType:F}})};return Object.keys(dl).filter(w=>Number.isNaN(Number(w))&&!w.endsWith("_Departed")&&i[w]!==!1).forEach(w=>{let A=Q0(w);const C=x(w);if(window.PointerEvent)switch(dl[w]){case dl.MouseDown:case dl.MouseUp:A=A.replace("mouse","pointer");break;case dl.TouchStart:case dl.TouchEnd:return}f.push(bl(A,C,t))}),Ui(()=>{f.forEach(w=>w())})}function Cne({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:c}){const i=Ui(tS(Ui(f=>{const g=YS(f);if(!g||bc(g,r,s,o,!0))return;const x=n.getId(g);if(g===t&&t.defaultView){const w=_ne(t.defaultView);e({id:x,x:w.left,y:w.top})}else e({id:x,x:g.scrollLeft,y:g.scrollTop})}),c.scroll||100));return bl("scroll",i,t)}function f3e({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=Ui(tS(Ui(()=>{const o=yne(),c=vne();(n!==o||r!==c)&&(e({width:Number(c),height:Number(o)}),n=o,r=c)}),200));return bl("resize",s,t)}const p3e=["INPUT","TEXTAREA","SELECT"],G9=new WeakMap;function m3e({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,ignoreClass:c,ignoreSelector:i,maskInputOptions:f,maskInputFn:g,sampling:x,userTriggeredOnInput:w,maskTextClass:A,unmaskTextClass:C,maskTextSelector:F,unmaskTextSelector:z}){function j(oe){let ve=YS(oe);const se=oe.isTrusted,ie=ve&&FL(ve.tagName);if(ie==="OPTION"&&(ve=ve.parentElement),!ve||!ie||p3e.indexOf(ie)<0||bc(ve,r,s,o,!0))return;const pe=ve;if(pe.classList.contains(c)||i&&pe.matches(i))return;const be=sF(ve);let Se=MI(pe,ie,be),Ce=!1;const Ee=cP({maskInputOptions:f,tagName:ie,type:be}),xe=e1(ve,A,F,C,z,Ee);(be==="radio"||be==="checkbox")&&(Ce=ve.checked),Se=Q2({isMasked:xe,element:ve,value:Se,maskInputFn:g}),V(ve,w?{text:Se,isChecked:Ce,userTriggered:se}:{text:Se,isChecked:Ce});const ke=ve.name;be==="radio"&&ke&&Ce&&t.querySelectorAll(`input[type="radio"][name="${ke}"]`).forEach(He=>{if(He!==ve){const Ke=Q2({isMasked:xe,element:He,value:MI(He,ie,be),maskInputFn:g});V(He,w?{text:Ke,isChecked:!Ce,userTriggered:!1}:{text:Ke,isChecked:!Ce})}})}function V(oe,ve){const se=G9.get(oe);if(!se||se.text!==ve.text||se.isChecked!==ve.isChecked){G9.set(oe,ve);const ie=n.getId(oe);Ui(e)({...ve,id:ie})}}const te=(x.input==="last"?["change"]:["input","change"]).map(oe=>bl(oe,Ui(j),t)),J=t.defaultView;if(!J)return()=>{te.forEach(oe=>oe())};const ee=J.Object.getOwnPropertyDescriptor(J.HTMLInputElement.prototype,"value"),le=[[J.HTMLInputElement.prototype,"value"],[J.HTMLInputElement.prototype,"checked"],[J.HTMLSelectElement.prototype,"value"],[J.HTMLTextAreaElement.prototype,"value"],[J.HTMLSelectElement.prototype,"selectedIndex"],[J.HTMLOptionElement.prototype,"selected"]];return ee&&ee.set&&te.push(...le.map(oe=>gne(oe[0],oe[1],{set(){Ui(j)({target:this,isTrusted:!1})}},!1,J))),Ui(()=>{te.forEach(oe=>oe())})}function II(e){const t=[];function n(r,s){if(NM("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||NM("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||NM("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||NM("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const c=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(c)}else if(r.parentStyleSheet){const c=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(c)}return s}return n(e,t)}function Kp(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function g3e({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:Ui((x,w,A)=>{const[C,F]=A,{id:z,styleId:j}=Kp(w,t,n.styleMirror);return(z&&z!==-1||j&&j!==-1)&&e({id:z,styleId:j,adds:[{rule:C,index:F}]}),x.apply(w,A)})});const o=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:Ui((x,w,A)=>{const[C]=A,{id:F,styleId:z}=Kp(w,t,n.styleMirror);return(F&&F!==-1||z&&z!==-1)&&e({id:F,styleId:z,removes:[{index:C}]}),x.apply(w,A)})});let c;r.CSSStyleSheet.prototype.replace&&(c=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(c,{apply:Ui((x,w,A)=>{const[C]=A,{id:F,styleId:z}=Kp(w,t,n.styleMirror);return(F&&F!==-1||z&&z!==-1)&&e({id:F,styleId:z,replace:C}),x.apply(w,A)})}));let i;r.CSSStyleSheet.prototype.replaceSync&&(i=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(i,{apply:Ui((x,w,A)=>{const[C]=A,{id:F,styleId:z}=Kp(w,t,n.styleMirror);return(F&&F!==-1||z&&z!==-1)&&e({id:F,styleId:z,replaceSync:C}),x.apply(w,A)})}));const f={};FM("CSSGroupingRule")?f.CSSGroupingRule=r.CSSGroupingRule:(FM("CSSMediaRule")&&(f.CSSMediaRule=r.CSSMediaRule),FM("CSSConditionRule")&&(f.CSSConditionRule=r.CSSConditionRule),FM("CSSSupportsRule")&&(f.CSSSupportsRule=r.CSSSupportsRule));const g={};return Object.entries(f).forEach(([x,w])=>{g[x]={insertRule:w.prototype.insertRule,deleteRule:w.prototype.deleteRule},w.prototype.insertRule=new Proxy(g[x].insertRule,{apply:Ui((A,C,F)=>{const[z,j]=F,{id:V,styleId:Y}=Kp(C.parentStyleSheet,t,n.styleMirror);return(V&&V!==-1||Y&&Y!==-1)&&e({id:V,styleId:Y,adds:[{rule:z,index:[...II(C),j||0]}]}),A.apply(C,F)})}),w.prototype.deleteRule=new Proxy(g[x].deleteRule,{apply:Ui((A,C,F)=>{const[z]=F,{id:j,styleId:V}=Kp(C.parentStyleSheet,t,n.styleMirror);return(j&&j!==-1||V&&V!==-1)&&e({id:j,styleId:V,removes:[{index:[...II(C),z]}]}),A.apply(C,F)})})}),Ui(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=o,c&&(r.CSSStyleSheet.prototype.replace=c),i&&(r.CSSStyleSheet.prototype.replaceSync=i),Object.entries(f).forEach(([x,w])=>{w.prototype.insertRule=g[x].insertRule,w.prototype.deleteRule=g[x].deleteRule})})}function Ine({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?Uu([n,"access",c=>c.defaultView,"optionalAccess",c=>c.Document]):Uu([n,"access",c=>c.ownerDocument,"optionalAccess",c=>c.defaultView,"optionalAccess",c=>c.ShadowRoot]),o=Uu([s,"optionalAccess",c=>c.prototype])?Object.getOwnPropertyDescriptor(Uu([s,"optionalAccess",c=>c.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!o?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){return Uu([o,"access",c=>c.get,"optionalAccess",c=>c.call,"call",c=>c(this)])},set(c){const i=Uu([o,"access",f=>f.set,"optionalAccess",f=>f.call,"call",f=>f(this,c)]);if(r!==null&&r!==-1)try{t.adoptStyleSheets(c,r)}catch{}return i}}),Ui(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))}function _3e({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const o=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:Ui((i,f,g)=>{const[x,w,A]=g;if(n.has(x))return o.apply(f,[x,w,A]);const{id:C,styleId:F}=Kp(Uu([f,"access",z=>z.parentRule,"optionalAccess",z=>z.parentStyleSheet]),t,r.styleMirror);return(C&&C!==-1||F&&F!==-1)&&e({id:C,styleId:F,set:{property:x,value:w,priority:A},index:II(f.parentRule)}),i.apply(f,g)})});const c=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(c,{apply:Ui((i,f,g)=>{const[x]=g;if(n.has(x))return c.apply(f,[x]);const{id:w,styleId:A}=Kp(Uu([f,"access",C=>C.parentRule,"optionalAccess",C=>C.parentStyleSheet]),t,r.styleMirror);return(w&&w!==-1||A&&A!==-1)&&e({id:w,styleId:A,remove:{property:x},index:II(f.parentRule)}),i.apply(f,g)})}),Ui(()=>{s.CSSStyleDeclaration.prototype.setProperty=o,s.CSSStyleDeclaration.prototype.removeProperty=c})}function y3e({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:o,doc:c}){const i=Ui(g=>tS(Ui(x=>{const w=YS(x);if(!w||bc(w,t,n,r,!0))return;const{currentTime:A,volume:C,muted:F,playbackRate:z}=w;e({type:g,id:s.getId(w),currentTime:A,volume:C,muted:F,playbackRate:z})}),o.media||500)),f=[bl("play",i(0),c),bl("pause",i(1),c),bl("seeked",i(2),c),bl("volumechange",i(3),c),bl("ratechange",i(4),c)];return Ui(()=>{f.forEach(g=>g())})}function v3e({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,o=n.FontFace;n.FontFace=function(f,g,x){const w=new o(f,g,x);return s.set(w,{family:f,buffer:typeof g!="string",descriptors:x,fontSource:typeof g=="string"?g:JSON.stringify(Array.from(new Uint8Array(g)))}),w};const c=aF(t.fonts,"add",function(i){return function(f){return dP(Ui(()=>{const g=s.get(f);g&&(e(g),s.delete(f))}),0),i.apply(this,[f])}});return r.push(()=>{n.FontFace=o}),r.push(c),Ui(()=>{r.forEach(i=>i())})}function b3e(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,selectionCb:c}=e;let i=!0;const f=Ui(()=>{const g=t.getSelection();if(!g||i&&Uu([g,"optionalAccess",A=>A.isCollapsed]))return;i=g.isCollapsed||!1;const x=[],w=g.rangeCount||0;for(let A=0;A<w;A++){const C=g.getRangeAt(A),{startContainer:F,startOffset:z,endContainer:j,endOffset:V}=C;bc(F,r,s,o,!0)||bc(j,r,s,o,!0)||x.push({start:n.getId(F),startOffset:z,end:n.getId(j),endOffset:V})}c({ranges:x})});return f(),bl("selectionchange",f)}function x3e({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:aF(n.customElements,"define",function(s){return function(o,c,i){try{t({define:{name:o}})}catch{}return s.apply(this,[o,c,i])}})}function w3e(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=Ane(e,e.doc));const s=d3e(e),o=h3e(e),c=Cne(e),i=f3e(e,{win:n}),f=m3e(e),g=y3e(e);let x=()=>{},w=()=>{},A=()=>{},C=()=>{};e.recordDOM&&(x=g3e(e,{win:n}),w=Ine(e,e.doc),A=_3e(e,{win:n}),e.collectFonts&&(C=v3e(e)));const F=b3e(e),z=x3e(e),j=[];for(const V of e.plugins)j.push(V.observer(V.callback,n,V.options));return Ui(()=>{h0.forEach(V=>V.reset()),Uu([r,"optionalAccess",V=>V.disconnect,"call",V=>V()]),s(),o(),c(),i(),f(),g(),x(),w(),A(),C(),F(),z(),j.forEach(V=>V())})}function NM(e){return typeof window[e]<"u"}function FM(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class jL{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const o=r||this.getIdToRemoteIdMap(t),c=s||this.getRemoteIdToIdMap(t);let i=o.get(n);return i||(i=this.generateIdFn(),o.set(n,i),c.set(i,n)),i}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(o=>this.getId(t,o,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const o=s.get(n);return o||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}function Y9(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],o=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=o(n)):(s==="call"||s==="optionalCall")&&(n=o((...c)=>n.call(t,...c)),t=void 0)}return n}class S3e{constructor(){this.crossOriginIframeMirror=new jL(oF),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class E3e{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new jL(oF),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new jL(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Y9([this,"access",s=>s.loadListener,"optionalCall",s=>s(t)]);const r=cF(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const o=this.transformCrossOriginEvent(s,n.data.event);o&&this.wrappedEmit(o,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case xi.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:xi.IncrementalSnapshot,data:{source:oi.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case xi.Meta:case xi.Load:case xi.DomContentLoaded:return!1;case xi.Plugin:return n;case xi.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case xi.IncrementalSnapshot:switch(n.data.source){case oi.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(r.node,s)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case oi.Drag:case oi.TouchMove:case oi.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case oi.ViewportResize:return!1;case oi.MediaInteraction:case oi.MouseInteraction:case oi.Scroll:case oi.CanvasMutation:case oi.Input:return this.replaceIds(n.data,t,["id"]),n;case oi.StyleSheetRule:case oi.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case oi.Font:return n;case oi.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case oi.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),Y9([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(s=>{this.replaceStyleIds(s,t,["styleId"])})]),n}}return!1}replace(t,n,r,s){for(const o of s)!Array.isArray(n[o])&&typeof n[o]!="number"||(Array.isArray(n[o])?n[o]=t.getIds(r,n[o]):n[o]=t.getId(r,n[o]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Xo.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class T3e{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class M3e{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!c2(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=Ane({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Cne({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),dP(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Ine({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=cF(t),r=i3e(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(aF(t.prototype,"attachShadow",function(s){return function(o){const c=s.call(this,o);return this.shadowRoot&&Tne(this)&&r.addShadowRoot(this.shadowRoot,n),c}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}class q9{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class A3e{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new QIe,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const o of t){let c;this.styleMirror.has(o)?c=this.styleMirror.getId(o):(c=this.styleMirror.add(o),s.push({styleId:c,rules:Array.from(o.rules||CSSRule,(i,f)=>({rule:lne(i),index:f}))})),r.styleIds.push(c)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class C3e{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.active||(this.active=!0,n3e(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let ao,PI;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=$_([e,"access",t=>t.contentWindow,"optionalAccess",t=>t.Array,"access",t=>t.from])||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const ku=AIe();function Jh(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:o=null,unblockSelector:c=null,ignoreClass:i="rr-ignore",ignoreSelector:f=null,maskAllText:g=!1,maskTextClass:x="rr-mask",unmaskTextClass:w=null,maskTextSelector:A=null,unmaskTextSelector:C=null,inlineStylesheet:F=!0,maskAllInputs:z,maskInputOptions:j,slimDOMOptions:V,maskAttributeFn:Y,maskInputFn:te,maskTextFn:J,maxCanvasSize:ee=null,packFn:le,sampling:oe={},dataURLOptions:ve={},mousemoveWait:se,recordDOM:ie=!0,recordCanvas:pe=!1,recordCrossOriginIframes:be=!1,recordAfter:Se=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:Ce=!1,collectFonts:Ee=!1,inlineImages:xe=!1,plugins:ke,keepIframeSrcFn:He=()=>!1,ignoreCSSAttributes:Ke=new Set([]),errorHandler:Ge,onMutation:$t,getCanvasManager:Ft}=e;c3e(Ge);const Lt=be?window.parent===window:!0;let nn=!1;if(!Lt)try{window.parent.document&&(nn=!1)}catch{nn=!0}if(Lt&&!t)throw new Error("emit function is required");if(!Lt&&!nn)return()=>{};se!==void 0&&oe.mousemove===void 0&&(oe.mousemove=se),ku.reset();const mn=z===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:j!==void 0?j:{},Xt=V===!0||V==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:V==="all",headMetaDescKeywords:V==="all"}:V||{};JIe();let mt,Jt=0;const Kt=ze=>{for(const lt of ke||[])lt.eventProcessor&&(ze=lt.eventProcessor(ze));return le&&!nn&&(ze=le(ze)),ze};ao=(ze,lt)=>{const at=ze;if(at.timestamp=CI(),$_([h0,"access",Et=>Et[0],"optionalAccess",Et=>Et.isFrozen,"call",Et=>Et()])&&at.type!==xi.FullSnapshot&&!(at.type===xi.IncrementalSnapshot&&at.data.source===oi.Mutation)&&h0.forEach(Et=>Et.unfreeze()),Lt)$_([t,"optionalCall",Et=>Et(Kt(at),lt)]);else if(nn){const Et={type:"rrweb",event:Kt(at),origin:window.location.origin,isCheckout:lt};window.parent.postMessage(Et,"*")}if(at.type===xi.FullSnapshot)mt=at,Jt=0;else if(at.type===xi.IncrementalSnapshot){if(at.data.source===oi.Mutation&&at.data.isAttachIframe)return;Jt++;const Et=r&&Jt>=r,$e=n&&mt&&at.timestamp-mt.timestamp>n;(Et||$e)&&Rt(!0)}};const _e=ze=>{ao({type:xi.IncrementalSnapshot,data:{source:oi.Mutation,...ze}})},bn=ze=>ao({type:xi.IncrementalSnapshot,data:{source:oi.Scroll,...ze}}),On=ze=>ao({type:xi.IncrementalSnapshot,data:{source:oi.CanvasMutation,...ze}}),je=ze=>ao({type:xi.IncrementalSnapshot,data:{source:oi.AdoptedStyleSheet,...ze}}),ge=new A3e({mutationCb:_e,adoptedStyleSheetCb:je}),nt=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new S3e:new E3e({mirror:ku,mutationCb:_e,stylesheetManager:ge,recordCrossOriginIframes:be,wrappedEmit:ao});for(const ze of ke||[])ze.getMirror&&ze.getMirror({nodeMirror:ku,crossOriginIframeMirror:nt.crossOriginIframeMirror,crossOriginIframeStyleMirror:nt.crossOriginIframeStyleMirror});const It=new C3e,ht=P3e(Ft,{mirror:ku,win:window,mutationCb:ze=>ao({type:xi.IncrementalSnapshot,data:{source:oi.CanvasMutation,...ze}}),recordCanvas:pe,blockClass:s,blockSelector:o,unblockSelector:c,maxCanvasSize:ee,sampling:oe.canvas,dataURLOptions:ve,errorHandler:Ge}),ut=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new T3e:new M3e({mutationCb:_e,scrollCb:bn,bypassOptions:{onMutation:$t,blockClass:s,blockSelector:o,unblockSelector:c,maskAllText:g,maskTextClass:x,unmaskTextClass:w,maskTextSelector:A,unmaskTextSelector:C,inlineStylesheet:F,maskInputOptions:mn,dataURLOptions:ve,maskAttributeFn:Y,maskTextFn:J,maskInputFn:te,recordCanvas:pe,inlineImages:xe,sampling:oe,slimDOMOptions:Xt,iframeManager:nt,stylesheetManager:ge,canvasManager:ht,keepIframeSrcFn:He,processedNodeManager:It},mirror:ku}),Rt=(ze=!1)=>{if(!ie)return;ao({type:xi.Meta,data:{href:window.location.href,width:vne(),height:yne()}},ze),ge.reset(),ut.init(),h0.forEach(at=>at.lock());const lt=ZIe(document,{mirror:ku,blockClass:s,blockSelector:o,unblockSelector:c,maskAllText:g,maskTextClass:x,unmaskTextClass:w,maskTextSelector:A,unmaskTextSelector:C,inlineStylesheet:F,maskAllInputs:mn,maskAttributeFn:Y,maskInputFn:te,maskTextFn:J,slimDOM:Xt,dataURLOptions:ve,recordCanvas:pe,inlineImages:xe,onSerialize:at=>{wne(at,ku)&&nt.addIframe(at),Sne(at,ku)&&ge.trackLinkElement(at),$L(at)&&ut.addShadowRoot(at.shadowRoot,document)},onIframeLoad:(at,Et)=>{nt.attachIframe(at,Et),at.contentWindow&&ht.addWindow(at.contentWindow),ut.observeAttachShadow(at)},onStylesheetLoad:(at,Et)=>{ge.attachLinkElement(at,Et)},keepIframeSrcFn:He});if(!lt)return console.warn("Failed to snapshot the document");ao({type:xi.FullSnapshot,data:{node:lt,initialOffset:_ne(window)}}),h0.forEach(at=>at.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ge.adoptStyleSheets(document.adoptedStyleSheets,ku.getId(document))};PI=Rt;try{const ze=[],lt=Et=>Ui(w3e)({onMutation:$t,mutationCb:_e,mousemoveCb:($e,Mt)=>ao({type:xi.IncrementalSnapshot,data:{source:Mt,positions:$e}}),mouseInteractionCb:$e=>ao({type:xi.IncrementalSnapshot,data:{source:oi.MouseInteraction,...$e}}),scrollCb:bn,viewportResizeCb:$e=>ao({type:xi.IncrementalSnapshot,data:{source:oi.ViewportResize,...$e}}),inputCb:$e=>ao({type:xi.IncrementalSnapshot,data:{source:oi.Input,...$e}}),mediaInteractionCb:$e=>ao({type:xi.IncrementalSnapshot,data:{source:oi.MediaInteraction,...$e}}),styleSheetRuleCb:$e=>ao({type:xi.IncrementalSnapshot,data:{source:oi.StyleSheetRule,...$e}}),styleDeclarationCb:$e=>ao({type:xi.IncrementalSnapshot,data:{source:oi.StyleDeclaration,...$e}}),canvasMutationCb:On,fontCb:$e=>ao({type:xi.IncrementalSnapshot,data:{source:oi.Font,...$e}}),selectionCb:$e=>{ao({type:xi.IncrementalSnapshot,data:{source:oi.Selection,...$e}})},customElementCb:$e=>{ao({type:xi.IncrementalSnapshot,data:{source:oi.CustomElement,...$e}})},blockClass:s,ignoreClass:i,ignoreSelector:f,maskAllText:g,maskTextClass:x,unmaskTextClass:w,maskTextSelector:A,unmaskTextSelector:C,maskInputOptions:mn,inlineStylesheet:F,sampling:oe,recordDOM:ie,recordCanvas:pe,inlineImages:xe,userTriggeredOnInput:Ce,collectFonts:Ee,doc:Et,maskAttributeFn:Y,maskInputFn:te,maskTextFn:J,keepIframeSrcFn:He,blockSelector:o,unblockSelector:c,slimDOMOptions:Xt,dataURLOptions:ve,mirror:ku,iframeManager:nt,stylesheetManager:ge,shadowDomManager:ut,processedNodeManager:It,canvasManager:ht,ignoreCSSAttributes:Ke,plugins:$_([ke,"optionalAccess",$e=>$e.filter,"call",$e=>$e(Mt=>Mt.observer),"optionalAccess",$e=>$e.map,"call",$e=>$e(Mt=>({observer:Mt.observer,options:Mt.options,callback:tn=>ao({type:xi.Plugin,data:{plugin:Mt.name,payload:tn}})}))])||[]},{});nt.addLoadListener(Et=>{try{ze.push(lt(Et.contentDocument))}catch($e){console.warn($e)}});const at=()=>{Rt(),ze.push(lt(document))};return document.readyState==="interactive"||document.readyState==="complete"?at():(ze.push(bl("DOMContentLoaded",()=>{ao({type:xi.DomContentLoaded,data:{}}),Se==="DOMContentLoaded"&&at()})),ze.push(bl("load",()=>{ao({type:xi.Load,data:{}}),Se==="load"&&at()},window))),()=>{ze.forEach(Et=>Et()),It.destroy(),PI=void 0,u3e()}}catch(ze){console.warn(ze)}}function I3e(e){if(!PI)throw new Error("please take full snapshot after start recording");PI(e)}Jh.mirror=ku;Jh.takeFullSnapshot=I3e;function P3e(e,t){try{return e?e(t):new q9}catch{return console.warn("Unable to initialize CanvasManager"),new q9}}const O3e=3,D3e=5;function uF(e){return e>9999999999?e:e*1e3}function sR(e){return e>9999999999?e/1e3:e}function qS(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:xi.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Hc(t,10,1e3)}}),t.category==="console")))}const R3e="button,a";function Pne(e){return e.closest(R3e)||e}function One(e){const t=Dne(e);return!t||!(t instanceof Element)?t:Pne(t)}function Dne(e){return k3e(e)?e.target:e}function k3e(e){return typeof e=="object"&&!!e&&"target"in e}let Jp;function L3e(e){return Jp||(Jp=[],N3e()),Jp.push(e),()=>{const t=Jp?Jp.indexOf(e):-1;t>-1&&Jp.splice(t,1)}}function N3e(){wl(As,"open",function(e){return function(...t){if(Jp)try{Jp.forEach(n=>n())}catch{}return e.apply(As,t)}})}const F3e=new Set([oi.Mutation,oi.StyleSheetRule,oi.StyleDeclaration,oi.AdoptedStyleSheet,oi.CanvasMutation,oi.Selection,oi.MediaInteraction]);function z3e(e,t,n){e.handleClick(t,n)}class B3e{constructor(t,n,r=qS){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=L3e(()=>{this._lastMutation=X9()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(V3e(n,this._ignoreSelector)||!j3e(t))return;const r={timestamp:sR(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=sR(t)}registerScroll(t=Date.now()){this._lastScroll=sR(t)}registerClick(t){const n=Pne(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=X9();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,o=!r&&!s,{clickCount:c,clickBreadcrumb:i}=t;if(o){const f=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,g=f<this._timeout*1e3?"mutation":"timeout",x={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:As.location.href,route:n.getCurrentRoute(),timeAfterClickMs:f,endReason:g,clickCount:c||1}};this._addBreadcrumbEvent(n,x);return}if(c>1){const f={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:As.location.href,route:n.getCurrentRoute(),clickCount:c,metric:!0}};this._addBreadcrumbEvent(n,f)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=K0(()=>this._checkClicks(),1e3)}}const $3e=["A","BUTTON","INPUT"];function V3e(e,t){return!!(!$3e.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function j3e(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function X9(){return Date.now()/1e3}function U3e(e,t){try{if(!H3e(t))return;const{source:n}=t.data;if(F3e.has(n)&&e.registerMutation(t.timestamp),n===oi.Scroll&&e.registerScroll(t.timestamp),W3e(t)){const{type:r,id:s}=t.data,o=Jh.mirror.getNode(s);o instanceof HTMLElement&&r===dl.Click&&e.registerClick(o)}}catch{}}function H3e(e){return e.type===O3e}function W3e(e){return e.data.source===oi.MouseInteraction}function zd(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var OI;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(OI||(OI={}));const G3e=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Y3e(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(G3e.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const q3e=e=>t=>{if(!e.isEnabled())return;const n=X3e(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&z3e(e.clickDetector,n,One(t.event)),qS(e,n)};function Rne(e,t){const n=Jh.mirror.getId(e),r=n&&Jh.mirror.getNode(n),s=r&&Jh.mirror.getMeta(r),o=s&&K3e(s)?s:null;return{message:t,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map(c=>c.type===OI.Text&&c.textContent).filter(Boolean).map(c=>c.trim()).join(""),attributes:Y3e(o.attributes)}}:{}}}function X3e(e){const{target:t,message:n}=Z3e(e);return zd({category:`ui.${e.name}`,...Rne(t,n)})}function Z3e(e){const t=e.name==="click";let n,r=null;try{r=t?One(e.event):Dne(e.event),n=uf(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function K3e(e){return e.type===OI.Element}function J3e(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=Q3e(t);n&&qS(e,n)}function Q3e(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o,target:c}=e;if(!c||ePe(c)||!o)return null;const i=t||r||s,f=o.length===1;if(!i&&f)return null;const g=uf(c,{maxStringLength:200})||"<unknown>",x=Rne(c,g);return zd({category:"ui.keyDown",message:g,data:{...x.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o}})}function ePe(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const tPe={resource:oPe,paint:iPe,navigation:sPe};function zM(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function nPe(e){return e.map(rPe).filter(Boolean)}function rPe(e){const t=tPe[e.entryType];return t?t(e):null}function t1(e){return((Aa||As.performance.timeOrigin)+e)/1e3}function iPe(e){const{duration:t,entryType:n,name:r,startTime:s}=e,o=t1(s);return{type:n,name:r,start:o,end:o+t,data:void 0}}function sPe(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:o,encodedBodySize:c,domContentLoadedEventStart:i,domContentLoadedEventEnd:f,domInteractive:g,loadEventStart:x,loadEventEnd:w,redirectCount:A,startTime:C,transferSize:F,type:z}=e;return s===0?null:{type:`${t}.${z}`,start:t1(C),end:t1(o),name:n,data:{size:F,decodedBodySize:r,encodedBodySize:c,duration:s,domInteractive:g,domContentLoadedEventStart:i,domContentLoadedEventEnd:f,loadEventStart:x,loadEventEnd:w,domComplete:o,redirectCount:A}}}function oPe(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:o,decodedBodySize:c,encodedBodySize:i,responseStatus:f,transferSize:g}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:t1(o),end:t1(s),name:r,data:{size:g,statusCode:f,decodedBodySize:c,encodedBodySize:i}}}function aPe(e){const t=e.entries[e.entries.length-1],n=t&&t.element?[t.element]:void 0;return hP(e,"largest-contentful-paint",n)}function lPe(e){return e.sources!==void 0}function cPe(e){const t=[],n=[];for(const r of e.entries)if(lPe(r)){const s=[];for(const o of r.sources)if(o.node){n.push(o.node);const c=Jh.mirror.getId(o.node);c&&s.push(c)}t.push({value:r.value,nodeIds:s.length?s:void 0})}return hP(e,"cumulative-layout-shift",n,t)}function uPe(e){const t=e.entries[e.entries.length-1],n=t&&t.target?[t.target]:void 0;return hP(e,"first-input-delay",n)}function dPe(e){const t=e.entries[e.entries.length-1],n=t&&t.target?[t.target]:void 0;return hP(e,"interaction-to-next-paint",n)}function hP(e,t,n,r){const s=e.value,o=e.rating,c=t1(s);return{type:"web-vital",name:t,start:c,end:c,data:{value:s,size:s,rating:o,nodeIds:n?n.map(i=>Jh.mirror.getId(i)):void 0,attributions:r}}}function hPe(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(Z0(s,n))}),r.push(Fte(zM(aPe,e)),ZN(zM(cPe,e)),zte(zM(uPe,e)),Bte(zM(dPe,e))),()=>{r.forEach(s=>s())}}const jr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,fPe='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=A(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},U=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=x(f,15),M=b.t,E=b.l,A=x(h,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=C[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(a[t]^a[t+1]<<A^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=U(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=U(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(J)return J.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),a=0,s=function(t){i[a++]=t},o=0;o<e;++o){if(a+5>i.length){var f=new t(a+8+(e-o<<1));f.set(i),i=f}var h=n.charCodeAt(o);h<128||r?s(h):h<2048?(s(192|h>>6),s(128|63&h)):h>55295&&h<57344?(s(240|(h=65536+(1047552&h)|1023&n.charCodeAt(++o))>>18),s(128|h>>12&63),s(128|h>>6&63),s(128|63&h)):(s(224|h>>12),s(128|h>>6&63),s(128|63&h))}return b(i,0,a)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function pPe(){const e=new Blob([fPe]);return URL.createObjectURL(e)}const Z9=["info","warn","error","log"],rC="[Replay] ";function oR(e,t="info"){sd({category:"console",data:{logger:"replay"},level:t,message:`${rC}${e}`},{level:t})}function mPe(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=r.captureExceptions,t=r.traceInternals}};return jr?(Z9.forEach(r=>{n[r]=(...s)=>{En[r](rC,...s),t&&oR(s.join(""),UN(r))}}),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),En.error(rC,r),e?If(r):t&&oR(r,"error")},n.infoTick=(...r)=>{En.info(rC,...r),t&&setTimeout(()=>oR(r[0]),0)}):Z9.forEach(r=>{n[r]=()=>{}}),n}const Qr=mPe();class dF extends Error{constructor(){super(`Event buffer exceeded maximum size of ${iF}.`)}}class kne{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>iF)throw new dF;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?uF(t):null}}class gPe{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){jr&&Qr.info("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,o)=>{const c=({data:i})=>{const f=i;if(f.method===t&&f.id===r){if(this._worker.removeEventListener("message",c),!f.success){jr&&Qr.error("Error in compression worker: ",f.response),o(new Error("Error in compression worker"));return}s(f.response)}};this._worker.addEventListener("message",c),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class _Pe{constructor(t){this._worker=new gPe(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=uF(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>iF?Promise.reject(new dF):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{jr&&Qr.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class yPe{constructor(t){this._fallback=new kne,this._compression=new _Pe(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){jr&&Qr.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,s=[];for(const o of t)s.push(this._compression.addEvent(o));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(o){jr&&Qr.exception(o,"Failed to add events when switching buffers.")}}}function vPe({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=bPe(t);if(n)return n}return jr&&Qr.info("Using simple buffer"),new kne}function bPe(e){try{const t=e||xPe();if(!t)return;jr&&Qr.info(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new yPe(n)}catch(t){jr&&Qr.exception(t,"Failed to create compression worker")}}function xPe(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?pPe():""}function hF(){try{return"sessionStorage"in As&&!!As.sessionStorage}catch{return!1}}function wPe(e){SPe(),e.session=void 0}function SPe(){if(hF())try{As.sessionStorage.removeItem(nF)}catch{}}function Lne(e){return e===void 0?!1:Math.random()<e}function Nne(e){const t=Date.now(),n=e.id||Tl(),r=e.started||t,s=e.lastActivity||t,o=e.segmentId||0,c=e.sampled,i=e.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:o,sampled:c,previousSessionId:i}}function fF(e){if(hF())try{As.sessionStorage.setItem(nF,JSON.stringify(e))}catch{}}function EPe(e,t){return Lne(e)?"session":t?"buffer":!1}function K9({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=EPe(e,t),o=Nne({sampled:s,previousSessionId:r});return n&&fF(o),o}function TPe(){if(!hF())return null;try{const e=As.sessionStorage.getItem(nF);if(!e)return null;const t=JSON.parse(e);return jr&&Qr.infoTick("Loading existing session"),Nne(t)}catch{return null}}function UL(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function Fne(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return UL(e.started,t,r)||UL(e.lastActivity,n,r)}function zne(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!Fne(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function aR({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const s=r.stickySession&&TPe();return s?zne(s,{sessionIdleExpire:e,maxReplayDuration:t})?(jr&&Qr.infoTick("Session in sessionStorage is expired, creating new one..."),K9(r,{previousSessionId:s.id})):s:(jr&&Qr.infoTick("Creating new session"),K9(r,{previousSessionId:n}))}function MPe(e){return e.type===xi.Custom}function pF(e,t,n){return $ne(e,t)?(Bne(e,t,n),!0):!1}function APe(e,t,n){return $ne(e,t)?Bne(e,t,n):Promise.resolve(null)}async function Bne(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const s=e.recordingMode==="buffer";try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const o=e.getOptions(),c=CPe(t,o.beforeAddRecordingEvent);return c?await r.addEvent(c):void 0}catch(o){const c=o&&o instanceof dF,i=c?"addEventSizeExceeded":"addEvent";if(c&&s)return r.clear(),r.waitForCheckout=!0,null;e.handleException(o),await e.stop({reason:i});const f=mr();f&&f.recordDroppedEvent("internal_sdk_error","replay")}}function $ne(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=uF(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(jr&&Qr.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function CPe(e,t){try{if(typeof t=="function"&&MPe(e))return t(e)}catch(n){return jr&&Qr.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function mF(e){return!e.type}function HL(e){return e.type==="transaction"}function IPe(e){return e.type==="replay_event"}function J9(e){return e.type==="feedback"}function PPe(e){return(t,n)=>{if(!e.isEnabled()||!mF(t)&&!HL(t))return;const r=n&&n.statusCode;if(!(!r||r<200||r>=300)){if(HL(t)){OPe(e,t);return}DPe(e,t)}}}function OPe(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function DPe(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||K0(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(s){e.handleException(s)}})}function RPe(e){return t=>{!e.isEnabled()||!mF(t)||kPe(e,t)}}function kPe(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0]&&t.exception.values[0].value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=zd({category:"replay.hydrate-error",data:{url:AN()}});qS(e,r)}}function LPe(e){const t=mr();t&&t.on("beforeAddBreadcrumb",n=>NPe(e,n))}function NPe(e,t){if(!e.isEnabled()||!Vne(t))return;const n=FPe(t);n&&qS(e,n)}function FPe(e){return!Vne(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?zPe(e):zd(e)}function zPe(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return zd(e);let n=!1;const r=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>LM?(n=!0,`${s.slice(0,LM)}`):s;if(typeof s=="object")try{const o=Hc(s,7);return JSON.stringify(o).length>LM?(n=!0,`${JSON.stringify(o,null,2).slice(0,LM)}`):o}catch{}return s});return zd({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Vne(e){return!!e.category}function BPe(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!(t.originalException&&t.originalException.__rrweb__)}function jne(){const e=hi().getPropagationContext().dsc;e&&delete e.replay_id;const t=qs();if(t){const n=ig(t);delete n.replay_id}}function $Pe(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:xi.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function VPe(e,t){return e.recordingMode!=="buffer"||t.message===rF||!t.exception||t.type?!1:Lne(e.getOptions().errorSampleRate)}function jPe(e){return Object.assign((t,n)=>!e.isEnabled()||e.isPaused()?t:IPe(t)?(delete t.breadcrumbs,t):!mF(t)&&!HL(t)&&!J9(t)?t:e.checkAndHandleExpiredSession()?J9(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),$Pe(e,t),t):BPe(t,n)&&!e.getOptions()._experiments.captureExceptions?(jr&&Qr.log("Ignoring error from rrweb internals",t),null):((VPe(e,t)||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),t):(jne(),t),{id:"Replay"})}function fP(e,t){return t.map(({type:n,start:r,end:s,name:o,data:c})=>{const i=e.throttledAddEvent({type:xi.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:o,startTimestamp:r,endTimestamp:s,data:c}}});return typeof i=="string"?Promise.resolve(null):i})}function UPe(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function HPe(e){return t=>{if(!e.isEnabled())return;const n=UPe(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(fP(e,[n]),!1)))}}function WPe(e,t){return jr&&e.getOptions()._experiments.traceInternals?!1:ite(t,mr())}function Une(e,t){e.isEnabled()&&t!==null&&(WPe(e,t.name)||e.addUpdate(()=>(fP(e,[t]),!0)))}function pP(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Yne(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function Hne(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Wne(e){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Yne(e)];if(!e)return[void 0]}catch(t){return jr&&Qr.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return jr&&Qr.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function DI(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Gne(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:o,statusCode:c,request:i,response:f}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:Eo({method:o,statusCode:c,request:i,response:f})}}function nS(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Am(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:o}=GPe(n);return r.body=s,o&&o.length>0&&(r._meta={warnings:o}),r}function WL(e,t){return Object.entries(e).reduce((n,[r,s])=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=s),n},{})}function Yne(e){return new URLSearchParams(e).toString()}function GPe(e){if(!e||typeof e!="string")return{body:e};const t=e.length>D9,n=YPe(e);if(t){const r=e.slice(0,D9);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function YPe(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function RI(e,t){const n=qPe(e);return Mm(n,t)}function qPe(e,t=As.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(As.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function XPe(e,t,n){try{const r=await KPe(e,t,n),s=Gne("resource.fetch",r);Une(n.replay,s)}catch(r){jr&&Qr.exception(r,"Failed to capture fetch breadcrumb")}}function ZPe(e,t){const{input:n,response:r}=t,s=n?qne(n):void 0,o=pP(s),c=r?Hne(r.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),c!==void 0&&(e.data.response_body_size=c)}async function KPe(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r}=t,{url:c,method:i,status_code:f=0,request_body_size:g,response_body_size:x}=e.data,w=RI(c,n.networkDetailAllowUrls)&&!RI(c,n.networkDetailDenyUrls),A=w?JPe(n,t.input,g):nS(g),C=await QPe(w,n,t.response,x);return{startTimestamp:s,endTimestamp:o,url:c,method:i,statusCode:f,request:A,response:C}}function JPe({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?nOe(n,t):{};if(!e)return Am(s,r,void 0);const o=qne(n),[c,i]=Wne(o),f=Am(s,r,c);return i?DI(f,i):f}async function QPe(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,s){if(!e&&s!==void 0)return nS(s);const o=r?Xne(r.headers,n):{};if(!r||!t&&s!==void 0)return Am(o,s,void 0);const[c,i]=await tOe(r),f=eOe(c,{networkCaptureBodies:t,responseBodySize:s,captureDetails:e,headers:o});return i?DI(f,i):f}function eOe(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:s}){try{const o=e&&e.length&&n===void 0?pP(e):n;return r?t?Am(s,o,e):Am(s,o,void 0):nS(o)}catch(o){return jr&&Qr.exception(o,"Failed to serialize response body"),Am(s,n,void 0)}}async function tOe(e){const t=rOe(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await iOe(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(jr&&Qr.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(jr&&Qr.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function qne(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function Xne(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function nOe(e,t){return e.length===1&&typeof e[0]!="string"?Q9(e[0],t):e.length===2?Q9(e[1],t):{}}function Q9(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Xne(n,t):Array.isArray(n)?{}:WL(n,t):{}}function rOe(e){try{return e.clone()}catch(t){jr&&Qr.exception(t,"Failed to clone response body")}}function iOe(e){return new Promise((t,n)=>{const r=K0(()=>n(new Error("Timeout while trying to read response body")),500);sOe(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function sOe(e){return await e.text()}async function oOe(e,t,n){try{const r=lOe(e,t,n),s=Gne("resource.xhr",r);Une(n.replay,s)}catch(r){jr&&Qr.exception(r,"Failed to capture xhr breadcrumb")}}function aOe(e,t){const{xhr:n,input:r}=t;if(!n)return;const s=pP(r),o=n.getResponseHeader("content-length")?Hne(n.getResponseHeader("content-length")):hOe(n.response,n.responseType);s!==void 0&&(e.data.request_body_size=s),o!==void 0&&(e.data.response_body_size=o)}function lOe(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r,input:c,xhr:i}=t,{url:f,method:g,status_code:x=0,request_body_size:w,response_body_size:A}=e.data;if(!f)return null;if(!i||!RI(f,n.networkDetailAllowUrls)||RI(f,n.networkDetailDenyUrls)){const le=nS(w),oe=nS(A);return{startTimestamp:s,endTimestamp:o,url:f,method:g,statusCode:x,request:le,response:oe}}const C=i[dm],F=C?WL(C.request_headers,n.networkRequestHeaders):{},z=WL(cOe(i),n.networkResponseHeaders),[j,V]=n.networkCaptureBodies?Wne(c):[void 0],[Y,te]=n.networkCaptureBodies?uOe(i):[void 0],J=Am(F,w,j),ee=Am(z,A,Y);return{startTimestamp:s,endTimestamp:o,url:f,method:g,statusCode:x,request:V?DI(J,V):J,response:te?DI(ee,te):ee}}function cOe(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return o&&(n[s.toLowerCase()]=o),n},{}):{}}function uOe(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return dOe(e.response,e.responseType)}catch(n){t.push(n)}return jr&&Qr.warn("Failed to get xhr response body",...t),[void 0]}function dOe(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return jr&&Qr.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return jr&&Qr.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function hOe(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return pP(n)}catch{return}}function fOe(e){const t=mr();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:c}=e.getOptions(),i={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:c};t&&t.on("beforeAddBreadcrumb",(f,g)=>pOe(i,f,g))}catch{}}function pOe(e,t,n){if(t.data)try{mOe(t)&&_Oe(n)&&(aOe(t,n),oOe(t,n,e)),gOe(t)&&yOe(n)&&(ZPe(t,n),XPe(t,n,e))}catch(r){jr&&Qr.exception(r,"Error when enriching network breadcrumb")}}function mOe(e){return e.category==="xhr"}function gOe(e){return e.category==="fetch"}function _Oe(e){return e&&e.xhr}function yOe(e){return e&&e.response}function vOe(e){const t=mr();Hte(q3e(e)),lP(HPe(e)),LPe(e),fOe(e);const n=jPe(e);Wee(n),t&&(t.on("beforeSendEvent",RPe(e)),t.on("afterSendEvent",PPe(e)),t.on("createDsc",r=>{const s=e.getSessionId();s&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=s)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",(r,s)=>{const o=e.getSessionId();s&&s.includeReplay&&e.isEnabled()&&o&&r.contexts&&r.contexts.feedback&&(r.contexts.feedback.replay_id=o)}))}async function bOe(e){try{return Promise.all(fP(e,[xOe(As.performance.memory)]))}catch{return[]}}function xOe(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function wOe(e,t,n){let r,s,o;const c=n&&n.maxWait?Math.max(n.maxWait,t):0;function i(){return f(),r=e(),r}function f(){s!==void 0&&clearTimeout(s),o!==void 0&&clearTimeout(o),s=o=void 0}function g(){return s!==void 0||o!==void 0?i():r}function x(){return s&&clearTimeout(s),s=K0(i,t),c&&o===void 0&&(o=K0(i,c)),r}return x.cancel=f,x.flush=g,x}const i_=Fr.navigator;function SOe(){return/iPhone|iPad|iPod/i.test(i_&&i_.userAgent||"")||/Macintosh/i.test(i_&&i_.userAgent||"")&&i_&&i_.maxTouchPoints&&i_.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function EOe(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){jr&&Qr.warn("Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&U3e(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!pF(e,n,s))return!0;if(!s)return!1;const o=e.session;if(MOe(e,s),e.recordingMode==="buffer"&&o&&e.eventBuffer){const c=e.eventBuffer.getEarliestTimestamp();c&&(jr&&Qr.info(`Updating session start time to earliest event in buffer to ${new Date(c)}`),o.started=c,e.getOptions().stickySession&&fF(o))}return o&&o.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function TOe(e){const t=e.getOptions();return{type:xi.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function MOe(e,t){!t||!e.session||e.session.segmentId!==0||pF(e,TOe(e),!1)}function AOe(e,t,n,r){return Cf(Dee(e,NN(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function COe({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const o=new TextEncoder().encode(r);n=new Uint8Array(o.length+e.length),n.set(o),n.set(e,o.length)}return n}async function IOe({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,o={event_id:n,integrations:s};e.emit("preprocessEvent",r,o);const c=await zee(e.getOptions(),r,o,t,e,$o());if(!c)return null;c.platform=c.platform||"javascript";const i=e.getSdkMetadata(),{name:f,version:g}=i&&i.sdk||{};return c.sdk={...c.sdk,name:f||"sentry.javascript.unknown",version:g||"0.0.0"},c}async function POe({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:o}){const c=COe({recordingData:e,headers:{segment_id:n}}),{urls:i,errorIds:f,traceIds:g,initialTimestamp:x}=r,w=mr(),A=hi(),C=w&&w.getTransport(),F=w&&w.getDsn();if(!w||!C||!F||!o.sampled)return df({});const z={type:lIe,replay_start_timestamp:x/1e3,timestamp:s/1e3,error_ids:f,trace_ids:g,urls:i,replay_id:t,segment_id:n,replay_type:o.sampled},j=await IOe({scope:A,client:w,replayId:t,event:z});if(!j)return w.recordDroppedEvent("event_processor","replay",z),jr&&Qr.info("An event processor returned `null`, will not send event."),df({});delete j.sdkProcessingMetadata;const V=AOe(j,c,F,w.getOptions().tunnel);let Y;try{Y=await C.send(V)}catch(J){const ee=new Error(rF);try{ee.cause=J}catch{}throw ee}if(typeof Y.statusCode=="number"&&(Y.statusCode<200||Y.statusCode>=300))throw new Zne(Y.statusCode);const te=tte({},Y);if(ete(te,"replay"))throw new gF(te);return Y}class Zne extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class gF extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function Kne(e,t={count:0,interval:pIe}){const{recordingData:n,onError:r}=e;if(n.length)try{return await POe(e),!0}catch(s){if(s instanceof Zne||s instanceof gF)throw s;if(jN("Replays",{_retryCount:t.count}),r&&r(s),t.count>=mIe){const o=new Error(`${rF} - max retries exceeded`);try{o.cause=s}catch{}throw o}return t.interval*=++t.count,new Promise((o,c)=>{K0(async()=>{try{await Kne(e,t),o(!0)}catch(i){c(i)}},t.interval)})}}const Jne="__THROTTLED",OOe="__SKIPPED";function DOe(e,t,n){const r=new Map,s=i=>{const f=i-n;r.forEach((g,x)=>{x<f&&r.delete(x)})},o=()=>[...r.values()].reduce((i,f)=>i+f,0);let c=!1;return(...i)=>{const f=Math.floor(Date.now()/1e3);if(s(f),o()>=t){const x=c;return c=!0,x?OOe:Jne}c=!1;const g=r.get(f)||0;return r.set(f,g+1),e(...i)}}class Qp{constructor({options:t,recordingOptions:n}){Qp.prototype.__init.call(this),Qp.prototype.__init2.call(this),Qp.prototype.__init3.call(this),Qp.prototype.__init4.call(this),Qp.prototype.__init5.call(this),Qp.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:cIe,sessionIdleExpire:uIe},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=wOe(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=DOe((c,i)=>APe(this,c,i),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),o=r?{threshold:Math.min(gIe,r),timeout:r,scrollTimeout:_Ie,ignoreSelector:s?s.join(","):""}:void 0;if(o&&(this.clickDetector=new B3e(this,o)),jr){const c=t._experiments;Qr.setConfig({captureExceptions:!!c.captureExceptions,traceInternals:!!c.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){jr&&Qr.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,s=n<=0&&r<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(t),!this.session){jr&&Qr.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",jr&&Qr.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){jr&&Qr.info("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){jr&&Qr.info("Buffering is in progress, call `flush()` to save the replay");return}jr&&Qr.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=aR({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled){jr&&Qr.info("Buffering is in progress, call `flush()` to save the replay");return}jr&&Qr.infoTick("Starting replay in buffer mode");const t=aR({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=Jh({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:fIe}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:EOe(this),...SOe(),onMutation:this._onMutationHandler,...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{jr&&Qr.info(`Stopping Replay${n?` triggered by ${n}`:""}`),jne(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,wPe(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),jr&&Qr.info("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),jr&&Qr.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();jr&&Qr.info("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&UL(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${As.location.pathname}${As.location.hash}${As.location.search}`,n=`${As.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===Jne){const s=zd({category:"replay.throttled"});this.addUpdate(()=>!pF(this,{type:D3e,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||qs(),n=t&&go(t),s=(n&&pi(n).data||{})[Sl];if(!(!n||!s||!["route","custom"].includes(s)))return pi(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=vPe({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=aR({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return zne(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{As.document.addEventListener("visibilitychange",this._handleVisibilityChange),As.addEventListener("blur",this._handleWindowBlur),As.addEventListener("focus",this._handleWindowFocus),As.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(vOe(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=hPe(this)}_removeListeners(){try{As.document.removeEventListener("visibilitychange",this._handleVisibilityChange),As.removeEventListener("blur",this._handleWindowBlur),As.removeEventListener("focus",this._handleWindowFocus),As.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}__init(){this._handleVisibilityChange=()=>{As.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=zd({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=zd({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{J3e(this,t)}}_doChangeToBackgroundTasks(t){!this.session||Fne(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){jr&&Qr.info("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:xi.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=nPe(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(fP(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){jr&&Qr.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await bOe(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Kne({replayId:t,recordingData:o,segmentId:s,eventContext:r,session:this.session,timestamp:n,onError:c=>this.handleException(c)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});const r=mr();if(r){const s=n instanceof gF?"ratelimit_backoff":"send_error";r.recordDroppedEvent(s,"replay")}}}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){jr&&Qr.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const o=s<this._options.minReplayDuration,c=s>this._options.maxReplayDuration+5e3;if(o||c){jr&&Qr.info(`Session duration (${Math.floor(s/1e3)}s) is too ${o?"short":"long"}, not sending replay.`),o&&this._debouncedFlush();return}const i=this.eventBuffer;i&&this.session.segmentId===0&&!i.hasCheckout&&jr&&Qr.info("Flushing initial segment without checkout.");const f=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(g){this.handleException(g)}finally{this._flushLock=void 0,f&&this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&fF(this.session)}__init6(){this._onMutationHandler=t=>{const n=t.length,r=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,o=r&&n>r;if(n>s||o){const c=zd({category:"replay.mutations",data:{count:n,limit:o}});this._createCustomBreadcrumb(c)}return o?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function nw(e,t){return[...e,...t].join(",")}function ROe({mask:e,unmask:t,block:n,unblock:r,ignore:s}){const o=["base","iframe[srcdoc]:not([src])"],c=nw(e,[".sentry-mask","[data-sentry-mask]"]),i=nw(t,[]);return{maskTextSelector:c,unmaskTextSelector:i,blockSelector:nw(n,[".sentry-block","[data-sentry-block]",...o]),unblockSelector:nw(r,[]),ignoreSelector:nw(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function kOe({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:o}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?o:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o}const eH='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',LOe=["content-length","content-type","accept"];let tH=!1;const NOe=(e=>new mP(e));class mP{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=dIe,flushMaxDelay:n=hIe,minReplayDuration:r=yIe,maxReplayDuration:s=R9,stickySession:o=!0,useCompression:c=!0,workerUrl:i,_experiments:f={},maskAllText:g=!0,maskAllInputs:x=!0,blockAllMedia:w=!0,mutationBreadcrumbLimit:A=750,mutationLimit:C=1e4,slowClickTimeout:F=7e3,slowClickIgnoreSelectors:z=[],networkDetailAllowUrls:j=[],networkDetailDenyUrls:V=[],networkCaptureBodies:Y=!0,networkRequestHeaders:te=[],networkResponseHeaders:J=[],mask:ee=[],maskAttributes:le=["title","placeholder"],unmask:oe=[],block:ve=[],unblock:se=[],ignore:ie=[],maskFn:pe,beforeAddRecordingEvent:be,beforeErrorSampling:Se,onError:Ce}={}){this.name=mP.id;const Ee=ROe({mask:ee,unmask:oe,block:ve,unblock:se,ignore:ie});if(this._recordingOptions={maskAllInputs:x,maskAllText:g,maskInputOptions:{password:!0},maskTextFn:pe,maskInputFn:pe,maskAttributeFn:(xe,ke,He)=>kOe({maskAttributes:le,maskAllText:g,privacyOptions:Ee,key:xe,value:ke,el:He}),...Ee,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:xe=>{try{xe.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,vIe),maxReplayDuration:Math.min(s,R9),stickySession:o,useCompression:c,workerUrl:i,blockAllMedia:w,maskAllInputs:x,maskAllText:g,mutationBreadcrumbLimit:A,mutationLimit:C,slowClickTimeout:F,slowClickIgnoreSelectors:z,networkDetailAllowUrls:j,networkDetailDenyUrls:V,networkCaptureBodies:Y,networkRequestHeaders:nH(te),networkResponseHeaders:nH(J),beforeAddRecordingEvent:be,beforeErrorSampling:Se,onError:Ce,_experiments:f},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${eH}`:eH),this._isInitialized&&IL())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return tH}set _isInitialized(t){tH=t}afterAllSetup(t){!IL()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}getRecordingMode(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=FOe(this._initialOptions,t);this._replay=new Qp({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}mP.__initStatic();function FOe(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Eo(e)},s=gI(n.replaysSessionSampleRate),o=gI(n.replaysOnErrorSampleRate);return s==null&&o==null&&su(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(r.sessionSampleRate=s),o!=null&&(r.errorSampleRate=o),r}function nH(e){return[...LOe,...e.map(t=>t.toLowerCase())]}function zOe(){const e=mr();return e&&e.getIntegrationByName("Replay")}var rH;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(rH||(rH={}));function BOe(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function GL(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:GL(e.parentNode,t,n,r+1)}function iH(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(BOe(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}const n0=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let sH={map:{},getId(){return console.error(n0),-1},getNode(){return console.error(n0),null},removeNodeFromMap(){console.error(n0)},has(){return console.error(n0),!1},reset(){console.error(n0)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(sH=new Proxy(sH,{get(e,t,n){return t==="map"&&console.error(n0),Reflect.get(e,t,n)}}));function _F(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(c){ere(()=>{n.set.call(this,c)},0),o&&o.set&&o.set.call(this,c)}}),()=>_F(e,t,o||{},!0)}function yF(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}/[1-9][0-9]{12}/.test(Date.now().toString());function $Oe(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function gP(e,t,n,r,s){if(!e)return!1;const o=$Oe(e);if(!o)return!1;const c=iH(t,n),i=GL(o,c);let f=-1;return i<0?!1:(r&&(f=GL(o,iH(null,r))),i>-1&&f<0?!0:i<f)}const oH={};function Qne(e){const t=oH[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return oH[e]=r.bind(window)}function s_(...e){return Qne("requestAnimationFrame")(...e)}function ere(...e){return Qne("setTimeout")(...e)}var n1=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(n1||{});let iC;function VOe(e){iC=e}const lR=e=>iC?((...n)=>{try{return e(...n)}catch(r){if(iC&&iC(r)===!0)return()=>{};throw r}}):e;var f0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jOe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var BM=0;BM<f0.length;BM++)jOe[f0.charCodeAt(BM)]=BM;var UOe=function(e){var t=new Uint8Array(e),n,r=t.length,s="";for(n=0;n<r;n+=3)s+=f0[t[n]>>2],s+=f0[(t[n]&3)<<4|t[n+1]>>4],s+=f0[(t[n+1]&15)<<2|t[n+2]>>6],s+=f0[t[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const aH=new Map;function HOe(e,t){let n=aH.get(e);return n||(n=new Map,aH.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const tre=(e,t,n)=>{if(!e||!(rre(e,t)||typeof e=="object"))return;const r=e.constructor.name,s=HOe(n,r);let o=s.indexOf(e);return o===-1&&(o=s.length,s.push(e)),o};function sC(e,t,n){if(e instanceof Array)return e.map(r=>sC(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,s=UOe(e);return{rr_type:r,base64:s}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[sC(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:s}=e;return{rr_type:r,src:s}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",s=e.toDataURL();return{rr_type:r,src:s}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[sC(e.data,t,n),e.width,e.height]};if(rre(e,t)||typeof e=="object"){const r=e.constructor.name,s=tre(e,t,n);return{rr_type:r,index:s}}}}return e}const nre=(e,t,n)=>e.map(r=>sC(r,t,n)),rre=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof t[s]=="function").find(s=>e instanceof t[s]);function WOe(e,t,n,r,s){const o=[],c=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const i of c)try{if(typeof t.CanvasRenderingContext2D.prototype[i]!="function")continue;const f=yF(t.CanvasRenderingContext2D.prototype,i,function(g){return function(...x){return gP(this.canvas,n,r,s,!0)||ere(()=>{const w=nre(x,t,this);e(this.canvas,{type:n1["2D"],property:i,args:w})},0),g.apply(this,x)}});o.push(f)}catch{const g=_F(t.CanvasRenderingContext2D.prototype,i,{set(x){e(this.canvas,{type:n1["2D"],property:i,args:[x],setter:!0})}});o.push(g)}return()=>{o.forEach(i=>i())}}function GOe(e){return e==="experimental-webgl"?"webgl":e}function lH(e,t,n,r,s){const o=[];try{const c=yF(e.HTMLCanvasElement.prototype,"getContext",function(i){return function(f,...g){if(!gP(this,t,n,r,!0)){const x=GOe(f);if("__context"in this||(this.__context=x),s&&["webgl","webgl2"].includes(x))if(g[0]&&typeof g[0]=="object"){const w=g[0];w.preserveDrawingBuffer||(w.preserveDrawingBuffer=!0)}else g.splice(0,1,{preserveDrawingBuffer:!0})}return i.apply(this,[f,...g])}});o.push(c)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach(c=>c())}}function cH(e,t,n,r,s,o,c,i){const f=[],g=Object.getOwnPropertyNames(e);for(const x of g)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(x))try{if(typeof e[x]!="function")continue;const w=yF(e,x,function(A){return function(...C){const F=A.apply(this,C);if(tre(F,i,this),"tagName"in this.canvas&&!gP(this.canvas,r,s,o,!0)){const z=nre(C,i,this),j={type:t,property:x,args:z};n(this.canvas,j)}return F}});f.push(w)}catch{const A=_F(e,x,{set(C){n(this.canvas,{type:t,property:x,args:[C],setter:!0})}});f.push(A)}return f}function YOe(e,t,n,r,s,o){const c=[];return c.push(...cH(t.WebGLRenderingContext.prototype,n1.WebGL,e,n,r,s,o,t)),typeof t.WebGL2RenderingContext<"u"&&c.push(...cH(t.WebGL2RenderingContext.prototype,n1.WebGL2,e,n,r,s,o,t)),()=>{c.forEach(i=>i())}}var qOe='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function XOe(){const e=new Blob([qOe]);return URL.createObjectURL(e)}class ZOe{reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,$_([this,"access",t=>t.worker,"optionalAccess",t=>t.terminate,"call",t=>t()]),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.processMutation=(w,A)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(w)||this.pendingCanvasMutations.set(w,[]),this.pendingCanvasMutations.get(w).push(A)};const{sampling:n="all",win:r,blockClass:s,blockSelector:o,unblockSelector:c,maxCanvasSize:i,recordCanvas:f,dataURLOptions:g,errorHandler:x}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,x&&VOe(x),(f&&typeof n=="number"||t.enableManualSnapshot)&&(this.worker=this.initFPSWorker()),this.addWindow(r),!t.enableManualSnapshot&&lR(()=>{f&&n==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),f&&typeof n=="number"&&this.initCanvasFPSObserver(n,s,o,c,i,{dataURLOptions:g})})()}addWindow(t){const{sampling:n="all",blockClass:r,blockSelector:s,unblockSelector:o,recordCanvas:c,enableManualSnapshot:i}=this.options;if(!this.windowsSet.has(t)){if(i){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}lR(()=>{if(c&&n==="all"&&this.initCanvasMutationObserver(t,r,s,o),c&&typeof n=="number"){const f=lH(t,r,s,o,!0);this.restoreHandlers.push(()=>{f()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}initFPSWorker(){const t=new Worker(XOe());return t.onmessage=n=>{const r=n.data,{id:s}=r;if(this.snapshotInProgressMap.set(s,!1),!("base64"in r))return;const{base64:o,type:c,width:i,height:f}=r;this.mutationCb({id:s,type:n1["2D"],commands:[{property:"clearRect",args:[0,0,i,f]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:o}],type:c}]},0,0,i,f]}]})},t}initCanvasFPSObserver(t,n,r,s,o,c){const i=this.takeSnapshot(!1,t,n,r,s,o,c.dataURLOptions);this.restoreHandlers.push(()=>{cancelAnimationFrame(i)})}initCanvasMutationObserver(t,n,r,s){const o=lH(t,n,r,s,!1),c=WOe(this.processMutation.bind(this),t,n,r,s),i=YOe(this.processMutation.bind(this),t,n,r,s,this.mirror);this.restoreHandlers.push(()=>{o(),c(),i()})}snapshot(t){const{options:n}=this,r=this.takeSnapshot(!0,n.sampling==="all"?2:n.sampling||2,n.blockClass,n.blockSelector,n.unblockSelector,n.maxCanvasSize,n.dataURLOptions,t);this.restoreHandlers.push(()=>{cancelAnimationFrame(r)})}takeSnapshot(t,n,r,s,o,c,i,f){const g=1e3/n;let x=0,w;const A=F=>{if(F)return[F];const z=[],j=V=>{V.querySelectorAll("canvas").forEach(Y=>{gP(Y,r,s,o)||z.push(Y)})};for(const V of this.windows){const Y=V.deref();Y&&j(Y.document)}for(const V of this.shadowDoms){const Y=V.deref();Y&&j(Y)}return z},C=F=>{if(this.windows.length){if(x&&F-x<g){w=s_(C);return}x=F,A(f).forEach(z=>{if(!this.mirror.hasNode(z))return;const j=this.mirror.getId(z);if(!this.snapshotInProgressMap.get(j)&&!(!z.width||!z.height)){if(this.snapshotInProgressMap.set(j,!0),!t&&["webgl","webgl2"].includes(z.__context)){const V=z.getContext(z.__context);$_([V,"optionalAccess",Y=>Y.getContextAttributes,"call",Y=>Y(),"optionalAccess",Y=>Y.preserveDrawingBuffer])===!1&&V.clear(V.COLOR_BUFFER_BIT)}createImageBitmap(z).then(V=>{$_([this,"access",Y=>Y.worker,"optionalAccess",Y=>Y.postMessage,"call",Y=>Y({id:j,bitmap:V,width:z.width,height:z.height,dataURLOptions:i,maxCanvasSize:c},[V])])}).catch(V=>{lR(()=>{throw V})()})}}),t||(w=s_(C))}};return w=s_(C),w}startPendingCanvasMutationFlusher(){s_(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,s_(t)};s_(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),s_(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const s=r.map(c=>{const{type:i,...f}=c;return f}),{type:o}=r[0];this.mutationCb({id:n,type:o,commands:s}),this.pendingCanvasMutations.delete(t)}}const uH={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},KOe="ReplayCanvas",$M=1280,JOe=((e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,$M):$M,n?Math.min(n,$M):$M]};let s;const o=new Promise(c=>s=c);return{name:KOe,getOptions(){const{quality:c,enableManualSnapshot:i,maxCanvasSize:f}=r;return{enableManualSnapshot:i,recordCanvas:!0,getCanvasManager:g=>{const x=new ZOe({...g,enableManualSnapshot:i,maxCanvasSize:f,errorHandler:w=>{try{typeof w=="object"&&(w.__rrweb__=!0)}catch{}}});return s(x),x},...uH[c]||uH.medium}},async snapshot(c){(await o).snapshot(c)}}}),QOe=JOe,Bd=Fr,cs=Bd.document,Iw=Bd.navigator,ire="Report a Bug",e4e="Cancel",t4e="Send Bug Report",n4e="Confirm",r4e="Report a Bug",i4e="your.email@example.org",s4e="Email",o4e="What's the bug? What did you expect?",a4e="Description",l4e="Your Name",c4e="Name",u4e="Thank you for your report!",d4e="(required)",h4e="Add a screenshot",f4e="Remove screenshot",p4e="widget",m4e="api",g4e=5e3,sre=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=mr();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&hi().setTags(e.tags);const r=vte({source:m4e,url:AN(),...e},t);return new Promise((s,o)=>{const c=setTimeout(()=>o("Unable to determine if Feedback was correctly sent."),5e3),i=n.on("afterSendEvent",(f,g)=>{if(f.event_id===r)return clearTimeout(c),i(),g&&typeof g.statusCode=="number"&&g.statusCode>=200&&g.statusCode<300?s(r):g&&typeof g.statusCode=="number"&&g.statusCode===0?o("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):g&&typeof g.statusCode=="number"&&g.statusCode===403?o("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):o("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")})})},oC=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function _4e(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Iw.userAgent)||/Macintosh/i.test(Iw.userAgent)&&Iw.maxTouchPoints&&Iw.maxTouchPoints>1||!isSecureContext)}function VM(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen&&t.onFormOpen(),e.onFormOpen&&e.onFormOpen()},onFormClose:()=>{t.onFormClose&&t.onFormClose(),e.onFormClose&&e.onFormClose()},onSubmitSuccess:n=>{t.onSubmitSuccess&&t.onSubmitSuccess(n),e.onSubmitSuccess&&e.onSubmitSuccess(n)},onSubmitError:n=>{t.onSubmitError&&t.onSubmitError(n),e.onSubmitError&&e.onSubmitError(n)},onFormSubmitted:()=>{t.onFormSubmitted&&t.onFormSubmitted(),e.onFormSubmitted&&e.onFormSubmitted()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function y4e(e){const t=cs.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function wc(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const Gv=20,v4e="http://www.w3.org/2000/svg";function b4e(){const e=i=>Bd.document.createElementNS(v4e,i),t=wc(e("svg"),{width:`${Gv}`,height:`${Gv}`,viewBox:`0 0 ${Gv} ${Gv}`,fill:"var(--actor-color, var(--foreground))"}),n=wc(e("g"),{clipPath:"url(#clip0_57_80)"}),r=wc(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),o=wc(e("clipPath"),{id:"clip0_57_80"}),c=wc(e("rect"),{width:`${Gv}`,height:`${Gv}`,fill:"white"});return o.appendChild(c),s.appendChild(o),t.appendChild(s).appendChild(o).appendChild(c),t}function x4e({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const s=cs.createElement("button");if(s.type="button",s.className="widget__actor",s.ariaHidden="false",s.ariaLabel=t||e||ire,s.appendChild(b4e()),e){const c=cs.createElement("span");c.appendChild(cs.createTextNode(e)),s.appendChild(c)}const o=y4e(r);return{el:s,appendToDom(){n.appendChild(o),n.appendChild(s)},removeFromDom(){n.removeChild(s),n.removeChild(o)},show(){s.ariaHidden="false"},hide(){s.ariaHidden="true"}}}const ore="rgba(88, 74, 192, 1)",w4e={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:ore,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},dH={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:ore,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function hH(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function S4e({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const s=cs.createElement("style");return s.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${hH(e==="dark"?{...dH,...t}:{...w4e,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${hH({...dH,...t})}
  }
}`:""}
}
`,r&&s.setAttribute("nonce",r),s}const are=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:s="sentry-feedback",autoInject:o=!0,showBranding:c=!0,isEmailRequired:i=!1,isNameRequired:f=!1,showEmail:g=!0,showName:x=!0,enableScreenshot:w=!0,useSentryUser:A={email:"email",name:"username"},tags:C,styleNonce:F,scriptNonce:z,colorScheme:j="system",themeLight:V={},themeDark:Y={},addScreenshotButtonLabel:te=h4e,cancelButtonLabel:J=e4e,confirmButtonLabel:ee=n4e,emailLabel:le=s4e,emailPlaceholder:oe=i4e,formTitle:ve=r4e,isRequiredLabel:se=d4e,messageLabel:ie=a4e,messagePlaceholder:pe=o4e,nameLabel:be=c4e,namePlaceholder:Se=l4e,removeScreenshotButtonLabel:Ce=f4e,submitButtonLabel:Ee=t4e,successMessageText:xe=u4e,triggerLabel:ke=ire,triggerAriaLabel:He="",onFormOpen:Ke,onFormClose:Ge,onSubmitSuccess:$t,onSubmitError:Ft,onFormSubmitted:Lt}={})=>{const nn={id:s,autoInject:o,showBranding:c,isEmailRequired:i,isNameRequired:f,showEmail:g,showName:x,enableScreenshot:w,useSentryUser:A,tags:C,styleNonce:F,scriptNonce:z,colorScheme:j,themeDark:Y,themeLight:V,triggerLabel:ke,triggerAriaLabel:He,cancelButtonLabel:J,submitButtonLabel:Ee,confirmButtonLabel:ee,formTitle:ve,emailLabel:le,emailPlaceholder:oe,messageLabel:ie,messagePlaceholder:pe,nameLabel:be,namePlaceholder:Se,successMessageText:xe,isRequiredLabel:se,addScreenshotButtonLabel:te,removeScreenshotButtonLabel:Ce,onFormClose:Ge,onFormOpen:Ke,onSubmitError:Ft,onSubmitSuccess:$t,onFormSubmitted:Lt};let mn=null,Xt=[];const mt=bn=>{if(!mn){const On=cs.createElement("div");On.id=String(bn.id),cs.body.appendChild(On),mn=On.attachShadow({mode:"open"}),mn.appendChild(S4e(bn))}return mn},Jt=async bn=>{const On=bn.enableScreenshot&&_4e();let je,ge;try{je=(t?t():await e("feedbackModalIntegration",z))(),EL(je)}catch{throw oC&&En.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const It=On?n?n():await e("feedbackScreenshotIntegration",z):void 0;It&&(ge=It(),EL(ge))}catch{oC&&En.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const nt=je.createDialog({options:{...bn,onFormClose:()=>{nt&&nt.close(),bn.onFormClose&&bn.onFormClose()},onFormSubmitted:()=>{nt&&nt.close(),bn.onFormSubmitted&&bn.onFormSubmitted()}},screenshotIntegration:ge,sendFeedback:sre,shadow:mt(bn)});return nt},Kt=(bn,On={})=>{const je=VM(nn,On),ge=typeof bn=="string"?cs.querySelector(bn):typeof bn.addEventListener=="function"?bn:null;if(!ge)throw oC&&En.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let nt=null;const It=async()=>{nt||(nt=await Jt({...je,onFormSubmitted:()=>{nt&&nt.removeFromDom(),je.onFormSubmitted&&je.onFormSubmitted()}})),nt.appendToDom(),nt.open()};ge.addEventListener("click",It);const ht=()=>{Xt=Xt.filter(ut=>ut!==ht),nt&&nt.removeFromDom(),nt=null,ge.removeEventListener("click",It)};return Xt.push(ht),ht},_e=(bn={})=>{const On=VM(nn,bn),je=mt(On),ge=x4e({triggerLabel:On.triggerLabel,triggerAriaLabel:On.triggerAriaLabel,shadow:je,styleNonce:F});return Kt(ge.el,{...On,onFormOpen(){ge.hide()},onFormClose(){ge.show()},onFormSubmitted(){ge.show()}}),ge};return{name:"Feedback",setupOnce(){!IL()||!nn.autoInject||(cs.readyState==="loading"?cs.addEventListener("DOMContentLoaded",()=>_e().appendToDom()):_e().appendToDom())},attachTo:Kt,createWidget(bn={}){const On=_e(VM(nn,bn));return On.appendToDom(),On},async createForm(bn={}){return Jt(VM(nn,bn))},remove(){mn&&(mn.parentElement&&mn.parentElement.remove(),mn=null),Xt.forEach(bn=>bn()),Xt=[]}}});function E4e(){const e=mr();return e&&e.getIntegrationByName("Feedback")}var _P,ys,lre,y_,fH,cre,YL,rS={},vF=[],T4e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,bF=Array.isArray;function hm(e,t){for(var n in t)e[n]=t[n];return e}function ure(e){var t=e.parentNode;t&&t.removeChild(e)}function wi(e,t,n){var r,s,o,c={};for(o in t)o=="key"?r=t[o]:o=="ref"?s=t[o]:c[o]=t[o];if(arguments.length>2&&(c.children=arguments.length>3?_P.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)c[o]===void 0&&(c[o]=e.defaultProps[o]);return aC(e,c,r,s,null)}function aC(e,t,n,r,s){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++lre,__i:-1,__u:0};return s==null&&ys.vnode!=null&&ys.vnode(o),o}function XS(e){return e.children}function lC(e,t){this.props=e,this.context=t}function r1(e,t){if(t==null)return e.__?r1(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?r1(e):null}function M4e(e,t,n){var r,s=e.__v,o=s.__e,c=e.__P;if(c)return(r=hm({},s)).__v=s.__v+1,ys.vnode&&ys.vnode(r),xF(c,r,s,e.__n,c.ownerSVGElement!==void 0,32&s.__u?[o]:null,t,o??r1(s),!!(32&s.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=o&&dre(r),r}function dre(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return dre(e)}}function pH(e){(!e.__d&&(e.__d=!0)&&y_.push(e)&&!kI.__r++||fH!==ys.debounceRendering)&&((fH=ys.debounceRendering)||cre)(kI)}function kI(){var e,t,n,r=[],s=[];for(y_.sort(YL);e=y_.shift();)e.__d&&(n=y_.length,t=M4e(e,r,s)||t,n===0||y_.length>n?(qL(r,t,s),s.length=r.length=0,t=void 0,y_.sort(YL)):t&&ys.__c&&ys.__c(t,vF));t&&qL(r,t,s),kI.__r=0}function hre(e,t,n,r,s,o,c,i,f,g,x){var w,A,C,F,z,j=r&&r.__k||vF,V=t.length;for(n.__d=f,A4e(n,t,j),f=n.__d,w=0;w<V;w++)(C=n.__k[w])!=null&&typeof C!="boolean"&&typeof C!="function"&&(A=C.__i===-1?rS:j[C.__i]||rS,C.__i=w,xF(e,C,A,s,o,c,i,f,g,x),F=C.__e,C.ref&&A.ref!=C.ref&&(A.ref&&wF(A.ref,null,C),x.push(C.ref,C.__c||F,C)),z==null&&F!=null&&(z=F),65536&C.__u||A.__k===C.__k?f=fre(C,f,e):typeof C.type=="function"&&C.__d!==void 0?f=C.__d:F&&(f=F.nextSibling),C.__d=void 0,C.__u&=-196609);n.__d=f,n.__e=z}function A4e(e,t,n){var r,s,o,c,i,f=t.length,g=n.length,x=g,w=0;for(e.__k=[],r=0;r<f;r++)(s=e.__k[r]=(s=t[r])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?aC(null,s,null,null,s):bF(s)?aC(XS,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?aC(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=e,s.__b=e.__b+1,i=C4e(s,n,c=r+w,x),s.__i=i,o=null,i!==-1&&(x--,(o=n[i])&&(o.__u|=131072)),o==null||o.__v===null?(i==-1&&w--,typeof s.type!="function"&&(s.__u|=65536)):i!==c&&(i===c+1?w++:i>c?x>f-c?w+=i-c:w--:w=i<c&&i==c-1?i-c:0,i!==r+w&&(s.__u|=65536))):(o=n[r])&&o.key==null&&o.__e&&(o.__e==e.__d&&(e.__d=r1(o)),XL(o,o,!1),n[r]=null,x--);if(x)for(r=0;r<g;r++)(o=n[r])!=null&&(131072&o.__u)==0&&(o.__e==e.__d&&(e.__d=r1(o)),XL(o,o))}function fre(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=fre(r[s],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function C4e(e,t,n,r){var s=e.key,o=e.type,c=n-1,i=n+1,f=t[n];if(f===null||f&&s==f.key&&o===f.type)return n;if(r>(f!=null&&(131072&f.__u)==0?1:0))for(;c>=0||i<t.length;){if(c>=0){if((f=t[c])&&(131072&f.__u)==0&&s==f.key&&o===f.type)return c;c--}if(i<t.length){if((f=t[i])&&(131072&f.__u)==0&&s==f.key&&o===f.type)return i;i++}}return-1}function mH(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||T4e.test(t)?n:n+"px"}function jM(e,t,n,r,s){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||mH(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||mH(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,o?_H:gH,o)):e.removeEventListener(t,o?_H:gH,o);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function gH(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(ys.event?ys.event(e):e)}}function _H(e){if(this.l)return this.l[e.type+!0](ys.event?ys.event(e):e)}function xF(e,t,n,r,s,o,c,i,f,g){var x,w,A,C,F,z,j,V,Y,te,J,ee,le,oe,ve,se=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(f=!!(32&n.__u),o=[i=t.__e=n.__e]),(x=ys.__b)&&x(t);e:if(typeof se=="function")try{if(V=t.props,Y=(x=se.contextType)&&r[x.__c],te=x?Y?Y.props.value:x.__:r,n.__c?j=(w=t.__c=n.__c).__=w.__E:("prototype"in se&&se.prototype.render?t.__c=w=new se(V,te):(t.__c=w=new lC(V,te),w.constructor=se,w.render=P4e),Y&&Y.sub(w),w.props=V,w.state||(w.state={}),w.context=te,w.__n=r,A=w.__d=!0,w.__h=[],w._sb=[]),w.__s==null&&(w.__s=w.state),se.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=hm({},w.__s)),hm(w.__s,se.getDerivedStateFromProps(V,w.__s))),C=w.props,F=w.state,w.__v=t,A)se.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(se.getDerivedStateFromProps==null&&V!==C&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(V,te),!w.__e&&(w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(V,w.__s,te)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(w.props=V,w.state=w.__s,w.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(ie){ie&&(ie.__=t)}),J=0;J<w._sb.length;J++)w.__h.push(w._sb[J]);w._sb=[],w.__h.length&&c.push(w);break e}w.componentWillUpdate!=null&&w.componentWillUpdate(V,w.__s,te),w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(C,F,z)})}if(w.context=te,w.props=V,w.__P=e,w.__e=!1,ee=ys.__r,le=0,"prototype"in se&&se.prototype.render){for(w.state=w.__s,w.__d=!1,ee&&ee(t),x=w.render(w.props,w.state,w.context),oe=0;oe<w._sb.length;oe++)w.__h.push(w._sb[oe]);w._sb=[]}else do w.__d=!1,ee&&ee(t),x=w.render(w.props,w.state,w.context),w.state=w.__s;while(w.__d&&++le<25);w.state=w.__s,w.getChildContext!=null&&(r=hm(hm({},r),w.getChildContext())),A||w.getSnapshotBeforeUpdate==null||(z=w.getSnapshotBeforeUpdate(C,F)),hre(e,bF(ve=x!=null&&x.type===XS&&x.key==null?x.props.children:x)?ve:[ve],t,n,r,s,o,c,i,f,g),w.base=t.__e,t.__u&=-161,w.__h.length&&c.push(w),j&&(w.__E=w.__=null)}catch(ie){t.__v=null,f||o!=null?(t.__e=i,t.__u|=f?160:32,o[o.indexOf(i)]=null):(t.__e=n.__e,t.__k=n.__k),ys.__e(ie,t,n)}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=I4e(n.__e,t,n,r,s,o,c,f,g);(x=ys.diffed)&&x(t)}function qL(e,t,n){for(var r=0;r<n.length;r++)wF(n[r],n[++r],n[++r]);ys.__c&&ys.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(o){o.call(s)})}catch(o){ys.__e(o,s.__v)}})}function I4e(e,t,n,r,s,o,c,i,f){var g,x,w,A,C,F,z,j=n.props,V=t.props,Y=t.type;if(Y==="svg"&&(s=!0),o!=null){for(g=0;g<o.length;g++)if((C=o[g])&&"setAttribute"in C==!!Y&&(Y?C.localName===Y:C.nodeType===3)){e=C,o[g]=null;break}}if(e==null){if(Y===null)return document.createTextNode(V);e=s?document.createElementNS("http://www.w3.org/2000/svg",Y):document.createElement(Y,V.is&&V),o=null,i=!1}if(Y===null)j===V||i&&e.data===V||(e.data=V);else{if(o=o&&_P.call(e.childNodes),j=n.props||rS,!i&&o!=null)for(j={},g=0;g<e.attributes.length;g++)j[(C=e.attributes[g]).name]=C.value;for(g in j)C=j[g],g=="children"||(g=="dangerouslySetInnerHTML"?w=C:g==="key"||g in V||jM(e,g,null,C,s));for(g in V)C=V[g],g=="children"?A=C:g=="dangerouslySetInnerHTML"?x=C:g=="value"?F=C:g=="checked"?z=C:g==="key"||i&&typeof C!="function"||j[g]===C||jM(e,g,C,j[g],s);if(x)i||w&&(x.__html===w.__html||x.__html===e.innerHTML)||(e.innerHTML=x.__html),t.__k=[];else if(w&&(e.innerHTML=""),hre(e,bF(A)?A:[A],t,n,r,s&&Y!=="foreignObject",o,c,o?o[0]:n.__k&&r1(n,0),i,f),o!=null)for(g=o.length;g--;)o[g]!=null&&ure(o[g]);i||(g="value",F!==void 0&&(F!==e[g]||Y==="progress"&&!F||Y==="option"&&F!==j[g])&&jM(e,g,F,j[g],!1),g="checked",z!==void 0&&z!==e[g]&&jM(e,g,z,j[g],!1))}return e}function wF(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){ys.__e(r,n)}}function XL(e,t,n){var r,s;if(ys.unmount&&ys.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||wF(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){ys.__e(o,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&XL(r[s],t,n||typeof e.type!="function");n||e.__e==null||ure(e.__e),e.__=e.__e=e.__d=void 0}function P4e(e,t,n){return this.constructor(e,n)}function O4e(e,t,n){var r,s,o,c;ys.__&&ys.__(e,t),s=(r=!1)?null:t.__k,o=[],c=[],xF(t,e=t.__k=wi(XS,null,[e]),s||rS,rS,t.ownerSVGElement!==void 0,s?null:t.firstChild?_P.call(t.childNodes):null,o,s?s.__e:t.firstChild,r,c),e.__d=void 0,qL(o,e,c)}_P=vF.slice,ys={__e:function(e,t,n,r){for(var s,o,c;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(e)),c=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),c=s.__d),c)return s.__E=s}catch(i){e=i}throw e}},lre=0,lC.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=hm({},this.state),typeof e=="function"&&(e=e(hm({},n),this.props)),e&&hm(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),pH(this))},lC.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),pH(this))},lC.prototype.render=XS,y_=[],cre=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,YL=function(e,t){return e.__v.__b-t.__v.__b},kI.__r=0;var gf,gs,cR,yH,i1=0,pre=[],cC=[],Qs=ys,vH=Qs.__b,bH=Qs.__r,xH=Qs.diffed,wH=Qs.__c,SH=Qs.unmount,EH=Qs.__;function Ey(e,t){Qs.__h&&Qs.__h(gs,e,i1||t),i1=0;var n=gs.__H||(gs.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:cC}),n.__[e]}function M0(e){return i1=1,mre(_re,e)}function mre(e,t,n){var r=Ey(gf++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):_re(void 0,t),function(i){var f=r.__N?r.__N[0]:r.__[0],g=r.t(f,i);f!==g&&(r.__N=[g,r.__[1]],r.__c.setState({}))}],r.__c=gs,!gs.u)){var s=function(i,f,g){if(!r.__c.__H)return!0;var x=r.__c.__H.__.filter(function(A){return!!A.__c});if(x.every(function(A){return!A.__N}))return!o||o.call(this,i,f,g);var w=!1;return x.forEach(function(A){if(A.__N){var C=A.__[0];A.__=A.__N,A.__N=void 0,C!==A.__[0]&&(w=!0)}}),!(!w&&r.__c.props===i)&&(!o||o.call(this,i,f,g))};gs.u=!0;var o=gs.shouldComponentUpdate,c=gs.componentWillUpdate;gs.componentWillUpdate=function(i,f,g){if(this.__e){var x=o;o=void 0,s(i,f,g),o=x}c&&c.call(this,i,f,g)},gs.shouldComponentUpdate=s}return r.__N||r.__}function D4e(e,t){var n=Ey(gf++,3);!Qs.__s&&SF(n.__H,t)&&(n.__=e,n.i=t,gs.__H.__h.push(n))}function gre(e,t){var n=Ey(gf++,4);!Qs.__s&&SF(n.__H,t)&&(n.__=e,n.i=t,gs.__h.push(n))}function R4e(e){return i1=5,ZS(function(){return{current:e}},[])}function k4e(e,t,n){i1=6,gre(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function ZS(e,t){var n=Ey(gf++,7);return SF(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function A0(e,t){return i1=8,ZS(function(){return e},t)}function L4e(e){var t=gs.context[e.__c],n=Ey(gf++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(gs)),t.props.value):e.__}function N4e(e,t){Qs.useDebugValue&&Qs.useDebugValue(t?t(e):e)}function F4e(e){var t=Ey(gf++,10),n=M0();return t.__=e,gs.componentDidCatch||(gs.componentDidCatch=function(r,s){t.__&&t.__(r,s),n[1](r)}),[n[0],function(){n[1](void 0)}]}function z4e(){var e=Ey(gf++,11);if(!e.__){for(var t=gs.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function B4e(){for(var e;e=pre.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(uC),e.__H.__h.forEach(ZL),e.__H.__h=[]}catch(t){e.__H.__h=[],Qs.__e(t,e.__v)}}Qs.__b=function(e){gs=null,vH&&vH(e)},Qs.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),EH&&EH(e,t)},Qs.__r=function(e){bH&&bH(e),gf=0;var t=(gs=e.__c).__H;t&&(cR===gs?(t.__h=[],gs.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=cC,n.__N=n.i=void 0})):(t.__h.forEach(uC),t.__h.forEach(ZL),t.__h=[],gf=0)),cR=gs},Qs.diffed=function(e){xH&&xH(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(pre.push(t)!==1&&yH===Qs.requestAnimationFrame||((yH=Qs.requestAnimationFrame)||$4e)(B4e)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==cC&&(n.__=n.__V),n.i=void 0,n.__V=cC})),cR=gs=null},Qs.__c=function(e,t){t.some(function(n){try{n.__h.forEach(uC),n.__h=n.__h.filter(function(r){return!r.__||ZL(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],Qs.__e(r,n.__v)}}),wH&&wH(e,t)},Qs.unmount=function(e){SH&&SH(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{uC(r)}catch(s){t=s}}),n.__H=void 0,t&&Qs.__e(t,n.__v))};var TH=typeof requestAnimationFrame=="function";function $4e(e){var t,n=function(){clearTimeout(r),TH&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);TH&&(t=requestAnimationFrame(n))}function uC(e){var t=gs,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),gs=t}function ZL(e){var t=gs;e.__c=e.__(),gs=t}function SF(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function _re(e,t){return typeof t=="function"?t(e):t}const V4e={__proto__:null,useCallback:A0,useContext:L4e,useDebugValue:N4e,useEffect:D4e,useErrorBoundary:F4e,useId:z4e,useImperativeHandle:k4e,useLayoutEffect:gre,useMemo:ZS,useReducer:mre,useRef:R4e,useState:M0},j4e="http://www.w3.org/2000/svg";function U4e(){const e=r=>cs.createElementNS(j4e,r),t=wc(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=wc(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function H4e({options:e}){const t=ZS(()=>({__html:U4e().outerHTML}),[]);return wi("h2",{class:"dialog__header"},wi("span",{class:"dialog__title"},e.formTitle),e.showBranding?wi("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function W4e(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function uR(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function G4e({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:s,onSubmitSuccess:o,onSubmitError:c,showEmail:i,showName:f,screenshotInput:g}){const{tags:x,addScreenshotButtonLabel:w,removeScreenshotButtonLabel:A,cancelButtonLabel:C,emailLabel:F,emailPlaceholder:z,isEmailRequired:j,isNameRequired:V,messageLabel:Y,messagePlaceholder:te,nameLabel:J,namePlaceholder:ee,submitButtonLabel:le,isRequiredLabel:oe}=e,[ve,se]=M0(null),[ie,pe]=M0(!1),be=g&&g.input,[Se,Ce]=M0(null),Ee=A0(He=>{Ce(He),pe(!1)},[]),xe=A0(He=>{const Ke=W4e(He,{emailLabel:F,isEmailRequired:j,isNameRequired:V,messageLabel:Y,nameLabel:J});return Ke.length>0?se(`Please enter in the following required fields: ${Ke.join(", ")}`):se(null),Ke.length===0},[F,j,V,Y,J]),ke=A0(async He=>{try{if(He.preventDefault(),!(He.target instanceof HTMLFormElement))return;const Ke=new FormData(He.target),Ge=await(g&&ie?g.value():void 0),$t={name:uR(Ke,"name"),email:uR(Ke,"email"),message:uR(Ke,"message"),attachments:Ge?[Ge]:void 0};if(!xe($t))return;try{await s({name:$t.name,email:$t.email,message:$t.message,source:p4e,tags:x},{attachments:$t.attachments}),o($t)}catch(Ft){oC&&En.error(Ft),se(Ft),c(Ft)}}catch{}},[g&&ie,o,c]);return wi("form",{class:"form",onSubmit:ke},be&&ie?wi(be,{onError:Ee}):null,wi("div",{class:"form__right","data-sentry-feedback":!0},wi("div",{class:"form__top"},ve?wi("div",{class:"form__error-container"},ve):null,f?wi("label",{for:"name",class:"form__label"},wi(dR,{label:J,isRequiredLabel:oe,isRequired:V}),wi("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:ee,required:V,type:"text"})):wi("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),i?wi("label",{for:"email",class:"form__label"},wi(dR,{label:F,isRequiredLabel:oe,isRequired:j}),wi("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:z,required:j,type:"email"})):wi("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),wi("label",{for:"message",class:"form__label"},wi(dR,{label:Y,isRequiredLabel:oe,isRequired:!0}),wi("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:te,required:!0,rows:5})),be?wi("label",{for:"screenshot",class:"form__label"},wi("button",{class:"btn btn--default",type:"button",onClick:()=>{Ce(null),pe(He=>!He)}},ie?A:w),Se?wi("div",{class:"form__error-container"},Se.message):null):null),wi("div",{class:"btn-group"},wi("button",{class:"btn btn--primary",type:"submit"},le),wi("button",{class:"btn btn--default",type:"button",onClick:r},C))))}function dR({label:e,isRequired:t,isRequiredLabel:n}){return wi("span",{class:"form__label__text"},e,t&&wi("span",{class:"form__label__text--required"},n))}const UM=16,MH=17,Y4e="http://www.w3.org/2000/svg";function q4e(){const e=f=>Bd.document.createElementNS(Y4e,f),t=wc(e("svg"),{width:`${UM}`,height:`${MH}`,viewBox:`0 0 ${UM} ${MH}`,fill:"inherit"}),n=wc(e("g"),{clipPath:"url(#clip0_57_156)"}),r=wc(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=wc(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const o=e("defs"),c=wc(e("clipPath"),{id:"clip0_57_156"}),i=wc(e("rect"),{width:`${UM}`,height:`${UM}`,fill:"white",transform:"translate(0 0.5)"});return c.appendChild(i),o.appendChild(c),t.appendChild(o).appendChild(c).appendChild(i),t}function X4e({open:e,onFormSubmitted:t,...n}){const r=n.options,s=ZS(()=>({__html:q4e().outerHTML}),[]),[o,c]=M0(null),i=A0(()=>{o&&(clearTimeout(o),c(null)),t()},[o]),f=A0(g=>{n.onSubmitSuccess(g),c(setTimeout(()=>{t(),c(null)},g4e))},[t]);return wi(XS,null,o?wi("div",{class:"success__position",onClick:i},wi("div",{class:"success__content"},r.successMessageText,wi("span",{class:"success__icon",dangerouslySetInnerHTML:s}))):wi("dialog",{class:"dialog",onClick:r.onFormClose,open:e},wi("div",{class:"dialog__position"},wi("div",{class:"dialog__content",onClick:g=>{g.stopPropagation()}},wi(H4e,{options:r}),wi(G4e,{...n,onSubmitSuccess:f})))))}const Z4e=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,K4e=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,J4e=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,Q4e=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,eDe=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function tDe(e){const t=cs.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${Z4e}
${K4e}
${J4e}
${Q4e}
${eDe}
`,e&&t.setAttribute("nonce",e),t}function nDe(){const e=hi().getUser(),t=$o().getUser(),n=eP().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const rDe=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const s=r,o=e.useSentryUser,c=nDe(),i=cs.createElement("div"),f=tDe(e.styleNonce);let g="";const x={get el(){return i},appendToDom(){!s.contains(f)&&!s.contains(i)&&(s.appendChild(f),s.appendChild(i))},removeFromDom(){s.removeChild(i),s.removeChild(f),cs.body.style.overflow=g},open(){A(!0),e.onFormOpen&&e.onFormOpen(),g=cs.body.style.overflow,cs.body.style.overflow="hidden"},close(){A(!1),cs.body.style.overflow=g}},w=t&&t.createInput({h:wi,hooks:V4e,dialog:x,options:e}),A=C=>{O4e(wi(X4e,{options:e,screenshotInput:w,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:o&&c&&c[o.name]||"",defaultEmail:o&&c&&c[o.email]||"",onFormClose:()=>{A(!1),e.onFormClose&&e.onFormClose()},onSubmit:n,onSubmitSuccess:F=>{A(!1),e.onSubmitSuccess&&e.onSubmitSuccess(F)},onSubmitError:F=>{e.onSubmitError&&e.onSubmitError(F)},onFormSubmitted:()=>{e.onFormSubmitted&&e.onFormSubmitted()},open:C}),i)};return x}}));function iDe({h:e}){return function({top:n,left:r,corner:s,onGrabButton:o}){return e("button",{class:`editor__crop-corner editor__crop-corner--${s} `,style:{top:n,left:r},onMouseDown:c=>{c.preventDefault(),o(c,s)},onClick:c=>{c.preventDefault()}})}}function sDe(e){const t=cs.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  padding: 10px;
  padding-top: 65px;
  padding-bottom: 65px;
  flex-grow: 1;

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container canvas {
  object-fit: contain;
  position: relative;
}

.editor__crop-btn-group {
  padding: 8px;
  gap: 8px;
  border-radius: var(--menu-border-radius, 6px);
  background: var(--button-primary-background, var(--background));
  width: 175px;
  position: absolute;
}

.editor__crop-corner {
  width: 30px;
  height: 30px;
  position: absolute;
  background: none;
  border: 3px solid #ffffff;
}

.editor__crop-corner--top-left {
  cursor: nwse-resize;
  border-right: none;
  border-bottom: none;
}
.editor__crop-corner--top-right {
  cursor: nesw-resize;
  border-left: none;
  border-bottom: none;
}
.editor__crop-corner--bottom-left {
  cursor: nesw-resize;
  border-right: none;
  border-top: none;
}
.editor__crop-corner--bottom-right {
  cursor: nwse-resize;
  border-left: none;
  border-top: none;
}
`,e&&t.setAttribute("nonce",e),t}function oDe({hooks:e}){return function({onBeforeScreenshot:n,onScreenshot:r,onAfterScreenshot:s,onError:o}){e.useEffect(()=>{(async()=>{n();const i=await Iw.mediaDevices.getDisplayMedia({video:{width:Bd.innerWidth*Bd.devicePixelRatio,height:Bd.innerHeight*Bd.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),f=cs.createElement("video");await new Promise((g,x)=>{f.srcObject=i,f.onloadedmetadata=()=>{r(f),i.getTracks().forEach(w=>w.stop()),g()},f.play().catch(x)}),s()})().catch(o)},[])}}const Pw=30,Ch=3,Rp=Pw+Ch,$l=Bd.devicePixelRatio,rw=e=>({x:Math.min(e.startX,e.endX),y:Math.min(e.startY,e.endY),width:Math.abs(e.startX-e.endX),height:Math.abs(e.startY-e.endY)}),hR=e=>{const t=e.clientHeight,n=e.clientWidth,r=e.width/e.height;let s=t*r,o=t;s>n&&(s=n,o=n/r);const c=(n-s)/2,i=(t-o)/2;return{startX:c,startY:i,endX:s+c,endY:o+i}};function aDe({h:e,hooks:t,imageBuffer:n,dialog:r,options:s}){const o=oDe({hooks:t});return function({onError:i}){const f=t.useMemo(()=>({__html:sDe(s.styleNonce).innerText}),[]),g=iDe({h:e}),x=t.useRef(null),w=t.useRef(null),A=t.useRef(null),[C,F]=t.useState({startX:0,startY:0,endX:0,endY:0}),[z,j]=t.useState(!1),[V,Y]=t.useState(!1);t.useEffect(()=>{Bd.addEventListener("resize",te,!1)},[]);function te(){const se=A.current,ie=rw(hR(n));if(se){se.width=ie.width*$l,se.height=ie.height*$l,se.style.width=`${ie.width}px`,se.style.height=`${ie.height}px`;const be=se.getContext("2d");be&&be.scale($l,$l)}const pe=w.current;pe&&(pe.style.width=`${ie.width}px`,pe.style.height=`${ie.height}px`),F({startX:0,startY:0,endX:ie.width,endY:ie.height})}t.useEffect(()=>{const se=A.current;if(!se)return;const ie=se.getContext("2d");if(!ie)return;const pe=rw(hR(n)),be=rw(C);ie.clearRect(0,0,pe.width,pe.height),ie.fillStyle="rgba(0, 0, 0, 0.5)",ie.fillRect(0,0,pe.width,pe.height),ie.clearRect(be.x,be.y,be.width,be.height),ie.strokeStyle="#ffffff",ie.lineWidth=3,ie.strokeRect(be.x+1,be.y+1,be.width-2,be.height-2),ie.strokeStyle="#000000",ie.lineWidth=1,ie.strokeRect(be.x+3,be.y+3,be.width-6,be.height-6)},[C]);function J(se,ie){j(!1),Y(!0);const pe=ee(ie),be=()=>{cs.removeEventListener("mousemove",pe),cs.removeEventListener("mouseup",be),j(!0),Y(!1)};cs.addEventListener("mouseup",be),cs.addEventListener("mousemove",pe)}const ee=t.useCallback(se=>function(ie){if(!A.current)return;const pe=A.current,be=pe.getBoundingClientRect(),Se=ie.clientX-be.x,Ce=ie.clientY-be.y;switch(se){case"top-left":F(Ee=>({...Ee,startX:Math.min(Math.max(0,Se),Ee.endX-Rp),startY:Math.min(Math.max(0,Ce),Ee.endY-Rp)}));break;case"top-right":F(Ee=>({...Ee,endX:Math.max(Math.min(Se,pe.width/$l),Ee.startX+Rp),startY:Math.min(Math.max(0,Ce),Ee.endY-Rp)}));break;case"bottom-left":F(Ee=>({...Ee,startX:Math.min(Math.max(0,Se),Ee.endX-Rp),endY:Math.max(Math.min(Ce,pe.height/$l),Ee.startY+Rp)}));break;case"bottom-right":F(Ee=>({...Ee,endX:Math.max(Math.min(Se,pe.width/$l),Ee.startX+Rp),endY:Math.max(Math.min(Ce,pe.height/$l),Ee.startY+Rp)}));break}},[]),le=t.useRef({initialX:0,initialY:0});function oe(se){if(V)return;le.current={initialX:se.clientX,initialY:se.clientY};const ie=be=>{const Se=A.current;if(!Se)return;const Ce=be.clientX-le.current.initialX,Ee=be.clientY-le.current.initialY;F(xe=>{const ke=Math.max(0,Math.min(xe.startX+Ce,Se.width/$l-(xe.endX-xe.startX))),He=Math.max(0,Math.min(xe.startY+Ee,Se.height/$l-(xe.endY-xe.startY))),Ke=ke+(xe.endX-xe.startX),Ge=He+(xe.endY-xe.startY);return le.current.initialX=be.clientX,le.current.initialY=be.clientY,{startX:ke,startY:He,endX:Ke,endY:Ge}})},pe=()=>{cs.removeEventListener("mousemove",ie),cs.removeEventListener("mouseup",pe)};cs.addEventListener("mousemove",ie),cs.addEventListener("mouseup",pe)}function ve(){const se=cs.createElement("canvas"),ie=rw(hR(n)),pe=rw(C);se.width=pe.width*$l,se.height=pe.height*$l;const be=se.getContext("2d");be&&n&&be.drawImage(n,pe.x/ie.width*n.width,pe.y/ie.height*n.height,pe.width/ie.width*n.width,pe.height/ie.height*n.height,0,0,se.width,se.height);const Se=n.getContext("2d");Se&&(Se.clearRect(0,0,n.width,n.height),n.width=se.width,n.height=se.height,n.style.width=`${pe.width}px`,n.style.height=`${pe.height}px`,Se.drawImage(se,0,0),te())}return o({onBeforeScreenshot:t.useCallback(()=>{r.el.style.display="none"},[]),onScreenshot:t.useCallback(se=>{const ie=n.getContext("2d");if(!ie)throw new Error("Could not get canvas context");n.width=se.videoWidth,n.height=se.videoHeight,n.style.width="100%",n.style.height="100%",ie.drawImage(se,0,0)},[n]),onAfterScreenshot:t.useCallback(()=>{r.el.style.display="block";const se=x.current;se&&se.appendChild(n),te()},[]),onError:t.useCallback(se=>{r.el.style.display="block",i(se)},[])}),e("div",{class:"editor"},e("style",{nonce:s.styleNonce,dangerouslySetInnerHTML:f}),e("div",{class:"editor__canvas-container",ref:x},e("div",{class:"editor__crop-container",style:{position:"absolute",zIndex:1},ref:w},e("canvas",{onMouseDown:oe,style:{position:"absolute",cursor:z?"move":"auto"},ref:A}),e(g,{left:C.startX-Ch,top:C.startY-Ch,onGrabButton:J,corner:"top-left"}),e(g,{left:C.endX-Pw+Ch,top:C.startY-Ch,onGrabButton:J,corner:"top-right"}),e(g,{left:C.startX-Ch,top:C.endY-Pw+Ch,onGrabButton:J,corner:"bottom-left"}),e(g,{left:C.endX-Pw+Ch,top:C.endY-Pw+Ch,onGrabButton:J,corner:"bottom-right"}),e("div",{style:{left:Math.max(0,C.endX-191),top:Math.max(0,C.endY+8),display:z?"flex":"none"},class:"editor__crop-btn-group"},e("button",{onClick:se=>{se.preventDefault(),A.current&&F({startX:0,startY:0,endX:A.current.width/$l,endY:A.current.height/$l}),j(!1)},class:"btn btn--default"},s.cancelButtonLabel),e("button",{onClick:se=>{se.preventDefault(),ve(),j(!1)},class:"btn btn--primary"},s.confirmButtonLabel)))))}}const lDe=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const s=cs.createElement("canvas");return{input:aDe({h:e,hooks:t,imageBuffer:s,dialog:n,options:r}),value:async()=>{const o=await new Promise(c=>{s.toBlob(c,"image/png")});if(o)return{data:new Uint8Array(await o.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}})),cDe=are({lazyLoadIntegration:rne}),AH=are({getModalIntegration:()=>rDe,getScreenshotIntegration:()=>lDe});function uDe(e,t=1,n){VS.increment(jS,e,t,n)}function dDe(e,t,n){VS.distribution(jS,e,t,n)}function hDe(e,t,n){VS.set(jS,e,t,n)}function fDe(e,t,n){VS.gauge(jS,e,t,n)}function pDe(e,t,n="second",r){return VS.timing(jS,e,t,n,r)}const mDe={increment:uDe,distribution:dDe,set:hDe,gauge:fDe,timing:pDe},CH=new WeakMap,fR=new Map,d2={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function yre(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:o,enableHTTPTimings:c,tracePropagationTargets:i}={traceFetch:d2.traceFetch,traceXHR:d2.traceXHR,trackFetchStreamPerformance:d2.trackFetchStreamPerformance,...t},f=typeof o=="function"?o:w=>!0,g=w=>yDe(w,i),x={};n&&(e.addEventProcessor(w=>(w.type==="transaction"&&w.spans&&w.spans.forEach(A=>{if(A.op==="http.client"){const C=fR.get(A.span_id);C&&(A.timestamp=C/1e3,fR.delete(A.span_id))}}),w)),s&&rMe(w=>{if(w.response){const A=CH.get(w.response);A&&w.endTimestamp&&fR.set(A,w.endTimestamp)}}),GN(w=>{const A=YTe(w,f,g,x);if(w.response&&w.fetchData.__span&&CH.set(w.response,w.fetchData.__span),A){const C=vre(w.fetchData.url),F=C?B_(C).host:void 0;A.setAttributes({"http.url":C,"server.address":F})}c&&A&&IH(A)})),r&&QN(w=>{const A=vDe(w,f,g,x);c&&A&&IH(A)})}function gDe(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function IH(e){const{url:t}=pi(e).data||{};if(!t||typeof t!="string")return;const n=Z0("resource",({entries:r})=>{r.forEach(s=>{gDe(s)&&s.name.endsWith(t)&&(_De(s).forEach(c=>e.setAttribute(...c)),setTimeout(n))})})}function Ad(e=0){return((Aa||performance.timeOrigin)+e)/1e3}function _De(e){const{name:t,version:n}=Ute(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),Aa?[...r,["http.request.redirect_start",Ad(e.redirectStart)],["http.request.fetch_start",Ad(e.fetchStart)],["http.request.domain_lookup_start",Ad(e.domainLookupStart)],["http.request.domain_lookup_end",Ad(e.domainLookupEnd)],["http.request.connect_start",Ad(e.connectStart)],["http.request.secure_connection_start",Ad(e.secureConnectionStart)],["http.request.connection_end",Ad(e.connectEnd)],["http.request.request_start",Ad(e.requestStart)],["http.request.response_start",Ad(e.responseStart)],["http.request.response_end",Ad(e.responseEnd)]]:r}function yDe(e,t){const n=lr.location&&lr.location.href;if(n){let r,s;try{r=new URL(e,n),s=new URL(n).origin}catch{return!1}const o=r.origin===s;return t?Mm(r.toString(),t)||o&&Mm(r.pathname,t):o}else{const r=!!e.match(/^\/(?!\/)/);return t?Mm(e,t):r}}function vDe(e,t,n,r){const s=e.xhr,o=s&&s[dm];if(!s||s.__sentry_own_request__||!o)return;const c=pf()&&t(o.url);if(e.endTimestamp&&c){const w=s.__sentry_xhr_span_id__;if(!w)return;const A=r[w];A&&o.status_code!==void 0&&(DN(A,o.status_code),A.end(),delete r[w]);return}const i=vre(o.url),f=i?B_(i).host:void 0,g=!!qs(),x=c&&g?zm({name:`${o.method} ${o.url}`,attributes:{type:"xhr","http.method":o.method,"http.url":i,url:o.url,"server.address":f,[Ys]:"auto.http.browser",[Fm]:"http.client"}}):new rg;return s.__sentry_xhr_span_id__=x.spanContext().spanId,r[s.__sentry_xhr_span_id__]=x,n(o.url)&&bDe(s,pf()&&g?x:void 0),x}function bDe(e,t){const{"sentry-trace":n,baggage:r}=ste({span:t});n&&xDe(e,n,r)}function xDe(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader("baggage",n)}catch{}}function vre(e){try{return new URL(e,lr.location.origin).href}catch{return}}function wDe(){lr&&lr.document?lr.document.addEventListener("visibilitychange",()=>{const e=qs();if(!e)return;const t=go(e);if(lr.document.hidden&&t){const n="cancelled",{op:r,status:s}=pi(t);Ti&&En.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||t.setStatus({code:Fo,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):Ti&&En.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const SDe="BrowserTracing",EDe={...eC,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...d2},PH=((e={})=>{kN();const{enableInp:t,enableLongTask:n,enableLongAnimationFrame:r,_experiments:{enableInteractions:s,enableStandaloneClsSpans:o},beforeStartSpan:c,idleTimeout:i,finalTimeout:f,childSpanTimeout:g,markBackgroundSpan:x,traceFetch:w,traceXHR:A,trackFetchStreamPerformance:C,shouldCreateSpanForRequest:F,enableHTTPTimings:z,instrumentPageLoad:j,instrumentNavigation:V}={...EDe,...e},Y=lAe({recordClsStandaloneSpans:o||!1});t&&RAe(),r&&Fr.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?uAe():n&&cAe(),s&&dAe();const te={name:void 0,source:void 0};function J(ee,le){const oe=le.op==="pageload",ve=c?c(le):le,se=ve.attributes||{};le.name!==ve.name&&(se[Sl]="custom",ve.attributes=se),te.name=ve.name,te.source=se[Sl];const ie=Nee(ve,{idleTimeout:i,finalTimeout:f,childSpanTimeout:g,disableAutoFinish:oe,beforeSpanEnd:be=>{Y(),gAe(be,{recordClsOnPageloadSpan:!o})}});function pe(){["interactive","complete"].includes(lr.document.readyState)&&ee.emit("idleSpanEnableAutoFinish",ie)}return oe&&lr.document&&(lr.document.addEventListener("readystatechange",()=>{pe()}),pe()),ie}return{name:SDe,afterAllSetup(ee){let le,oe=lr.location&&lr.location.href;function ve(){le&&!pi(le).timestamp&&(Ti&&En.log(`[Tracing] Finishing current active span with op: ${pi(le).op}`),le.end())}ee.on("startNavigationSpan",se=>{mr()===ee&&(ve(),le=J(ee,{op:"navigation",...se}))}),ee.on("startPageLoadSpan",(se,ie={})=>{if(mr()!==ee)return;ve();const pe=ie.sentryTrace||OH("sentry-trace"),be=ie.baggage||OH("baggage"),Se=mee(pe,be);hi().setPropagationContext(Se),le=J(ee,{op:"pageload",...se})}),ee.on("spanEnd",se=>{const ie=pi(se).op;if(se!==go(se)||ie!=="navigation"&&ie!=="pageload")return;const pe=hi(),be=pe.getPropagationContext();pe.setPropagationContext({...be,sampled:be.sampled!==void 0?be.sampled:xy(se),dsc:be.dsc||ig(se)})}),lr.location&&(j&&bre(ee,{name:lr.location.pathname,startTime:Aa?Aa/1e3:void 0,attributes:{[Sl]:"url",[Ys]:"auto.pageload.browser"}}),V&&lP(({to:se,from:ie})=>{if(ie===void 0&&oe&&oe.indexOf(se)!==-1){oe=void 0;return}ie!==se&&(oe=void 0,EF(ee,{name:lr.location.pathname,attributes:{[Sl]:"url",[Ys]:"auto.navigation.browser"}}))})),x&&wDe(),s&&TDe(i,f,g,te),t&&LAe(),yre(ee,{traceFetch:w,traceXHR:A,trackFetchStreamPerformance:C,tracePropagationTargets:ee.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:F,enableHTTPTimings:z})}}});function bre(e,t,n){e.emit("startPageLoadSpan",t,n),hi().setTransactionName(t.name);const r=qs();return(r&&pi(r).op)==="pageload"?r:void 0}function EF(e,t){$o().setPropagationContext({traceId:hf()}),hi().setPropagationContext({traceId:hf()}),e.emit("startNavigationSpan",t),hi().setTransactionName(t.name);const n=qs();return(n&&pi(n).op)==="navigation"?n:void 0}function OH(e){const t=s2e(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function TDe(e,t,n,r){let s;const o=()=>{const c="ui.action.click",i=qs(),f=i&&go(i);if(f){const g=pi(f).op;if(["navigation","pageload"].includes(g)){Ti&&En.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(s&&(s.setAttribute(_L,"interactionInterrupted"),s.end(),s=void 0),!r.name){Ti&&En.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}s=Nee({name:r.name,op:c,attributes:{[Sl]:r.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n})};lr.document&&addEventListener("click",o,{once:!1,capture:!0})}function s1(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function MDe(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=s1(n);return s=>r.then(o=>s(o.transaction(t,"readwrite").objectStore(t)))}function TF(e){return s1(e.getAllKeys())}function ADe(e,t,n){return e(r=>TF(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.max(...s,0)+1),s1(r.transaction)}))}function CDe(e,t,n){return e(r=>TF(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.min(...s,0)-1),s1(r.transaction)}))}function IDe(e){return e(t=>TF(t).then(n=>{const r=n[0];if(r!=null)return s1(t.get(r)).then(s=>(t.delete(r),s1(t.transaction).then(()=>s)))}))}function PDe(e){let t;function n(){return t==null&&(t=MDe(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{const s=await yI(r);await ADe(n(),s,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{const s=await yI(r);await CDe(n(),s,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const r=await IDe(n());if(r)return rSe(r)}catch{}}}}function ODe(e){return t=>{const n=e({...t,createStore:PDe});return lr.addEventListener("online",async r=>{await n.flush()}),n}}function DDe(e=eF){return ODe(aEe(e))}const DH=1e6,dC=String(0),RDe="main";let xre="",wre="",Sre="",KL=lr.navigator&&lr.navigator.userAgent||"",Ere="";const kDe=lr.navigator&&lr.navigator.language||lr.navigator&&lr.navigator.languages&&lr.navigator.languages[0]||"";function LDe(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const RH=lr.navigator&&lr.navigator.userAgentData;LDe(RH)&&RH.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(xre=e.platform||"",Sre=e.architecture||"",Ere=e.model||"",wre=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];KL=`${t.brand} ${t.version}`}}).catch(e=>{});function NDe(e){return!("thread_metadata"in e)}function FDe(e){return NDe(e)?$De(e):e}function zDe(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return typeof t=="string"&&t.length!==32&&Ti&&En.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function BDe(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=zDe(r),o=FDe(n),c=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:Gs()*1e3),i=typeof r.timestamp=="number"?r.timestamp*1e3:Gs()*1e3;return{event_id:e,timestamp:new Date(c).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||rP,runtime:{name:"javascript",version:lr.navigator.userAgent},os:{name:xre,version:wre,build_number:KL},device:{locale:kDe,model:Ere,manufacturer:KL,architecture:Sre,is_emulator:!1},debug_meta:{images:UDe(n.resources)},profile:o,transactions:[{name:r.transaction||"",id:r.event_id||Tl(),trace_id:s,active_thread_id:dC,relative_start_ns:"0",relative_end_ns:((i-c)*1e6).toFixed(0)}]}}function Tre(e){return pi(e).op==="pageload"}function $De(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[dC]:{name:RDe}}},s=e.samples[0];if(!s)return r;const o=s.timestamp,c=typeof performance.timeOrigin=="number"?performance.timeOrigin:Aa||0,i=c-(Aa||c);return e.samples.forEach((f,g)=>{if(f.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[g]={elapsed_since_start_ns:((f.timestamp+i-o)*DH).toFixed(0),stack_id:t,thread_id:dC};return}let x=e.stacks[f.stackId];const w=[];for(;x;){w.push(x.frameId);const C=e.frames[x.frameId];C&&r.frames[x.frameId]===void 0&&(r.frames[x.frameId]={function:C.name,abs_path:typeof C.resourceId=="number"?e.resources[C.resourceId]:void 0,lineno:C.line,colno:C.column}),x=x.parentId===void 0?void 0:e.stacks[x.parentId]}const A={elapsed_since_start_ns:((f.timestamp+i-o)*DH).toFixed(0),stack_id:n,thread_id:dC};r.stacks[n]=w,r.samples[g]=A,n++}),r}function VDe(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function jDe(e){const t=[];return ey(e,(n,r)=>{if(r==="transaction")for(let s=1;s<n.length;s++){const o=n[s];o&&o.contexts&&o.contexts.profile&&o.contexts.profile.profile_id&&t.push(n[s])}}),t}function UDe(e){const t=mr(),n=t&&t.getOptions(),r=n&&n.stackParser;return r?SSe(r,e):[]}function HDe(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(Ti&&En.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(Ti&&En.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function WDe(e){return e.samples.length<2?(Ti&&En.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(Ti&&En.log("[Profiling] Discarding profile because it contains no frames"),!1)}let Mre=!1;const Are=3e4;function GDe(e){return typeof e=="function"}function YDe(){const e=lr.Profiler;if(!GDe(e)){Ti&&En.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(Are/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{Ti&&(En.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),En.log("[Profiling] Disabling profiling for current user session.")),Mre=!0}}function kH(e){if(Mre)return Ti&&En.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Ti&&En.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=mr(),n=t&&t.getOptions();if(!n)return Ti&&En.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return HDe(r)?r?(r===!0?!0:Math.random()<r)?!0:(Ti&&En.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(Ti&&En.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(Ti&&En.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function qDe(e,t,n,r){return WDe(n)?BDe(e,t,n,r):null}const w_=new Map;function XDe(){return w_.size}function ZDe(e){const t=w_.get(e);return t&&w_.delete(e),t}function KDe(e,t){if(w_.set(e,t),w_.size>30){const n=w_.keys().next().value;w_.delete(n)}}function LH(e){let t;Tre(e)&&(t=Gs()*1e3);const n=YDe();if(!n)return;Ti&&En.log(`[Profiling] started profiling span: ${pi(e).description}`);const r=Tl();hi().setContext("profile",{profile_id:r,start_timestamp:t});async function s(){if(e&&n)return n.stop().then(f=>{if(o&&(lr.clearTimeout(o),o=void 0),Ti&&En.log(`[Profiling] stopped profiling of span: ${pi(e).description}`),!f){Ti&&En.log(`[Profiling] profiler returned null profile for: ${pi(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}KDe(r,f)}).catch(f=>{Ti&&En.log("[Profiling] error while stopping profiler:",f)})}let o=lr.setTimeout(()=>{Ti&&En.log("[Profiling] max profile duration elapsed, stopping profiling for:",pi(e).description),s()},Are);const c=e.end.bind(e);function i(){return e?(s().then(()=>{c()},()=>{c()}),e):c()}e.end=i}const JDe="BrowserProfiling",QDe=(()=>({name:JDe,setup(e){const t=qs(),n=t&&go(t);n&&Tre(n)&&kH(n)&&LH(n),e.on("spanStart",r=>{r===go(r)&&kH(r)&&LH(r)}),e.on("beforeEnvelope",r=>{if(!XDe())return;const s=jDe(r);if(!s.length)return;const o=[];for(const c of s){const i=c&&c.contexts,f=i&&i.profile&&i.profile.profile_id,g=i&&i.profile&&i.profile.start_timestamp;if(typeof f!="string"){Ti&&En.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!f){Ti&&En.log("[Profiling] cannot find profile for a span without a profile context");continue}i&&i.profile&&delete i.profile;const x=ZDe(f);if(!x){Ti&&En.log(`[Profiling] Could not retrieve profile for span: ${f}`);continue}const w=qDe(f,g,x,c);w&&o.push(w)}VDe(r,o)})}})),eRe=QDe,tRe="SpotlightBrowser",nRe=((e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:tRe,setup:()=>{Ti&&En.log("Using Sidecar URL",t)},processEvent:n=>sRe(n)?null:n,afterAllSetup:n=>{rRe(n,t)}}});function rRe(e,t){const n=JN("fetch");let r=0;e.on("beforeEnvelope",s=>{if(r>3){En.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:yI(s),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(o=>{o.status>=200&&o.status<400&&(r=0)},o=>{r++,En.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",o)})})}const iRe=nRe;function sRe(e){return!!(e.type==="transaction"&&e.spans&&e.contexts&&e.contexts.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t&&t.includes("#sentry-spotlight")))}const oRe=100;function KS(e){const n=hi().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function o1(e,t,n=oRe){const r=hi().getScopeData().contexts;r.flags||(r.flags={values:[]});const s=r.flags.values;aRe(s,e,t,n)}function aRe(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){Ti&&En.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}const s=e.findIndex(o=>o.flag===t);s!==-1&&e.splice(s,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}const lRe=()=>({name:"FeatureFlags",processEvent(e,t,n){return KS(e)},addFeatureFlag(e,t){o1(e,t)}}),cRe=()=>({name:"LaunchDarkly",processEvent(e,t,n){return KS(e)}});function uRe(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{o1(e,t.value)}}}const dRe=()=>({name:"OpenFeature",processEvent(e,t,n){return KS(e)}});class hRe{after(t,n){o1(n.flagKey,n.value)}error(t,n,r){o1(t.flagKey,t.defaultValue)}}const fRe=({unleashClientClass:e})=>({name:"Unleash",processEvent(t,n,r){return KS(t)},setupOnce(){const t=e.prototype;wl(t,"isEnabled",pRe)}});function pRe(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?o1(n,r):Ti&&En.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const mRe=({featureFlagClient:e})=>({name:"Statsig",processEvent(t,n,r){return KS(t)},setup(){e.on("gate_evaluation",t=>{o1(t.gate.name,t.gate.value)})}}),Cre=["activate","mount","update"],Ire=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,gRe=/(?:^|[-_])(\w)/g,_Re=e=>e.replace(gRe,t=>t.toUpperCase()).replace(/[-_]/g,""),yRe="<Root>",pR="<Anonymous>",vRe=(e,t)=>e.repeat(t),h2=(e,t)=>{if(!e)return pR;if(e.$root===e)return yRe;if(!e.$options)return pR;const n=e.$options;let r=n.name||n._componentTag||n.__name;const s=n.__file;if(!r&&s){const o=s.match(/([^/\\]+)\.vue$/);o&&(r=o[1])}return(r?`<${_Re(r)}>`:pR)+(s&&t!==!1?` at ${s}`:"")},bRe=e=>{if(e&&(e._isVue||e.__isVue)&&e.$parent){const t=[];let n=0;for(;e;){if(t.length>0){const s=t[t.length-1];if(s.constructor===e.constructor){n++,e=e.$parent;continue}else n>0&&(t[t.length-1]=[s,n],n=0)}t.push(e),e=e.$parent}return`

found in

${t.map((s,o)=>`${(o===0?"---> ":vRe(" ",5+o*2))+(Array.isArray(s)?`${h2(s[0])}... (${s[1]} recursive calls)`:h2(s))}`).join(`
`)}`}return`

(found in ${h2(e)})`},Pre=(e,t)=>{const{errorHandler:n,warnHandler:r,silent:s}=e.config;e.config.errorHandler=(o,c,i)=>{const f=h2(c,!1),g=c?bRe(c):"",x={componentName:f,lifecycleHook:i,trace:g};if(t.attachProps&&c&&(c.$options&&c.$options.propsData?x.propsData=c.$options.propsData:c.$props&&(x.propsData=c.$props)),setTimeout(()=>{If(o,{captureContext:{contexts:{vue:x}},mechanism:{handled:!!n,type:"vue"}})}),typeof n=="function"&&e.config.errorHandler&&n.call(e,o,c,i),n){if(t.logErrors){const w=typeof console<"u",A=`Error in ${i}: "${o&&o.toString()}"`;r?r.call(null,A,c,g):w&&!s&&su(()=>{console.error(`[Vue warn]: ${A}${g}`)})}}else throw o}},NH="ui.vue",xRe={activate:["activated","deactivated"],create:["beforeCreate","created"],unmount:["beforeUnmount","unmounted"],destroy:["beforeDestroy","destroyed"],mount:["beforeMount","mounted"],update:["beforeUpdate","updated"]};function wRe(e,t,n){e.$_sentryRootSpanTimer&&clearTimeout(e.$_sentryRootSpanTimer),e.$_sentryRootSpanTimer=setTimeout(()=>{e.$root&&e.$root.$_sentryRootSpan&&(e.$root.$_sentryRootSpan.end(t),e.$root.$_sentryRootSpan=void 0)},n)}function SRe(e,t){function n(s){return s.replace(/^<([^\s]*)>(?: at [^\s]*)?$/,"$1")}return e.some(s=>n(t)===n(s))}const Ore=e=>{const t=(e.hooks||[]).concat(Cre).filter((r,s,o)=>o.indexOf(r)===s),n={};for(const r of t){const s=xRe[r];if(!s){Ire&&En.warn(`Unknown hook: ${r}`);continue}for(const o of s)n[o]=function(){const c=this.$root===this;c&&(this.$_sentryRootSpan=this.$_sentryRootSpan||zm({name:"Application Render",op:`${NH}.render`,attributes:{[Ys]:"auto.ui.vue"},onlyIfParent:!0}));const i=h2(this,!1),f=Array.isArray(e.trackComponents)?SRe(e.trackComponents,i):e.trackComponents;if(!(!c&&!f))if(this.$_sentrySpans=this.$_sentrySpans||{},o==s[0]){if(this.$root&&this.$root.$_sentryRootSpan||qs()){const x=this.$_sentrySpans[r];x&&x.end(),this.$_sentrySpans[r]=zm({name:`Vue ${i}`,op:`${NH}.${r}`,attributes:{[Ys]:"auto.ui.vue"},onlyIfParent:!0})}}else{const g=this.$_sentrySpans[r];if(!g)return;g.end(),wRe(this,Gs(),e.timeout)}}}return n},ERe=Fr,TRe={Vue:ERe.Vue,attachProps:!0,logErrors:!0,attachErrorHandler:!0,hooks:Cre,timeout:2e3,trackComponents:!1},MRe="Vue",MF=(e={})=>({name:MRe,setup(t){const n={...TRe,...t.getOptions(),...e};if(!n.Vue&&!n.app){su(()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue specific errors will not be captured. Update your `Sentry.init` call with an appropriate config option: `app` (Application Instance - Vue 3) or `Vue` (Vue Constructor - Vue 2).")});return}n.app?(Array.isArray(n.app)?n.app:[n.app]).forEach(s=>FH(s,n)):n.Vue&&FH(n.Vue,n)}}),FH=(e,t)=>{if(Ire){const n=e;(n._instance&&n._instance.isMounted)===!0&&su(()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue app is already mounted. Make sure to call `app.mount()` after `Sentry.init()`.")})}t.attachErrorHandler&&Pre(e,t),pf(t)&&e.mixin(Ore({...t,...t.tracingOptions}))};function ARe(e={}){const t={_metadata:{sdk:{name:"sentry.javascript.vue",packages:[{name:"npm:@sentry/vue",version:ed}],version:ed}},defaultIntegrations:[...tF(e),MF()],...e};return DCe(t)}function CRe(e,t,n){let r=!0;e.onError(s=>If(s,{mechanism:{handled:!1}})),e.beforeEach((s,o,c)=>{const i=o.name==null&&o.matched.length===0||o.name===void 0&&r;r&&(r=!1);const f={[Ys]:"auto.navigation.vue"};for(const w of Object.keys(s.params))f[`params.${w}`]=s.params[w];for(const w of Object.keys(s.query)){const A=s.query[w];A&&(f[`query.${w}`]=A)}let g=s.path,x="url";if(s.name&&t.routeLabel!=="path")g=s.name.toString(),x="custom";else if(s.matched.length>0){const w=s.matched.length-1;g=s.matched[w].path,x="route"}if(hi().setTransactionName(g),t.instrumentPageLoad&&i){const w=IRe();w&&((pi(w).data||{})[Sl]!=="custom"&&(w.updateName(g),w.setAttribute(Sl,x)),w.setAttributes({...f,[Ys]:"auto.pageload.vue"}))}t.instrumentNavigation&&!i&&(f[Sl]=x,f[Ys]="auto.navigation.vue",n({name:g,op:"navigation",attributes:f})),c&&c()})}function IRe(){const e=qs(),t=e&&go(e);if(!t)return;const n=pi(t).op;return n==="navigation"||n==="pageload"?t:void 0}function Dre(e={}){if(!e.router)return PH(e);const t=PH({...e,instrumentNavigation:!1}),{router:n,instrumentNavigation:r=!0,instrumentPageLoad:s=!0,routeLabel:o="name"}=e;return{...t,afterAllSetup(c){t.afterAllSetup(c),CRe(n,{routeLabel:o,instrumentNavigation:r,instrumentPageLoad:s},f=>{EF(c,f)})}}}const PRe=(e={attachPiniaState:!0,addBreadcrumbs:!0,actionTransformer:t=>t,stateTransformer:t=>t})=>({store:n})=>{e.attachPiniaState!==!1&&eP().addEventProcessor((r,s)=>{try{const o=new Date().toTimeString().split(" ")[0],c=`pinia_state_${n.$id}_${o}.json`;s.attachments=[...s.attachments||[],{filename:c,data:JSON.stringify(n.$state)}]}catch{}return r}),n.$onAction(r=>{r.after(()=>{const s=e.actionTransformer?e.actionTransformer(r.name):r.name;typeof s<"u"&&s!==null&&e.addBreadcrumbs!==!1&&sd({category:"action",message:s,level:"info"});const o=e.stateTransformer?e.stateTransformer(n.$state):n.$state,c=hi(),i=c.getScopeData().contexts.state;if(typeof o<"u"&&o!==null){const f=mr(),g=f&&f.getOptions(),x=g&&g.normalizeDepth||3,A={...i||{},state:{type:"pinia",value:o}};rc(A,"__sentry_override_normalization_depth__",3+x),c.setContext("state",A)}else c.setContext("state",{...i||{},state:{type:"pinia",value:"undefined"}})})})},ORe=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:Ite,OpenFeatureIntegrationHook:hRe,SDK_VERSION:ed,SEMANTIC_ATTRIBUTE_SENTRY_OP:Fm,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Ys,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:PN,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Sl,Scope:ff,WINDOW:lr,addBreadcrumb:sd,addEventProcessor:Wee,addIntegration:EL,addTracingExtensions:$2e,attachErrorHandler:Pre,breadcrumbsIntegration:Zte,browserApiErrorsIntegration:Kte,browserProfilingIntegration:eRe,browserSessionIntegration:Jte,browserTracingIntegration:Dre,buildLaunchDarklyFlagUsedHandler:uRe,captureConsoleIntegration:VEe,captureEvent:D1,captureException:If,captureFeedback:vte,captureMessage:vI,captureSession:SL,captureUserFeedback:NCe,chromeStackLineParser:Wte,close:VSe,contextLinesIntegration:sIe,continueTrace:pSe,createSentryPiniaPlugin:PRe,createTracingMixins:Ore,createTransport:nte,createUserFeedbackEnvelope:Cte,debugIntegration:WEe,dedupeIntegration:hte,defaultRequestInstrumentationOptions:d2,defaultStackLineParsers:Yte,defaultStackParser:qte,endSession:K2,eventFromException:Mte,eventFromMessage:Ate,exceptionFromError:sP,extraErrorDataIntegration:QEe,featureFlagsIntegration:lRe,feedbackAsyncIntegration:cDe,feedbackIntegration:AH,feedbackSyncIntegration:AH,flush:$Se,forceLoad:kCe,functionToStringIntegration:ote,geckoStackLineParser:Gte,getActiveSpan:qs,getClient:mr,getCurrentHub:eMe,getCurrentScope:hi,getDefaultIntegrations:tF,getFeedback:E4e,getGlobalScope:eP,getIsolationScope:$o,getReplay:zOe,getRootSpan:go,getSpanDescendants:i2,getSpanStatusFromHttpCode:dee,globalHandlersIntegration:Qte,httpClientIntegration:WCe,httpContextIntegration:tne,inboundFiltersIntegration:ate,init:ARe,instrumentOutgoingRequests:yre,isInitialized:jSe,lastEventId:Hee,launchDarklyIntegration:cRe,lazyLoadIntegration:rne,linkedErrorsIntegration:nne,makeBrowserOfflineTransport:DDe,makeFetchTransport:eF,makeMultiplexedTransport:uEe,metrics:mDe,moduleMetadataIntegration:NEe,onLoad:LCe,openFeatureIntegration:dRe,opera10StackLineParser:QAe,opera11StackLineParser:nCe,parameterize:fEe,registerSpanErrorInstrumentation:kN,replayCanvasIntegration:QOe,replayIntegration:NOe,reportingObserverIntegration:jCe,rewriteFramesIntegration:lTe,sendFeedback:sre,sessionTimingIntegration:hTe,setContext:jN,setCurrentClient:Jee,setExtra:$ee,setExtras:Bee,setHttpStatus:DN,setMeasurement:Ree,setTag:jee,setTags:Vee,setUser:Uee,showReportDialog:RCe,spanToBaggageHeader:j2e,spanToJSON:pi,spanToTraceHeader:vee,spotlightBrowserIntegration:iRe,startBrowserTracingNavigationSpan:EF,startBrowserTracingPageLoadSpan:bre,startInactiveSpan:zm,startNewTrace:gSe,startSession:bI,startSpan:fSe,startSpanManual:kee,statsigIntegration:mRe,suppressTracing:mSe,thirdPartyErrorFilterIntegration:wTe,unleashIntegration:fRe,updateSpanName:z2e,vueIntegration:MF,winjsStackLineParser:ZAe,withActiveSpan:BS,withIsolationScope:w2e,withScope:ou,zodErrorsIntegration:xTe},Symbol.toStringTag,{value:"Module"}));function zH(e){const{error:t,instance:n,info:r}=e,s={info:r};if(n&&n.$props){const o=mr(),c=o?o.getOptions():null;c&&c.attachProps&&n.$props!==!1&&(s.propsData=n.$props)}setTimeout(()=>{If(t,{captureContext:{contexts:{nuxt:s}},mechanism:{handled:!1}})})}const DRe=xs({name:"sentry-client-integrations",dependsOn:["sentry-client-config"],async setup(e){if(typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__){const t=mr();t&&"$router"in e&&t.addIntegration(Dre({router:e.$router,routeLabel:"path"}))}e.hook("app:created",t=>{const n=mr();n&&n.addIntegration(MF({...Fr._sentryNuxtVueIntegrationOptions,app:t,attachErrorHandler:!1}))}),e.hook("app:error",t=>{zH({error:t})}),e.hook("vue:error",(t,n,r)=>{zH({error:t,instance:n,info:r})})}}),RRe=xs({name:"sentry-client-config",async setup(){let e,t;[e,t]=Zh(()=>Pn(()=>import("./B7V2HnfB.js"),[],import.meta.url)),await e,t()}}),kRe=new RegExp(/Googlebot\/|Googlebot-Mobile|Googlebot-Image|Googlebot-News|Googlebot-Video|AdsBot-Google([^-]|$)|AdsBot-Google-Mobile|Feedfetcher-Google|Mediapartners-Google|Mediapartners \(Googlebot\)|APIs-Google|Google-InspectionTool|Storebot-Google|GoogleOther|bingbot|Slurp|[wW]get|LinkedInBot|Python-urllib|python-requests|aiohttp|httpx|libwww-perl|httpunit|Nutch|Go-http-client|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|BIGLOTRON|Teoma|convera|seekbot|Gigabot|Gigablast|exabot|ia_archiver|GingerCrawler|webmon |HTTrack|grub\.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|findlink|msrbot|panscient|yacybot|AISearchBot|ips-agent|tagoobot|MJ12bot|woriobot|yanga|buzzbot|mlbot|yandex\.com\/bots|purebot|Linguee Bot|CyberPatrol|voilabot|Baiduspider|citeseerxbot|spbot|twengabot|postrank|Turnitin|scribdbot|page2rss|sitebot|linkdex|Adidxbot|ezooms|dotbot|Mail\.RU_Bot|discobot|heritrix|findthatfile|europarchive\.org|NerdByNature\.Bot|(sistrix|SISTRIX) [cC]rawler|Ahrefs(Bot|SiteAudit)|fuelbot|CrunchBot|IndeedBot|mappydata|woobot|ZoominfoBot|PrivacyAwareBot|Multiviewbot|SWIMGBot|Grobbot|eright|Apercite|semanticbot|Aboundex|domaincrawler|wbsearchbot|summify|CCBot|edisterbot|SeznamBot|ec2linkfinder|gslfbot|aiHitBot|intelium_bot|facebookexternalhit|Yeti|RetrevoPageAnalyzer|lb-spider|Sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net\.com\.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|it2media-domain-crawler|ip-web-crawler\.com|siteexplorer\.info|elisabot|proximic|changedetection|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|CC Metadata Scaper|g00g1e\.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Twitterbot|cXensebot|smtbot|bnf\.fr_bot|A6-Indexer|ADmantX|Facebot|OrangeBot\/|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive\.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|S[eE][mM]rushBot|yoozBot|lipperhey|Y!J|Domain Re-Animator Bot|AddThis|Screaming Frog SEO Spider|MetaURI|Scrapy|Livelap[bB]ot|OpenHoseBot|CapsuleChecker|collection@infegy\.com|IstellaBot|DeuSu\/|betaBot|Cliqzbot\/|MojeekBot\/|netEstate NE Crawler|SafeSearch microdata crawler|Gluten Free Crawler\/|Sonic|Sysomos|Trove|deadlinkchecker|Slack-ImgProxy|Embedly|RankActiveLinkBot|iskanie|SafeDNSBot|SkypeUriPreview|Veoozbot|Slackbot|redditbot|datagnionbot|Google-Adwords-Instant|adbeat_bot|WhatsApp|contxbot|pinterest\.com\/bot|electricmonk|GarlikCrawler|BingPreview\/|vebidoobot|FemtosearchBot|Yahoo Link Preview|MetaJobBot|DomainStatsBot|mindUpBot|Daum\/|Jugendschutzprogramm-Crawler|Xenu Link Sleuth|Pcore-HTTP|moatbot|KosmioBot|[pP]ingdom|AppInsights|PhantomJS|Gowikibot|PiplBot|Discordbot|TelegramBot|Jetslide|newsharecounts|James BOT|Bark[rR]owler|TinEye|SocialRankIOBot|trendictionbot|Ocarinabot|epicbot|Primalbot|DuckDuckGo-Favicons-Bot|GnowitNewsbot|Leikibot|LinkArchiver|YaK\/|PaperLiBot|Digg Deeper|dcrawl|Snacktory|AndersPinkBot|Fyrebot|EveryoneSocialBot|Mediatoolkitbot|Luminator-robots|ExtLinksBot|SurveyBot|NING\/|okhttp|Nuzzel|omgili|PocketParser|YisouSpider|um-LN|ToutiaoSpider|MuckRack|Jamie's Spider|AHC\/|NetcraftSurveyAgent|Laserlikebot|^Apache-HttpClient|AppEngine-Google|Jetty|Upflow|Thinklab|Traackr\.com|Twurly|Mastodon|http_get|DnyzBot|botify|007ac9 Crawler|BehloolBot|BrandVerity|check_http|BDCbot|ZumBot|EZID|ICC-Crawler|ArchiveBot|^LCC |filterdb\.iss\.net\/crawler|BLP_bbot|BomboraBot|Buck\/|Companybook-Crawler|Genieo|magpie-crawler|MeltwaterNews|Moreover|newspaper\/|ScoutJet|(^| )sentry\/|StorygizeBot|UptimeRobot|OutclicksBot|seoscanners|Hatena|Google Web Preview|MauiBot|AlphaBot|SBL-BOT|IAS crawler|adscanner|Netvibes|acapbot|Baidu-YunGuanCe|bitlybot|blogmuraBot|Bot\.AraTurka\.com|bot-pge\.chlooe\.com|BoxcarBot|BTWebClient|ContextAd Bot|Digincore bot|Disqus|Feedly|Fetch\/|Fever|Flamingo_SearchEngine|FlipboardProxy|g2reader-bot|G2 Web Services|imrbot|K7MLWCBot|Kemvibot|Landau-Media-Spider|linkapediabot|vkShare|Siteimprove\.com|BLEXBot\/|DareBoost|ZuperlistBot\/|Miniflux\/|Feedspot|Diffbot\/|SEOkicks|tracemyfile|Nimbostratus-Bot|zgrab|PR-CY\.RU|AdsTxtCrawler|Datafeedwatch|Zabbix|TangibleeBot|google-xrawler|axios|Amazon CloudFront|Pulsepoint|CloudFlare-AlwaysOnline|Google-Structured-Data-Testing-Tool|WordupInfoSearch|WebDataStats|HttpUrlConnection|ZoomBot|VelenPublicWebCrawler|MoodleBot|jpg-newsbot|outbrain|W3C_Validator|Validator\.nu|W3C-checklink|W3C-mobileOK|W3C_I18n-Checker|FeedValidator|W3C_CSS_Validator|W3C_Unicorn|Google-PhysicalWeb|Blackboard|ICBot\/|BazQux|Twingly|Rivva|Experibot|awesomecrawler|Dataprovider\.com|GroupHigh\/|theoldreader\.com|AnyEvent|Uptimebot\.org|Nmap Scripting Engine|2ip\.ru|Clickagy|Caliperbot|MBCrawler|online-webceo-bot|B2B Bot|AddSearchBot|Google Favicon|HubSpot|Chrome-Lighthouse|HeadlessChrome|CheckMarkNetwork\/|www\.uptime\.com|Streamline3Bot\/|serpstatbot\/|MixnodeCache\/|^curl|SimpleScraper|RSSingBot|Jooblebot|fedoraplanet|Friendica|NextCloud|Tiny Tiny RSS|RegionStuttgartBot|Bytespider|Datanyze|Google-Site-Verification|TrendsmapResolver|tweetedtimes|NTENTbot|Gwene|SimplePie|SearchAtlas|Superfeedr|feedbot|UT-Dorkbot|Amazonbot|SerendeputyBot|Eyeotabot|officestorebot|Neticle Crawler|SurdotlyBot|LinkisBot|AwarioSmartBot|AwarioRssBot|RyteBot|FreeWebMonitoring SiteChecker|AspiegelBot|NAVER Blog Rssbot|zenback bot|SentiBot|Domains Project\/|Pandalytics|VKRobot|bidswitchbot|tigerbot|NIXStatsbot|Atom Feed Robot|[Cc]urebot|PagePeeker\/|Vigil\/|rssbot\/|startmebot\/|JobboerseBot|seewithkids|NINJA bot|Cutbot|BublupBot|BrandONbot|RidderBot|Taboolabot|Dubbotbot|FindITAnswersbot|infoobot|Refindbot|BlogTraffic\/\d\.\d+ Feed-Fetcher|SeobilityBot|Cincraw|Dragonbot|VoluumDSP-content-bot|FreshRSS|BitBot|^PHP-Curl-Class|Google-Certificates-Bridge|centurybot|Viber|e\.ventures Investment Crawler|evc-batch|PetalBot|virustotal|(^| )PTST\/|minicrawler|Cookiebot|trovitBot|seostar\.co|IonCrawl|Uptime-Kuma|Seekport|FreshpingBot|Feedbin|CriteoBot|Snap URL Preview Service|Better Uptime Bot|RuxitSynthetic|Google-Read-Aloud|Valve\/Steam|OdklBot\/|GPTBot|ChatGPT-User|YandexRenderResourcesBot\/|LightspeedSystemsCrawler|ev-crawler\/|BitSightBot\/|woorankreview\/|Google-Safety|AwarioBot|DataForSeoBot|Linespider|WellKnownBot|A Patent Crawler|StractBot|search\.marginalia\.nu|YouBot|Nicecrawler|Neevabot|BrightEdge Crawler|SiteCheckerBotCrawler|TombaPublicWebCrawler|CrawlyProjectCrawler|KomodiaBot|KStandBot|CISPA Webcrawler|MTRobot|hyscore\.io|AlexandriaOrgBot|2ip bot|Yellowbrandprotectionbot|SEOlizer|vuhuvBot|INETDEX-BOT|Synapse|t3versionsBot|deepnoc|Cocolyzebot|hypestat|ReverseEngineeringBot|sempi\.tech|Iframely|MetaInspector|node-fetch|lkxscan|python-opengraph|OpenGraphCheck|developers\.google\.com\/\+\/web\/snippet|SenutoBot|MaCoCu|NewsBlur|inoreader|NetSystemsResearch|PageThing|WordPress\/|PhxBot|ImagesiftBot|Expanse|InternetMeasurement|^BW\/|GeedoBot|Audisto Crawler|PerplexityBot\/|[cC]laude[bB]ot|Monsidobot|GroupMeBot|Vercelbot|vercel-screenshot/),LRe=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|FBAN|FBAV|fennec|hiptop|iemobile|ip(hone|od)|Instagram|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,NRe=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,FRe=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|FBAN|FBAV|fennec|hiptop|iemobile|ip(hone|od)|Instagram|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,zRe=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;function BRe(e){return LRe.test(e)||NRe.test(e.slice(0,4))}function $Re(e){return FRe.test(e)||zRe.test(e.slice(0,4))}function VRe(e){return/iPad|iPhone|iPod/.test(e)}function jRe(e){return/android/i.test(e)}function URe(e){return/Windows/.test(e)}function HRe(e){return/Mac OS X/.test(e)}const WRe=[{name:"Samsung",regex:/SamsungBrowser/i},{name:"Edge",regex:/edg(?:[ea]|ios)?\//i},{name:"Firefox",regex:/firefox|iceweasel|fxios/i},{name:"Chrome",regex:/chrome|crios|crmo/i},{name:"Safari",regex:/safari|applewebkit/i}];function GRe(e){for(const t of WRe)if(t.regex.test(e))return t.name;return""}function BH(e,t={}){let n=!1,r=!1,s=!1,o=!1;if(e==="Amazon CloudFront")t["cloudfront-is-mobile-viewer"]==="true"&&(n=!0,r=!0),t["cloudfront-is-tablet-viewer"]==="true"&&(n=!1,r=!0),t["cloudfront-is-desktop-viewer"]==="true"&&(n=!1,r=!1),t["cloudfront-is-ios-viewer"]==="true"&&(s=!0),t["cloudfront-is-android-viewer"]==="true"&&(o=!0);else if(t&&t["cf-device-type"])switch(t["cf-device-type"]){case"mobile":n=!0,r=!0;break;case"tablet":n=!1,r=!0;break;case"desktop":n=!1,r=!1;break}else n=BRe(e),r=$Re(e),s=VRe(e),o=jRe(e);const c=URe(e),i=HRe(e),f=GRe(e),g=f==="Safari",x=f==="Firefox",w=f==="Edge",A=f==="Chrome",C=f==="Samsung",F=kRe.test(e);return{userAgent:e,isMobile:n,isMobileOrTablet:r,isTablet:!n&&r,isDesktop:!r,isIos:s,isAndroid:o,isWindows:c,isMacOS:i,isApple:i||s,isDesktopOrTablet:!n,isSafari:g,isFirefox:x,isEdge:w,isChrome:A,isSamsung:C,isCrawler:F}}const YRe=xs(()=>{const e=no(),t=e.public.device.defaultUserAgent;let n;{const r=navigator.userAgent||t;n=Bo(BH(r)),e.public.device.refreshOnResize&&window.addEventListener("resize",()=>{setTimeout(()=>{const s=BH(navigator.userAgent||r);Object.entries(s).forEach(([o,c])=>{n[o]=c})},50)})}return{provide:{device:n}}}),iw="activelist",sw=async(e={})=>{const{$api:t,id:n,list_ids:r,mutation:s,path:o,reset_list_membership:c,self:i}=e,f={list_ids:r||[i.user.list_id],reset_list_membership:c},g={list_id:i.user.list_id},x=`${o}/${n}`,w=await t.put(x,g,f);return i[s](w),w},ow=async(e={})=>{const t=_s(),{$api:n,mutation:r,path:s,payload:o,self:c}=e;if(t.isGuest)return null;const{limit:i=50,saveToStore:f=!0,skip:g=0}=o,{cache_key:x,units:w}=t.user,{list_id:A}=c.user,C={cache_key:x,limit:i,list_id:o.list_id??A,skip:g};r==="saveUserFavoritesLocations"&&(C.units=w);const F=await n.get(s,C);return f&&c[r](F),F},aw=async(e={})=>{const{$api:t,id:n,list_ids:r,mutation:s,path:o,self:c}=e,i=r?{list_ids:r}:{list_ids:[c.user.list_id]},f=`${o}/${n}`,g=await t.delete(f,void 0,i);c[s](g)},lw=async(e={})=>{const{$api:t,body:n,mutation:r,path:s,self:o}=e,{list_id:c}=o.user,i={list_id:c},f=await t.post(s,i,n);o[r](f)},cw=(e,t,n)=>e.user?.favoriteIds?.lists.reduce((r,s)=>(s[t].includes(n)&&r.push(s.list_id),r),[]),qRe=Jm("userFavorites",{state:()=>({user:null,ui:null}),actions:{async addFavoriteCam({id:e,list_ids:t,reset_list_membership:n}){const{$api:r}=Wn();return sw({$api:r,id:e,list_ids:t,mutation:"saveUserFavoritesCams",path:"/user/favorites/cams",reset_list_membership:n,self:this})},async removeFavoriteCam({id:e,list_ids:t}){const{$api:n}=Wn();return aw({$api:n,id:e,list_ids:t,mutation:"saveUserFavoritesCams",path:"/user/favorites/cams",self:this})},async fetchFavoriteCams(e={}){const{$api:t}=Wn();return ow({$api:t,mutation:"saveUserFavoritesCams",path:"/user/favorites/cams",payload:{skip:0,limit:100,...e},self:this})},async updateFavoriteCams(e={}){const{$api:t}=Wn();return lw({$api:t,body:{cam_ids:e.favorites.map(({id:n})=>n)},mutation:"saveUserFavoritesCams",path:"/user/favorites/cams",self:this})},async addFavoriteDailyRead({id:e,list_ids:t,reset_list_membership:n}){const{$api:r}=Wn();return sw({$api:r,id:e,list_ids:t,mutation:"saveUserFavoritesDailyReads",path:"/user/favorites/daily-reads",reset_list_membership:n,self:this})},async removeFavoriteDailyRead({id:e,list_ids:t}){const{$api:n}=Wn();return aw({$api:n,id:e,list_ids:t,mutation:"saveUserFavoritesDailyReads",path:"/user/favorites/daily-reads",self:this})},async fetchFavoriteDailyReads(e={}){const{$api:t}=Wn();return ow({$api:t,mutation:"saveUserFavoritesDailyReads",path:"/user/favorites/daily-reads",payload:e,self:this})},async updateFavoriteDailyReads(e={}){const{$api:t}=Wn();return lw({$api:t,body:{daily_read_ids:e.favorites.map(({id:n})=>n)},mutation:"saveUserFavoritesDailyReads",path:"/user/favorites/daily-reads",self:this})},async addFavoriteLocation({id:e,list_ids:t,reset_list_membership:n}){const{$api:r}=Wn(),{location_id:s,locations:o}=await sw({$api:r,id:e,list_ids:t,mutation:"saveUserFavoritesLocations",path:"/user/favorites/locations",reset_list_membership:n,self:this});return o.find(i=>i.id===s)},async removeFavoriteLocation({id:e,list_ids:t}){const{$api:n}=Wn();return aw({$api:n,id:e,list_ids:t,mutation:"saveUserFavoritesLocations",path:"/user/favorites/locations",self:this})},async addFavoriteCustomLocation(e={}){const{$api:t}=Wn(),n=`/user/favorites/locations/custom${e.id?`/${e.id}`:""}`;let{list_ids:r}=e;r=r?{list_ids:r}:{list_ids:[this.user.list_id]};const{location_id:s,locations:o}=await t.put(n,void 0,{...e,...r});return this.saveUserFavoritesLocations({locations:o}),o.find(i=>i.id===s)},async fetchFavoriteLocations(e={}){const{$api:t}=Wn();return ow({$api:t,mutation:"saveUserFavoritesLocations",path:"/user/favorites/locations",payload:{limit:100,skip:0,...e},self:this})},async updateFavoriteLocations(e={}){const{$api:t}=Wn();return lw({$api:t,body:{location_ids:e.favorites.map(({id:n})=>n)},mutation:"saveUserFavoritesLocations",path:"/user/favorites/locations",self:this})},async addFavoriteSeasonPass({id:e,list_ids:t,reset_list_membership:n}){const{$api:r}=Wn();return sw({$api:r,id:e,list_ids:t,mutation:"saveUserFavoritesSeasonPasses",path:"/user/favorites/season-passes",reset_list_membership:n,self:this})},async removeFavoriteSeasonPass({id:e,list_ids:t}){const{$api:n}=Wn();return aw({$api:n,id:e,list_ids:t,mutation:"saveUserFavoritesSeasonPasses",path:"/user/favorites/season-passes",self:this})},async fetchFavoriteSeasonPasses(e={}){const{$api:t}=Wn();return ow({$api:t,mutation:"saveUserFavoritesSeasonPasses",path:"/user/favorites/season-passes",payload:e,self:this})},async updateFavoriteSeasonPasses(e={}){const{$api:t}=Wn();return lw({$api:t,body:{season_pass_ids:e.favorites.map(({id:n})=>n)},mutation:"saveUserFavoritesSeasonPasses",path:"/user/favorites/season-passes",self:this})},async addFavoriteTrailMap({id:e,list_ids:t,reset_list_membership:n}){const{$api:r}=Wn();return sw({$api:r,id:e,list_ids:t,mutation:"saveUserFavoritesTrailMaps",path:"/user/favorites/trail-maps",reset_list_membership:n,self:this})},async removeFavoriteTrailMap({id:e,list_ids:t}){const{$api:n}=Wn();return aw({$api:n,id:e,list_ids:t,mutation:"saveUserFavoritesTrailMaps",path:"/user/favorites/trail-maps",self:this})},async fetchFavoriteTrailMaps(e={}){const{$api:t}=Wn();return ow({$api:t,mutation:"saveUserFavoritesTrailMaps",path:"/user/favorites/trail-maps",payload:e,self:this})},async updateFavoriteTrailMaps(e={}){const{$api:t}=Wn();return lw({$api:t,body:{trail_map_ids:e.favorites.map(({id:n})=>n)},mutation:"saveUserFavoritesTrailMaps",path:"/user/favorites/trail-maps",self:this})},async fetchActiveList(e={}){const{user:t}=e;this.saveUser(t);const n=Gc(iw);n?.value&&t?.lists?.find(({id:r})=>r===n.value)&&this.saveActiveList(n.value)},async fetchUserFavoriteIds(){const{$api:e}=Wn();if(_s().isGuest)return;const n=await e.get("/user/favorites/ids");this.saveUserFavoriteIds(n)},setActiveList(e){if(_s().isGuest)return;this.saveActiveList(e);{const r=o=>{document.cookie=`opensnow-${iw}=;domain=.${o};max-age=0;path=/;`,document.cookie=`opensnow-${iw}=;domain=${o};max-age=0;path=/;`,document.cookie=`opensnow-${iw}=;max-age=0;path=/;`},s=no().public;s?.environment==="local"?r("opensnow.local.opensnow.com"):s?.environment==="development"?r("dev.opensnow.com"):s?.environment==="test"?r("test.opensnow.com"):s?.environment==="production"&&r("opensnow.com"),r("opensnow.com")}const n=Gc(iw);n.value=e},showSelectFavoriteListDialog(e){this.saveUiProperty({selectFavoriteListDialogProps:e})},saveActiveList(e){this.user?.list_id&&(this.user.list_id=e)},saveUiProperty(e){const[[t,n]]=Object.entries(e);this.ui||(this.ui={}),this.ui[t]=n},saveUser(e){this.user={...this.user,...e}},saveUserFavoriteIds({favorites:e,lists:t}){this.user.favoriteIds||(this.user.favoriteIds={}),this.user.favoriteIds.favorites=e,this.user.favoriteIds.lists=t},saveUserFavoritesLocations({locations:e}){this.user.favorites||(this.user.favorites={}),this.user.favorites.locations=e},saveUserFavoritesCams({cams:e,locations:t}){this.user.favorites||(this.user.favorites={}),this.user.favorites.webcams={cams:e,locations:t}},saveUserFavoritesDailyReads({daily_reads:e}){this.user.favorites||(this.user.favorites={}),this.user.favorites.dailyReads=e},saveUserFavoritesSeasonPasses({season_passes:e}){this.user.favorites||(this.user.favorites={}),this.user.favorites.seasonPasses=e},saveUserFavoritesTrailMaps({locations:e,trail_maps:t}){this.user.favorites||(this.user.favorites={}),this.user.favorites.trailMaps={locations:e,trail_maps:t}}},getters:{getActiveList(){if(_s().isGuest)return null;const{list_id:t}=this?.user||{};return this?.user?.lists?.find(({id:n})=>n===t)},getFavoriteListsForCam:e=>t=>cw(e,"cam_ids",t?.id),getFavoriteListsForDailyRead:e=>t=>cw(e,"daily_read_ids",t?.id),getFavoriteListsForLocation:e=>t=>cw(e,"location_ids",t?.id),getFavoriteListsForSeasonPass:e=>t=>cw(e,"season_pass_ids",t?.id),getFavoriteListsForTrailMap:e=>t=>cw(e,"trail_map_ids",t?.id),getLists(){return this?.user?.lists},getLocationIdsForActiveList(){const{id:e}=this.getActiveList||{};return this.user?.favoriteIds?.lists?.find(({list_id:n})=>n===e)?.location_ids??[]},getLocationTypeIdsForActiveList(){const{id:e}=this.getActiveList||{};return this.user?.favoriteIds?.lists?.find(({list_id:n})=>n===e)?.location_type_ids??[]},getSummerLists(){const t=LS().favorite_list_types.find(({name:r})=>r==="Summer"),n=this.getLists?.find(({list_type_id:r})=>r===t.id);return this?.user?.favoriteIds?.lists?.find(({list_id:r})=>r===n?.id)},isFavoriteCam:e=>({camId:t})=>{const{cam_ids:n}=e?.user?.favoriteIds?.favorites||{};return n?n.includes(t):!1},isFavoriteLocation:e=>({locationId:t})=>{const{location_ids:n}=e?.user?.favoriteIds?.favorites||{};return n?n.includes(t):!1},isFavoriteSummerLocation:e=>({locationId:t})=>{const{location_ids:n}=e.getSummerLists||{};return n?n.includes(t):!1},isFavoriteSeasonPass:e=>({seasonPassId:t})=>{const{season_pass_ids:n}=e?.user?.favoriteIds?.favorites||{};return n?n.includes(t):!1},isFavoriteTrailMap:e=>({trailMapId:t})=>{const{trail_map_ids:n}=e?.user?.favoriteIds?.favorites||{};return n?n.includes(t):!1},isFavoriteDailyRead:e=>({dailyReadId:t})=>{const{daily_read_ids:n}=e?.user?.favoriteIds?.favorites||{};return n?n.includes(t):!1}}}),XRe=Jm("userNotifications",{state:()=>({alertAreas:null,dailyReads:null,locations:null,newsletters:null}),actions:{async fetchAlertAreas(){const{$api:e}=Wn(),t=_s(),{cache_key:n}=t.user||{},{units:r}=t.preferences,{alert_areas:s,locations:o}=await e.get("/user/notifications/alert-areas",{cache_key:n,units:r});this.saveAlertAreas({alert_areas:s,locations:o})},async fetchAlertAreasHistory(e={}){const{limit:t=20,skip:n=0}=e,{$api:r}=Wn(),s=_s(),{cache_key:o}=s.user||{},{units:c}=s.preferences;return r.get("/user/notifications/alert-areas/history",{cache_key:o,limit:t,skip:n,units:c})},async fetchDailyReads(){const{$api:e}=Wn(),t=_s(),{cache_key:n}=t.user||{},{daily_reads:r}=await e.get("/user/notifications/daily-reads",{cache_key:n});this.saveDailyReads(r)},async fetchNewsletters(){const{$api:e}=Wn(),t=_s(),{cache_key:n}=t.user||{},r=await e.get("/user/notifications/newsletters",{cache_key:n});this.saveNewsletters(r)},async optInToReceiveNewsletters(){const{$api:e}=Wn(),t=await e.post("/user/notifications/newsletters/external-opt-in");this.saveNewsletters(t)},async removeAlertArea(e){const{$api:t}=Wn(),{alert_areas:n,locations:r}=await t.delete(`/user/notifications/alert-areas/${e}`);this.saveAlertAreas({alert_areas:n,locations:r})},saveAlertAreas({alert_areas:e,locations:t}){this.alertAreas=e,this.locations=t},saveDailyReads(e){this.dailyReads=e},saveNewsletters(e){this.newsletters=e},async subscribeToDailyRead(e){const{$api:t}=Wn(),{daily_reads:n}=await t.put(`/user/notifications/daily-reads/${e}`);this.saveDailyReads(n)},async subscribeToNewsletterSegment(e){const{$api:t}=Wn(),n=await t.post(`/user/notifications/newsletters/subscribe/${e}`);this.saveNewsletters(n)},async unsubscribeToDailyRead(e){const{$api:t}=Wn(),{daily_reads:n}=await t.delete(`/user/notifications/daily-reads/${e}`);this.saveDailyReads(n)},async unsubscribeToNewsletter(e){const{$api:t}=Wn(),n=`/user/notifications/newsletters/unsubscribe${e?`/${e}`:""}`,r=await t.post(n);this.saveNewsletters(r)},async updateAlertArea(e){const{$api:t}=Wn(),n=_s(),{units:r}=n.preferences,{alert_areas:s,locations:o}=await t.put("/user/notifications/alert-areas",{units:r},{alert_area:e});this.saveAlertAreas({alert_areas:s,locations:o})},async updateNotificationsPreferences({marketing:e,notification:t}){const{$api:n}=Wn();await n.post("/user/notifications/preferences",void 0,{marketing:e,notification:t})}},getters:{getAlertAreaByLocationId:e=>t=>e.alertAreas?e.alertAreas.find(n=>n.location_id===t):null,isSubscribedToDailyRead:e=>({dailyReadId:t})=>{const n=e?.dailyReads?.flatMap(r=>r.id)||[];return n?n.includes(t):!1}}}),ZRe=xs(e=>{const{environment:t,openMountainApiKey:n,openMountainApiUrl:r,userApiToken:s}=no().public,o=qRe(),c=XRe(),i=_s(),f=$fetch.create({baseURL:r,async onRequest({request:A,options:C}){const F=r1e();C?.headers?.set&&Object.entries(F).forEach(([j,V])=>C.headers.set(j,V)),s&&t==="local"&&C?.headers?.set("x-opensnow-token",s);const z=i.user?.cache_key;z&&String(A).includes("/user/")&&String(C.method).toUpperCase()==="GET"&&(C.query.cache_key=z)},async onResponse({response:A}){const C=A?._data?.user;if(C){const{cache_key:F}=i.user??{};F!==C.cache_key&&(i.saveUser(C),o.saveUser(C),await e.runWithContext(async()=>await Promise.all([o.fetchActiveList({user:C}),o.fetchUserFavoriteIds({forceUpdate:!0}),c.fetchAlertAreas({user:C})])))}},onResponseError({request:A,options:C,response:F}){}}),g=A=>Object.keys(A).reduce((C,F)=>(A[F]!==void 0&&A[F]!==null&&(C[F]=A[F]),C),{}),x=(A={})=>g({v:1,api_key:n,...A});return{provide:{api:{delete(A,C={},F={},z={}){return f(A,{method:"DELETE",body:F,query:{...x(C)},...z})},get(A,C={},F={}){return f(A,{method:"GET",query:{...x(C)},...F})},async getWithCookie(A,C,F={},z={}){throw new Error("Do not call api.getWithCookie() from the client side!")},post(A,C={},F={},z={}){return f(A,{method:"POST",body:F,query:{...x(C)},...z})},put(A,C={},F={},z={}){return f(A,{method:"PUT",body:F,query:{...x(C)},...z})}}}}});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function JS(e){return e+.5|0}const fm=(e,t,n)=>Math.max(Math.min(e,n),t);function Ow(e){return fm(JS(e*2.55),0,255)}function Cm(e){return fm(JS(e*255),0,255)}function zh(e){return fm(JS(e/2.55)/100,0,1)}function $H(e){return fm(JS(e*100),0,100)}const Vc={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},JL=[..."0123456789ABCDEF"],KRe=e=>JL[e&15],JRe=e=>JL[(e&240)>>4]+JL[e&15],HM=e=>(e&240)>>4===(e&15),QRe=e=>HM(e.r)&&HM(e.g)&&HM(e.b)&&HM(e.a);function eke(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Vc[e[1]]*17,g:255&Vc[e[2]]*17,b:255&Vc[e[3]]*17,a:t===5?Vc[e[4]]*17:255}:(t===7||t===9)&&(n={r:Vc[e[1]]<<4|Vc[e[2]],g:Vc[e[3]]<<4|Vc[e[4]],b:Vc[e[5]]<<4|Vc[e[6]],a:t===9?Vc[e[7]]<<4|Vc[e[8]]:255})),n}const tke=(e,t)=>e<255?t(e):"";function nke(e){var t=QRe(e)?KRe:JRe;return e?"#"+t(e.r)+t(e.g)+t(e.b)+tke(e.a,t):void 0}const rke=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Rre(e,t,n){const r=t*Math.min(n,1-n),s=(o,c=(o+e/30)%12)=>n-r*Math.max(Math.min(c-3,9-c,1),-1);return[s(0),s(8),s(4)]}function ike(e,t,n){const r=(s,o=(s+e/60)%6)=>n-n*t*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function ske(e,t,n){const r=Rre(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function oke(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}function AF(e){const n=e.r/255,r=e.g/255,s=e.b/255,o=Math.max(n,r,s),c=Math.min(n,r,s),i=(o+c)/2;let f,g,x;return o!==c&&(x=o-c,g=i>.5?x/(2-o-c):x/(o+c),f=oke(n,r,s,x,o),f=f*60+.5),[f|0,g||0,i]}function CF(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Cm)}function IF(e,t,n){return CF(Rre,e,t,n)}function ake(e,t,n){return CF(ske,e,t,n)}function lke(e,t,n){return CF(ike,e,t,n)}function kre(e){return(e%360+360)%360}function cke(e){const t=rke.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?Ow(+t[5]):Cm(+t[5]));const s=kre(+t[2]),o=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?r=ake(s,o,c):t[1]==="hsv"?r=lke(s,o,c):r=IF(s,o,c),{r:r[0],g:r[1],b:r[2],a:n}}function uke(e,t){var n=AF(e);n[0]=kre(n[0]+t),n=IF(n),e.r=n[0],e.g=n[1],e.b=n[2]}function dke(e){if(!e)return;const t=AF(e),n=t[0],r=$H(t[1]),s=$H(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${zh(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const VH={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},jH={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function hke(){const e={},t=Object.keys(jH),n=Object.keys(VH);let r,s,o,c,i;for(r=0;r<t.length;r++){for(c=i=t[r],s=0;s<n.length;s++)o=n[s],i=i.replace(o,VH[o]);o=parseInt(jH[c],16),e[i]=[o>>16&255,o>>8&255,o&255]}return e}let WM;function fke(e){WM||(WM=hke(),WM.transparent=[0,0,0,0]);const t=WM[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const pke=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function mke(e){const t=pke.exec(e);let n=255,r,s,o;if(t){if(t[7]!==r){const c=+t[7];n=t[8]?Ow(c):fm(c*255,0,255)}return r=+t[1],s=+t[3],o=+t[5],r=255&(t[2]?Ow(r):fm(r,0,255)),s=255&(t[4]?Ow(s):fm(s,0,255)),o=255&(t[6]?Ow(o):fm(o,0,255)),{r,g:s,b:o,a:n}}}function gke(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${zh(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const mR=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Yv=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function _ke(e,t,n){const r=Yv(zh(e.r)),s=Yv(zh(e.g)),o=Yv(zh(e.b));return{r:Cm(mR(r+n*(Yv(zh(t.r))-r))),g:Cm(mR(s+n*(Yv(zh(t.g))-s))),b:Cm(mR(o+n*(Yv(zh(t.b))-o))),a:e.a+n*(t.a-e.a)}}function GM(e,t,n){if(e){let r=AF(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=IF(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function Lre(e,t){return e&&Object.assign(t||{},e)}function UH(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Cm(e[3]))):(t=Lre(e,{r:0,g:0,b:0,a:1}),t.a=Cm(t.a)),t}function yke(e){return e.charAt(0)==="r"?mke(e):cke(e)}class iS{constructor(t){if(t instanceof iS)return t;const n=typeof t;let r;n==="object"?r=UH(t):n==="string"&&(r=eke(t)||fke(t)||yke(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=Lre(this._rgb);return t&&(t.a=zh(t.a)),t}set rgb(t){this._rgb=UH(t)}rgbString(){return this._valid?gke(this._rgb):void 0}hexString(){return this._valid?nke(this._rgb):void 0}hslString(){return this._valid?dke(this._rgb):void 0}mix(t,n){if(t){const r=this.rgb,s=t.rgb;let o;const c=n===o?.5:n,i=2*c-1,f=r.a-s.a,g=((i*f===-1?i:(i+f)/(1+i*f))+1)/2;o=1-g,r.r=255&g*r.r+o*s.r+.5,r.g=255&g*r.g+o*s.g+.5,r.b=255&g*r.b+o*s.b+.5,r.a=c*r.a+(1-c)*s.a,this.rgb=r}return this}interpolate(t,n){return t&&(this._rgb=_ke(this._rgb,t._rgb,n)),this}clone(){return new iS(this.rgb)}alpha(t){return this._rgb.a=Cm(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=JS(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return GM(this._rgb,2,t),this}darken(t){return GM(this._rgb,2,-t),this}saturate(t){return GM(this._rgb,1,t),this}desaturate(t){return GM(this._rgb,1,-t),this}rotate(t){return uke(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Pd(){}const Nre=(()=>{let e=0;return()=>e++})();function Ri(e){return e==null}function rs(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function di(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Jo(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Lu(e,t){return Jo(e)?e:t}function ai(e,t){return typeof e>"u"?t:e}const Fre=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,PF=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ji(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Qi(e,t,n,r){let s,o,c;if(rs(e))if(o=e.length,r)for(s=o-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<o;s++)t.call(n,e[s],s);else if(di(e))for(c=Object.keys(e),o=c.length,s=0;s<o;s++)t.call(n,e[c[s]],c[s])}function sS(e,t){let n,r,s,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],o=t[n],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function oS(e){if(rs(e))return e.map(oS);if(di(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=oS(e[n[s]]);return t}return e}function zre(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function Bre(e,t,n,r){if(!zre(e))return;const s=t[e],o=n[e];di(s)&&di(o)?od(s,o,r):t[e]=oS(o)}function od(e,t,n){const r=rs(t)?t:[t],s=r.length;if(!di(e))return e;n=n||{};const o=n.merger||Bre;let c;for(let i=0;i<s;++i){if(c=r[i],!di(c))continue;const f=Object.keys(c);for(let g=0,x=f.length;g<x;++g)o(f[g],e,c,n)}return e}function C0(e,t){return od(e,t,{merger:$re})}function $re(e,t,n){if(!zre(e))return;const r=t[e],s=n[e];di(r)&&di(s)?C0(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=oS(s))}function vke(e,t,n,r){t!==void 0&&console.warn(e+': "'+n+'" is deprecated. Please use "'+r+'" instead')}const HH={"":e=>e,x:e=>e.x,y:e=>e.y};function Vre(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function bke(e){const t=Vre(e);return n=>{for(const r of t){if(r==="")break;n=n&&n[r]}return n}}function _f(e,t){return(HH[t]||(HH[t]=bke(t)))(e)}function yP(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Il=e=>typeof e<"u",Ml=e=>typeof e=="function",QL=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function jre(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Hi=Math.PI,Cs=2*Hi,Ure=Cs+Hi,aS=Number.POSITIVE_INFINITY,vP=Hi/180,Ws=Hi/2,xc=Hi/4,lS=Hi*2/3,OF=Math.log10,td=Math.sign;function I0(e,t,n){return Math.abs(e-t)<n}function e5(e){const t=Math.round(e);e=I0(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(OF(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Hre(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((s,o)=>s-o).pop(),t}function xke(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Bm(e){return!xke(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Wre(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function Gre(e,t,n){let r,s,o;for(r=0,s=e.length;r<s;r++)o=e[r][n],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Zo(e){return e*(Hi/180)}function DF(e){return e*(180/Hi)}function t5(e){if(!Jo(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function cS(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*Hi&&(o+=Cs),{angle:o,distance:s}}function ty(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Yre(e,t){return(e-t+Ure)%Cs-Hi}function $u(e){return(e%Cs+Cs)%Cs}function a1(e,t,n,r){const s=$u(e),o=$u(t),c=$u(n),i=$u(o-s),f=$u(c-s),g=$u(s-o),x=$u(s-c);return s===o||s===c||r&&o===c||i>f&&g<x}function Ea(e,t,n){return Math.max(t,Math.min(n,e))}function qre(e){return Ea(e,-32768,32767)}function $d(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function bP(e,t,n){n=n||(c=>e[c]<t);let r=e.length-1,s=0,o;for(;r-s>1;)o=s+r>>1,n(o)?s=o:r=o;return{lo:s,hi:r}}const pm=(e,t,n,r)=>bP(e,n,r?s=>{const o=e[s][t];return o<n||o===n&&e[s+1][t]===n}:s=>e[s][t]<n),Xre=(e,t,n)=>bP(e,n,r=>e[r][t]>=n);function Zre(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}const Kre=["push","pop","shift","splice","unshift"];function Jre(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Kre.forEach(n=>{const r="_onData"+yP(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...o){const c=s.apply(this,o);return e._chartjs.listeners.forEach(i=>{typeof i[r]=="function"&&i[r](...o)}),c}})})}function n5(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);s!==-1&&r.splice(s,1),!(r.length>0)&&(Kre.forEach(o=>{delete e[o]}),delete e._chartjs)}function RF(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}function wke(e,t,n){return t+" "+e+"px "+n}const kF=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function LF(e,t){let n=[],r=!1;return function(...s){n=s,r||(r=!0,kF.call(window,()=>{r=!1,e.apply(t,n)}))}}function Qre(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const xP=e=>e==="start"?"left":e==="end"?"right":"center",ba=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,eie=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t;function tie(e,t,n){const r=t.length;let s=0,o=r;if(e._sorted){const{iScale:c,vScale:i,_parsed:f}=e,g=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,x=c.axis,{min:w,max:A,minDefined:C,maxDefined:F}=c.getUserBounds();if(C){if(s=Math.min(pm(f,x,w).lo,n?r:pm(t,x,c.getPixelForValue(w)).lo),g){const z=f.slice(0,s+1).reverse().findIndex(j=>!Ri(j[i.axis]));s-=Math.max(0,z)}s=Ea(s,0,r-1)}if(F){let z=Math.max(pm(f,c.axis,A,!0).hi+1,n?0:pm(t,x,c.getPixelForValue(A),!0).hi+1);if(g){const j=f.slice(z-1).findIndex(V=>!Ri(V[i.axis]));z+=Math.max(0,j)}o=Ea(z,s,r)-s}else o=r-s}return{start:s,count:o}}function nie(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const o=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),o}const YM=e=>e===0||e===1,WH=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Cs/n)),GH=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Cs/n)+1,P0={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Ws)+1,easeOutSine:e=>Math.sin(e*Ws),easeInOutSine:e=>-.5*(Math.cos(Hi*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>YM(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>YM(e)?e:WH(e,.075,.3),easeOutElastic:e=>YM(e)?e:GH(e,.075,.3),easeInOutElastic(e){return YM(e)?e:e<.5?.5*WH(e*2,.1125,.45):.5+.5*GH(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-P0.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?P0.easeInBounce(e*2)*.5:P0.easeOutBounce(e*2-1)*.5+.5};function wP(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function r5(e){return wP(e)?e:new iS(e)}function hC(e){return wP(e)?e:new iS(e).saturate(.5).darken(.1).hexString()}const Ske=["x","y","borderWidth","radius","tension"],Eke=["color","borderColor","backgroundColor"];function Tke(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Eke},numbers:{type:"number",properties:Ske}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Mke(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const YH=new Map;function Ake(e,t){t=t||{};const n=e+JSON.stringify(t);let r=YH.get(n);return r||(r=new Intl.NumberFormat(e,t),YH.set(n,r)),r}function SP(e,t,n){return Ake(t,n).format(e)}const Cke={values(e){return rs(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let s,o=e;if(n.length>1){const g=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(g<1e-4||g>1e15)&&(s="scientific"),o=Ike(e,n)}const c=OF(Math.abs(o)),i=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),f={notation:s,minimumFractionDigits:i,maximumFractionDigits:i};return Object.assign(f,this.options.ticks.format),SP(e,r,f)}};function Ike(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var rie={formatters:Cke};function Pke(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rie.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ny=Object.create(null),i5=Object.create(null);function f2(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const o=n[r];e=e[o]||(e[o]=Object.create(null))}return e}function gR(e,t,n){return typeof t=="string"?od(f2(e,t),n):od(f2(e,""),t)}class Oke{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>hC(s.backgroundColor),this.hoverBorderColor=(r,s)=>hC(s.borderColor),this.hoverColor=(r,s)=>hC(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return gR(this,t,n)}get(t){return f2(this,t)}describe(t,n){return gR(i5,t,n)}override(t,n){return gR(ny,t,n)}route(t,n,r,s){const o=f2(this,t),c=f2(this,r),i="_"+n;Object.defineProperties(o,{[i]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const f=this[i],g=c[s];return di(f)?Object.assign({},g,f):ai(f,g)},set(f){this[i]=f}}})}apply(t){t.forEach(n=>n(this))}}var to=new Oke({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Tke,Mke,Pke]);function iie(e){return!e||Ri(e.size)||Ri(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function uS(e,t,n,r,s){let o=t[s];return o||(o=t[s]=e.measureText(s).width,n.push(s)),o>r&&(r=o),r}function Dke(e,t,n,r){r=r||{};let s=r.data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(s=r.data={},o=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let c=0;const i=n.length;let f,g,x,w,A;for(f=0;f<i;f++)if(w=n[f],w!=null&&!rs(w))c=uS(e,s,o,c,w);else if(rs(w))for(g=0,x=w.length;g<x;g++)A=w[g],A!=null&&!rs(A)&&(c=uS(e,s,o,c,A));e.restore();const C=o.length/2;if(C>n.length){for(f=0;f<C;f++)delete s[o[f]];o.splice(0,C)}return c}function Vp(e,t,n){const r=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function s5(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function LI(e,t,n,r){NF(e,t,n,r,null)}function NF(e,t,n,r,s){let o,c,i,f,g,x,w,A;const C=t.pointStyle,F=t.rotation,z=t.radius;let j=(F||0)*vP;if(C&&typeof C=="object"&&(o=C.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(j),e.drawImage(C,-C.width/2,-C.height/2,C.width,C.height),e.restore();return}if(!(isNaN(z)||z<=0)){switch(e.beginPath(),C){default:s?e.ellipse(n,r,s/2,z,0,0,Cs):e.arc(n,r,z,0,Cs),e.closePath();break;case"triangle":x=s?s/2:z,e.moveTo(n+Math.sin(j)*x,r-Math.cos(j)*z),j+=lS,e.lineTo(n+Math.sin(j)*x,r-Math.cos(j)*z),j+=lS,e.lineTo(n+Math.sin(j)*x,r-Math.cos(j)*z),e.closePath();break;case"rectRounded":g=z*.516,f=z-g,c=Math.cos(j+xc)*f,w=Math.cos(j+xc)*(s?s/2-g:f),i=Math.sin(j+xc)*f,A=Math.sin(j+xc)*(s?s/2-g:f),e.arc(n-w,r-i,g,j-Hi,j-Ws),e.arc(n+A,r-c,g,j-Ws,j),e.arc(n+w,r+i,g,j,j+Ws),e.arc(n-A,r+c,g,j+Ws,j+Hi),e.closePath();break;case"rect":if(!F){f=Math.SQRT1_2*z,x=s?s/2:f,e.rect(n-x,r-f,2*x,2*f);break}j+=xc;case"rectRot":w=Math.cos(j)*(s?s/2:z),c=Math.cos(j)*z,i=Math.sin(j)*z,A=Math.sin(j)*(s?s/2:z),e.moveTo(n-w,r-i),e.lineTo(n+A,r-c),e.lineTo(n+w,r+i),e.lineTo(n-A,r+c),e.closePath();break;case"crossRot":j+=xc;case"cross":w=Math.cos(j)*(s?s/2:z),c=Math.cos(j)*z,i=Math.sin(j)*z,A=Math.sin(j)*(s?s/2:z),e.moveTo(n-w,r-i),e.lineTo(n+w,r+i),e.moveTo(n+A,r-c),e.lineTo(n-A,r+c);break;case"star":w=Math.cos(j)*(s?s/2:z),c=Math.cos(j)*z,i=Math.sin(j)*z,A=Math.sin(j)*(s?s/2:z),e.moveTo(n-w,r-i),e.lineTo(n+w,r+i),e.moveTo(n+A,r-c),e.lineTo(n-A,r+c),j+=xc,w=Math.cos(j)*(s?s/2:z),c=Math.cos(j)*z,i=Math.sin(j)*z,A=Math.sin(j)*(s?s/2:z),e.moveTo(n-w,r-i),e.lineTo(n+w,r+i),e.moveTo(n+A,r-c),e.lineTo(n-A,r+c);break;case"line":c=s?s/2:Math.cos(j)*z,i=Math.sin(j)*z,e.moveTo(n-c,r-i),e.lineTo(n+c,r+i);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(j)*(s?s/2:z),r+Math.sin(j)*z);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function l1(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function F1(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function z1(e){e.restore()}function sie(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const o=(t.x+n.x)/2;e.lineTo(o,t.y),e.lineTo(o,n.y)}else s==="after"!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function oie(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Rke(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ri(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function kke(e,t,n,r,s){if(s.strikethrough||s.underline){const o=e.measureText(r),c=t-o.actualBoundingBoxLeft,i=t+o.actualBoundingBoxRight,f=n-o.actualBoundingBoxAscent,g=n+o.actualBoundingBoxDescent,x=s.strikethrough?(f+g)/2:g;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(c,x),e.lineTo(i,x),e.stroke()}}function Lke(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function c1(e,t,n,r,s,o={}){const c=rs(t)?t:[t],i=o.strokeWidth>0&&o.strokeColor!=="";let f,g;for(e.save(),e.font=s.string,Rke(e,o),f=0;f<c.length;++f)g=c[f],o.backdrop&&Lke(e,o.backdrop),i&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),Ri(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(g,n,r,o.maxWidth)),e.fillText(g,n,r,o.maxWidth),kke(e,n,r,g,o),r+=Number(s.lineHeight);e.restore()}function u1(e,t){const{x:n,y:r,w:s,h:o,radius:c}=t;e.arc(n+c.topLeft,r+c.topLeft,c.topLeft,1.5*Hi,Hi,!0),e.lineTo(n,r+o-c.bottomLeft),e.arc(n+c.bottomLeft,r+o-c.bottomLeft,c.bottomLeft,Hi,Ws,!0),e.lineTo(n+s-c.bottomRight,r+o),e.arc(n+s-c.bottomRight,r+o-c.bottomRight,c.bottomRight,Ws,0,!0),e.lineTo(n+s,r+c.topRight),e.arc(n+s-c.topRight,r+c.topRight,c.topRight,0,-Ws,!0),e.lineTo(n+c.topLeft,r)}const Nke=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Fke=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function aie(e,t){const n=(""+e).match(Nke);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const zke=e=>+e||0;function EP(e,t){const n={},r=di(t),s=r?Object.keys(t):t,o=di(e)?r?c=>ai(e[c],e[t[c]]):c=>e[c]:()=>e;for(const c of s)n[c]=zke(o(c));return n}function FF(e){return EP(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Im(e){return EP(e,["topLeft","topRight","bottomLeft","bottomRight"])}function la(e){const t=FF(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Mo(e,t){e=e||{},t=t||to.font;let n=ai(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=ai(e.style,t.style);r&&!(""+r).match(Fke)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ai(e.family,t.family),lineHeight:aie(ai(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:ai(e.weight,t.weight),string:""};return s.string=iie(s),s}function Rs(e,t,n,r){let s=!0,o,c,i;for(o=0,c=e.length;o<c;++o)if(i=e[o],i!==void 0&&(t!==void 0&&typeof i=="function"&&(i=i(t),s=!1),n!==void 0&&rs(i)&&(i=i[n%i.length],s=!1),i!==void 0))return r&&!s&&(r.cacheable=!1),i}function lie(e,t,n){const{min:r,max:s}=e,o=PF(t,(s-r)/2),c=(i,f)=>n&&i===0?0:i+f;return{min:c(r,-Math.abs(o)),max:c(s,o)}}function sg(e,t){return Object.assign(Object.create(e),t)}function TP(e,t=[""],n,r,s=()=>e[0]){const o=n||e;typeof r>"u"&&(r=die("_fallback",e));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:r,_getTarget:s,override:i=>TP([i,...e],t,o,r)};return new Proxy(c,{deleteProperty(i,f){return delete i[f],delete i._keys,delete e[0][f],!0},get(i,f){return cie(i,f,()=>Gke(f,t,e,i))},getOwnPropertyDescriptor(i,f){return Reflect.getOwnPropertyDescriptor(i._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(i,f){return XH(i).includes(f)},ownKeys(i){return XH(i)},set(i,f,g){const x=i._storage||(i._storage=s());return i[f]=x[f]=g,delete i._keys,!0}})}function ry(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:zF(e,r),setContext:o=>ry(e,o,n,r),override:o=>ry(e.override(o),t,n,r)};return new Proxy(s,{deleteProperty(o,c){return delete o[c],delete e[c],!0},get(o,c,i){return cie(o,c,()=>$ke(o,c,i))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(e,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,c)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,c){return Reflect.has(e,c)},ownKeys(){return Reflect.ownKeys(e)},set(o,c,i){return e[c]=i,delete o[c],!0}})}function zF(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Ml(n)?n:()=>n,isIndexable:Ml(r)?r:()=>r}}const Bke=(e,t)=>e?e+yP(t):t,BF=(e,t)=>di(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function cie(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const r=n();return e[t]=r,r}function $ke(e,t,n){const{_proxy:r,_context:s,_subProxy:o,_descriptors:c}=e;let i=r[t];return Ml(i)&&c.isScriptable(t)&&(i=Vke(t,i,e,n)),rs(i)&&i.length&&(i=jke(t,i,e,c.isIndexable)),BF(t,i)&&(i=ry(i,s,o&&o[t],c)),i}function Vke(e,t,n,r){const{_proxy:s,_context:o,_subProxy:c,_stack:i}=n;if(i.has(e))throw new Error("Recursion detected: "+Array.from(i).join("->")+"->"+e);i.add(e);let f=t(o,c||r);return i.delete(e),BF(e,f)&&(f=$F(s._scopes,s,e,f)),f}function jke(e,t,n,r){const{_proxy:s,_context:o,_subProxy:c,_descriptors:i}=n;if(typeof o.index<"u"&&r(e))return t[o.index%t.length];if(di(t[0])){const f=t,g=s._scopes.filter(x=>x!==f);t=[];for(const x of f){const w=$F(g,s,e,x);t.push(ry(w,o,c&&c[e],i))}}return t}function uie(e,t,n){return Ml(e)?e(t,n):e}const Uke=(e,t)=>e===!0?t:typeof e=="string"?_f(t,e):void 0;function Hke(e,t,n,r,s){for(const o of t){const c=Uke(n,o);if(c){e.add(c);const i=uie(c._fallback,n,s);if(typeof i<"u"&&i!==n&&i!==r)return i}else if(c===!1&&typeof r<"u"&&n!==r)return null}return!1}function $F(e,t,n,r){const s=t._rootScopes,o=uie(t._fallback,n,r),c=[...e,...s],i=new Set;i.add(r);let f=qH(i,c,n,o||n,r);return f===null||typeof o<"u"&&o!==n&&(f=qH(i,c,o,f,r),f===null)?!1:TP(Array.from(i),[""],s,o,()=>Wke(t,n,r))}function qH(e,t,n,r,s){for(;n;)n=Hke(e,t,n,r,s);return n}function Wke(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];return rs(s)&&di(n)?n:s||{}}function Gke(e,t,n,r){let s;for(const o of t)if(s=die(Bke(o,e),n),typeof s<"u")return BF(e,s)?$F(n,r,e,s):s}function die(e,t){for(const n of t){if(!n)continue;const r=n[e];if(typeof r<"u")return r}}function XH(e){let t=e._keys;return t||(t=e._keys=Yke(e._scopes)),t}function Yke(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(r);return Array.from(t)}function qke(e,t,n,r){const{iScale:s}=e,{key:o="r"}=this._parsing,c=new Array(r);let i,f,g,x;for(i=0,f=r;i<f;++i)g=i+n,x=t[g],c[i]={r:s.parse(_f(x,o),g)};return c}const Xke=Number.EPSILON||1e-14,d1=(e,t)=>t<e.length&&!e[t].skip&&e[t],hie=e=>e==="x"?"y":"x";function fie(e,t,n,r){const s=e.skip?t:e,o=t,c=n.skip?t:n,i=ty(o,s),f=ty(c,o);let g=i/(i+f),x=f/(i+f);g=isNaN(g)?0:g,x=isNaN(x)?0:x;const w=r*g,A=r*x;return{previous:{x:o.x-w*(c.x-s.x),y:o.y-w*(c.y-s.y)},next:{x:o.x+A*(c.x-s.x),y:o.y+A*(c.y-s.y)}}}function Zke(e,t,n){const r=e.length;let s,o,c,i,f,g=d1(e,0);for(let x=0;x<r-1;++x)if(f=g,g=d1(e,x+1),!(!f||!g)){if(I0(t[x],0,Xke)){n[x]=n[x+1]=0;continue}s=n[x]/t[x],o=n[x+1]/t[x],i=Math.pow(s,2)+Math.pow(o,2),!(i<=9)&&(c=3/Math.sqrt(i),n[x]=s*c*t[x],n[x+1]=o*c*t[x])}}function Kke(e,t,n="x"){const r=hie(n),s=e.length;let o,c,i,f=d1(e,0);for(let g=0;g<s;++g){if(c=i,i=f,f=d1(e,g+1),!i)continue;const x=i[n],w=i[r];c&&(o=(x-c[n])/3,i[`cp1${n}`]=x-o,i[`cp1${r}`]=w-o*t[g]),f&&(o=(f[n]-x)/3,i[`cp2${n}`]=x+o,i[`cp2${r}`]=w+o*t[g])}}function pie(e,t="x"){const n=hie(t),r=e.length,s=Array(r).fill(0),o=Array(r);let c,i,f,g=d1(e,0);for(c=0;c<r;++c)if(i=f,f=g,g=d1(e,c+1),!!f){if(g){const x=g[t]-f[t];s[c]=x!==0?(g[n]-f[n])/x:0}o[c]=i?g?td(s[c-1])!==td(s[c])?0:(s[c-1]+s[c])/2:s[c-1]:s[c]}Zke(e,s,o),Kke(e,o,t)}function qM(e,t,n){return Math.max(Math.min(e,n),t)}function Jke(e,t){let n,r,s,o,c,i=l1(e[0],t);for(n=0,r=e.length;n<r;++n)c=o,o=i,i=n<r-1&&l1(e[n+1],t),o&&(s=e[n],c&&(s.cp1x=qM(s.cp1x,t.left,t.right),s.cp1y=qM(s.cp1y,t.top,t.bottom)),i&&(s.cp2x=qM(s.cp2x,t.left,t.right),s.cp2y=qM(s.cp2y,t.top,t.bottom)))}function mie(e,t,n,r,s){let o,c,i,f;if(t.spanGaps&&(e=e.filter(g=>!g.skip)),t.cubicInterpolationMode==="monotone")pie(e,s);else{let g=r?e[e.length-1]:e[0];for(o=0,c=e.length;o<c;++o)i=e[o],f=fie(g,i,e[Math.min(o+1,c-(r?0:1))%c],t.tension),i.cp1x=f.previous.x,i.cp1y=f.previous.y,i.cp2x=f.next.x,i.cp2y=f.next.y,g=i}t.capBezierPoints&&Jke(e,n)}function MP(){return typeof window<"u"&&typeof document<"u"}function AP(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function NI(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const CP=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function gie(e,t){return CP(e).getPropertyValue(t)}const Qke=["top","right","bottom","left"];function V_(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const o=Qke[s];r[o]=parseFloat(e[t+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const eLe=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function tLe(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:o}=r;let c=!1,i,f;if(eLe(s,o,e.target))i=s,f=o;else{const g=t.getBoundingClientRect();i=r.clientX-g.left,f=r.clientY-g.top,c=!0}return{x:i,y:f,box:c}}function em(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=CP(n),o=s.boxSizing==="border-box",c=V_(s,"padding"),i=V_(s,"border","width"),{x:f,y:g,box:x}=tLe(e,n),w=c.left+(x&&i.left),A=c.top+(x&&i.top);let{width:C,height:F}=t;return o&&(C-=c.width+i.width,F-=c.height+i.height),{x:Math.round((f-w)/C*n.width/r),y:Math.round((g-A)/F*n.height/r)}}function nLe(e,t,n){let r,s;if(t===void 0||n===void 0){const o=e&&AP(e);if(!o)t=e.clientWidth,n=e.clientHeight;else{const c=o.getBoundingClientRect(),i=CP(o),f=V_(i,"border","width"),g=V_(i,"padding");t=c.width-g.width-f.width,n=c.height-g.height-f.height,r=NI(i.maxWidth,o,"clientWidth"),s=NI(i.maxHeight,o,"clientHeight")}}return{width:t,height:n,maxWidth:r||aS,maxHeight:s||aS}}const XM=e=>Math.round(e*10)/10;function _ie(e,t,n,r){const s=CP(e),o=V_(s,"margin"),c=NI(s.maxWidth,e,"clientWidth")||aS,i=NI(s.maxHeight,e,"clientHeight")||aS,f=nLe(e,t,n);let{width:g,height:x}=f;if(s.boxSizing==="content-box"){const A=V_(s,"border","width"),C=V_(s,"padding");g-=C.width+A.width,x-=C.height+A.height}return g=Math.max(0,g-o.width),x=Math.max(0,r?g/r:x-o.height),g=XM(Math.min(g,c,f.maxWidth)),x=XM(Math.min(x,i,f.maxHeight)),g&&!x&&(x=XM(g/2)),(t!==void 0||n!==void 0)&&r&&f.height&&x>f.height&&(x=f.height,g=XM(Math.floor(x*r))),{width:g,height:x}}function o5(e,t,n){const r=t||1,s=Math.floor(e.height*r),o=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const c=e.canvas;return c.style&&(n||!c.style.height&&!c.style.width)&&(c.style.height=`${e.height}px`,c.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||c.height!==s||c.width!==o?(e.currentDevicePixelRatio=r,c.height=s,c.width=o,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const yie=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};MP()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function a5(e,t){const n=gie(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function tm(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function vie(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:r==="middle"?n<.5?e.y:t.y:r==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function bie(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},c=tm(e,s,n),i=tm(s,o,n),f=tm(o,t,n),g=tm(c,i,n),x=tm(i,f,n);return tm(g,x,n)}const rLe=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},iLe=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function j_(e,t,n){return e?rLe(t,n):iLe()}function VF(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function jF(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function xie(e){return e==="angle"?{between:a1,compare:Yre,normalize:$u}:{between:$d,compare:(t,n)=>t-n,normalize:t=>t}}function ZH({start:e,end:t,count:n,loop:r,style:s}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n===0,style:s}}function sLe(e,t,n){const{property:r,start:s,end:o}=n,{between:c,normalize:i}=xie(r),f=t.length;let{start:g,end:x,loop:w}=e,A,C;if(w){for(g+=f,x+=f,A=0,C=f;A<C&&c(i(t[g%f][r]),s,o);++A)g--,x--;g%=f,x%=f}return x<g&&(x+=f),{start:g,end:x,loop:w,style:e.style}}function UF(e,t,n){if(!n)return[e];const{property:r,start:s,end:o}=n,c=t.length,{compare:i,between:f,normalize:g}=xie(r),{start:x,end:w,loop:A,style:C}=sLe(e,t,n),F=[];let z=!1,j=null,V,Y,te;const J=()=>f(s,te,V)&&i(s,te)!==0,ee=()=>i(o,V)===0||f(o,te,V),le=()=>z||J(),oe=()=>!z||ee();for(let ve=x,se=x;ve<=w;++ve)Y=t[ve%c],!Y.skip&&(V=g(Y[r]),V!==te&&(z=f(V,s,o),j===null&&le()&&(j=i(V,s)===0?ve:se),j!==null&&oe()&&(F.push(ZH({start:j,end:ve,loop:A,count:c,style:C})),j=null),se=ve,te=V));return j!==null&&F.push(ZH({start:j,end:w,loop:A,count:c,style:C})),F}function HF(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const o=UF(r[s],e.points,t);o.length&&n.push(...o)}return n}function oLe(e,t,n,r){let s=0,o=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(o+=s);o>s&&e[o%t].skip;)o--;return o%=t,{start:s,end:o}}function aLe(e,t,n,r){const s=e.length,o=[];let c=t,i=e[t],f;for(f=t+1;f<=n;++f){const g=e[f%s];g.skip||g.stop?i.skip||(r=!1,o.push({start:t%s,end:(f-1)%s,loop:r}),t=c=g.stop?f:null):(c=f,i.skip&&(t=f)),i=g}return c!==null&&o.push({start:t%s,end:c%s,loop:r}),o}function wie(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const o=!!e._loop,{start:c,end:i}=oLe(n,s,o,r);if(r===!0)return KH(e,[{start:c,end:i,loop:o}],n,t);const f=i<c?i+s:i,g=!!e._fullLoop&&c===0&&i===s-1;return KH(e,aLe(n,c,f,g),n,t)}function KH(e,t,n,r){return!r||!r.setContext||!n?t:lLe(e,t,n,r)}function lLe(e,t,n,r){const s=e._chart.getContext(),o=JH(e.options),{_datasetIndex:c,options:{spanGaps:i}}=e,f=n.length,g=[];let x=o,w=t[0].start,A=w;function C(F,z,j,V){const Y=i?-1:1;if(F!==z){for(F+=f;n[F%f].skip;)F-=Y;for(;n[z%f].skip;)z+=Y;F%f!==z%f&&(g.push({start:F%f,end:z%f,loop:j,style:V}),x=V,w=z%f)}}for(const F of t){w=i?w:F.start;let z=n[w%f],j;for(A=w+1;A<=F.end;A++){const V=n[A%f];j=JH(r.setContext(sg(s,{type:"segment",p0:z,p1:V,p0DataIndex:(A-1)%f,p1DataIndex:A%f,datasetIndex:c}))),cLe(j,x)&&C(w,A-1,F.loop,x),z=V,x=j}w<A-1&&C(w,A-1,F.loop,x)}return g}function JH(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function cLe(e,t){if(!t)return!1;const n=[],r=function(s,o){return wP(o)?(n.includes(o)||n.push(o),n.indexOf(o)):o};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function ZM(e,t,n){return e.options.clip?e[n]:t[n]}function uLe(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:ZM(n,t,"left"),right:ZM(n,t,"right"),top:ZM(r,t,"top"),bottom:ZM(r,t,"bottom")}:t}function WF(e,t){const n=t._clip;if(n.disabled)return!1;const r=uLe(t,e.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class dLe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,s){const o=n.listeners[s],c=n.duration;o.forEach(i=>i({chart:t,initial:n.initial,numSteps:c,currentStep:Math.min(r-n.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=kF.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const o=r.items;let c=o.length-1,i=!1,f;for(;c>=0;--c)f=o[c],f._active?(f._total>r.duration&&(r.duration=f._total),f.tick(t),i=!0):(o[c]=o[o.length-1],o.pop());i&&(s.draw(),this._notify(s,r,t,"progress")),o.length||(r.running=!1,this._notify(s,r,t,"complete"),r.initial=!1),n+=o.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ih=new dLe;const QH="transparent",hLe={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=r5(e||QH),s=r.valid&&r5(t||QH);return s&&s.valid?s.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class fLe{constructor(t,n,r,s){const o=n[r];s=Rs([t.to,s,o,t.from]);const c=Rs([t.from,o,s]);this._active=!0,this._fn=t.fn||hLe[t.type||typeof c],this._easing=P0[t.easing]||P0.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=c,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],o=r-this._start,c=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Rs([t.to,n,s,t.from]),this._from=Rs([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,s=this._prop,o=this._from,c=this._loop,i=this._to;let f;if(this._active=o!==i&&(c||n<r),!this._active){this._target[s]=i,this._notify(!0);return}if(n<0){this._target[s]=o;return}f=n/r%2,f=c&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[s]=this._fn(o,i,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class GF{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!di(t))return;const n=Object.keys(to.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!di(o))return;const c={};for(const i of n)c[i]=o[i];(rs(o.properties)&&o.properties||[s]).forEach(i=>{(i===s||!r.has(i))&&r.set(i,c)})})}_animateOptions(t,n){const r=n.options,s=mLe(t,r);if(!s)return[];const o=this._createAnimations(s,r);return r.$shared&&pLe(t.options.$animations,r).then(()=>{t.options=r},()=>{}),o}_createAnimations(t,n){const r=this._properties,s=[],o=t.$animations||(t.$animations={}),c=Object.keys(n),i=Date.now();let f;for(f=c.length-1;f>=0;--f){const g=c[f];if(g.charAt(0)==="$")continue;if(g==="options"){s.push(...this._animateOptions(t,n));continue}const x=n[g];let w=o[g];const A=r.get(g);if(w)if(A&&w.active()){w.update(A,x,i);continue}else w.cancel();if(!A||!A.duration){t[g]=x;continue}o[g]=w=new fLe(A,t,g,x),s.push(w)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return Ih.add(this._chart,r),!0}}function pLe(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const o=e[r[s]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function mLe(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function eW(e,t){const n=e&&e.options||{},r=n.reverse,s=n.min===void 0?t:0,o=n.max===void 0?t:0;return{start:r?o:s,end:r?s:o}}function gLe(e,t,n){if(n===!1)return!1;const r=eW(e,n),s=eW(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function _Le(e){let t,n,r,s;return di(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:e===!1}}function Sie(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,o;for(s=0,o=r.length;s<o;++s)n.push(r[s].index);return n}function tW(e,t,n,r={}){const s=e.keys,o=r.mode==="single";let c,i,f,g;if(t===null)return;let x=!1;for(c=0,i=s.length;c<i;++c){if(f=+s[c],f===n){if(x=!0,r.all)continue;break}g=e.values[f],Jo(g)&&(o||t===0||td(t)===td(g))&&(t+=g)}return!x&&!r.all?0:t}function yLe(e,t){const{iScale:n,vScale:r}=t,s=n.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",c=Object.keys(e),i=new Array(c.length);let f,g,x;for(f=0,g=c.length;f<g;++f)x=c[f],i[f]={[s]:x,[o]:e[x]};return i}function _R(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function vLe(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function bLe(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function xLe(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function nW(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const o=e[s.index];if(n&&o>0||!n&&o<0)return s.index}return null}function rW(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:o,vScale:c,index:i}=r,f=o.axis,g=c.axis,x=vLe(o,c,r),w=t.length;let A;for(let C=0;C<w;++C){const F=t[C],{[f]:z,[g]:j}=F,V=F._stacks||(F._stacks={});A=V[g]=xLe(s,x,z),A[i]=j,A._top=nW(A,c,!0,r.type),A._bottom=nW(A,c,!1,r.type);const Y=A._visualValues||(A._visualValues={});Y[i]=j}}function yR(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function wLe(e,t){return sg(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function SLe(e,t,n){return sg(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function uw(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const s of t){const o=s._stacks;if(!o||o[r]===void 0||o[r][n]===void 0)return;delete o[r][n],o[r]._visualValues!==void 0&&o[r]._visualValues[n]!==void 0&&delete o[r]._visualValues[n]}}}const vR=e=>e==="reset"||e==="none",iW=(e,t)=>t?e:Object.assign({},e),ELe=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Sie(n,!0),values:null};class IP{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=_R(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&uw(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(w,A,C,F)=>w==="x"?A:w==="r"?F:C,o=n.xAxisID=ai(r.xAxisID,yR(t,"x")),c=n.yAxisID=ai(r.yAxisID,yR(t,"y")),i=n.rAxisID=ai(r.rAxisID,yR(t,"r")),f=n.indexAxis,g=n.iAxisID=s(f,o,c,i),x=n.vAxisID=s(f,c,o,i);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(c),n.rScale=this.getScaleForId(i),n.iScale=this.getScaleForId(g),n.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&n5(this._data,this),t._stacked&&uw(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(di(n)){const s=this._cachedMeta;this._data=yLe(n,s)}else if(r!==n){if(r){n5(r,this);const s=this._cachedMeta;uw(s),s._parsed=[]}n&&Object.isExtensible(n)&&Jre(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=n._stacked;n._stacked=_R(n.vScale,n),n.stack!==r.stack&&(s=!0,uw(n),n.stack=r.stack),this._resyncElements(t),(s||o!==n._stacked)&&(rW(this,n._parsed),n._stacked=_R(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:c}=r,i=o.axis;let f=t===0&&n===s.length?!0:r._sorted,g=t>0&&r._parsed[t-1],x,w,A;if(this._parsing===!1)r._parsed=s,r._sorted=!0,A=s;else{rs(s[t])?A=this.parseArrayData(r,s,t,n):di(s[t])?A=this.parseObjectData(r,s,t,n):A=this.parsePrimitiveData(r,s,t,n);const C=()=>w[i]===null||g&&w[i]<g[i];for(x=0;x<n;++x)r._parsed[x+t]=w=A[x],f&&(C()&&(f=!1),g=w);r._sorted=f}c&&rW(this,A)}parsePrimitiveData(t,n,r,s){const{iScale:o,vScale:c}=t,i=o.axis,f=c.axis,g=o.getLabels(),x=o===c,w=new Array(s);let A,C,F;for(A=0,C=s;A<C;++A)F=A+r,w[A]={[i]:x||o.parse(g[F],F),[f]:c.parse(n[F],F)};return w}parseArrayData(t,n,r,s){const{xScale:o,yScale:c}=t,i=new Array(s);let f,g,x,w;for(f=0,g=s;f<g;++f)x=f+r,w=n[x],i[f]={x:o.parse(w[0],x),y:c.parse(w[1],x)};return i}parseObjectData(t,n,r,s){const{xScale:o,yScale:c}=t,{xAxisKey:i="x",yAxisKey:f="y"}=this._parsing,g=new Array(s);let x,w,A,C;for(x=0,w=s;x<w;++x)A=x+r,C=n[A],g[x]={x:o.parse(_f(C,i),A),y:c.parse(_f(C,f),A)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const s=this.chart,o=this._cachedMeta,c=n[t.axis],i={keys:Sie(s,!0),values:n._stacks[t.axis]._visualValues};return tW(i,c,o.index,{mode:r})}updateRangeFromParsed(t,n,r,s){const o=r[n.axis];let c=o===null?NaN:o;const i=s&&r._stacks[n.axis];s&&i&&(s.values=i,c=tW(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,n){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&t===r.iScale,c=s.length,i=this._getOtherScale(t),f=ELe(n,r,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:w}=bLe(i);let A,C;function F(){C=s[A];const z=C[i.axis];return!Jo(C[t.axis])||x>z||w<z}for(A=0;A<c&&!(!F()&&(this.updateRangeFromParsed(g,t,C,f),o));++A);if(o){for(A=c-1;A>=0;--A)if(!F()){this.updateRangeFromParsed(g,t,C,f);break}}return g}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let s,o,c;for(s=0,o=n.length;s<o;++s)c=n[s][t.axis],Jo(c)&&r.push(c);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,s=n.vScale,o=this.getParsed(t);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=_Le(ai(this.options.clip,gLe(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],o=n.chartArea,c=[],i=this._drawStart||0,f=this._drawCount||s.length-i,g=this.options.drawActiveElementsOnTop;let x;for(r.dataset&&r.dataset.draw(t,o,i,f),x=i;x<i+f;++x){const w=s[x];w.hidden||(w.active&&g?c.push(w):w.draw(t,o))}for(x=0;x<c.length;++x)c[x].draw(t,o)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];o=c.$context||(c.$context=SLe(this.getContext(),t,c)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=wLe(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=r,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const s=n==="active",o=this._cachedDataOpts,c=t+"-"+n,i=o[c],f=this.enableOptionSharing&&Il(r);if(i)return iW(i,f);const g=this.chart.config,x=g.datasetElementScopeKeys(this._type,t),w=s?[`${t}Hover`,"hover",t,""]:[t,""],A=g.getOptionScopes(this.getDataset(),x),C=Object.keys(to.elements[t]),F=()=>this.getContext(r,s,n),z=g.resolveNamedOptions(A,C,F,w);return z.$shared&&(z.$shared=f,o[c]=Object.freeze(iW(z,f))),z}_resolveAnimations(t,n,r){const s=this.chart,o=this._cachedDataOpts,c=`animation-${n}`,i=o[c];if(i)return i;let f;if(s.options.animation!==!1){const x=this.chart.config,w=x.datasetAnimationScopeKeys(this._type,n),A=x.getOptionScopes(this.getDataset(),w);f=x.createResolver(A,this.getContext(t,r,n))}const g=new GF(s,f&&f.animations);return f&&f._cacheable&&(o[c]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||vR(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),s=this._sharedOptions,o=this.getSharedOptions(r),c=this.includeOptions(n,o)||o!==s;return this.updateSharedOptions(o,n,r),{sharedOptions:o,includeOptions:c}}updateElement(t,n,r,s){vR(s)?Object.assign(t,r):this._resolveAnimations(n,s).update(t,r)}updateSharedOptions(t,n,r){t&&!vR(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,s){t.active=s;const o=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[i,f,g]of this._syncList)this[i](f,g);this._syncList=[];const s=r.length,o=n.length,c=Math.min(o,s);c&&this.parse(0,c),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,n,r=!0){const s=this._cachedMeta,o=s.data,c=t+n;let i;const f=g=>{for(g.length+=n,i=g.length-1;i>=c;i--)g[i]=g[i-n]};for(f(o),i=t;i<c;++i)o[i]=new this.dataElementType;this._parsing&&f(s._parsed),this.parse(t,n),r&&this.updateElements(o,t,n,"reset")}updateElements(t,n,r,s){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(t,n);r._stacked&&uw(r,s)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,s]=t;this[n](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function TLe(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let s=0,o=n.length;s<o;s++)r=r.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=RF(r.sort((s,o)=>s-o))}return e._cache.$bar}function MLe(e){const t=e.iScale,n=TLe(t,e.type);let r=t._length,s,o,c,i;const f=()=>{c===32767||c===-32768||(Il(i)&&(r=Math.min(r,Math.abs(c-i)||r)),i=c)};for(s=0,o=n.length;s<o;++s)c=t.getPixelForValue(n[s]),f();for(i=void 0,s=0,o=t.ticks.length;s<o;++s)c=t.getPixelForTick(s),f();return r}function ALe(e,t,n,r){const s=n.barThickness;let o,c;return Ri(s)?(o=t.min*n.categoryPercentage,c=n.barPercentage):(o=s*r,c=1),{chunk:o/r,ratio:c,start:t.pixels[e]-o/2}}function CLe(e,t,n,r){const s=t.pixels,o=s[e];let c=e>0?s[e-1]:null,i=e<s.length-1?s[e+1]:null;const f=n.categoryPercentage;c===null&&(c=o-(i===null?t.end-t.start:i-o)),i===null&&(i=o+o-c);const g=o-(o-Math.min(c,i))/2*f;return{chunk:Math.abs(i-c)/2*f/r,ratio:n.barPercentage,start:g}}function ILe(e,t,n,r){const s=n.parse(e[0],r),o=n.parse(e[1],r),c=Math.min(s,o),i=Math.max(s,o);let f=c,g=i;Math.abs(c)>Math.abs(i)&&(f=i,g=c),t[n.axis]=g,t._custom={barStart:f,barEnd:g,start:s,end:o,min:c,max:i}}function Eie(e,t,n,r){return rs(e)?ILe(e,t,n,r):t[n.axis]=n.parse(e,r),t}function sW(e,t,n,r){const s=e.iScale,o=e.vScale,c=s.getLabels(),i=s===o,f=[];let g,x,w,A;for(g=n,x=n+r;g<x;++g)A=t[g],w={},w[s.axis]=i||s.parse(c[g],g),f.push(Eie(A,w,o,g));return f}function bR(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function PLe(e,t,n){return e!==0?td(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function OLe(e){let t,n,r,s,o;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",o="start"):(s="start",o="end"),{start:n,end:r,reverse:t,top:s,bottom:o}}function DLe(e,t,n,r){let s=t.borderSkipped;const o={};if(!s){e.borderSkipped=o;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:i,reverse:f,top:g,bottom:x}=OLe(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=g:(n._bottom||0)===r?s=x:(o[oW(x,c,i,f)]=!0,s=g)),o[oW(s,c,i,f)]=!0,e.borderSkipped=o}function oW(e,t,n,r){return r?(e=RLe(e,t,n),e=aW(e,n,t)):e=aW(e,t,n),e}function RLe(e,t,n){return e===t?n:e===n?t:e}function aW(e,t,n){return e==="start"?t:e==="end"?n:e}function kLe(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class LLe extends IP{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,n,r,s){return sW(t,n,r,s)}parseArrayData(t,n,r,s){return sW(t,n,r,s)}parseObjectData(t,n,r,s){const{iScale:o,vScale:c}=t,{xAxisKey:i="x",yAxisKey:f="y"}=this._parsing,g=o.axis==="x"?i:f,x=c.axis==="x"?i:f,w=[];let A,C,F,z;for(A=r,C=r+s;A<C;++A)z=n[A],F={},F[o.axis]=o.parse(_f(z,g),A),w.push(Eie(_f(z,x),F,c,A));return w}updateRangeFromParsed(t,n,r,s){super.updateRangeFromParsed(t,n,r,s);const o=r._custom;o&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:r,vScale:s}=n,o=this.getParsed(t),c=o._custom,i=bR(c)?"["+c.start+", "+c.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,r,s){const o=s==="reset",{index:c,_cachedMeta:{vScale:i}}=this,f=i.getBasePixel(),g=i.isHorizontal(),x=this._getRuler(),{sharedOptions:w,includeOptions:A}=this._getSharedOptions(n,s);for(let C=n;C<n+r;C++){const F=this.getParsed(C),z=o||Ri(F[i.axis])?{base:f,head:f}:this._calculateBarValuePixels(C),j=this._calculateBarIndexPixels(C,x),V=(F._stacks||{})[i.axis],Y={horizontal:g,base:z.base,enableBorderRadius:!V||bR(F._custom)||c===V._top||c===V._bottom,x:g?z.head:j.center,y:g?j.center:z.head,height:g?j.size:Math.abs(z.size),width:g?Math.abs(z.size):j.size};A&&(Y.options=w||this.resolveDataElementOptions(C,t[C].active?"active":s));const te=Y.options||t[C].options;DLe(Y,te,V,c),kLe(Y,te,x.ratio),this.updateElement(t[C],C,Y,s)}}_getStacks(t,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(x=>x.controller.options.grouped),o=r.options.stacked,c=[],i=this._cachedMeta.controller.getParsed(n),f=i&&i[r.axis],g=x=>{const w=x._parsed.find(C=>C[r.axis]===f),A=w&&w[x.vScale.axis];if(Ri(A)||isNaN(A))return!0};for(const x of s)if(!(n!==void 0&&g(x))&&((o===!1||c.indexOf(x.stack)===-1||o===void 0&&x.stack===void 0)&&c.push(x.stack),x.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,r){const s=this._getStacks(t,r),o=n!==void 0?s.indexOf(n):-1;return o===-1?s.length-1:o}_getRuler(){const t=this.options,n=this._cachedMeta,r=n.iScale,s=[];let o,c;for(o=0,c=n.data.length;o<c;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const i=t.barThickness;return{min:i||MLe(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:i?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:o,minBarLength:c}}=this,i=o||0,f=this.getParsed(t),g=f._custom,x=bR(g);let w=f[n.axis],A=0,C=r?this.applyStack(n,f,r):w,F,z;C!==w&&(A=C-w,C=w),x&&(w=g.barStart,C=g.barEnd-g.barStart,w!==0&&td(w)!==td(g.barEnd)&&(A=0),A+=w);const j=!Ri(o)&&!x?o:A;let V=n.getPixelForValue(j);if(this.chart.getDataVisibility(t)?F=n.getPixelForValue(A+C):F=V,z=F-V,Math.abs(z)<c){z=PLe(z,n,i)*c,w===i&&(V-=z/2);const Y=n.getPixelForDecimal(0),te=n.getPixelForDecimal(1),J=Math.min(Y,te),ee=Math.max(Y,te);V=Math.max(Math.min(V,ee),J),F=V+z,r&&!x&&(f._stacks[n.axis]._visualValues[s]=n.getValueForPixel(F)-n.getValueForPixel(V))}if(V===n.getPixelForValue(i)){const Y=td(z)*n.getLineWidthForValue(i)/2;V+=Y,z-=Y}return{size:z,base:V,head:F,center:F+z/2}}_calculateBarIndexPixels(t,n){const r=n.scale,s=this.options,o=s.skipNull,c=ai(s.maxBarThickness,1/0);let i,f;if(n.grouped){const g=o?this._getStackCount(t):n.stackCount,x=s.barThickness==="flex"?CLe(t,n,s,g):ALe(t,n,s,g),w=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);i=x.start+x.chunk*w+x.chunk/2,f=Math.min(c,x.chunk*x.ratio)}else i=r.getPixelForValue(this.getParsed(t)[r.axis],t),f=Math.min(c,n.min*n.ratio);return{base:i-f/2,head:i+f/2,center:i,size:f}}draw(){const t=this._cachedMeta,n=t.vScale,r=t.data,s=r.length;let o=0;for(;o<s;++o)this.getParsed(o)[n.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}function NLe(e,t,n){let r=1,s=1,o=0,c=0;if(t<Cs){const i=e,f=i+t,g=Math.cos(i),x=Math.sin(i),w=Math.cos(f),A=Math.sin(f),C=(te,J,ee)=>a1(te,i,f,!0)?1:Math.max(J,J*n,ee,ee*n),F=(te,J,ee)=>a1(te,i,f,!0)?-1:Math.min(J,J*n,ee,ee*n),z=C(0,g,w),j=C(Ws,x,A),V=F(Hi,g,w),Y=F(Hi+Ws,x,A);r=(z-V)/2,s=(j-Y)/2,o=-(z+V)/2,c=-(j+Y)/2}return{ratioX:r,ratioY:s,offsetX:o,offsetY:c}}class FLe extends IP{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:s}}=t.legend.options;return n.labels.map((o,c)=>{const f=t.getDatasetMeta(0).controller.getStyle(c);return{text:o,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:s,lineWidth:f.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=f=>+r[f];if(di(r[t])){const{key:f="value"}=this._parsing;o=g=>+_f(r[g],f)}let c,i;for(c=t,i=t+n;c<i;++c)s._parsed[c]=o(c)}}_getRotation(){return Zo(this.options.rotation-90)}_getCircumference(){return Zo(this.options.circumference)}_getRotationExtents(){let t=Cs,n=-Cs;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),c=s._getCircumference();t=Math.min(t,o),n=Math.max(n,o+c)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,o=s.data,c=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,i=Math.max((Math.min(r.width,r.height)-c)/2,0),f=Math.min(Fre(this.options.cutout,i),1),g=this._getRingWeight(this.index),{circumference:x,rotation:w}=this._getRotationExtents(),{ratioX:A,ratioY:C,offsetX:F,offsetY:z}=NLe(w,x,f),j=(r.width-c)/A,V=(r.height-c)/C,Y=Math.max(Math.min(j,V)/2,0),te=PF(this.options.radius,Y),J=Math.max(te*f,0),ee=(te-J)/this._getVisibleDatasetWeightTotal();this.offsetX=F*te,this.offsetY=z*te,s.total=this.calculateTotal(),this.outerRadius=te-ee*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ee*g,0),this.updateElements(o,0,o.length,t)}_circumference(t,n){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/Cs)}updateElements(t,n,r,s){const o=s==="reset",c=this.chart,i=c.chartArea,g=c.options.animation,x=(i.left+i.right)/2,w=(i.top+i.bottom)/2,A=o&&g.animateScale,C=A?0:this.innerRadius,F=A?0:this.outerRadius,{sharedOptions:z,includeOptions:j}=this._getSharedOptions(n,s);let V=this._getRotation(),Y;for(Y=0;Y<n;++Y)V+=this._circumference(Y,o);for(Y=n;Y<n+r;++Y){const te=this._circumference(Y,o),J=t[Y],ee={x:x+this.offsetX,y:w+this.offsetY,startAngle:V,endAngle:V+te,circumference:te,outerRadius:F,innerRadius:C};j&&(ee.options=z||this.resolveDataElementOptions(Y,J.active?"active":s)),V+=te,this.updateElement(J,Y,ee,s)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let r=0,s;for(s=0;s<n.length;s++){const o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Cs*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=SP(n._parsed[t],r.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let n=0;const r=this.chart;let s,o,c,i,f;if(!t){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){c=r.getDatasetMeta(s),t=c.data,i=c.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)f=i.resolveDataElementOptions(s),f.borderAlign!=="inner"&&(n=Math.max(n,f.borderWidth||0,f.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,s=t.length;r<s;++r){const o=this.resolveDataElementOptions(r);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(ai(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class zLe extends IP{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=n,c=this.chart._animationsDisabled;let{start:i,count:f}=tie(n,s,c);this._drawStart=i,this._drawCount=f,nie(n)&&(i=0,f=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const g=this.resolveDatasetElementOptions(t);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(r,void 0,{animated:!c,options:g},t),this.updateElements(s,i,f,t)}updateElements(t,n,r,s){const o=s==="reset",{iScale:c,vScale:i,_stacked:f,_dataset:g}=this._cachedMeta,{sharedOptions:x,includeOptions:w}=this._getSharedOptions(n,s),A=c.axis,C=i.axis,{spanGaps:F,segment:z}=this.options,j=Bm(F)?F:Number.POSITIVE_INFINITY,V=this.chart._animationsDisabled||o||s==="none",Y=n+r,te=t.length;let J=n>0&&this.getParsed(n-1);for(let ee=0;ee<te;++ee){const le=t[ee],oe=V?le:{};if(ee<n||ee>=Y){oe.skip=!0;continue}const ve=this.getParsed(ee),se=Ri(ve[C]),ie=oe[A]=c.getPixelForValue(ve[A],ee),pe=oe[C]=o||se?i.getBasePixel():i.getPixelForValue(f?this.applyStack(i,ve,f):ve[C],ee);oe.skip=isNaN(ie)||isNaN(pe)||se,oe.stop=ee>0&&Math.abs(ve[A]-J[A])>j,z&&(oe.parsed=ve,oe.raw=g.data[ee]),w&&(oe.options=x||this.resolveDataElementOptions(ee,le.active?"active":s)),V||this.updateElement(le,ee,oe,s),J=ve}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),c=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,c)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function o_(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class YF{static override(t){Object.assign(YF.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return o_()}parse(){return o_()}format(){return o_()}add(){return o_()}diff(){return o_()}startOf(){return o_()}endOf(){return o_()}}var BLe={_date:YF};function $Le(e,t,n,r){const{controller:s,data:o,_sorted:c}=e,i=s._cachedMeta.iScale,f=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(i&&t===i.axis&&t!=="r"&&c&&o.length){const g=i._reversePixels?Xre:pm;if(r){if(s._sharedOptions){const x=o[0],w=typeof x.getRange=="function"&&x.getRange(t);if(w){const A=g(o,t,n-w),C=g(o,t,n+w);return{lo:A.lo,hi:C.hi}}}}else{const x=g(o,t,n);if(f){const{vScale:w}=s._cachedMeta,{_parsed:A}=e,C=A.slice(0,x.lo+1).reverse().findIndex(z=>!Ri(z[w.axis]));x.lo-=Math.max(0,C);const F=A.slice(x.hi).findIndex(z=>!Ri(z[w.axis]));x.hi+=Math.max(0,F)}return x}}return{lo:0,hi:o.length-1}}function PP(e,t,n,r,s){const o=e.getSortedVisibleDatasetMetas(),c=n[t];for(let i=0,f=o.length;i<f;++i){const{index:g,data:x}=o[i],{lo:w,hi:A}=$Le(o[i],t,c,s);for(let C=w;C<=A;++C){const F=x[C];F.skip||r(F,g,C)}}}function VLe(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,s){const o=t?Math.abs(r.x-s.x):0,c=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function xR(e,t,n,r,s){const o=[];return!s&&!e.isPointInArea(t)||PP(e,n,t,function(i,f,g){!s&&!l1(i,e.chartArea,0)||i.inRange(t.x,t.y,r)&&o.push({element:i,datasetIndex:f,index:g})},!0),o}function jLe(e,t,n,r){let s=[];function o(c,i,f){const{startAngle:g,endAngle:x}=c.getProps(["startAngle","endAngle"],r),{angle:w}=cS(c,{x:t.x,y:t.y});a1(w,g,x)&&s.push({element:c,datasetIndex:i,index:f})}return PP(e,n,t,o),s}function ULe(e,t,n,r,s,o){let c=[];const i=VLe(n);let f=Number.POSITIVE_INFINITY;function g(x,w,A){const C=x.inRange(t.x,t.y,s);if(r&&!C)return;const F=x.getCenterPoint(s);if(!(!!o||e.isPointInArea(F))&&!C)return;const j=i(t,F);j<f?(c=[{element:x,datasetIndex:w,index:A}],f=j):j===f&&c.push({element:x,datasetIndex:w,index:A})}return PP(e,n,t,g),c}function wR(e,t,n,r,s,o){return!o&&!e.isPointInArea(t)?[]:n==="r"&&!r?jLe(e,t,n,s):ULe(e,t,n,r,s,o)}function lW(e,t,n,r,s){const o=[],c=n==="x"?"inXRange":"inYRange";let i=!1;return PP(e,n,t,(f,g,x)=>{f[c]&&f[c](t[n],s)&&(o.push({element:f,datasetIndex:g,index:x}),i=i||f.inRange(t.x,t.y,s))}),r&&!i?[]:o}var HLe={modes:{index(e,t,n,r){const s=em(t,e),o=n.axis||"x",c=n.includeInvisible||!1,i=n.intersect?xR(e,s,o,r,c):wR(e,s,o,!1,r,c),f=[];return i.length?(e.getSortedVisibleDatasetMetas().forEach(g=>{const x=i[0].index,w=g.data[x];w&&!w.skip&&f.push({element:w,datasetIndex:g.index,index:x})}),f):[]},dataset(e,t,n,r){const s=em(t,e),o=n.axis||"xy",c=n.includeInvisible||!1;let i=n.intersect?xR(e,s,o,r,c):wR(e,s,o,!1,r,c);if(i.length>0){const f=i[0].datasetIndex,g=e.getDatasetMeta(f).data;i=[];for(let x=0;x<g.length;++x)i.push({element:g[x],datasetIndex:f,index:x})}return i},point(e,t,n,r){const s=em(t,e),o=n.axis||"xy",c=n.includeInvisible||!1;return xR(e,s,o,r,c)},nearest(e,t,n,r){const s=em(t,e),o=n.axis||"xy",c=n.includeInvisible||!1;return wR(e,s,o,n.intersect,r,c)},x(e,t,n,r){const s=em(t,e);return lW(e,s,"x",n.intersect,r)},y(e,t,n,r){const s=em(t,e);return lW(e,s,"y",n.intersect,r)}}};const Tie=["left","top","right","bottom"];function dw(e,t){return e.filter(n=>n.pos===t)}function cW(e,t){return e.filter(n=>Tie.indexOf(n.pos)===-1&&n.box.axis===t)}function hw(e,t){return e.sort((n,r)=>{const s=t?r:n,o=t?n:r;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function WLe(e){const t=[];let n,r,s,o,c,i;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],{position:o,options:{stack:c,stackWeight:i=1}}=s,t.push({index:n,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:c&&o+c,stackWeight:i});return t}function GLe(e){const t={};for(const n of e){const{stack:r,pos:s,stackWeight:o}=n;if(!r||!Tie.includes(s))continue;const c=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return t}function YLe(e,t){const n=GLe(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let o,c,i;for(o=0,c=e.length;o<c;++o){i=e[o];const{fullSize:f}=i.box,g=n[i.stack],x=g&&i.stackWeight/g.weight;i.horizontal?(i.width=x?x*r:f&&t.availableWidth,i.height=s):(i.width=r,i.height=x?x*s:f&&t.availableHeight)}return n}function qLe(e){const t=WLe(e),n=hw(t.filter(g=>g.box.fullSize),!0),r=hw(dw(t,"left"),!0),s=hw(dw(t,"right")),o=hw(dw(t,"top"),!0),c=hw(dw(t,"bottom")),i=cW(t,"x"),f=cW(t,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:s.concat(f).concat(c).concat(i),chartArea:dw(t,"chartArea"),vertical:r.concat(s).concat(f),horizontal:o.concat(c).concat(i)}}function uW(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Mie(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function XLe(e,t,n,r){const{pos:s,box:o}=n,c=e.maxPadding;if(!di(s)){n.size&&(e[s]-=n.size);const w=r[n.stack]||{size:0,count:1};w.size=Math.max(w.size,n.horizontal?o.height:o.width),n.size=w.size/w.count,e[s]+=n.size}o.getPadding&&Mie(c,o.getPadding());const i=Math.max(0,t.outerWidth-uW(c,e,"left","right")),f=Math.max(0,t.outerHeight-uW(c,e,"top","bottom")),g=i!==e.w,x=f!==e.h;return e.w=i,e.h=f,n.horizontal?{same:g,other:x}:{same:x,other:g}}function ZLe(e){const t=e.maxPadding;function n(r){const s=Math.max(t[r]-e[r],0);return e[r]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function KLe(e,t){const n=t.maxPadding;function r(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(c=>{o[c]=Math.max(t[c],n[c])}),o}return r(e?["left","right"]:["top","bottom"])}function Dw(e,t,n,r){const s=[];let o,c,i,f,g,x;for(o=0,c=e.length,g=0;o<c;++o){i=e[o],f=i.box,f.update(i.width||t.w,i.height||t.h,KLe(i.horizontal,t));const{same:w,other:A}=XLe(t,n,i,r);g|=w&&s.length,x=x||A,f.fullSize||s.push(i)}return g&&Dw(s,t,n,r)||x}function KM(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function dW(e,t,n,r){const s=n.padding;let{x:o,y:c}=t;for(const i of e){const f=i.box,g=r[i.stack]||{placed:0,weight:1},x=i.stackWeight/g.weight||1;if(i.horizontal){const w=t.w*x,A=g.size||f.height;Il(g.start)&&(c=g.start),f.fullSize?KM(f,s.left,c,n.outerWidth-s.right-s.left,A):KM(f,t.left+g.placed,c,w,A),g.start=c,g.placed+=w,c=f.bottom}else{const w=t.h*x,A=g.size||f.width;Il(g.start)&&(o=g.start),f.fullSize?KM(f,o,s.top,A,n.outerHeight-s.bottom-s.top):KM(f,o,t.top+g.placed,A,w),g.start=o,g.placed+=w,o=f.right}}t.x=o,t.y=c}var Ya={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=la(e.options.layout.padding),o=Math.max(t-s.width,0),c=Math.max(n-s.height,0),i=qLe(e.boxes),f=i.vertical,g=i.horizontal;Qi(e.boxes,z=>{typeof z.beforeLayout=="function"&&z.beforeLayout()});const x=f.reduce((z,j)=>j.box.options&&j.box.options.display===!1?z:z+1,0)||1,w=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/x,hBoxMaxHeight:c/2}),A=Object.assign({},s);Mie(A,la(r));const C=Object.assign({maxPadding:A,w:o,h:c,x:s.left,y:s.top},s),F=YLe(f.concat(g),w);Dw(i.fullSize,C,w,F),Dw(f,C,w,F),Dw(g,C,w,F)&&Dw(f,C,w,F),ZLe(C),dW(i.leftAndTop,C,w,F),C.x+=C.w,C.y+=C.h,dW(i.rightAndBottom,C,w,F),e.chartArea={left:C.left,top:C.top,right:C.left+C.w,bottom:C.top+C.h,height:C.h,width:C.w},Qi(i.chartArea,z=>{const j=z.box;Object.assign(j,e.chartArea),j.update(C.w,C.h,{left:0,top:0,right:0,bottom:0})})}};class Aie{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,s){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(t){return!0}updateConfig(t){}}class JLe extends Aie{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const fC="$chartjs",QLe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hW=e=>e===null||e==="";function e5e(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[fC]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",hW(s)){const o=a5(e,"width");o!==void 0&&(e.width=o)}if(hW(r))if(e.style.height==="")e.height=e.width/(t||2);else{const o=a5(e,"height");o!==void 0&&(e.height=o)}return e}const Cie=yie?{passive:!0}:!1;function t5e(e,t,n){e&&e.addEventListener(t,n,Cie)}function n5e(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Cie)}function r5e(e,t){const n=QLe[e.type]||e.type,{x:r,y:s}=em(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:s!==void 0?s:null}}function FI(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function i5e(e,t,n){const r=e.canvas,s=new MutationObserver(o=>{let c=!1;for(const i of o)c=c||FI(i.addedNodes,r),c=c&&!FI(i.removedNodes,r);c&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function s5e(e,t,n){const r=e.canvas,s=new MutationObserver(o=>{let c=!1;for(const i of o)c=c||FI(i.removedNodes,r),c=c&&!FI(i.addedNodes,r);c&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const dS=new Map;let fW=0;function Iie(){const e=window.devicePixelRatio;e!==fW&&(fW=e,dS.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function o5e(e,t){dS.size||window.addEventListener("resize",Iie),dS.set(e,t)}function a5e(e){dS.delete(e),dS.size||window.removeEventListener("resize",Iie)}function l5e(e,t,n){const r=e.canvas,s=r&&AP(r);if(!s)return;const o=LF((i,f)=>{const g=s.clientWidth;n(i,f),g<s.clientWidth&&n()},window),c=new ResizeObserver(i=>{const f=i[0],g=f.contentRect.width,x=f.contentRect.height;g===0&&x===0||o(g,x)});return c.observe(s),o5e(e,o),c}function SR(e,t,n){n&&n.disconnect(),t==="resize"&&a5e(e)}function c5e(e,t,n){const r=e.canvas,s=LF(o=>{e.ctx!==null&&n(r5e(o,e))},e);return t5e(r,t,s),s}class u5e extends Aie{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(e5e(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[fC])return!1;const r=n[fC].initial;["height","width"].forEach(o=>{const c=r[o];Ri(c)?n.removeAttribute(o):n.setAttribute(o,c)});const s=r.style||{};return Object.keys(s).forEach(o=>{n.style[o]=s[o]}),n.width=n.width,delete n[fC],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),c={attach:i5e,detach:s5e,resize:l5e}[n]||c5e;s[n]=c(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),s=r[n];if(!s)return;({attach:SR,detach:SR,resize:SR}[n]||n5e)(t,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,s){return _ie(t,n,r,s)}isAttached(t){const n=t&&AP(t);return!!(n&&n.isConnected)}}function d5e(e){return!MP()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?JLe:u5e}let Za=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return Bm(this.x)&&Bm(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const s={};return t.forEach(o=>{s[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),s}};function h5e(e,t){const n=e.options.ticks,r=f5e(e),s=Math.min(n.maxTicksLimit||r,r),o=n.major.enabled?m5e(t):[],c=o.length,i=o[0],f=o[c-1],g=[];if(c>s)return g5e(t,g,o,c/s),g;const x=p5e(o,t,s);if(c>0){let w,A;const C=c>1?Math.round((f-i)/(c-1)):null;for(JM(t,g,x,Ri(C)?0:i-C,i),w=0,A=c-1;w<A;w++)JM(t,g,x,o[w],o[w+1]);return JM(t,g,x,f,Ri(C)?t.length:f+C),g}return JM(t,g,x),g}function f5e(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}function p5e(e,t,n){const r=_5e(e),s=t.length/n;if(!r)return Math.max(s,1);const o=Hre(r);for(let c=0,i=o.length-1;c<i;c++){const f=o[c];if(f>s)return f}return Math.max(s,1)}function m5e(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function g5e(e,t,n,r){let s=0,o=n[0],c;for(r=Math.ceil(r),c=0;c<e.length;c++)c===o&&(t.push(e[c]),s++,o=n[s*r])}function JM(e,t,n,r,s){const o=ai(r,0),c=Math.min(ai(s,e.length),e.length);let i=0,f,g,x;for(n=Math.ceil(n),s&&(f=s-r,n=f/Math.floor(f/n)),x=o;x<0;)i++,x=Math.round(o+i*n);for(g=Math.max(o,0);g<c;g++)g===x&&(t.push(e[g]),i++,x=Math.round(o+i*n))}function _5e(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const y5e=e=>e==="left"?"right":e==="right"?"left":e,pW=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,mW=(e,t)=>Math.min(t||e,e);function gW(e,t){const n=[],r=e.length/t,s=e.length;let o=0;for(;o<s;o+=r)n.push(e[Math.floor(o)]);return n}function v5e(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),o=e._startPixel,c=e._endPixel,i=1e-6;let f=e.getPixelForTick(s),g;if(!(n&&(r===1?g=Math.max(f-o,c-f):t===0?g=(e.getPixelForTick(1)-f)/2:g=(f-e.getPixelForTick(s-1))/2,f+=s<t?g:-g,f<o-i||f>c+i)))return f}function b5e(e,t){Qi(e,n=>{const r=n.gc,s=r.length/2;let o;if(s>t){for(o=0;o<s;++o)delete n.data[r[o]];r.splice(0,s)}})}function fw(e){return e.drawTicks?e.tickLength:0}function _W(e,t){if(!e.display)return 0;const n=Mo(e.font,t),r=la(e.padding);return(rs(e.text)?e.text.length:1)*n.lineHeight+r.height}function x5e(e,t){return sg(e,{scale:t,type:"scale"})}function w5e(e,t,n){return sg(e,{tick:n,index:t,type:"tick"})}function S5e(e,t,n){let r=xP(e);return(n&&t!=="right"||!n&&t==="right")&&(r=y5e(r)),r}function E5e(e,t,n,r){const{top:s,left:o,bottom:c,right:i,chart:f}=e,{chartArea:g,scales:x}=f;let w=0,A,C,F;const z=c-s,j=i-o;if(e.isHorizontal()){if(C=ba(r,o,i),di(n)){const V=Object.keys(n)[0],Y=n[V];F=x[V].getPixelForValue(Y)+z-t}else n==="center"?F=(g.bottom+g.top)/2+z-t:F=pW(e,n,t);A=i-o}else{if(di(n)){const V=Object.keys(n)[0],Y=n[V];C=x[V].getPixelForValue(Y)-j+t}else n==="center"?C=(g.left+g.right)/2-j+t:C=pW(e,n,t);F=ba(r,c,s),w=n==="left"?-Ws:Ws}return{titleX:C,titleY:F,maxWidth:A,rotation:w}}class B1 extends Za{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return t=Lu(t,Number.POSITIVE_INFINITY),n=Lu(n,Number.NEGATIVE_INFINITY),r=Lu(r,Number.POSITIVE_INFINITY),s=Lu(s,Number.NEGATIVE_INFINITY),{min:Lu(t,r),max:Lu(n,s),minDefined:Jo(t),maxDefined:Jo(n)}}getMinMax(t){let{min:n,max:r,minDefined:s,maxDefined:o}=this.getUserBounds(),c;if(s&&o)return{min:n,max:r};const i=this.getMatchingVisibleMetas();for(let f=0,g=i.length;f<g;++f)c=i[f].controller.getMinMax(this,t),s||(n=Math.min(n,c.min)),o||(r=Math.max(r,c.max));return n=o&&n>r?r:n,r=s&&n>r?n:r,{min:Lu(n,Lu(r,n)),max:Lu(r,Lu(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ji(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:s,grace:o,ticks:c}=this.options,i=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=lie(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=i<this.ticks.length;this._convertTicksToLabels(f?gW(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=h5e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ji(this.options.afterUpdate,[this])}beforeSetDimensions(){Ji(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ji(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ji(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ji(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,s,o;for(r=0,s=t.length;r<s;r++)o=t[r],o.label=Ji(n.callback,[o.value,r,t],this)}afterTickToLabelConversion(){Ji(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ji(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=mW(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,o=n.maxRotation;let c=s,i,f,g;if(!this._isVisible()||!n.display||s>=o||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const x=this._getLabelSizes(),w=x.widest.width,A=x.highest.height,C=Ea(this.chart.width-w,0,this.maxWidth);i=t.offset?this.maxWidth/r:C/(r-1),w+6>i&&(i=C/(r-(t.offset?.5:1)),f=this.maxHeight-fw(t.grid)-n.padding-_W(t.title,this.chart.options.font),g=Math.sqrt(w*w+A*A),c=DF(Math.min(Math.asin(Ea((x.highest.height+6)/i,-1,1)),Math.asin(Ea(f/g,-1,1))-Math.asin(Ea(A/g,-1,1)))),c=Math.max(s,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){Ji(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ji(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:o}}=this,c=this._isVisible(),i=this.isHorizontal();if(c){const f=_W(s,n.options.font);if(i?(t.width=this.maxWidth,t.height=fw(o)+f):(t.height=this.maxHeight,t.width=fw(o)+f),r.display&&this.ticks.length){const{first:g,last:x,widest:w,highest:A}=this._getLabelSizes(),C=r.padding*2,F=Zo(this.labelRotation),z=Math.cos(F),j=Math.sin(F);if(i){const V=r.mirror?0:j*w.width+z*A.height;t.height=Math.min(this.maxHeight,t.height+V+C)}else{const V=r.mirror?0:z*w.width+j*A.height;t.width=Math.min(this.maxWidth,t.width+V+C)}this._calculatePadding(g,x,j,z)}}this._handleMargins(),i?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,s){const{ticks:{align:o,padding:c},position:i}=this.options,f=this.labelRotation!==0,g=i!=="top"&&this.axis==="x";if(this.isHorizontal()){const x=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let A=0,C=0;f?g?(A=s*t.width,C=r*n.height):(A=r*t.height,C=s*n.width):o==="start"?C=n.width:o==="end"?A=t.width:o!=="inner"&&(A=t.width/2,C=n.width/2),this.paddingLeft=Math.max((A-x+c)*this.width/(this.width-x),0),this.paddingRight=Math.max((C-w+c)*this.width/(this.width-w),0)}else{let x=n.height/2,w=t.height/2;o==="start"?(x=0,w=t.height):o==="end"&&(x=n.height,w=0),this.paddingTop=x+c,this.paddingBottom=w+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ji(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)Ri(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=gW(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,r){const{ctx:s,_longestTextCache:o}=this,c=[],i=[],f=Math.floor(n/mW(n,r));let g=0,x=0,w,A,C,F,z,j,V,Y,te,J,ee;for(w=0;w<n;w+=f){if(F=t[w].label,z=this._resolveTickFontOptions(w),s.font=j=z.string,V=o[j]=o[j]||{data:{},gc:[]},Y=z.lineHeight,te=J=0,!Ri(F)&&!rs(F))te=uS(s,V.data,V.gc,te,F),J=Y;else if(rs(F))for(A=0,C=F.length;A<C;++A)ee=F[A],!Ri(ee)&&!rs(ee)&&(te=uS(s,V.data,V.gc,te,ee),J+=Y);c.push(te),i.push(J),g=Math.max(te,g),x=Math.max(J,x)}b5e(o,n);const le=c.indexOf(g),oe=i.indexOf(x),ve=se=>({width:c[se]||0,height:i[se]||0});return{first:ve(0),last:ve(n-1),widest:ve(le),highest:ve(oe),widths:c,heights:i}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return qre(this._alignToPixels?Vp(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=w5e(this.getContext(),t,r))}return this.$context||(this.$context=x5e(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Zo(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),o=this._getLabelSizes(),c=t.autoSkipPadding||0,i=o?o.widest.width+c:0,f=o?o.highest.height+c:0;return this.isHorizontal()?f*r>i*s?i/r:f/s:f*s<i*r?f/r:i/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,s=this.options,{grid:o,position:c,border:i}=s,f=o.offset,g=this.isHorizontal(),w=this.ticks.length+(f?1:0),A=fw(o),C=[],F=i.setContext(this.getContext()),z=F.display?F.width:0,j=z/2,V=function(xe){return Vp(r,xe,z)};let Y,te,J,ee,le,oe,ve,se,ie,pe,be,Se;if(c==="top")Y=V(this.bottom),oe=this.bottom-A,se=Y-j,pe=V(t.top)+j,Se=t.bottom;else if(c==="bottom")Y=V(this.top),pe=t.top,Se=V(t.bottom)-j,oe=Y+j,se=this.top+A;else if(c==="left")Y=V(this.right),le=this.right-A,ve=Y-j,ie=V(t.left)+j,be=t.right;else if(c==="right")Y=V(this.left),ie=t.left,be=V(t.right)-j,le=Y+j,ve=this.left+A;else if(n==="x"){if(c==="center")Y=V((t.top+t.bottom)/2+.5);else if(di(c)){const xe=Object.keys(c)[0],ke=c[xe];Y=V(this.chart.scales[xe].getPixelForValue(ke))}pe=t.top,Se=t.bottom,oe=Y+j,se=oe+A}else if(n==="y"){if(c==="center")Y=V((t.left+t.right)/2);else if(di(c)){const xe=Object.keys(c)[0],ke=c[xe];Y=V(this.chart.scales[xe].getPixelForValue(ke))}le=Y-j,ve=le-A,ie=t.left,be=t.right}const Ce=ai(s.ticks.maxTicksLimit,w),Ee=Math.max(1,Math.ceil(w/Ce));for(te=0;te<w;te+=Ee){const xe=this.getContext(te),ke=o.setContext(xe),He=i.setContext(xe),Ke=ke.lineWidth,Ge=ke.color,$t=He.dash||[],Ft=He.dashOffset,Lt=ke.tickWidth,nn=ke.tickColor,mn=ke.tickBorderDash||[],Xt=ke.tickBorderDashOffset;J=v5e(this,te,f),J!==void 0&&(ee=Vp(r,J,Ke),g?le=ve=ie=be=ee:oe=se=pe=Se=ee,C.push({tx1:le,ty1:oe,tx2:ve,ty2:se,x1:ie,y1:pe,x2:be,y2:Se,width:Ke,color:Ge,borderDash:$t,borderDashOffset:Ft,tickWidth:Lt,tickColor:nn,tickBorderDash:mn,tickBorderDashOffset:Xt}))}return this._ticksLength=w,this._borderValue=Y,C}_computeLabelItems(t){const n=this.axis,r=this.options,{position:s,ticks:o}=r,c=this.isHorizontal(),i=this.ticks,{align:f,crossAlign:g,padding:x,mirror:w}=o,A=fw(r.grid),C=A+x,F=w?-x:C,z=-Zo(this.labelRotation),j=[];let V,Y,te,J,ee,le,oe,ve,se,ie,pe,be,Se="middle";if(s==="top")le=this.bottom-F,oe=this._getXAxisLabelAlignment();else if(s==="bottom")le=this.top+F,oe=this._getXAxisLabelAlignment();else if(s==="left"){const Ee=this._getYAxisLabelAlignment(A);oe=Ee.textAlign,ee=Ee.x}else if(s==="right"){const Ee=this._getYAxisLabelAlignment(A);oe=Ee.textAlign,ee=Ee.x}else if(n==="x"){if(s==="center")le=(t.top+t.bottom)/2+C;else if(di(s)){const Ee=Object.keys(s)[0],xe=s[Ee];le=this.chart.scales[Ee].getPixelForValue(xe)+C}oe=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")ee=(t.left+t.right)/2-C;else if(di(s)){const Ee=Object.keys(s)[0],xe=s[Ee];ee=this.chart.scales[Ee].getPixelForValue(xe)}oe=this._getYAxisLabelAlignment(A).textAlign}n==="y"&&(f==="start"?Se="top":f==="end"&&(Se="bottom"));const Ce=this._getLabelSizes();for(V=0,Y=i.length;V<Y;++V){te=i[V],J=te.label;const Ee=o.setContext(this.getContext(V));ve=this.getPixelForTick(V)+o.labelOffset,se=this._resolveTickFontOptions(V),ie=se.lineHeight,pe=rs(J)?J.length:1;const xe=pe/2,ke=Ee.color,He=Ee.textStrokeColor,Ke=Ee.textStrokeWidth;let Ge=oe;c?(ee=ve,oe==="inner"&&(V===Y-1?Ge=this.options.reverse?"left":"right":V===0?Ge=this.options.reverse?"right":"left":Ge="center"),s==="top"?g==="near"||z!==0?be=-pe*ie+ie/2:g==="center"?be=-Ce.highest.height/2-xe*ie+ie:be=-Ce.highest.height+ie/2:g==="near"||z!==0?be=ie/2:g==="center"?be=Ce.highest.height/2-xe*ie:be=Ce.highest.height-pe*ie,w&&(be*=-1),z!==0&&!Ee.showLabelBackdrop&&(ee+=ie/2*Math.sin(z))):(le=ve,be=(1-pe)*ie/2);let $t;if(Ee.showLabelBackdrop){const Ft=la(Ee.backdropPadding),Lt=Ce.heights[V],nn=Ce.widths[V];let mn=be-Ft.top,Xt=0-Ft.left;switch(Se){case"middle":mn-=Lt/2;break;case"bottom":mn-=Lt;break}switch(oe){case"center":Xt-=nn/2;break;case"right":Xt-=nn;break;case"inner":V===Y-1?Xt-=nn:V>0&&(Xt-=nn/2);break}$t={left:Xt,top:mn,width:nn+Ft.width,height:Lt+Ft.height,color:Ee.backdropColor}}j.push({label:J,font:se,textOffset:be,options:{rotation:z,color:ke,strokeColor:He,strokeWidth:Ke,textAlign:Ge,textBaseline:Se,translation:[ee,le],backdrop:$t}})}return j}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Zo(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:s,padding:o}}=this.options,c=this._getLabelSizes(),i=t+o,f=c.widest.width;let g,x;return n==="left"?s?(x=this.right+o,r==="near"?g="left":r==="center"?(g="center",x+=f/2):(g="right",x+=f)):(x=this.right-i,r==="near"?g="right":r==="center"?(g="center",x-=f/2):(g="left",x=this.left)):n==="right"?s?(x=this.left+o,r==="near"?g="right":r==="center"?(g="center",x-=f/2):(g="left",x-=f)):(x=this.left+i,r==="near"?g="left":r==="center"?(g="center",x+=f/2):(g="right",x=this.right)):g="right",{textAlign:g,x}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:s,width:o,height:c}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,s,o,c),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(o=>o.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,c;const i=(f,g,x)=>{!x.width||!x.color||(r.save(),r.lineWidth=x.width,r.strokeStyle=x.color,r.setLineDash(x.borderDash||[]),r.lineDashOffset=x.borderDashOffset,r.beginPath(),r.moveTo(f.x,f.y),r.lineTo(g.x,g.y),r.stroke(),r.restore())};if(n.display)for(o=0,c=s.length;o<c;++o){const f=s[o];n.drawOnChartArea&&i({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),n.drawTicks&&i({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:r,grid:s}}=this,o=r.setContext(this.getContext()),c=r.display?o.width:0;if(!c)return;const i=s.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let g,x,w,A;this.isHorizontal()?(g=Vp(t,this.left,c)-c/2,x=Vp(t,this.right,i)+i/2,w=A=f):(w=Vp(t,this.top,c)-c/2,A=Vp(t,this.bottom,i)+i/2,g=x=f),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(g,w),n.lineTo(x,A),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&F1(r,s);const o=this.getLabelItems(t);for(const c of o){const i=c.options,f=c.font,g=c.label,x=c.textOffset;c1(r,g,0,x,f,i)}s&&z1(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const o=Mo(r.font),c=la(r.padding),i=r.align;let f=o.lineHeight/2;n==="bottom"||n==="center"||di(n)?(f+=c.bottom,rs(r.text)&&(f+=o.lineHeight*(r.text.length-1))):f+=c.top;const{titleX:g,titleY:x,maxWidth:w,rotation:A}=E5e(this,f,n,i);c1(t,r.text,0,0,o,{color:r.color,maxWidth:w,rotation:A,textAlign:S5e(i,n,s),textBaseline:"middle",translation:[g,x]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=ai(t.grid&&t.grid.z,-1),s=ai(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==B1.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let o,c;for(o=0,c=n.length;o<c;++o){const i=n[o];i[r]===this.id&&(!t||i.type===t)&&s.push(i)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Mo(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class QM{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;A5e(n)&&(r=this.register(n));const s=this.items,o=t.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,T5e(t,c,r),this.override&&to.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,s=this.scope;r in n&&delete n[r],s&&r in to[s]&&(delete to[s][r],this.override&&delete ny[r])}}function T5e(e,t,n){const r=od(Object.create(null),[n?to.get(n):{},to.get(t),e.defaults]);to.set(t,r),e.defaultRoutes&&M5e(t,e.defaultRoutes),e.descriptors&&to.describe(t,e.descriptors)}function M5e(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),o=[e].concat(r).join("."),c=t[n].split("."),i=c.pop(),f=c.join(".");to.route(o,s,f,i)})}function A5e(e){return"id"in e&&"defaults"in e}class C5e{constructor(){this.controllers=new QM(IP,"datasets",!0),this.elements=new QM(Za,"elements"),this.plugins=new QM(Object,"plugins"),this.scales=new QM(B1,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(s=>{const o=r||this._getRegistryForType(s);r||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):Qi(s,c=>{const i=r||this._getRegistryForType(c);this._exec(t,i,c)})})}_exec(t,n,r){const s=yP(t);Ji(r["before"+s],[],r),n[t](r),Ji(r["after"+s],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return s}}var kd=new C5e;class I5e{constructor(){this._init=[]}notify(t,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=s?this._descriptors(t).filter(s):this._descriptors(t),c=this._notify(o,t,n,r);return n==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,n,r,s){s=s||{};for(const o of t){const c=o.plugin,i=c[r],f=[n,s,o.options];if(Ji(i,f,c)===!1&&s.cancelable)return!1}return!0}invalidate(){Ri(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,s=ai(r.options&&r.options.plugins,{}),o=P5e(r);return s===!1&&!n?[]:D5e(t,o,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,s=(o,c)=>o.filter(i=>!c.some(f=>i.plugin.id===f.plugin.id));this._notify(s(n,r),t,"stop"),this._notify(s(r,n),t,"start")}}function P5e(e){const t={},n=[],r=Object.keys(kd.plugins.items);for(let o=0;o<r.length;o++)n.push(kd.getPlugin(r[o]));const s=e.plugins||[];for(let o=0;o<s.length;o++){const c=s[o];n.indexOf(c)===-1&&(n.push(c),t[c.id]=!0)}return{plugins:n,localIds:t}}function O5e(e,t){return!t&&e===!1?null:e===!0?{}:e}function D5e(e,{plugins:t,localIds:n},r,s){const o=[],c=e.getContext();for(const i of t){const f=i.id,g=O5e(r[f],s);g!==null&&o.push({plugin:i,options:R5e(e.config,{plugin:i,local:n[f]},g,c)})}return o}function R5e(e,{plugin:t,local:n},r,s){const o=e.pluginScopeKeys(t),c=e.getOptionScopes(r,o);return n&&t.defaults&&c.push(t.defaults),e.createResolver(c,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function l5(e,t){const n=to.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function k5e(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function L5e(e,t){return e===t?"_index_":"_value_"}function yW(e){if(e==="x"||e==="y"||e==="r")return e}function N5e(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function c5(e,...t){if(yW(e))return e;for(const n of t){const r=n.axis||N5e(n.position)||e.length>1&&yW(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function vW(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function F5e(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(n.length)return vW(e,"x",n[0])||vW(e,"y",n[0])}return{}}function z5e(e,t){const n=ny[e.type]||{scales:{}},r=t.scales||{},s=l5(e.type,t),o=Object.create(null);return Object.keys(r).forEach(c=>{const i=r[c];if(!di(i))return console.error(`Invalid scale configuration for scale: ${c}`);if(i._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const f=c5(c,i,F5e(c,e),to.scales[i.type]),g=L5e(f,s),x=n.scales||{};o[c]=C0(Object.create(null),[{axis:f},i,x[f],x[g]])}),e.data.datasets.forEach(c=>{const i=c.type||e.type,f=c.indexAxis||l5(i,t),x=(ny[i]||{}).scales||{};Object.keys(x).forEach(w=>{const A=k5e(w,f),C=c[A+"AxisID"]||A;o[C]=o[C]||Object.create(null),C0(o[C],[{axis:A},r[C],x[w]])})}),Object.keys(o).forEach(c=>{const i=o[c];C0(i,[to.scales[i.type],to.scale])}),o}function Pie(e){const t=e.options||(e.options={});t.plugins=ai(t.plugins,{}),t.scales=z5e(e,t)}function Oie(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function B5e(e){return e=e||{},e.data=Oie(e.data),Pie(e),e}const bW=new Map,Die=new Set;function eA(e,t){let n=bW.get(e);return n||(n=t(),bW.set(e,n),Die.add(n)),n}const pw=(e,t,n)=>{const r=_f(t,n);r!==void 0&&e.add(r)};class $5e{constructor(t){this._config=B5e(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Oie(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Pie(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return eA(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return eA(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return eA(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return eA(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let s=r.get(t);return(!s||n)&&(s=new Map,r.set(t,s)),s}getOptionScopes(t,n,r){const{options:s,type:o}=this,c=this._cachedScopes(t,r),i=c.get(n);if(i)return i;const f=new Set;n.forEach(x=>{t&&(f.add(t),x.forEach(w=>pw(f,t,w))),x.forEach(w=>pw(f,s,w)),x.forEach(w=>pw(f,ny[o]||{},w)),x.forEach(w=>pw(f,to,w)),x.forEach(w=>pw(f,i5,w))});const g=Array.from(f);return g.length===0&&g.push(Object.create(null)),Die.has(n)&&c.set(n,g),g}chartOptionScopes(){const{options:t,type:n}=this;return[t,ny[n]||{},to.datasets[n]||{},{type:n},to,i5]}resolveNamedOptions(t,n,r,s=[""]){const o={$shared:!0},{resolver:c,subPrefixes:i}=xW(this._resolverCache,t,s);let f=c;if(j5e(c,n)){o.$shared=!1,r=Ml(r)?r():r;const g=this.createResolver(t,r,i);f=ry(c,r,g)}for(const g of n)o[g]=f[g];return o}createResolver(t,n,r=[""],s){const{resolver:o}=xW(this._resolverCache,t,r);return di(n)?ry(o,n,void 0,s):o}}function xW(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let o=r.get(s);return o||(o={resolver:TP(t,n),subPrefixes:n.filter(i=>!i.toLowerCase().includes("hover"))},r.set(s,o)),o}const V5e=e=>di(e)&&Object.getOwnPropertyNames(e).some(t=>Ml(e[t]));function j5e(e,t){const{isScriptable:n,isIndexable:r}=zF(e);for(const s of t){const o=n(s),c=r(s),i=(c||o)&&e[s];if(o&&(Ml(i)||V5e(i))||c&&rs(i))return!0}return!1}var U5e="4.4.9";const H5e=["top","bottom","left","right","chartArea"];function wW(e,t){return e==="top"||e==="bottom"||H5e.indexOf(e)===-1&&t==="x"}function SW(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function EW(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Ji(n&&n.onComplete,[e],t)}function W5e(e){const t=e.chart,n=t.options.animation;Ji(n&&n.onProgress,[e],t)}function Rie(e){return MP()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const pC={},TW=e=>{const t=Rie(e);return Object.values(pC).filter(n=>n.canvas===t).pop()};function G5e(e,t,n){const r=Object.keys(e);for(const s of r){const o=+s;if(o>=t){const c=e[s];delete e[s],(n>0||o>t)&&(e[o+n]=c)}}}function Y5e(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}class Uh{static defaults=to;static instances=pC;static overrides=ny;static registry=kd;static version=U5e;static getChart=TW;static register(...t){kd.add(...t),MW()}static unregister(...t){kd.remove(...t),MW()}constructor(t,n){const r=this.config=new $5e(n),s=Rie(t),o=TW(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||d5e(s)),this.platform.updateConfig(r);const i=this.platform.acquireContext(s,c.aspectRatio),f=i&&i.canvas,g=f&&f.height,x=f&&f.width;if(this.id=Nre(),this.ctx=i,this.canvas=f,this.width=x,this.height=g,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new I5e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Qre(w=>this.update(w),c.resizeDelay||0),this._dataChanges=[],pC[this.id]=this,!i||!f){console.error("Failed to create chart: can't acquire context from the given item");return}Ih.listen(this,"complete",EW),Ih.listen(this,"progress",W5e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:s,_aspectRatio:o}=this;return Ri(t)?n&&o?o:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return kd}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():o5(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return s5(this.canvas,this.ctx),this}stop(){return Ih.stop(this),this}resize(t,n){Ih.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(s,t,n,o),i=r.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,o5(this,i,!0)&&(this.notifyPlugins("resize",{size:c}),Ji(r.onResize,[this,c],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Qi(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,s=Object.keys(r).reduce((c,i)=>(c[i]=!1,c),{});let o=[];n&&(o=o.concat(Object.keys(n).map(c=>{const i=n[c],f=c5(c,i),g=f==="r",x=f==="x";return{options:i,dposition:g?"chartArea":x?"bottom":"left",dtype:g?"radialLinear":x?"category":"linear"}}))),Qi(o,c=>{const i=c.options,f=i.id,g=c5(f,i),x=ai(i.type,c.dtype);(i.position===void 0||wW(i.position,g)!==wW(c.dposition))&&(i.position=c.dposition),s[f]=!0;let w=null;if(f in r&&r[f].type===x)w=r[f];else{const A=kd.getScale(x);w=new A({id:f,type:x,ctx:this.ctx,chart:this}),r[w.id]=w}w.init(i,t)}),Qi(s,(c,i)=>{c||delete r[i]}),Qi(r,c=>{Ya.configure(this,c,c.options),Ya.addBox(this,c)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((s,o)=>s.index-o.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(SW("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,s)=>{n.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const o=n[r];let c=this.getDatasetMeta(r);const i=o.type||this.config.type;if(c.type&&c.type!==i&&(this._destroyDatasetMeta(r),c=this.getDatasetMeta(r)),c.type=i,c.indexAxis=o.indexAxis||l5(i,this.options),c.order=o.order||0,c.index=r,c.label=""+o.label,c.visible=this.isDatasetVisible(r),c.controller)c.controller.updateIndex(r),c.controller.linkScales();else{const f=kd.getController(i),{datasetElementType:g,dataElementType:x}=to.datasets[i];Object.assign(f,{dataElementType:kd.getElement(x),datasetElementType:g&&kd.getElement(g)}),c.controller=new f(this,r),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){Qi(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let g=0,x=this.data.datasets.length;g<x;g++){const{controller:w}=this.getDatasetMeta(g),A=!s&&o.indexOf(w)===-1;w.buildOrUpdateElements(A),c=Math.max(+w.getMaxOverflow(),c)}c=this._minPadding=r.layout.autoPadding?c:0,this._updateLayout(c),s||Qi(o,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(SW("z","_idx"));const{_active:i,_lastEvent:f}=this;f?this._eventHandler(f,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){Qi(this.scales,t=>{Ya.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!QL(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:o}of n){const c=r==="_removeElements"?-o:o;G5e(t,s,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=o=>new Set(t.filter(c=>c[0]===o).map((c,i)=>i+","+c.splice(1).join(","))),s=r(0);for(let o=1;o<n;o++)if(!QL(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ya.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Qi(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ml(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),s={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ih.has(this)?this.attached&&!Ih.running(this)&&Ih.start(this):(this.draw(),EW({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let s,o;for(s=0,o=n.length;s<o;++s){const c=n[s];(!t||c.visible)&&r.push(c)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r={meta:t,index:t.index,cancelable:!0},s=WF(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&F1(n,s),t.controller.draw(),s&&z1(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return l1(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,s){const o=HLe.modes[n];return typeof o=="function"?o(this,t,r,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let s=r.filter(o=>o&&o._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=sg(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const s=r?"show":"hide",o=this.getDatasetMeta(t),c=o.controller._resolveAnimations(void 0,s);Il(n)?(o.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),c.update(o,{visible:r}),this.update(i=>i.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Ih.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),s5(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete pC[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(o,c)=>{n.addEventListener(this,o,c),t[o]=c},s=(o,c,i)=>{o.offsetX=c,o.offsetY=i,this._eventHandler(o)};Qi(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(f,g)=>{n.addEventListener(this,f,g),t[f]=g},s=(f,g)=>{t[f]&&(n.removeEventListener(this,f,g),delete t[f])},o=(f,g)=>{this.canvas&&this.resize(f,g)};let c;const i=()=>{s("attach",i),this.attached=!0,this.resize(),r("resize",o),r("detach",c)};c=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",i)},n.isAttached(this.canvas)?i():c()}unbindEvents(){Qi(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Qi(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const s=r?"set":"remove";let o,c,i,f;for(n==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),i=0,f=t.length;i<f;++i){c=t[i];const g=c&&this.getDatasetMeta(c.datasetIndex).controller;g&&g[s+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:o,index:c})=>{const i=this.getDatasetMeta(o);if(!i)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:i.data[c],index:c}});!sS(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){const s=this.options.hover,o=(f,g)=>f.filter(x=>!g.some(w=>x.datasetIndex===w.datasetIndex&&x.index===w.index)),c=o(n,t),i=r?t:o(t,n);c.length&&this.updateHoverStyle(c,s.mode,!1),i.length&&s.mode&&this.updateHoverStyle(i,s.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const o=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:s=[],options:o}=this,c=n,i=this._getActiveElements(t,s,r,c),f=jre(t),g=Y5e(t,this._lastEvent,r,f);r&&(this._lastEvent=null,Ji(o.onHover,[t,i,this],this),f&&Ji(o.onClick,[t,i,this],this));const x=!sS(i,s);return(x||n)&&(this._active=i,this._updateHoverStyles(i,s,n)),this._lastEvent=g,x}_getActiveElements(t,n,r,s){if(t.type==="mouseout")return[];if(!r)return n;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}function MW(){return Qi(Uh.instances,e=>e._plugins.invalidate())}function q5e(e,t,n){const{startAngle:r,pixelMargin:s,x:o,y:c,outerRadius:i,innerRadius:f}=t;let g=s/i;e.beginPath(),e.arc(o,c,i,r-g,n+g),f>s?(g=s/f,e.arc(o,c,f,n+g,r-g,!0)):e.arc(o,c,s,n+Ws,r-Ws),e.closePath(),e.clip()}function X5e(e){return EP(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Z5e(e,t,n,r){const s=X5e(e.options.borderRadius),o=(n-t)/2,c=Math.min(o,r*t/2),i=f=>{const g=(n-Math.min(o,f))*r/2;return Ea(f,0,Math.min(o,g))};return{outerStart:i(s.outerStart),outerEnd:i(s.outerEnd),innerStart:Ea(s.innerStart,0,c),innerEnd:Ea(s.innerEnd,0,c)}}function qv(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function zI(e,t,n,r,s,o){const{x:c,y:i,startAngle:f,pixelMargin:g,innerRadius:x}=t,w=Math.max(t.outerRadius+r+n-g,0),A=x>0?x+r+n+g:0;let C=0;const F=s-f;if(r){const Ee=x>0?x-r:0,xe=w>0?w-r:0,ke=(Ee+xe)/2,He=ke!==0?F*ke/(ke+r):F;C=(F-He)/2}const z=Math.max(.001,F*w-n/Hi)/w,j=(F-z)/2,V=f+j+C,Y=s-j-C,{outerStart:te,outerEnd:J,innerStart:ee,innerEnd:le}=Z5e(t,A,w,Y-V),oe=w-te,ve=w-J,se=V+te/oe,ie=Y-J/ve,pe=A+ee,be=A+le,Se=V+ee/pe,Ce=Y-le/be;if(e.beginPath(),o){const Ee=(se+ie)/2;if(e.arc(c,i,w,se,Ee),e.arc(c,i,w,Ee,ie),J>0){const Ke=qv(ve,ie,c,i);e.arc(Ke.x,Ke.y,J,ie,Y+Ws)}const xe=qv(be,Y,c,i);if(e.lineTo(xe.x,xe.y),le>0){const Ke=qv(be,Ce,c,i);e.arc(Ke.x,Ke.y,le,Y+Ws,Ce+Math.PI)}const ke=(Y-le/A+(V+ee/A))/2;if(e.arc(c,i,A,Y-le/A,ke,!0),e.arc(c,i,A,ke,V+ee/A,!0),ee>0){const Ke=qv(pe,Se,c,i);e.arc(Ke.x,Ke.y,ee,Se+Math.PI,V-Ws)}const He=qv(oe,V,c,i);if(e.lineTo(He.x,He.y),te>0){const Ke=qv(oe,se,c,i);e.arc(Ke.x,Ke.y,te,V-Ws,se)}}else{e.moveTo(c,i);const Ee=Math.cos(se)*w+c,xe=Math.sin(se)*w+i;e.lineTo(Ee,xe);const ke=Math.cos(ie)*w+c,He=Math.sin(ie)*w+i;e.lineTo(ke,He)}e.closePath()}function K5e(e,t,n,r,s){const{fullCircles:o,startAngle:c,circumference:i}=t;let f=t.endAngle;if(o){zI(e,t,n,r,f,s);for(let g=0;g<o;++g)e.fill();isNaN(i)||(f=c+(i%Cs||Cs))}return zI(e,t,n,r,f,s),e.fill(),f}function J5e(e,t,n,r,s){const{fullCircles:o,startAngle:c,circumference:i,options:f}=t,{borderWidth:g,borderJoinStyle:x,borderDash:w,borderDashOffset:A}=f,C=f.borderAlign==="inner";if(!g)return;e.setLineDash(w||[]),e.lineDashOffset=A,C?(e.lineWidth=g*2,e.lineJoin=x||"round"):(e.lineWidth=g,e.lineJoin=x||"bevel");let F=t.endAngle;if(o){zI(e,t,n,r,F,s);for(let z=0;z<o;++z)e.stroke();isNaN(i)||(F=c+(i%Cs||Cs))}C&&q5e(e,t,F),o||(zI(e,t,n,r,F,s),e.stroke())}class Q5e extends Za{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,r){const s=this.getProps(["x","y"],r),{angle:o,distance:c}=cS(s,{x:t,y:n}),{startAngle:i,endAngle:f,innerRadius:g,outerRadius:x,circumference:w}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),A=(this.options.spacing+this.options.borderWidth)/2,C=ai(w,f-i),F=a1(o,i,f)&&i!==f,z=C>=Cs||F,j=$d(c,g+A,x+A);return z&&j}getCenterPoint(t){const{x:n,y:r,startAngle:s,endAngle:o,innerRadius:c,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:f,spacing:g}=this.options,x=(s+o)/2,w=(c+i+g+f)/2;return{x:n+Math.cos(x)*w,y:r+Math.sin(x)*w}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:r}=this,s=(n.offset||0)/4,o=(n.spacing||0)/2,c=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>Cs?Math.floor(r/Cs):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const i=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(i)*s,Math.sin(i)*s);const f=1-Math.sin(Math.min(Hi,r||0)),g=s*f;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,K5e(t,this,g,o,c),J5e(t,this,g,o,c),t.restore()}}function kie(e,t,n=t){e.lineCap=ai(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ai(n.borderDash,t.borderDash)),e.lineDashOffset=ai(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ai(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ai(n.borderWidth,t.borderWidth),e.strokeStyle=ai(n.borderColor,t.borderColor)}function e6e(e,t,n){e.lineTo(n.x,n.y)}function t6e(e){return e.stepped?sie:e.tension||e.cubicInterpolationMode==="monotone"?oie:e6e}function Lie(e,t,n={}){const r=e.length,{start:s=0,end:o=r-1}=n,{start:c,end:i}=t,f=Math.max(s,c),g=Math.min(o,i),x=s<c&&o<c||s>i&&o>i;return{count:r,start:f,loop:t.loop,ilen:g<f&&!x?r+g-f:g-f}}function n6e(e,t,n,r){const{points:s,options:o}=t,{count:c,start:i,loop:f,ilen:g}=Lie(s,n,r),x=t6e(o);let{move:w=!0,reverse:A}=r||{},C,F,z;for(C=0;C<=g;++C)F=s[(i+(A?g-C:C))%c],!F.skip&&(w?(e.moveTo(F.x,F.y),w=!1):x(e,z,F,A,o.stepped),z=F);return f&&(F=s[(i+(A?g:0))%c],x(e,z,F,A,o.stepped)),!!f}function r6e(e,t,n,r){const s=t.points,{count:o,start:c,ilen:i}=Lie(s,n,r),{move:f=!0,reverse:g}=r||{};let x=0,w=0,A,C,F,z,j,V;const Y=J=>(c+(g?i-J:J))%o,te=()=>{z!==j&&(e.lineTo(x,j),e.lineTo(x,z),e.lineTo(x,V))};for(f&&(C=s[Y(0)],e.moveTo(C.x,C.y)),A=0;A<=i;++A){if(C=s[Y(A)],C.skip)continue;const J=C.x,ee=C.y,le=J|0;le===F?(ee<z?z=ee:ee>j&&(j=ee),x=(w*x+J)/++w):(te(),e.lineTo(J,ee),F=le,w=0,z=j=ee),V=ee}te()}function u5(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?r6e:n6e}function i6e(e){return e.stepped?vie:e.tension||e.cubicInterpolationMode==="monotone"?bie:tm}function s6e(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),kie(e,t.options),e.stroke(s)}function o6e(e,t,n,r){const{segments:s,options:o}=t,c=u5(t);for(const i of s)kie(e,o,i.style),e.beginPath(),c(e,t,i,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}const a6e=typeof Path2D=="function";function l6e(e,t,n,r){a6e&&!t.options.segment?s6e(e,t,n,r):o6e(e,t,n,r)}class OP extends Za{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;mie(this._points,r,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=wie(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){const r=this.options,s=t[n],o=this.points,c=HF(this,{property:n,start:s,end:s});if(!c.length)return;const i=[],f=i6e(r);let g,x;for(g=0,x=c.length;g<x;++g){const{start:w,end:A}=c[g],C=o[w],F=o[A];if(C===F){i.push(C);continue}const z=Math.abs((s-C[n])/(F[n]-C[n])),j=f(C,F,z,r.stepped);j[n]=t[n],i.push(j)}return i.length===1?i[0]:i}pathSegment(t,n,r){return u5(this)(t,this,n,r)}path(t,n,r){const s=this.segments,o=u5(this);let c=this._loop;n=n||0,r=r||this.points.length-n;for(const i of s)c&=o(t,this,i,{start:n,end:n+r-1});return!!c}draw(t,n,r,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),l6e(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function AW(e,t,n,r){const s=e.options,{[n]:o}=e.getProps([n],r);return Math.abs(t-o)<s.radius+s.hitRadius}class Nie extends Za{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,r){const s=this.options,{x:o,y:c}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(n-c,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,n){return AW(this,t,"x",n)}inYRange(t,n){return AW(this,t,"y",n)}getCenterPoint(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const r=n&&t.borderWidth||0;return(n+r)*2}draw(t,n){const r=this.options;this.skip||r.radius<.1||!l1(this,n,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,LI(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Fie(e,t){const{x:n,y:r,base:s,width:o,height:c}=e.getProps(["x","y","base","width","height"],t);let i,f,g,x,w;return e.horizontal?(w=c/2,i=Math.min(n,s),f=Math.max(n,s),g=r-w,x=r+w):(w=o/2,i=n-w,f=n+w,g=Math.min(r,s),x=Math.max(r,s)),{left:i,top:g,right:f,bottom:x}}function mm(e,t,n,r){return e?0:Ea(t,n,r)}function c6e(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,o=FF(r);return{t:mm(s.top,o.top,0,n),r:mm(s.right,o.right,0,t),b:mm(s.bottom,o.bottom,0,n),l:mm(s.left,o.left,0,t)}}function u6e(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,o=Im(s),c=Math.min(t,n),i=e.borderSkipped,f=r||di(s);return{topLeft:mm(!f||i.top||i.left,o.topLeft,0,c),topRight:mm(!f||i.top||i.right,o.topRight,0,c),bottomLeft:mm(!f||i.bottom||i.left,o.bottomLeft,0,c),bottomRight:mm(!f||i.bottom||i.right,o.bottomRight,0,c)}}function d6e(e){const t=Fie(e),n=t.right-t.left,r=t.bottom-t.top,s=c6e(e,n/2,r/2),o=u6e(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:o},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function ER(e,t,n,r){const s=t===null,o=n===null,i=e&&!(s&&o)&&Fie(e,r);return i&&(s||$d(t,i.left,i.right))&&(o||$d(n,i.top,i.bottom))}function h6e(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function f6e(e,t){e.rect(t.x,t.y,t.w,t.h)}function TR(e,t,n={}){const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,o=(e.x+e.w!==n.x+n.w?t:0)-r,c=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+o,h:e.h+c,radius:e.radius}}class zie extends Za{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:o,outer:c}=d6e(this),i=h6e(c.radius)?u1:f6e;t.save(),(c.w!==o.w||c.h!==o.h)&&(t.beginPath(),i(t,TR(c,n,o)),t.clip(),i(t,TR(o,-n,c)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),i(t,TR(o,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,r){return ER(this,t,n,r)}inXRange(t,n){return ER(this,t,null,n)}inYRange(t,n){return ER(this,null,t,n)}getCenterPoint(t){const{x:n,y:r,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(n+s)/2:n,y:o?r:(r+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}function p6e(e,t,n){const r=e.segments,s=e.points,o=t.points,c=[];for(const i of r){let{start:f,end:g}=i;g=qF(f,g,s);const x=d5(n,s[f],s[g],i.loop);if(!t.segments){c.push({source:i,target:x,start:s[f],end:s[g]});continue}const w=HF(t,x);for(const A of w){const C=d5(n,o[A.start],o[A.end],A.loop),F=UF(i,s,C);for(const z of F)c.push({source:z,target:A,start:{[n]:CW(x,C,"start",Math.max)},end:{[n]:CW(x,C,"end",Math.min)}})}}return c}function d5(e,t,n,r){if(r)return;let s=t[e],o=n[e];return e==="angle"&&(s=$u(s),o=$u(o)),{property:e,start:s,end:o}}function m6e(e,t){const{x:n=null,y:r=null}=e||{},s=t.points,o=[];return t.segments.forEach(({start:c,end:i})=>{i=qF(c,i,s);const f=s[c],g=s[i];r!==null?(o.push({x:f.x,y:r}),o.push({x:g.x,y:r})):n!==null&&(o.push({x:n,y:f.y}),o.push({x:n,y:g.y}))}),o}function qF(e,t,n){for(;t>e;t--){const r=n[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function CW(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function Bie(e,t){let n=[],r=!1;return rs(e)?(r=!0,n=e):n=m6e(e,t),n.length?new OP({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function IW(e){return e&&e.fill!==!1}function g6e(e,t,n){let s=e[t].fill;const o=[t];let c;if(!n)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!Jo(s))return s;if(c=e[s],!c)return!1;if(c.visible)return s;o.push(s),s=c.fill}return!1}function _6e(e,t,n){const r=x6e(e);if(di(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Jo(s)&&Math.floor(s)===s?y6e(r[0],t,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function y6e(e,t,n,r){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=r?!1:n}function v6e(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:di(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function b6e(e,t,n){let r;return e==="start"?r=n:e==="end"?r=t.options.reverse?t.min:t.max:di(e)?r=e.value:r=t.getBaseValue(),r}function x6e(e){const t=e.options,n=t.fill;let r=ai(n&&n.target,n);return r===void 0&&(r=!!t.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function w6e(e){const{scale:t,index:n,line:r}=e,s=[],o=r.segments,c=r.points,i=S6e(t,n);i.push(Bie({x:null,y:t.bottom},r));for(let f=0;f<o.length;f++){const g=o[f];for(let x=g.start;x<=g.end;x++)E6e(s,c[x],i)}return new OP({points:s,options:{}})}function S6e(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const o=r[s];if(o.index===t)break;o.hidden||n.unshift(o.dataset)}return n}function E6e(e,t,n){const r=[];for(let s=0;s<n.length;s++){const o=n[s],{first:c,last:i,point:f}=T6e(o,t,"x");if(!(!f||c&&i)){if(c)r.unshift(f);else if(e.push(f),!i)break}}e.push(...r)}function T6e(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const s=r[n],o=e.segments,c=e.points;let i=!1,f=!1;for(let g=0;g<o.length;g++){const x=o[g],w=c[x.start][n],A=c[x.end][n];if($d(s,w,A)){i=s===w,f=s===A;break}}return{first:i,last:f,point:r}}class $ie{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,r){const{x:s,y:o,radius:c}=this;return n=n||{start:0,end:Cs},t.arc(s,o,c,n.end,n.start,!0),!r.bounds}interpolate(t){const{x:n,y:r,radius:s}=this,o=t.angle;return{x:n+Math.cos(o)*s,y:r+Math.sin(o)*s,angle:o}}}function M6e(e){const{chart:t,fill:n,line:r}=e;if(Jo(n))return A6e(t,n);if(n==="stack")return w6e(e);if(n==="shape")return!0;const s=C6e(e);return s instanceof $ie?s:Bie(s,r)}function A6e(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function C6e(e){return(e.scale||{}).getPointPositionForValue?P6e(e):I6e(e)}function I6e(e){const{scale:t={},fill:n}=e,r=v6e(n,t);if(Jo(r)){const s=t.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function P6e(e){const{scale:t,fill:n}=e,r=t.options,s=t.getLabels().length,o=r.reverse?t.max:t.min,c=b6e(n,t,o),i=[];if(r.grid.circular){const f=t.getPointPositionForValue(0,o);return new $ie({x:f.x,y:f.y,radius:t.getDistanceFromCenterForValue(c)})}for(let f=0;f<s;++f)i.push(t.getPointPositionForValue(f,c));return i}function MR(e,t,n){const r=M6e(t),{chart:s,index:o,line:c,scale:i,axis:f}=t,g=c.options,x=g.fill,w=g.backgroundColor,{above:A=w,below:C=w}=x||{},F=s.getDatasetMeta(o),z=WF(s,F);r&&c.points.length&&(F1(e,n),O6e(e,{line:c,target:r,above:A,below:C,area:n,scale:i,axis:f,clip:z}),z1(e))}function O6e(e,t){const{line:n,target:r,above:s,below:o,area:c,scale:i,clip:f}=t,g=n._loop?"angle":t.axis;e.save(),g==="x"&&o!==s&&(PW(e,r,c.top),OW(e,{line:n,target:r,color:s,scale:i,property:g,clip:f}),e.restore(),e.save(),PW(e,r,c.bottom)),OW(e,{line:n,target:r,color:o,scale:i,property:g,clip:f}),e.restore()}function PW(e,t,n){const{segments:r,points:s}=t;let o=!0,c=!1;e.beginPath();for(const i of r){const{start:f,end:g}=i,x=s[f],w=s[qF(f,g,s)];o?(e.moveTo(x.x,x.y),o=!1):(e.lineTo(x.x,n),e.lineTo(x.x,x.y)),c=!!t.pathSegment(e,i,{move:c}),c?e.closePath():e.lineTo(w.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function OW(e,t){const{line:n,target:r,property:s,color:o,scale:c,clip:i}=t,f=p6e(n,r,s);for(const{source:g,target:x,start:w,end:A}of f){const{style:{backgroundColor:C=o}={}}=g,F=r!==!0;e.save(),e.fillStyle=C,D6e(e,c,i,F&&d5(s,w,A)),e.beginPath();const z=!!n.pathSegment(e,g);let j;if(F){z?e.closePath():DW(e,r,A,s);const V=!!r.pathSegment(e,x,{move:z,reverse:!0});j=z&&V,j||DW(e,r,w,s)}e.closePath(),e.fill(j?"evenodd":"nonzero"),e.restore()}}function D6e(e,t,n,r){const s=t.chart.chartArea,{property:o,start:c,end:i}=r||{};if(o==="x"||o==="y"){let f,g,x,w;o==="x"?(f=c,g=s.top,x=i,w=s.bottom):(f=s.left,g=c,x=s.right,w=i),e.beginPath(),n&&(f=Math.max(f,n.left),x=Math.min(x,n.right),g=Math.max(g,n.top),w=Math.min(w,n.bottom)),e.rect(f,g,x-f,w-g),e.clip()}}function DW(e,t,n,r){const s=t.interpolate(n,r);s&&e.lineTo(s.x,s.y)}var R6e={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,s=[];let o,c,i,f;for(c=0;c<r;++c)o=e.getDatasetMeta(c),i=o.dataset,f=null,i&&i.options&&i instanceof OP&&(f={visible:e.isDatasetVisible(c),index:c,fill:_6e(i,c,r),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:i}),o.$filler=f,s.push(f);for(c=0;c<r;++c)f=s[c],!(!f||f.fill===!1)&&(f.fill=g6e(s,c,n.propagate))},beforeDraw(e,t,n){const r=n.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let c=s.length-1;c>=0;--c){const i=s[c].$filler;i&&(i.line.updateControlPoints(o,i.axis),r&&i.fill&&MR(e.ctx,i,o))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=e.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const o=r[s].$filler;IW(o)&&MR(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;!IW(r)||n.drawTime!=="beforeDatasetDraw"||MR(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const RW=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},k6e=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class kW extends Za{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Ji(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,s)=>t.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,s=Mo(r.font),o=s.size,c=this._computeTitleHeight(),{boxWidth:i,itemHeight:f}=RW(r,o);let g,x;n.font=s.string,this.isHorizontal()?(g=this.maxWidth,x=this._fitRows(c,o,i,f)+10):(x=this.maxHeight,g=this._fitCols(c,s,i,f)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(x,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,s){const{ctx:o,maxWidth:c,options:{labels:{padding:i}}}=this,f=this.legendHitBoxes=[],g=this.lineWidths=[0],x=s+i;let w=t;o.textAlign="left",o.textBaseline="middle";let A=-1,C=-x;return this.legendItems.forEach((F,z)=>{const j=r+n/2+o.measureText(F.text).width;(z===0||g[g.length-1]+j+2*i>c)&&(w+=x,g[g.length-(z>0?0:1)]=0,C+=x,A++),f[z]={left:0,top:C,row:A,width:j,height:s},g[g.length-1]+=j+i}),w}_fitCols(t,n,r,s){const{ctx:o,maxHeight:c,options:{labels:{padding:i}}}=this,f=this.legendHitBoxes=[],g=this.columnSizes=[],x=c-t;let w=i,A=0,C=0,F=0,z=0;return this.legendItems.forEach((j,V)=>{const{itemWidth:Y,itemHeight:te}=L6e(r,n,o,j,s);V>0&&C+te+2*i>x&&(w+=A+i,g.push({width:A,height:C}),F+=A+i,z++,A=C=0),f[V]={left:F,top:C,col:z,width:Y,height:te},A=Math.max(A,Y),C+=te+i}),w+=A,g.push({width:A,height:C}),w}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:o}}=this,c=j_(o,this.left,this.width);if(this.isHorizontal()){let i=0,f=ba(r,this.left+s,this.right-this.lineWidths[i]);for(const g of n)i!==g.row&&(i=g.row,f=ba(r,this.left+s,this.right-this.lineWidths[i])),g.top+=this.top+t+s,g.left=c.leftForLtr(c.x(f),g.width),f+=g.width+s}else{let i=0,f=ba(r,this.top+t+s,this.bottom-this.columnSizes[i].height);for(const g of n)g.col!==i&&(i=g.col,f=ba(r,this.top+t+s,this.bottom-this.columnSizes[i].height)),g.top=f,g.left+=this.left+s,g.left=c.leftForLtr(c.x(g.left),g.width),f+=g.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;F1(t,this),this._draw(),z1(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:s}=this,{align:o,labels:c}=t,i=to.color,f=j_(t.rtl,this.left,this.width),g=Mo(c.font),{padding:x}=c,w=g.size,A=w/2;let C;this.drawTitle(),s.textAlign=f.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=g.string;const{boxWidth:F,boxHeight:z,itemHeight:j}=RW(c,w),V=function(le,oe,ve){if(isNaN(F)||F<=0||isNaN(z)||z<0)return;s.save();const se=ai(ve.lineWidth,1);if(s.fillStyle=ai(ve.fillStyle,i),s.lineCap=ai(ve.lineCap,"butt"),s.lineDashOffset=ai(ve.lineDashOffset,0),s.lineJoin=ai(ve.lineJoin,"miter"),s.lineWidth=se,s.strokeStyle=ai(ve.strokeStyle,i),s.setLineDash(ai(ve.lineDash,[])),c.usePointStyle){const ie={radius:z*Math.SQRT2/2,pointStyle:ve.pointStyle,rotation:ve.rotation,borderWidth:se},pe=f.xPlus(le,F/2),be=oe+A;NF(s,ie,pe,be,c.pointStyleWidth&&F)}else{const ie=oe+Math.max((w-z)/2,0),pe=f.leftForLtr(le,F),be=Im(ve.borderRadius);s.beginPath(),Object.values(be).some(Se=>Se!==0)?u1(s,{x:pe,y:ie,w:F,h:z,radius:be}):s.rect(pe,ie,F,z),s.fill(),se!==0&&s.stroke()}s.restore()},Y=function(le,oe,ve){c1(s,ve.text,le,oe+j/2,g,{strikethrough:ve.hidden,textAlign:f.textAlign(ve.textAlign)})},te=this.isHorizontal(),J=this._computeTitleHeight();te?C={x:ba(o,this.left+x,this.right-r[0]),y:this.top+x+J,line:0}:C={x:this.left+x,y:ba(o,this.top+J+x,this.bottom-n[0].height),line:0},VF(this.ctx,t.textDirection);const ee=j+x;this.legendItems.forEach((le,oe)=>{s.strokeStyle=le.fontColor,s.fillStyle=le.fontColor;const ve=s.measureText(le.text).width,se=f.textAlign(le.textAlign||(le.textAlign=c.textAlign)),ie=F+A+ve;let pe=C.x,be=C.y;f.setWidth(this.width),te?oe>0&&pe+ie+x>this.right&&(be=C.y+=ee,C.line++,pe=C.x=ba(o,this.left+x,this.right-r[C.line])):oe>0&&be+ee>this.bottom&&(pe=C.x=pe+n[C.line].width+x,C.line++,be=C.y=ba(o,this.top+J+x,this.bottom-n[C.line].height));const Se=f.x(pe);if(V(Se,be,le),pe=eie(se,pe+F+A,te?pe+ie:this.right,t.rtl),Y(f.x(pe),be,le),te)C.x+=ie+x;else if(typeof le.text!="string"){const Ce=g.lineHeight;C.y+=Vie(le,Ce)+x}else C.y+=ee}),jF(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=Mo(n.font),s=la(n.padding);if(!n.display)return;const o=j_(t.rtl,this.left,this.width),c=this.ctx,i=n.position,f=r.size/2,g=s.top+f;let x,w=this.left,A=this.width;if(this.isHorizontal())A=Math.max(...this.lineWidths),x=this.top+g,w=ba(t.align,w,this.right-A);else{const F=this.columnSizes.reduce((z,j)=>Math.max(z,j.height),0);x=g+ba(t.align,this.top,this.bottom-F-t.labels.padding-this._computeTitleHeight())}const C=ba(i,w,w+A);c.textAlign=o.textAlign(xP(i)),c.textBaseline="middle",c.strokeStyle=n.color,c.fillStyle=n.color,c.font=r.string,c1(c,n.text,C,x,r)}_computeTitleHeight(){const t=this.options.title,n=Mo(t.font),r=la(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,s,o;if($d(t,this.left,this.right)&&$d(n,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(s=o[r],$d(t,s.left,s.left+s.width)&&$d(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!z6e(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,o=k6e(s,r);s&&!o&&Ji(n.onLeave,[t,s,this],this),this._hoveredItem=r,r&&!o&&Ji(n.onHover,[t,r,this],this)}else r&&Ji(n.onClick,[t,r,this],this)}}function L6e(e,t,n,r,s){const o=N6e(r,e,t,n),c=F6e(s,r,t.lineHeight);return{itemWidth:o,itemHeight:c}}function N6e(e,t,n,r){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((o,c)=>o.length>c.length?o:c)),t+n.size/2+r.measureText(s).width}function F6e(e,t,n){let r=e;return typeof t.text!="string"&&(r=Vie(t,n)),r}function Vie(e,t){const n=e.text?e.text.length:0;return t*n}function z6e(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var B6e={id:"legend",_element:kW,start(e,t,n){const r=e.legend=new kW({ctx:e.ctx,options:n,chart:e});Ya.configure(e,r,n),Ya.addBox(e,r)},stop(e){Ya.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;Ya.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:o,useBorderRadius:c,borderRadius:i}}=e.legend.options;return e._getSortedDatasetMetas().map(f=>{const g=f.controller.getStyle(n?0:void 0),x=la(g.borderWidth);return{text:t[f.index].label,fillStyle:g.backgroundColor,fontColor:o,hidden:!f.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:g.borderColor,pointStyle:r||g.pointStyle,rotation:g.rotation,textAlign:s||g.textAlign,borderRadius:c&&(i||g.borderRadius),datasetIndex:f.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class XF extends Za{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=rs(r.text)?r.text.length:1;this._padding=la(r.padding);const o=s*Mo(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:r,bottom:s,right:o,options:c}=this,i=c.align;let f=0,g,x,w;return this.isHorizontal()?(x=ba(i,r,o),w=n+t,g=o-r):(c.position==="left"?(x=r+t,w=ba(i,s,n),f=Hi*-.5):(x=o-t,w=ba(i,n,s),f=Hi*.5),g=s-n),{titleX:x,titleY:w,maxWidth:g,rotation:f}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const r=Mo(n.font),o=r.lineHeight/2+this._padding.top,{titleX:c,titleY:i,maxWidth:f,rotation:g}=this._drawArgs(o);c1(t,n.text,0,0,r,{color:n.color,maxWidth:f,rotation:g,textAlign:xP(n.align),textBaseline:"middle",translation:[c,i]})}}function $6e(e,t){const n=new XF({ctx:e.ctx,options:t,chart:e});Ya.configure(e,n,t),Ya.addBox(e,n),e.titleBlock=n}var V6e={id:"title",_element:XF,start(e,t,n){$6e(e,n)},stop(e){const t=e.titleBlock;Ya.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;Ya.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const tA=new WeakMap;var j6e={id:"subtitle",start(e,t,n){const r=new XF({ctx:e.ctx,options:n,chart:e});Ya.configure(e,r,n),Ya.addBox(e,r),tA.set(e,r)},stop(e){Ya.removeBox(e,tA.get(e)),tA.delete(e)},beforeUpdate(e,t,n){const r=tA.get(e);Ya.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Rw={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,o=0;for(t=0,n=e.length;t<n;++t){const i=e[t].element;if(i&&i.hasValue()){const f=i.tooltipPosition();r.add(f.x),s+=f.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((i,f)=>i+f)/r.size,y:s/o}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,s=Number.POSITIVE_INFINITY,o,c,i;for(o=0,c=e.length;o<c;++o){const f=e[o].element;if(f&&f.hasValue()){const g=f.getCenterPoint(),x=ty(t,g);x<s&&(s=x,i=f)}}if(i){const f=i.tooltipPosition();n=f.x,r=f.y}return{x:n,y:r}}};function Od(e,t){return t&&(rs(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ph(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function U6e(e,t){const{element:n,datasetIndex:r,index:s}=t,o=e.getDatasetMeta(r).controller,{label:c,value:i}=o.getLabelAndValue(s);return{chart:e,label:c,parsed:o.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:i,dataset:o.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function LW(e,t){const n=e.chart.ctx,{body:r,footer:s,title:o}=e,{boxWidth:c,boxHeight:i}=t,f=Mo(t.bodyFont),g=Mo(t.titleFont),x=Mo(t.footerFont),w=o.length,A=s.length,C=r.length,F=la(t.padding);let z=F.height,j=0,V=r.reduce((J,ee)=>J+ee.before.length+ee.lines.length+ee.after.length,0);if(V+=e.beforeBody.length+e.afterBody.length,w&&(z+=w*g.lineHeight+(w-1)*t.titleSpacing+t.titleMarginBottom),V){const J=t.displayColors?Math.max(i,f.lineHeight):f.lineHeight;z+=C*J+(V-C)*f.lineHeight+(V-1)*t.bodySpacing}A&&(z+=t.footerMarginTop+A*x.lineHeight+(A-1)*t.footerSpacing);let Y=0;const te=function(J){j=Math.max(j,n.measureText(J).width+Y)};return n.save(),n.font=g.string,Qi(e.title,te),n.font=f.string,Qi(e.beforeBody.concat(e.afterBody),te),Y=t.displayColors?c+2+t.boxPadding:0,Qi(r,J=>{Qi(J.before,te),Qi(J.lines,te),Qi(J.after,te)}),Y=0,n.font=x.string,Qi(e.footer,te),n.restore(),j+=F.width,{width:j,height:z}}function H6e(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function W6e(e,t,n,r){const{x:s,width:o}=r,c=n.caretSize+n.caretPadding;if(e==="left"&&s+o+c>t.width||e==="right"&&s-o-c<0)return!0}function G6e(e,t,n,r){const{x:s,width:o}=n,{width:c,chartArea:{left:i,right:f}}=e;let g="center";return r==="center"?g=s<=(i+f)/2?"left":"right":s<=o/2?g="left":s>=c-o/2&&(g="right"),W6e(g,e,t,n)&&(g="center"),g}function NW(e,t,n){const r=n.yAlign||t.yAlign||H6e(e,n);return{xAlign:n.xAlign||t.xAlign||G6e(e,t,n,r),yAlign:r}}function Y6e(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function q6e(e,t,n){let{y:r,height:s}=e;return t==="top"?r+=n:t==="bottom"?r-=s+n:r-=s/2,r}function FW(e,t,n,r){const{caretSize:s,caretPadding:o,cornerRadius:c}=e,{xAlign:i,yAlign:f}=n,g=s+o,{topLeft:x,topRight:w,bottomLeft:A,bottomRight:C}=Im(c);let F=Y6e(t,i);const z=q6e(t,f,g);return f==="center"?i==="left"?F+=g:i==="right"&&(F-=g):i==="left"?F-=Math.max(x,A)+s:i==="right"&&(F+=Math.max(w,C)+s),{x:Ea(F,0,r.width-t.width),y:Ea(z,0,r.height-t.height)}}function nA(e,t,n){const r=la(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function zW(e){return Od([],Ph(e))}function X6e(e,t,n){return sg(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function BW(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const jie={beforeTitle:Pd,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Pd,beforeBody:Pd,beforeLabel:Pd,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Ri(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Pd,afterBody:Pd,beforeFooter:Pd,footer:Pd,afterFooter:Pd};function Vl(e,t,n,r){const s=e[t].call(n,r);return typeof s>"u"?jie[t].call(n,r):s}class $W extends Za{static positioners=Rw;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,o=new GF(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=X6e(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,s=Vl(r,"beforeTitle",this,t),o=Vl(r,"title",this,t),c=Vl(r,"afterTitle",this,t);let i=[];return i=Od(i,Ph(s)),i=Od(i,Ph(o)),i=Od(i,Ph(c)),i}getBeforeBody(t,n){return zW(Vl(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:r}=n,s=[];return Qi(t,o=>{const c={before:[],lines:[],after:[]},i=BW(r,o);Od(c.before,Ph(Vl(i,"beforeLabel",this,o))),Od(c.lines,Vl(i,"label",this,o)),Od(c.after,Ph(Vl(i,"afterLabel",this,o))),s.push(c)}),s}getAfterBody(t,n){return zW(Vl(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:r}=n,s=Vl(r,"beforeFooter",this,t),o=Vl(r,"footer",this,t),c=Vl(r,"afterFooter",this,t);let i=[];return i=Od(i,Ph(s)),i=Od(i,Ph(o)),i=Od(i,Ph(c)),i}_createItems(t){const n=this._active,r=this.chart.data,s=[],o=[],c=[];let i=[],f,g;for(f=0,g=n.length;f<g;++f)i.push(U6e(this.chart,n[f]));return t.filter&&(i=i.filter((x,w,A)=>t.filter(x,w,A,r))),t.itemSort&&(i=i.sort((x,w)=>t.itemSort(x,w,r))),Qi(i,x=>{const w=BW(t.callbacks,x);s.push(Vl(w,"labelColor",this,x)),o.push(Vl(w,"labelPointStyle",this,x)),c.push(Vl(w,"labelTextColor",this,x))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=i,i}update(t,n){const r=this.options.setContext(this.getContext()),s=this._active;let o,c=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const i=Rw[r.position].call(this,s,this._eventPosition);c=this._createItems(r),this.title=this.getTitle(c,r),this.beforeBody=this.getBeforeBody(c,r),this.body=this.getBody(c,r),this.afterBody=this.getAfterBody(c,r),this.footer=this.getFooter(c,r);const f=this._size=LW(this,r),g=Object.assign({},i,f),x=NW(this.chart,r,g),w=FW(r,g,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,o={opacity:1,x:w.x,y:w.y,width:f.width,height:f.height,caretX:i.x,caretY:i.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,s){const o=this.getCaretPosition(t,r,s);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(t,n,r){const{xAlign:s,yAlign:o}=this,{caretSize:c,cornerRadius:i}=r,{topLeft:f,topRight:g,bottomLeft:x,bottomRight:w}=Im(i),{x:A,y:C}=t,{width:F,height:z}=n;let j,V,Y,te,J,ee;return o==="center"?(J=C+z/2,s==="left"?(j=A,V=j-c,te=J+c,ee=J-c):(j=A+F,V=j+c,te=J-c,ee=J+c),Y=j):(s==="left"?V=A+Math.max(f,x)+c:s==="right"?V=A+F-Math.max(g,w)-c:V=this.caretX,o==="top"?(te=C,J=te-c,j=V-c,Y=V+c):(te=C+z,J=te+c,j=V+c,Y=V-c),ee=te),{x1:j,x2:V,x3:Y,y1:te,y2:J,y3:ee}}drawTitle(t,n,r){const s=this.title,o=s.length;let c,i,f;if(o){const g=j_(r.rtl,this.x,this.width);for(t.x=nA(this,r.titleAlign,r),n.textAlign=g.textAlign(r.titleAlign),n.textBaseline="middle",c=Mo(r.titleFont),i=r.titleSpacing,n.fillStyle=r.titleColor,n.font=c.string,f=0;f<o;++f)n.fillText(s[f],g.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i,f+1===o&&(t.y+=r.titleMarginBottom-i)}}_drawColorBox(t,n,r,s,o){const c=this.labelColors[r],i=this.labelPointStyles[r],{boxHeight:f,boxWidth:g}=o,x=Mo(o.bodyFont),w=nA(this,"left",o),A=s.x(w),C=f<x.lineHeight?(x.lineHeight-f)/2:0,F=n.y+C;if(o.usePointStyle){const z={radius:Math.min(g,f)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},j=s.leftForLtr(A,g)+g/2,V=F+f/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,LI(t,z,j,V),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,LI(t,z,j,V)}else{t.lineWidth=di(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const z=s.leftForLtr(A,g),j=s.leftForLtr(s.xPlus(A,1),g-2),V=Im(c.borderRadius);Object.values(V).some(Y=>Y!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,u1(t,{x:z,y:F,w:g,h:f,radius:V}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),u1(t,{x:j,y:F+1,w:g-2,h:f-2,radius:V}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(z,F,g,f),t.strokeRect(z,F,g,f),t.fillStyle=c.backgroundColor,t.fillRect(j,F+1,g-2,f-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:s}=this,{bodySpacing:o,bodyAlign:c,displayColors:i,boxHeight:f,boxWidth:g,boxPadding:x}=r,w=Mo(r.bodyFont);let A=w.lineHeight,C=0;const F=j_(r.rtl,this.x,this.width),z=function(ve){n.fillText(ve,F.x(t.x+C),t.y+A/2),t.y+=A+o},j=F.textAlign(c);let V,Y,te,J,ee,le,oe;for(n.textAlign=c,n.textBaseline="middle",n.font=w.string,t.x=nA(this,j,r),n.fillStyle=r.bodyColor,Qi(this.beforeBody,z),C=i&&j!=="right"?c==="center"?g/2+x:g+2+x:0,J=0,le=s.length;J<le;++J){for(V=s[J],Y=this.labelTextColors[J],n.fillStyle=Y,Qi(V.before,z),te=V.lines,i&&te.length&&(this._drawColorBox(n,t,J,F,r),A=Math.max(w.lineHeight,f)),ee=0,oe=te.length;ee<oe;++ee)z(te[ee]),A=w.lineHeight;Qi(V.after,z)}C=0,A=w.lineHeight,Qi(this.afterBody,z),t.y-=o}drawFooter(t,n,r){const s=this.footer,o=s.length;let c,i;if(o){const f=j_(r.rtl,this.x,this.width);for(t.x=nA(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=f.textAlign(r.footerAlign),n.textBaseline="middle",c=Mo(r.footerFont),n.fillStyle=r.footerColor,n.font=c.string,i=0;i<o;++i)n.fillText(s[i],f.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+r.footerSpacing}}drawBackground(t,n,r,s){const{xAlign:o,yAlign:c}=this,{x:i,y:f}=t,{width:g,height:x}=r,{topLeft:w,topRight:A,bottomLeft:C,bottomRight:F}=Im(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(i+w,f),c==="top"&&this.drawCaret(t,n,r,s),n.lineTo(i+g-A,f),n.quadraticCurveTo(i+g,f,i+g,f+A),c==="center"&&o==="right"&&this.drawCaret(t,n,r,s),n.lineTo(i+g,f+x-F),n.quadraticCurveTo(i+g,f+x,i+g-F,f+x),c==="bottom"&&this.drawCaret(t,n,r,s),n.lineTo(i+C,f+x),n.quadraticCurveTo(i,f+x,i,f+x-C),c==="center"&&o==="left"&&this.drawCaret(t,n,r,s),n.lineTo(i,f+w),n.quadraticCurveTo(i,f,i+w,f),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const c=Rw[t.position].call(this,this._active,this._eventPosition);if(!c)return;const i=this._size=LW(this,t),f=Object.assign({},c,this._size),g=NW(n,t,f),x=FW(t,f,g,n);(s._to!==x.x||o._to!==x.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=i.width,this.height=i.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const c=la(n.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&i&&(t.save(),t.globalAlpha=r,this.drawBackground(o,t,s,n),VF(t,n.textDirection),o.y+=c.top,this.drawTitle(o,t,n),this.drawBody(o,t,n),this.drawFooter(o,t,n),jF(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,s=t.map(({datasetIndex:i,index:f})=>{const g=this.chart.getDatasetMeta(i);if(!g)throw new Error("Cannot find a dataset at index "+i);return{datasetIndex:i,element:g.data[f],index:f}}),o=!sS(r,s),c=this._positionChanged(s,n);(o||c)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],c=this._getActiveElements(t,o,n,r),i=this._positionChanged(c,t),f=n||!sS(c,o)||i;return f&&(this._active=c,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),f}_getActiveElements(t,n,r,s){const o=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(i=>this.chart.data.datasets[i.datasetIndex]&&this.chart.getDatasetMeta(i.datasetIndex).controller.getParsed(i.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,o.mode,o,r);return o.reverse&&c.reverse(),c}_positionChanged(t,n){const{caretX:r,caretY:s,options:o}=this,c=Rw[o.position].call(this,t,n);return c!==!1&&(r!==c.x||s!==c.y)}}var Z6e={id:"tooltip",_element:$W,positioners:Rw,afterInit(e,t,n){n&&(e.tooltip=new $W({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jie},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const K6e=(e,t,n,r)=>(typeof t=="string"?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function J6e(e,t,n,r){const s=e.indexOf(t);if(s===-1)return K6e(e,t,n,r);const o=e.lastIndexOf(t);return s!==o?n:s}const Q6e=(e,t)=>e===null?null:Ea(Math.round(e),0,t);function VW(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class eNe extends B1{static id="category";static defaults={ticks:{callback:VW}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:o}of n)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Ri(t))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:J6e(r,t,ai(n,t),this._addedLabels),Q6e(n,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const t=this.min,n=this.max,r=this.options.offset,s=[];let o=this.getLabels();o=t===0&&n===o.length-1?o:o.slice(t,n+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let c=t;c<=n;c++)s.push({value:c});return s}getLabelForValue(t){return VW.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function tNe(e,t){const n=[],{bounds:s,step:o,min:c,max:i,precision:f,count:g,maxTicks:x,maxDigits:w,includeBounds:A}=e,C=o||1,F=x-1,{min:z,max:j}=t,V=!Ri(c),Y=!Ri(i),te=!Ri(g),J=(j-z)/(w+1);let ee=e5((j-z)/F/C)*C,le,oe,ve,se;if(ee<1e-14&&!V&&!Y)return[{value:z},{value:j}];se=Math.ceil(j/ee)-Math.floor(z/ee),se>F&&(ee=e5(se*ee/F/C)*C),Ri(f)||(le=Math.pow(10,f),ee=Math.ceil(ee*le)/le),s==="ticks"?(oe=Math.floor(z/ee)*ee,ve=Math.ceil(j/ee)*ee):(oe=z,ve=j),V&&Y&&o&&Wre((i-c)/o,ee/1e3)?(se=Math.round(Math.min((i-c)/ee,x)),ee=(i-c)/se,oe=c,ve=i):te?(oe=V?c:oe,ve=Y?i:ve,se=g-1,ee=(ve-oe)/se):(se=(ve-oe)/ee,I0(se,Math.round(se),ee/1e3)?se=Math.round(se):se=Math.ceil(se));const ie=Math.max(t5(ee),t5(oe));le=Math.pow(10,Ri(f)?ie:f),oe=Math.round(oe*le)/le,ve=Math.round(ve*le)/le;let pe=0;for(V&&(A&&oe!==c?(n.push({value:c}),oe<c&&pe++,I0(Math.round((oe+pe*ee)*le)/le,c,jW(c,J,e))&&pe++):oe<c&&pe++);pe<se;++pe){const be=Math.round((oe+pe*ee)*le)/le;if(Y&&be>i)break;n.push({value:be})}return Y&&A&&ve!==i?n.length&&I0(n[n.length-1].value,i,jW(i,J,e))?n[n.length-1].value=i:n.push({value:i}):(!Y||ve===i)&&n.push({value:ve}),n}function jW(e,t,{horizontal:n,minRotation:r}){const s=Zo(r),o=(n?Math.sin(s):Math.cos(s))||.001,c=.75*t*(""+e).length;return Math.min(t/o,c)}class nNe extends B1{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Ri(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:o}=this;const c=f=>s=n?s:f,i=f=>o=r?o:f;if(t){const f=td(s),g=td(o);f<0&&g<0?i(0):f>0&&g>0&&c(0)}if(s===o){let f=o===0?1:Math.abs(o*.05);i(o+f),t||c(s-f)}this.min=s,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=t,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,c=tNe(s,o);return t.bounds==="ticks"&&Gre(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const s=(r-n)/Math.max(t.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(t){return SP(t,this.chart.options.locale,this.options.ticks.format)}}class rNe extends nNe{static id="linear";static defaults={ticks:{callback:rie.formatters.numeric}};determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Jo(t)?t:0,this.max=Jo(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,r=Zo(this.options.ticks.minRotation),s=(t?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const DP={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Kl=Object.keys(DP);function UW(e,t){return e-t}function HW(e,t){if(Ri(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:o}=e._parseOpts;let c=t;return typeof r=="function"&&(c=r(c)),Jo(c)||(c=typeof r=="string"?n.parse(c,r):n.parse(c)),c===null?null:(s&&(c=s==="week"&&(Bm(o)||o===!0)?n.startOf(c,"isoWeek",o):n.startOf(c,s)),+c)}function WW(e,t,n,r){const s=Kl.length;for(let o=Kl.indexOf(e);o<s-1;++o){const c=DP[Kl[o]],i=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((n-t)/(i*c.size))<=r)return Kl[o]}return Kl[s-1]}function iNe(e,t,n,r,s){for(let o=Kl.length-1;o>=Kl.indexOf(n);o--){const c=Kl[o];if(DP[c].common&&e._adapter.diff(s,r,c)>=t-1)return c}return Kl[n?Kl.indexOf(n):0]}function sNe(e){for(let t=Kl.indexOf(e)+1,n=Kl.length;t<n;++t)if(DP[Kl[t]].common)return Kl[t]}function GW(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:s}=bP(n,t),o=n[r]>=t?n[r]:n[s];e[o]=!0}}function oNe(e,t,n,r){const s=e._adapter,o=+s.startOf(t[0].value,r),c=t[t.length-1].value;let i,f;for(i=o;i<=c;i=+s.add(i,1,r))f=n[i],f>=0&&(t[f].major=!0);return t}function YW(e,t,n){const r=[],s={},o=t.length;let c,i;for(c=0;c<o;++c)i=t[c],s[i]=c,r.push({value:i,major:!1});return o===0||!n?r:oNe(e,r,s,n)}class qW extends B1{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const r=t.time||(t.time={}),s=this._adapter=new BLe._date(t.adapters.date);s.init(n),C0(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:HW(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:s,max:o,minDefined:c,maxDefined:i}=this.getUserBounds();function f(g){!c&&!isNaN(g.min)&&(s=Math.min(s,g.min)),!i&&!isNaN(g.max)&&(o=Math.max(o,g.max))}(!c||!i)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),s=Jo(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),o=Jo(o)&&!isNaN(o)?o:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,c=this.max,i=Zre(s,o,c);return this._unit=n.unit||(r.autoSkip?WW(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):iNe(this,i.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:sNe(this._unit),this.initOffsets(s),t.reverse&&i.reverse(),YW(this,i,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?r=o:r=(o-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;n=Ea(n,0,c),r=Ea(r,0,c),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,s=this.options,o=s.time,c=o.unit||WW(o.minUnit,n,r,this._getLabelCapacity(n)),i=ai(s.ticks.stepSize,1),f=c==="week"?o.isoWeekday:!1,g=Bm(f)||f===!0,x={};let w=n,A,C;if(g&&(w=+t.startOf(w,"isoWeek",f)),w=+t.startOf(w,g?"day":c),t.diff(r,n,c)>1e5*i)throw new Error(n+" and "+r+" are too far apart with stepSize of "+i+" "+c);const F=s.ticks.source==="data"&&this.getDataTimestamps();for(A=w,C=0;A<r;A=+t.add(A,i,c),C++)GW(x,A,F);return(A===r||s.bounds==="ticks"||C===1)&&GW(x,A,F),Object.keys(x).sort(UW).map(z=>+z)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,o=this._unit,c=n||s[o];return this._adapter.format(t,c)}_tickFormatFunction(t,n,r,s){const o=this.options,c=o.ticks.callback;if(c)return Ji(c,[t,n,r],this);const i=o.time.displayFormats,f=this._unit,g=this._majorUnit,x=f&&i[f],w=g&&i[g],A=r[n],C=g&&w&&A&&A.major;return this._adapter.format(t,s||(C?w:x))}generateTickLabels(t){let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,s=Zo(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(s),c=Math.sin(s),i=this._resolveTickFontOptions(0).size;return{w:r*o+i*c,h:r*c+i*o}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,o=this._tickFormatFunction(t,0,YW(this,[t],this._majorUnit),s),c=this._getLabelSize(o),i=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return i>0?i:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)t.push(HW(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return RF(t.sort(UW))}}function rA(e,t,n){let r=0,s=e.length-1,o,c,i,f;n?(t>=e[r].pos&&t<=e[s].pos&&({lo:r,hi:s}=pm(e,"pos",t)),{pos:o,time:i}=e[r],{pos:c,time:f}=e[s]):(t>=e[r].time&&t<=e[s].time&&({lo:r,hi:s}=pm(e,"time",t)),{time:o,pos:i}=e[r],{time:c,pos:f}=e[s]);const g=c-o;return g?i+(f-i)*(t-o)/g:i}class Zut extends qW{static id="timeseries";static defaults=qW.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=rA(n,this.min),this._tableRange=rA(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,s=[],o=[];let c,i,f,g,x;for(c=0,i=t.length;c<i;++c)g=t[c],g>=n&&g<=r&&s.push(g);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(c=0,i=s.length;c<i;++c)x=s[c+1],f=s[c-1],g=s[c],Math.round((x+f)/2)!==g&&o.push({time:g,pos:c/(i-1)});return o}_generate(){const t=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,o)=>s-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(rA(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return rA(this._table,r*this._tableRange+this._minPos,!0)}}const aNe=Object.freeze(Object.defineProperty({__proto__:null,HALF_PI:Ws,INFINITY:aS,PI:Hi,PITAU:Ure,QUARTER_PI:xc,RAD_PER_DEG:vP,TAU:Cs,TWO_THIRDS_PI:lS,_addGrace:lie,_alignPixel:Vp,_alignStartEnd:ba,_angleBetween:a1,_angleDiff:Yre,_arrayUnique:RF,_attachContext:ry,_bezierCurveTo:oie,_bezierInterpolation:bie,_boundSegment:UF,_boundSegments:HF,_capitalize:yP,_computeSegments:wie,_createResolver:TP,_decimalPlaces:t5,_deprecated:vke,_descriptors:zF,_elementsEqual:sS,_factorize:Hre,_filterBetween:Zre,_getParentNode:AP,_getStartAndCountOfVisiblePoints:tie,_int16Range:qre,_isBetween:$d,_isClickEvent:jre,_isDomSupported:MP,_isPointInArea:l1,_limitValue:Ea,_longestText:Dke,_lookup:bP,_lookupByKey:pm,_measureText:uS,_merger:Bre,_mergerIf:$re,_normalizeAngle:$u,_parseObjectDataRadialScale:qke,_pointInLine:tm,_readValueToProps:EP,_rlookupByKey:Xre,_scaleRangesChanged:nie,_setMinAndMaxByKey:Gre,_splitKey:Vre,_steppedInterpolation:vie,_steppedLineTo:sie,_textX:eie,_toLeftRightCenter:xP,_updateBezierControlPoints:mie,addRoundedRectPath:u1,almostEquals:I0,almostWhole:Wre,callback:Ji,clearCanvas:s5,clipArea:F1,clone:oS,color:r5,createContext:sg,debounce:Qre,defined:Il,distanceBetweenPoints:ty,drawPoint:LI,drawPointLegend:NF,each:Qi,easingEffects:P0,finiteOrDefault:Lu,fontString:wke,formatNumber:SP,getAngleFromPoint:cS,getDatasetClipArea:WF,getHoverColor:hC,getMaximumSize:_ie,getRelativePosition:em,getRtlAdapter:j_,getStyle:gie,isArray:rs,isFinite:Jo,isFunction:Ml,isNullOrUndef:Ri,isNumber:Bm,isObject:di,isPatternOrGradient:wP,listenArrayEvents:Jre,log10:OF,merge:od,mergeIf:C0,niceNum:e5,noop:Pd,overrideTextDirection:VF,readUsedSize:a5,renderText:c1,requestAnimFrame:kF,resolve:Rs,resolveObjectKey:_f,restoreTextDirection:jF,retinaScale:o5,setsEqual:QL,sign:td,splineCurve:fie,splineCurveMonotone:pie,supportsEventListenerOptions:yie,throttled:LF,toDegrees:DF,toDimension:PF,toFont:Mo,toFontString:iie,toLineHeight:aie,toPadding:la,toPercentage:Fre,toRadians:Zo,toTRBL:FF,toTRBLCorners:Im,uid:Nre,unclipArea:z1,unlistenArrayEvents:n5,valueOrDefault:ai},Symbol.toStringTag,{value:"Module"}));/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const XW={modes:{point(e,t){return mC(e,t,{intersect:!0})},nearest(e,t,n){return uNe(e,t,n)},x(e,t,n){return mC(e,t,{intersect:n.intersect,axis:"x"})},y(e,t,n){return mC(e,t,{intersect:n.intersect,axis:"y"})}}};function ZF(e,t,n){return(XW.modes[n.mode]||XW.modes.nearest)(e,t,n)}function lNe(e,t,n){return n!=="x"&&n!=="y"?e.inRange(t.x,t.y,"x",!0)||e.inRange(t.x,t.y,"y",!0):e.inRange(t.x,t.y,n,!0)}function cNe(e,t,n){return n==="x"?{x:e.x,y:t.y}:n==="y"?{x:t.x,y:e.y}:t}function mC(e,t,n){return e.filter(r=>n.intersect?r.inRange(t.x,t.y):lNe(r,t,n.axis))}function uNe(e,t,n){let r=Number.POSITIVE_INFINITY;return mC(e,t,n).reduce((s,o)=>{const c=o.getCenterPoint(),i=cNe(t,c,n.axis),f=ty(t,i);return f<r?(s=[o],r=f):f===r&&s.push(o),s},[]).sort((s,o)=>s._index-o._index).slice(0,1)}function Ty(e,t,n){const r=Math.cos(n),s=Math.sin(n),o=t.x,c=t.y;return{x:o+r*(e.x-o)-s*(e.y-c),y:c+s*(e.x-o)+r*(e.y-c)}}const dNe=(e,t)=>t>e||e.length>t.length&&e.slice(0,t.length)===t,S_=.001,RP=(e,t,n)=>Math.min(n,Math.max(t,e)),Uie=(e,t)=>e.value>=e.start-t&&e.value<=e.end+t;function hNe(e,t,n){for(const r of Object.keys(e))e[r]=RP(e[r],t,n);return e}function fNe(e,t,n,r){return!e||!t||n<=0?!1:Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(n+r,2)}function Hie(e,{x:t,y:n,x2:r,y2:s},o,{borderWidth:c,hitTolerance:i}){const f=(c+i)/2,g=e.x>=t-f-S_&&e.x<=r+f+S_,x=e.y>=n-f-S_&&e.y<=s+f+S_;return o==="x"?g:(o==="y"||g)&&x}function Wie(e,{rect:t,center:n},r,{rotation:s,borderWidth:o,hitTolerance:c}){const i=Ty(e,n,Zo(-s));return Hie(i,t,r,{borderWidth:o,hitTolerance:c})}function My(e,t){const{centerX:n,centerY:r}=e.getProps(["centerX","centerY"],t);return{x:n,y:r}}function pNe(e,t,n,r=!0){const s=n.split(".");let o=0;for(const c of t.split(".")){const i=s[o++];if(parseInt(c,10)<parseInt(i,10))break;if(dNe(i,c)){if(r)throw new Error(`${e} v${n} is not supported. v${t} or newer is required.`);return!1}}return!0}const Gie=e=>typeof e=="string"&&e.endsWith("%"),Yie=e=>parseFloat(e)/100,qie=e=>RP(Yie(e),0,1),mw=(e,t)=>({x:e,y:t,x2:e,y2:t,width:0,height:0}),mNe={box:e=>mw(e.centerX,e.centerY),doughnutLabel:e=>mw(e.centerX,e.centerY),ellipse:e=>({centerX:e.centerX,centerY:e.centerX,radius:0,width:0,height:0}),label:e=>mw(e.centerX,e.centerY),line:e=>mw(e.x,e.y),point:e=>({centerX:e.centerX,centerY:e.centerY,radius:0,width:0,height:0}),polygon:e=>mw(e.centerX,e.centerY)};function KF(e,t){return t==="start"?0:t==="end"?e:Gie(t)?qie(t)*e:e/2}function $m(e,t,n=!0){return typeof t=="number"?t:Gie(t)?(n?qie(t):Yie(t))*e:e}function gNe(e,t){const{x:n,width:r}=e,s=t.textAlign;return s==="center"?n+r/2:s==="end"||s==="right"?n+r:n}function Xie(e,t,{borderWidth:n,position:r,xAdjust:s,yAdjust:o},c){const i=di(c),f=t.width+(i?c.width:0)+n,g=t.height+(i?c.height:0)+n,x=JF(r),w=ZW(e.x,f,s,x.x),A=ZW(e.y,g,o,x.y);return{x:w,y:A,x2:w+f,y2:A+g,width:f,height:g,centerX:w+f/2,centerY:A+g/2}}function JF(e,t="center"){return di(e)?{x:ai(e.x,t),y:ai(e.y,t)}:(e=ai(e,t),{x:e,y:e})}const Zie=(e,t)=>e&&e.autoFit&&t<1;function Kie(e,t){const n=e.font,r=rs(n)?n:[n];return Zie(e,t)?r.map(function(s){const o=Mo(s);return o.size=Math.floor(s.size*t),o.lineHeight=s.lineHeight,Mo(o)}):r.map(s=>Mo(s))}function Jie(e){return e&&(Il(e.xValue)||Il(e.yValue))}function ZW(e,t,n=0,r){return e-KF(t,r)+n}function $1(e,t,n){const r=n.init;if(r){if(r===!0)return ese(t,n)}else return;return _Ne(e,t,n)}function Qie(e,t,n){let r=!1;return t.forEach(s=>{Ml(e[s])?(r=!0,n[s]=e[s]):Il(n[s])&&delete n[s]}),r}function ese(e,t){const n=t.type||"line";return mNe[n](e)}function _Ne(e,t,n){const r=Ji(n.init,[{chart:e,properties:t,options:n}]);if(r===!0)return ese(t,n);if(di(r))return r}const AR=new Map,yNe=e=>isNaN(e)||e<=0,vNe=e=>e.reduce(function(t,n){return t+=n.string,t},"");function kP(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function LP(e,{x:t,y:n},r){r&&(e.translate(t,n),e.rotate(Zo(r)),e.translate(-t,-n))}function yf(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle||"butt",e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle||"miter",e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function V1(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function NP(e,t){const n=t.content;if(kP(n))return{width:$m(n.width,t.width),height:$m(n.height,t.height)};const r=Kie(t),s=t.textStrokeWidth,o=rs(n)?n:[n],c=o.join()+vNe(r)+s+(e._measureText?"-spriting":"");return AR.has(c)||AR.set(c,SNe(e,o,r,s)),AR.get(c)}function tse(e,t,n){const{x:r,y:s,width:o,height:c}=t;e.save(),V1(e,n);const i=yf(e,n);e.fillStyle=n.backgroundColor,e.beginPath(),u1(e,{x:r,y:s,w:o,h:c,radius:hNe(Im(n.borderRadius),0,Math.min(o,c)/2)}),e.closePath(),e.fill(),i&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore()}function nse(e,t,n,r){const s=n.content;if(kP(s)){e.save(),e.globalAlpha=MNe(n.opacity,s.style.opacity),e.drawImage(s,t.x,t.y,t.width,t.height),e.restore();return}const o=rs(s)?s:[s],c=Kie(n,r),i=n.color,f=rs(i)?i:[i],g=gNe(t,n),x=t.y+n.textStrokeWidth/2;e.save(),e.textBaseline="middle",e.textAlign=n.textAlign,bNe(e,n)&&ENe(e,{x:g,y:x},o,c),TNe(e,{x:g,y:x},o,{fonts:c,colors:f}),e.restore()}function bNe(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}function xNe(e,t,n,r){const{radius:s,options:o}=t,c=o.pointStyle,i=o.rotation;let f=(i||0)*vP;if(kP(c)){e.save(),e.translate(n,r),e.rotate(f),e.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),e.restore();return}yNe(s)||wNe(e,{x:n,y:r,radius:s,rotation:i,style:c,rad:f})}function wNe(e,{x:t,y:n,radius:r,rotation:s,style:o,rad:c}){let i,f,g,x;switch(e.beginPath(),o){default:e.arc(t,n,r,0,Cs),e.closePath();break;case"triangle":e.moveTo(t+Math.sin(c)*r,n-Math.cos(c)*r),c+=lS,e.lineTo(t+Math.sin(c)*r,n-Math.cos(c)*r),c+=lS,e.lineTo(t+Math.sin(c)*r,n-Math.cos(c)*r),e.closePath();break;case"rectRounded":x=r*.516,g=r-x,i=Math.cos(c+xc)*g,f=Math.sin(c+xc)*g,e.arc(t-i,n-f,x,c-Hi,c-Ws),e.arc(t+f,n-i,x,c-Ws,c),e.arc(t+i,n+f,x,c,c+Ws),e.arc(t-f,n+i,x,c+Ws,c+Hi),e.closePath();break;case"rect":if(!s){g=Math.SQRT1_2*r,e.rect(t-g,n-g,2*g,2*g);break}c+=xc;case"rectRot":i=Math.cos(c)*r,f=Math.sin(c)*r,e.moveTo(t-i,n-f),e.lineTo(t+f,n-i),e.lineTo(t+i,n+f),e.lineTo(t-f,n+i),e.closePath();break;case"crossRot":c+=xc;case"cross":i=Math.cos(c)*r,f=Math.sin(c)*r,e.moveTo(t-i,n-f),e.lineTo(t+i,n+f),e.moveTo(t+f,n-i),e.lineTo(t-f,n+i);break;case"star":i=Math.cos(c)*r,f=Math.sin(c)*r,e.moveTo(t-i,n-f),e.lineTo(t+i,n+f),e.moveTo(t+f,n-i),e.lineTo(t-f,n+i),c+=xc,i=Math.cos(c)*r,f=Math.sin(c)*r,e.moveTo(t-i,n-f),e.lineTo(t+i,n+f),e.moveTo(t+f,n-i),e.lineTo(t-f,n+i);break;case"line":i=Math.cos(c)*r,f=Math.sin(c)*r,e.moveTo(t-i,n-f),e.lineTo(t+i,n+f);break;case"dash":e.moveTo(t,n),e.lineTo(t+Math.cos(c)*r,n+Math.sin(c)*r);break}e.fill()}function SNe(e,t,n,r){e.save();const s=t.length;let o=0,c=r;for(let i=0;i<s;i++){const f=n[Math.min(i,n.length-1)];e.font=f.string;const g=t[i];o=Math.max(o,e.measureText(g).width+r),c+=f.lineHeight}return e.restore(),{width:o,height:c}}function ENe(e,{x:t,y:n},r,s){e.beginPath();let o=0;r.forEach(function(c,i){const f=s[Math.min(i,s.length-1)],g=f.lineHeight;e.font=f.string,e.strokeText(c,t,n+g/2+o),o+=g}),e.stroke()}function TNe(e,{x:t,y:n},r,{fonts:s,colors:o}){let c=0;r.forEach(function(i,f){const g=o[Math.min(f,o.length-1)],x=s[Math.min(f,s.length-1)],w=x.lineHeight;e.beginPath(),e.font=x.string,e.fillStyle=g,e.fillText(i,t,n+w/2+c),c+=w,e.fill()})}function MNe(e,t){const n=Bm(e)?e:t;return Bm(n)?RP(n,0,1):1}const rse=["left","bottom","top","right"];function ANe(e,t){const{pointX:n,pointY:r,options:s}=t,o=s.callout,c=o&&o.display&&DNe(t,o);if(!c||kNe(t,o,c))return;if(e.save(),e.beginPath(),!yf(e,o))return e.restore();const{separatorStart:f,separatorEnd:g}=CNe(t,c),{sideStart:x,sideEnd:w}=PNe(t,c,f);(o.margin>0||s.borderWidth===0)&&(e.moveTo(f.x,f.y),e.lineTo(g.x,g.y)),e.moveTo(x.x,x.y),e.lineTo(w.x,w.y);const A=Ty({x:n,y:r},t.getCenterPoint(),Zo(-t.rotation));e.lineTo(A.x,A.y),e.stroke(),e.restore()}function CNe(e,t){const{x:n,y:r,x2:s,y2:o}=e,c=INe(e,t);let i,f;return t==="left"||t==="right"?(i={x:n+c,y:r},f={x:i.x,y:o}):(i={x:n,y:r+c},f={x:s,y:i.y}),{separatorStart:i,separatorEnd:f}}function INe(e,t){const{width:n,height:r,options:s}=e,o=s.callout.margin+s.borderWidth/2;return t==="right"?n+o:t==="bottom"?r+o:-o}function PNe(e,t,n){const{y:r,width:s,height:o,options:c}=e,i=c.callout.start,f=ONe(t,c.callout);let g,x;return t==="left"||t==="right"?(g={x:n.x,y:r+$m(o,i)},x={x:g.x+f,y:g.y}):(g={x:n.x+$m(s,i),y:n.y},x={x:g.x,y:g.y+f}),{sideStart:g,sideEnd:x}}function ONe(e,t){const n=t.side;return e==="left"||e==="top"?-n:n}function DNe(e,t){const n=t.position;return rse.includes(n)?n:RNe(e,t)}function RNe(e,t){const{x:n,y:r,x2:s,y2:o,width:c,height:i,pointX:f,pointY:g,centerX:x,centerY:w,rotation:A}=e,C={x,y:w},F=t.start,z=$m(c,F),j=$m(i,F),V=[n,n+z,n+z,s],Y=[r+j,o,r,o],te=[];for(let J=0;J<4;J++){const ee=Ty({x:V[J],y:Y[J]},C,Zo(A));te.push({position:rse[J],distance:ty(ee,{x:f,y:g})})}return te.sort((J,ee)=>J.distance-ee.distance)[0].position}function kNe(e,t,n){const{pointX:r,pointY:s}=e,o=t.margin;let c=r,i=s;return n==="left"?c+=o:n==="right"?c-=o:n==="top"?i+=o:n==="bottom"&&(i-=o),e.inRange(c,i)}const KW={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function h1(e,t,n){return t=typeof t=="number"?t:e.parse(t),Jo(t)?e.getPixelForValue(t):n}function iy(e,t,n){const r=t[n];if(r||n==="scaleID")return r;const s=n.charAt(0),o=Object.values(e).filter(c=>c.axis&&c.axis===s);return o.length?o[0].id:s}function ise(e,t){if(e){const n=e.options.reverse,r=h1(e,t.min,n?t.end:t.start),s=h1(e,t.max,n?t.start:t.end);return{start:r,end:s}}}function sse(e,t){const{chartArea:n,scales:r}=e,s=r[iy(r,t,"xScaleID")],o=r[iy(r,t,"yScaleID")];let c=n.width/2,i=n.height/2;return s&&(c=h1(s,t.xValue,s.left+s.width/2)),o&&(i=h1(o,t.yValue,o.top+o.height/2)),{x:c,y:i}}function QF(e,t){const n=e.scales,r=n[iy(n,t,"xScaleID")],s=n[iy(n,t,"yScaleID")];if(!r&&!s)return{};let{left:o,right:c}=r||e.chartArea,{top:i,bottom:f}=s||e.chartArea;const g=JW(r,{min:t.xMin,max:t.xMax,start:o,end:c});o=g.start,c=g.end;const x=JW(s,{min:t.yMin,max:t.yMax,start:f,end:i});return i=x.start,f=x.end,{x:o,y:i,x2:c,y2:f,width:c-o,height:f-i,centerX:o+(c-o)/2,centerY:i+(f-i)/2}}function ose(e,t){if(!Jie(t)){const n=QF(e,t);let r=t.radius;(!r||isNaN(r))&&(r=Math.min(n.width,n.height)/2,t.radius=r);const s=r*2,o=n.centerX+t.xAdjust,c=n.centerY+t.yAdjust;return{x:o-r,y:c-r,x2:o+r,y2:c+r,centerX:o,centerY:c,width:s,height:s,radius:r}}return NNe(e,t)}function LNe(e,t){const{scales:n,chartArea:r}=e,s=n[t.scaleID],o={x:r.left,y:r.top,x2:r.right,y2:r.bottom};return s?FNe(s,o,t):zNe(n,o,t),o}function ase(e,t){const n=QF(e,t);return n.initProperties=$1(e,n,t),n.elements=[{type:"label",optionScope:"label",properties:VNe(e,n,t),initProperties:n.initProperties}],n}function NNe(e,t){const n=sse(e,t),r=t.radius*2;return{x:n.x-t.radius+t.xAdjust,y:n.y-t.radius+t.yAdjust,x2:n.x+t.radius+t.xAdjust,y2:n.y+t.radius+t.yAdjust,centerX:n.x+t.xAdjust,centerY:n.y+t.yAdjust,radius:t.radius,width:r,height:r}}function JW(e,t){const n=ise(e,t)||t;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function FNe(e,t,n){const r=h1(e,n.value,NaN),s=h1(e,n.endValue,r);e.isHorizontal()?(t.x=r,t.x2=s):(t.y=r,t.y2=s)}function zNe(e,t,n){for(const r of Object.keys(KW)){const s=e[iy(e,n,r)];if(s){const{min:o,max:c,start:i,end:f,startProp:g,endProp:x}=KW[r],w=ise(s,{min:n[o],max:n[c],start:s[i],end:s[f]});t[g]=w.start,t[x]=w.end}}}function BNe({properties:e,options:t},n,r,s){const{x:o,x2:c,width:i}=e;return lse({start:o,end:c,borderWidth:t.borderWidth},{position:r.x,padding:{start:s.left,end:s.right},adjust:t.label.xAdjust,size:n.width})}function $Ne({properties:e,options:t},n,r,s){const{y:o,y2:c,height:i}=e;return lse({start:o,end:c,borderWidth:t.borderWidth},{position:r.y,padding:{start:s.top,end:s.bottom},adjust:t.label.yAdjust,size:n.height})}function lse(e,t){const{start:n,end:r,borderWidth:s}=e,{position:o,padding:{start:c,end:i},adjust:f}=t,g=r-s-n-c-i-t.size;return n+s/2+f+KF(g,o)}function VNe(e,t,n){const r=n.label;r.backgroundColor="transparent",r.callout.display=!1;const s=JF(r.position),o=la(r.padding),c=NP(e.ctx,r),i=BNe({properties:t,options:n},c,s,o),f=$Ne({properties:t,options:n},c,s,o),g=c.width+o.width,x=c.height+o.height;return{x:i,y:f,x2:i+g,y2:f+x,width:g,height:x,centerX:i+g/2,centerY:f+x/2,rotation:r.rotation}}const h5=["enter","leave"],ez=h5.concat("click");function jNe(e,t,n){t.listened=Qie(n,ez,t.listeners),t.moveListened=!1,h5.forEach(r=>{Ml(n[r])&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(r=>{!t.listened&&Ml(r.click)&&(t.listened=!0),t.moveListened||h5.forEach(s=>{Ml(r[s])&&(t.listened=!0,t.moveListened=!0)})})}function UNe(e,t,n){if(e.listened)switch(t.type){case"mousemove":case"mouseout":return HNe(e,t,n);case"click":return WNe(e,t,n)}}function HNe(e,t,n){if(!e.moveListened)return;let r;t.type==="mousemove"?r=ZF(e.visibleElements,t,n.interaction):r=[];const s=e.hovered;e.hovered=r;const o={state:e,event:t};let c=QW(o,"leave",s,r);return QW(o,"enter",r,s)||c}function QW({state:e,event:t},n,r,s){let o;for(const c of r)s.indexOf(c)<0&&(o=cse(c.options[n]||e.listeners[n],c,t)||o);return o}function WNe(e,t,n){const r=e.listeners,s=ZF(e.visibleElements,t,n.interaction);let o;for(const c of s)o=cse(c.options.click||r.click,c,t)||o;return o}function cse(e,t,n){return Ji(e,[t.$context,n])===!0}const BI=["afterDraw","beforeDraw"];function GNe(e,t,n){const r=t.visibleElements;t.hooked=Qie(n,BI,t.hooks),t.hooked||r.forEach(s=>{t.hooked||BI.forEach(o=>{Ml(s.options[o])&&(t.hooked=!0)})})}function eG(e,t,n){if(e.hooked){const r=t.options[n]||e.hooks[n];return Ji(r,[t.$context])}}function YNe(e,t,n){const r=JNe(e.scales,t,n);let s=tG(t,r,"min","suggestedMin");s=tG(t,r,"max","suggestedMax")||s,s&&Ml(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function qNe(e,t){for(const n of e)ZNe(n,t)}function tG(e,t,n,r){if(Jo(t[n])&&!XNe(e.options,n,r)){const s=e[n]!==t[n];return e[n]=t[n],s}}function XNe(e,t,n){return Il(e[t])||Il(e[n])}function ZNe(e,t){for(const n of["scaleID","xScaleID","yScaleID"]){const r=iy(t,e,n);r&&!t[r]&&KNe(e,n)&&console.warn(`No scale found with id '${r}' for annotation '${e.id}'`)}}function KNe(e,t){if(t==="scaleID")return!0;const n=t.charAt(0);for(const r of["Min","Max","Value"])if(Il(e[n+r]))return!0;return!1}function JNe(e,t,n){const r=t.axis,s=t.id,o=r+"ScaleID",c={min:ai(t.min,Number.NEGATIVE_INFINITY),max:ai(t.max,Number.POSITIVE_INFINITY)};for(const i of n)i.scaleID===s?nG(i,t,["value","endValue"],c):iy(e,i,o)===s&&nG(i,t,[r+"Min",r+"Max",r+"Value"],c);return c}function nG(e,t,n,r){for(const s of n){const o=e[s];if(Il(o)){const c=t.parse(o);r.min=Math.min(r.min,c),r.max=Math.max(r.max,c)}}}class j1 extends Za{inRange(t,n,r,s){const{x:o,y:c}=Ty({x:t,y:n},this.getCenterPoint(s),Zo(-this.options.rotation));return Hie({x:o,y:c},this.getProps(["x","y","x2","y2"],s),r,this.options)}getCenterPoint(t){return My(this,t)}draw(t){t.save(),LP(t,this.getCenterPoint(),this.options.rotation),tse(t,this,this.options),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,n){return ase(t,n)}}j1.id="boxAnnotation";j1.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};j1.defaultRoutes={borderColor:"color",backgroundColor:"color"};j1.descriptors={label:{_fallback:!0}};class FP extends Za{inRange(t,n,r,s){return Wie({x:t,y:n},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},r,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return My(this,t)}draw(t){const n=this.options;!n.display||!n.content||(iFe(t,this),t.save(),LP(t,this.getCenterPoint(),this.rotation),nse(t,this,n,this._fitRatio),t.restore())}resolveElementProperties(t,n){const r=QNe(t,n);if(!r)return{};const{controllerMeta:s,point:o,radius:c}=tFe(t,n,r);let i=NP(t.ctx,n);const f=nFe(i,c);Zie(n,f)&&(i={width:i.width*f,height:i.height*f});const{position:g,xAdjust:x,yAdjust:w}=n,A=Xie(o,i,{borderWidth:0,position:g,xAdjust:x,yAdjust:w});return{initProperties:$1(t,A,n),...A,...s,rotation:n.rotation,_fitRatio:f}}}FP.id="doughnutLabelAnnotation";FP.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};FP.defaultRoutes={};function QNe(e,t){return e.getSortedVisibleDatasetMetas().reduce(function(n,r){const s=r.controller;return s instanceof FLe&&eFe(e,t,r.data)&&(!n||s.innerRadius<n.controller.innerRadius)&&s.options.circumference>=90?r:n},void 0)}function eFe(e,t,n){if(!t.autoHide)return!0;for(let r=0;r<n.length;r++)if(!n[r].hidden&&e.getDataVisibility(r))return!0}function tFe({chartArea:e},t,n){const{left:r,top:s,right:o,bottom:c}=e,{innerRadius:i,offsetX:f,offsetY:g}=n.controller,x=(r+o)/2+f,w=(s+c)/2+g,A={left:Math.max(x-i,r),right:Math.min(x+i,o),top:Math.max(w-i,s),bottom:Math.min(w+i,c)},C={x:(A.left+A.right)/2,y:(A.top+A.bottom)/2},F=t.spacing+t.borderWidth/2,z=i-F,j=C.y>w,V=j?s+F:c-F,Y=rFe(V,x,w,z);return{controllerMeta:{_centerX:x,_centerY:w,_radius:z,_counterclockwise:j,...Y},point:C,radius:Math.min(i,Math.min(A.right-A.left,A.bottom-A.top)/2)}}function nFe({width:e,height:t},n){const r=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return n*2/r}function rFe(e,t,n,r){const s=Math.pow(n-e,2),o=Math.pow(r,2),c=t*-2,i=Math.pow(t,2)+s-o,f=Math.pow(c,2)-4*i;if(f<=0)return{_startAngle:0,_endAngle:Cs};const g=(-c-Math.sqrt(f))/2,x=(-c+Math.sqrt(f))/2;return{_startAngle:cS({x:t,y:n},{x:g,y:e}).angle,_endAngle:cS({x:t,y:n},{x,y:e}).angle}}function iFe(e,t){const{_centerX:n,_centerY:r,_radius:s,_startAngle:o,_endAngle:c,_counterclockwise:i,options:f}=t;e.save();const g=yf(e,f);e.fillStyle=f.backgroundColor,e.beginPath(),e.arc(n,r,s,o,c,i),e.closePath(),e.fill(),g&&e.stroke(),e.restore()}class QS extends Za{inRange(t,n,r,s){return Wie({x:t,y:n},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},r,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return My(this,t)}draw(t){const n=this.options,r=!Il(this._visible)||this._visible;!n.display||!n.content||!r||(t.save(),LP(t,this.getCenterPoint(),this.rotation),ANe(t,this),tse(t,this,n),nse(t,sFe(this),n),t.restore())}resolveElementProperties(t,n){let r;if(Jie(n))r=sse(t,n);else{const{centerX:i,centerY:f}=QF(t,n);r={x:i,y:f}}const s=la(n.padding),o=NP(t.ctx,n),c=Xie(r,o,n,s);return{initProperties:$1(t,c,n),pointX:r.x,pointY:r.y,...c,rotation:n.rotation}}}QS.id="labelAnnotation";QS.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};QS.defaultRoutes={borderColor:"color"};function sFe({x:e,y:t,width:n,height:r,options:s}){const o=s.borderWidth/2,c=la(s.padding);return{x:e+c.left+o,y:t+c.top+o,width:n-c.left-c.right-s.borderWidth,height:r-c.top-c.bottom-s.borderWidth}}const tz=(e,t,n)=>({x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}),f5=(e,t,n)=>tz(t,n,Math.abs((e-t.y)/(n.y-t.y))).x,rG=(e,t,n)=>tz(t,n,Math.abs((e-t.x)/(n.x-t.x))).y,kw=e=>e*e,oFe=(e,t,{x:n,y:r,x2:s,y2:o},c)=>c==="y"?{start:Math.min(r,o),end:Math.max(r,o),value:t}:{start:Math.min(n,s),end:Math.max(n,s),value:e},iG=(e,t,n,r)=>(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n,p5=(e,t,n,r)=>({x:iG(e.x,t.x,n.x,r),y:iG(e.y,t.y,n.y,r)}),sG=(e,t,n,r)=>2*(1-r)*(t-e)+2*r*(n-t),oG=(e,t,n,r)=>-Math.atan2(sG(e.x,t.x,n.x,r),sG(e.y,t.y,n.y,r))+.5*Hi;class eE extends Za{inRange(t,n,r,s){const o=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y"){const c={mouseX:t,mouseY:n},{path:i,ctx:f}=this;if(i){yf(f,this.options),f.lineWidth+=this.options.hitTolerance;const{chart:x}=this.$context,w=t*x.currentDevicePixelRatio,A=n*x.currentDevicePixelRatio,C=f.isPointInStroke(i,w,A)||m5(this,c,s);return f.restore(),C}const g=kw(o);return uFe(this,c,g,s)||m5(this,c,s)}return aFe(this,{mouseX:t,mouseY:n},r,{hitSize:o,useFinalPosition:s})}getCenterPoint(t){return My(this,t)}draw(t){const{x:n,y:r,x2:s,y2:o,cp:c,options:i}=this;if(t.save(),!yf(t,i))return t.restore();V1(t,i);const f=Math.sqrt(Math.pow(s-n,2)+Math.pow(o-r,2));if(i.curve&&c)return yFe(t,this,c,f),t.restore();const{startOpts:g,endOpts:x,startAdjust:w,endAdjust:A}=use(this),C=Math.atan2(o-r,s-n);t.translate(n,r),t.rotate(C),t.beginPath(),t.moveTo(0+w,0),t.lineTo(f-A,0),t.shadowColor=i.borderShadowColor,t.stroke(),g5(t,0,w,g),g5(t,f,-A,x),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,n){const r=LNe(t,n),{x:s,y:o,x2:c,y2:i}=r,f=lFe(r,t.chartArea),g=f?cFe({x:s,y:o},{x:c,y:i},t.chartArea):{x:s,y:o,x2:c,y2:i,width:Math.abs(c-s),height:Math.abs(i-o)};if(g.centerX=(c+s)/2,g.centerY=(i+o)/2,g.initProperties=$1(t,g,n),n.curve){const w={x:g.x,y:g.y},A={x:g.x2,y:g.y2};g.cp=_Fe(g,n,ty(w,A))}const x=dFe(t,g,n.label);return x._visible=f,g.elements=[{type:"label",optionScope:"label",properties:x,initProperties:g.initProperties}],g}}eE.id="lineAnnotation";const aG={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};eE.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},aG),fill:!1,length:12,start:Object.assign({},aG),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},QS.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};eE.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};eE.defaultRoutes={borderColor:"color"};function aFe(e,{mouseX:t,mouseY:n},r,{hitSize:s,useFinalPosition:o}){const c=oFe(t,n,e.getProps(["x","y","x2","y2"],o),r);return Uie(c,s)||m5(e,{mouseX:t,mouseY:n},o,r)}function lFe({x:e,y:t,x2:n,y2:r},{top:s,right:o,bottom:c,left:i}){return!(e<i&&n<i||e>o&&n>o||t<s&&r<s||t>c&&r>c)}function lG({x:e,y:t},n,{top:r,right:s,bottom:o,left:c}){return e<c&&(t=rG(c,{x:e,y:t},n),e=c),e>s&&(t=rG(s,{x:e,y:t},n),e=s),t<r&&(e=f5(r,{x:e,y:t},n),t=r),t>o&&(e=f5(o,{x:e,y:t},n),t=o),{x:e,y:t}}function cFe(e,t,n){const{x:r,y:s}=lG(e,t,n),{x:o,y:c}=lG(t,e,n);return{x:r,y:s,x2:o,y2:c,width:Math.abs(o-r),height:Math.abs(c-s)}}function uFe(e,{mouseX:t,mouseY:n},r=S_,s){const{x:o,y:c,x2:i,y2:f}=e.getProps(["x","y","x2","y2"],s),g=i-o,x=f-c,w=kw(g)+kw(x),A=w===0?-1:((t-o)*g+(n-c)*x)/w;let C,F;return A<0?(C=o,F=c):A>1?(C=i,F=f):(C=o+A*g,F=c+A*x),kw(t-C)+kw(n-F)<=r}function m5(e,{mouseX:t,mouseY:n},r,s){const o=e.label;return o.options.display&&o.inRange(t,n,s,r)}function dFe(e,t,n){const r=n.borderWidth,s=la(n.padding),o=NP(e.ctx,n),c=o.width+s.width+r,i=o.height+s.height+r;return fFe(t,n,{width:c,height:i,padding:s},e.chartArea)}function hFe(e){const{x:t,y:n,x2:r,y2:s}=e,o=Math.atan2(s-n,r-t);return o>Hi/2?o-Hi:o<Hi/-2?o+Hi:o}function fFe(e,t,n,r){const{width:s,height:o,padding:c}=n,{xAdjust:i,yAdjust:f}=t,g={x:e.x,y:e.y},x={x:e.x2,y:e.y2},w=t.rotation==="auto"?hFe(e):Zo(t.rotation),A=pFe(s,o,w),C=mFe(e,t,{labelSize:A,padding:c},r),F=e.cp?p5(g,e.cp,x,C):tz(g,x,C),z={size:A.w,min:r.left,max:r.right,padding:c.left},j={size:A.h,min:r.top,max:r.bottom,padding:c.top},V=uG(F.x,z)+i,Y=uG(F.y,j)+f;return{x:V-s/2,y:Y-o/2,x2:V+s/2,y2:Y+o/2,centerX:V,centerY:Y,pointX:F.x,pointY:F.y,width:s,height:o,rotation:DF(w)}}function pFe(e,t,n){const r=Math.cos(n),s=Math.sin(n);return{w:Math.abs(e*r)+Math.abs(t*s),h:Math.abs(e*s)+Math.abs(t*r)}}function mFe(e,t,n,r){let s;const o=gFe(e,r);return t.position==="start"?s=cG({w:e.x2-e.x,h:e.y2-e.y},n,t,o):t.position==="end"?s=1-cG({w:e.x-e.x2,h:e.y-e.y2},n,t,o):s=KF(1,t.position),s}function cG(e,t,n,r){const{labelSize:s,padding:o}=t,c=e.w*r.dx,i=e.h*r.dy,f=c>0&&(s.w/2+o.left-r.x)/c,g=i>0&&(s.h/2+o.top-r.y)/i;return RP(Math.max(f,g),0,.25)}function gFe(e,t){const{x:n,x2:r,y:s,y2:o}=e,c=Math.min(s,o)-t.top,i=Math.min(n,r)-t.left,f=t.bottom-Math.max(s,o),g=t.right-Math.max(n,r);return{x:Math.min(i,g),y:Math.min(c,f),dx:i<=g?1:-1,dy:c<=f?1:-1}}function uG(e,t){const{size:n,min:r,max:s,padding:o}=t,c=n/2;return n>s-r?(s+r)/2:(r>=e-o-c&&(e=r+o+c),s<=e+o+c&&(e=s-o-c),e)}function use(e){const t=e.options,n=t.arrowHeads&&t.arrowHeads.start,r=t.arrowHeads&&t.arrowHeads.end;return{startOpts:n,endOpts:r,startAdjust:dG(e,n),endAdjust:dG(e,r)}}function dG(e,t){if(!t||!t.display)return 0;const{length:n,width:r}=t,s=e.options.borderWidth/2,o={x:n,y:r+s};return Math.abs(f5(0,o,{x:0,y:s}))}function g5(e,t,n,r){if(!r||!r.display)return;const{length:s,width:o,fill:c,backgroundColor:i,borderColor:f}=r,g=Math.abs(t-s)+n;e.beginPath(),V1(e,r),yf(e,r),e.moveTo(g,-o),e.lineTo(t+n,0),e.lineTo(g,o),c===!0?(e.fillStyle=i||f,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=r.borderShadowColor,e.stroke()}function _Fe(e,t,n){const{x:r,y:s,x2:o,y2:c,centerX:i,centerY:f}=e,g=Math.atan2(c-s,o-r),x=JF(t.controlPoint,0),w={x:i+$m(n,x.x,!1),y:f+$m(n,x.y,!1)};return Ty(w,{x:i,y:f},g)}function hG(e,{x:t,y:n},{angle:r,adjust:s},o){!o||!o.display||(e.save(),e.translate(t,n),e.rotate(r),g5(e,0,-s,o),e.restore())}function yFe(e,t,n,r){const{x:s,y:o,x2:c,y2:i,options:f}=t,{startOpts:g,endOpts:x,startAdjust:w,endAdjust:A}=use(t),C={x:s,y:o},F={x:c,y:i},z=oG(C,n,F,0),j=oG(C,n,F,1)-Hi,V=p5(C,n,F,w/r),Y=p5(C,n,F,1-A/r),te=new Path2D;e.beginPath(),te.moveTo(V.x,V.y),te.quadraticCurveTo(n.x,n.y,Y.x,Y.y),e.shadowColor=f.borderShadowColor,e.stroke(te),t.path=te,t.ctx=e,hG(e,V,{angle:z,adjust:w},g),hG(e,Y,{angle:j,adjust:A},x)}class tE extends Za{inRange(t,n,r,s){const o=this.options.rotation,c=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y")return vFe({x:t,y:n},this.getProps(["width","height","centerX","centerY"],s),o,c);const{x:i,y:f,x2:g,y2:x}=this.getProps(["x","y","x2","y2"],s),w=r==="y"?{start:f,end:x}:{start:i,end:g},A=Ty({x:t,y:n},this.getCenterPoint(s),Zo(-o));return A[r]>=w.start-c-S_&&A[r]<=w.end+c+S_}getCenterPoint(t){return My(this,t)}draw(t){const{width:n,height:r,centerX:s,centerY:o,options:c}=this;t.save(),LP(t,this.getCenterPoint(),c.rotation),V1(t,this.options),t.beginPath(),t.fillStyle=c.backgroundColor;const i=yf(t,c);t.ellipse(s,o,r/2,n/2,Hi/2,0,2*Hi),t.fill(),i&&(t.shadowColor=c.borderShadowColor,t.stroke()),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,n){return ase(t,n)}}tE.id="ellipseAnnotation";tE.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},j1.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};tE.defaultRoutes={borderColor:"color",backgroundColor:"color"};tE.descriptors={label:{_fallback:!0}};function vFe(e,t,n,r){const{width:s,height:o,centerX:c,centerY:i}=t,f=s/2,g=o/2;if(f<=0||g<=0)return!1;const x=Zo(n||0),w=Math.cos(x),A=Math.sin(x),C=Math.pow(w*(e.x-c)+A*(e.y-i),2),F=Math.pow(A*(e.x-c)-w*(e.y-i),2);return C/Math.pow(f+r,2)+F/Math.pow(g+r,2)<=1.0001}class zP extends Za{inRange(t,n,r,s){const{x:o,y:c,x2:i,y2:f,width:g}=this.getProps(["x","y","x2","y2","width"],s),x=(this.options.borderWidth+this.options.hitTolerance)/2;return r!=="x"&&r!=="y"?fNe({x:t,y:n},this.getCenterPoint(s),g/2,x):Uie(r==="y"?{start:c,end:f,value:n}:{start:o,end:i,value:t},x)}getCenterPoint(t){return My(this,t)}draw(t){const n=this.options,r=n.borderWidth;if(n.radius<.1)return;t.save(),t.fillStyle=n.backgroundColor,V1(t,n);const s=yf(t,n);xNe(t,this,this.centerX,this.centerY),s&&!kP(n.pointStyle)&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore(),n.borderWidth=r}resolveElementProperties(t,n){const r=ose(t,n);return r.initProperties=$1(t,r,n),r}}zP.id="pointAnnotation";zP.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};zP.defaultRoutes={borderColor:"color",backgroundColor:"color"};class BP extends Za{inRange(t,n,r,s){if(r!=="x"&&r!=="y")return this.options.radius>=.1&&this.elements.length>1&&xFe(this.elements,t,n,s);const o=Ty({x:t,y:n},this.getCenterPoint(s),Zo(-this.options.rotation)),c=this.elements.map(g=>r==="y"?g.bY:g.bX),i=Math.min(...c),f=Math.max(...c);return o[r]>=i&&o[r]<=f}getCenterPoint(t){return My(this,t)}draw(t){const{elements:n,options:r}=this;t.save(),t.beginPath(),t.fillStyle=r.backgroundColor,V1(t,r);const s=yf(t,r);let o=!0;for(const c of n)o?(t.moveTo(c.x,c.y),o=!1):t.lineTo(c.x,c.y);t.closePath(),t.fill(),s&&(t.shadowColor=r.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,n){const r=ose(t,n),{sides:s,rotation:o}=n,c=[],i=2*Hi/s;let f=o*vP;for(let g=0;g<s;g++,f+=i){const x=bFe(r,n,f);x.initProperties=$1(t,r,n),c.push(x)}return r.elements=c,r}}BP.id="polygonAnnotation";BP.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};BP.defaultRoutes={borderColor:"color",backgroundColor:"color"};function bFe({centerX:e,centerY:t},{radius:n,borderWidth:r,hitTolerance:s},o){const c=(r+s)/2,i=Math.sin(o),f=Math.cos(o),g={x:e+i*n,y:t-f*n};return{type:"point",optionScope:"point",properties:{x:g.x,y:g.y,centerX:g.x,centerY:g.y,bX:e+i*(n+c),bY:t-f*(n+c)}}}function xFe(e,t,n,r){let s=!1,o=e[e.length-1].getProps(["bX","bY"],r);for(const c of e){const i=c.getProps(["bX","bY"],r);i.bY>n!=o.bY>n&&t<(o.bX-i.bX)*(n-i.bY)/(o.bY-i.bY)+i.bX&&(s=!s),o=i}return s}const Pm={box:j1,doughnutLabel:FP,ellipse:tE,label:QS,line:eE,point:zP,polygon:BP};Object.keys(Pm).forEach(e=>{to.describe(`elements.${Pm[e].id}`,{_fallback:"plugins.annotation.common"})});const wFe={update:Object.assign},SFe=ez.concat(BI),fG=(e,t)=>di(t)?y5(e,t):e,_5=e=>e==="color"||e==="font";function nz(e="line"){return Pm[e]?e:(console.warn(`Unknown annotation type: '${e}', defaulting to 'line'`),"line")}function EFe(e,t,n,r){const s=MFe(e,n.animations,r),o=t.annotations,c=IFe(t.elements,o);for(let i=0;i<o.length;i++){const f=o[i],g=dse(c,i,f.type),x=f.setContext(CFe(e,g,c,f)),w=g.resolveElementProperties(e,x);w.skip=TFe(w),"elements"in w&&(AFe(g,w.elements,x,s),delete w.elements),Il(g.x)||Object.assign(g,w),Object.assign(g,w.initProperties),w.options=hse(x),s.update(g,w)}}function TFe(e){return isNaN(e.x)||isNaN(e.y)}function MFe(e,t,n){return n==="reset"||n==="none"||n==="resize"?wFe:new GF(e,t)}function AFe(e,t,n,r){const s=e.elements||(e.elements=[]);s.length=t.length;for(let o=0;o<t.length;o++){const c=t[o],i=c.properties,f=dse(s,o,c.type,c.initProperties),g=n[c.optionScope].override(c);i.options=hse(g),r.update(f,i)}}function dse(e,t,n,r){const s=Pm[nz(n)];let o=e[t];return(!o||!(o instanceof s))&&(o=e[t]=new s,Object.assign(o,r)),o}function hse(e){const t=Pm[nz(e.type)],n={};n.id=e.id,n.type=e.type,n.drawTime=e.drawTime,Object.assign(n,y5(e,t.defaults),y5(e,t.defaultRoutes));for(const r of SFe)n[r]=e[r];return n}function y5(e,t){const n={};for(const r of Object.keys(t)){const s=t[r],o=e[r];_5(r)&&rs(o)?n[r]=o.map(c=>fG(c,s)):n[r]=fG(o,s)}return n}function CFe(e,t,n,r){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,get elements(){return n.filter(s=>s&&s.options)},id:r.id,type:"annotation"}))}function IFe(e,t){const n=t.length,r=e.length;if(r<n){const s=n-r;e.splice(r,0,...new Array(s))}else r>n&&e.splice(n,r-n);return e}var PFe="3.1.0";const jp=new Map,pG=e=>e.type!=="doughnutLabel",OFe=ez.concat(BI);var DFe={id:"annotation",version:PFe,beforeRegister(){pNe("chart.js","4.0",Uh.version)},afterRegister(){Uh.register(Pm)},afterUnregister(){Uh.unregister(Pm)},beforeInit(e){jp.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(e,t,n){const r=jp.get(e),s=r.annotations=[];let o=n.annotations;di(o)?Object.keys(o).forEach(c=>{const i=o[c];di(i)&&(i.id=c,s.push(i))}):rs(o)&&s.push(...o),qNe(s.filter(pG),e.scales)},afterDataLimits(e,t){const n=jp.get(e);YNe(e,t.scale,n.annotations.filter(pG).filter(r=>r.display&&r.adjustScaleRange))},afterUpdate(e,t,n){const r=jp.get(e);jNe(e,r,n),EFe(e,r,n,t.mode),r.visibleElements=r.elements.filter(s=>!s.skip&&s.options.display),GNe(e,r,n)},beforeDatasetsDraw(e,t,n){gw(e,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(e,t,n){gw(e,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(e,t,n){gw(e,t.index,n.clip)},beforeDraw(e,t,n){gw(e,"beforeDraw",n.clip)},afterDraw(e,t,n){gw(e,"afterDraw",n.clip)},beforeEvent(e,t,n){const r=jp.get(e);UNe(r,t.event,n)&&(t.changed=!0)},afterDestroy(e){jp.delete(e)},getAnnotations(e){const t=jp.get(e);return t?t.elements:[]},_getAnnotationElementsAtEventForMode(e,t,n){return ZF(e,t,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:e=>!OFe.includes(e)&&e!=="init",annotations:{_allKeys:!1,_fallback:(e,t)=>`elements.${Pm[nz(t.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:_5,_fallback:!0},_indexable:_5}},additionalOptionScopes:[""]};function gw(e,t,n){const{ctx:r,chartArea:s}=e,o=jp.get(e);n&&F1(r,s);const c=RFe(o.visibleElements,t).sort((i,f)=>i.element.options.z-f.element.options.z);for(const i of c)kFe(r,s,o,i);n&&z1(r)}function RFe(e,t){const n=[];for(const r of e)if(r.options.drawTime===t&&n.push({element:r,main:!0}),r.elements&&r.elements.length)for(const s of r.elements)s.options.display&&s.options.drawTime===t&&n.push({element:s});return n}function kFe(e,t,n,r){const s=r.element;r.main?(eG(n,s,"beforeDraw"),s.draw(e,t),eG(n,s,"afterDraw")):s.draw(e,t)}/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var mG=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1})(),p2={toTextLines:function(e){var t=[],n;for(e=[].concat(e);e.length;)n=e.pop(),typeof n=="string"?t.unshift.apply(t,n.split(`
`)):Array.isArray(n)?e.push.apply(e,n):Ri(e)||t.unshift(""+n);return t},textSize:function(e,t,n){var r=[].concat(t),s=r.length,o=e.font,c=0,i;for(e.font=n.string,i=0;i<s;++i)c=Math.max(e.measureText(r[i]).width,c);return e.font=o,{height:s*n.lineHeight,width:c}},bound:function(e,t,n){return Math.max(e,Math.min(t,n))},arrayDiff:function(e,t){var n=e.slice(),r=[],s,o,c,i;for(s=0,c=t.length;s<c;++s)i=t[s],o=n.indexOf(i),o===-1?r.push([i,1]):n.splice(o,1);for(s=0,c=n.length;s<c;++s)r.push([n[s],-1]);return r},rasterize:function(e){return Math.round(e*mG)/mG}};function CR(e,t){var n=t.x,r=t.y;if(n===null)return{x:0,y:-1};if(r===null)return{x:1,y:0};var s=e.x-n,o=e.y-r,c=Math.sqrt(s*s+o*o);return{x:c?s/c:0,y:c?o/c:-1}}function LFe(e,t,n,r,s){switch(s){case"center":n=r=0;break;case"bottom":n=0,r=1;break;case"right":n=1,r=0;break;case"left":n=-1,r=0;break;case"top":n=0,r=-1;break;case"start":n=-n,r=-r;break;case"end":break;default:s*=Math.PI/180,n=Math.cos(s),r=Math.sin(s);break}return{x:e,y:t,vx:n,vy:r}}var NFe=0,fse=1,pse=2,mse=4,gse=8;function iA(e,t,n){var r=NFe;return e<n.left?r|=fse:e>n.right&&(r|=pse),t<n.top?r|=gse:t>n.bottom&&(r|=mse),r}function FFe(e,t){for(var n=e.x0,r=e.y0,s=e.x1,o=e.y1,c=iA(n,r,t),i=iA(s,o,t),f,g,x;!(!(c|i)||c&i);)f=c||i,f&gse?(g=n+(s-n)*(t.top-r)/(o-r),x=t.top):f&mse?(g=n+(s-n)*(t.bottom-r)/(o-r),x=t.bottom):f&pse?(x=r+(o-r)*(t.right-n)/(s-n),g=t.right):f&fse&&(x=r+(o-r)*(t.left-n)/(s-n),g=t.left),f===c?(n=g,r=x,c=iA(n,r,t)):(s=g,o=x,i=iA(s,o,t));return{x0:n,x1:s,y0:r,y1:o}}function sA(e,t){var n=t.anchor,r=e,s,o;return t.clamp&&(r=FFe(r,t.area)),n==="start"?(s=r.x0,o=r.y0):n==="end"?(s=r.x1,o=r.y1):(s=(r.x0+r.x1)/2,o=(r.y0+r.y1)/2),LFe(s,o,e.vx,e.vy,t.align)}var oA={arc:function(e,t){var n=(e.startAngle+e.endAngle)/2,r=Math.cos(n),s=Math.sin(n),o=e.innerRadius,c=e.outerRadius;return sA({x0:e.x+r*o,y0:e.y+s*o,x1:e.x+r*c,y1:e.y+s*c,vx:r,vy:s},t)},point:function(e,t){var n=CR(e,t.origin),r=n.x*e.options.radius,s=n.y*e.options.radius;return sA({x0:e.x-r,y0:e.y-s,x1:e.x+r,y1:e.y+s,vx:n.x,vy:n.y},t)},bar:function(e,t){var n=CR(e,t.origin),r=e.x,s=e.y,o=0,c=0;return e.horizontal?(r=Math.min(e.x,e.base),o=Math.abs(e.base-e.x)):(s=Math.min(e.y,e.base),c=Math.abs(e.base-e.y)),sA({x0:r,y0:s+c,x1:r+o,y1:s,vx:n.x,vy:n.y},t)},fallback:function(e,t){var n=CR(e,t.origin);return sA({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:n.x,vy:n.y},t)}},Gh=p2.rasterize;function zFe(e){var t=e.borderWidth||0,n=e.padding,r=e.size.height,s=e.size.width,o=-s/2,c=-r/2;return{frame:{x:o-n.left-t,y:c-n.top-t,w:s+n.width+t*2,h:r+n.height+t*2},text:{x:o,y:c,w:s,h:r}}}function BFe(e,t){var n=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var r=n.getBasePixel();return e.horizontal?{x:r,y:null}:{x:null,y:r}}function $Fe(e){return e instanceof Q5e?oA.arc:e instanceof Nie?oA.point:e instanceof zie?oA.bar:oA.fallback}function VFe(e,t,n,r,s,o){var c=Math.PI/2;if(o){var i=Math.min(o,s/2,r/2),f=t+i,g=n+i,x=t+r-i,w=n+s-i;e.moveTo(t,g),f<x&&g<w?(e.arc(f,g,i,-Math.PI,-c),e.arc(x,g,i,-c,0),e.arc(x,w,i,0,c),e.arc(f,w,i,c,Math.PI)):f<x?(e.moveTo(f,n),e.arc(x,g,i,-c,c),e.arc(f,g,i,c,Math.PI+c)):g<w?(e.arc(f,g,i,-Math.PI,0),e.arc(f,w,i,0,Math.PI)):e.arc(f,g,i,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,r,s)}function jFe(e,t,n){var r=n.backgroundColor,s=n.borderColor,o=n.borderWidth;!r&&(!s||!o)||(e.beginPath(),VFe(e,Gh(t.x)+o/2,Gh(t.y)+o/2,Gh(t.w)-o,Gh(t.h)-o,n.borderRadius),e.closePath(),r&&(e.fillStyle=r,e.fill()),s&&o&&(e.strokeStyle=s,e.lineWidth=o,e.lineJoin="miter",e.stroke()))}function UFe(e,t,n){var r=n.lineHeight,s=e.w,o=e.x,c=e.y+r/2;return t==="center"?o+=s/2:(t==="end"||t==="right")&&(o+=s),{h:r,w:s,x:o,y:c}}function HFe(e,t,n){var r=e.shadowBlur,s=n.stroked,o=Gh(n.x),c=Gh(n.y),i=Gh(n.w);s&&e.strokeText(t,o,c,i),n.filled&&(r&&s&&(e.shadowBlur=0),e.fillText(t,o,c,i),r&&s&&(e.shadowBlur=r))}function WFe(e,t,n,r){var s=r.textAlign,o=r.color,c=!!o,i=r.font,f=t.length,g=r.textStrokeColor,x=r.textStrokeWidth,w=g&&x,A;if(!(!f||!c&&!w))for(n=UFe(n,s,i),e.font=i.string,e.textAlign=s,e.textBaseline="middle",e.shadowBlur=r.textShadowBlur,e.shadowColor=r.textShadowColor,c&&(e.fillStyle=o),w&&(e.lineJoin="round",e.lineWidth=x,e.strokeStyle=g),A=0,f=t.length;A<f;++A)HFe(e,t[A],{stroked:w,filled:c,w:n.w,x:n.x,y:n.y+n.h*A})}var _se=function(e,t,n,r){var s=this;s._config=e,s._index=r,s._model=null,s._rects=null,s._ctx=t,s._el=n};od(_se.prototype,{_modelize:function(e,t,n,r){var s=this,o=s._index,c=Mo(Rs([n.font,{}],r,o)),i=Rs([n.color,to.color],r,o);return{align:Rs([n.align,"center"],r,o),anchor:Rs([n.anchor,"center"],r,o),area:r.chart.chartArea,backgroundColor:Rs([n.backgroundColor,null],r,o),borderColor:Rs([n.borderColor,null],r,o),borderRadius:Rs([n.borderRadius,0],r,o),borderWidth:Rs([n.borderWidth,0],r,o),clamp:Rs([n.clamp,!1],r,o),clip:Rs([n.clip,!1],r,o),color:i,display:e,font:c,lines:t,offset:Rs([n.offset,4],r,o),opacity:Rs([n.opacity,1],r,o),origin:BFe(s._el,r),padding:la(Rs([n.padding,4],r,o)),positioner:$Fe(s._el),rotation:Rs([n.rotation,0],r,o)*(Math.PI/180),size:p2.textSize(s._ctx,t,c),textAlign:Rs([n.textAlign,"start"],r,o),textShadowBlur:Rs([n.textShadowBlur,0],r,o),textShadowColor:Rs([n.textShadowColor,i],r,o),textStrokeColor:Rs([n.textStrokeColor,i],r,o),textStrokeWidth:Rs([n.textStrokeWidth,0],r,o)}},update:function(e){var t=this,n=null,r=null,s=t._index,o=t._config,c,i,f,g=Rs([o.display,!0],e,s);g&&(c=e.dataset.data[s],i=ai(Ji(o.formatter,[c,e]),c),f=Ri(i)?[]:p2.toTextLines(i),f.length&&(n=t._modelize(g,f,o,e),r=zFe(n))),t._model=n,t._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var n=this,r=e.ctx,s=n._model,o=n._rects,c;this.visible()&&(r.save(),s.clip&&(c=s.area,r.beginPath(),r.rect(c.left,c.top,c.right-c.left,c.bottom-c.top),r.clip()),r.globalAlpha=p2.bound(0,s.opacity,1),r.translate(Gh(t.x),Gh(t.y)),r.rotate(s.rotation),jFe(r,o.frame,s),WFe(r,s.lines,o.text,s),r.restore())}});var GFe=Number.MIN_SAFE_INTEGER||-9007199254740991,YFe=Number.MAX_SAFE_INTEGER||9007199254740991;function _w(e,t,n){var r=Math.cos(n),s=Math.sin(n),o=t.x,c=t.y;return{x:o+r*(e.x-o)-s*(e.y-c),y:c+s*(e.x-o)+r*(e.y-c)}}function gG(e,t){var n=YFe,r=GFe,s=t.origin,o,c,i,f,g;for(o=0;o<e.length;++o)c=e[o],i=c.x-s.x,f=c.y-s.y,g=t.vx*i+t.vy*f,n=Math.min(n,g),r=Math.max(r,g);return{min:n,max:r}}function aA(e,t){var n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);return{vx:(t.x-e.x)/s,vy:(t.y-e.y)/s,origin:e,ln:s}}var yse=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};od(yse.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,n){this._rotation=n,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this,n=1,r=t._rect;return e=_w(e,t.center(),-t._rotation),!(e.x<r.x-n||e.y<r.y-n||e.x>r.x+r.w+n*2||e.y>r.y+r.h+n*2)},intersects:function(e){var t=this._points(),n=e._points(),r=[aA(t[0],t[1]),aA(t[0],t[3])],s,o,c;for(this._rotation!==e._rotation&&r.push(aA(n[0],n[1]),aA(n[0],n[3])),s=0;s<r.length;++s)if(o=gG(t,r[s]),c=gG(n,r[s]),o.max<c.min||c.max<o.min)return!1;return!0},_points:function(){var e=this,t=e._rect,n=e._rotation,r=e.center();return[_w({x:t.x,y:t.y},r,n),_w({x:t.x+t.w,y:t.y},r,n),_w({x:t.x+t.w,y:t.y+t.h},r,n),_w({x:t.x,y:t.y+t.h},r,n)]}});function vse(e,t,n){var r=t.positioner(e,t),s=r.vx,o=r.vy;if(!s&&!o)return{x:r.x,y:r.y};var c=n.w,i=n.h,f=t.rotation,g=Math.abs(c/2*Math.cos(f))+Math.abs(i/2*Math.sin(f)),x=Math.abs(c/2*Math.sin(f))+Math.abs(i/2*Math.cos(f)),w=1/Math.max(Math.abs(s),Math.abs(o));return g*=s*w,x*=o*w,g+=t.offset*s,x+=t.offset*o,{x:r.x+g,y:r.y+x}}function qFe(e,t){var n,r,s,o;for(n=e.length-1;n>=0;--n)for(s=e[n].$layout,r=n-1;r>=0&&s._visible;--r)o=e[r].$layout,o._visible&&s._box.intersects(o._box)&&t(s,o);return e}function XFe(e){var t,n,r,s,o,c,i;for(t=0,n=e.length;t<n;++t)r=e[t],s=r.$layout,s._visible&&(i=new Proxy(r._el,{get:(f,g)=>f.getProps([g],!0)[g]}),o=r.geometry(),c=vse(i,r.model(),o),s._box.update(c,o,r.rotation()));return qFe(e,function(f,g){var x=f._hidable,w=g._hidable;x&&w||w?g._visible=!1:x&&(f._visible=!1)})}var m2={prepare:function(e){var t=[],n,r,s,o,c;for(n=0,s=e.length;n<s;++n)for(r=0,o=e[n].length;r<o;++r)c=e[n][r],t.push(c),c.$layout={_box:new yse,_hidable:!1,_visible:!0,_set:n,_idx:c._index};return t.sort(function(i,f){var g=i.$layout,x=f.$layout;return g._idx===x._idx?x._set-g._set:x._idx-g._idx}),this.update(t),t},update:function(e){var t=!1,n,r,s,o,c;for(n=0,r=e.length;n<r;++n)s=e[n],o=s.model(),c=s.$layout,c._hidable=o&&o.display==="auto",c._visible=s.visible(),t|=c._hidable;t&&XFe(e)},lookup:function(e,t){var n,r;for(n=e.length-1;n>=0;--n)if(r=e[n].$layout,r&&r._visible&&r._box.contains(t))return e[n];return null},draw:function(e,t){var n,r,s,o,c,i;for(n=0,r=t.length;n<r;++n)s=t[n],o=s.$layout,o._visible&&(c=s.geometry(),i=vse(s._el,s.model(),c),o._box.update(i,c,s.rotation()),s.draw(e,i))}},ZFe=function(e){if(Ri(e))return null;var t=e,n,r,s;if(di(e))if(!Ri(e.label))t=e.label;else if(!Ri(e.r))t=e.r;else for(t="",n=Object.keys(e),s=0,r=n.length;s<r;++s)t+=(s!==0?", ":"")+n[s]+": "+e[n[s]];return""+t},KFe={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:ZFe,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},ql="$datalabels",bse="$default";function JFe(e,t){var n=e.datalabels,r={},s=[],o,c;return n===!1?null:(n===!0&&(n={}),t=od({},[t,n]),o=t.labels||{},c=Object.keys(o),delete t.labels,c.length?c.forEach(function(i){o[i]&&s.push(od({},[t,o[i],{_key:i}]))}):s.push(t),r=s.reduce(function(i,f){return Qi(f.listeners||{},function(g,x){i[x]=i[x]||{},i[x][f._key||bse]=g}),delete f.listeners,i},{}),{labels:s,listeners:r})}function v5(e,t,n,r){if(t){var s=n.$context,o=n.$groups,c;t[o._set]&&(c=t[o._set][o._key],c&&Ji(c,[s,r])===!0&&(e[ql]._dirty=!0,n.update(s)))}}function QFe(e,t,n,r,s){var o,c;!n&&!r||(n?r?n!==r&&(c=o=!0):c=!0:o=!0,c&&v5(e,t.leave,n,s),o&&v5(e,t.enter,r,s))}function eze(e,t){var n=e[ql],r=n._listeners,s,o;if(!(!r.enter&&!r.leave)){if(t.type==="mousemove")o=m2.lookup(n._labels,t);else if(t.type!=="mouseout")return;s=n._hovered,n._hovered=o,QFe(e,r,s,o,t)}}function tze(e,t){var n=e[ql],r=n._listeners.click,s=r&&m2.lookup(n._labels,t);s&&v5(e,r,s,t)}var nze={id:"datalabels",defaults:KFe,beforeInit:function(e){e[ql]={_actives:[]}},beforeUpdate:function(e){var t=e[ql];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,n){var r=t.index,s=e[ql],o=s._datasets[r]=[],c=e.isDatasetVisible(r),i=e.data.datasets[r],f=JFe(i,n),g=t.meta.data||[],x=e.ctx,w,A,C,F,z,j,V,Y;for(x.save(),w=0,C=g.length;w<C;++w)if(V=g[w],V[ql]=[],c&&V&&e.getDataVisibility(w)&&!V.skip)for(A=0,F=f.labels.length;A<F;++A)z=f.labels[A],j=z._key,Y=new _se(z,x,V,w),Y.$groups={_set:r,_key:j||bse},Y.$context={active:!1,chart:e,dataIndex:w,dataset:i,datasetIndex:r},Y.update(Y.$context),V[ql].push(Y),o.push(Y);x.restore(),od(s._listeners,f.listeners,{merger:function(te,J,ee){J[te]=J[te]||{},J[te][t.index]=ee[te],s._listened=!0}})},afterUpdate:function(e){e[ql]._labels=m2.prepare(e[ql]._datasets)},afterDatasetsDraw:function(e){m2.draw(e,e[ql]._labels)},beforeEvent:function(e,t){if(e[ql]._listened){var n=t.event;switch(n.type){case"mousemove":case"mouseout":eze(e,n);break;case"click":tze(e,n);break}}},afterEvent:function(e){var t=e[ql],n=t._actives,r=t._actives=e.getActiveElements(),s=p2.arrayDiff(n,r),o,c,i,f,g,x,w;for(o=0,c=s.length;o<c;++o)if(g=s[o],g[1])for(w=g[0].element[ql]||[],i=0,f=w.length;i<f;++i)x=w[i],x.$context.active=g[1]===1,x.update(x.$context);(t._dirty||s.length)&&(m2.update(t._labels),e.render()),delete t._dirty}},IR,_G;function rze(){if(_G)return IR;_G=1;var e={id:"watermark",defaultOptions:{x:0,y:0,height:!1,width:!1,alignX:"top",alignY:"left",alignToChartArea:!1,position:"front",opacity:1,image:!1},isPercentage:function(t){return typeof t=="string"&&t.charAt(t.length-1)=="%"},calcPercentage:function(t,n){var r=t.substr(0,t.length-1);return r=parseFloat(r),n*(r/100)},autoPercentage:function(t,n){return this.isPercentage(t)&&(t=this.calcPercentage(t,n)),t},imageFromString:function(t){var n=new Image;return n.src=t,n},drawWatermark:function(t,n){var r=t.watermark;if(r.position==n&&r.image){var s=r.image,o=t.ctx,c=o.canvas,i,f,g=0,x=0;if(r.alignToChartArea){var w=t.chartArea;i=w.bottom-w.top,f=w.right-w.left,g=w.left,x=w.top}else i=c.clientHeight||c.height,f=c.clientWidth||c.width;var A=r.height||s.height;A=this.autoPercentage(A,i);var C=r.width||s.width;C=this.autoPercentage(C,f);var F=this.autoPercentage(r.x,f),z=this.autoPercentage(r.y,i);switch(r.alignX){case"right":F=f-F-C;break;case"middle":F=f/2-C/2-F;break}switch(r.alignY){case"bottom":z=i-z-A;break;case"middle":z=i/2-A/2-z;break}o.save(),o.globalAlpha=r.opacity,o.drawImage(s,g+F,x+z,C,A),o.restore()}},beforeInit:function(t){t.watermark={};var n=t.options;if(n.watermark){var r=Object.assign({},this.defaultOptions),s=Object.assign(r,n.watermark);if(s.image){var o=s.image;typeof o=="string"&&(o=this.imageFromString(o)),o.onload=function(){t.ctx&&t.update()},s.image=o}t.watermark=s}},beforeDraw:function(t){this.drawWatermark(t,"back")},afterDraw:function(t){this.drawWatermark(t,"front")},afterDatasetsDraw:function(t){this.drawWatermark(t,"between")}};return IR=e,typeof window<"u"&&window.Chart&&window.Chart.register(e),IR}var ize=rze();const sze=ih(ize),oze=xs(()=>(Uh.defaults.animation=!1,Uh.defaults.font.family="'Clear Sans', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",Uh.register(OP,zie,Nie,LLe,DFe,nze,sze,zLe,eNe,rNe,R6e,B6e,V6e,Z6e,j6e),Uh.helpers=aNe,{provide:{chart:Uh}})),aze="lowercase",yw="short",xse=60,b5=xse*60,$I=b5*24,yG=$I*30,vG=$I*365,lze=(e,t,n,r)=>{const s=(f,g)=>`${f}${g===1?"":"s"}`,c=(e.$u?n.utc():n()).diff(e,"s");let i;if(c<xse*3){const f="Just now";return r===aze?f.toLowerCase():f}return c<b5?(i=parseInt(c/60,10),r===yw?`${i}m`:`${i} ${s("minute",i)} ago`):c<$I?(i=parseInt(c/b5,10),r===yw?`${i}h`:`${i} ${s("hour",i)} ago`):c<yG?(i=parseInt(c/$I,10),r===yw?`${i}d`:`${i} ${s("day",i)} ago`):c<vG?(i=parseInt(c/yG,10),r===yw?`${i}m`:`${i} ${s("month",i)} ago`):(i=parseInt(c/vG,10),r===yw?`${i}y`:`${i} ${s("year",i)} ago`)},cze=(e,t,n)=>{t.prototype.timeAgo=function(s){return lze(this,t,n,s)}},uze=xs(e=>{const{$dayjs:t}=e;t.extend(cze)});/*! License details at fancyapps.com/license */const as=e=>typeof e=="string";/*! License details at fancyapps.com/license */const p0=e=>e&&e!==null&&e instanceof Element&&"nodeType"in e;/*! License details at fancyapps.com/license */const dze=function(e){if(!(e&&e instanceof Element&&e.offsetParent))return!1;let t=!1,n=!1;if(e.scrollWidth>e.clientWidth){const r=window.getComputedStyle(e).overflowX,s=r.indexOf("hidden")!==-1,o=r.indexOf("clip")!==-1,c=r.indexOf("visible")!==-1;t=!s&&!o&&!c}if(e.scrollHeight>e.clientHeight){const r=window.getComputedStyle(e).overflowY,s=r.indexOf("hidden")!==-1,o=r.indexOf("clip")!==-1,c=r.indexOf("visible")!==-1;n=!s&&!o&&!c}return t||n},U_=function(e,t=void 0){return!e||e===document.body||t&&e===t?null:dze(e)?e:U_(e.parentElement,t)};/*! License details at fancyapps.com/license */const vf=function(e){var t=new DOMParser().parseFromString(e,"text/html").body;if(t.childElementCount>1){for(var n=document.createElement("div");t.firstChild;)n.appendChild(t.firstChild);return n}let r=t.firstChild;return!r||r instanceof HTMLElement?r:((n=document.createElement("div")).appendChild(r),n)};/*! License details at fancyapps.com/license */const Oi=function(e=0,t=0,n=0){return Math.max(Math.min(t,n),e)};/*! License details at fancyapps.com/license */const Ma=e=>typeof e=="object"&&e!==null&&e.constructor===Object&&Object.prototype.toString.call(e)==="[object Object]";/*! License details at fancyapps.com/license */function bG(e){return Ma(e)||Array.isArray(e)}function hS(e,t){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((s=>{const o=e[s],c=t[s];return typeof o=="function"?`${o}`==`${c}`:bG(o)&&bG(c)?hS(o,c):o===c}))}/*! License details at fancyapps.com/license */const wse=function(e){for(const t of VI)t.getState()===hl.Running&&t.tick(PR?e-PR:0);PR=e,O0=window.requestAnimationFrame(wse)};var hl,nm,m0;(function(e){e[e.Initializing=0]="Initializing",e[e.Running=1]="Running",e[e.Paused=2]="Paused",e[e.Completed=3]="Completed",e[e.Destroyed=4]="Destroyed"})(hl||(hl={})),(function(e){e[e.Spring=0]="Spring",e[e.Ease=1]="Ease"})(nm||(nm={})),(function(e){e[e.Loop=0]="Loop",e[e.Reverse=1]="Reverse"})(m0||(m0={}));const VI=new Set;let O0=null,PR=0;function Vm(){let e=hl.Initializing,t=nm.Ease,n=0,r=0,s=Vm.Easings.Linear,o=500,c=0,i=0,f=0,g=0,x=1/0,w=.01,A=.01,C=!1,F={},z=null,j={},V={},Y={},te=0,J=0,ee=m0.Loop,le=Vm.Easings.Linear;const oe=new Map;function ve(Se,...Ce){for(const Ee of oe.get(Se)||[])Ee(...Ce)}function se(Se){return r=0,Se?z=setTimeout((()=>{ie()}),Se):ie(),be}function ie(){e=hl.Running,ve("start",j,V)}function pe(){if(e=hl.Completed,Y={},ve("end",j),e===hl.Completed)if(n<te){if(n++,ee===m0.Reverse){const Se=Object.assign({},F);F=Object.assign({},V),V=Se}se(J)}else n=0;return be}const be={getState:function(){return e},easing:function(Se){return s=Se,t=nm.Ease,Y={},be},duration:function(Se){return o=Se,be},spring:function(Se={}){t=nm.Spring;const Ce={velocity:0,mass:1,tension:170,friction:26,restDelta:.1,restSpeed:.1,maxSpeed:1/0,clamp:!0},{velocity:Ee,mass:xe,tension:ke,friction:He,restDelta:Ke,restSpeed:Ge,maxSpeed:$t,clamp:Ft}=Object.assign(Object.assign({},Ce),Se);return c=Ee,i=xe,f=ke,g=He,A=Ke,w=Ge,x=$t,C=Ft,Y={},be},isRunning:function(){return e===hl.Running},isSpring:function(){return t===nm.Spring},from:function(Se){return j=Object.assign({},Se),be},to:function(Se){return V=Se,be},repeat:function(Se,Ce=0,Ee=m0.Loop,xe){return te=Se,J=Ce,ee=Ee,le=xe||s,be},on:function(Se,Ce){var Ee,xe;return Ee=Se,xe=Ce,oe.set(Ee,[...oe.get(Ee)||[],xe]),be},off:function(Se,Ce){var Ee,xe;return Ee=Se,xe=Ce,oe.has(Ee)&&oe.set(Ee,oe.get(Ee).filter((ke=>ke!==xe))),be},start:function(Se){return hS(j,V)||(e=hl.Initializing,F=Object.assign({},j),VI.add(this),O0||(O0=window.requestAnimationFrame(wse)),se(Se)),be},pause:function(){return z&&(clearTimeout(z),z=null),e===hl.Running&&(e=hl.Paused,ve("pause",j)),be},end:pe,tick:function(Se){Se>50&&(Se=50),r+=Se;let Ce=0,Ee=!1;if(e!==hl.Running)return be;if(t===nm.Ease){Ce=Oi(0,r/o,1),Ee=Ce===1;const ke=ee===m0.Reverse?le:s;for(const He in j)j[He]=F[He]+(V[He]-F[He])*ke(Ce)}if(t===nm.Spring){const ke=.001*Se;let He=0;for(const Ke in j){const Ge=V[Ke];let $t=j[Ke];if(typeof Ge!="number"||isNaN(Ge)||typeof $t!="number"||isNaN($t))continue;if(Math.abs(Ge-$t)<=A){j[Ke]=Ge,Y[Ke]=0;continue}Y[Ke]||(typeof c=="object"&&typeof c[Ke]=="number"?Y[Ke]=c[Ke]:Y[Ke]=typeof c=="number"?c:0);let Ft=Y[Ke];Ft=Oi(-1*Math.abs(x),Ft,Math.abs(x));const Lt=Ft*i*g;Ft+=(($t>Ge?-1:1)*(Math.abs(Ge-$t)*f)-Lt)/i*ke,$t+=Ft*ke;const nn=j[Ke]>Ge?$t<Ge:$t>Ge;let mn=Math.abs(Ft)<w&&Math.abs(Ge-$t)<=A;C&&nn&&(mn=!0),mn?($t=Ge,Ft=0):He++,j[Ke]=$t,Y[Ke]=Ft}Ee=!He}const xe=Object.assign({},V);return ve("step",j,F,V,Ce),Ee&&e===hl.Running&&hS(V,xe)&&(e=hl.Completed,pe()),be},getStartValues:function(){return F},getCurrentValues:function(){return j},getCurrentVelocities:function(){return Y},getEndValues:function(){return V},destroy:function(){e=hl.Destroyed,z&&(clearTimeout(z),z=null),F=j=V={},VI.delete(this)}};return be}Vm.destroy=()=>{for(const e of VI)e.destroy();O0&&(cancelAnimationFrame(O0),O0=null)},Vm.Easings={Linear:function(e){return e},EaseIn:function(e){return e===0?0:Math.pow(2,10*e-10)},EaseOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},EaseInOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};/*! License details at fancyapps.com/license */function g2(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function rz(e,t){const n=[],r=g2(e)?e[t]:e instanceof MouseEvent&&(t==="changedTouches"||e.type!=="mouseup")?[e]:[];for(const s of r)n.push({x:s.clientX,y:s.clientY,ts:Date.now()});return n}function xG(e){return rz(e,"touches")}function wG(e){return rz(e,"targetTouches")}function Sse(e){return rz(e,"changedTouches")}function Up(e){const t=e[0],n=e[1]||t;return{x:(t.x+n.x)/2,y:(t.y+n.y)/2,ts:n.ts}}function lA(e){const t=e[0],n=e[1]||e[0];return t&&n?-1*Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)):0}const SG=e=>{e.cancelable&&e.preventDefault()},kp={passive:!1},hze={panThreshold:5,swipeThreshold:3,ignore:["textarea","input","select","[contenteditable]","[data-selectable]","[data-draggable]"]};let cA=!1,Lw=!0;const f1=(e,t)=>{let n,r,s,o=Object.assign(Object.assign({},hze),t),c=[],i=[],f=[],g=!1,x=!1,w=!1,A=!1,C=0,F=0,z=0,j=0,V=0,Y=0,te=0,J=0,ee=0,le=[],oe=0,ve=0;const se=new Map;function ie(Ge){const $t=lA(i),Ft=lA(f),Lt=$t&&Ft?$t/Ft:0,nn=Math.abs(te)>Math.abs(J)?te:J,mn={srcEvent:n,isPanRecognized:g,isSwipeRecognized:x,firstTouch:c,previousTouch:f,currentTouch:i,deltaX:z,deltaY:j,offsetX:V,offsetY:Y,velocityX:te,velocityY:J,velocity:nn,angle:ee,axis:s,scale:Lt,center:r};for(const Xt of se.get(Ge)||[])Xt(mn)}function pe(Ge){const $t=Ge.target,Ft=Ge.composedPath()[0],Lt=o.ignore.join(","),nn=mn=>mn&&(mn.matches(Lt)||mn.closest(Lt));if(nn($t)||nn(Ft))return!1}function be(Ge){const $t=Date.now();if(le=le.filter((Ft=>!Ft.ts||Ft.ts>$t-100)),Ge&&le.push(Ge),te=0,J=0,le.length>3){const Ft=le[0],Lt=le[le.length-1];if(Ft&&Lt){const nn=Lt.x-Ft.x,mn=Lt.y-Ft.y,Xt=Ft.ts&&Lt.ts?Lt.ts-Ft.ts:0;Xt>0&&(te=Math.abs(nn)>3?nn/(Xt/30):0,J=Math.abs(mn)>3?mn/(Xt/30):0)}}}function Se(Ge){if(pe(Ge)===!1)return;if(typeof MouseEvent<"u"&&Ge instanceof MouseEvent){if(cA)return}else cA=!0;if(typeof MouseEvent<"u"&&Ge instanceof MouseEvent){if(!Ge.buttons||Ge.button!==0)return;SG(Ge)}Ge instanceof MouseEvent&&(window.addEventListener("mousemove",Ce),window.addEventListener("mouseup",Ee)),window.addEventListener("blur",xe),n=Ge,i=wG(Ge),c=[...i],f=[],F=i.length,r=Up(i),F===1&&(g=!1,x=!1,w=!1),F&&be(Up(i));const $t=Date.now(),Ft=$t-(C||$t);A=Ft>0&&Ft<=250&&F===1,C=$t,clearTimeout(oe),ie("start")}function Ce(Ge){var $t;if(!c.length||Ge.defaultPrevented||pe(Ge)===!1)return;n=Ge,f=[...i],i=xG(Ge);const Ft=Up(f),Lt=Up(xG(Ge));if(be(Lt),F=i.length,r=Lt,f.length===i.length?(z=Lt.x-Ft.x,j=Lt.y-Ft.y):(z=0,j=0),c.length){const nn=Up(c);V=Lt.x-nn.x,Y=Lt.y-nn.y}if(i.length>1){const nn=lA(i),mn=lA(f);Math.abs(nn-mn)>=.1&&(w=!0,ie("pinch"))}g||(g=Math.abs(V)>o.panThreshold||Math.abs(Y)>o.panThreshold,g&&(Lw=!1,clearTimeout(ve),ve=0,ee=Math.abs(180*Math.atan2(Y,V)/Math.PI),s=ee>45&&ee<135?"y":"x",c=[...i],f=[...i],V=0,Y=0,z=0,j=0,($t=window.getSelection())===null||$t===void 0||$t.removeAllRanges(),ie("panstart"))),g&&(z||j)&&ie("pan"),ie("move")}function Ee(Ge){if(n=Ge,!c.length)return;const $t=wG(Ge),Ft=Sse(Ge);if(F=$t.length,r=Up(Ft),Ft.length&&be(Up(Ft)),f=[...i],i=[...$t],c=[...$t],F>0)ie("end"),g=!1,x=!1,le=[];else{const Lt=o.swipeThreshold;(Math.abs(te)>Lt||Math.abs(J)>Lt)&&(x=!0),g&&ie("panend"),x&&ie("swipe"),g||x||w||(ie("tap"),A?ie("doubleTap"):oe=setTimeout((function(){ie("singleTap")}),250)),ie("end"),ke()}}function xe(){clearTimeout(oe),ke(),g&&ie("panend"),ie("end")}function ke(){cA=!1,g=!1,x=!1,A=!1,F=0,le=[],i=[],f=[],c=[],z=0,j=0,V=0,Y=0,te=0,J=0,ee=0,s=void 0,window.removeEventListener("mousemove",Ce),window.removeEventListener("mouseup",Ee),window.removeEventListener("blur",xe),Lw||ve||(ve=setTimeout((()=>{Lw=!0,ve=0}),100))}function He(Ge){const $t=Ge.target;cA=!1,$t&&!Ge.defaultPrevented&&(Lw||(SG(Ge),Ge.stopPropagation()))}const Ke={init:function(){return e&&(e.addEventListener("click",He,kp),e.addEventListener("mousedown",Se,kp),e.addEventListener("touchstart",Se,kp),e.addEventListener("touchmove",Ce,kp),e.addEventListener("touchend",Ee),e.addEventListener("touchcancel",Ee)),Ke},on:function(Ge,$t){return(function(Ft,Lt){se.set(Ft,[...se.get(Ft)||[],Lt])})(Ge,$t),Ke},off:function(Ge,$t){return se.has(Ge)&&se.set(Ge,se.get(Ge).filter((Ft=>Ft!==$t))),Ke},isPointerDown:()=>F>0,destroy:function(){clearTimeout(oe),clearTimeout(ve),ve=0,e&&(e.removeEventListener("click",He,kp),e.removeEventListener("mousedown",Se,kp),e.removeEventListener("touchstart",Se,kp),e.removeEventListener("touchmove",Ce,kp),e.removeEventListener("touchend",Ee),e.removeEventListener("touchcancel",Ee)),e=null,ke()}};return Ke};f1.isClickAllowed=()=>Lw;/*! License details at fancyapps.com/license */const iz={IMAGE_ERROR:"This image couldn't be loaded. <br /> Please try again later.",MOVE_UP:"Move up",MOVE_DOWN:"Move down",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",TOGGLE_FULL:"Toggle zoom level",TOGGLE_1TO1:"Toggle zoom level",ITERATE_ZOOM:"Toggle zoom level",ROTATE_CCW:"Rotate counterclockwise",ROTATE_CW:"Rotate clockwise",FLIP_X:"Flip horizontally",FLIP_Y:"Flip vertically",RESET:"Reset",TOGGLE_FS:"Toggle fullscreen"};/*! License details at fancyapps.com/license */const Jr=(e,t="")=>{e&&e.classList&&t.split(" ").forEach((n=>{n&&e.classList.add(n)}))};/*! License details at fancyapps.com/license */const ml=(e,t="")=>{e&&e.classList&&t.split(" ").forEach((n=>{n&&e.classList.remove(n)}))};/*! License details at fancyapps.com/license */const $a=(e,t="",n)=>{e&&e.classList&&t.split(" ").forEach((r=>{r&&e.classList.toggle(r,n||!1)}))};/*! License details at fancyapps.com/license */const a_=e=>{e.cancelable&&e.preventDefault()},ll=(e,t=1e4)=>(e=parseFloat(e+"")||0,Math.round((e+Number.EPSILON)*t)/t),Cd=e=>e instanceof HTMLImageElement;var ur,EG;(function(e){e.Reset="reset",e.Zoom="zoom",e.ZoomIn="zoomIn",e.ZoomOut="zoomOut",e.ZoomTo="zoomTo",e.ToggleCover="toggleCover",e.ToggleFull="toggleFull",e.ToggleMax="toggleMax",e.IterateZoom="iterateZoom",e.Pan="pan",e.Swipe="swipe",e.Move="move",e.MoveLeft="moveLeft",e.MoveRight="moveRight",e.MoveUp="moveUp",e.MoveDown="moveDown",e.RotateCCW="rotateCCW",e.RotateCW="rotateCW",e.FlipX="flipX",e.FlipY="flipY",e.ToggleFS="toggleFS"})(ur||(ur={})),(function(e){e.Cover="cover",e.Full="full",e.Max="max"})(EG||(EG={}));const zu={x:0,y:0,scale:1,angle:0,flipX:1,flipY:1},x5={bounds:!0,classes:{container:"f-panzoom",wrapper:"f-panzoom__wrapper",content:"f-panzoom__content",viewport:"f-panzoom__viewport"},clickAction:ur.ToggleFull,dblClickAction:!1,gestures:{},height:"auto",l10n:iz,maxScale:4,minScale:1,mouseMoveFactor:1,panMode:"drag",protected:!1,singleClickAction:!1,spinnerTpl:'<div class="f-spinner"></div>',wheelAction:ur.Zoom,width:"auto"};let uA,TG=0,MG=0,dA=0;const w5=(e,t={},n={})=>{let r,s,o,c,i,f,g,x,w=0,A=Object.assign(Object.assign({},x5),t),C={},F=Object.assign({},zu),z=Object.assign({},zu);const j=[];function V(ze){let lt=A[ze];return lt&&typeof lt=="function"?lt(Rt):lt}function Y(){return e&&e.parentElement&&r&&w===3}const te=new Map;function J(ze,...lt){const at=[...te.get(ze)||[]];A.on&&at.push(A.on[ze]);for(const Et of at)Et&&Et instanceof Function&&Et(Rt,...lt);ze!=="*"&&J("*",ze,...lt)}function ee(ze){if(!Y())return;const lt=ze.target;if(U_(lt))return;const at=Date.now(),Et=[-ze.deltaX||0,-ze.deltaY||0,-ze.detail||0].reduce((function(vn,_t){return Math.abs(_t)>Math.abs(vn)?_t:vn})),$e=Oi(-1,Et,1);J("wheel",ze,$e);const Mt=V("wheelAction");if(!Mt||ze.defaultPrevented)return;const tn=z.scale;let on=tn*($e>0?1.5:.5);if(Mt===ur.Zoom){const vn=Math.abs(ze.deltaY)<100&&Math.abs(ze.deltaX)<100;if(at-MG<(vn?200:45))return void a_(ze);MG=at;const _t=ke(),wt=$t();if(ll(on)<ll(_t)&&ll(tn)<=ll(_t)?(dA+=Math.abs($e),on=_t):ll(on)>ll(wt)&&ll(tn)>=ll(wt)?(dA+=Math.abs($e),on=wt):(dA=0,on=Oi(_t,on,wt)),dA>7)return}switch(a_(ze),Mt){case ur.Pan:mn(Mt,{srcEvent:ze,deltaX:2*-ze.deltaX,deltaY:2*-ze.deltaY});break;case ur.Zoom:mn(ur.ZoomTo,{srcEvent:ze,scale:on,center:{x:ze.clientX,y:ze.clientY}});break;default:mn(Mt,{srcEvent:ze})}}function le(ze){var lt,at;const Et=ze.composedPath()[0];if(!f1.isClickAllowed()||!p0(Et)||ze.defaultPrevented||!e?.contains(Et)||Et.hasAttribute("disabled")||Et.hasAttribute("aria-disabled")||Et.hasAttribute("data-carousel-go-prev")||Et.hasAttribute("data-carousel-go-next"))return;const $e=Et.closest("[data-panzoom-action]"),Mt=(lt=$e?.dataset)===null||lt===void 0?void 0:lt.panzoomAction,tn=((at=$e?.dataset)===null||at===void 0?void 0:at.panzoomValue)||"";if(Mt){switch(a_(ze),Mt){case ur.ZoomTo:case ur.ZoomIn:case ur.ZoomOut:mn(Mt,{scale:parseFloat(tn||"")||void 0});break;case ur.MoveLeft:case ur.MoveRight:mn(Mt,{deltaX:parseFloat(tn||"")||void 0});break;case ur.MoveUp:case ur.MoveDown:mn(Mt,{deltaY:parseFloat(tn||"")||void 0});break;case ur.ToggleFS:ht();break;default:mn(Mt)}return}if(!r?.contains(Et))return;const on={srcEvent:ze};if(mn(V("clickAction"),on),V("dblClickAction")){const vn=Date.now(),_t=vn-(TG||vn);TG=vn,_t>0&&_t<=250?(uA&&(clearTimeout(uA),uA=void 0),mn(V("dblClickAction"),on)):uA=setTimeout((()=>{mn(V("singleClickAction"),on)}),250)}}function oe(ze){if(x=ze,!Y()||!Ce()||F.scale<=1||z.scale<=1||(r?.dataset.animationName||"").indexOf("zoom")>-1)return;const lt=Ee(z.scale);if(!lt)return;const{x:at,y:Et}=lt;mn(ur.Pan,{deltaX:at-z.x,deltaY:Et-z.y})}function ve(){var ze;e&&(ml(e,"is-loading"),(ze=e.querySelector(".f-spinner"))===null||ze===void 0||ze.remove())}function se(){if(!e||!s)return;if(ve(),Cd(s)&&(!s.complete||!s.naturalWidth))return w=2,r?.classList.add("has-error"),void J("error");J("loaded");const{width:ze,height:lt}=be();Cd(s)&&(s.setAttribute("width",ze+""),s.setAttribute("height",lt+"")),r&&(ml(r,"has-error"),Cd(s)&&(r.setAttribute("width",ze+""),r.setAttribute("height",lt+""),r.style.aspectRatio=`${ze/lt||""}`)),f=Vm().on("start",((Et,$e)=>{$e.angle!==void 0&&($e.angle=90*Math.round($e.angle/90)),$e.flipX!==void 0&&($e.flipX=$e.flipX>0?1:-1),$e.flipY!==void 0&&($e.flipY=$e.flipY>0?1:-1),z=Object.assign(Object.assign({},zu),$e),nn(),J("animationStart")})).on("pause",(Et=>{z=Object.assign(Object.assign({},zu),Et)})).on("step",(Et=>{if(!Y())return void(f==null||f.end());if(F=Object.assign(Object.assign({},zu),Et),Ce()||!V("bounds")||ge()||z.scale>F.scale||z.scale<He())return void Xt();const $e=Ft(z.scale);let Mt=!1,tn=!1,on=!1,vn=!1;F.x<$e.x[0]&&(Mt=!0),F.x>$e.x[1]&&(tn=!0),F.y<$e.y[0]&&(vn=!0),F.y>$e.y[1]&&(on=!0);let _t=!1,wt=!1,Ve=!1,qe=!1;z.x<$e.x[0]&&(_t=!0),z.x>$e.x[1]&&(wt=!0),z.y<$e.y[0]&&(qe=!0),z.y>$e.y[1]&&(Ve=!0);let Pt=!1;(tn&&wt||Mt&&_t)&&(z.x=Oi($e.x[0],z.x,$e.x[1]),Pt=!0),(on&&Ve||vn&&qe)&&(z.y=Oi($e.y[0],z.y,$e.y[1]),Pt=!0),Pt&&f&&f.spring({tension:94,friction:17,maxSpeed:555*z.scale,restDelta:.1,restSpeed:.1,velocity:f.getCurrentVelocities()}).from(F).to(z).start(),Xt()})).on("end",(()=>{i?.isPointerDown()||Lt(),f?.isRunning()||(nn(),J("animationEnd"))})),(function(){const Et=V("gestures");if(!Et||!c||!s)return;let $e=!1;i=f1(c,Et).on("start",(Mt=>{if(!V("gestures")||!f||!Y()||Ce())return;const tn=Mt.srcEvent;(F.scale>1||Mt.currentTouch.length>1)&&(tn?.stopPropagation(),f.pause(),$e=!0),Mt.currentTouch.length===1&&J("touchStart")})).on("move",(Mt=>{var tn;$e&&(z.scale!==1||Mt.currentTouch.length>1)&&(a_(Mt.srcEvent),(tn=Mt.srcEvent)===null||tn===void 0||tn.stopPropagation())})).on("pan",(Mt=>{if(!$e)return;const tn=Mt.srcEvent;(z.scale!==1||Mt.currentTouch.length>1)&&(a_(tn),mn(ur.Pan,Mt))})).on("swipe",(Mt=>{$e&&z.scale>1&&mn(ur.Swipe,Mt)})).on("tap",(Mt=>{J("click",Mt)})).on("singleTap",(Mt=>{J("singleClick",Mt)})).on("doubleTap",(Mt=>{J("dblClick",Mt)})).on("pinch",(Mt=>{$e&&(Mt.scale>He()?mn(ur.ZoomIn,Mt):Mt.scale<He()?mn(ur.ZoomOut,Mt):mn(ur.Pan,Mt))})).on("end",(Mt=>{$e&&(Mt.currentTouch.length?(Mt.srcEvent.stopPropagation(),a_(Mt.srcEvent),f?.end()):($e=!1,nn(),Lt(),J("touchEnd")))})).init()})(),c&&(c.addEventListener("wheel",ee,{passive:!1}),j.push((()=>{c?.removeEventListener("wheel",ee,{passive:!1})}))),e?.addEventListener("click",le),document?.addEventListener("mousemove",oe),j.push((()=>{e?.removeEventListener("click",le),document?.removeEventListener("mousemove",oe)}));const at=ie();F=Object.assign({},at),z=Object.assign({},at),w=3,Xt(),nn(),J("ready"),requestAnimationFrame((()=>{ve(),c&&(c.style.visibility="")}))}function ie(){const ze=Object.assign({},V("startPos")||{});let lt=ze.scale,at=1;at=typeof lt=="string"?xe(lt):typeof lt=="number"?lt:He();const Et=Object.assign(Object.assign(Object.assign({},zu),ze),{scale:at}),$e=Ce()?Ee(at):void 0;if($e){const{x:Mt,y:tn}=$e;Et.x=Mt,Et.y=tn}return Et}function pe(){const ze={top:0,left:0,width:0,height:0};if(r){const lt=r.getBoundingClientRect();z.angle%180==90?(ze.top=lt.top+.5*lt.height-.5*lt.width,ze.left=lt.left+.5*lt.width-.5*lt.height,ze.width=lt.height,ze.height=lt.width):(ze.top=lt.top,ze.left=lt.left,ze.width=lt.width,ze.height=lt.height)}return ze}function be(){let ze=V("width"),lt=V("height");if(s&&ze==="auto"){const at=s.getAttribute("width");ze=at?parseFloat(at+""):s.dataset.width!==void 0?parseFloat(s.dataset.width+""):Cd(c)?c.naturalWidth:Cd(s)?s.naturalWidth:r?.getBoundingClientRect().width||0}else ze=as(ze)?parseFloat(ze):ze;if(s&&lt==="auto"){const at=s.getAttribute("height");lt=at?parseFloat(at+""):s.dataset.height!==void 0?parseFloat(s.dataset.height+""):Cd(c)?c.naturalHeight:Cd(s)?s.naturalHeight:r?.getBoundingClientRect().height||0}else lt=as(lt)?parseFloat(lt):lt;return{width:ze,height:lt}}function Se(){const ze=pe();return{width:ze.width,height:ze.height}}function Ce(){return V("panMode")==="mousemove"&&matchMedia("(hover: hover)").matches}function Ee(ze){const lt=x||V("event"),at=r?.getBoundingClientRect();if(!lt||!at||ze<=1)return{x:0,y:0};const Et=(lt.clientX||0)-at.left,$e=(lt.clientY||0)-at.top,{width:Mt,height:tn}=Se(),on=Ft(ze);if(ze>1){const qe=V("mouseMoveFactor");qe>1&&(ze*=qe)}let vn=Mt*ze,_t=tn*ze,wt=.5*(vn-Mt)-Et/Mt*100/100*(vn-Mt),Ve=.5*(_t-tn)-$e/tn*100/100*(_t-tn);return wt=Oi(on.x[0],wt,on.x[1]),Ve=Oi(on.y[0],Ve,on.y[1]),{x:wt,y:Ve}}function xe(ze="base"){if(!e)return 1;const lt=e.getBoundingClientRect(),at=pe(),{width:Et,height:$e}=be(),Mt=wt=>{if(typeof wt=="number")return wt;switch(wt){case"min":case"base":return 1;case"cover":return Math.max(lt.height/at.height,lt.width/at.width)||1;case"full":case"max":{const Ve=z.angle%180==90?$e:Et;return Ve&&at.width?Ve/at.width:1}}},tn=V("minScale"),on=V("maxScale"),vn=Math.min(Mt("full"),Mt(tn)),_t=typeof on=="number"?Mt("full")*on:Math.min(Mt("full"),Mt(on));switch(ze){case"min":return vn;case"base":return Oi(vn,1,_t);case"cover":return Mt("cover");case"full":return Math.min(_t,Mt("full"));case"max":return _t}}function ke(){return xe("min")}function He(){return xe("base")}function Ke(){return xe("cover")}function Ge(){return xe("full")}function $t(){return xe("max")}function Ft(ze){const lt={x:[0,0],y:[0,0]},at=e?.getBoundingClientRect();if(!at)return lt;const Et=pe(),$e=at.width,Mt=at.height;let tn=Et.width,on=Et.height,vn=ze=ze===void 0?z.scale:ze,_t=ze;if(Ce()&&ze>1){const wt=V("mouseMoveFactor");wt>1&&(tn*ze>$e+.01&&(vn*=wt),on*ze>Mt+.01&&(_t*=wt))}return tn*=vn,on*=_t,ze>1&&(tn>$e&&(lt.x[0]=.5*($e-tn),lt.x[1]=.5*(tn-$e)),lt.x[0]-=.5*(Et.left-at.left),lt.x[1]-=.5*(Et.left-at.left),lt.x[0]-=.5*(Et.left+Et.width-at.right),lt.x[1]-=.5*(Et.left+Et.width-at.right),on>Mt&&(lt.y[0]=.5*(Mt-on),lt.y[1]=.5*(on-Mt)),lt.y[0]-=.5*(Et.top-at.top),lt.y[1]-=.5*(Et.top-at.top),lt.y[0]-=.5*(Et.top+Et.height-at.bottom),lt.y[1]-=.5*(Et.top+Et.height-at.bottom)),lt}function Lt(){if(!Y()||!V("bounds")||!f)return;const ze=ke(),lt=$t(),at=Oi(ze,z.scale,lt);if(z.scale<ze-.01||z.scale>lt+.01)return void mn(ur.ZoomTo,{scale:at});if(f.isRunning()||ge())return;const Et=Ft(at);z.x<Et.x[0]||z.x>Et.x[1]||z.y<Et.y[0]||z.y>Et.y[1]?(z.x=Oi(Et.x[0],z.x,Et.x[1]),z.y=Oi(Et.y[0],z.y,Et.y[1]),f.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:f.getCurrentVelocities()}),f.from(F).to(z).start()):Xt()}function nn(ze){var lt;if(!Y())return;const at=je(),Et=ge(),$e=nt(),Mt=It(),tn=Jt(),on=Kt();$a(r,"is-fullsize",Mt),$a(r,"is-expanded",$e),$a(r,"is-dragging",Et),$a(r,"can-drag",at),$a(r,"will-zoom-in",tn),$a(r,"will-zoom-out",on);const vn=bn(),_t=On(),wt=_e(),Ve=!Y();for(const qe of((lt=ze||e)===null||lt===void 0?void 0:lt.querySelectorAll("[data-panzoom-action]"))||[]){const Pt=qe.dataset.panzoomAction;let Qt=!1;if(Ve)Qt=!0;else switch(Pt){case ur.ZoomIn:vn||(Qt=!0);break;case ur.ZoomOut:wt||(Qt=!0);break;case ur.ToggleFull:{_t||wt||(Qt=!0);const cn=qe.querySelector("g");cn&&(cn.style.display=Mt&&!Qt?"none":"");break}case ur.IterateZoom:{vn||wt||(Qt=!0);const cn=qe.querySelector("g");cn&&(cn.style.display=vn||Qt?"":"none");break}case ur.ToggleCover:case ur.ToggleMax:vn||wt||(Qt=!0)}Qt?(qe.setAttribute("aria-disabled",""),qe.setAttribute("tabindex","-1")):(qe.removeAttribute("aria-disabled"),qe.removeAttribute("tabindex"))}}function mn(ze,lt){var at;if(!(ze&&e&&s&&f&&Y())||ze===ur.Swipe&&Math.abs(f.getCurrentVelocities().scale)>.01)return;const Et=Object.assign({},z);let $e=Object.assign({},z),Mt=Ft(Ce()?Et.scale:F.scale);const tn=f.getCurrentVelocities(),on=pe(),vn=(((at=(lt=lt||{}).currentTouch)===null||at===void 0?void 0:at.length)||0)>1,_t=lt.velocityX||0,wt=lt.velocityY||0;let Ve=lt.center;lt.srcEvent&&(Ve=Up(Sse(lt.srcEvent)));let qe=lt.deltaX||0,Pt=lt.deltaY||0;switch(ze){case ur.MoveRight:qe=lt.deltaX||100;break;case ur.MoveLeft:qe=lt.deltaX||-100;break;case ur.MoveUp:Pt=lt.deltaY||-100;break;case ur.MoveDown:Pt=lt.deltaY||100}let Qt=[];switch(ze){case ur.Reset:$e=Object.assign({},zu),$e.scale=He();break;case ur.Pan:case ur.Move:case ur.MoveLeft:case ur.MoveRight:case ur.MoveUp:case ur.MoveDown:if(ge()){let Te=1,ye=1;$e.x<=Mt.x[0]&&_t<=0&&(Te=Math.max(.01,1-Math.abs(1/on.width*Math.abs($e.x-Mt.x[0]))),Te*=.2),$e.x>=Mt.x[1]&&_t>=0&&(Te=Math.max(.01,1-Math.abs(1/on.width*Math.abs($e.x-Mt.x[1]))),Te*=.2),$e.y<=Mt.y[0]&&wt<=0&&(ye=Math.max(.01,1-Math.abs(1/on.height*Math.abs($e.y-Mt.y[0]))),ye*=.2),$e.y>=Mt.y[1]&&wt>=0&&(ye=Math.max(.01,1-Math.abs(1/on.height*Math.abs($e.y-Mt.y[1]))),ye*=.2),$e.x+=qe*Te,$e.y+=Pt*ye}else $e.x=Oi(Mt.x[0],$e.x+qe,Mt.x[1]),$e.y=Oi(Mt.y[0],$e.y+Pt,Mt.y[1]);break;case ur.Swipe:const cn=(Te=0)=>Math.sign(Te)*Math.pow(Math.abs(Te),1.5);$e.x+=Oi(-1e3,cn(_t),1e3),$e.y+=Oi(-1e3,cn(wt),1e3),wt&&!_t&&($e.x=Oi(Mt.x[0],$e.x,Mt.x[1])),!wt&&_t&&($e.y=Oi(Mt.y[0],$e.y,Mt.y[1])),tn.x=_t,tn.y=wt;break;case ur.ZoomTo:$e.scale=lt.scale||1;break;case ur.ZoomIn:$e.scale=$e.scale*(lt.scale||2),vn||($e.scale=Math.min($e.scale,$t()));break;case ur.ZoomOut:$e.scale=$e.scale*(lt.scale||.5),vn||($e.scale=Math.max($e.scale,ke()));break;case ur.ToggleCover:Qt=[He(),Ke()];break;case ur.ToggleFull:Qt=[He(),Ge()];break;case ur.ToggleMax:Qt=[He(),$t()];break;case ur.IterateZoom:Qt=[He(),Ge(),$t()];break;case ur.Zoom:const dn=Ge();$e.scale>=dn-.05?$e.scale=He():$e.scale=Math.min(dn,$e.scale*(lt.scale||2));break;case ur.RotateCW:$e.angle+=90;break;case ur.RotateCCW:$e.angle-=90;break;case ur.FlipX:$e.flipX*=-1;break;case ur.FlipY:$e.flipY*=-1}if(F.angle!==void 0&&Math.abs(F.angle)>=360&&($e.angle-=360*Math.floor(F.angle/360),F.angle-=360*Math.floor(F.angle/360)),Qt.length){const cn=Qt.findIndex((dn=>dn>$e.scale+1e-4));$e.scale=Qt[cn]||Qt[0]}if(vn&&($e.scale=Oi(ke()*(vn?.8:1),$e.scale,$t()*(vn?1.6:1))),Ce()){const cn=Ee($e.scale);if(cn){const{x:dn,y:Te}=cn;$e.x=dn,$e.y=Te}}else if(Math.abs($e.scale-Et.scale)>1e-4){let cn=0,dn=0;if(Ve)cn=Ve.x,dn=Ve.y;else{const At=e.getBoundingClientRect();cn=At.x+.5*At.width,dn=At.y+.5*At.height}let Te=cn-on.left,ye=dn-on.top;Te-=.5*on.width,ye-=.5*on.height;const We=(Te-Et.x)/Et.scale,ot=(ye-Et.y)/Et.scale;$e.x=Te-We*$e.scale,$e.y=ye-ot*$e.scale,!vn&&V("bounds")&&(Mt=Ft($e.scale),$e.x=Oi(Mt.x[0],$e.x,Mt.x[1]),$e.y=Oi(Mt.y[0],$e.y,Mt.y[1]))}if(ze===ur.Swipe){let cn=94,dn=17,Te=500*$e.scale,ye=tn;f.spring({tension:cn,friction:dn,maxSpeed:Te,restDelta:.1,restSpeed:.1,velocity:ye})}else ze===ur.Pan||vn?f.spring({tension:900,friction:17,restDelta:.01,restSpeed:.01,maxSpeed:1}):f.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:tn});if(lt.velocity===0||hS(F,$e))F=Object.assign({},$e),z=Object.assign({},$e),f.end(),Xt(),nn();else{if(hS(z,$e))return;f.from(F).to($e).start()}J("action",ze)}function Xt(){if(!s||!r||!c)return;const{width:ze,height:lt}=be();Object.assign(r.style,{maxWidth:`min(${ze}px, 100%)`,maxHeight:`min(${lt}px, 100%)`});const at=(function(){const{width:qe,height:Pt}=be(),{width:Qt,height:cn}=Se();if(!e)return{x:0,y:0,width:0,height:0,scale:0,flipX:0,flipY:0,angle:0,fitWidth:Qt,fitHeight:cn,fullWidth:qe,fullHeight:Pt};let{x:dn,y:Te,scale:ye,angle:We,flipX:ot,flipY:At}=F,Vt=1/Ge(),an=qe,xn=Pt,Hn=F.scale*Vt,Gn=z.scale*Vt;const cr=Math.max(Qt,cn),yt=Math.min(Qt,cn);qe>Pt?(an=cr,xn=yt):(an=yt,xn=cr),Hn=qe>Pt?cr*ye/qe||1:cr*ye/Pt||1;let ue=an?qe*Gn:0,we=xn?Pt*Gn:0,Re=an&&xn?qe*Hn/ue:0;return dn=dn+.5*an-.5*ue,Te=Te+.5*xn-.5*we,{x:dn,y:Te,width:ue,height:we,scale:Re,flipX:ot,flipY:At,angle:We,fitWidth:Qt,fitHeight:cn,fullWidth:qe,fullHeight:Pt}})(),{x:Et,y:$e,width:Mt,height:tn,scale:on,angle:vn,flipX:_t,flipY:wt}=at;let Ve=`translate(${ll(Et)}px, ${ll($e)}px)`;Ve+=_t!==1||wt!==1?` scaleX(${ll(on*_t)}) scaleY(${ll(on*wt)})`:` scale(${ll(on)})`,vn!==0&&(Ve+=` rotate(${vn}deg)`),c.style.width=`${ll(Mt)}px`,c.style.height=`${ll(tn)}px`,c.style.transform=`${Ve}`,J("render")}function mt(){let ze=z.scale;const lt=V("clickAction");let at=He();if(lt){let Et=[];switch(lt){case ur.ZoomIn:at=2*ze;break;case ur.ZoomOut:at=.5*ze;break;case ur.ToggleCover:Et=[He(),Ke()];break;case ur.ToggleFull:Et=[He(),Ge()];break;case ur.ToggleMax:Et=[He(),$t()];break;case ur.IterateZoom:Et=[He(),Ge(),$t()];break;case ur.Zoom:const $e=Ge();at=ze>=$e-.05?He():Math.min($e,2*ze)}if(Et.length){const $e=Et.findIndex((Mt=>Mt>ze+1e-4));at=Et[$e]||He()}}return at=Oi(ke(),at,$t()),at}function Jt(){return!!(Y()&&mt()>z.scale)}function Kt(){return!!(Y()&&mt()<z.scale)}function _e(){return!!(Y()&&z.scale>ke())}function bn(){return!!(Y()&&z.scale<$t())}function On(){return!!(Y()&&z.scale<Ge())}function je(){return!(!(Y()&&nt()&&i)||Ce())}function ge(){return!(!Y()||!i?.isPointerDown()||Ce())}function nt(){return!!(Y()&&z.scale>He())}function It(){return!!(Y()&&z.scale>=Ge())}function ht(){const ze="in-fullscreen",lt="with-panzoom-in-fullscreen";e?.classList.toggle(ze);const at=e?.classList.contains(ze);at?(document.documentElement.classList.add(lt),document.addEventListener("keydown",ut,!0)):(document.documentElement.classList.remove(lt),document.removeEventListener("keydown",ut,!0)),Xt(),J(at?"enterFS":"exitFS")}function ut(ze){ze.key!=="Escape"||ze.defaultPrevented||ht()}const Rt={canDrag:je,canZoomIn:bn,canZoomOut:_e,canZoomToFull:On,destroy:function(){J("destroy");for(const ze of Object.values(C))ze?.destroy(Rt);for(const ze of j)ze();return r&&(r.style.aspectRatio="",r.style.maxWidth="",r.style.maxHeight=""),c&&(c.style.width="",c.style.height="",c.style.transform=""),r=void 0,s=void 0,c=void 0,F=Object.assign({},zu),z=Object.assign({},zu),f?.destroy(),f=void 0,i?.destroy(),i=void 0,w=4,Rt},emit:J,execute:mn,getBoundaries:Ft,getContainer:function(){return e},getContent:function(){return s},getFullDim:be,getGestures:function(){return i},getMousemovePos:Ee,getOptions:function(){return A},getPlugins:function(){return C},getScale:xe,getStartPosition:ie,getState:function(){return w},getTransform:function(ze){return ze===!0?z:F},getTween:function(){return f},getViewport:function(){return c},getWrapper:function(){return r},init:function(){return w=0,J("init"),(function(){for(const[ze,lt]of Object.entries(Object.assign(Object.assign({},n),A.plugins||{})))if(ze&&!C[ze]&&lt instanceof Function){const at=lt();at.init(Rt),C[ze]=at}J("initPlugins")})(),(function(){const ze=Object.assign(Object.assign({},x5.classes),V("classes"));if(e&&(Jr(e,ze.container),s=e.querySelector("."+ze.content),!!s)){if(s.setAttribute("draggable","false"),r=e.querySelector("."+ze.wrapper),r||(r=document.createElement("div"),Jr(r,ze.wrapper),s.insertAdjacentElement("beforebegin",r),r.insertAdjacentElement("afterbegin",s)),c=e.querySelector("."+ze.viewport),c||(c=document.createElement("div"),Jr(c,ze.viewport),c.insertAdjacentElement("afterbegin",s),r.insertAdjacentElement("beforeend",c)),o=s.cloneNode(!0),o.removeAttribute("id"),r.insertAdjacentElement("afterbegin",o),s instanceof HTMLPictureElement&&(s=s.querySelector("img")),o instanceof HTMLPictureElement&&(o=o.querySelector("img")),c instanceof HTMLPictureElement&&(c=c.querySelector("img")),c&&(c.style.visibility="hidden",V("protected"))){c.addEventListener("contextmenu",(at=>{a_(at)}));const lt=document.createElement("div");Jr(lt,"f-panzoom__protected"),c.appendChild(lt)}J("initLayout")}})(),(function(){if(e&&r&&!g){let ze=null;g=new ResizeObserver((()=>{Y()&&(ze=ze||requestAnimationFrame((()=>{Y()&&(nn(),Lt(),J("refresh")),ze=null})))})),g.observe(r),j.push((()=>{g?.disconnect(),g=void 0,ze&&(cancelAnimationFrame(ze),ze=null)}))}})(),(function(){if(!e||!s)return;if(!Cd(s)||!Cd(o))return void se();const ze=()=>{s&&Cd(s)&&s.decode().then((()=>{se()})).catch((()=>{se()}))};if(w=1,e.classList.add("is-loading"),J("loading"),o.src&&o.complete)return void ze();(function(){if(!e||e?.querySelector(".f-spinner"))return;const lt=V("spinnerTpl"),at=vf(lt);at&&(at.classList.add("f-spinner"),e.classList.add("is-loading"),r?.insertAdjacentElement("afterbegin",at))})(),o.addEventListener("load",ze,!1),o.addEventListener("error",ze,!1),j.push((()=>{o?.removeEventListener("load",ze,!1),o?.removeEventListener("error",ze,!1)}))})(),Rt},isDragging:ge,isExpanded:nt,isFullsize:It,isMousemoveMode:Ce,localize:function(ze,lt=[]){const at=V("l10n")||{};ze=String(ze).replace(/\{\{(\w+)\}\}/g,((Et,$e)=>at[$e]||Et));for(let Et=0;Et<lt.length;Et++)ze=ze.split(lt[Et][0]).join(lt[Et][1]);return ze=ze.replace(/\{\{(.*?)\}\}/g,((Et,$e)=>$e))},off:function(ze,lt){for(const at of ze instanceof Array?ze:[ze])te.has(at)&&te.set(at,te.get(at).filter((Et=>Et!==lt)));return Rt},on:function(ze,lt){for(const at of ze instanceof Array?ze:[ze])te.set(at,[...te.get(at)||[],lt]);return Rt},toggleFS:ht,updateControls:nn,version:"6.1.7",willZoomIn:Jt,willZoomOut:Kt};return Rt};w5.l10n={en_EN:iz},w5.getDefaults=()=>x5;/*! License details at fancyapps.com/license */const OR=(e,t)=>{let n=[];return e.childNodes.forEach((r=>{r.nodeType!==Node.ELEMENT_NODE||t&&!r.matches(t)||n.push(r)})),n};/*! License details at fancyapps.com/license */const Ql=(e,...t)=>{const n=t.length;for(let r=0;r<n;r++){const s=t[r]||{};Object.entries(s).forEach((([o,c])=>{const i=Array.isArray(c)?[]:{};e[o]||Object.assign(e,{[o]:i}),Ma(c)?Object.assign(e[o],Ql(e[o],c)):Array.isArray(c)?Object.assign(e,{[o]:[...c]}):Object.assign(e,{[o]:c})}))}return e};/*! License details at fancyapps.com/license */const jI=function(e=0,t=0,n=0,r=0,s=0,o=!1){const c=(e-t)/(n-t)*(s-r)+r;return o?r<s?Oi(r,c,s):Oi(s,c,r):c};/*! License details at fancyapps.com/license */const sz=Object.assign(Object.assign({},iz),{ERROR:"Something went wrong. <br /> Please try again later.",NEXT:"Next page",PREV:"Previous page",GOTO:"Go to page #%d",DOWNLOAD:"Download",TOGGLE_FULLSCREEN:"Toggle full-screen mode",TOGGLE_EXPAND:"Toggle full-size mode",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_AUTOPLAY:"Toggle slideshow"});/*! License details at fancyapps.com/license */const l_=e=>{e.cancelable&&e.preventDefault()},r0={adaptiveHeight:!1,center:!0,classes:{container:"f-carousel",isEnabled:"is-enabled",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",hasAdaptiveHeight:"has-adaptive-height",viewport:"f-carousel__viewport",slide:"f-carousel__slide",isSelected:"is-selected"},dragFree:!1,enabled:!0,errorTpl:'<div class="f-html">{{ERROR}}</div>',fill:!1,infinite:!0,initialPage:0,l10n:sz,rtl:!1,slides:[],slidesPerPage:"auto",spinnerTpl:'<div class="f-spinner"></div>',transition:"fade",tween:{clamp:!0,mass:1,tension:160,friction:25,restDelta:1,restSpeed:1,velocity:0},vertical:!1};let AG,CG=0;const UI=(e,t={},n={})=>{CG++;let r,s,o,c,i,f=0,g=Object.assign({},r0),x=Object.assign({},r0),w={},A=null,C=null,F=0,z=0,j=0,V=!1,Y=!1,te=!1,J="height",ee=0,le=!0,oe=0,ve=0,se=0,ie=0,pe="*",be=[],Se=[];const Ce=new Set;let Ee=[],xe=[],ke=0,He=0,Ke=0;function Ge(Te,...ye){let We=x[Te];return We&&We instanceof Function?We(dn,...ye):We}function $t(Te,ye=[]){const We=Ge("l10n")||{};Te=String(Te).replace(/\{\{(\w+)\}\}/g,((ot,At)=>We[At]||ot));for(let ot=0;ot<ye.length;ot++)Te=Te.split(ye[ot][0]).join(ye[ot][1]);return Te=Te.replace(/\{\{(.*?)\}\}/g,((ot,At)=>At))}const Ft=new Map;function Lt(Te,...ye){const We=[...Ft.get(Te)||[]];x.on&&We.push(x.on[Te]);for(const ot of We)ot&&ot instanceof Function&&ot(dn,...ye);Te!=="*"&&Lt("*",Te,...ye)}function nn(){var Te,ye;const We=Ql({},r0,g);Ql(We,r0,g);let ot="";const At=g.breakpoints||{};if(At)for(const[Vt,an]of Object.entries(At))window.matchMedia(Vt).matches&&(ot+=Vt,Ql(We,an));if(i===void 0||ot!==i){if(i=ot,f!==0){let Vt=(ye=(Te=xe[oe])===null||Te===void 0?void 0:Te.slides[0])===null||ye===void 0?void 0:ye.index;Vt===void 0&&(Vt=x.initialSlide),We.initialSlide=Vt,We.slides=[];for(const an of be)an.isVirtual&&We.slides.push(an)}Pt(),x=We,Ge("enabled")!==!1&&(f=0,Lt("init"),(function(){for(const[Vt,an]of Object.entries(Object.assign(Object.assign({},n),x.plugins||{})))if(Vt&&!w[Vt]&&an instanceof Function){const xn=an();xn.init(dn,UI),w[Vt]=xn}Lt("initPlugins")})(),(function(){if(!A)return;const Vt=Ge("classes")||{};Jr(A,Vt.container);const an=Ge("style");if(an&&Ma(an))for(const[xn,Hn]of Object.entries(an))A.style.setProperty(xn,Hn);C=A.querySelector(`.${Vt.viewport}`),C||(C=document.createElement("div"),Jr(C,Vt.viewport),C.append(...OR(A,`.${Vt.slide}`)),A.insertAdjacentElement("afterbegin",C)),A.carousel=dn,Lt("initLayout")})(),(function(){if(!C)return;const Vt=Ge("classes")||{};be=[],[...OR(C,`.${Vt.slide}`)].forEach((an=>{if(an.parentElement){const xn=ht(Object.assign({el:an,isVirtual:!1},an.dataset||{}));Lt("createSlide",xn),be.push(xn)}})),lt();for(const an of be)Lt("addSlide",an);It(Ge("slides"));for(const an of be){const xn=an.el;xn?.parentElement===C&&(Jr(xn,x.classes.slide),Jr(xn,an.class),_t(an),Lt("attachSlideEl",an))}Lt("initSlides")})(),at(),f=1,Jr(A,(Ge("classes")||{}).isEnabled||""),qe(),Kt(),s=Vm().on("start",(()=>{r&&r.isPointerDown()||(Jt(),qe())})).on("step",(Vt=>{const an=ee;ee=Vt.pos,ee!==an&&(le=!1,qe())})).on("end",(Vt=>{r?.isPointerDown()||(ee=Vt.pos,s&&!V&&(ee<se||ee>ie)?s.spring({clamp:!0,mass:1,tension:200,friction:25,velocity:0,restDelta:1,restSpeed:1}).from({pos:ee}).to({pos:Oi(se,ee,ie)}).start():le||(le=!0,Lt("settle")))})),Xt(),(function(){if(!A||!C)return;A.addEventListener("click",tn),document.addEventListener("mousemove",mn);const Vt=C.getBoundingClientRect();if(ke=Vt.height,He=Vt.width,!o){let an=null;o=new ResizeObserver((()=>{an||(an=requestAnimationFrame((()=>{(function(){if(f!==1||!C)return;const xn=xe.length,Hn=C.getBoundingClientRect(),Gn=Hn.height,cr=Hn.width;xn>1&&(te&&Math.abs(Gn-ke)<.5||!te&&Math.abs(cr-He)<.5)||(at(),Xt(),ke=Gn,He=cr,te&&!ke||!te&&!He||A&&C&&(xn===xe.length&&r?.isPointerDown()||(Ge("dragFree")&&(V||ee>se&&ee<ie)?(Jt(),qe()):wt(oe,{transition:!1}))))})(),an=null})))})),o.observe(C)}})(),Lt("ready"))}}function mn(Te){AG=Te}function Xt(){Ge("gestures")===!1?r&&(r.destroy(),r=void 0):r||(function(){const Te=Ge("gestures");!r&&Te!==!1&&C&&(r=f1(C,Te).on("start",(ye=>{var We,ot;if(!s||Ge("gestures",ye)===!1)return;const{srcEvent:At}=ye;te&&g2(At)&&!U_(At.target)&&l_(At),s.pause(),s.getCurrentVelocities().pos=0;const Vt=(We=xe[oe])===null||We===void 0?void 0:We.slides[0],an=Vt?.el;Vt&&Ce.has(Vt.index)&&an&&(ee=Vt.offset||0,ee+=((function(xn){const Hn=window.getComputedStyle(xn),Gn=new DOMMatrixReadOnly(Hn.transform);return{width:Gn.m41||0,height:Gn.m42||0}})(an)[J]||0)*(Y&&!te?1:-1)),$e(),V||(ee<se||ee>ie)&&s.spring({clamp:!0,mass:1,tension:500,friction:25,velocity:((ot=s.getCurrentVelocities())===null||ot===void 0?void 0:ot.pos)||0,restDelta:1,restSpeed:1}).from({pos:ee}).to({pos:Oi(se,ee,ie)}).start()})).on("move",(ye=>{var We,ot;if(Ge("gestures",ye)===!1)return;const{srcEvent:At,axis:Vt,deltaX:an,deltaY:xn}=ye;if(g2(At)&&((We=At.touches)===null||We===void 0?void 0:We.length)>1)return;const Hn=At.target,Gn=U_(Hn),cr=Gn?Gn.scrollHeight>Gn.clientHeight?"y":"x":void 0;if(Gn&&Gn!==C&&(!Vt||Vt===cr))return;if(!Vt)return l_(At),At.stopPropagation(),void At.stopImmediatePropagation();if(Vt==="y"&&!te||Vt==="x"&&te||(l_(At),At.stopPropagation(),!s))return;const yt=Y&&!te?1:-1,ue=te?xn:an;let we=s?.isRunning()?s.getEndValues().pos:ee,Re=1;V||(we<=se&&ue*yt<0?(Re=Math.max(.01,1-(Math.abs(1/je()*Math.abs(we-se))||0)),Re*=.2):we>=ie&&ue*yt>0&&(Re=Math.max(.01,1-(Math.abs(1/je()*Math.abs(we-ie))||0)),Re*=.2)),we+=ue*Re*yt,s.spring({clamp:!0,mass:1,tension:700,friction:25,velocity:((ot=s.getCurrentVelocities())===null||ot===void 0?void 0:ot.pos)||0,restDelta:1,restSpeed:1}).from({pos:ee}).to({pos:we}).start()})).on("panstart",(ye=>{Ge("gestures",ye)!==!1&&ye?.axis===(te?"y":"x")&&Jr(C,"is-dragging")})).on("panend",(ye=>{Ge("gestures",ye)!==!1&&ml(C,"is-dragging")})).on("end",(ye=>{var We,ot;if(Ge("gestures",ye)===!1)return;const{srcEvent:At,axis:Vt,velocityX:an,velocityY:xn,currentTouch:Hn}=ye;if(Hn.length>0||!s)return;const Gn=At.target,cr=U_(Gn),yt=cr?cr.scrollHeight>cr.clientHeight?"y":"x":void 0,ue=cr&&(!Vt||Vt===yt);te&&g2(At)&&!ye.axis&&tn(At);const we=xe.length,Re=Ge("dragFree");if(!we)return;const Xe=ue?0:Ge("vertical")?xn:an;let Ue=s?.isRunning()?s.getEndValues().pos:ee;const it=Y&&!te?1:-1;if(ue||(Ue+=Xe*(Re?5:1)*it),!V&&(Xe*it<=0&&Ue<se||Xe*it>=0&&Ue>ie)){let st=0;return Math.abs(Xe)>0&&(st=2*Math.abs(Xe),st=Math.min(.3*je(),st)),Ue=Oi(se+-1*st,Ue,ie+st),void s.spring({clamp:!0,mass:1,tension:380,friction:25,velocity:-1*Xe,restDelta:1,restSpeed:1}).from({pos:ee}).to({pos:Ue}).start()}if(Re||!((We=w.Autoscroll)===null||We===void 0)&&We.isEnabled())return void(Math.abs(Xe)>10?s.spring({clamp:!0,mass:1,tension:150,friction:25,velocity:-1*Xe,restDelta:1,restSpeed:1}).from({pos:ee}).to({pos:Ue}).start():s.isRunning()||le||(le=!0,Lt("settle")));if(!Re&&!(!((ot=w.Autoscroll)===null||ot===void 0)&&ot.isEnabled())&&(!ye.offsetX&&!ye.offsetY||Vt==="y"&&!te||Vt==="x"&&te))return void wt(oe,{transition:"tween"});let vt=bn(Ue);Math.abs(Xe)>10&&vt===oe&&(vt+=Xe>0?Y&&!te?1:-1:Y&&!te?-1:1),wt(vt,{transition:"tween",tween:{velocity:-1*Xe}})})).init())})(),$a(C,"is-draggable",!!r&&xe.length>0)}function mt(Te="*"){var ye;const We=[];for(const ot of be)(Te==="*"||ot.class&&ot.class.includes(Te)||ot.el&&(!((ye=ot.el)===null||ye===void 0)&&ye.classList.contains(Te)))&&We.push(ot);c=void 0,pe=Te,Se=[...We]}function Jt(){if(!s)return;const Te=bn(s?.isRunning()?s.getEndValues().pos:ee);Te!==oe&&(c=oe,oe=Te,_t(),Kt(),_e(),Lt("change",oe,c))}function Kt(){var Te,ye;if(!A)return;for(const At of A.querySelectorAll("[data-carousel-index]"))At.innerHTML=oe+"";for(const At of A.querySelectorAll("[data-carousel-page]"))At.innerHTML=oe+1+"";for(const At of A.querySelectorAll("[data-carousel-pages]"))At.innerHTML=xe.length+"";for(const At of A.querySelectorAll("[data-carousel-go-to]"))parseInt(((Te=At.dataset)===null||Te===void 0?void 0:Te.carouselGoTo)||"-1",10)===oe?At.setAttribute("aria-current","true"):At.removeAttribute("aria-current");for(const At of A.querySelectorAll("[data-carousel-go-prev]"))At.toggleAttribute("aria-disabled",!Qt()),Qt()?At.removeAttribute("tabindex"):At.setAttribute("tabindex","-1");for(const At of A.querySelectorAll("[data-carousel-go-next]"))At.toggleAttribute("aria-disabled",!cn()),cn()?At.removeAttribute("tabindex"):At.setAttribute("tabindex","-1");let We=!1;const ot=(ye=xe[oe])===null||ye===void 0?void 0:ye.slides[0];ot&&(ot.downloadSrc||ot.type==="image"&&ot.src)&&(We=!0);for(const At of A.querySelectorAll("[data-carousel-download]"))At.toggleAttribute("aria-disabled",!We)}function _e(Te){var ye;Te||(Te=(ye=xe[oe])===null||ye===void 0?void 0:ye.slides[0]);const We=Te?.el;if(We)for(const ot of We.querySelectorAll("[data-slide-index]"))ot.innerHTML=Te.index+1+""}function bn(Te){var ye,We,ot;if(!xe.length)return 0;const At=ge();let Vt=Te;V?Vt-=Math.floor((Te-((ye=xe[0])===null||ye===void 0?void 0:ye.pos))/At)*At||0:Vt=Oi((We=xe[0])===null||We===void 0?void 0:We.pos,Te,(ot=xe[xe.length-1])===null||ot===void 0?void 0:ot.pos);const an=new Map;let xn=0;for(const Gn of xe){const cr=Math.abs(Gn.pos-Vt),yt=Math.abs(Gn.pos-Vt-At),ue=Math.abs(Gn.pos-Vt+At),we=Math.min(cr,yt,ue);an.set(xn,we),xn++}const Hn=an.size>0?[...an.entries()].reduce(((Gn,cr)=>cr[1]<Gn[1]?cr:Gn)):[oe,0];return parseInt(Hn[0])}function On(){return Ke}function je(){return F}function ge(Te=!0){return Se.length?Se.reduce(((ye,We)=>ye+We.dim),0)+(Se.length-(V&&Te?0:1))*Ke:0}function nt(Te){const ye=ge(),We=je();if(!ye||!C||!We)return[];const ot=[];Te=Te===void 0?ee:Te,V&&(Te-=Math.floor(Te/ye)*ye||0);let At=0;for(let Vt of Se){const an=(xn=0)=>{ot.indexOf(Vt)>-1||(Vt.pos=At-Te+xn||0,Vt.offset+xn>Te-Vt.dim-z+.51&&Vt.offset+xn<Te+We+j-.51&&ot.push(Vt))};Vt.offset=At,V&&(an(ye),an(-1*ye)),an(),At+=Vt.dim+Ke}return ot}function It(Te,ye){const We=[];for(const ot of Array.isArray(Te)?Te:[Te]){const At=ht(Object.assign(Object.assign({},ot),{isVirtual:!0}));At.el||(At.el=document.createElement("div")),Lt("createSlide",At),We.push(At)}be.splice(ye===void 0?be.length:ye,0,...We),lt();for(const ot of We)Lt("addSlide",ot),ut(ot);return mt(pe),We}function ht(Te){return(as(Te)||Te instanceof HTMLElement)&&(Te={html:Te}),Object.assign({index:-1,el:void 0,class:"",isVirtual:!0,dim:0,pos:0,offset:0,html:"",src:""},Te)}function ut(Te){let ye=Te.el;if(!Te||!ye)return;const We=Te.html?Te.html instanceof HTMLElement?Te.html:vf(Te.html):void 0;We&&(Jr(We,"f-html"),Te.htmlEl=We,Jr(ye,"has-html"),ye.append(We),Lt("contentReady",Te))}function Rt(Te){if(!C||!Te)return;let ye=Te.el;if(ye){if(ye.setAttribute("index",Te.index+""),ye.parentElement!==C){let We;Jr(ye,x.classes.slide),Jr(ye,Te.class),_t(Te);for(const ot of be)if(ot.index>Te.index){We=ot.el;break}C.insertBefore(ye,We&&C.contains(We)?We:null),Lt("attachSlideEl",Te)}return _e(Te),ye}}function ze(Te){const ye=Te?.el;ye&&(ye.remove(),Et(ye),Lt("detachSlideEl",Te))}function lt(){for(let Te=0;Te<be.length;Te++){const ye=be[Te],We=ye.el;We&&(ye.index!==Te&&Et(We),We.setAttribute("index",`${Te}`)),ye.index=Te}}function at(){var Te,ye,We,ot,At;if(!A||!C)return;Y=Ge("rtl"),te=Ge("vertical"),J=te?"height":"width";const Vt=Ge("classes");if($a(A,Vt.isLTR,!Y),$a(A,Vt.isRTL,Y),$a(A,Vt.isHorizontal,!te),$a(A,Vt.isVertical,te),$a(A,Vt.hasAdaptiveHeight,Ge("adaptiveHeight")),F=0,z=0,j=0,Ke=0,C){C.childElementCount||(C.style.display="grid");const xn=C.getBoundingClientRect();F=C.getBoundingClientRect()[J]||0;const Hn=window.getComputedStyle(C);Ke=parseFloat(Hn.getPropertyValue("--f-carousel-gap"))||0,Hn.getPropertyValue("overflow-"+(te?"y":"x"))==="visible"&&(z=Math.abs(xn[te?"top":"left"]),j=Math.abs(window[te?"innerHeight":"innerWidth"]-xn[te?"bottom":"right"])),C.style.display=""}if(!F)return;const an=(function(){let xn=0;if(C){let Hn=document.createElement("div");Hn.style.display="block",Jr(Hn,x.classes.slide),C.appendChild(Hn),xn=Hn.getBoundingClientRect()[J],Hn.remove(),Hn=void 0}return xn})();for(const xn of Se){const Hn=xn.el;let Gn=0;if(!xn.isVirtual&&Hn&&p0(Hn)){let cr=!1;Hn.parentElement&&Hn.parentElement===C||(C.appendChild(Hn),cr=!0),Gn=Hn.getBoundingClientRect()[J],cr&&((Te=Hn.parentElement)===null||Te===void 0||Te.removeChild(Hn))}else Gn=an;xn.dim=Gn}if(V=!1,Ge("infinite")){V=!0;const xn=ge();let Hn=F+z+j;for(let Gn=0;Gn<Se.length;Gn++){const cr=((ye=Se[Gn])===null||ye===void 0?void 0:ye.dim)+Ke;if(xn-cr<Hn&&xn-cr-Hn<cr){V=!1;break}}}(function(){var xn;if(!A)return;const Hn=je(),Gn=ge(!1);let cr=Ge("slidesPerPage");cr=cr==="auto"?1/0:parseFloat(cr+""),xe=[];let yt=0,ue=0;for(const vt of Se)(!xe.length||yt+vt.dim-Hn>.05||ue>=cr)&&(xe.push({index:xe.length,slides:[],dim:0,offset:0,pos:0}),yt=0,ue=0),(xn=xe[xe.length-1])===null||xn===void 0||xn.slides.push(vt),yt+=vt.dim+Ke,ue++;const we=Ge("center"),Re=Ge("fill");let Xe=0;for(const vt of xe){vt.dim=(vt.slides.length-1)*Ke;for(const st of vt.slides)vt.dim+=st.dim;vt.offset=Xe,vt.pos=Xe,we!==!1&&(vt.pos-=.5*(Hn-vt.dim)),Re&&!V&&Gn>Hn&&(vt.pos=Oi(0,vt.pos,Gn-Hn)),Xe+=vt.dim+Ke}const Ue=[];let it;for(const vt of xe){const st=Object.assign({},vt);it&&Math.abs(st.pos-it.pos)<.1?(it.dim+=st.dim,it.slides=[...it.slides,...st.slides]):(it=st,st.index=Ue.length,Ue.push(st))}xe=Ue,oe=Oi(0,oe,xe.length-1)})(),se=((We=xe[0])===null||We===void 0?void 0:We.pos)||0,ie=((ot=xe[xe.length-1])===null||ot===void 0?void 0:ot.pos)||0,f===0?(function(){var xn;c=void 0,oe=Ge("initialPage");const Hn=Ge("initialSlide")||void 0;Hn!==void 0&&(oe=dn.getPageIndex(Hn)||0),oe=Oi(0,oe,xe.length-1),ee=((xn=xe[oe])===null||xn===void 0?void 0:xn.pos)||0,ve=ee})():ve=((At=xe[oe||0])===null||At===void 0?void 0:At.pos)||0,Lt("refresh"),Kt()}function Et(Te){if(!Te||!p0(Te))return;const ye=parseInt(Te.getAttribute("index")||"-1");let We="";for(const At of Array.from(Te.classList)){const Vt=At.match(/^f-(\w+)(Out|In)$/);Vt&&Vt[1]&&(We=Vt[1]+"")}if(!Te||!We)return;const ot=[`f-${We}Out`,`f-${We}In`,"to-prev","to-next","from-prev","from-next"];Te.removeEventListener("animationend",Mt),ml(Te,ot.join(" ")),Ce.delete(ye)}function $e(){if(!C)return;const Te=Ce.size>0;for(const ye of Se)Et(ye.el);Ce.clear(),Te&&qe()}function Mt(Te){var ye;((ye=Te.animationName)===null||ye===void 0?void 0:ye.substring(0,2))==="f-"&&(Et(Te.target),Ce.size||(ml(A,"in-transition"),!le&&Math.abs(dn.getPosition(!0)-ve)<.5&&(le=!0,Lt("settle"))),qe())}function tn(Te){var ye;if(Te.defaultPrevented)return;const We=Te.composedPath()[0];if(We.closest("[data-carousel-go-prev]"))return l_(Te),void dn.prev();if(We.closest("[data-carousel-go-next]"))return l_(Te),void dn.next();const ot=We.closest("[data-carousel-go-to]");if(ot)return l_(Te),void dn.goTo(parseFloat(ot.dataset.carouselGoTo||"")||0);if(We.closest("[data-carousel-download]")){l_(Te);const At=(ye=xe[oe])===null||ye===void 0?void 0:ye.slides[0];if(At&&(At.downloadSrc||At.type==="image"&&At.src)){const Vt=At.downloadFilename,an=document.createElement("a"),xn=At.downloadSrc||At.src||"";an.href=xn,an.target="_blank",an.download=Vt||xn,an.click()}}else Lt("click",Te)}function on(Te){var ye;const We=Te.el;We&&((ye=We.querySelector(".f-spinner"))===null||ye===void 0||ye.remove())}function vn(Te){var ye;const We=Te.el;We&&((ye=We.querySelector(".f-html.is-error"))===null||ye===void 0||ye.remove(),ml(We,"has-error"))}function _t(Te){var ye;Te||(Te=(ye=xe[oe])===null||ye===void 0?void 0:ye.slides[0]);const We=Te?.el;if(!We)return;let ot=Ge("formatCaption",Te);ot===void 0&&(ot=Te.caption),ot=ot||"";const At=Ge("captionEl");if(At&&At instanceof HTMLElement){if(Te.index!==oe)return;if(as(ot)&&(At.innerHTML=$t(ot+"")),ot instanceof HTMLElement){if(ot.parentElement===At)return;At.innerHTML="",ot.parentElement&&(ot=ot.cloneNode(!0)),At.append(ot)}return}if(!ot)return;let Vt=Te.captionEl||We.querySelector(".f-caption");!Vt&&ot instanceof HTMLElement&&ot.classList.contains("f-caption")&&(Vt=ot),Vt||(Vt=document.createElement("div"),Jr(Vt,"f-caption"),as(ot)?Vt.innerHTML=$t(ot+""):ot instanceof HTMLElement&&(ot.parentElement&&(ot=ot.cloneNode(!0)),Vt.append(ot)));const an=`f-caption-${CG}_${Te.index}`;Vt.setAttribute("id",an),Vt.dataset.selectable="true",Jr(We,"has-caption"),We.setAttribute("aria-labelledby",an),Te.captionEl=Vt,We.insertAdjacentElement("beforeend",Vt)}function wt(Te,ye={}){var We,ot;let{transition:At,tween:Vt}=Object.assign({transition:x.transition,tween:x.tween},ye||{});if(!A||!s)return;const an=xe.length;if(!an||(function(Gn,cr){var yt,ue,we;if(!(A&&F&&s&&cr&&as(cr)&&cr!=="tween"))return!1;for(const un of Ee)if(F-un.dim>.5)return!1;if(z>.5||j>.5)return;const Re=xe.length;let Xe=Gn>oe?1:-1;Gn=V?(Gn%Re+Re)%Re:Oi(0,Gn,Re-1),Y&&(Xe*=-1);const Ue=(yt=xe[oe])===null||yt===void 0?void 0:yt.slides[0],it=Ue?.index,vt=(ue=xe[Gn])===null||ue===void 0?void 0:ue.slides[0],st=vt?.index,kt=(we=xe[Gn])===null||we===void 0?void 0:we.pos;if(st===void 0||it===void 0||it===st||ee===kt||Math.abs(F-(vt?.dim||0))>1)return!1;le=!1,s.pause(),$e(),Jr(A,"in-transition"),ee=ve=kt;const zt=Rt(Ue),Nt=Rt(vt);return Jt(),zt&&(Ce.add(it),zt.style.transform="",zt.addEventListener("animationend",Mt),ml(zt,x.classes.isSelected),zt.inert=!1,Jr(zt,`f-${cr}Out to-${Xe>0?"next":"prev"}`)),Nt&&(Ce.add(st),Nt.style.transform="",Nt.addEventListener("animationend",Mt),Jr(Nt,x.classes.isSelected),Nt.inert=!1,Jr(Nt,`f-${cr}In from-${Xe>0?"prev":"next"}`)),qe(),!0})(Te,At))return;Te=V?(Te%an+an)%an:Oi(0,Te,an-1),ve=((We=xe[Te||0])===null||We===void 0?void 0:We.pos)||0;const Hn=s.isRunning()?s.getEndValues().pos:ee;if(Math.abs(ve-Hn)<1)return ee=ve,oe!==Te&&(_t(),c=oe,oe=Te,Kt(),_e(),Lt("change",oe,c)),qe(),void(le||(le=!0,Lt("settle")));if(s.pause(),$e(),V){const Gn=ge(),cr=Math.floor((Hn-((ot=xe[0])===null||ot===void 0?void 0:ot.pos))/Gn)||0,yt=ve+cr*Gn;ve=[yt+Gn,yt,yt-Gn].reduce((function(ue,we){return Math.abs(we-Hn)<Math.abs(ue-Hn)?we:ue}))}At!==!1&&Ma(Vt)?s.spring(Ql({},x.tween,Vt)).from({pos:ee}).to({pos:ve}).start():(ee=ve,Jt(),qe(),le||(le=!0,Lt("settle")))}function Ve(Te){var ye;let We=ee;if(V&&Te!==!0){const ot=ge();We-=(Math.floor((ee-((ye=xe[0])===null||ye===void 0?void 0:ye.pos)||0)/ot)||0)*ot}return We}function qe(){var Te;if(!A||!C)return;Ee=nt();const ye=new Set,We=[],ot=xe[oe],At=x.setTransform;let Vt;for(const an of Se){const xn=Ce.has(an.index),Hn=Ee.indexOf(an)>-1,Gn=((Te=ot?.slides)===null||Te===void 0?void 0:Te.indexOf(an))>-1;if(an.isVirtual&&!xn&&!Hn)continue;let cr=Rt(an);if(cr&&(We.push(an),Gn&&ye.add(cr),Ge("adaptiveHeight")&&Gn)){const yt=(cr.firstElementChild||cr).getBoundingClientRect().height;Vt=Vt==null?yt:Math.max(Vt,yt)}}C&&Vt&&(C.style.height=`${Vt}px`),[...OR(C,`.${x.classes.slide}`)].forEach((an=>{$a(an,x.classes.isSelected,ye.has(an));const xn=be[parseInt(an.getAttribute("index")||"-1")];if(!xn)return an.remove(),void Et(an);const Hn=Ce.has(xn.index),Gn=Ee.indexOf(xn)>-1;if(xn.isVirtual&&!Hn&&!Gn)return void ze(xn);if(an.inert=!Gn,At===!1)return;let cr=xn.pos?Math.round(1e4*xn.pos)/1e4:0,yt=0,ue=0,we=0,Re=0;Hn||(yt=te?0:Y?-1*cr:cr,ue=te?cr:0,we=jI(yt,0,xn.dim,0,100),Re=jI(ue,0,xn.dim,0,100)),At instanceof Function&&!Hn?At(dn,xn,{x:yt,y:ue,xPercent:we,yPercent:Re}):an.style.transform=yt||ue?`translate3d(${we}%, ${Re}%,0)`:""})),Lt("render",We)}function Pt(){A?.removeEventListener("click",tn),document.removeEventListener("mousemove",mn),Ce.clear(),o?.disconnect(),o=void 0;for(const Te of be){let ye=Te.el;ye&&p0(ye)&&(Te.state=void 0,on(Te),vn(Te),Te.isVirtual?(ze(Te),Te.el=void 0):(Et(ye),ye.style.transform="",C&&!C.contains(ye)&&C.appendChild(ye)))}for(const Te of Object.values(w))Te?.destroy();w={},r?.destroy(),r=void 0,s?.destroy(),s=void 0;for(const[Te,ye]of Object.entries(x.classes||{}))Te!=="container"&&ml(A,ye);ml(C,"is-draggable")}function Qt(){return V||oe>0}function cn(){return V||oe<xe.length-1}const dn={add:function(Te,ye){var We;let ot=ee;const At=oe,Vt=ge(),an=s?.isRunning()?s.getEndValues().pos:ee,xn=Vt&&Math.floor((an-(((We=xe[0])===null||We===void 0?void 0:We.pos)||0))/Vt)||0;return It(Te,ye),mt(pe),at(),s&&Vt&&(At===oe&&(ot-=xn*Vt),ot===ve?ee=ve:s.spring({clamp:!0,mass:1,tension:300,friction:25,restDelta:1,restSpeed:1}).from({pos:ot}).to({pos:ve}).start()),qe(),dn},canGoPrev:Qt,canGoNext:cn,destroy:function(){return Lt("destroy"),window.removeEventListener("resize",nn),Pt(),Ft.clear(),A=null,xe=[],be=[],x=Object.assign({},r0),w={},Se=[],i=void 0,pe="*",f=2,dn},emit:Lt,filter:function(Te="*"){return mt(Te),at(),ee=Oi(se,ee,ie),qe(),Lt("filter",Te),dn},getContainer:function(){return A},getGapDim:On,getGestures:function(){return r},getLastMouseMove:function(){return AG},getOption:function(Te){return Ge(Te)},getOptions:function(){return x},getPage:function(){return xe[oe]},getPageIndex:function(Te){if(Te!==void 0){for(const ye of xe||[])for(const We of ye.slides)if(We.index===Te)return ye.index;return-1}return oe},getPageIndexFromPosition:bn,getPageProgress:function(Te,ye){var We;Te===void 0&&(Te=oe);const ot=xe[Te];if(!ot)return Te>oe?-1:1;const At=ge(),Vt=On();let an=ot.pos,xn=Ve();if(V&&ye!==!0){const Hn=Math.floor((xn-((We=xe[0])===null||We===void 0?void 0:We.pos))/At)||0;xn-=Hn*At,an=[an+At,an,an-At].reduce((function(Gn,cr){return Math.abs(cr-xn)<Math.abs(Gn-xn)?cr:Gn}))}return(xn-an)/(ot.dim+Vt)||0},getPageVisibility:function(Te){var ye;Te===void 0&&(Te=oe);const We=xe[Te];if(!We)return Te>oe?-1:1;const ot=Ve(),At=je();let Vt=We.pos;if(V){const an=ge(),xn=Vt+(Math.floor((ot-((ye=xe[0])===null||ye===void 0?void 0:ye.pos))/an)||0)*an;Vt=[xn+an,xn,xn-an].reduce((function(Hn,Gn){return Math.abs(Gn-ot)<Math.abs(Hn-ot)?Gn:Hn}))}return Vt>ot&&Vt+We.dim<ot+At?1:Vt<ot?(Vt+We.dim-ot)/We.dim||0:Vt+We.dim>ot+At&&(ot+At-Vt)/We.dim||0},getPages:function(){return xe},getPlugins:function(){return w},getPosition:Ve,getSlides:function(){return be},getState:function(){return f},getTotalSlideDim:ge,getTween:function(){return s},getViewport:function(){return C},getViewportDim:je,getVisibleSlides:function(Te){return Te===void 0?Ee:nt(Te)},goTo:wt,hasNavigated:function(){return c!==void 0},hideError:vn,hideLoading:on,init:function(){if(!e||!p0(e))throw new Error("No Element found");return f!==0&&(Pt(),f=0),A=e,g=t,window.removeEventListener("resize",nn),g.breakpoints&&window.addEventListener("resize",nn),nn(),dn},isInfinite:function(){return V},isInTransition:function(){return Ce.size>0},isRTL:function(){return Y},isSettled:function(){return le},isVertical:function(){return te},localize:function(Te,ye=[]){return $t(Te,ye)},next:function(Te={}){return wt(oe+1,Te),dn},off:function(Te,ye){for(const We of Te instanceof Array?Te:[Te])Ft.has(We)&&Ft.set(We,Ft.get(We).filter((ot=>ot!==ye)));return dn},on:function(Te,ye){for(const We of Te instanceof Array?Te:[Te])Ft.set(We,[...Ft.get(We)||[],ye]);return dn},prev:function(Te={}){return wt(oe-1,Te),dn},reInit:function(Te={},ye){return Pt(),f=0,i=void 0,pe="*",t=Te,g=Te,Ma(ye)&&(n=ye),nn(),dn},remove:function(Te){Te===void 0&&(Te=be.length-1);const ye=be[Te];return ye&&(Lt("removeSlide",ye),ye.el&&(Et(ye.el),ye.el.remove(),ye.el=void 0),be.splice(Te,1),mt(pe),at(),ee=Oi(se,ee,ie),qe()),dn},setPosition:function(Te){ee=Te,Jt(),qe()},showError:function(Te,ye){on(Te),vn(Te);const We=Te.el;if(We){const ot=document.createElement("div");Jr(ot,"f-html"),Jr(ot,"is-error"),ot.innerHTML=$t(ye||"<p>{{ERROR}}</p>"),Te.htmlEl=ot,Jr(We,"has-html"),Jr(We,"has-error"),We.insertAdjacentElement("afterbegin",ot),Lt("contentReady",Te)}return dn},showLoading:function(Te){const ye=Te.el,We=ye?.querySelector(".f-spinner");if(!ye||We)return dn;const ot=Ge("spinnerTpl"),At=vf(ot);return At&&(Jr(At,"f-spinner"),ye.insertAdjacentElement("beforeend",At)),dn},version:"6.1.7"};return dn};UI.l10n={en_EN:sz},UI.getDefaults=()=>r0;/*! License details at fancyapps.com/license */const IG=(e=!0,t="--f-scrollbar-compensate",n="--f-body-margin",r="hide-scrollbar")=>{const s=document,o=s.body,c=s.documentElement;if(e){if(o.classList.contains(r))return;let i=window.innerWidth-c.getBoundingClientRect().width;i<0&&(i=0),c.style.setProperty(t,`${i}px`);const f=parseFloat(window.getComputedStyle(o).marginRight);f&&o.style.setProperty(n,`${f}px`),o.classList.add(r)}else o.classList.remove(r),o.style.setProperty(n,""),s.documentElement.style.setProperty(t,"")};/*! License details at fancyapps.com/license */function gC(){return!(typeof window>"u"||!window.document||!window.document.createElement)}/*! License details at fancyapps.com/license */const E_=function(e="",t="",n=""){return e.split(t).join(n)};/*! License details at fancyapps.com/license */const PG={tpl:e=>`<img class="f-panzoom__content" 
    ${e.srcset?'data-lazy-srcset="{{srcset}}"':""} 
    ${e.sizes?'data-lazy-sizes="{{sizes}}"':""} 
    data-lazy-src="{{src}}" alt="{{alt}}" />`},fze=()=>{let e;function t(x,w){const A=e?.getOptions().Zoomable;let C=(Ma(A)?Object.assign(Object.assign({},PG),A):PG)[x];return C&&typeof C=="function"&&w?C(w):C}function n(){e&&e.getOptions().Zoomable!==!1&&(e.on("addSlide",o),e.on("removeSlide",c),e.on("attachSlideEl",i),e.on("click",s),e.on("change",r),e.on("ready",r))}function r(){f();const x=e?.getVisibleSlides()||[];if(x.length>1||e?.getOption("transition")==="slide")for(const w of x){const A=w.panzoomRef;A&&(e?.getPage().slides||[]).indexOf(w)<0&&A.execute(ur.ZoomTo,Object.assign({},A.getStartPosition()))}}function s(x,w){const A=w.target;A&&!w.defaultPrevented&&A.dataset.panzoomAction&&g(A.dataset.panzoomAction)}function o(x,w){const A=w.el;if(!e||!A||w.panzoomRef)return;const C=w.src||w.lazySrc||"",F=w.alt||w.caption||`Image #${w.index}`,z=w.srcset||w.lazySrcset||"",j=w.sizes||w.lazySizes||"";if(C&&as(C)&&!w.html&&(!w.type||w.type==="image")){w.type="image",w.thumbSrc=w.thumbSrc||C;let ee=t("tpl",w);ee=E_(ee,"{{src}}",C+""),ee=E_(ee,"{{srcset}}",z+""),ee=E_(ee,"{{sizes}}",j+""),A.insertAdjacentHTML("afterbegin",ee)}const V=A.querySelector(".f-panzoom__content");if(!V)return;V.setAttribute("alt",F+"");const Y=w.width&&w.width!=="auto"?parseFloat(w.width+""):"auto",te=w.height&&w.height!=="auto"?parseFloat(w.height+""):"auto",J=w5(A,Object.assign({width:Y,height:te,classes:{container:"f-zoomable"},event:()=>e?.getLastMouseMove(),spinnerTpl:()=>e?.getOption("spinnerTpl")||""},t("Panzoom")));J.on("*",((ee,le,...oe)=>{e&&(le==="loading"&&(w.state=0),le==="loaded"&&(w.state=1),le==="error"&&(w.state=2,e?.showError(w,"{{IMAGE_ERROR}}")),e.emit(`panzoom:${le}`,w,...oe),le==="ready"&&e.emit("contentReady",w),w.index===e?.getPageIndex()&&f())})),w.panzoomRef=J}function c(x,w){w.panzoomRef&&(w.panzoomRef.destroy(),w.panzoomRef=void 0)}function i(x,w){const A=w.panzoomRef;if(A)switch(A.getState()){case 0:A.init();break;case 3:A.execute(ur.ZoomTo,Object.assign(Object.assign({},A.getStartPosition()),{velocity:0}))}}function f(){var x,w;const A=e?.getContainer()||void 0,C=(w=(x=e?.getPage())===null||x===void 0?void 0:x.slides[0])===null||w===void 0?void 0:w.panzoomRef;if(A)if(C)C.updateControls(A);else for(const F of A.querySelectorAll("[data-panzoom-action]")||[])F.setAttribute("aria-disabled",""),F.setAttribute("tabindex","-1")}function g(x,...w){var A;(A=e?.getPage().slides[0].panzoomRef)===null||A===void 0||A.execute(x,...w)}return{init:function(x){e=x,e.on("initPlugins",n)},destroy:function(){if(e){e.off("initPlugins",n),e.off("addSlide",o),e.off("removeSlide",c),e.off("attachSlideEl",i),e.off("click",s),e.off("change",r),e.off("ready",r);for(const x of e.getSlides())c(0,x)}e=void 0},execute:g}};/*! License details at fancyapps.com/license */const OG={syncOnChange:!1,syncOnClick:!0,syncOnHover:!1},Ese=()=>{let e,t;function n(){const C=e?.getOptions().Sync;return Ma(C)?Object.assign(Object.assign({},OG),C):OG}function r(C){var F,z,j;e&&C&&(t=C,e.getOptions().classes=Object.assign(Object.assign({},e.getOptions().classes),{isSelected:""}),e.getOptions().initialSlide=((z=(F=t.getPage())===null||F===void 0?void 0:F.slides[0])===null||z===void 0?void 0:z.index)||0,n().syncOnChange&&e.on("change",c),n().syncOnClick&&e.on("click",f),n().syncOnHover&&((j=e.getViewport())===null||j===void 0||j.addEventListener("mouseover",g)),(function(){!e||!t||(e.on("ready",o),e.on("refresh",x),t.on("change",i),t.on("filter",w))})())}function s(){const C=n().target;e&&C&&r(C)}function o(){A()}function c(){var C;if(e&&t){const F=((C=e.getPage())===null||C===void 0?void 0:C.slides)||[],z=t.getPageIndex(F[0].index||0);z>-1&&t.goTo(z,e.hasNavigated()?void 0:{tween:!1,transition:!1}),A()}}function i(){var C;if(e&&t){const F=e.getPageIndex(((C=t.getPage())===null||C===void 0?void 0:C.slides[0].index)||0);F>-1&&e.goTo(F,t.hasNavigated()?void 0:{tween:!1,transition:!1}),A()}}function f(C,F){var z;if(!e||!t||!((z=e.getTween())===null||z===void 0)&&z.isRunning())return;const j=e?.getOptions().classes.slide;if(!j)return;const V=j?F.target.closest(`.${j}`):null;if(V){const Y=parseInt(V.getAttribute("index")||"")||0,te=t.getPageIndex(Y);t.goTo(te)}}function g(C){e&&f(0,C)}function x(){var C;if(e&&t){const F=e.getPageIndex(((C=t.getPage())===null||C===void 0?void 0:C.slides[0].index)||0);F>-1&&e.goTo(F,{tween:!1,transition:!1}),A()}}function w(C,F){e&&t&&(e.filter(F),i())}function A(){var C,F,z;if(!t)return;const j=((F=(C=t.getPage())===null||C===void 0?void 0:C.slides[0])===null||F===void 0?void 0:F.index)||0;for(const V of e?.getSlides()||[])(z=V.el)===null||z===void 0||z.classList.toggle("is-selected",V.index===j)}return{init:function(C){e=C,e.on("initSlides",s)},destroy:function(){var C;e?.off("ready",o),e?.off("refresh",x),e?.off("change",c),e?.off("click",f),(C=e?.getViewport())===null||C===void 0||C.removeEventListener("mouseover",g),t?.off("change",i),t?.off("filter",w),t=void 0,e?.off("initSlides",s),e=void 0},getTarget:function(){return t}}};/*! License details at fancyapps.com/license */const DG={showLoading:!0,preload:1},hA="is-lazyloading",RG="is-lazyloaded",kG="has-lazyerror",Tse=()=>{let e;function t(){const s=e?.getOptions().Lazyload;return Ma(s)?Object.assign(Object.assign({},DG),s):DG}function n(s){var o;const c=s.el;if(!c)return;const i="[data-lazy-src],[data-lazy-srcset],[data-lazy-bg]",f=Array.from(c.querySelectorAll(i));c.matches(i)&&f.push(c);for(const g of f){const x=g.dataset.lazySrc,w=g.dataset.lazySrcset,A=g.dataset.lazySizes,C=g.dataset.lazyBg,F=(g instanceof HTMLImageElement||g instanceof HTMLSourceElement)&&(x||w),z=g instanceof HTMLElement&&C;if(!F&&!z)continue;const j=x||w||C;if(j){if(F&&j){const V=(o=g.parentElement)===null||o===void 0?void 0:o.classList.contains("f-panzoom__wrapper");t().showLoading&&e?.showLoading(s),g.addEventListener("load",(()=>{e?.hideLoading(s),ml(g,kG),g instanceof HTMLImageElement?g.decode().then((()=>{ml(g,hA),Jr(g,RG)})):(ml(g,hA),Jr(g,RG)),V||e==null||e.emit("lazyLoad:loaded",s,g,j)})),g.addEventListener("error",(()=>{e?.hideLoading(s),ml(g,hA),Jr(g,kG),V||e==null||e.emit("lazyLoad:error",s,g,j)})),g.classList.add("f-lazyload"),g.classList.add(hA),V||e==null||e.emit("lazyLoad:load",s,g,j),x&&(g.src=x),w&&(g.srcset=w),A&&(g.sizes=A)}else z&&(document.body.contains(g)||(document.createElement("img").src=C),g.style.backgroundImage=`url('${C}')`);delete g.dataset.lazySrc,delete g.dataset.lazySrcset,delete g.dataset.lazySizes,delete g.dataset.lazyBg}}}function r(){if(!e)return;const s=[...e.getVisibleSlides()],o=t().preload;if(o>0){const c=e.getPosition(),i=e.getViewportDim();s.push(...e.getVisibleSlides(c+i*o),...e.getVisibleSlides(c-i*o))}for(const c of s)n(c)}return{init:function(s){e=s,e.on("render",r)},destroy:function(){e?.off("render",r),e=void 0}}};/*! License details at fancyapps.com/license */const LG='<svg width="24" height="24" viewBox="0 0 24 24" tabindex="-1">',NG="</svg>",FG={prevTpl:LG+'<path d="M15 3l-9 9 9 9"></path>'+NG,nextTpl:LG+'<path d="M9 3l9 9-9 9"></path>'+NG},pze=()=>{let e,t,n;function r(){const i=e?.getOptions().Arrows;return Ma(i)?Object.assign(Object.assign({},FG),i):FG}function s(i){if(!e)return;const f=`<button data-carousel-go-${i} tabindex="0" class="f-button is-arrow is-${i}" title="{{${i.toUpperCase()}}}">`+r()[`${i}Tpl`]+"</button",g=vf(e.localize(f))||void 0;return g&&Jr(g,r()[`${i}Class`]),g}function o(){var i;t?.remove(),t=void 0,n?.remove(),n=void 0,(i=e?.getContainer())===null||i===void 0||i.classList.remove("has-arrows")}function c(){e&&e.getOptions().Arrows!==!1&&e.getPages().length>1?((function(){if(!e)return;const i=e.getViewport();i&&(t||(t=s("prev"),t&&i.insertAdjacentElement("beforebegin",t)),n||(n=s("next"),n&&i.insertAdjacentElement("afterend",n)),$a(e.getContainer(),"has-arrows",!(!t&&!n)))})(),e&&(t?.toggleAttribute("aria-disabled",!e.canGoPrev()),n?.toggleAttribute("aria-disabled",!e.canGoNext()))):o()}return{init:function(i){e=i.on(["change","refresh"],c)},destroy:function(){o(),e?.off(["change","refresh"],c),e=void 0}}};/*! License details at fancyapps.com/license */const Mse='<circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/>',DR='<g><line x1="11" y1="8" x2="11" y2="14"></line></g>'+Mse,mze={moveLeft:["moveLeft","MOVE_LEFT",'<path d="M5 12h14M5 12l6 6M5 12l6-6"/>'],moveRight:["moveRight","MOVE_RIGHT",'<path d="M5 12h14M13 18l6-6M13 6l6 6"/>'],moveUp:["moveUp","MOVE_UP",'<path d="M12 5v14M18 11l-6-6M6 11l6-6"/>'],moveDown:["moveDown","MOVE_DOWN",'<path d="M12 5v14M18 13l-6 6M6 13l6 6"/>'],zoomOut:["zoomOut","ZOOM_OUT",Mse],zoomIn:["zoomIn","ZOOM_IN",DR],toggleFull:["toggleFull","TOGGLE_FULL",DR],iterateZoom:["iterateZoom","ITERATE_ZOOM",DR],toggle1to1:["toggleFull","TOGGLE_FULL",'<path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/>'],rotateCCW:["rotateCCW","ROTATE_CCW",'<path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/>'],rotateCW:["rotateCW","ROTATE_CW",'<path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/>'],flipX:["flipX","FLIP_X",'<path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/>'],flipY:["flipY","FLIP_Y",'<path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/>'],reset:["reset","RESET",'<path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/>'],toggleFS:["toggleFS","TOGGLE_FS",'<g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g>']},oz={};for(const[e,t]of Object.entries(mze))oz[e]={tpl:`<button data-panzoom-action="${t[0]}" class="f-button" title="{{${t[1]}}}"><svg>${t[2]}</svg></button>`};/*! License details at fancyapps.com/license */var zG;(function(e){e.Left="left",e.middle="middle",e.right="right"})(zG||(zG={}));const BG=Object.assign({counter:{tpl:'<div class="f-counter"><span data-carousel-page></span>/<span data-carousel-pages></span></div>'},download:{tpl:'<button data-carousel-download class="f-button" title="{{DOWNLOAD}}"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></button>'},autoplay:{tpl:'<button data-autoplay-action="toggle" class="f-button" title="{{TOGGLE_AUTOPLAY}}"><svg><g><path d="M5 3.5 19 12 5 20.5Z"/></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},thumbs:{tpl:'<button data-thumbs-action="toggle" class="f-button" title="{{TOGGLE_THUMBS}}"><svg><rect width="18" height="14" x="3" y="3" rx="2"/><path d="M4 21h1M9 21h1M14 21h1M19 21h1"/></svg></button>'}},oz),$G={absolute:!1,display:{left:[],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY","reset"],right:[]},enabled:"auto",items:{}},Ase=()=>{let e,t;function n(s){const o=e?.getOptions().Toolbar;let c=(Ma(o)?Object.assign(Object.assign({},$G),o):$G)[s];return c&&typeof c=="function"&&e?c(e):c}function r(){var s,o;if(!e?.getOptions().Toolbar||!e||t)return;const c=e.getContainer();if(!c)return;let i=n("enabled");if(!i)return;const f=n("absolute"),g=e.getSlides().length>1;let x=!1,w=!1;for(const V of e.getSlides())V.panzoomRef&&(x=!0),(V.downloadSrc||V.type==="image"&&V.src)&&(w=!0);const A=((s=e.getPlugins().Thumbs)===null||s===void 0?void 0:s.isEnabled())||!1,C=g&&e.getPlugins().Autoplay||!1,F=e.getPlugins().Fullscreen&&(document.fullscreenEnabled||document.webkitFullscreenEnabled);if(i==="auto"&&(i=x),!i)return;t=c.querySelector(".f-carousel__toolbar")||void 0,t||(t=document.createElement("div"),t.classList.add("f-carousel__toolbar"));const z=n("display"),j=Ql({},BG,n("items"));for(const V of["left","middle","right"]){const Y=z[V]||[],te=document.createElement("div");te.classList.add("f-carousel__toolbar__column"),te.classList.add(`is-${V}`);for(const J of Y){let ee;if(as(J)){if(J==="counter"&&!g||J==="autoplay"&&!C||oz[J]&&!x||J==="fullscreen"&&!F||J==="thumbs"&&!A||J==="download"&&!w)continue;ee=j[J]}if(Ma(J)&&(ee=J),ee&&ee.tpl){let le=e.localize(ee.tpl);le=le.split("<svg>").join('<svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24">');const oe=vf(le);oe&&(typeof ee.click=="function"&&e&&oe.addEventListener("click",(ve=>{ve.preventDefault(),ve.stopPropagation(),typeof ee.click=="function"&&e&&ee.click(e,ve)})),te.append(oe))}}t.append(te)}if(t.childElementCount){if(f&&t.classList.add("is-absolute"),!t.parentElement){const V=n("parentEl");V?V.insertAdjacentElement("afterbegin",t):(o=e.getViewport())===null||o===void 0||o.insertAdjacentElement("beforebegin",t)}c.contains(t)&&c.classList.add("has-toolbar")}}return{init:function(s){e=s,e?.on("initSlides",r)},destroy:function(){var s;e?.off("initSlides",r),(s=e?.getContainer())===null||s===void 0||s.classList.remove("has-toolbar"),t?.remove(),t=void 0},add:function(s,o){BG[s]=o},isEnabled:function(){return!!t}}};/*! License details at fancyapps.com/license */const VG={autoStart:!0,pauseOnHover:!0,showProgressbar:!0,timeout:2e3},gze=()=>{let e,t,n=!1,r=!1,s=!1,o=null;function c(ee){const le=e?.getOptions().Autoplay;let oe=(Ma(le)?Object.assign(Object.assign({},VG),le):VG)[ee];return oe&&typeof oe=="function"&&e?oe(e):oe}function i(){clearTimeout(t),t=void 0}function f(){if(!e||!n||s||r||t||!e.isSettled()||(function(){var le;const oe=((le=e?.getPage())===null||le===void 0?void 0:le.slides)||[];for(const ve of oe)if(ve.state===0)return!0;return!1})())return;(function(){var le,oe,ve,se;if(!e||(w(),!c("showProgressbar")))return;let ie=c("progressbarParentEl");if(!ie&&(!((le=e.getPlugins().Toolbar)===null||le===void 0)&&le.isEnabled())&&(ie=e.getContainer()),!ie&&((oe=e.getPlugins().Toolbar)===null||oe===void 0?void 0:oe.isEnabled())!==!0){const be=((ve=e.getPages()[0])===null||ve===void 0?void 0:ve.slides)||[],Se=((se=e.getPage())===null||se===void 0?void 0:se.slides)||[];be.length===1&&Se.length===1&&(ie=Se[0].el)}if(ie||(ie=e.getViewport()),!ie)return;o=document.createElement("div"),Jr(o,"f-progressbar"),ie.prepend(o);const pe=c("timeout")||1e3;o.style.animationDuration=`${pe}ms`})();const ee=c("timeout");t=setTimeout((()=>{e&&n&&!r&&(e.isInfinite()||e.getPageIndex()!==e.getPages().length-1?e.next():e.goTo(0))}),ee)}function g(){var ee;if(!e||e.getPages().length<2||e.getOptions().Autoplay===!1||n)return;n=!0,e.emit("autoplay:start",c("timeout")),Jr(e.getContainer(),"has-autoplay"),(ee=e.getTween())===null||ee===void 0||ee.on("start",V);const le=e?.getContainer();le&&c("pauseOnHover")&&matchMedia("(hover: hover)").matches&&(le.addEventListener("mouseenter",Y,!1),le.addEventListener("mouseleave",te,!1)),e.on("change",z),e.on("settle",j),e.on("contentReady",C),e.on("panzoom:touchStart",x),e.on("panzoom:wheel",x),e.isSettled()&&f()}function x(){var ee;if(i(),w(),e){if(n){e.emit("autoplay:end"),(ee=e.getTween())===null||ee===void 0||ee.off("start",V);const le=e.getContainer();le&&(le.classList.remove("has-autoplay"),le.removeEventListener("mouseenter",Y,!1),le.removeEventListener("mouseleave",te,!1))}e.off("change",z),e.off("settle",j),e.off("contentReady",C),e.off("panzoom:touchStart",x),e.off("panzoom:wheel",x)}n=!1,r=!1}function w(){o&&(o.remove(),o=null)}function A(){e&&e.getPages().length>1&&c("autoStart")&&g()}function C(){f()}function F(ee,le){const oe=le.target;oe&&!le.defaultPrevented&&oe.dataset.autoplayAction==="toggle"&&J.toggle()}function z(){!e||!e?.isInfinite()&&e.getPageIndex()===e.getPages().length-1?x():(w(),i())}function j(){f()}function V(){i(),w()}function Y(){s=!0,n&&(w(),i())}function te(){s=!1,n&&!r&&e?.isSettled()&&f()}const J={init:function(ee){e=ee,e.on("ready",A),e.on("click",F)},destroy:function(){x(),e?.off("ready",A),e?.off("click",F),e=void 0},isEnabled:()=>n,pause:function(){r=!0,i()},resume:function(){r=!1,n&&!s&&f()},start(){g()},stop(){x()},toggle(){n?x():g()}};return J};/*! License details at fancyapps.com/license */const RR={Carousel:{Lazyload:{showLoading:!1}},minCount:2,showOnStart:!0,thumbTpl:'<button aria-label="Slide to #{{page}}"><img draggable="false" alt="{{alt}}" data-lazy-src="{{src}}" /></button>',type:"modern"};let kR;const _ze=()=>{let e,t,n,r,s,o=0,c=0,i=!0;function f(Se){const Ce=e?.getOptions().Thumbs;let Ee=(Ma(Ce)?Object.assign(Object.assign({},RR),Ce):RR)[Se];return Ee&&typeof Ee=="function"&&e?Ee(e):Ee}function g(){if(!e||e?.getOptions().Thumbs===!1)return!1;let Se=0;for(const Ce of e.getSlides())Ce.thumbSrc&&Se++;return Se>=f("minCount")}function x(){return f("type")==="modern"}function w(){return f("type")==="scrollable"}function A(){const Se=[],Ce=e?.getSlides()||[];for(const Ee of Ce)Se.push({index:Ee.index,class:Ee.thumbClass,html:C(Ee)});return Se}function C(Se){const Ce=Se.thumb?Se.thumb instanceof HTMLImageElement?Se.thumb.src:Se.thumb:Se.thumbSrc||void 0,Ee=Se.thumbAlt===void 0?`Thumbnail #${(Se.index||0)+1}`:Se.thumbAlt+"";let xe=f("thumbTpl");return xe=E_(xe,"{{alt}}",Ee),xe=E_(xe,"{{src}}",Ce+""),xe=E_(xe,"{{index}}",`${Se.index||0}`),xe=E_(xe,"{{page}}",`${(Se.index||0)+1}`),xe}function F(Se){return`<div index="${Se.index||0}" class="f-thumbs__slide ${Se.class||""}">${Se.html||""}</div>`}function z(Se=!1){var Ce;const Ee=e?.getContainer();if(!e||!Ee||n||!g())return;const xe=((Ce=f("Carousel"))===null||Ce===void 0?void 0:Ce.classes)||{};if(xe.container=xe.container||"f-thumbs",!n){const ke=Ee.nextElementSibling;ke?.classList.contains(xe.container)&&(n=ke)}if(!n){n=document.createElement("div");const ke=f("parentEl");ke?ke.insertAdjacentElement("beforeend",n):Ee.insertAdjacentElement("afterend",n)}Jr(n,xe.container),Jr(n,"f-thumbs"),Jr(n,`is-${f("type")}`),Se&&Jr(n,"is-hidden")}function j(){if(!n||!w())return;r=document.createElement("div"),Jr(r,"f-thumbs__viewport");let Se="";for(const Ce of A())typeof(Ce.html||"")=="string"&&(Se+=F(Ce));r.innerHTML=Se,n.append(r),n.addEventListener("click",(Ce=>{Ce.preventDefault();const Ee=Ce.target.closest("[index]"),xe=parseInt(Ee?.getAttribute("index")||"-1");e&&xe>-1&&e.goTo(xe)})),s=new IntersectionObserver((Ce=>{Ce.forEach((Ee=>{Ee.isIntersecting&&Ee.target instanceof HTMLImageElement&&(Ee.target.src=Ee.target.getAttribute("data-lazy-src")+"",Ee.target.removeAttribute("data-lazy-src"),s?.unobserve(Ee.target))}))}),{root:r,rootMargin:"100px"}),n.querySelectorAll("[data-lazy-src]").forEach((Ce=>{s?.observe(Ce)})),e?.emit("thumbs:ready")}function V(){var Se;if(!kR||!e||!n||w()||t)return;const Ce=A();if(!Ce.length)return;const Ee=Ql({},{Sync:{target:e},Lazyload:{preload:1},slides:Ce,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",slide:"f-thumbs__slide"},center:!0,fill:!x(),infinite:!1,dragFree:!0,rtl:e.getOptions().rtl||!1,slidesPerPage:xe=>{let ke=0;return x()&&((function(){if(!x()||!n)return;const He=Ke=>n&&parseFloat(getComputedStyle(n).getPropertyValue("--f-thumb-"+Ke))||0;o=He("width"),c=He("clip-width")})(),ke=4*(o-c)),xe&&xe.getTotalSlideDim()<=xe.getViewportDim()-ke?1/0:1}},RR.Carousel||{},f("Carousel")||{});t=kR(n,Ee,{Sync:Ese,Lazyload:Tse}),t.on("ready",(()=>{Jr(n,"is-syncing"),e?.emit("thumbs:ready"),x()&&e?.on("render",ee)})),t.on("destroy",(()=>{e?.emit("thumbs:destroy")})),t.init(),(Se=t.getGestures())===null||Se===void 0||Se.on("start",(()=>{i=!1})),t.on("click",((xe,ke)=>{const He=ke.target;if(He){const Ke=He.matches("button")?He:He.firstElementChild;Ke&&Ke.matches("button")&&(ke.preventDefault(),Ke.focus({preventScroll:!0}))}})),Jr(e.getContainer(),"has-thumbs"),be()}function Y(){g()&&f("showOnStart")&&(z(),j())}function te(){var Se;g()&&(V(),e?.on("addSlide",oe),e?.on("removeSlide",ve),e?.on("click",se),e?.on("refresh",ie),(Se=e?.getGestures())===null||Se===void 0||Se.on("start",J),pe(!0))}function J(){var Se,Ce;i=!0,!((Se=document.activeElement)===null||Se===void 0)&&Se.closest(".f-thumbs")&&((Ce=document.activeElement)===null||Ce===void 0||Ce.blur())}function ee(){var Se,Ce;n?.classList.toggle("is-syncing",e?.hasNavigated()===!1||((Se=e?.getTween())===null||Se===void 0?void 0:Se.isRunning())),be(),!((Ce=e?.getGestures())===null||Ce===void 0)&&Ce.isPointerDown()&&(function(){if(!x()||!e||!t||!i)return;const Ee=t.getTween(),xe=t.getPages(),ke=e.getPageIndex()||0,He=e.getPageProgress()||0;if(!(e&&xe&&xe[ke]&&Ee))return;const Ke=Ee.isRunning()?Ee.getCurrentValues().pos:t.getPosition();if(Ke===void 0)return;let Ge=xe[ke].pos+He*(o-c);Ge=Oi(xe[0].pos,Ge,xe[xe.length-1].pos),Ee.from({pos:Ke}).to({pos:Ge}).start()})()}function le(){i=!0,pe()}function oe(Se,Ce){const Ee={html:C(Ce)};if(t)t.add(Ee,Ce.index);else if(r){const xe=vf(F(Ee));if(xe){r.append(xe);const ke=xe.querySelector("img");ke&&s?.observe(ke)}}}function ve(Se,Ce){var Ee;t?t.remove(Ce.index):r&&((Ee=r.querySelector(`[index="${Ce.index}"]`))===null||Ee===void 0||Ee.remove())}function se(Se,Ce){var Ee;const xe=Ce.target;Ce.defaultPrevented||((Ee=xe?.dataset)===null||Ee===void 0?void 0:Ee.thumbsAction)!=="toggle"||(n||(z(!0),j(),V()),n&&n.classList.toggle("is-hidden"))}function ie(){pe()}function pe(Se=!1){if(!e||!r||!w())return;const Ce=e.getPageIndex();r.querySelectorAll(".is-selected").forEach((xe=>{xe.classList.remove("is-selected")}));const Ee=r.querySelector(`[index="${Ce}"]`);if(Ee){Ee.classList.add("is-selected");const xe=r.getBoundingClientRect(),ke=Ee.getBoundingClientRect(),He=Ee.offsetTop-r.offsetTop-.5*xe.height+.5*ke.height,Ke=Ee.scrollLeft-r.scrollLeft-.5*xe.width+.5*ke.width;r.scrollTo({top:He,left:Ke,behavior:Se?"instant":"smooth"})}}function be(){if(!x()||!e||!t)return;const Se=t?.getSlides()||[];let Ce=-.5*o;for(const Ee of Se){const xe=Ee.el;if(!xe)continue;let ke=e.getPageProgress(Ee.index)||0;ke=Math.max(-1,Math.min(1,ke)),ke>-1&&ke<1&&(Ce+=.5*o*(1-Math.abs(ke))),ke=Math.round(1e4*ke)/1e4,Ce=Math.round(1e4*Ce)/1e4,xe.style.setProperty("--progress",`${Math.abs(ke)}`),xe.style.setProperty("--shift",`${e?.isRTL()?-1*Ce:Ce}px`),ke>-1&&ke<1&&(Ce+=.5*o*(1-Math.abs(ke)))}}return{init:function(Se,Ce){kR=Ce,e=Se,e.on("ready",te),e.on("initSlides",Y),e.on("change",le)},destroy:function(){var Se,Ce;w()&&e?.emit("thumbs:destroy"),e?.off("ready",te),e?.off("initSlides",Y),e?.off("change",le),e?.off("render",ee),e?.off("addSlide",oe),e?.off("click",se),e?.off("refresh",ie),(Se=e?.getGestures())===null||Se===void 0||Se.off("start",J),(Ce=e?.getContainer())===null||Ce===void 0||Ce.classList.remove("has-thumbs"),e=void 0,t?.destroy(),t=void 0,n?.remove(),n=void 0},getCarousel:function(){return t},getContainer:function(){return n},getType:function(){return f("type")},isEnabled:g}};/*! License details at fancyapps.com/license */const jG={iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"}},yze=()=>{let e;function t(s,o){let c=o.src;if(!as(c))return;let i=o.type;if(!i){if(i||(c.charAt(0)==="#"?i="inline":c.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.((a)?png|avif|gif|jp(g|eg)|pjp(eg)?|jfif|svg|webp|bmp|ico|tif(f)?)((\?|#).*)?$)/i)?i="image":c.match(/\.(pdf)((\?|#).*)?$/i)?i="pdf":c.match(/\.(html|php)((\?|#).*)?$/i)&&(i="iframe")),!i){const f=c.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i);f&&(c=`https://maps.google.${f[1]}/?ll=${(f[2]?f[2]+"&z="+Math.floor(parseFloat(f[3]))+(f[4]?f[4].replace(/^\//,"&"):""):f[4]+"").replace(/\?/,"&")}&output=${f[4]&&f[4].indexOf("layer=c")>0?"svembed":"embed"}`,i="gmap")}if(!i){const f=c.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i);f&&(c=`https://maps.google.${f[1]}/maps?q=${f[2].replace("query=","q=").replace("api=1","")}&output=embed`,i="gmap")}o.src=c,o.type=i}}function n(s,o){o.type!=="iframe"&&o.type!=="pdf"&&o.type!=="gmap"||(function(c){if(!e||!c.el||!c.src)return;const i=document.createElement("iframe");i.classList.add("f-iframe");for(const[g,x]of Object.entries((function(){const w=e?.getOptions().Html;return Ma(w)?Object.assign(Object.assign({},jG),w):jG})().iframeAttr||{}))i.setAttribute(g,x);i.onerror=()=>{e&&e.getState()===1&&e.showError(c,"{{IFRAME_ERROR}}")},i.src=c.src;const f=document.createElement("div");if(f.classList.add("f-html"),f.append(i),c.width){let g=`${c.width}`;g.match(/^\d+$/)&&(g+="px"),f.style.maxWidth=`${g}`}if(c.height){let g=`${c.height}`;g.match(/^\d+$/)&&(g+="px"),f.style.maxHeight=`${g}`}if(c.aspectRatio){const g=c.el.getBoundingClientRect();f.style.aspectRatio=`${c.aspectRatio}`,f.style[g.width>g.height?"width":"height"]="auto",f.style[g.width>g.height?"maxWidth":"maxHeight"]="none"}c.contentEl=i,c.htmlEl=f,c.el.classList.add("has-html"),c.el.classList.add("has-iframe"),c.el.classList.add(`has-${c.type}`),c.el.prepend(f),e.emit("contentReady",c)})(o)}function r(s,o){var c,i;o.type!=="iframe"&&o.type!=="pdf"&&o.type!=="gmap"||(e?.hideError(o),(c=o.contentEl)===null||c===void 0||c.remove(),o.contentEl=void 0,(i=o.htmlEl)===null||i===void 0||i.remove(),o.htmlEl=void 0)}return{init:function(s){e=s,e.on("addSlide",t),e.on("attachSlideEl",n),e.on("detachSlideEl",r)},destroy:function(){e?.off("addSlide",t),e?.off("attachSlideEl",n),e?.off("detachSlideEl",r),e=void 0}}};/*! License details at fancyapps.com/license */const UG=(e,t={})=>{const n=new URL(e),r=new URLSearchParams(n.search),s=new URLSearchParams;for(const[i,f]of[...r,...Object.entries(t)]){let g=f+"";if(i==="t"){let x=g.match(/((\d*)m)?(\d*)s?/);x&&s.set("start",60*parseInt(x[2]||"0")+parseInt(x[3]||"0")+"")}else s.set(i,g)}let o=s+"",c=e.match(/#t=((.*)?\d+s)/);return c&&(o+=`#t=${c[1]}`),o},HG={autoplay:!1,html5videoTpl:`<video class="f-html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
    <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"no",referrerPolicy:"strict-origin-when-cross-origin",credentialless:""},vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},vze=()=>{let e,t=!1;function n(){const A=e?.getOptions().Video;return Ma(A)?Object.assign(Object.assign({},HG),A):HG}function r(){var A;return(A=e?.getPage())===null||A===void 0?void 0:A.slides[0]}const s=A=>{var C;try{let F=JSON.parse(A.data);if(A.origin==="https://player.vimeo.com"){if(F.event==="ready")for(let z of Array.from(((C=e?.getContainer())===null||C===void 0?void 0:C.getElementsByClassName("f-iframe"))||[]))z instanceof HTMLIFrameElement&&z.contentWindow===A.source&&(z.dataset.ready="true")}else if(A.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&F.event==="onReady"){const z=document.getElementById(F.id);z&&(z.dataset.ready="true")}}catch{}};function o(A,C){const F=C.src;if(!as(F))return;let z=C.type;if(!z||z==="html5video"){const j=F.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i);j&&(z="html5video",C.html5videoFormat=C.html5videoFormat||"video/"+(j[1]==="ogv"?"ogg":j[1]))}if(!z||z==="youtube"){const j=F.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i);if(j){const V=Object.assign(Object.assign({},n().youtube),C.youtube||{}),Y=`www.youtube${V.nocookie?"-nocookie":""}.com`,te=UG(F,V),J=encodeURIComponent(j[2]);C.videoId=J,C.src=`https://${Y}/embed/${J}?${te}`,C.thumb=C.thumb||`https://i.ytimg.com/vi/${J}/mqdefault.jpg`,z="youtube"}}if(!z||z==="vimeo"){const j=F.match(/^.+vimeo.com\/(?:\/)?(video\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/);if(j){const V=Object.assign(Object.assign({},n().vimeo),C.vimeo||{}),Y=UG(F,V),te=encodeURIComponent(j[2]),J=j[5]||"";C.videoId=te,C.src=`https://player.vimeo.com/video/${te}?${J?`h=${J}${Y?"&":""}`:""}${Y}`,z="vimeo"}}C.type=z}function c(A,C){C.type==="html5video"&&(function(F){if(!e||!F.el||!F.src)return;const{el:z,src:j}=F;if(!z||!j)return;const V=F.html5videoTpl||n().html5videoTpl,Y=F.html5videoFormat||n().html5videoFormat;if(!V)return;const te=F.poster||(F.thumb&&as(F.thumb)?F.thumb:""),J=vf(V.replace(/\{\{src\}\}/gi,j+"").replace(/\{\{format\}\}/gi,Y||"").replace(/\{\{poster\}\}/gi,te+""));if(!J)return;const ee=document.createElement("div");ee.classList.add("f-html"),ee.append(J),F.contentEl=J,F.htmlEl=ee,z.classList.add(`has-${F.type}`),z.prepend(ee),x(F),e.emit("contentReady",F)})(C),C.type!=="youtube"&&C.type!=="vimeo"||(function(F){if(!e||!F.el||!F.src)return;const z=document.createElement("iframe");z.classList.add("f-iframe"),z.setAttribute("id",`f-iframe_${F.videoId}`);for(const[V,Y]of Object.entries(n().iframeAttr||{}))z.setAttribute(V,Y);z.onload=()=>{var V;e&&e.getState()===1&&F.type==="youtube"&&((V=z.contentWindow)===null||V===void 0||V.postMessage(JSON.stringify({event:"listening",id:z.getAttribute("id")}),"*"))},z.onerror=()=>{e&&e.getState()===1&&e?.showError(F,"{{IFRAME_ERROR}}")},z.src=F.src;const j=document.createElement("div");j.classList.add("f-html"),j.append(z),F.contentEl=z,F.htmlEl=j,F.el.classList.add("has-html"),F.el.classList.add("has-iframe"),F.el.classList.add(`has-${F.type}`),F.el.prepend(j),x(F),e.emit("contentReady",F)})(C)}function i(A,C){var F,z;C.type!=="html5video"&&C.type!=="youtube"&&C.type!=="vimeo"||((F=C.contentEl)===null||F===void 0||F.remove(),C.contentEl=void 0,(z=C.htmlEl)===null||z===void 0||z.remove(),C.htmlEl=void 0),C.poller&&clearTimeout(C.poller)}function f(){t=!1}function g(){if(t)return;t=!0;const A=r();(A&&A.autoplay!==void 0?A.autoplay:n().autoplay)&&((function(){var C;const F=r(),z=F?.el;if(z&&F?.type==="html5video")try{const V=z.querySelector("video");if(V){const Y=V.play();Y!==void 0&&Y.then((()=>{})).catch((te=>{V.muted=!0,V.play()}))}}catch{}const j=F?.htmlEl;j instanceof HTMLIFrameElement&&((C=j.contentWindow)===null||C===void 0||C.postMessage('{"event":"command","func":"stopVideo","args":""}',"*"))})(),(function(){const C=r(),F=C?.type;if(!C?.el||F!=="youtube"&&F!=="vimeo")return;const z=()=>{if(C.contentEl&&C.contentEl instanceof HTMLIFrameElement&&C.contentEl.contentWindow){let j;if(C.contentEl.dataset.ready==="true")return j=C.type==="youtube"?{event:"command",func:"playVideo"}:{method:"play",value:"true"},j&&C.contentEl.contentWindow.postMessage(JSON.stringify(j),"*"),void(C.poller=void 0);C.type==="youtube"&&(j={event:"listening",id:C.contentEl.getAttribute("id")},C.contentEl.contentWindow.postMessage(JSON.stringify(j),"*"))}C.poller=setTimeout(z,250)};z()})())}function x(A){const C=A?.htmlEl;if(A&&C&&(A.type==="html5video"||A.type==="youtube"||A.type==="vimeo")){if(C.style.aspectRatio="",C.style.width="",C.style.height="",C.style.maxWidth="",C.style.maxHeight="",A.width){let F=`${A.width}`;F.match(/^\d+$/)&&(F+="px"),C.style.maxWidth=`${F}`}if(A.height){let F=`${A.height}`;F.match(/^\d+$/)&&(F+="px"),C.style.maxHeight=`${F}`}if(A.aspectRatio){const F=A.aspectRatio.split("/"),z=parseFloat(F[0].trim()),j=F[1]?parseFloat(F[1].trim()):0,V=z&&j?z/j:z;C.offsetHeight;const Y=C.getBoundingClientRect(),te=V<(Y.width||1)/(Y.height||1);C.style.aspectRatio=`${A.aspectRatio}`,C.style.width=te?"auto":"",C.style.height=te?"":"auto"}}}function w(){x(r())}return{init:function(A){e=A,e.on("addSlide",o),e.on("attachSlideEl",c),e.on("detachSlideEl",i),e.on("ready",g),e.on("change",f),e.on("settle",g),e.on("refresh",w),window.addEventListener("message",s)},destroy:function(){e?.off("addSlide",o),e?.off("attachSlideEl",c),e?.off("detachSlideEl",i),e?.off("ready",g),e?.off("change",f),e?.off("settle",g),e?.off("refresh",w),window.removeEventListener("message",s),e=void 0}}};/*! License details at fancyapps.com/license */const WG={autoStart:!1,btnTpl:'<button data-fullscreen-action="toggle" class="f-button" title="{{TOGGLE_FULLSCREEN}}"><svg><g><path d="M8 3H5a2 2 0 0 0-2 2v3M21 8V5a2 2 0 0 0-2-2h-3M3 16v3a2 2 0 0 0 2 2h3M16 21h3a2 2 0 0 0 2-2v-3"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},GG="in-fullscreen-mode",bze=()=>{let e;function t(x){const w=e?.getOptions().Fullscreen;let A=(Ma(w)?Object.assign(Object.assign({},WG),w):WG)[x];return A&&typeof A=="function"&&e?A(e):A}function n(){var x;(x=e?.getPlugins().Toolbar)===null||x===void 0||x.add("fullscreen",{tpl:t("btnTpl")})}function r(){if(t("autoStart")){const x=o();x&&i(x)}}function s(x,w){const A=w.target;A&&!w.defaultPrevented&&A.dataset.fullscreenAction==="toggle"&&g()}function o(){return t("el")||e?.getContainer()||void 0}function c(){const x=document;return x.fullscreenEnabled?!!x.fullscreenElement:!!x.webkitFullscreenEnabled&&!!x.webkitFullscreenElement}function i(x){const w=document;let A;return x||(x=w.documentElement),w.fullscreenEnabled?A=x.requestFullscreen():w.webkitFullscreenEnabled&&(A=x.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)),A&&A.then((()=>{x.classList.add(GG)})),A}function f(){const x=document;let w;return x.fullscreenEnabled?w=x.fullscreenElement&&x.exitFullscreen():x.webkitFullscreenEnabled&&(w=x.webkitFullscreenElement&&x.webkitExitFullscreen()),w&&w.then((()=>{var A;(A=o())===null||A===void 0||A.classList.remove(GG)})),w}function g(){if(c())f();else{const x=o();x&&i(x)}}return{init:function(x){e=x,e.on("initPlugins",n),e.on("ready",r),e.on("click",s)},destroy:function(){e?.off("initPlugins",n),e?.off("ready",r),e?.off("click",s)},exit:f,inFullscreen:c,request:i,toggle:g}};/*! License details at fancyapps.com/license */let nd,Cse,S5=!1,E5=!1,Nw=!1,T5=!1;const az=()=>{const e=new URL(document.URL).hash,t=e.slice(1).split("-"),n=t[t.length-1],r=n&&/^\+?\d+$/.test(n)&&parseInt(t.pop()||"1",10)||1;return{urlHash:e,urlSlug:t.join("-"),urlIndex:r}},LR=()=>{const e=nd?.getInstance();return!(!e||e.getState()!=1)},lz=()=>{if(!nd||LR())return;const{urlSlug:e,urlIndex:t}=az();if(!e)return;let n=document.querySelector(`[data-slug="${e}"]`);n&&nd.fromTriggerEl(n),LR()||(n=document.querySelectorAll(`[data-fancybox="${e}"]`)[t-1],n&&nd.fromTriggerEl(n,{startIndex:t-1})),LR()&&n&&!n.closest("[inert]")&&n.scrollIntoView({behavior:"instant",block:"center",inline:"center"})},xze=()=>{if(!nd||Nw)return;const e=nd?.getInstance(),t=e?.getCarousel();if(e?.getOptions().Hash===!1)return;const{urlSlug:n,urlIndex:r}=az();if(e&&t){const s=t.getSlides();for(const o of s||[])if(n===o.slug||n===o.fancybox&&o.index===r-1)return E5=!1,void t.goTo(o.index);T5=!0,e.close(),T5=!1}lz()},YG=()=>{nd&&(Cse=setTimeout((()=>{S5=!0,lz(),S5=!1}),300),window.addEventListener("hashchange",xze,!1))},M5=()=>{let e,t="auto",n="";function r(){var c,i,f;if(!e||!e.isTopMost()||e.getOptions().Hash===!1)return;if(S5){const V=e.getOptions().sync;V&&V.goTo(((c=e?.getCarousel())===null||c===void 0?void 0:c.getPageIndex())||0,{transition:!1,tween:!1})}const g=e.getCarousel();if(!g)return;const{urlHash:x,urlSlug:w}=az(),A=e.getSlide();if(!A)return;let C=A.slug||A.fancybox||"",F=parseInt(A.index+"",10)+1;if(!C)return;let z=A.slug?`#${A.slug}`:`#${C}-${F}`;(((f=(i=e.getCarousel())===null||i===void 0?void 0:i.getPages())===null||f===void 0?void 0:f.length)||0)<2&&(z=`#${C}`),x!==z&&(n=x),history.scrollRestoration&&(t=history.scrollRestoration,history.scrollRestoration="manual"),g.on("change",s);const j=C!==w;try{window.history[j?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+z),j&&(E5=!0)}catch{}}function s(){if(!e||!e.isTopMost()||e.getOptions().Hash===!1)return;const c=e.getSlide();if(!c)return;let i=c.slug||c.fancybox||"",f=c.index+1,g=c.slug?`#${c.slug}`:`#${i}-${f}`;Nw=!0;try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+g)}catch{}Nw=!1}function o(){if(T5||!e||!e.isTopMost()||e.getOptions().Hash===!1)return;const c=e.getSlide();if(c&&c.fancybox){Nw=!0;try{E5&&!(function(){if(window.parent===window)return!1;try{var i=window.frameElement}catch{i=null}return i===null?location.protocol==="data:":i.hasAttribute("sandbox")})()?window.history.back():window.history.replaceState({},document.title,window.location.pathname+window.location.search+n)}catch{}Nw=!1}}return{init:function(c){clearTimeout(Cse),e=c,e.on("ready",r),e.on("close",o)},destroy:function(){e?.off("ready",r),e?.off("close",o);const c=e?.getCarousel();c&&c.off("change",s),e=void 0,history.scrollRestoration&&t&&(history.scrollRestoration=t)}}};M5.startFromUrl=lz,M5.setup=function(e){nd||(nd=e,gC()&&(/complete|interactive|loaded/.test(document.readyState)?YG():document.addEventListener("DOMContentLoaded",YG)))};/*! License details at fancyapps.com/license */const wze=Object.assign(Object.assign({},sz),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ELEMENT_NOT_FOUND:"HTML Element Not Found",IFRAME_ERROR:"Error Loading Page"});/*! License details at fancyapps.com/license */const Ise='<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24"><path d="M19.286 4.714 4.714 19.286M4.714 4.714l14.572 14.572" /></svg></button>';Ase().add("close",{tpl:Ise});const Dd=e=>{e.cancelable&&e.preventDefault()},qG=(e=null,t="",n)=>{if(!e||!e.parentElement||!t)return void(n&&n());Pse(e);const r=s=>{s.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",r),delete e.dataset.animationName,n&&n(),e.classList.remove(t))};e.dataset.animationName=t,e.addEventListener("animationend",r),Jr(e,t)},Pse=e=>{e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))};var No;(function(e){e[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Closing=2]="Closing",e[e.Destroyed=3]="Destroyed"})(No||(No={}));const fS={ajax:null,backdropClick:"close",Carousel:{},closeButton:"auto",closeExisting:!1,delegateEl:void 0,dragToClose:!0,fadeEffect:!0,groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,id:void 0,idle:!1,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:wze,mainClass:"",mainStyle:{},mainTpl:`<dialog class="fancybox__dialog">
    <div class="fancybox__container" tabindex="0" aria-label="{{MODAL}}">
      <div class="fancybox__backdrop"></div>
      <div class="fancybox__carousel"></div>
    </div>
  </dialog>`,modal:!0,on:{},parentEl:void 0,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,sync:void 0,theme:"dark",triggerEl:void 0,triggerEvent:void 0,zoomEffect:!0},Bh=new Map;let Sze=0;const XG="with-fancybox",Eze=()=>{let e,t,n,r,s,o,c,i=No.Init,f=Object.assign({},fS),g=-1,x={},w=[],A=!1,C=!0,F=0;function z(ge,...nt){let It=f[ge];return It&&typeof It=="function"?It(je,...nt):It}function j(ge,nt=[]){const It=z("l10n")||{};ge=String(ge).replace(/\{\{(\w+)\}\}/g,((ht,ut)=>It[ut]||ht));for(let ht=0;ht<nt.length;ht++)ge=ge.split(nt[ht][0]).join(nt[ht][1]);return ge=ge.replace(/\{\{(.*?)\}\}/g,((ht,ut)=>ut))}const V=new Map;function Y(ge,...nt){const It=[...V.get(ge)||[]];for(const[ht,ut]of Object.entries(f.on||{}))(ht===ge||ht.split(" ").indexOf(ge)>-1)&&It.push(ut);for(const ht of It)ht&&typeof ht=="function"&&ht(je,...nt);ge!=="*"&&Y("*",ge,...nt)}function te(){ml(t,"is-revealing");try{document.activeElement===e&&(t?.querySelector("[autofocus]")||t).focus()}catch{}}function J(ge,nt){var It;ke(nt),be(),(It=nt.el)===null||It===void 0||It.addEventListener("click",le),nt.type!=="inline"&&nt.type!=="clone"||(function(ht){if(!r||!ht||!ht.el)return;let ut=null;if(as(ht.src)){const Rt=ht.src.split("#",2).pop();ut=Rt?document.getElementById(Rt):null}if(ut){if(Jr(ut,"f-html"),ht.type==="clone"||ut.closest(".fancybox__carousel")){ut=ut.cloneNode(!0);const Rt=ut.dataset.animationName;Rt&&(ut.classList.remove(Rt),delete ut.dataset.animationName);let ze=ut.getAttribute("id");ze=ze?`${ze}--clone`:`clone-${g}-${ht.index}`,ut.setAttribute("id",ze)}else if(ut.parentNode){const Rt=document.createElement("div");Rt.inert=!0,ut.parentNode.insertBefore(Rt,ut),ht.placeholderEl=Rt}ht.htmlEl=ut,Jr(ht.el,"has-html"),ht.el.prepend(ut),ut.classList.remove("hidden"),ut.style.display==="none"&&(ut.style.display=""),getComputedStyle(ut).getPropertyValue("display")==="none"&&(ut.style.display=ut.dataset.display||"flex"),r?.emit("contentReady",ht)}else r?.showError(ht,"{{ELEMENT_NOT_FOUND}}")})(nt),nt.type==="ajax"&&(function(ht){const ut=ht.el;if(!ut||ht.htmlEl||ht.xhr)return;r?.showLoading(ht),ht.state=0;const Rt=new XMLHttpRequest;Rt.onreadystatechange=function(){if(Rt.readyState===XMLHttpRequest.DONE&&i===No.Ready)if(r?.hideLoading(ht),ht.state=1,Rt.status===200){let lt=Rt.responseText+"",at=null,Et=null;if(ht.filter){const $e=document.createElement("div");$e.innerHTML=lt,Et=$e.querySelector(ht.filter+"")}Et&&Et instanceof HTMLElement?at=Et:(at=document.createElement("div"),at.innerHTML=lt),at.classList.add("f-html"),ht.htmlEl=at,ut.classList.add("has-html"),ut.classList.add("has-ajax"),ut.prepend(at),r?.emit("contentReady",ht)}else r?.showError(ht)};const ze=z("ajax")||null;Rt.open(ze?"POST":"GET",ht.src+""),Rt.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),Rt.setRequestHeader("X-Requested-With","XMLHttpRequest"),Rt.send(ze),ht.xhr=Rt})(nt)}function ee(ge,nt){var It;He(nt),(It=nt.el)===null||It===void 0||It.removeEventListener("click",le),nt.type!=="inline"&&nt.type!=="clone"||(function(ht){const ut=ht.htmlEl,Rt=ht.placeholderEl;ut&&(getComputedStyle(ut).getPropertyValue("display")!=="none"&&(ut.style.display="none"),ut.offsetHeight),Rt&&(ut&&Rt.parentNode&&Rt.parentNode.insertBefore(ut,Rt),Rt.remove()),ht.htmlEl=void 0,ht.placeholderEl=void 0})(nt),nt.xhr&&(nt.xhr.abort(),nt.xhr=void 0)}function le(ge){if(!Ge())return;if(i!==No.Ready)return Dd(ge),void ge.stopPropagation();if(ge.defaultPrevented||!f1.isClickAllowed())return;const nt=ge.composedPath()[0];nt.closest(".fancybox__carousel")&&nt.classList.contains("fancybox__slide")&&Se(ge)}function oe(){C=!1,t&&r&&t.classList.remove("is-revealing"),be();const ge=z("sync");if(r&&ge){const nt=ge.getPageIndex(r.getPageIndex())||0;ge.goTo(nt,{transition:!1,tween:!1})}}function ve(){var ge;(function(){const It=r?.getViewport();if(!z("dragToClose")||!r||!It||(s=f1(It).init(),!s))return;let ht=!1,ut=0,Rt=0,ze={},lt=1;function at(){var $e,Mt;o?.spring({clamp:!0,mass:1,tension:Rt===0?140:960,friction:17,restDelta:.1,restSpeed:.1,maxSpeed:1/0}).from({y:ut}).to({y:Rt}).start();const tn=(($e=r?.getViewport())===null||$e===void 0?void 0:$e.getBoundingClientRect().height)||0,on=(Mt=$t())===null||Mt===void 0?void 0:Mt.panzoomRef;if(tn&&on)if(Rt===0)on.execute(ur.Reset);else{const vn=jI(Math.abs(ut),0,.33*tn,lt,.77*lt,!1);on.execute(ur.ZoomTo,{scale:vn})}}const Et=$e=>{var Mt;const tn=$e.srcEvent,on=tn.target;return r&&!(g2(tn)&&((Mt=tn.touches)===null||Mt===void 0?void 0:Mt.length)>1)&&on&&!U_(on)};o=Vm().on("step",($e=>{if(t&&It&&i===No.Ready){const Mt=It.getBoundingClientRect().height;ut=Math.min(Mt,Math.max(-1*Mt,$e.y));const tn=jI(Math.abs(ut),0,.5*Mt,1,0,!0);t.style.setProperty("--f-drag-opacity",tn+""),t.style.setProperty("--f-drag-offset",ut+"px")}})),s.on("start",(function(){ht||(o?.pause(),Rt=ut)})).on("panstart",($e=>{var Mt,tn;if(!ht&&Et($e)&&$e.axis==="y"){Dd($e.srcEvent),ht=!0,Kt(),(Mt=r?.getViewport())===null||Mt===void 0||Mt.classList.add("is-dragging");const on=(tn=$t())===null||tn===void 0?void 0:tn.panzoomRef;if(on){lt=on.getTransform().scale||1;const vn=on.getOptions();ze=Object.assign({},vn),vn.bounds=!1,vn.gestures=!1}}else ht=!1})).on("pan",(function($e){ht&&Et($e)&&(Dd($e.srcEvent),$e.srcEvent.stopPropagation(),$e.axis==="y"&&(Rt+=$e.deltaY,at()))})).on("end",($e=>{var Mt,tn,on;if((Mt=r?.getViewport())===null||Mt===void 0||Mt.classList.remove("is-dragging"),ht){const vn=(tn=$t())===null||tn===void 0?void 0:tn.panzoomRef;if(vn){(on=vn.getTween())===null||on===void 0||on.end();const _t=vn.getOptions();_t.bounds=ze.bounds||!1,_t.gestures=ze.gestures||!1}Et($e)&&$e.axis==="y"&&(Math.abs($e.velocityY)>5||Math.abs(ut)>50)&&_e($e.srcEvent,"f-throwOut"+($e.velocityY>0?"Down":"Up"))}ht=!1,i===No.Ready&&ut!==0&&(Rt=0,at())}))})(),document.body.addEventListener("click",xe),document.body.addEventListener("keydown",Ee,{passive:!1,capture:!0}),be(),mn();const nt=z("sync");r&&nt&&((ge=nt.getTween())===null||ge===void 0||ge.start()),Ke($t())}function se(){r?.canGoNext()?mn():Jt()}function ie(ge,nt){ke(nt),Ke(nt)}function pe(){var ge;const nt=r?.getPlugins().Thumbs;$a(t,"has-thumbs",nt?.isEnabled()||!1),$a(t,"has-vertical-thumbs",!!nt&&(nt.getType()==="scrollable"||((ge=nt.getCarousel())===null||ge===void 0?void 0:ge.isVertical())===!0))}function be(){if(t){const ge=r?.getPages()||[],nt=r?.getPageIndex()||0;for(const It of t.querySelectorAll("[data-fancybox-index]"))It.innerHTML=nt+"";for(const It of t.querySelectorAll("[data-fancybox-page]"))It.innerHTML=nt+1+"";for(const It of t.querySelectorAll("[data-fancybox-pages]"))It.innerHTML=ge.length+""}}function Se(ge){if(ge.composedPath()[0].closest("[data-fancybox-close]"))return void _e(ge);Y("backdropClick",ge),!ge.defaultPrevented&&z("backdropClick")&&_e(ge)}function Ce(){mt()}function Ee(ge){if(!Ge()||i!==No.Ready)return;const nt=ge.key,It=z("keyboard");if(!It||ge.ctrlKey||ge.altKey||ge.shiftKey)return;const ht=ge.composedPath()[0];if(!p0(ht)||nt!=="Escape"&&(Rt=>{const ze=["input","textarea","select","option","video","iframe","[contenteditable]","[data-selectable]","[data-draggable]"].join(",");return Rt.matches(ze)||Rt.closest(ze)})(ht)||(Y("keydown",ge),ge.defaultPrevented))return;const ut=It[nt];if(ut)switch(ut){case"close":_e(ge);break;case"next":Dd(ge),r?.next();break;case"prev":Dd(ge),r?.prev()}}function xe(ge){if(!Ge()||i!==No.Ready||(mt(),ge.defaultPrevented))return;const nt=ge.composedPath()[0],It=!!nt.closest("[data-fancybox-close]"),ht=nt.classList.contains("fancybox__backdrop");(It||ht)&&Se(ge)}function ke(ge){var nt;const{el:It,htmlEl:ht,panzoomRef:ut,closeButtonEl:Rt}=ge,ze=ut?ut.getWrapper():ht;if(!It||!It.parentElement||!ze)return;let lt=z("closeButton");if(lt==="auto"&&(lt=((nt=r?.getPlugins().Toolbar)===null||nt===void 0?void 0:nt.isEnabled())!==!0),lt){if(!Rt){const at=vf(j(Ise));at&&(Jr(at,"is-close-button"),ge.closeButtonEl=ze.insertAdjacentElement("afterbegin",at),Jr(It,"has-close-btn"))}}else He(ge)}function He(ge){ge.closeButtonEl&&(ge.closeButtonEl.remove(),ge.closeButtonEl=void 0),ml(ge.el,"has-close-btn")}function Ke(ge){if(!(C&&r&&r.getState()===1&&ge&&ge.index===r.getOptions().initialPage&&ge.el&&ge.el.parentElement)||ge.state!==void 0&&ge.state!==1)return;C=!1;const nt=ge.panzoomRef,It=nt?.getTween(),ht=z("zoomEffect")&&It?Lt(ge):void 0;if(nt&&It&&ht){const{x:Rt,y:ze,scale:lt}=nt.getStartPosition();return void It.spring({tension:215,friction:25,restDelta:.001,restSpeed:.001,maxSpeed:1/0}).from(ht).to({x:Rt,y:ze,scale:lt}).start()}const ut=nt?.getContent()||ge.htmlEl;ut&&qG(ut,z("showClass",ge))}function Ge(){var ge;return((ge=ks.getInstance())===null||ge===void 0?void 0:ge.getId())===g}function $t(){var ge;return(ge=r?.getPage())===null||ge===void 0?void 0:ge.slides[0]}function Ft(){const ge=$t();return ge?ge.triggerEl||z("triggerEl"):void 0}function Lt(ge){var nt,It;const ht=ge.thumbEl;if(!ht||!(tn=>{const on=tn.getBoundingClientRect(),vn=tn.closest("[style]"),_t=vn?.parentElement;if(vn&&vn.style.transform&&_t){const qe=_t.getBoundingClientRect();if(on.left<qe.left||on.left>qe.left+qe.width-on.width||on.top<qe.top||on.top>qe.top+qe.height-on.height)return!1}const wt=Math.max(document.documentElement.clientHeight,window.innerHeight),Ve=Math.max(document.documentElement.clientWidth,window.innerWidth);return!(on.bottom<0||on.top-wt>=0||on.right<0||on.left-Ve>=0)})(ht))return;const ut=(It=(nt=ge.panzoomRef)===null||nt===void 0?void 0:nt.getWrapper())===null||It===void 0?void 0:It.getBoundingClientRect(),Rt=ut?.width,ze=ut?.height;if(!Rt||!ze)return;const lt=ht.getBoundingClientRect();let at=lt.width,Et=lt.height,$e=lt.left,Mt=lt.top;if(!(!lt||!at||!Et)){if(ht instanceof HTMLImageElement){const tn=window.getComputedStyle(ht).getPropertyValue("object-fit");if(tn==="contain"||tn==="scale-down"){const{width:on,height:vn}=((_t,wt,Ve,qe,Pt="contain")=>{if(Pt==="contain"||_t>Ve||wt>qe){const Qt=Ve/_t,cn=qe/wt,dn=Math.min(Qt,cn);_t*=dn,wt*=dn}return{width:_t,height:wt}})(ht.naturalWidth,ht.naturalHeight,at,Et,tn);$e+=.5*(at-on),Mt+=.5*(Et-vn),at=on,Et=vn}}if(!(Math.abs(Rt/ze-at/Et)>.1))return{x:$e+.5*at-(ut.left+.5*Rt),y:Mt+.5*Et-(ut.top+.5*ze),scale:at/Rt}}}function nn(){c&&clearTimeout(c),c=void 0,document.removeEventListener("mousemove",Ce)}function mn(){if(A||c)return;const ge=z("idle");ge&&(c=setTimeout(Xt,ge))}function Xt(){t&&(nn(),Jr(t,"is-idle"),document.addEventListener("mousemove",Ce),A=!0)}function mt(){A&&(Jt(),mn())}function Jt(){nn(),t?.classList.remove("is-idle"),A=!1}function Kt(){const ge=Ft();var nt;!ge||(nt=ge.getBoundingClientRect()).bottom>0&&nt.right>0&&nt.left<(window.innerWidth||document.documentElement.clientWidth)&&nt.top<(window.innerHeight||document.documentElement.clientHeight)||ge.closest("[inert]")||ge.scrollIntoView({behavior:"instant",block:"center",inline:"center"})}function _e(ge,nt){var It,ht,ut,Rt,ze;if(i===No.Closing||i===No.Destroyed)return;const lt=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(Y("shouldClose",lt,ge),lt.defaultPrevented)return;if(nn(),ge){if(ge.defaultPrevented)return;Dd(ge),ge.stopPropagation(),ge.stopImmediatePropagation()}if(i=No.Closing,o?.pause(),s?.destroy(),r){(It=r.getGestures())===null||It===void 0||It.destroy(),(ht=r.getTween())===null||ht===void 0||ht.pause();for(const $e of r.getSlides()){const Mt=$e.panzoomRef;Mt&&(Ql(Mt.getOptions(),{clickAction:!1,dblClickAction:!1,wheelAction:!1,bounds:!1,minScale:0,maxScale:1/0}),(ut=Mt.getGestures())===null||ut===void 0||ut.destroy(),(Rt=Mt.getTween())===null||Rt===void 0||Rt.pause())}}const at=r?.getPlugins();(ze=at?.Autoplay)===null||ze===void 0||ze.stop();const Et=at?.Fullscreen;Et&&Et.inFullscreen()?Promise.resolve(Et.exit()).then((()=>{setTimeout((()=>{bn(ge,nt)}),150)})):bn(ge,nt)}function bn(ge,nt){var It,ht;if(i!==No.Closing)return;Y("close",ge),C=!1,document.body.removeEventListener("click",xe),document.body.removeEventListener("keydown",Ee,{passive:!1,capture:!0}),z("placeFocusBack")&&Kt();const ut=document.activeElement;ut&&e?.contains(ut)&&ut.blur(),z("fadeEffect")&&(t?.classList.remove("is-ready"),t?.classList.add("is-hiding")),t?.classList.add("is-closing");const Rt=$t(),ze=Rt?.el,lt=Rt?.panzoomRef,at=(It=Rt?.panzoomRef)===null||It===void 0?void 0:It.getTween(),Et=nt||z("hideClass");let $e=!1,Mt=!1;if(r&&Rt&&ze&&lt&&at){let on;if(z("zoomEffect")&&Rt.state===1&&(on=Lt(Rt)),on){$e=!0;const vn=()=>{on=Lt(Rt),on?at.to(Object.assign(Object.assign({},zu),on)):On()};lt.on("refresh",(()=>{vn()})),at.easing(Vm.Easings.EaseOut).duration(350).from(Object.assign({},lt.getTransform())).to(Object.assign(Object.assign({},zu),on)).start(),ze?.getAnimations()&&(ze.style.animationPlayState="paused",requestAnimationFrame((()=>{vn()})))}}const tn=Rt?.htmlEl||((ht=Rt?.panzoomRef)===null||ht===void 0?void 0:ht.getWrapper());tn&&Pse(tn),!$e&&Et&&tn&&(Mt=!0,qG(tn,Et,(()=>{On()}))),$e||Mt?setTimeout((()=>{On()}),350):On()}function On(){var ge,nt,It,ht,ut;if(i===No.Destroyed)return;i=No.Destroyed;const Rt=Ft();Y("destroy"),(nt=(ge=z("sync"))===null||ge===void 0?void 0:ge.getPlugins().Autoplay)===null||nt===void 0||nt.resume(),(ht=(It=z("sync"))===null||It===void 0?void 0:It.getPlugins().Autoscroll)===null||ht===void 0||ht.resume(),e instanceof HTMLDialogElement&&e.close(),(ut=r?.getContainer())===null||ut===void 0||ut.classList.remove("is-idle"),r?.destroy();for(const ze of Object.values(x))ze?.destroy();if(x={},e?.remove(),e=void 0,t=void 0,r=void 0,Bh.delete(g),!Bh.size&&(IG(!1),document.documentElement.classList.remove(XG),z("placeFocusBack")&&Rt&&!Rt.closest("[inert]")))try{Rt?.focus({preventScroll:!0})}catch{}}const je={close:_e,destroy:On,getCarousel:function(){return r},getContainer:function(){return t},getId:function(){return g},getOptions:function(){return f},getPlugins:function(){return x},getSlide:function(){return $t()},getState:function(){return i},init:function(ge=[],nt={}){i!==No.Init&&(je.destroy(),i=No.Init),f=Ql({},fS,nt),g=z("id")||"fancybox-"+ ++Sze;const It=Bh.get(g);if(It&&It.destroy(),Bh.set(g,je),Y("init"),(function(){for(const[ht,ut]of Object.entries(Object.assign(Object.assign({},ks.Plugins),f.plugins||{})))if(ht&&!x[ht]&&ut instanceof Function){const Rt=ut();Rt.init(je),x[ht]=Rt}Y("initPlugins")})(),(function(ht=[]){Y("initSlides",ht),w=[...ht]})(ge),(function(){const ht=z("parentEl")||document.body;if(!(ht&&ht instanceof HTMLElement))return;const ut=j(z("mainTpl")||"");if(e=vf(ut)||void 0,!e||(t=e.querySelector(".fancybox__container"),!(t&&t instanceof HTMLElement)))return;const Rt=z("mainClass");Rt&&Jr(t,Rt);const ze=z("mainStyle");if(ze&&Ma(ze))for(const[Et,$e]of Object.entries(ze))t.style.setProperty(Et,$e);const lt=z("theme"),at=lt==="auto"?window.matchMedia("(prefers-color-scheme:light)").matches:lt==="light";t.setAttribute("theme",at?"light":"dark"),e.setAttribute("id",`${g}`),e.addEventListener("keydown",(Et=>{Et.key==="Escape"&&Dd(Et)})),e.addEventListener("wheel",(Et=>{const $e=Et.target;let Mt=z("wheel",Et);$e.closest(".f-thumbs")&&(Mt="slide");const tn=Mt==="slide",on=[-Et.deltaX||0,-Et.deltaY||0,-Et.detail||0].reduce((function(wt,Ve){return Math.abs(Ve)>Math.abs(wt)?Ve:wt})),vn=Math.max(-1,Math.min(1,on)),_t=Date.now();F&&_t-F<300?tn&&Dd(Et):(F=_t,Y("wheel",Et,vn),Et.defaultPrevented||(Mt==="close"?_e(Et):Mt==="slide"&&r&&!U_($e)&&(Dd(Et),r[vn>0?"prev":"next"]())))}),{capture:!0,passive:!1}),e.addEventListener("cancel",(Et=>{_e(Et)})),ht.append(e),Bh.size===1&&(z("hideScrollbar")&&IG(!0),document.documentElement.classList.add(XG)),e instanceof HTMLDialogElement&&(z("modal")?e.showModal():e.show()),Y("initLayout")})(),(function(){if(n=e?.querySelector(".fancybox__carousel")||void 0,!n)return;n.fancybox=je;const ht=Ql({},{Autoplay:{autoStart:!1,pauseOnHover:!1,progressbarParentEl:ut=>{const Rt=ut.getContainer();return Rt?.querySelector(".f-carousel__toolbar [data-autoplay-action]")||Rt}},Fullscreen:{el:t},Toolbar:{absolute:!0,items:{counter:{tpl:'<div class="f-counter"><span data-fancybox-page></span>/<span data-fancybox-pages></span></div>'}},display:{left:["counter"],right:["toggleFull","autoplay","fullscreen","thumbs","close"]}},Video:{autoplay:!0},Thumbs:{minCount:2,Carousel:{classes:{container:"fancybox__thumbs"}}},classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",slide:"fancybox__slide"},spinnerTpl:'<div class="f-spinner" data-fancybox-close></div>',dragFree:!1,slidesPerPage:1,plugins:{Sync:Ese,Arrows:pze,Lazyload:Tse,Zoomable:fze,Html:yze,Video:vze,Autoplay:gze,Fullscreen:bze,Thumbs:_ze,Toolbar:Ase}},z("Carousel")||{},{slides:w,enabled:!0,initialPage:z("startIndex")||0,l10n:z("l10n")});r=UI(n,ht),Y("initCarousel",r),r.on("*",((ut,Rt,...ze)=>{Y(`Carousel.${Rt}`,ut,...ze)})),r.on("attachSlideEl",J),r.on("detachSlideEl",ee),r.on("contentReady",ie),r.on("ready",ve),r.on("change",oe),r.on("settle",se),r.on("thumbs:ready",pe),r.on("thumbs:destroy",pe),r.init()})(),e&&t){if(z("closeExisting"))for(const[ht,ut]of Bh.entries())ht!==g&&ut.close();z("fadeEffect")?(setTimeout((()=>{te()}),500),Jr(t,"is-revealing")):te(),t.classList.add("is-ready"),i=No.Ready,Y("ready")}},isCurrentSlide:function(ge){const nt=$t();return!(!ge||!nt)&&nt.index===ge.index},isTopMost:function(){return Ge()},off:function(ge,nt){return V.has(ge)&&V.set(ge,V.get(ge).filter((It=>It!==nt))),je},on:function(ge,nt){return V.set(ge,[...V.get(ge)||[],nt]),je},toggleIdle(ge){(A||ge===!0)&&Xt(),A&&ge!==!1||Jt()}};return je};function ZG(e,t={}){var n,r,s;if(!(e&&e instanceof Element))return;let o,c,i,f,g={};for(const[z,j]of ks.openers)if(z.contains(e))for(const[V,Y]of j){let te;if(V){for(const J of z.querySelectorAll(V))if(J.contains(e)){te=J;break}if(!te)continue}for(const[J,ee]of Y){let le=null;try{le=e.closest(J)}catch{}le&&(c=z,i=te,o=le,f=J,Ql(g,ee||{}))}}if(!c||!f||!o)return;const x=Ql({},fS,t,g,{triggerEl:o});let w=[].slice.call((i||c).querySelectorAll(f));const A=o.closest(".f-carousel"),C=A?.carousel;if(C&&(!i||!A.contains(i))){const z=[];for(const j of C?.getSlides()){const V=j.el;V&&(V.matches(f)?z.push(V):z.push(...[].slice.call(V.querySelectorAll(f))))}z.length&&(w=[...z],(n=C.getPlugins().Autoplay)===null||n===void 0||n.pause(),(r=C.getPlugins().Autoscroll)===null||r===void 0||r.pause(),x.sync=C)}if(x.groupAll===!1){const z=x.groupAttr,j=z&&o?o.getAttribute(`${z}`):"";w=z&&j?w.filter((V=>V.getAttribute(`${z}`)===j)):[o]}if(!w.length)return;(s=x.triggerEvent)===null||s===void 0||s.preventDefault();const F=ks.getInstance();if(F){const z=F.getOptions().triggerEl;if(z&&w.indexOf(z)>-1)return}return Object.assign({},x.Carousel||{}).rtl&&(w=w.reverse()),o&&t.startIndex===void 0&&(x.startIndex=w.indexOf(o)),ks.fromNodes(w,x)}const ks={Plugins:{Hash:M5},version:"6.1.7",openers:new Map,bind:function(e,t,n,r){if(!gC())return;let s=document.body,o=null,c="[data-fancybox]",i={};e instanceof Element&&(s=e),as(e)&&as(t)?(o=e,c=t):as(t)&&as(n)?(o=t,c=n):as(t)?c=t:as(e)&&(c=e),typeof t=="object"&&(i=t||{}),typeof n=="object"&&(i=n||{}),typeof r=="object"&&(i=r||{}),(function(f,g,x,w={}){if(!(f&&f instanceof Element&&x))return;const A=ks.openers.get(f)||new Map,C=A.get(g)||new Map;if(C.set(x,w),A.set(g,C),ks.openers.set(f,A),A.size===1&&f.addEventListener("click",ks.fromEvent),ks.openers.size===1)for(const F of Object.values(ks.Plugins)){const z=F.setup;typeof z=="function"&&z(ks)}})(s,o,c,i)},close:function(e=!0,...t){if(e)for(const n of Bh.values())n.close(...t);else{const n=ks.getInstance();n&&n.close(...t)}},destroy:function(){let e;for(;e=ks.getInstance();)e.destroy();for(const t of ks.openers.keys())t.removeEventListener("click",ks.fromEvent);ks.openers.clear()},fromEvent:function(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e.composedPath()[0];const n={triggerEvent:e};if(t.closest(".fancybox__container.is-hiding"))return Dd(e),void e.stopPropagation();const r=t.closest("[data-fancybox-delegate]")||void 0;if(r){const s=r.dataset.fancyboxDelegate||"",o=document.querySelectorAll(`[data-fancybox="${s}"]`),c=parseInt(r.dataset.fancyboxIndex||"",10)||0;t=o[c]||o[0],Ql(n,{delegateEl:r,startIndex:c})}return ZG(t,n)},fromNodes:function(e,t){t=Ql({},fS,t||{});const n=[],r=s=>s instanceof HTMLImageElement?s:s instanceof HTMLElement?s.querySelector("img:not([aria-hidden])"):void 0;for(const s of e){const o=s.dataset||{},c=t.delegateEl&&e.indexOf(s)===t.startIndex?t.delegateEl:void 0,i=r(c)||r(s)||void 0,f=o.src||s.getAttribute("href")||s.getAttribute("currentSrc")||s.getAttribute("src")||void 0,g=o.thumb||o.thumbSrc||i?.getAttribute("currentSrc")||i?.getAttribute("src")||i?.dataset.lazySrc||void 0,x={src:f,alt:o.alt||i?.getAttribute("alt")||void 0,thumbSrc:g,thumbEl:i,triggerEl:s,delegateEl:c};for(const w in o){let A=o[w]+"";A=A!=="false"&&(A==="true"||A),x[w]=A}n.push(x)}return ks.show(n,t)},fromSelector:function(e,t,n,r){if(!gC())return;let s=document.body,o=null,c="[data-fancybox]",i={};e instanceof Element&&(s=e),as(e)&&as(t)?(o=e,c=t):as(t)&&as(n)?(o=t,c=n):as(t)?c=t:as(e)&&(c=e),typeof t=="object"&&(i=t||{}),typeof n=="object"&&(i=n||{}),typeof r=="object"&&(i=r||{});for(const[f,g]of ks.openers)for(const[x,w]of g)for(const[A,C]of w)if(f===s&&x===o){const F=s.querySelector((x?`${x} `:"")+c);if(F&&F.matches(A))return ks.fromTriggerEl(F,i)}},fromTriggerEl:ZG,getCarousel:function(){var e;return((e=ks.getInstance())===null||e===void 0?void 0:e.getCarousel())||void 0},getDefaults:function(){return fS},getInstance:function(e){if(e){const t=Bh.get(e);return t&&t.getState()!==No.Destroyed?t:void 0}return Array.from(Bh.values()).reverse().find((t=>{if(t.getState()!==No.Destroyed)return t}))||void 0},getSlide:function(){var e;return((e=ks.getInstance())===null||e===void 0?void 0:e.getSlide())||void 0},show:function(e=[],t={}){return Eze().init(e,t)},unbind:function(e,t,n){if(!gC())return;let r=document.body,s=null,o="[data-fancybox]";e instanceof Element&&(r=e),as(e)&&as(t)?(s=e,o=t):as(t)&&as(n)?(s=t,o=n):as(t)?o=t:as(e)&&(o=e),(function(c,i,f){if(!(c&&c instanceof Element&&f))return;const g=ks.openers.get(c)||new Map,x=g.get(i)||new Map;x&&f&&x.delete(f),x.size&&f||g.delete(i),g.size||(ks.openers.delete(c),c.removeEventListener("click",ks.fromEvent))})(r,s,o)}},Tze=xs(()=>{window.Fancybox=ks}),Mze=xs(()=>{KQ.options.themes.tooltip.distance=10}),th=Jm("ui",{state:()=>({loading:!1,shouldCollapseNav:!1,showSideBar:!1,sideBarComponent:null,sideBarProps:null,useUpgradeBannerTransition:!0,weatherStationSlug:null}),actions:{setLoading(e){this.loading=e},setShouldCollapseNav(e){this.shouldCollapseNav=e},setUiProperties(e={}){Object.entries(e).forEach(([t,n])=>{this[t]=n})}}}),Aze=xs(e=>{const t=th(),n={start(){t.setLoading(!0)},finish(){t.setLoading(!1)}};return e.hook("page:start",()=>{window?.location?.pathname!=="/"&&n.start()}),e.hook("page:finish",()=>{window?.location?.pathname!=="/"&&n.finish()}),{provide:{loading:n}}});var _C={exports:{}},Cze=_C.exports,KG;function Ize(){return KG||(KG=1,(function(e,t){(function(n,r){e.exports=r()})(Cze,(function(){var n,r,s;function o(i,f){if(!n)n=f;else if(!r)r=f;else{var g="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",x={};n(x),s=f(x),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(s.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}}o(["exports"],(function(i){function f(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var g,x={},w={};function A(){if(g)return w;g=1,Object.defineProperty(w,"__esModule",{value:!0}),w.setMatrixArrayType=function(_){w.ARRAY_TYPE=a=_},w.toRadian=function(_){return _*p},w.equals=function(_,m){return Math.abs(_-m)<=h*Math.max(1,Math.abs(_),Math.abs(m))},w.RANDOM=w.ARRAY_TYPE=w.EPSILON=void 0;var h=1e-6;w.EPSILON=h;var a=typeof Float32Array<"u"?Float32Array:Array;w.ARRAY_TYPE=a;var u=Math.random;w.RANDOM=u;var p=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var _=0,m=arguments.length;m--;)_+=arguments[m]*arguments[m];return Math.sqrt(_)}),w}var C,F={};function z(){if(C)return F;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},h(m)}C=1,Object.defineProperty(F,"__esModule",{value:!0}),F.create=function(){var m=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m},F.clone=function(m){var b=new a.ARRAY_TYPE(4);return b[0]=m[0],b[1]=m[1],b[2]=m[2],b[3]=m[3],b},F.copy=function(m,b){return m[0]=b[0],m[1]=b[1],m[2]=b[2],m[3]=b[3],m},F.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m},F.fromValues=function(m,b,M,P){var R=new a.ARRAY_TYPE(4);return R[0]=m,R[1]=b,R[2]=M,R[3]=P,R},F.set=function(m,b,M,P,R){return m[0]=b,m[1]=M,m[2]=P,m[3]=R,m},F.transpose=function(m,b){if(m===b){var M=b[1];m[1]=b[2],m[2]=M}else m[0]=b[0],m[1]=b[2],m[2]=b[1],m[3]=b[3];return m},F.invert=function(m,b){var M=b[0],P=b[1],R=b[2],E=b[3],O=M*E-R*P;return O?(m[0]=E*(O=1/O),m[1]=-P*O,m[2]=-R*O,m[3]=M*O,m):null},F.adjoint=function(m,b){var M=b[0];return m[0]=b[3],m[1]=-b[1],m[2]=-b[2],m[3]=M,m},F.determinant=function(m){return m[0]*m[3]-m[2]*m[1]},F.multiply=p,F.rotate=function(m,b,M){var P=b[0],R=b[1],E=b[2],O=b[3],L=Math.sin(M),D=Math.cos(M);return m[0]=P*D+E*L,m[1]=R*D+O*L,m[2]=P*-L+E*D,m[3]=R*-L+O*D,m},F.scale=function(m,b,M){var P=b[1],R=b[2],E=b[3],O=M[0],L=M[1];return m[0]=b[0]*O,m[1]=P*O,m[2]=R*L,m[3]=E*L,m},F.fromRotation=function(m,b){var M=Math.sin(b),P=Math.cos(b);return m[0]=P,m[1]=M,m[2]=-M,m[3]=P,m},F.fromScaling=function(m,b){return m[0]=b[0],m[1]=0,m[2]=0,m[3]=b[1],m},F.str=function(m){return"mat2("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+")"},F.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3])},F.LDU=function(m,b,M,P){return m[2]=P[2]/P[0],M[0]=P[0],M[1]=P[1],M[3]=P[3]-m[2]*M[1],[m,b,M]},F.add=function(m,b,M){return m[0]=b[0]+M[0],m[1]=b[1]+M[1],m[2]=b[2]+M[2],m[3]=b[3]+M[3],m},F.subtract=_,F.exactEquals=function(m,b){return m[0]===b[0]&&m[1]===b[1]&&m[2]===b[2]&&m[3]===b[3]},F.equals=function(m,b){var M=m[0],P=m[1],R=m[2],E=m[3],O=b[0],L=b[1],D=b[2],k=b[3];return Math.abs(M-O)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(P-L)<=a.EPSILON*Math.max(1,Math.abs(P),Math.abs(L))&&Math.abs(R-D)<=a.EPSILON*Math.max(1,Math.abs(R),Math.abs(D))&&Math.abs(E-k)<=a.EPSILON*Math.max(1,Math.abs(E),Math.abs(k))},F.multiplyScalar=function(m,b,M){return m[0]=b[0]*M,m[1]=b[1]*M,m[2]=b[2]*M,m[3]=b[3]*M,m},F.multiplyScalarAndAdd=function(m,b,M,P){return m[0]=b[0]+M[0]*P,m[1]=b[1]+M[1]*P,m[2]=b[2]+M[2]*P,m[3]=b[3]+M[3]*P,m},F.sub=F.mul=void 0;var a=(function(m,b){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var M=u(void 0);if(M&&M.has(m))return M.get(m);var P={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in m)if(E!=="default"&&Object.prototype.hasOwnProperty.call(m,E)){var O=R?Object.getOwnPropertyDescriptor(m,E):null;O&&(O.get||O.set)?Object.defineProperty(P,E,O):P[E]=m[E]}return P.default=m,M&&M.set(m,P),P})(A());function u(m){if(typeof WeakMap!="function")return null;var b=new WeakMap,M=new WeakMap;return(u=function(P){return P?M:b})(m)}function p(m,b,M){var P=b[0],R=b[1],E=b[2],O=b[3],L=M[0],D=M[1],k=M[2],B=M[3];return m[0]=P*L+E*D,m[1]=R*L+O*D,m[2]=P*k+E*B,m[3]=R*k+O*B,m}function _(m,b,M){return m[0]=b[0]-M[0],m[1]=b[1]-M[1],m[2]=b[2]-M[2],m[3]=b[3]-M[3],m}return F.mul=p,F.sub=_,F}var j,V={};function Y(){if(j)return V;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},h(m)}j=1,Object.defineProperty(V,"__esModule",{value:!0}),V.create=function(){var m=new a.ARRAY_TYPE(6);return a.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[4]=0,m[5]=0),m[0]=1,m[3]=1,m},V.clone=function(m){var b=new a.ARRAY_TYPE(6);return b[0]=m[0],b[1]=m[1],b[2]=m[2],b[3]=m[3],b[4]=m[4],b[5]=m[5],b},V.copy=function(m,b){return m[0]=b[0],m[1]=b[1],m[2]=b[2],m[3]=b[3],m[4]=b[4],m[5]=b[5],m},V.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=0,m[5]=0,m},V.fromValues=function(m,b,M,P,R,E){var O=new a.ARRAY_TYPE(6);return O[0]=m,O[1]=b,O[2]=M,O[3]=P,O[4]=R,O[5]=E,O},V.set=function(m,b,M,P,R,E,O){return m[0]=b,m[1]=M,m[2]=P,m[3]=R,m[4]=E,m[5]=O,m},V.invert=function(m,b){var M=b[0],P=b[1],R=b[2],E=b[3],O=b[4],L=b[5],D=M*E-P*R;return D?(m[0]=E*(D=1/D),m[1]=-P*D,m[2]=-R*D,m[3]=M*D,m[4]=(R*L-E*O)*D,m[5]=(P*O-M*L)*D,m):null},V.determinant=function(m){return m[0]*m[3]-m[1]*m[2]},V.multiply=p,V.rotate=function(m,b,M){var P=b[0],R=b[1],E=b[2],O=b[3],L=b[4],D=b[5],k=Math.sin(M),B=Math.cos(M);return m[0]=P*B+E*k,m[1]=R*B+O*k,m[2]=P*-k+E*B,m[3]=R*-k+O*B,m[4]=L,m[5]=D,m},V.scale=function(m,b,M){var P=b[1],R=b[2],E=b[3],O=b[4],L=b[5],D=M[0],k=M[1];return m[0]=b[0]*D,m[1]=P*D,m[2]=R*k,m[3]=E*k,m[4]=O,m[5]=L,m},V.translate=function(m,b,M){var P=b[0],R=b[1],E=b[2],O=b[3],L=b[4],D=b[5],k=M[0],B=M[1];return m[0]=P,m[1]=R,m[2]=E,m[3]=O,m[4]=P*k+E*B+L,m[5]=R*k+O*B+D,m},V.fromRotation=function(m,b){var M=Math.sin(b),P=Math.cos(b);return m[0]=P,m[1]=M,m[2]=-M,m[3]=P,m[4]=0,m[5]=0,m},V.fromScaling=function(m,b){return m[0]=b[0],m[1]=0,m[2]=0,m[3]=b[1],m[4]=0,m[5]=0,m},V.fromTranslation=function(m,b){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=b[0],m[5]=b[1],m},V.str=function(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"},V.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],1)},V.add=function(m,b,M){return m[0]=b[0]+M[0],m[1]=b[1]+M[1],m[2]=b[2]+M[2],m[3]=b[3]+M[3],m[4]=b[4]+M[4],m[5]=b[5]+M[5],m},V.subtract=_,V.multiplyScalar=function(m,b,M){return m[0]=b[0]*M,m[1]=b[1]*M,m[2]=b[2]*M,m[3]=b[3]*M,m[4]=b[4]*M,m[5]=b[5]*M,m},V.multiplyScalarAndAdd=function(m,b,M,P){return m[0]=b[0]+M[0]*P,m[1]=b[1]+M[1]*P,m[2]=b[2]+M[2]*P,m[3]=b[3]+M[3]*P,m[4]=b[4]+M[4]*P,m[5]=b[5]+M[5]*P,m},V.exactEquals=function(m,b){return m[0]===b[0]&&m[1]===b[1]&&m[2]===b[2]&&m[3]===b[3]&&m[4]===b[4]&&m[5]===b[5]},V.equals=function(m,b){var M=m[0],P=m[1],R=m[2],E=m[3],O=m[4],L=m[5],D=b[0],k=b[1],B=b[2],W=b[3],G=b[4],Q=b[5];return Math.abs(M-D)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(D))&&Math.abs(P-k)<=a.EPSILON*Math.max(1,Math.abs(P),Math.abs(k))&&Math.abs(R-B)<=a.EPSILON*Math.max(1,Math.abs(R),Math.abs(B))&&Math.abs(E-W)<=a.EPSILON*Math.max(1,Math.abs(E),Math.abs(W))&&Math.abs(O-G)<=a.EPSILON*Math.max(1,Math.abs(O),Math.abs(G))&&Math.abs(L-Q)<=a.EPSILON*Math.max(1,Math.abs(L),Math.abs(Q))},V.sub=V.mul=void 0;var a=(function(m,b){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var M=u(void 0);if(M&&M.has(m))return M.get(m);var P={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in m)if(E!=="default"&&Object.prototype.hasOwnProperty.call(m,E)){var O=R?Object.getOwnPropertyDescriptor(m,E):null;O&&(O.get||O.set)?Object.defineProperty(P,E,O):P[E]=m[E]}return P.default=m,M&&M.set(m,P),P})(A());function u(m){if(typeof WeakMap!="function")return null;var b=new WeakMap,M=new WeakMap;return(u=function(P){return P?M:b})(m)}function p(m,b,M){var P=b[0],R=b[1],E=b[2],O=b[3],L=b[4],D=b[5],k=M[0],B=M[1],W=M[2],G=M[3],Q=M[4],K=M[5];return m[0]=P*k+E*B,m[1]=R*k+O*B,m[2]=P*W+E*G,m[3]=R*W+O*G,m[4]=P*Q+E*K+L,m[5]=R*Q+O*K+D,m}function _(m,b,M){return m[0]=b[0]-M[0],m[1]=b[1]-M[1],m[2]=b[2]-M[2],m[3]=b[3]-M[3],m[4]=b[4]-M[4],m[5]=b[5]-M[5],m}return V.mul=p,V.sub=_,V}var te,J={};function ee(){if(te)return J;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},h(m)}te=1,Object.defineProperty(J,"__esModule",{value:!0}),J.create=function(){var m=new a.ARRAY_TYPE(9);return a.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,m},J.fromMat4=function(m,b){return m[0]=b[0],m[1]=b[1],m[2]=b[2],m[3]=b[4],m[4]=b[5],m[5]=b[6],m[6]=b[8],m[7]=b[9],m[8]=b[10],m},J.clone=function(m){var b=new a.ARRAY_TYPE(9);return b[0]=m[0],b[1]=m[1],b[2]=m[2],b[3]=m[3],b[4]=m[4],b[5]=m[5],b[6]=m[6],b[7]=m[7],b[8]=m[8],b},J.copy=function(m,b){return m[0]=b[0],m[1]=b[1],m[2]=b[2],m[3]=b[3],m[4]=b[4],m[5]=b[5],m[6]=b[6],m[7]=b[7],m[8]=b[8],m},J.fromValues=function(m,b,M,P,R,E,O,L,D){var k=new a.ARRAY_TYPE(9);return k[0]=m,k[1]=b,k[2]=M,k[3]=P,k[4]=R,k[5]=E,k[6]=O,k[7]=L,k[8]=D,k},J.set=function(m,b,M,P,R,E,O,L,D,k){return m[0]=b,m[1]=M,m[2]=P,m[3]=R,m[4]=E,m[5]=O,m[6]=L,m[7]=D,m[8]=k,m},J.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},J.transpose=function(m,b){if(m===b){var M=b[1],P=b[2],R=b[5];m[1]=b[3],m[2]=b[6],m[3]=M,m[5]=b[7],m[6]=P,m[7]=R}else m[0]=b[0],m[1]=b[3],m[2]=b[6],m[3]=b[1],m[4]=b[4],m[5]=b[7],m[6]=b[2],m[7]=b[5],m[8]=b[8];return m},J.invert=function(m,b){var M=b[0],P=b[1],R=b[2],E=b[3],O=b[4],L=b[5],D=b[6],k=b[7],B=b[8],W=B*O-L*k,G=-B*E+L*D,Q=k*E-O*D,K=M*W+P*G+R*Q;return K?(m[0]=W*(K=1/K),m[1]=(-B*P+R*k)*K,m[2]=(L*P-R*O)*K,m[3]=G*K,m[4]=(B*M-R*D)*K,m[5]=(-L*M+R*E)*K,m[6]=Q*K,m[7]=(-k*M+P*D)*K,m[8]=(O*M-P*E)*K,m):null},J.adjoint=function(m,b){var M=b[0],P=b[1],R=b[2],E=b[3],O=b[4],L=b[5],D=b[6],k=b[7],B=b[8];return m[0]=O*B-L*k,m[1]=R*k-P*B,m[2]=P*L-R*O,m[3]=L*D-E*B,m[4]=M*B-R*D,m[5]=R*E-M*L,m[6]=E*k-O*D,m[7]=P*D-M*k,m[8]=M*O-P*E,m},J.determinant=function(m){var b=m[3],M=m[4],P=m[5],R=m[6],E=m[7],O=m[8];return m[0]*(O*M-P*E)+m[1]*(-O*b+P*R)+m[2]*(E*b-M*R)},J.multiply=p,J.translate=function(m,b,M){var P=b[0],R=b[1],E=b[2],O=b[3],L=b[4],D=b[5],k=b[6],B=b[7],W=b[8],G=M[0],Q=M[1];return m[0]=P,m[1]=R,m[2]=E,m[3]=O,m[4]=L,m[5]=D,m[6]=G*P+Q*O+k,m[7]=G*R+Q*L+B,m[8]=G*E+Q*D+W,m},J.rotate=function(m,b,M){var P=b[0],R=b[1],E=b[2],O=b[3],L=b[4],D=b[5],k=b[6],B=b[7],W=b[8],G=Math.sin(M),Q=Math.cos(M);return m[0]=Q*P+G*O,m[1]=Q*R+G*L,m[2]=Q*E+G*D,m[3]=Q*O-G*P,m[4]=Q*L-G*R,m[5]=Q*D-G*E,m[6]=k,m[7]=B,m[8]=W,m},J.scale=function(m,b,M){var P=M[0],R=M[1];return m[0]=P*b[0],m[1]=P*b[1],m[2]=P*b[2],m[3]=R*b[3],m[4]=R*b[4],m[5]=R*b[5],m[6]=b[6],m[7]=b[7],m[8]=b[8],m},J.fromTranslation=function(m,b){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=b[0],m[7]=b[1],m[8]=1,m},J.fromRotation=function(m,b){var M=Math.sin(b),P=Math.cos(b);return m[0]=P,m[1]=M,m[2]=0,m[3]=-M,m[4]=P,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},J.fromScaling=function(m,b){return m[0]=b[0],m[1]=0,m[2]=0,m[3]=0,m[4]=b[1],m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},J.fromMat2d=function(m,b){return m[0]=b[0],m[1]=b[1],m[2]=0,m[3]=b[2],m[4]=b[3],m[5]=0,m[6]=b[4],m[7]=b[5],m[8]=1,m},J.fromQuat=function(m,b){var M=b[0],P=b[1],R=b[2],E=b[3],O=M+M,L=P+P,D=R+R,k=M*O,B=P*O,W=P*L,G=R*O,Q=R*L,K=R*D,Z=E*O,re=E*L,ce=E*D;return m[0]=1-W-K,m[3]=B-ce,m[6]=G+re,m[1]=B+ce,m[4]=1-k-K,m[7]=Q-Z,m[2]=G-re,m[5]=Q+Z,m[8]=1-k-W,m},J.normalFromMat4=function(m,b){var M=b[0],P=b[1],R=b[2],E=b[3],O=b[4],L=b[5],D=b[6],k=b[7],B=b[8],W=b[9],G=b[10],Q=b[11],K=b[12],Z=b[13],re=b[14],ce=b[15],fe=M*L-P*O,Pe=M*D-R*O,Me=M*k-E*O,Ae=P*D-R*L,Ze=P*k-E*L,Oe=R*k-E*D,Je=B*Z-W*K,rt=B*re-G*K,et=B*ce-Q*K,dt=W*re-G*Z,ct=W*ce-Q*Z,xt=G*ce-Q*re,pt=fe*xt-Pe*ct+Me*dt+Ae*et-Ze*rt+Oe*Je;return pt?(m[0]=(L*xt-D*ct+k*dt)*(pt=1/pt),m[1]=(D*et-O*xt-k*rt)*pt,m[2]=(O*ct-L*et+k*Je)*pt,m[3]=(R*ct-P*xt-E*dt)*pt,m[4]=(M*xt-R*et+E*rt)*pt,m[5]=(P*et-M*ct-E*Je)*pt,m[6]=(Z*Oe-re*Ze+ce*Ae)*pt,m[7]=(re*Me-K*Oe-ce*Pe)*pt,m[8]=(K*Ze-Z*Me+ce*fe)*pt,m):null},J.projection=function(m,b,M){return m[0]=2/b,m[1]=0,m[2]=0,m[3]=0,m[4]=-2/M,m[5]=0,m[6]=-1,m[7]=1,m[8]=1,m},J.str=function(m){return"mat3("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+")"},J.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8])},J.add=function(m,b,M){return m[0]=b[0]+M[0],m[1]=b[1]+M[1],m[2]=b[2]+M[2],m[3]=b[3]+M[3],m[4]=b[4]+M[4],m[5]=b[5]+M[5],m[6]=b[6]+M[6],m[7]=b[7]+M[7],m[8]=b[8]+M[8],m},J.subtract=_,J.multiplyScalar=function(m,b,M){return m[0]=b[0]*M,m[1]=b[1]*M,m[2]=b[2]*M,m[3]=b[3]*M,m[4]=b[4]*M,m[5]=b[5]*M,m[6]=b[6]*M,m[7]=b[7]*M,m[8]=b[8]*M,m},J.multiplyScalarAndAdd=function(m,b,M,P){return m[0]=b[0]+M[0]*P,m[1]=b[1]+M[1]*P,m[2]=b[2]+M[2]*P,m[3]=b[3]+M[3]*P,m[4]=b[4]+M[4]*P,m[5]=b[5]+M[5]*P,m[6]=b[6]+M[6]*P,m[7]=b[7]+M[7]*P,m[8]=b[8]+M[8]*P,m},J.exactEquals=function(m,b){return m[0]===b[0]&&m[1]===b[1]&&m[2]===b[2]&&m[3]===b[3]&&m[4]===b[4]&&m[5]===b[5]&&m[6]===b[6]&&m[7]===b[7]&&m[8]===b[8]},J.equals=function(m,b){var M=m[0],P=m[1],R=m[2],E=m[3],O=m[4],L=m[5],D=m[6],k=m[7],B=m[8],W=b[0],G=b[1],Q=b[2],K=b[3],Z=b[4],re=b[5],ce=b[6],fe=b[7],Pe=b[8];return Math.abs(M-W)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(W))&&Math.abs(P-G)<=a.EPSILON*Math.max(1,Math.abs(P),Math.abs(G))&&Math.abs(R-Q)<=a.EPSILON*Math.max(1,Math.abs(R),Math.abs(Q))&&Math.abs(E-K)<=a.EPSILON*Math.max(1,Math.abs(E),Math.abs(K))&&Math.abs(O-Z)<=a.EPSILON*Math.max(1,Math.abs(O),Math.abs(Z))&&Math.abs(L-re)<=a.EPSILON*Math.max(1,Math.abs(L),Math.abs(re))&&Math.abs(D-ce)<=a.EPSILON*Math.max(1,Math.abs(D),Math.abs(ce))&&Math.abs(k-fe)<=a.EPSILON*Math.max(1,Math.abs(k),Math.abs(fe))&&Math.abs(B-Pe)<=a.EPSILON*Math.max(1,Math.abs(B),Math.abs(Pe))},J.sub=J.mul=void 0;var a=(function(m,b){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var M=u(void 0);if(M&&M.has(m))return M.get(m);var P={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in m)if(E!=="default"&&Object.prototype.hasOwnProperty.call(m,E)){var O=R?Object.getOwnPropertyDescriptor(m,E):null;O&&(O.get||O.set)?Object.defineProperty(P,E,O):P[E]=m[E]}return P.default=m,M&&M.set(m,P),P})(A());function u(m){if(typeof WeakMap!="function")return null;var b=new WeakMap,M=new WeakMap;return(u=function(P){return P?M:b})(m)}function p(m,b,M){var P=b[0],R=b[1],E=b[2],O=b[3],L=b[4],D=b[5],k=b[6],B=b[7],W=b[8],G=M[0],Q=M[1],K=M[2],Z=M[3],re=M[4],ce=M[5],fe=M[6],Pe=M[7],Me=M[8];return m[0]=G*P+Q*O+K*k,m[1]=G*R+Q*L+K*B,m[2]=G*E+Q*D+K*W,m[3]=Z*P+re*O+ce*k,m[4]=Z*R+re*L+ce*B,m[5]=Z*E+re*D+ce*W,m[6]=fe*P+Pe*O+Me*k,m[7]=fe*R+Pe*L+Me*B,m[8]=fe*E+Pe*D+Me*W,m}function _(m,b,M){return m[0]=b[0]-M[0],m[1]=b[1]-M[1],m[2]=b[2]-M[2],m[3]=b[3]-M[3],m[4]=b[4]-M[4],m[5]=b[5]-M[5],m[6]=b[6]-M[6],m[7]=b[7]-M[7],m[8]=b[8]-M[8],m}return J.mul=p,J.sub=_,J}var le,oe={};function ve(){if(le)return oe;function h(E){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},h(E)}le=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.create=function(){var E=new a.ARRAY_TYPE(16);return a.ARRAY_TYPE!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E},oe.clone=function(E){var O=new a.ARRAY_TYPE(16);return O[0]=E[0],O[1]=E[1],O[2]=E[2],O[3]=E[3],O[4]=E[4],O[5]=E[5],O[6]=E[6],O[7]=E[7],O[8]=E[8],O[9]=E[9],O[10]=E[10],O[11]=E[11],O[12]=E[12],O[13]=E[13],O[14]=E[14],O[15]=E[15],O},oe.copy=function(E,O){return E[0]=O[0],E[1]=O[1],E[2]=O[2],E[3]=O[3],E[4]=O[4],E[5]=O[5],E[6]=O[6],E[7]=O[7],E[8]=O[8],E[9]=O[9],E[10]=O[10],E[11]=O[11],E[12]=O[12],E[13]=O[13],E[14]=O[14],E[15]=O[15],E},oe.fromValues=function(E,O,L,D,k,B,W,G,Q,K,Z,re,ce,fe,Pe,Me){var Ae=new a.ARRAY_TYPE(16);return Ae[0]=E,Ae[1]=O,Ae[2]=L,Ae[3]=D,Ae[4]=k,Ae[5]=B,Ae[6]=W,Ae[7]=G,Ae[8]=Q,Ae[9]=K,Ae[10]=Z,Ae[11]=re,Ae[12]=ce,Ae[13]=fe,Ae[14]=Pe,Ae[15]=Me,Ae},oe.set=function(E,O,L,D,k,B,W,G,Q,K,Z,re,ce,fe,Pe,Me,Ae){return E[0]=O,E[1]=L,E[2]=D,E[3]=k,E[4]=B,E[5]=W,E[6]=G,E[7]=Q,E[8]=K,E[9]=Z,E[10]=re,E[11]=ce,E[12]=fe,E[13]=Pe,E[14]=Me,E[15]=Ae,E},oe.identity=p,oe.transpose=function(E,O){if(E===O){var L=O[1],D=O[2],k=O[3],B=O[6],W=O[7],G=O[11];E[1]=O[4],E[2]=O[8],E[3]=O[12],E[4]=L,E[6]=O[9],E[7]=O[13],E[8]=D,E[9]=B,E[11]=O[14],E[12]=k,E[13]=W,E[14]=G}else E[0]=O[0],E[1]=O[4],E[2]=O[8],E[3]=O[12],E[4]=O[1],E[5]=O[5],E[6]=O[9],E[7]=O[13],E[8]=O[2],E[9]=O[6],E[10]=O[10],E[11]=O[14],E[12]=O[3],E[13]=O[7],E[14]=O[11],E[15]=O[15];return E},oe.invert=function(E,O){var L=O[0],D=O[1],k=O[2],B=O[3],W=O[4],G=O[5],Q=O[6],K=O[7],Z=O[8],re=O[9],ce=O[10],fe=O[11],Pe=O[12],Me=O[13],Ae=O[14],Ze=O[15],Oe=L*G-D*W,Je=L*Q-k*W,rt=L*K-B*W,et=D*Q-k*G,dt=D*K-B*G,ct=k*K-B*Q,xt=Z*Me-re*Pe,pt=Z*Ae-ce*Pe,St=Z*Ze-fe*Pe,Zt=re*Ae-ce*Me,Yt=re*Ze-fe*Me,Cn=ce*Ze-fe*Ae,rn=Oe*Cn-Je*Yt+rt*Zt+et*St-dt*pt+ct*xt;return rn?(E[0]=(G*Cn-Q*Yt+K*Zt)*(rn=1/rn),E[1]=(k*Yt-D*Cn-B*Zt)*rn,E[2]=(Me*ct-Ae*dt+Ze*et)*rn,E[3]=(ce*dt-re*ct-fe*et)*rn,E[4]=(Q*St-W*Cn-K*pt)*rn,E[5]=(L*Cn-k*St+B*pt)*rn,E[6]=(Ae*rt-Pe*ct-Ze*Je)*rn,E[7]=(Z*ct-ce*rt+fe*Je)*rn,E[8]=(W*Yt-G*St+K*xt)*rn,E[9]=(D*St-L*Yt-B*xt)*rn,E[10]=(Pe*dt-Me*rt+Ze*Oe)*rn,E[11]=(re*rt-Z*dt-fe*Oe)*rn,E[12]=(G*pt-W*Zt-Q*xt)*rn,E[13]=(L*Zt-D*pt+k*xt)*rn,E[14]=(Me*Je-Pe*et-Ae*Oe)*rn,E[15]=(Z*et-re*Je+ce*Oe)*rn,E):null},oe.adjoint=function(E,O){var L=O[0],D=O[1],k=O[2],B=O[3],W=O[4],G=O[5],Q=O[6],K=O[7],Z=O[8],re=O[9],ce=O[10],fe=O[11],Pe=O[12],Me=O[13],Ae=O[14],Ze=O[15];return E[0]=G*(ce*Ze-fe*Ae)-re*(Q*Ze-K*Ae)+Me*(Q*fe-K*ce),E[1]=-(D*(ce*Ze-fe*Ae)-re*(k*Ze-B*Ae)+Me*(k*fe-B*ce)),E[2]=D*(Q*Ze-K*Ae)-G*(k*Ze-B*Ae)+Me*(k*K-B*Q),E[3]=-(D*(Q*fe-K*ce)-G*(k*fe-B*ce)+re*(k*K-B*Q)),E[4]=-(W*(ce*Ze-fe*Ae)-Z*(Q*Ze-K*Ae)+Pe*(Q*fe-K*ce)),E[5]=L*(ce*Ze-fe*Ae)-Z*(k*Ze-B*Ae)+Pe*(k*fe-B*ce),E[6]=-(L*(Q*Ze-K*Ae)-W*(k*Ze-B*Ae)+Pe*(k*K-B*Q)),E[7]=L*(Q*fe-K*ce)-W*(k*fe-B*ce)+Z*(k*K-B*Q),E[8]=W*(re*Ze-fe*Me)-Z*(G*Ze-K*Me)+Pe*(G*fe-K*re),E[9]=-(L*(re*Ze-fe*Me)-Z*(D*Ze-B*Me)+Pe*(D*fe-B*re)),E[10]=L*(G*Ze-K*Me)-W*(D*Ze-B*Me)+Pe*(D*K-B*G),E[11]=-(L*(G*fe-K*re)-W*(D*fe-B*re)+Z*(D*K-B*G)),E[12]=-(W*(re*Ae-ce*Me)-Z*(G*Ae-Q*Me)+Pe*(G*ce-Q*re)),E[13]=L*(re*Ae-ce*Me)-Z*(D*Ae-k*Me)+Pe*(D*ce-k*re),E[14]=-(L*(G*Ae-Q*Me)-W*(D*Ae-k*Me)+Pe*(D*Q-k*G)),E[15]=L*(G*ce-Q*re)-W*(D*ce-k*re)+Z*(D*Q-k*G),E},oe.determinant=function(E){var O=E[0],L=E[1],D=E[2],k=E[3],B=E[4],W=E[5],G=E[6],Q=E[7],K=E[8],Z=E[9],re=E[10],ce=E[11],fe=E[12],Pe=E[13],Me=E[14],Ae=E[15];return(O*W-L*B)*(re*Ae-ce*Me)-(O*G-D*B)*(Z*Ae-ce*Pe)+(O*Q-k*B)*(Z*Me-re*Pe)+(L*G-D*W)*(K*Ae-ce*fe)-(L*Q-k*W)*(K*Me-re*fe)+(D*Q-k*G)*(K*Pe-Z*fe)},oe.multiply=_,oe.translate=function(E,O,L){var D,k,B,W,G,Q,K,Z,re,ce,fe,Pe,Me=L[0],Ae=L[1],Ze=L[2];return O===E?(E[12]=O[0]*Me+O[4]*Ae+O[8]*Ze+O[12],E[13]=O[1]*Me+O[5]*Ae+O[9]*Ze+O[13],E[14]=O[2]*Me+O[6]*Ae+O[10]*Ze+O[14],E[15]=O[3]*Me+O[7]*Ae+O[11]*Ze+O[15]):(k=O[1],B=O[2],W=O[3],G=O[4],Q=O[5],K=O[6],Z=O[7],re=O[8],ce=O[9],fe=O[10],Pe=O[11],E[0]=D=O[0],E[1]=k,E[2]=B,E[3]=W,E[4]=G,E[5]=Q,E[6]=K,E[7]=Z,E[8]=re,E[9]=ce,E[10]=fe,E[11]=Pe,E[12]=D*Me+G*Ae+re*Ze+O[12],E[13]=k*Me+Q*Ae+ce*Ze+O[13],E[14]=B*Me+K*Ae+fe*Ze+O[14],E[15]=W*Me+Z*Ae+Pe*Ze+O[15]),E},oe.scale=function(E,O,L){var D=L[0],k=L[1],B=L[2];return E[0]=O[0]*D,E[1]=O[1]*D,E[2]=O[2]*D,E[3]=O[3]*D,E[4]=O[4]*k,E[5]=O[5]*k,E[6]=O[6]*k,E[7]=O[7]*k,E[8]=O[8]*B,E[9]=O[9]*B,E[10]=O[10]*B,E[11]=O[11]*B,E[12]=O[12],E[13]=O[13],E[14]=O[14],E[15]=O[15],E},oe.rotate=function(E,O,L,D){var k,B,W,G,Q,K,Z,re,ce,fe,Pe,Me,Ae,Ze,Oe,Je,rt,et,dt,ct,xt,pt,St,Zt,Yt=D[0],Cn=D[1],rn=D[2],pn=Math.hypot(Yt,Cn,rn);return pn<a.EPSILON?null:(Yt*=pn=1/pn,Cn*=pn,rn*=pn,k=Math.sin(L),B=Math.cos(L),Q=O[1],K=O[2],Z=O[3],ce=O[5],fe=O[6],Pe=O[7],Ae=O[9],Ze=O[10],Oe=O[11],Je=Yt*Yt*(W=1-B)+B,dt=Yt*Cn*W-rn*k,ct=Cn*Cn*W+B,xt=rn*Cn*W+Yt*k,pt=Yt*rn*W+Cn*k,St=Cn*rn*W-Yt*k,Zt=rn*rn*W+B,E[0]=(G=O[0])*Je+(re=O[4])*(rt=Cn*Yt*W+rn*k)+(Me=O[8])*(et=rn*Yt*W-Cn*k),E[1]=Q*Je+ce*rt+Ae*et,E[2]=K*Je+fe*rt+Ze*et,E[3]=Z*Je+Pe*rt+Oe*et,E[4]=G*dt+re*ct+Me*xt,E[5]=Q*dt+ce*ct+Ae*xt,E[6]=K*dt+fe*ct+Ze*xt,E[7]=Z*dt+Pe*ct+Oe*xt,E[8]=G*pt+re*St+Me*Zt,E[9]=Q*pt+ce*St+Ae*Zt,E[10]=K*pt+fe*St+Ze*Zt,E[11]=Z*pt+Pe*St+Oe*Zt,O!==E&&(E[12]=O[12],E[13]=O[13],E[14]=O[14],E[15]=O[15]),E)},oe.rotateX=function(E,O,L){var D=Math.sin(L),k=Math.cos(L),B=O[4],W=O[5],G=O[6],Q=O[7],K=O[8],Z=O[9],re=O[10],ce=O[11];return O!==E&&(E[0]=O[0],E[1]=O[1],E[2]=O[2],E[3]=O[3],E[12]=O[12],E[13]=O[13],E[14]=O[14],E[15]=O[15]),E[4]=B*k+K*D,E[5]=W*k+Z*D,E[6]=G*k+re*D,E[7]=Q*k+ce*D,E[8]=K*k-B*D,E[9]=Z*k-W*D,E[10]=re*k-G*D,E[11]=ce*k-Q*D,E},oe.rotateY=function(E,O,L){var D=Math.sin(L),k=Math.cos(L),B=O[0],W=O[1],G=O[2],Q=O[3],K=O[8],Z=O[9],re=O[10],ce=O[11];return O!==E&&(E[4]=O[4],E[5]=O[5],E[6]=O[6],E[7]=O[7],E[12]=O[12],E[13]=O[13],E[14]=O[14],E[15]=O[15]),E[0]=B*k-K*D,E[1]=W*k-Z*D,E[2]=G*k-re*D,E[3]=Q*k-ce*D,E[8]=B*D+K*k,E[9]=W*D+Z*k,E[10]=G*D+re*k,E[11]=Q*D+ce*k,E},oe.rotateZ=function(E,O,L){var D=Math.sin(L),k=Math.cos(L),B=O[0],W=O[1],G=O[2],Q=O[3],K=O[4],Z=O[5],re=O[6],ce=O[7];return O!==E&&(E[8]=O[8],E[9]=O[9],E[10]=O[10],E[11]=O[11],E[12]=O[12],E[13]=O[13],E[14]=O[14],E[15]=O[15]),E[0]=B*k+K*D,E[1]=W*k+Z*D,E[2]=G*k+re*D,E[3]=Q*k+ce*D,E[4]=K*k-B*D,E[5]=Z*k-W*D,E[6]=re*k-G*D,E[7]=ce*k-Q*D,E},oe.fromTranslation=function(E,O){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=O[0],E[13]=O[1],E[14]=O[2],E[15]=1,E},oe.fromScaling=function(E,O){return E[0]=O[0],E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=O[1],E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=O[2],E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E},oe.fromRotation=function(E,O,L){var D,k,B,W=L[0],G=L[1],Q=L[2],K=Math.hypot(W,G,Q);return K<a.EPSILON?null:(W*=K=1/K,G*=K,Q*=K,D=Math.sin(O),k=Math.cos(O),E[0]=W*W*(B=1-k)+k,E[1]=G*W*B+Q*D,E[2]=Q*W*B-G*D,E[3]=0,E[4]=W*G*B-Q*D,E[5]=G*G*B+k,E[6]=Q*G*B+W*D,E[7]=0,E[8]=W*Q*B+G*D,E[9]=G*Q*B-W*D,E[10]=Q*Q*B+k,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E)},oe.fromXRotation=function(E,O){var L=Math.sin(O),D=Math.cos(O);return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=D,E[6]=L,E[7]=0,E[8]=0,E[9]=-L,E[10]=D,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E},oe.fromYRotation=function(E,O){var L=Math.sin(O),D=Math.cos(O);return E[0]=D,E[1]=0,E[2]=-L,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=L,E[9]=0,E[10]=D,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E},oe.fromZRotation=function(E,O){var L=Math.sin(O),D=Math.cos(O);return E[0]=D,E[1]=L,E[2]=0,E[3]=0,E[4]=-L,E[5]=D,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E},oe.fromRotationTranslation=m,oe.fromQuat2=function(E,O){var L=new a.ARRAY_TYPE(3),D=-O[0],k=-O[1],B=-O[2],W=O[3],G=O[4],Q=O[5],K=O[6],Z=O[7],re=D*D+k*k+B*B+W*W;return re>0?(L[0]=2*(G*W+Z*D+Q*B-K*k)/re,L[1]=2*(Q*W+Z*k+K*D-G*B)/re,L[2]=2*(K*W+Z*B+G*k-Q*D)/re):(L[0]=2*(G*W+Z*D+Q*B-K*k),L[1]=2*(Q*W+Z*k+K*D-G*B),L[2]=2*(K*W+Z*B+G*k-Q*D)),m(E,O,L),E},oe.getTranslation=function(E,O){return E[0]=O[12],E[1]=O[13],E[2]=O[14],E},oe.getScaling=b,oe.getRotation=function(E,O){var L=new a.ARRAY_TYPE(3);b(L,O);var D=1/L[0],k=1/L[1],B=1/L[2],W=O[0]*D,G=O[1]*k,Q=O[2]*B,K=O[4]*D,Z=O[5]*k,re=O[6]*B,ce=O[8]*D,fe=O[9]*k,Pe=O[10]*B,Me=W+Z+Pe,Ae=0;return Me>0?(Ae=2*Math.sqrt(Me+1),E[3]=.25*Ae,E[0]=(re-fe)/Ae,E[1]=(ce-Q)/Ae,E[2]=(G-K)/Ae):W>Z&&W>Pe?(Ae=2*Math.sqrt(1+W-Z-Pe),E[3]=(re-fe)/Ae,E[0]=.25*Ae,E[1]=(G+K)/Ae,E[2]=(ce+Q)/Ae):Z>Pe?(Ae=2*Math.sqrt(1+Z-W-Pe),E[3]=(ce-Q)/Ae,E[0]=(G+K)/Ae,E[1]=.25*Ae,E[2]=(re+fe)/Ae):(Ae=2*Math.sqrt(1+Pe-W-Z),E[3]=(G-K)/Ae,E[0]=(ce+Q)/Ae,E[1]=(re+fe)/Ae,E[2]=.25*Ae),E},oe.fromRotationTranslationScale=function(E,O,L,D){var k=O[0],B=O[1],W=O[2],G=O[3],Q=k+k,K=B+B,Z=W+W,re=k*Q,ce=k*K,fe=k*Z,Pe=B*K,Me=B*Z,Ae=W*Z,Ze=G*Q,Oe=G*K,Je=G*Z,rt=D[0],et=D[1],dt=D[2];return E[0]=(1-(Pe+Ae))*rt,E[1]=(ce+Je)*rt,E[2]=(fe-Oe)*rt,E[3]=0,E[4]=(ce-Je)*et,E[5]=(1-(re+Ae))*et,E[6]=(Me+Ze)*et,E[7]=0,E[8]=(fe+Oe)*dt,E[9]=(Me-Ze)*dt,E[10]=(1-(re+Pe))*dt,E[11]=0,E[12]=L[0],E[13]=L[1],E[14]=L[2],E[15]=1,E},oe.fromRotationTranslationScaleOrigin=function(E,O,L,D,k){var B=O[0],W=O[1],G=O[2],Q=O[3],K=B+B,Z=W+W,re=G+G,ce=B*K,fe=B*Z,Pe=B*re,Me=W*Z,Ae=W*re,Ze=G*re,Oe=Q*K,Je=Q*Z,rt=Q*re,et=D[0],dt=D[1],ct=D[2],xt=k[0],pt=k[1],St=k[2],Zt=(1-(Me+Ze))*et,Yt=(fe+rt)*et,Cn=(Pe-Je)*et,rn=(fe-rt)*dt,pn=(1-(ce+Ze))*dt,en=(Ae+Oe)*dt,$n=(Pe+Je)*ct,Sn=(Ae-Oe)*ct,Dn=(1-(ce+Me))*ct;return E[0]=Zt,E[1]=Yt,E[2]=Cn,E[3]=0,E[4]=rn,E[5]=pn,E[6]=en,E[7]=0,E[8]=$n,E[9]=Sn,E[10]=Dn,E[11]=0,E[12]=L[0]+xt-(Zt*xt+rn*pt+$n*St),E[13]=L[1]+pt-(Yt*xt+pn*pt+Sn*St),E[14]=L[2]+St-(Cn*xt+en*pt+Dn*St),E[15]=1,E},oe.fromQuat=function(E,O){var L=O[0],D=O[1],k=O[2],B=O[3],W=L+L,G=D+D,Q=k+k,K=L*W,Z=D*W,re=D*G,ce=k*W,fe=k*G,Pe=k*Q,Me=B*W,Ae=B*G,Ze=B*Q;return E[0]=1-re-Pe,E[1]=Z+Ze,E[2]=ce-Ae,E[3]=0,E[4]=Z-Ze,E[5]=1-K-Pe,E[6]=fe+Me,E[7]=0,E[8]=ce+Ae,E[9]=fe-Me,E[10]=1-K-re,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E},oe.frustum=function(E,O,L,D,k,B,W){var G=1/(L-O),Q=1/(k-D),K=1/(B-W);return E[0]=2*B*G,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=2*B*Q,E[6]=0,E[7]=0,E[8]=(L+O)*G,E[9]=(k+D)*Q,E[10]=(W+B)*K,E[11]=-1,E[12]=0,E[13]=0,E[14]=W*B*2*K,E[15]=0,E},oe.perspectiveNO=M,oe.perspectiveZO=function(E,O,L,D,k){var B,W=1/Math.tan(O/2);return E[0]=W/L,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=W,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,k!=null&&k!==1/0?(E[10]=k*(B=1/(D-k)),E[14]=k*D*B):(E[10]=-1,E[14]=-D),E},oe.perspectiveFromFieldOfView=function(E,O,L,D){var k=Math.tan(O.upDegrees*Math.PI/180),B=Math.tan(O.downDegrees*Math.PI/180),W=Math.tan(O.leftDegrees*Math.PI/180),G=Math.tan(O.rightDegrees*Math.PI/180),Q=2/(W+G),K=2/(k+B);return E[0]=Q,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=K,E[6]=0,E[7]=0,E[8]=-(W-G)*Q*.5,E[9]=(k-B)*K*.5,E[10]=D/(L-D),E[11]=-1,E[12]=0,E[13]=0,E[14]=D*L/(L-D),E[15]=0,E},oe.orthoNO=P,oe.orthoZO=function(E,O,L,D,k,B,W){var G=1/(O-L),Q=1/(D-k),K=1/(B-W);return E[0]=-2*G,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*Q,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=K,E[11]=0,E[12]=(O+L)*G,E[13]=(k+D)*Q,E[14]=B*K,E[15]=1,E},oe.lookAt=function(E,O,L,D){var k,B,W,G,Q,K,Z,re,ce,fe,Pe=O[0],Me=O[1],Ae=O[2],Ze=D[0],Oe=D[1],Je=D[2],rt=L[0],et=L[1],dt=L[2];return Math.abs(Pe-rt)<a.EPSILON&&Math.abs(Me-et)<a.EPSILON&&Math.abs(Ae-dt)<a.EPSILON?p(E):(Z=Pe-rt,re=Me-et,ce=Ae-dt,k=Oe*(ce*=fe=1/Math.hypot(Z,re,ce))-Je*(re*=fe),B=Je*(Z*=fe)-Ze*ce,W=Ze*re-Oe*Z,(fe=Math.hypot(k,B,W))?(k*=fe=1/fe,B*=fe,W*=fe):(k=0,B=0,W=0),G=re*W-ce*B,Q=ce*k-Z*W,K=Z*B-re*k,(fe=Math.hypot(G,Q,K))?(G*=fe=1/fe,Q*=fe,K*=fe):(G=0,Q=0,K=0),E[0]=k,E[1]=G,E[2]=Z,E[3]=0,E[4]=B,E[5]=Q,E[6]=re,E[7]=0,E[8]=W,E[9]=K,E[10]=ce,E[11]=0,E[12]=-(k*Pe+B*Me+W*Ae),E[13]=-(G*Pe+Q*Me+K*Ae),E[14]=-(Z*Pe+re*Me+ce*Ae),E[15]=1,E)},oe.targetTo=function(E,O,L,D){var k=O[0],B=O[1],W=O[2],G=D[0],Q=D[1],K=D[2],Z=k-L[0],re=B-L[1],ce=W-L[2],fe=Z*Z+re*re+ce*ce;fe>0&&(Z*=fe=1/Math.sqrt(fe),re*=fe,ce*=fe);var Pe=Q*ce-K*re,Me=K*Z-G*ce,Ae=G*re-Q*Z;return(fe=Pe*Pe+Me*Me+Ae*Ae)>0&&(Pe*=fe=1/Math.sqrt(fe),Me*=fe,Ae*=fe),E[0]=Pe,E[1]=Me,E[2]=Ae,E[3]=0,E[4]=re*Ae-ce*Me,E[5]=ce*Pe-Z*Ae,E[6]=Z*Me-re*Pe,E[7]=0,E[8]=Z,E[9]=re,E[10]=ce,E[11]=0,E[12]=k,E[13]=B,E[14]=W,E[15]=1,E},oe.str=function(E){return"mat4("+E[0]+", "+E[1]+", "+E[2]+", "+E[3]+", "+E[4]+", "+E[5]+", "+E[6]+", "+E[7]+", "+E[8]+", "+E[9]+", "+E[10]+", "+E[11]+", "+E[12]+", "+E[13]+", "+E[14]+", "+E[15]+")"},oe.frob=function(E){return Math.hypot(E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],E[8],E[9],E[10],E[11],E[12],E[13],E[14],E[15])},oe.add=function(E,O,L){return E[0]=O[0]+L[0],E[1]=O[1]+L[1],E[2]=O[2]+L[2],E[3]=O[3]+L[3],E[4]=O[4]+L[4],E[5]=O[5]+L[5],E[6]=O[6]+L[6],E[7]=O[7]+L[7],E[8]=O[8]+L[8],E[9]=O[9]+L[9],E[10]=O[10]+L[10],E[11]=O[11]+L[11],E[12]=O[12]+L[12],E[13]=O[13]+L[13],E[14]=O[14]+L[14],E[15]=O[15]+L[15],E},oe.subtract=R,oe.multiplyScalar=function(E,O,L){return E[0]=O[0]*L,E[1]=O[1]*L,E[2]=O[2]*L,E[3]=O[3]*L,E[4]=O[4]*L,E[5]=O[5]*L,E[6]=O[6]*L,E[7]=O[7]*L,E[8]=O[8]*L,E[9]=O[9]*L,E[10]=O[10]*L,E[11]=O[11]*L,E[12]=O[12]*L,E[13]=O[13]*L,E[14]=O[14]*L,E[15]=O[15]*L,E},oe.multiplyScalarAndAdd=function(E,O,L,D){return E[0]=O[0]+L[0]*D,E[1]=O[1]+L[1]*D,E[2]=O[2]+L[2]*D,E[3]=O[3]+L[3]*D,E[4]=O[4]+L[4]*D,E[5]=O[5]+L[5]*D,E[6]=O[6]+L[6]*D,E[7]=O[7]+L[7]*D,E[8]=O[8]+L[8]*D,E[9]=O[9]+L[9]*D,E[10]=O[10]+L[10]*D,E[11]=O[11]+L[11]*D,E[12]=O[12]+L[12]*D,E[13]=O[13]+L[13]*D,E[14]=O[14]+L[14]*D,E[15]=O[15]+L[15]*D,E},oe.exactEquals=function(E,O){return E[0]===O[0]&&E[1]===O[1]&&E[2]===O[2]&&E[3]===O[3]&&E[4]===O[4]&&E[5]===O[5]&&E[6]===O[6]&&E[7]===O[7]&&E[8]===O[8]&&E[9]===O[9]&&E[10]===O[10]&&E[11]===O[11]&&E[12]===O[12]&&E[13]===O[13]&&E[14]===O[14]&&E[15]===O[15]},oe.equals=function(E,O){var L=E[0],D=E[1],k=E[2],B=E[3],W=E[4],G=E[5],Q=E[6],K=E[7],Z=E[8],re=E[9],ce=E[10],fe=E[11],Pe=E[12],Me=E[13],Ae=E[14],Ze=E[15],Oe=O[0],Je=O[1],rt=O[2],et=O[3],dt=O[4],ct=O[5],xt=O[6],pt=O[7],St=O[8],Zt=O[9],Yt=O[10],Cn=O[11],rn=O[12],pn=O[13],en=O[14],$n=O[15];return Math.abs(L-Oe)<=a.EPSILON*Math.max(1,Math.abs(L),Math.abs(Oe))&&Math.abs(D-Je)<=a.EPSILON*Math.max(1,Math.abs(D),Math.abs(Je))&&Math.abs(k-rt)<=a.EPSILON*Math.max(1,Math.abs(k),Math.abs(rt))&&Math.abs(B-et)<=a.EPSILON*Math.max(1,Math.abs(B),Math.abs(et))&&Math.abs(W-dt)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(dt))&&Math.abs(G-ct)<=a.EPSILON*Math.max(1,Math.abs(G),Math.abs(ct))&&Math.abs(Q-xt)<=a.EPSILON*Math.max(1,Math.abs(Q),Math.abs(xt))&&Math.abs(K-pt)<=a.EPSILON*Math.max(1,Math.abs(K),Math.abs(pt))&&Math.abs(Z-St)<=a.EPSILON*Math.max(1,Math.abs(Z),Math.abs(St))&&Math.abs(re-Zt)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs(Zt))&&Math.abs(ce-Yt)<=a.EPSILON*Math.max(1,Math.abs(ce),Math.abs(Yt))&&Math.abs(fe-Cn)<=a.EPSILON*Math.max(1,Math.abs(fe),Math.abs(Cn))&&Math.abs(Pe-rn)<=a.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(rn))&&Math.abs(Me-pn)<=a.EPSILON*Math.max(1,Math.abs(Me),Math.abs(pn))&&Math.abs(Ae-en)<=a.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(en))&&Math.abs(Ze-$n)<=a.EPSILON*Math.max(1,Math.abs(Ze),Math.abs($n))},oe.sub=oe.mul=oe.ortho=oe.perspective=void 0;var a=(function(E,O){if(E&&E.__esModule)return E;if(E===null||h(E)!=="object"&&typeof E!="function")return{default:E};var L=u(void 0);if(L&&L.has(E))return L.get(E);var D={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in E)if(B!=="default"&&Object.prototype.hasOwnProperty.call(E,B)){var W=k?Object.getOwnPropertyDescriptor(E,B):null;W&&(W.get||W.set)?Object.defineProperty(D,B,W):D[B]=E[B]}return D.default=E,L&&L.set(E,D),D})(A());function u(E){if(typeof WeakMap!="function")return null;var O=new WeakMap,L=new WeakMap;return(u=function(D){return D?L:O})(E)}function p(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}function _(E,O,L){var D=O[0],k=O[1],B=O[2],W=O[3],G=O[4],Q=O[5],K=O[6],Z=O[7],re=O[8],ce=O[9],fe=O[10],Pe=O[11],Me=O[12],Ae=O[13],Ze=O[14],Oe=O[15],Je=L[0],rt=L[1],et=L[2],dt=L[3];return E[0]=Je*D+rt*G+et*re+dt*Me,E[1]=Je*k+rt*Q+et*ce+dt*Ae,E[2]=Je*B+rt*K+et*fe+dt*Ze,E[3]=Je*W+rt*Z+et*Pe+dt*Oe,E[4]=(Je=L[4])*D+(rt=L[5])*G+(et=L[6])*re+(dt=L[7])*Me,E[5]=Je*k+rt*Q+et*ce+dt*Ae,E[6]=Je*B+rt*K+et*fe+dt*Ze,E[7]=Je*W+rt*Z+et*Pe+dt*Oe,E[8]=(Je=L[8])*D+(rt=L[9])*G+(et=L[10])*re+(dt=L[11])*Me,E[9]=Je*k+rt*Q+et*ce+dt*Ae,E[10]=Je*B+rt*K+et*fe+dt*Ze,E[11]=Je*W+rt*Z+et*Pe+dt*Oe,E[12]=(Je=L[12])*D+(rt=L[13])*G+(et=L[14])*re+(dt=L[15])*Me,E[13]=Je*k+rt*Q+et*ce+dt*Ae,E[14]=Je*B+rt*K+et*fe+dt*Ze,E[15]=Je*W+rt*Z+et*Pe+dt*Oe,E}function m(E,O,L){var D=O[0],k=O[1],B=O[2],W=O[3],G=D+D,Q=k+k,K=B+B,Z=D*G,re=D*Q,ce=D*K,fe=k*Q,Pe=k*K,Me=B*K,Ae=W*G,Ze=W*Q,Oe=W*K;return E[0]=1-(fe+Me),E[1]=re+Oe,E[2]=ce-Ze,E[3]=0,E[4]=re-Oe,E[5]=1-(Z+Me),E[6]=Pe+Ae,E[7]=0,E[8]=ce+Ze,E[9]=Pe-Ae,E[10]=1-(Z+fe),E[11]=0,E[12]=L[0],E[13]=L[1],E[14]=L[2],E[15]=1,E}function b(E,O){var L=O[4],D=O[5],k=O[6],B=O[8],W=O[9],G=O[10];return E[0]=Math.hypot(O[0],O[1],O[2]),E[1]=Math.hypot(L,D,k),E[2]=Math.hypot(B,W,G),E}function M(E,O,L,D,k){var B,W=1/Math.tan(O/2);return E[0]=W/L,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=W,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,k!=null&&k!==1/0?(E[10]=(k+D)*(B=1/(D-k)),E[14]=2*k*D*B):(E[10]=-1,E[14]=-2*D),E}function P(E,O,L,D,k,B,W){var G=1/(O-L),Q=1/(D-k),K=1/(B-W);return E[0]=-2*G,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*Q,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*K,E[11]=0,E[12]=(O+L)*G,E[13]=(k+D)*Q,E[14]=(W+B)*K,E[15]=1,E}function R(E,O,L){return E[0]=O[0]-L[0],E[1]=O[1]-L[1],E[2]=O[2]-L[2],E[3]=O[3]-L[3],E[4]=O[4]-L[4],E[5]=O[5]-L[5],E[6]=O[6]-L[6],E[7]=O[7]-L[7],E[8]=O[8]-L[8],E[9]=O[9]-L[9],E[10]=O[10]-L[10],E[11]=O[11]-L[11],E[12]=O[12]-L[12],E[13]=O[13]-L[13],E[14]=O[14]-L[14],E[15]=O[15]-L[15],E}return oe.perspective=M,oe.ortho=P,oe.mul=_,oe.sub=R,oe}var se,ie={},pe={};function be(){if(se)return pe;function h(k){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},h(k)}se=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.create=p,pe.clone=function(k){var B=new a.ARRAY_TYPE(3);return B[0]=k[0],B[1]=k[1],B[2]=k[2],B},pe.length=_,pe.fromValues=function(k,B,W){var G=new a.ARRAY_TYPE(3);return G[0]=k,G[1]=B,G[2]=W,G},pe.copy=function(k,B){return k[0]=B[0],k[1]=B[1],k[2]=B[2],k},pe.set=function(k,B,W,G){return k[0]=B,k[1]=W,k[2]=G,k},pe.add=function(k,B,W){return k[0]=B[0]+W[0],k[1]=B[1]+W[1],k[2]=B[2]+W[2],k},pe.subtract=m,pe.multiply=b,pe.divide=M,pe.ceil=function(k,B){return k[0]=Math.ceil(B[0]),k[1]=Math.ceil(B[1]),k[2]=Math.ceil(B[2]),k},pe.floor=function(k,B){return k[0]=Math.floor(B[0]),k[1]=Math.floor(B[1]),k[2]=Math.floor(B[2]),k},pe.min=function(k,B,W){return k[0]=Math.min(B[0],W[0]),k[1]=Math.min(B[1],W[1]),k[2]=Math.min(B[2],W[2]),k},pe.max=function(k,B,W){return k[0]=Math.max(B[0],W[0]),k[1]=Math.max(B[1],W[1]),k[2]=Math.max(B[2],W[2]),k},pe.round=function(k,B){return k[0]=Math.round(B[0]),k[1]=Math.round(B[1]),k[2]=Math.round(B[2]),k},pe.scale=function(k,B,W){return k[0]=B[0]*W,k[1]=B[1]*W,k[2]=B[2]*W,k},pe.scaleAndAdd=function(k,B,W,G){return k[0]=B[0]+W[0]*G,k[1]=B[1]+W[1]*G,k[2]=B[2]+W[2]*G,k},pe.distance=P,pe.squaredDistance=R,pe.squaredLength=E,pe.negate=function(k,B){return k[0]=-B[0],k[1]=-B[1],k[2]=-B[2],k},pe.inverse=function(k,B){return k[0]=1/B[0],k[1]=1/B[1],k[2]=1/B[2],k},pe.normalize=function(k,B){var W=B[0],G=B[1],Q=B[2],K=W*W+G*G+Q*Q;return K>0&&(K=1/Math.sqrt(K)),k[0]=B[0]*K,k[1]=B[1]*K,k[2]=B[2]*K,k},pe.dot=O,pe.cross=function(k,B,W){var G=B[0],Q=B[1],K=B[2],Z=W[0],re=W[1],ce=W[2];return k[0]=Q*ce-K*re,k[1]=K*Z-G*ce,k[2]=G*re-Q*Z,k},pe.lerp=function(k,B,W,G){var Q=B[0],K=B[1],Z=B[2];return k[0]=Q+G*(W[0]-Q),k[1]=K+G*(W[1]-K),k[2]=Z+G*(W[2]-Z),k},pe.hermite=function(k,B,W,G,Q,K){var Z=K*K,re=Z*(2*K-3)+1,ce=Z*(K-2)+K,fe=Z*(K-1),Pe=Z*(3-2*K);return k[0]=B[0]*re+W[0]*ce+G[0]*fe+Q[0]*Pe,k[1]=B[1]*re+W[1]*ce+G[1]*fe+Q[1]*Pe,k[2]=B[2]*re+W[2]*ce+G[2]*fe+Q[2]*Pe,k},pe.bezier=function(k,B,W,G,Q,K){var Z=1-K,re=Z*Z,ce=K*K,fe=re*Z,Pe=3*K*re,Me=3*ce*Z,Ae=ce*K;return k[0]=B[0]*fe+W[0]*Pe+G[0]*Me+Q[0]*Ae,k[1]=B[1]*fe+W[1]*Pe+G[1]*Me+Q[1]*Ae,k[2]=B[2]*fe+W[2]*Pe+G[2]*Me+Q[2]*Ae,k},pe.random=function(k,B){B=B||1;var W=2*a.RANDOM()*Math.PI,G=2*a.RANDOM()-1,Q=Math.sqrt(1-G*G)*B;return k[0]=Math.cos(W)*Q,k[1]=Math.sin(W)*Q,k[2]=G*B,k},pe.transformMat4=function(k,B,W){var G=B[0],Q=B[1],K=B[2],Z=W[3]*G+W[7]*Q+W[11]*K+W[15];return k[0]=(W[0]*G+W[4]*Q+W[8]*K+W[12])/(Z=Z||1),k[1]=(W[1]*G+W[5]*Q+W[9]*K+W[13])/Z,k[2]=(W[2]*G+W[6]*Q+W[10]*K+W[14])/Z,k},pe.transformMat3=function(k,B,W){var G=B[0],Q=B[1],K=B[2];return k[0]=G*W[0]+Q*W[3]+K*W[6],k[1]=G*W[1]+Q*W[4]+K*W[7],k[2]=G*W[2]+Q*W[5]+K*W[8],k},pe.transformQuat=function(k,B,W){var G=W[0],Q=W[1],K=W[2],Z=B[0],re=B[1],ce=B[2],fe=Q*ce-K*re,Pe=K*Z-G*ce,Me=G*re-Q*Z,Ae=Q*Me-K*Pe,Ze=K*fe-G*Me,Oe=G*Pe-Q*fe,Je=2*W[3];return Pe*=Je,Me*=Je,Ze*=2,Oe*=2,k[0]=Z+(fe*=Je)+(Ae*=2),k[1]=re+Pe+Ze,k[2]=ce+Me+Oe,k},pe.rotateX=function(k,B,W,G){var Q=[],K=[];return Q[0]=B[0]-W[0],Q[1]=B[1]-W[1],Q[2]=B[2]-W[2],K[0]=Q[0],K[1]=Q[1]*Math.cos(G)-Q[2]*Math.sin(G),K[2]=Q[1]*Math.sin(G)+Q[2]*Math.cos(G),k[0]=K[0]+W[0],k[1]=K[1]+W[1],k[2]=K[2]+W[2],k},pe.rotateY=function(k,B,W,G){var Q=[],K=[];return Q[0]=B[0]-W[0],Q[1]=B[1]-W[1],Q[2]=B[2]-W[2],K[0]=Q[2]*Math.sin(G)+Q[0]*Math.cos(G),K[1]=Q[1],K[2]=Q[2]*Math.cos(G)-Q[0]*Math.sin(G),k[0]=K[0]+W[0],k[1]=K[1]+W[1],k[2]=K[2]+W[2],k},pe.rotateZ=function(k,B,W,G){var Q=[],K=[];return Q[0]=B[0]-W[0],Q[1]=B[1]-W[1],Q[2]=B[2]-W[2],K[0]=Q[0]*Math.cos(G)-Q[1]*Math.sin(G),K[1]=Q[0]*Math.sin(G)+Q[1]*Math.cos(G),K[2]=Q[2],k[0]=K[0]+W[0],k[1]=K[1]+W[1],k[2]=K[2]+W[2],k},pe.angle=function(k,B){var W=k[0],G=k[1],Q=k[2],K=B[0],Z=B[1],re=B[2],ce=Math.sqrt(W*W+G*G+Q*Q)*Math.sqrt(K*K+Z*Z+re*re),fe=ce&&O(k,B)/ce;return Math.acos(Math.min(Math.max(fe,-1),1))},pe.zero=function(k){return k[0]=0,k[1]=0,k[2]=0,k},pe.str=function(k){return"vec3("+k[0]+", "+k[1]+", "+k[2]+")"},pe.exactEquals=function(k,B){return k[0]===B[0]&&k[1]===B[1]&&k[2]===B[2]},pe.equals=function(k,B){var W=k[0],G=k[1],Q=k[2],K=B[0],Z=B[1],re=B[2];return Math.abs(W-K)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(K))&&Math.abs(G-Z)<=a.EPSILON*Math.max(1,Math.abs(G),Math.abs(Z))&&Math.abs(Q-re)<=a.EPSILON*Math.max(1,Math.abs(Q),Math.abs(re))},pe.forEach=pe.sqrLen=pe.len=pe.sqrDist=pe.dist=pe.div=pe.mul=pe.sub=void 0;var a=(function(k,B){if(k&&k.__esModule)return k;if(k===null||h(k)!=="object"&&typeof k!="function")return{default:k};var W=u(void 0);if(W&&W.has(k))return W.get(k);var G={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in k)if(K!=="default"&&Object.prototype.hasOwnProperty.call(k,K)){var Z=Q?Object.getOwnPropertyDescriptor(k,K):null;Z&&(Z.get||Z.set)?Object.defineProperty(G,K,Z):G[K]=k[K]}return G.default=k,W&&W.set(k,G),G})(A());function u(k){if(typeof WeakMap!="function")return null;var B=new WeakMap,W=new WeakMap;return(u=function(G){return G?W:B})(k)}function p(){var k=new a.ARRAY_TYPE(3);return a.ARRAY_TYPE!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0),k}function _(k){return Math.hypot(k[0],k[1],k[2])}function m(k,B,W){return k[0]=B[0]-W[0],k[1]=B[1]-W[1],k[2]=B[2]-W[2],k}function b(k,B,W){return k[0]=B[0]*W[0],k[1]=B[1]*W[1],k[2]=B[2]*W[2],k}function M(k,B,W){return k[0]=B[0]/W[0],k[1]=B[1]/W[1],k[2]=B[2]/W[2],k}function P(k,B){return Math.hypot(B[0]-k[0],B[1]-k[1],B[2]-k[2])}function R(k,B){var W=B[0]-k[0],G=B[1]-k[1],Q=B[2]-k[2];return W*W+G*G+Q*Q}function E(k){var B=k[0],W=k[1],G=k[2];return B*B+W*W+G*G}function O(k,B){return k[0]*B[0]+k[1]*B[1]+k[2]*B[2]}pe.sub=m,pe.mul=b,pe.div=M,pe.dist=P,pe.sqrDist=R,pe.len=_,pe.sqrLen=E;var L,D=(L=p(),function(k,B,W,G,Q,K){var Z,re;for(B||(B=3),W||(W=0),re=G?Math.min(G*B+W,k.length):k.length,Z=W;Z<re;Z+=B)L[0]=k[Z],L[1]=k[Z+1],L[2]=k[Z+2],Q(L,L,K),k[Z]=L[0],k[Z+1]=L[1],k[Z+2]=L[2];return k});return pe.forEach=D,pe}var Se,Ce,Ee={};function xe(){if(Se)return Ee;function h(D){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},h(D)}Se=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.create=p,Ee.clone=function(D){var k=new a.ARRAY_TYPE(4);return k[0]=D[0],k[1]=D[1],k[2]=D[2],k[3]=D[3],k},Ee.fromValues=function(D,k,B,W){var G=new a.ARRAY_TYPE(4);return G[0]=D,G[1]=k,G[2]=B,G[3]=W,G},Ee.copy=function(D,k){return D[0]=k[0],D[1]=k[1],D[2]=k[2],D[3]=k[3],D},Ee.set=function(D,k,B,W,G){return D[0]=k,D[1]=B,D[2]=W,D[3]=G,D},Ee.add=function(D,k,B){return D[0]=k[0]+B[0],D[1]=k[1]+B[1],D[2]=k[2]+B[2],D[3]=k[3]+B[3],D},Ee.subtract=_,Ee.multiply=m,Ee.divide=b,Ee.ceil=function(D,k){return D[0]=Math.ceil(k[0]),D[1]=Math.ceil(k[1]),D[2]=Math.ceil(k[2]),D[3]=Math.ceil(k[3]),D},Ee.floor=function(D,k){return D[0]=Math.floor(k[0]),D[1]=Math.floor(k[1]),D[2]=Math.floor(k[2]),D[3]=Math.floor(k[3]),D},Ee.min=function(D,k,B){return D[0]=Math.min(k[0],B[0]),D[1]=Math.min(k[1],B[1]),D[2]=Math.min(k[2],B[2]),D[3]=Math.min(k[3],B[3]),D},Ee.max=function(D,k,B){return D[0]=Math.max(k[0],B[0]),D[1]=Math.max(k[1],B[1]),D[2]=Math.max(k[2],B[2]),D[3]=Math.max(k[3],B[3]),D},Ee.round=function(D,k){return D[0]=Math.round(k[0]),D[1]=Math.round(k[1]),D[2]=Math.round(k[2]),D[3]=Math.round(k[3]),D},Ee.scale=function(D,k,B){return D[0]=k[0]*B,D[1]=k[1]*B,D[2]=k[2]*B,D[3]=k[3]*B,D},Ee.scaleAndAdd=function(D,k,B,W){return D[0]=k[0]+B[0]*W,D[1]=k[1]+B[1]*W,D[2]=k[2]+B[2]*W,D[3]=k[3]+B[3]*W,D},Ee.distance=M,Ee.squaredDistance=P,Ee.length=R,Ee.squaredLength=E,Ee.negate=function(D,k){return D[0]=-k[0],D[1]=-k[1],D[2]=-k[2],D[3]=-k[3],D},Ee.inverse=function(D,k){return D[0]=1/k[0],D[1]=1/k[1],D[2]=1/k[2],D[3]=1/k[3],D},Ee.normalize=function(D,k){var B=k[0],W=k[1],G=k[2],Q=k[3],K=B*B+W*W+G*G+Q*Q;return K>0&&(K=1/Math.sqrt(K)),D[0]=B*K,D[1]=W*K,D[2]=G*K,D[3]=Q*K,D},Ee.dot=function(D,k){return D[0]*k[0]+D[1]*k[1]+D[2]*k[2]+D[3]*k[3]},Ee.cross=function(D,k,B,W){var G=B[0]*W[1]-B[1]*W[0],Q=B[0]*W[2]-B[2]*W[0],K=B[0]*W[3]-B[3]*W[0],Z=B[1]*W[2]-B[2]*W[1],re=B[1]*W[3]-B[3]*W[1],ce=B[2]*W[3]-B[3]*W[2],fe=k[0],Pe=k[1],Me=k[2],Ae=k[3];return D[0]=Pe*ce-Me*re+Ae*Z,D[1]=-fe*ce+Me*K-Ae*Q,D[2]=fe*re-Pe*K+Ae*G,D[3]=-fe*Z+Pe*Q-Me*G,D},Ee.lerp=function(D,k,B,W){var G=k[0],Q=k[1],K=k[2],Z=k[3];return D[0]=G+W*(B[0]-G),D[1]=Q+W*(B[1]-Q),D[2]=K+W*(B[2]-K),D[3]=Z+W*(B[3]-Z),D},Ee.random=function(D,k){var B,W,G,Q,K,Z;k=k||1;do K=(B=2*a.RANDOM()-1)*B+(W=2*a.RANDOM()-1)*W;while(K>=1);do Z=(G=2*a.RANDOM()-1)*G+(Q=2*a.RANDOM()-1)*Q;while(Z>=1);var re=Math.sqrt((1-K)/Z);return D[0]=k*B,D[1]=k*W,D[2]=k*G*re,D[3]=k*Q*re,D},Ee.transformMat4=function(D,k,B){var W=k[0],G=k[1],Q=k[2],K=k[3];return D[0]=B[0]*W+B[4]*G+B[8]*Q+B[12]*K,D[1]=B[1]*W+B[5]*G+B[9]*Q+B[13]*K,D[2]=B[2]*W+B[6]*G+B[10]*Q+B[14]*K,D[3]=B[3]*W+B[7]*G+B[11]*Q+B[15]*K,D},Ee.transformQuat=function(D,k,B){var W=k[0],G=k[1],Q=k[2],K=B[0],Z=B[1],re=B[2],ce=B[3],fe=ce*W+Z*Q-re*G,Pe=ce*G+re*W-K*Q,Me=ce*Q+K*G-Z*W,Ae=-K*W-Z*G-re*Q;return D[0]=fe*ce+Ae*-K+Pe*-re-Me*-Z,D[1]=Pe*ce+Ae*-Z+Me*-K-fe*-re,D[2]=Me*ce+Ae*-re+fe*-Z-Pe*-K,D[3]=k[3],D},Ee.zero=function(D){return D[0]=0,D[1]=0,D[2]=0,D[3]=0,D},Ee.str=function(D){return"vec4("+D[0]+", "+D[1]+", "+D[2]+", "+D[3]+")"},Ee.exactEquals=function(D,k){return D[0]===k[0]&&D[1]===k[1]&&D[2]===k[2]&&D[3]===k[3]},Ee.equals=function(D,k){var B=D[0],W=D[1],G=D[2],Q=D[3],K=k[0],Z=k[1],re=k[2],ce=k[3];return Math.abs(B-K)<=a.EPSILON*Math.max(1,Math.abs(B),Math.abs(K))&&Math.abs(W-Z)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(Z))&&Math.abs(G-re)<=a.EPSILON*Math.max(1,Math.abs(G),Math.abs(re))&&Math.abs(Q-ce)<=a.EPSILON*Math.max(1,Math.abs(Q),Math.abs(ce))},Ee.forEach=Ee.sqrLen=Ee.len=Ee.sqrDist=Ee.dist=Ee.div=Ee.mul=Ee.sub=void 0;var a=(function(D,k){if(D&&D.__esModule)return D;if(D===null||h(D)!=="object"&&typeof D!="function")return{default:D};var B=u(void 0);if(B&&B.has(D))return B.get(D);var W={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in D)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(D,Q)){var K=G?Object.getOwnPropertyDescriptor(D,Q):null;K&&(K.get||K.set)?Object.defineProperty(W,Q,K):W[Q]=D[Q]}return W.default=D,B&&B.set(D,W),W})(A());function u(D){if(typeof WeakMap!="function")return null;var k=new WeakMap,B=new WeakMap;return(u=function(W){return W?B:k})(D)}function p(){var D=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(D[0]=0,D[1]=0,D[2]=0,D[3]=0),D}function _(D,k,B){return D[0]=k[0]-B[0],D[1]=k[1]-B[1],D[2]=k[2]-B[2],D[3]=k[3]-B[3],D}function m(D,k,B){return D[0]=k[0]*B[0],D[1]=k[1]*B[1],D[2]=k[2]*B[2],D[3]=k[3]*B[3],D}function b(D,k,B){return D[0]=k[0]/B[0],D[1]=k[1]/B[1],D[2]=k[2]/B[2],D[3]=k[3]/B[3],D}function M(D,k){return Math.hypot(k[0]-D[0],k[1]-D[1],k[2]-D[2],k[3]-D[3])}function P(D,k){var B=k[0]-D[0],W=k[1]-D[1],G=k[2]-D[2],Q=k[3]-D[3];return B*B+W*W+G*G+Q*Q}function R(D){return Math.hypot(D[0],D[1],D[2],D[3])}function E(D){var k=D[0],B=D[1],W=D[2],G=D[3];return k*k+B*B+W*W+G*G}Ee.sub=_,Ee.mul=m,Ee.div=b,Ee.dist=M,Ee.sqrDist=P,Ee.len=R,Ee.sqrLen=E;var O,L=(O=p(),function(D,k,B,W,G,Q){var K,Z;for(k||(k=4),B||(B=0),Z=W?Math.min(W*k+B,D.length):D.length,K=B;K<Z;K+=k)O[0]=D[K],O[1]=D[K+1],O[2]=D[K+2],O[3]=D[K+3],G(O,O,Q),D[K]=O[0],D[K+1]=O[1],D[K+2]=O[2],D[K+3]=O[3];return D});return Ee.forEach=L,Ee}function ke(){if(Ce)return ie;function h(Oe){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Je){return typeof Je}:function(Je){return Je&&typeof Symbol=="function"&&Je.constructor===Symbol&&Je!==Symbol.prototype?"symbol":typeof Je},h(Oe)}Ce=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.create=M,ie.identity=function(Oe){return Oe[0]=0,Oe[1]=0,Oe[2]=0,Oe[3]=1,Oe},ie.setAxisAngle=P,ie.getAxisAngle=function(Oe,Je){var rt=2*Math.acos(Je[3]),et=Math.sin(rt/2);return et>a.EPSILON?(Oe[0]=Je[0]/et,Oe[1]=Je[1]/et,Oe[2]=Je[2]/et):(Oe[0]=1,Oe[1]=0,Oe[2]=0),rt},ie.getAngle=function(Oe,Je){var rt=B(Oe,Je);return Math.acos(2*rt*rt-1)},ie.multiply=R,ie.rotateX=function(Oe,Je,rt){rt*=.5;var et=Je[0],dt=Je[1],ct=Je[2],xt=Je[3],pt=Math.sin(rt),St=Math.cos(rt);return Oe[0]=et*St+xt*pt,Oe[1]=dt*St+ct*pt,Oe[2]=ct*St-dt*pt,Oe[3]=xt*St-et*pt,Oe},ie.rotateY=function(Oe,Je,rt){rt*=.5;var et=Je[0],dt=Je[1],ct=Je[2],xt=Je[3],pt=Math.sin(rt),St=Math.cos(rt);return Oe[0]=et*St-ct*pt,Oe[1]=dt*St+xt*pt,Oe[2]=ct*St+et*pt,Oe[3]=xt*St-dt*pt,Oe},ie.rotateZ=function(Oe,Je,rt){rt*=.5;var et=Je[0],dt=Je[1],ct=Je[2],xt=Je[3],pt=Math.sin(rt),St=Math.cos(rt);return Oe[0]=et*St+dt*pt,Oe[1]=dt*St-et*pt,Oe[2]=ct*St+xt*pt,Oe[3]=xt*St-ct*pt,Oe},ie.calculateW=function(Oe,Je){var rt=Je[0],et=Je[1],dt=Je[2];return Oe[0]=rt,Oe[1]=et,Oe[2]=dt,Oe[3]=Math.sqrt(Math.abs(1-rt*rt-et*et-dt*dt)),Oe},ie.exp=E,ie.ln=O,ie.pow=function(Oe,Je,rt){return O(Oe,Je),k(Oe,Oe,rt),E(Oe,Oe),Oe},ie.slerp=L,ie.random=function(Oe){var Je=a.RANDOM(),rt=a.RANDOM(),et=a.RANDOM(),dt=Math.sqrt(1-Je),ct=Math.sqrt(Je);return Oe[0]=dt*Math.sin(2*Math.PI*rt),Oe[1]=dt*Math.cos(2*Math.PI*rt),Oe[2]=ct*Math.sin(2*Math.PI*et),Oe[3]=ct*Math.cos(2*Math.PI*et),Oe},ie.invert=function(Oe,Je){var rt=Je[0],et=Je[1],dt=Je[2],ct=Je[3],xt=rt*rt+et*et+dt*dt+ct*ct,pt=xt?1/xt:0;return Oe[0]=-rt*pt,Oe[1]=-et*pt,Oe[2]=-dt*pt,Oe[3]=ct*pt,Oe},ie.conjugate=function(Oe,Je){return Oe[0]=-Je[0],Oe[1]=-Je[1],Oe[2]=-Je[2],Oe[3]=Je[3],Oe},ie.fromMat3=D,ie.fromEuler=function(Oe,Je,rt,et){var dt=.5*Math.PI/180;Je*=dt,rt*=dt,et*=dt;var ct=Math.sin(Je),xt=Math.cos(Je),pt=Math.sin(rt),St=Math.cos(rt),Zt=Math.sin(et),Yt=Math.cos(et);return Oe[0]=ct*St*Yt-xt*pt*Zt,Oe[1]=xt*pt*Yt+ct*St*Zt,Oe[2]=xt*St*Zt-ct*pt*Yt,Oe[3]=xt*St*Yt+ct*pt*Zt,Oe},ie.str=function(Oe){return"quat("+Oe[0]+", "+Oe[1]+", "+Oe[2]+", "+Oe[3]+")"},ie.setAxes=ie.sqlerp=ie.rotationTo=ie.equals=ie.exactEquals=ie.normalize=ie.sqrLen=ie.squaredLength=ie.len=ie.length=ie.lerp=ie.dot=ie.scale=ie.mul=ie.add=ie.set=ie.copy=ie.fromValues=ie.clone=void 0;var a=b(A()),u=b(ee()),p=b(be()),_=b(xe());function m(Oe){if(typeof WeakMap!="function")return null;var Je=new WeakMap,rt=new WeakMap;return(m=function(et){return et?rt:Je})(Oe)}function b(Oe,Je){if(Oe&&Oe.__esModule)return Oe;if(Oe===null||h(Oe)!=="object"&&typeof Oe!="function")return{default:Oe};var rt=m(Je);if(rt&&rt.has(Oe))return rt.get(Oe);var et={},dt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ct in Oe)if(ct!=="default"&&Object.prototype.hasOwnProperty.call(Oe,ct)){var xt=dt?Object.getOwnPropertyDescriptor(Oe,ct):null;xt&&(xt.get||xt.set)?Object.defineProperty(et,ct,xt):et[ct]=Oe[ct]}return et.default=Oe,rt&&rt.set(Oe,et),et}function M(){var Oe=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(Oe[0]=0,Oe[1]=0,Oe[2]=0),Oe[3]=1,Oe}function P(Oe,Je,rt){rt*=.5;var et=Math.sin(rt);return Oe[0]=et*Je[0],Oe[1]=et*Je[1],Oe[2]=et*Je[2],Oe[3]=Math.cos(rt),Oe}function R(Oe,Je,rt){var et=Je[0],dt=Je[1],ct=Je[2],xt=Je[3],pt=rt[0],St=rt[1],Zt=rt[2],Yt=rt[3];return Oe[0]=et*Yt+xt*pt+dt*Zt-ct*St,Oe[1]=dt*Yt+xt*St+ct*pt-et*Zt,Oe[2]=ct*Yt+xt*Zt+et*St-dt*pt,Oe[3]=xt*Yt-et*pt-dt*St-ct*Zt,Oe}function E(Oe,Je){var rt=Je[0],et=Je[1],dt=Je[2],ct=Je[3],xt=Math.sqrt(rt*rt+et*et+dt*dt),pt=Math.exp(ct),St=xt>0?pt*Math.sin(xt)/xt:0;return Oe[0]=rt*St,Oe[1]=et*St,Oe[2]=dt*St,Oe[3]=pt*Math.cos(xt),Oe}function O(Oe,Je){var rt=Je[0],et=Je[1],dt=Je[2],ct=Je[3],xt=Math.sqrt(rt*rt+et*et+dt*dt),pt=xt>0?Math.atan2(xt,ct)/xt:0;return Oe[0]=rt*pt,Oe[1]=et*pt,Oe[2]=dt*pt,Oe[3]=.5*Math.log(rt*rt+et*et+dt*dt+ct*ct),Oe}function L(Oe,Je,rt,et){var dt,ct,xt,pt,St,Zt=Je[0],Yt=Je[1],Cn=Je[2],rn=Je[3],pn=rt[0],en=rt[1],$n=rt[2],Sn=rt[3];return(ct=Zt*pn+Yt*en+Cn*$n+rn*Sn)<0&&(ct=-ct,pn=-pn,en=-en,$n=-$n,Sn=-Sn),1-ct>a.EPSILON?(dt=Math.acos(ct),xt=Math.sin(dt),pt=Math.sin((1-et)*dt)/xt,St=Math.sin(et*dt)/xt):(pt=1-et,St=et),Oe[0]=pt*Zt+St*pn,Oe[1]=pt*Yt+St*en,Oe[2]=pt*Cn+St*$n,Oe[3]=pt*rn+St*Sn,Oe}function D(Oe,Je){var rt,et=Je[0]+Je[4]+Je[8];if(et>0)rt=Math.sqrt(et+1),Oe[3]=.5*rt,Oe[0]=(Je[5]-Je[7])*(rt=.5/rt),Oe[1]=(Je[6]-Je[2])*rt,Oe[2]=(Je[1]-Je[3])*rt;else{var dt=0;Je[4]>Je[0]&&(dt=1),Je[8]>Je[3*dt+dt]&&(dt=2);var ct=(dt+1)%3,xt=(dt+2)%3;rt=Math.sqrt(Je[3*dt+dt]-Je[3*ct+ct]-Je[3*xt+xt]+1),Oe[dt]=.5*rt,Oe[3]=(Je[3*ct+xt]-Je[3*xt+ct])*(rt=.5/rt),Oe[ct]=(Je[3*ct+dt]+Je[3*dt+ct])*rt,Oe[xt]=(Je[3*xt+dt]+Je[3*dt+xt])*rt}return Oe}ie.clone=_.clone,ie.fromValues=_.fromValues,ie.copy=_.copy,ie.set=_.set,ie.add=_.add,ie.mul=R;var k=_.scale;ie.scale=k;var B=_.dot;ie.dot=B,ie.lerp=_.lerp;var W=_.length;ie.length=W,ie.len=W;var G=_.squaredLength;ie.squaredLength=G,ie.sqrLen=G;var Q=_.normalize;ie.normalize=Q,ie.exactEquals=_.exactEquals,ie.equals=_.equals;var K,Z,re,ce=(K=p.create(),Z=p.fromValues(1,0,0),re=p.fromValues(0,1,0),function(Oe,Je,rt){var et=p.dot(Je,rt);return et<-.999999?(p.cross(K,Z,Je),p.len(K)<1e-6&&p.cross(K,re,Je),p.normalize(K,K),P(Oe,K,Math.PI),Oe):et>.999999?(Oe[0]=0,Oe[1]=0,Oe[2]=0,Oe[3]=1,Oe):(p.cross(K,Je,rt),Oe[0]=K[0],Oe[1]=K[1],Oe[2]=K[2],Oe[3]=1+et,Q(Oe,Oe))});ie.rotationTo=ce;var fe,Pe,Me=(fe=M(),Pe=M(),function(Oe,Je,rt,et,dt,ct){return L(fe,Je,dt,ct),L(Pe,rt,et,ct),L(Oe,fe,Pe,2*ct*(1-ct)),Oe});ie.sqlerp=Me;var Ae,Ze=(Ae=u.create(),function(Oe,Je,rt,et){return Ae[0]=rt[0],Ae[3]=rt[1],Ae[6]=rt[2],Ae[1]=et[0],Ae[4]=et[1],Ae[7]=et[2],Ae[2]=-Je[0],Ae[5]=-Je[1],Ae[8]=-Je[2],Q(Oe,D(Oe,Ae))});return ie.setAxes=Ze,ie}var He,Ke={};function Ge(){if(He)return Ke;function h(L){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},h(L)}He=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.create=function(){var L=new a.ARRAY_TYPE(8);return a.ARRAY_TYPE!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0,L[4]=0,L[5]=0,L[6]=0,L[7]=0),L[3]=1,L},Ke.clone=function(L){var D=new a.ARRAY_TYPE(8);return D[0]=L[0],D[1]=L[1],D[2]=L[2],D[3]=L[3],D[4]=L[4],D[5]=L[5],D[6]=L[6],D[7]=L[7],D},Ke.fromValues=function(L,D,k,B,W,G,Q,K){var Z=new a.ARRAY_TYPE(8);return Z[0]=L,Z[1]=D,Z[2]=k,Z[3]=B,Z[4]=W,Z[5]=G,Z[6]=Q,Z[7]=K,Z},Ke.fromRotationTranslationValues=function(L,D,k,B,W,G,Q){var K=new a.ARRAY_TYPE(8);K[0]=L,K[1]=D,K[2]=k,K[3]=B;var Z=.5*W,re=.5*G,ce=.5*Q;return K[4]=Z*B+re*k-ce*D,K[5]=re*B+ce*L-Z*k,K[6]=ce*B+Z*D-re*L,K[7]=-Z*L-re*D-ce*k,K},Ke.fromRotationTranslation=b,Ke.fromTranslation=function(L,D){return L[0]=0,L[1]=0,L[2]=0,L[3]=1,L[4]=.5*D[0],L[5]=.5*D[1],L[6]=.5*D[2],L[7]=0,L},Ke.fromRotation=function(L,D){return L[0]=D[0],L[1]=D[1],L[2]=D[2],L[3]=D[3],L[4]=0,L[5]=0,L[6]=0,L[7]=0,L},Ke.fromMat4=function(L,D){var k=u.create();p.getRotation(k,D);var B=new a.ARRAY_TYPE(3);return p.getTranslation(B,D),b(L,k,B),L},Ke.copy=M,Ke.identity=function(L){return L[0]=0,L[1]=0,L[2]=0,L[3]=1,L[4]=0,L[5]=0,L[6]=0,L[7]=0,L},Ke.set=function(L,D,k,B,W,G,Q,K,Z){return L[0]=D,L[1]=k,L[2]=B,L[3]=W,L[4]=G,L[5]=Q,L[6]=K,L[7]=Z,L},Ke.getDual=function(L,D){return L[0]=D[4],L[1]=D[5],L[2]=D[6],L[3]=D[7],L},Ke.setDual=function(L,D){return L[4]=D[0],L[5]=D[1],L[6]=D[2],L[7]=D[3],L},Ke.getTranslation=function(L,D){var k=D[4],B=D[5],W=D[6],G=D[7],Q=-D[0],K=-D[1],Z=-D[2],re=D[3];return L[0]=2*(k*re+G*Q+B*Z-W*K),L[1]=2*(B*re+G*K+W*Q-k*Z),L[2]=2*(W*re+G*Z+k*K-B*Q),L},Ke.translate=function(L,D,k){var B=D[0],W=D[1],G=D[2],Q=D[3],K=.5*k[0],Z=.5*k[1],re=.5*k[2],ce=D[4],fe=D[5],Pe=D[6],Me=D[7];return L[0]=B,L[1]=W,L[2]=G,L[3]=Q,L[4]=Q*K+W*re-G*Z+ce,L[5]=Q*Z+G*K-B*re+fe,L[6]=Q*re+B*Z-W*K+Pe,L[7]=-B*K-W*Z-G*re+Me,L},Ke.rotateX=function(L,D,k){var B=-D[0],W=-D[1],G=-D[2],Q=D[3],K=D[4],Z=D[5],re=D[6],ce=D[7],fe=K*Q+ce*B+Z*G-re*W,Pe=Z*Q+ce*W+re*B-K*G,Me=re*Q+ce*G+K*W-Z*B,Ae=ce*Q-K*B-Z*W-re*G;return u.rotateX(L,D,k),L[4]=fe*(Q=L[3])+Ae*(B=L[0])+Pe*(G=L[2])-Me*(W=L[1]),L[5]=Pe*Q+Ae*W+Me*B-fe*G,L[6]=Me*Q+Ae*G+fe*W-Pe*B,L[7]=Ae*Q-fe*B-Pe*W-Me*G,L},Ke.rotateY=function(L,D,k){var B=-D[0],W=-D[1],G=-D[2],Q=D[3],K=D[4],Z=D[5],re=D[6],ce=D[7],fe=K*Q+ce*B+Z*G-re*W,Pe=Z*Q+ce*W+re*B-K*G,Me=re*Q+ce*G+K*W-Z*B,Ae=ce*Q-K*B-Z*W-re*G;return u.rotateY(L,D,k),L[4]=fe*(Q=L[3])+Ae*(B=L[0])+Pe*(G=L[2])-Me*(W=L[1]),L[5]=Pe*Q+Ae*W+Me*B-fe*G,L[6]=Me*Q+Ae*G+fe*W-Pe*B,L[7]=Ae*Q-fe*B-Pe*W-Me*G,L},Ke.rotateZ=function(L,D,k){var B=-D[0],W=-D[1],G=-D[2],Q=D[3],K=D[4],Z=D[5],re=D[6],ce=D[7],fe=K*Q+ce*B+Z*G-re*W,Pe=Z*Q+ce*W+re*B-K*G,Me=re*Q+ce*G+K*W-Z*B,Ae=ce*Q-K*B-Z*W-re*G;return u.rotateZ(L,D,k),L[4]=fe*(Q=L[3])+Ae*(B=L[0])+Pe*(G=L[2])-Me*(W=L[1]),L[5]=Pe*Q+Ae*W+Me*B-fe*G,L[6]=Me*Q+Ae*G+fe*W-Pe*B,L[7]=Ae*Q-fe*B-Pe*W-Me*G,L},Ke.rotateByQuatAppend=function(L,D,k){var B=k[0],W=k[1],G=k[2],Q=k[3],K=D[0],Z=D[1],re=D[2],ce=D[3];return L[0]=K*Q+ce*B+Z*G-re*W,L[1]=Z*Q+ce*W+re*B-K*G,L[2]=re*Q+ce*G+K*W-Z*B,L[3]=ce*Q-K*B-Z*W-re*G,L[4]=(K=D[4])*Q+(ce=D[7])*B+(Z=D[5])*G-(re=D[6])*W,L[5]=Z*Q+ce*W+re*B-K*G,L[6]=re*Q+ce*G+K*W-Z*B,L[7]=ce*Q-K*B-Z*W-re*G,L},Ke.rotateByQuatPrepend=function(L,D,k){var B=D[0],W=D[1],G=D[2],Q=D[3],K=k[0],Z=k[1],re=k[2],ce=k[3];return L[0]=B*ce+Q*K+W*re-G*Z,L[1]=W*ce+Q*Z+G*K-B*re,L[2]=G*ce+Q*re+B*Z-W*K,L[3]=Q*ce-B*K-W*Z-G*re,L[4]=B*(ce=k[7])+Q*(K=k[4])+W*(re=k[6])-G*(Z=k[5]),L[5]=W*ce+Q*Z+G*K-B*re,L[6]=G*ce+Q*re+B*Z-W*K,L[7]=Q*ce-B*K-W*Z-G*re,L},Ke.rotateAroundAxis=function(L,D,k,B){if(Math.abs(B)<a.EPSILON)return M(L,D);var W=Math.hypot(k[0],k[1],k[2]);B*=.5;var G=Math.sin(B),Q=G*k[0]/W,K=G*k[1]/W,Z=G*k[2]/W,re=Math.cos(B),ce=D[0],fe=D[1],Pe=D[2],Me=D[3];L[0]=ce*re+Me*Q+fe*Z-Pe*K,L[1]=fe*re+Me*K+Pe*Q-ce*Z,L[2]=Pe*re+Me*Z+ce*K-fe*Q,L[3]=Me*re-ce*Q-fe*K-Pe*Z;var Ae=D[4],Ze=D[5],Oe=D[6],Je=D[7];return L[4]=Ae*re+Je*Q+Ze*Z-Oe*K,L[5]=Ze*re+Je*K+Oe*Q-Ae*Z,L[6]=Oe*re+Je*Z+Ae*K-Ze*Q,L[7]=Je*re-Ae*Q-Ze*K-Oe*Z,L},Ke.add=function(L,D,k){return L[0]=D[0]+k[0],L[1]=D[1]+k[1],L[2]=D[2]+k[2],L[3]=D[3]+k[3],L[4]=D[4]+k[4],L[5]=D[5]+k[5],L[6]=D[6]+k[6],L[7]=D[7]+k[7],L},Ke.multiply=P,Ke.scale=function(L,D,k){return L[0]=D[0]*k,L[1]=D[1]*k,L[2]=D[2]*k,L[3]=D[3]*k,L[4]=D[4]*k,L[5]=D[5]*k,L[6]=D[6]*k,L[7]=D[7]*k,L},Ke.lerp=function(L,D,k,B){var W=1-B;return R(D,k)<0&&(B=-B),L[0]=D[0]*W+k[0]*B,L[1]=D[1]*W+k[1]*B,L[2]=D[2]*W+k[2]*B,L[3]=D[3]*W+k[3]*B,L[4]=D[4]*W+k[4]*B,L[5]=D[5]*W+k[5]*B,L[6]=D[6]*W+k[6]*B,L[7]=D[7]*W+k[7]*B,L},Ke.invert=function(L,D){var k=O(D);return L[0]=-D[0]/k,L[1]=-D[1]/k,L[2]=-D[2]/k,L[3]=D[3]/k,L[4]=-D[4]/k,L[5]=-D[5]/k,L[6]=-D[6]/k,L[7]=D[7]/k,L},Ke.conjugate=function(L,D){return L[0]=-D[0],L[1]=-D[1],L[2]=-D[2],L[3]=D[3],L[4]=-D[4],L[5]=-D[5],L[6]=-D[6],L[7]=D[7],L},Ke.normalize=function(L,D){var k=O(D);if(k>0){k=Math.sqrt(k);var B=D[0]/k,W=D[1]/k,G=D[2]/k,Q=D[3]/k,K=D[4],Z=D[5],re=D[6],ce=D[7],fe=B*K+W*Z+G*re+Q*ce;L[0]=B,L[1]=W,L[2]=G,L[3]=Q,L[4]=(K-B*fe)/k,L[5]=(Z-W*fe)/k,L[6]=(re-G*fe)/k,L[7]=(ce-Q*fe)/k}return L},Ke.str=function(L){return"quat2("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+", "+L[4]+", "+L[5]+", "+L[6]+", "+L[7]+")"},Ke.exactEquals=function(L,D){return L[0]===D[0]&&L[1]===D[1]&&L[2]===D[2]&&L[3]===D[3]&&L[4]===D[4]&&L[5]===D[5]&&L[6]===D[6]&&L[7]===D[7]},Ke.equals=function(L,D){var k=L[0],B=L[1],W=L[2],G=L[3],Q=L[4],K=L[5],Z=L[6],re=L[7],ce=D[0],fe=D[1],Pe=D[2],Me=D[3],Ae=D[4],Ze=D[5],Oe=D[6],Je=D[7];return Math.abs(k-ce)<=a.EPSILON*Math.max(1,Math.abs(k),Math.abs(ce))&&Math.abs(B-fe)<=a.EPSILON*Math.max(1,Math.abs(B),Math.abs(fe))&&Math.abs(W-Pe)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(Pe))&&Math.abs(G-Me)<=a.EPSILON*Math.max(1,Math.abs(G),Math.abs(Me))&&Math.abs(Q-Ae)<=a.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Ae))&&Math.abs(K-Ze)<=a.EPSILON*Math.max(1,Math.abs(K),Math.abs(Ze))&&Math.abs(Z-Oe)<=a.EPSILON*Math.max(1,Math.abs(Z),Math.abs(Oe))&&Math.abs(re-Je)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs(Je))},Ke.sqrLen=Ke.squaredLength=Ke.len=Ke.length=Ke.dot=Ke.mul=Ke.setReal=Ke.getReal=void 0;var a=m(A()),u=m(ke()),p=m(ve());function _(L){if(typeof WeakMap!="function")return null;var D=new WeakMap,k=new WeakMap;return(_=function(B){return B?k:D})(L)}function m(L,D){if(L&&L.__esModule)return L;if(L===null||h(L)!=="object"&&typeof L!="function")return{default:L};var k=_(D);if(k&&k.has(L))return k.get(L);var B={},W=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in L)if(G!=="default"&&Object.prototype.hasOwnProperty.call(L,G)){var Q=W?Object.getOwnPropertyDescriptor(L,G):null;Q&&(Q.get||Q.set)?Object.defineProperty(B,G,Q):B[G]=L[G]}return B.default=L,k&&k.set(L,B),B}function b(L,D,k){var B=.5*k[0],W=.5*k[1],G=.5*k[2],Q=D[0],K=D[1],Z=D[2],re=D[3];return L[0]=Q,L[1]=K,L[2]=Z,L[3]=re,L[4]=B*re+W*Z-G*K,L[5]=W*re+G*Q-B*Z,L[6]=G*re+B*K-W*Q,L[7]=-B*Q-W*K-G*Z,L}function M(L,D){return L[0]=D[0],L[1]=D[1],L[2]=D[2],L[3]=D[3],L[4]=D[4],L[5]=D[5],L[6]=D[6],L[7]=D[7],L}function P(L,D,k){var B=D[0],W=D[1],G=D[2],Q=D[3],K=k[4],Z=k[5],re=k[6],ce=k[7],fe=D[4],Pe=D[5],Me=D[6],Ae=D[7],Ze=k[0],Oe=k[1],Je=k[2],rt=k[3];return L[0]=B*rt+Q*Ze+W*Je-G*Oe,L[1]=W*rt+Q*Oe+G*Ze-B*Je,L[2]=G*rt+Q*Je+B*Oe-W*Ze,L[3]=Q*rt-B*Ze-W*Oe-G*Je,L[4]=B*ce+Q*K+W*re-G*Z+fe*rt+Ae*Ze+Pe*Je-Me*Oe,L[5]=W*ce+Q*Z+G*K-B*re+Pe*rt+Ae*Oe+Me*Ze-fe*Je,L[6]=G*ce+Q*re+B*Z-W*K+Me*rt+Ae*Je+fe*Oe-Pe*Ze,L[7]=Q*ce-B*K-W*Z-G*re+Ae*rt-fe*Ze-Pe*Oe-Me*Je,L}Ke.getReal=u.copy,Ke.setReal=u.copy,Ke.mul=P;var R=u.dot;Ke.dot=R;var E=u.length;Ke.length=E,Ke.len=E;var O=u.squaredLength;return Ke.squaredLength=O,Ke.sqrLen=O,Ke}var $t,Ft,Lt={};function nn(){if($t)return Lt;function h(D){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},h(D)}$t=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.create=p,Lt.clone=function(D){var k=new a.ARRAY_TYPE(2);return k[0]=D[0],k[1]=D[1],k},Lt.fromValues=function(D,k){var B=new a.ARRAY_TYPE(2);return B[0]=D,B[1]=k,B},Lt.copy=function(D,k){return D[0]=k[0],D[1]=k[1],D},Lt.set=function(D,k,B){return D[0]=k,D[1]=B,D},Lt.add=function(D,k,B){return D[0]=k[0]+B[0],D[1]=k[1]+B[1],D},Lt.subtract=_,Lt.multiply=m,Lt.divide=b,Lt.ceil=function(D,k){return D[0]=Math.ceil(k[0]),D[1]=Math.ceil(k[1]),D},Lt.floor=function(D,k){return D[0]=Math.floor(k[0]),D[1]=Math.floor(k[1]),D},Lt.min=function(D,k,B){return D[0]=Math.min(k[0],B[0]),D[1]=Math.min(k[1],B[1]),D},Lt.max=function(D,k,B){return D[0]=Math.max(k[0],B[0]),D[1]=Math.max(k[1],B[1]),D},Lt.round=function(D,k){return D[0]=Math.round(k[0]),D[1]=Math.round(k[1]),D},Lt.scale=function(D,k,B){return D[0]=k[0]*B,D[1]=k[1]*B,D},Lt.scaleAndAdd=function(D,k,B,W){return D[0]=k[0]+B[0]*W,D[1]=k[1]+B[1]*W,D},Lt.distance=M,Lt.squaredDistance=P,Lt.length=R,Lt.squaredLength=E,Lt.negate=function(D,k){return D[0]=-k[0],D[1]=-k[1],D},Lt.inverse=function(D,k){return D[0]=1/k[0],D[1]=1/k[1],D},Lt.normalize=function(D,k){var B=k[0],W=k[1],G=B*B+W*W;return G>0&&(G=1/Math.sqrt(G)),D[0]=k[0]*G,D[1]=k[1]*G,D},Lt.dot=function(D,k){return D[0]*k[0]+D[1]*k[1]},Lt.cross=function(D,k,B){var W=k[0]*B[1]-k[1]*B[0];return D[0]=D[1]=0,D[2]=W,D},Lt.lerp=function(D,k,B,W){var G=k[0],Q=k[1];return D[0]=G+W*(B[0]-G),D[1]=Q+W*(B[1]-Q),D},Lt.random=function(D,k){k=k||1;var B=2*a.RANDOM()*Math.PI;return D[0]=Math.cos(B)*k,D[1]=Math.sin(B)*k,D},Lt.transformMat2=function(D,k,B){var W=k[0],G=k[1];return D[0]=B[0]*W+B[2]*G,D[1]=B[1]*W+B[3]*G,D},Lt.transformMat2d=function(D,k,B){var W=k[0],G=k[1];return D[0]=B[0]*W+B[2]*G+B[4],D[1]=B[1]*W+B[3]*G+B[5],D},Lt.transformMat3=function(D,k,B){var W=k[0],G=k[1];return D[0]=B[0]*W+B[3]*G+B[6],D[1]=B[1]*W+B[4]*G+B[7],D},Lt.transformMat4=function(D,k,B){var W=k[0],G=k[1];return D[0]=B[0]*W+B[4]*G+B[12],D[1]=B[1]*W+B[5]*G+B[13],D},Lt.rotate=function(D,k,B,W){var G=k[0]-B[0],Q=k[1]-B[1],K=Math.sin(W),Z=Math.cos(W);return D[0]=G*Z-Q*K+B[0],D[1]=G*K+Q*Z+B[1],D},Lt.angle=function(D,k){var B=D[0],W=D[1],G=k[0],Q=k[1],K=Math.sqrt(B*B+W*W)*Math.sqrt(G*G+Q*Q);return Math.acos(Math.min(Math.max(K&&(B*G+W*Q)/K,-1),1))},Lt.zero=function(D){return D[0]=0,D[1]=0,D},Lt.str=function(D){return"vec2("+D[0]+", "+D[1]+")"},Lt.exactEquals=function(D,k){return D[0]===k[0]&&D[1]===k[1]},Lt.equals=function(D,k){var B=D[0],W=D[1],G=k[0],Q=k[1];return Math.abs(B-G)<=a.EPSILON*Math.max(1,Math.abs(B),Math.abs(G))&&Math.abs(W-Q)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(Q))},Lt.forEach=Lt.sqrLen=Lt.sqrDist=Lt.dist=Lt.div=Lt.mul=Lt.sub=Lt.len=void 0;var a=(function(D,k){if(D&&D.__esModule)return D;if(D===null||h(D)!=="object"&&typeof D!="function")return{default:D};var B=u(void 0);if(B&&B.has(D))return B.get(D);var W={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in D)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(D,Q)){var K=G?Object.getOwnPropertyDescriptor(D,Q):null;K&&(K.get||K.set)?Object.defineProperty(W,Q,K):W[Q]=D[Q]}return W.default=D,B&&B.set(D,W),W})(A());function u(D){if(typeof WeakMap!="function")return null;var k=new WeakMap,B=new WeakMap;return(u=function(W){return W?B:k})(D)}function p(){var D=new a.ARRAY_TYPE(2);return a.ARRAY_TYPE!=Float32Array&&(D[0]=0,D[1]=0),D}function _(D,k,B){return D[0]=k[0]-B[0],D[1]=k[1]-B[1],D}function m(D,k,B){return D[0]=k[0]*B[0],D[1]=k[1]*B[1],D}function b(D,k,B){return D[0]=k[0]/B[0],D[1]=k[1]/B[1],D}function M(D,k){return Math.hypot(k[0]-D[0],k[1]-D[1])}function P(D,k){var B=k[0]-D[0],W=k[1]-D[1];return B*B+W*W}function R(D){return Math.hypot(D[0],D[1])}function E(D){var k=D[0],B=D[1];return k*k+B*B}Lt.len=R,Lt.sub=_,Lt.mul=m,Lt.div=b,Lt.dist=M,Lt.sqrDist=P,Lt.sqrLen=E;var O,L=(O=p(),function(D,k,B,W,G,Q){var K,Z;for(k||(k=2),B||(B=0),Z=W?Math.min(W*k+B,D.length):D.length,K=B;K<Z;K+=k)O[0]=D[K],O[1]=D[K+1],G(O,O,Q),D[K]=O[0],D[K+1]=O[1];return D});return Lt.forEach=L,Lt}function mn(){if(Ft)return x;function h(D){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},h(D)}Ft=1,Object.defineProperty(x,"__esModule",{value:!0}),x.vec4=x.vec3=x.vec2=x.quat2=x.quat=x.mat4=x.mat3=x.mat2d=x.mat2=x.glMatrix=void 0;var a=L(A());x.glMatrix=a;var u=L(z());x.mat2=u;var p=L(Y());x.mat2d=p;var _=L(ee());x.mat3=_;var m=L(ve());x.mat4=m;var b=L(ke());x.quat=b;var M=L(Ge());x.quat2=M;var P=L(nn());x.vec2=P;var R=L(be());x.vec3=R;var E=L(xe());function O(D){if(typeof WeakMap!="function")return null;var k=new WeakMap,B=new WeakMap;return(O=function(W){return W?B:k})(D)}function L(D,k){if(D&&D.__esModule)return D;if(D===null||h(D)!=="object"&&typeof D!="function")return{default:D};var B=O(k);if(B&&B.has(D))return B.get(D);var W={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in D)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(D,Q)){var K=G?Object.getOwnPropertyDescriptor(D,Q):null;K&&(K.get||K.set)?Object.defineProperty(W,Q,K):W[Q]=D[Q]}return W.default=D,B&&B.set(D,W),W}return x.vec4=E,x}var Xt,mt,Jt,Kt,_e=mn(),bn=(function(){if(mt)return Xt;function h(a,u,p,_){this.cx=3*a,this.bx=3*(p-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(_-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=u,this.p2x=p,this.p2y=_}return mt=1,Xt=h,h.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,u){if(u===void 0&&(u=1e-6),a<0)return 0;if(a>1)return 1;for(var p=a,_=0;_<8;_++){var m=this.sampleCurveX(p)-a;if(Math.abs(m)<u)return p;var b=this.sampleCurveDerivativeX(p);if(Math.abs(b)<1e-6)break;p-=m/b}var M=0,P=1;for(p=a,_=0;_<20&&(m=this.sampleCurveX(p),!(Math.abs(m-a)<u));_++)a>m?M=p:P=p,p=.5*(P-M)+M;return p},solve:function(a,u){return this.sampleCurveY(this.solveCurveX(a,u))}},Xt})(),On=f(bn);function je(){if(Kt)return Jt;function h(a,u){this.x=a,this.y=u}return Kt=1,Jt=h,h.prototype={clone:function(){return new h(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,u){return this.clone()._rotateAround(a,u)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var u=a.x-this.x,p=a.y-this.y;return u*u+p*p},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,u){return Math.atan2(this.x*u-this.y*a,this.x*a+this.y*u)},_matMult:function(a){var u=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=u,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var u=Math.cos(a),p=Math.sin(a),_=p*this.x+u*this.y;return this.x=u*this.x-p*this.y,this.y=_,this},_rotateAround:function(a,u){var p=Math.cos(a),_=Math.sin(a),m=u.y+_*(this.x-u.x)+p*(this.y-u.y);return this.x=u.x+p*(this.x-u.x)-_*(this.y-u.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(a){return a instanceof h?a:Array.isArray(a)?new h(a[0],a[1]):a},Jt}var ge=f(je());function nt(h,a){if(Array.isArray(h)){if(!Array.isArray(a)||h.length!==a.length)return!1;for(let u=0;u<h.length;u++)if(!nt(h[u],a[u]))return!1;return!0}if(typeof h=="object"&&h!==null&&a!==null){if(typeof a!="object"||Object.keys(h).length!==Object.keys(a).length)return!1;for(const u in h)if(!nt(h[u],a[u]))return!1;return!0}return h===a}const It=Math.PI/180,ht=180/Math.PI;function ut(h){return h*It}function Rt(h){return h*ht}const ze=[[0,0],[1,0],[1,1],[0,1]];function lt(h){if(h<=0)return 0;if(h>=1)return 1;const a=h*h,u=a*h;return 4*(h<.5?u:3*(h-a)+u-.75)}function at(h,a,u,p){const _=new On(h,a,u,p);return function(m){return _.solve(m)}}const Et=at(.25,.1,.25,1);function $e(h,a,u){return Math.min(u,Math.max(a,h))}function Mt(h,a,u){return(u=$e((u-h)/(a-h),0,1))*u*(3-2*u)}function tn(h,a,u){const p=u-a,_=((h-a)%p+p)%p+a;return _===a?u:_}function on(h,a,u){if(!h.length)return u(null,[]);let p=h.length;const _=new Array(h.length);let m=null;h.forEach(((b,M)=>{a(b,((P,R)=>{P&&(m=P),_[M]=R,--p==0&&u(m,_)}))}))}function vn(h,...a){for(const u of a)for(const p in u)h[p]=u[p];return h}let _t=1;function wt(){return _t++}function Ve(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))}function qe(h,a){h.forEach((u=>{a[u]&&(a[u]=a[u].bind(a))}))}function Pt(h,a,u){const p={};for(const _ in h)p[_]=a.call(this,h[_],_,h);return p}function Qt(h,a,u){const p={};for(const _ in h)a.call(this,h[_],_,h)&&(p[_]=h[_]);return p}function cn(h){return Array.isArray(h)?h.map(cn):typeof h=="object"&&h?Pt(h,cn):h}const dn={};function Te(h){dn[h]||(typeof console<"u"&&console.warn(h),dn[h]=!0)}function ye(h,a,u){return(u.y-h.y)*(a.x-h.x)>(a.y-h.y)*(u.x-h.x)}function We(h){let a=0;for(let u,p,_=0,m=h.length,b=m-1;_<m;b=_++)u=h[_],p=h[b],a+=(p.x-u.x)*(u.y+p.y);return a}function ot([h,a,u]){const p=ut(a+90),_=ut(u);return{x:h*Math.cos(p)*Math.sin(_),y:h*Math.sin(p)*Math.sin(_),z:h*Math.cos(_),azimuthal:a,polar:u}}function At(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Vt(h){const a={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((u,p,_,m)=>{const b=_||m;return a[p]=!b||b.toLowerCase(),""})),a["max-age"]){const u=parseInt(a["max-age"],10);isNaN(u)?delete a["max-age"]:a["max-age"]=u}return a}let an=null;function xn(h,a){return[h[4*a],h[4*a+1],h[4*a+2],h[4*a+3]]}function Hn(h,a,u,p){for(;a<u;){const _=a+u>>1;h[_]<p?a=_+1:u=_}return a}function Gn(h,a,u,p){for(;a<u;){const _=a+u>>1;h[_]<=p?a=_+1:u=_}return a}function cr(h){return h>0?1/(1.001-h):1+h}function yt(h){return h>0?1-1/(1.001-h):-h}const ue={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!ue.API_URL)return null;try{const h=new URL(ue.API_URL);return h.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":h.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function we(h){return ue.API_URL_REGEX.test(h)}function Re(h){return ue.API_SPRITE_REGEX.test(h)}let Xe,Ue,it,vt,st,kt;function zt(){return Xe==null&&(Xe=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Xe}const Nt={now:()=>vt!==void 0?vt:performance.now(),setNow(h){vt=h},restoreNow(){vt=void 0},frame(h){const a=requestAnimationFrame(h);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(h,a=0){const{width:u,height:p}=h;st||(st=document.createElement("canvas"));const _=st.getContext("2d",{willReadFrequently:!0});if(!_)throw new Error("failed to create canvas 2d context");return(u>st.width||p>st.height)&&(st.width=u,st.height=p),_.clearRect(-a,-a,u+2*a,p+2*a),_.drawImage(h,0,0,u,p),_.getImageData(-a,-a,u+2*a,p+2*a)},resolveURL:h=>(Ue||(Ue=document.createElement("a")),Ue.href=h,Ue.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(it==null&&(it=window.matchMedia("(prefers-reduced-motion: reduce)")),it.matches)},hasCanvasFingerprintNoise(){if(kt!==void 0)return kt;if(!zt())return kt=!1,!1;const h=new OffscreenCanvas(85,1),a=h.getContext("2d",{willReadFrequently:!0});let u=0;for(let _=0;_<h.width;++_)a.fillStyle=`rgba(${u++},${u++},${u++}, 255)`,a.fillRect(_,0,1,1);const p=a.getImageData(0,0,h.width,h.height);u=0;for(let _=0;_<p.data.length;++_)if(_%4!=3&&u++!==p.data[_])return kt=!0,!0;return kt=!1,!1}};function un(h,a){const u=h.indexOf("?");if(u<0)return`${h}?${new URLSearchParams(a).toString()}`;const p=new URLSearchParams(h.slice(u));for(const _ in a)p.set(_,a[_]);return`${h.slice(0,u)}?${p.toString()}`}function Tn(h,a={persistentParams:[]}){const u=h.indexOf("?");if(u<0)return h;const p=new URLSearchParams,_=new URLSearchParams(h.slice(u));for(const b of a.persistentParams){const M=_.get(b);M&&p.set(b,M)}const m=p.toString();return`${h.slice(0,u)}${m.length>0?`?${m}`:""}`}const In="mapbox-tiles";let sr=500,dr=50;const hr=["language","worldview","jobid"];let gr,Ai;function Gi(){try{return caches}catch{}}function Sr(){const h=Gi();h&&gr==null&&(gr=h.open(In))}let ni=1/0;const ri={supported:!1,testSupport:function(h){!ro&&us&&(Vo?ta(h):li=h)}};let li,us,ro=!1,Vo=!1;const Pl=typeof self<"u"?self:{};function ta(h){const a=h.createTexture();h.bindTexture(h.TEXTURE_2D,a);try{if(h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,us),h.isContextLost())return;ri.supported=!0}catch{}h.deleteTexture(a),ro=!0}Pl.document&&(us=Pl.document.createElement("img"),us.onload=function(){li&&ta(li),li=null,Vo=!0},us.onerror=function(){ro=!0,li=null},us.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const io={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(io);class _o extends Error{constructor(a,u,p){u===401&&we(p)&&(a+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(a),this.status=u,this.url=p}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const kf=At()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Ol=function(h,a){if(!(/^file:/.test(u=h.url)||/^file:/.test(kf())&&!/^\w+:/.test(u))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return(function(p,_){const m=new AbortController,b=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:kf(),referrerPolicy:p.referrerPolicy,signal:m.signal});let M=!1,P=!1;const R=(E=b.url).indexOf("sku=")>0&&we(E);var E;p.type==="json"&&b.headers.set("Accept","application/json");const O=(D,k,B)=>{if(P)return;if(D&&D.message!=="SecurityError"&&Te(D.toString()),k&&B)return L(k);const W=Date.now();fetch(b).then((G=>{if(G.ok){const Q=R?G.clone():null;return L(G,Q,W)}return _(new _o(G.statusText,G.status,p.url))})).catch((G=>{G.name!=="AbortError"&&_(new Error(`${G.message} ${p.url}`))}))},L=(D,k,B)=>{(p.type==="arrayBuffer"?D.arrayBuffer():p.type==="json"?D.json():D.text()).then((W=>{P||(k&&B&&(function(G,Q,K){if(Sr(),gr==null)return;const Z=Vt(Q.headers.get("Cache-Control")||"");if(Z["no-store"])return;const re={status:Q.status,statusText:Q.statusText,headers:new Headers};Q.headers.forEach(((Pe,Me)=>re.headers.set(Me,Pe))),Z["max-age"]&&re.headers.set("Expires",new Date(K+1e3*Z["max-age"]).toUTCString());const ce=re.headers.get("Expires");if(!ce||new Date(ce).getTime()-K<42e4)return;let fe=Tn(G.url,{persistentParams:hr});if(Q.status===206){const Pe=G.headers.get("Range");if(!Pe)return;re.status=200,fe=un(fe,{range:Pe})}(function(Pe,Me){if(Ai===void 0)try{new Response(new ReadableStream),Ai=!0}catch{Ai=!1}Ai?Me(Pe.body):Pe.blob().then(Me)})(Q,(Pe=>{const Me=new Response((Ae=Q.status)!==200&&Ae!==404&&[101,103,204,205,304].includes(Ae)?null:Pe,re);var Ae;Sr(),gr?.then((Ze=>Ze.put(fe,Me))).catch((Ze=>Te(Ze.message)))}))})(b,k,B),M=!0,_(null,W,D.headers.get("Cache-Control"),D.headers.get("Expires")))})).catch((W=>{P||_(new Error(W.message))}))};return R?(function(D,k){if(Sr(),gr==null)return k(null);gr.then((B=>{let W=Tn(D.url,{persistentParams:hr});const G=D.headers.get("Range");G&&(W=un(W,{range:G})),B.match(W).then((Q=>{const K=(function(Z){if(!Z)return!1;const re=new Date(Z.headers.get("Expires")||0),ce=Vt(Z.headers.get("Cache-Control")||"");return re>Date.now()&&!ce["no-cache"]})(Q);B.delete(W),K&&B.put(W,Q.clone()),k(null,Q,K)})).catch(k)})).catch(k)})(b,O):O(null,null),{cancel:()=>{P=!0,M||m.abort()}}})(h,a);if(At()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,a,void 0,!0)}var u;return(function(p,_){const m=new XMLHttpRequest;m.open(p.method||"GET",p.url,!0),p.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const b in p.headers)m.setRequestHeader(b,p.headers[b]);return p.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=p.credentials==="include",m.onerror=()=>{_(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let b=m.response;if(p.type==="json")try{b=JSON.parse(m.response)}catch(M){return _(M)}_(null,b,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else _(new _o(m.statusText,m.status,p.url))},m.send(p.body),{cancel:()=>m.abort()}})(h,a)},Pc=function(h,a){return Ol(vn(h,{type:"arrayBuffer"}),a)};function eb(h){const a=document.createElement("a");return a.href=h,a.protocol===location.protocol&&a.host===location.host}const Py="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let lg,Lf;lg=[],Lf=0;const tb=function(h,a){if(ri.supported&&(h.headers||(h.headers={}),h.headers.accept="image/webp,*/*"),Lf>=ue.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:h,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return lg.push(m),m}Lf++;let u=!1;const p=()=>{if(!u)for(u=!0,Lf--;lg.length&&Lf<ue.MAX_PARALLEL_IMAGE_REQUESTS;){const m=lg.shift(),{requestParameters:b,callback:M,cancelled:P}=m;P||(m.cancel=tb(b,M).cancel)}},_=Pc(h,((m,b,M,P)=>{p(),m?a(m):b&&(self.createImageBitmap?(function(R,E){const O=new Blob([new Uint8Array(R)],{type:"image/png"});createImageBitmap(O).then((L=>{E(null,L)})).catch((L=>{E(new Error(`Could not load image because of ${L.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))})(b,((R,E)=>a(R,E,M,P))):(function(R,E){const O=new Image;O.onload=()=>{E(null,O),URL.revokeObjectURL(O.src),O.onload=null,requestAnimationFrame((()=>{O.src=Py}))},O.onerror=()=>E(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const L=new Blob([new Uint8Array(R)],{type:"image/png"});O.src=R.byteLength?URL.createObjectURL(L):Py})(b,((R,E)=>a(R,E,M,P))))}));return{cancel:()=>{_.cancel(),p()}}};var _E,yE,nb,Nf={exports:{}},Ja={exports:{}},ic={exports:{}},ud=(function(){if(nb)return Nf.exports;nb=1;var h=(_E||(_E=1,Ja.exports=function(u,p){var _,m,b,M,P,R,E,O;for(m=u.length-(_=3&u.length),b=p,P=3432918353,R=461845907,O=0;O<m;)E=255&u.charCodeAt(O)|(255&u.charCodeAt(++O))<<8|(255&u.charCodeAt(++O))<<16|(255&u.charCodeAt(++O))<<24,++O,b=27492+(65535&(M=5*(65535&(b=(b^=E=(65535&(E=(E=(65535&E)*P+(((E>>>16)*P&65535)<<16)&4294967295)<<15|E>>>17))*R+(((E>>>16)*R&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(E=0,_){case 3:E^=(255&u.charCodeAt(O+2))<<16;case 2:E^=(255&u.charCodeAt(O+1))<<8;case 1:b^=E=(65535&(E=(E=(65535&(E^=255&u.charCodeAt(O)))*P+(((E>>>16)*P&65535)<<16)&4294967295)<<15|E>>>17))*R+(((E>>>16)*R&65535)<<16)&4294967295}return b^=u.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),Ja.exports),a=(yE||(yE=1,ic.exports=function(u,p){for(var _,m=u.length,b=p^m,M=0;m>=4;)_=1540483477*(65535&(_=255&u.charCodeAt(M)|(255&u.charCodeAt(++M))<<8|(255&u.charCodeAt(++M))<<16|(255&u.charCodeAt(++M))<<24))+((1540483477*(_>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),m-=4,++M;switch(m){case 3:b^=(255&u.charCodeAt(M+2))<<16;case 2:b^=(255&u.charCodeAt(M+1))<<8;case 1:b=1540483477*(65535&(b^=255&u.charCodeAt(M)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),ic.exports);return Nf.exports=h,Nf.exports.murmur3=h,Nf.exports.murmur2=a,Nf.exports})(),Qa=f(ud);class Ca{constructor(a,...u){vn(this,u[0]||{}),this.type=a}}class Ff extends Ca{constructor(a,u={}){super("error",vn({error:a},u))}}function rb(h,a,u){u[h]&&u[h].indexOf(a)!==-1||(u[h]=u[h]||[],u[h].push(a))}function Oy(h,a,u){if(u&&u[h]){const p=u[h].indexOf(a);p!==-1&&u[h].splice(p,1)}}class sc{on(a,u){return this._listeners=this._listeners||{},rb(a,u,this._listeners),this}off(a,u){return Oy(a,u,this._listeners),Oy(a,u,this._oneTimeListeners),this}once(a,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},rb(a,u,this._oneTimeListeners),this):new Promise((p=>{this.once(a,p)}))}fire(a,u){const p=typeof a=="string"?new Ca(a,u):a,_=p.type;if(this.listens(_)){p.target=this;const m=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(const P of m)P.call(this,p);const b=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(const P of b)Oy(_,P,this._oneTimeListeners),P.call(this,p);const M=this._eventedParent;M&&(vn(p,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(p))}else p instanceof Ff&&console.error(p.error);return this}listens(a){return!!(this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a))}setEventedParent(a,u){return this._eventedParent=a,this._eventedParentData=u,this}}class da{constructor(a){typeof a=="string"?this.name=a:(this.name=a.name,this.iconsetId=a.iconsetId)}static from(a){return new da(a)}static toString(a){return a.iconsetId?`${a.name}${a.iconsetId}`:a.name}static parse(a){const[u,p]=a.split("");return new da({name:u,iconsetId:p})}static isEqual(a,u){return a.name===u.name&&a.iconsetId===u.iconsetId}toString(){return da.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var vE,ib={},Dl=(function(){if(vE)return ib;vE=1;var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(m){return(m=Math.round(m))<0?0:m>255?255:m}function u(m){return a(m[m.length-1]==="%"?parseFloat(m)/100*255:parseInt(m))}function p(m){return(b=m[m.length-1]==="%"?parseFloat(m)/100:parseFloat(m))<0?0:b>1?1:b;var b}function _(m,b,M){return M<0?M+=1:M>1&&(M-=1),6*M<1?m+(b-m)*M*6:2*M<1?b:3*M<2?m+(b-m)*(2/3-M)*6:m}try{ib.parseCSSColor=function(m){var b,M=m.replace(/ /g,"").toLowerCase();if(M in h)return h[M].slice();if(M[0]==="#")return M.length===4?(b=parseInt(M.substr(1),16))>=0&&b<=4095?[(3840&b)>>4|(3840&b)>>8,240&b|(240&b)>>4,15&b|(15&b)<<4,1]:null:M.length===7&&(b=parseInt(M.substr(1),16))>=0&&b<=16777215?[(16711680&b)>>16,(65280&b)>>8,255&b,1]:null;var P=M.indexOf("("),R=M.indexOf(")");if(P!==-1&&R+1===M.length){var E=M.substr(0,P),O=M.substr(P+1,R-(P+1)).split(","),L=1;switch(E){case"rgba":if(O.length!==4)return null;L=p(O.pop());case"rgb":return O.length!==3?null:[u(O[0]),u(O[1]),u(O[2]),L];case"hsla":if(O.length!==4)return null;L=p(O.pop());case"hsl":if(O.length!==3)return null;var D=(parseFloat(O[0])%360+360)%360/360,k=p(O[1]),B=p(O[2]),W=B<=.5?B*(k+1):B+k-B*k,G=2*B-W;return[a(255*_(G,W,D+1/3)),a(255*_(G,W,D)),a(255*_(G,W,D-1/3)),L];default:return null}}return null}}catch{}return ib})();class ii{constructor(a,u,p,_=1){this.r=a,this.g=u,this.b=p,this.a=_}static parse(a){if(!a)return;if(a instanceof ii)return a;if(typeof a!="string")return;const u=Dl.parseCSSColor(a);return u?new ii(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toStringPremultipliedAlpha(){const[a,u,p,_]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(a)},${Math.round(u)},${Math.round(p)},${_})`}toString(){const[a,u,p,_]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*a)},${Math.round(255*u)},${Math.round(255*p)},${_})`}toRenderColor(a){const{r:u,g:p,b:_,a:m}=this;return new sb(a,u,p,_,m)}clone(){return new ii(this.r,this.g,this.b,this.a)}}class sb{constructor(a,u,p,_,m){if(a){const b=a.image.height,M=b*b;u=m===0?0:u/m*(b-1),p=m===0?0:p/m*(b-1),_=m===0?0:_/m*(b-1);const P=Math.floor(u),R=Math.floor(p),E=Math.floor(_),O=Math.ceil(u),L=Math.ceil(p),D=Math.ceil(_),k=u-P,B=p-R,W=_-E,G=a.image.data,Q=4*(P+R*M+E*b),K=4*(P+R*M+D*b),Z=4*(P+L*M+E*b),re=4*(P+L*M+D*b),ce=4*(O+R*M+E*b),fe=4*(O+R*M+D*b),Pe=4*(O+L*M+E*b),Me=4*(O+L*M+D*b);if(Q<0||Me>=G.length)throw new Error("out of range");this.r=jn(jn(jn(G[Q],G[K],W),jn(G[Z],G[re],W),B),jn(jn(G[ce],G[fe],W),jn(G[Pe],G[Me],W),B),k)/255*m,this.g=jn(jn(jn(G[Q+1],G[K+1],W),jn(G[Z+1],G[re+1],W),B),jn(jn(G[ce+1],G[fe+1],W),jn(G[Pe+1],G[Me+1],W),B),k)/255*m,this.b=jn(jn(jn(G[Q+2],G[K+2],W),jn(G[Z+2],G[re+2],W),B),jn(jn(G[ce+2],G[fe+2],W),jn(G[Pe+2],G[Me+2],W),B),k)/255*m,this.a=m}else this.r=u,this.g=p,this.b=_,this.a=m}toArray(){const{r:a,g:u,b:p,a:_}=this;return _===0?[0,0,0,0]:[255*a/_,255*u/_,255*p/_,_]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:a,g:u,b:p,a:_}=this,m=Math.min(Math.max(a/_,0),1),b=Math.min(Math.max(u/_,0),1),M=Math.min(Math.max(p/_,0),1),P=Math.min(m,b,M),R=Math.max(m,b,M),E=(P+R)/2;if(P===R)return[0,0,100*E,_];const O=R-P,L=E>.5?O/(2-R-P):O/(R+P);let D=0;return R===m?D=(b-M)/O+(b<M?6:0):R===b?D=(M-m)/O+2:R===M&&(D=(m-b)/O+4),D*=60,[Math.min(Math.max(D,0),360),Math.min(Math.max(100*L,0),100),Math.min(Math.max(100*E,0),100),_]}toArray01(){const{r:a,g:u,b:p,a:_}=this;return _===0?[0,0,0,0]:[a/_,u/_,p/_,_]}toArray01Scaled(a){const{r:u,g:p,b:_,a:m}=this;return m===0?[0,0,0]:[u/m*a,p/m*a,_/m*a]}toArray01PremultipliedAlpha(){const{r:a,g:u,b:p,a:_}=this;return[a,u,p,_]}toArray01Linear(){const{r:a,g:u,b:p,a:_}=this;return _===0?[0,0,0,0]:[Math.pow(a/_,2.2),Math.pow(u/_,2.2),Math.pow(p/_,2.2),_]}}function jn(h,a,u){return h*(1-u)+a*u}function bE(h,a,u){return h.map(((p,_)=>jn(p,a[_],u)))}function xE(h){return h*h*h*h*h}ii.black=new ii(0,0,0,1),ii.white=new ii(1,1,1,1),ii.transparent=new ii(0,0,0,0),ii.red=new ii(1,0,0,1),ii.blue=new ii(0,0,1,1);var cg=Object.freeze({__proto__:null,array:bE,color:function(h,a,u){return new ii(jn(h.r,a.r,u),jn(h.g,a.g,u),jn(h.b,a.b,u),jn(h.a,a.a,u))},easeIn:xE,number:jn});function Or(h,...a){for(const u of a)for(const p in u)h[p]=u[p];return h}class Rl extends Error{constructor(a,u){super(u),this.message=u,this.key=a}}class Dy{constructor(a,u=[]){this.parent=a,this.bindings={};for(const[p,_]of u)this.bindings[p]=_}concat(a){return new Dy(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const zf={kind:"null"},Ln={kind:"number"},ti={kind:"string"},zr={kind:"boolean"},jo={kind:"color"},Bf={kind:"object"},Wr={kind:"value"},au={kind:"collator"},ug={kind:"formatted"},lu={kind:"resolvedImage"};function Io(h,a){return{kind:"array",itemType:h,N:a}}function ds(h){if(h.kind==="array"){const a=ds(h.itemType);return typeof h.N=="number"?`array<${a}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${a}>`}return h.kind}const oc=[zf,Ln,ti,zr,jo,ug,Bf,Io(Wr),lu];function $f(h,a){if(a.kind==="error")return null;if(h.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!$f(h.itemType,a.itemType))&&(typeof h.N!="number"||h.N===a.N))return null}else{if(h.kind===a.kind)return null;if(h.kind==="value"){for(const u of oc)if(!$f(u,a))return null}}return`Expected ${ds(h)} but found ${ds(a)} instead.`}function ob(h,a){return a.some((u=>u.kind===h.kind))}function Vf(h,a){return a.some((u=>u==="null"?h===null:u==="array"?Array.isArray(h):u==="object"?h&&!Array.isArray(h)&&typeof h=="object":u===typeof h))}class Ry{constructor(a,u,p){this.sensitivity=a?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,u){return this.collator.compare(a,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class dg{constructor(a,u,p,_,m){this.text=a.normalize?a.normalize():a,this.image=u,this.scale=p,this.fontStack=_,this.textColor=m}}class Uo{constructor(a){this.sections=a}static fromString(a){return new Uo([new dg(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((a=>a.text.length!==0||!!a.image&&a.image.hasPrimary()))}static factory(a){return a instanceof Uo?a:Uo.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map((a=>a.text)).join("")}serialize(){const a=["format"];for(const u of this.sections){if(u.image){const _=u.image.getPrimary().id.toString();a.push(["image",_]);continue}a.push(u.text);const p={};u.fontStack&&(p["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(p["font-scale"]=u.scale),u.textColor&&(p["text-color"]=["rgba"].concat(u.textColor.toRenderColor(null).toArray())),a.push(p)}return a}}class Oc{constructor(a,u={}){if(this.id=da.from(a),this.options=Object.assign({},u),u.transform){const{a:p,b:_,c:m,d:b,e:M,f:P}=u.transform;this.options.transform=new DOMMatrix([p,_,m,b,M,P])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a,b:u,c:p,d:_,e:m,f:b}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a,b:u,c:p,d:_,e:m,f:b}})}static parse(a){let u,p,_,m;try{({name:u,iconsetId:p,params:_,transform:m}=JSON.parse(a)||{})}catch{return null}if(!u)return null;const{a:b,b:M,c:P,d:R,e:E,f:O}=m||{};return new Oc({name:u,iconsetId:p},{params:_,transform:new DOMMatrix([b,M,P,R,E,O])})}scaleSelf(a){return this.options.transform.scaleSelf(a),this}}class Ho{constructor(a,u,p,_,m=!1){this.primaryId=da.from(a),this.primaryOptions=u,p&&(this.secondaryId=da.from(p)),this.secondaryOptions=_,this.available=m}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new Oc(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new Oc(this.secondaryId,this.secondaryOptions):null}static from(a){return typeof a=="string"?Ho.build({name:a}):a}static build(a,u,p,_){return!a||typeof a=="object"&&!("name"in a)?null:new Ho(a,p,u,_)}}function hg(h,a,u,p){return typeof h=="number"&&h>=0&&h<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof u=="number"&&u>=0&&u<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[h,a,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[h,a,u,p]:[h,a,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ac(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof ii||h instanceof Ry||h instanceof Uo||h instanceof Ho)return!0;if(Array.isArray(h)){for(const a of h)if(!ac(a))return!1;return!0}if(typeof h=="object"){for(const a in h)if(!ac(h[a]))return!1;return!0}return!1}function Ps(h){if(h===null)return zf;if(typeof h=="string")return ti;if(typeof h=="boolean")return zr;if(typeof h=="number")return Ln;if(h instanceof ii)return jo;if(h instanceof Ry)return au;if(h instanceof Uo)return ug;if(h instanceof Ho)return lu;if(Array.isArray(h)){const a=h.length;let u;for(const p of h){const _=Ps(p);if(u){if(u===_)continue;u=Wr;break}u=_}return Io(u||Wr,a)}return Bf}function so(h){const a=typeof h;return h===null?"":a==="string"||a==="number"||a==="boolean"?String(h):h instanceof ii?h.toStringPremultipliedAlpha():h instanceof Uo||h instanceof Ho?h.toString():JSON.stringify(h)}class cu{constructor(a,u){this.type=a,this.value=u}static parse(a,u){if(a.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!ac(a[1]))return u.error("invalid value");const p=a[1];let _=Ps(p);const m=u.expectedType;return _.kind!=="array"||_.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(_=m),new cu(_,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ii?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Uo?this.value.serialize():this.value}}class ps{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const ab={string:ti,number:Ln,boolean:zr,object:Bf};class el{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");let p,_=1;const m=a[0];if(m==="array"){let M,P;if(a.length>2){const R=a[1];if(typeof R!="string"||!(R in ab)||R==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);M=ab[R],_++}else M=Wr;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return u.error('The length argument to "array" must be a positive integer literal',2);P=a[2],_++}p=Io(M,P)}else p=ab[m];const b=[];for(;_<a.length;_++){const M=u.parse(a[_],_,Wr);if(!M)return null;b.push(M)}return new el(p,b)}evaluate(a){for(let u=0;u<this.args.length;u++){const p=this.args[u].evaluate(a);if(!$f(this.type,Ps(p)))return p;if(u===this.args.length-1)throw new ps(`The expression ${JSON.stringify(this.args[u].serialize())} evaluated to ${ds(Ps(p))} but was expected to be of type ${ds(this.type)}.`)}return null}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}serialize(){const a=this.type,u=[a.kind];if(a.kind==="array"){const p=a.itemType;if(p.kind==="string"||p.kind==="number"||p.kind==="boolean"){u.push(p.kind);const _=a.N;(typeof _=="number"||this.args.length>1)&&u.push(_)}}return u.concat(this.args.map((p=>p.serialize())))}}class jf{constructor(a){this.type=ug,this.sections=a}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const p=a[1];if(!Array.isArray(p)&&typeof p=="object")return u.error("First argument must be an image or text section.");const _=[];let m=!1;for(let b=1;b<=a.length-1;++b){const M=a[b];if(m&&typeof M=="object"&&!Array.isArray(M)){m=!1;let P=null;if(M["font-scale"]&&(P=u.parseObjectValue(M["font-scale"],b,"font-scale",Ln),!P))return null;let R=null;if(M["text-font"]&&(R=u.parseObjectValue(M["text-font"],b,"text-font",Io(ti)),!R))return null;let E=null;if(M["text-color"]&&(E=u.parseObjectValue(M["text-color"],b,"text-color",jo),!E))return null;const O=_[_.length-1];O.scale=P,O.font=R,O.textColor=E}else{const P=u.parse(a[b],b,Wr);if(!P)return null;const R=P.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,_.push({content:P,scale:null,font:null,textColor:null})}}return new jf(_)}evaluate(a){return new Uo(this.sections.map((u=>{const p=u.content.evaluate(a);return Ps(p)===lu?new dg("",p,null,null,null):new dg(so(p),null,u.scale?u.scale.evaluate(a):null,u.font?u.font.evaluate(a).join(","):null,u.textColor?u.textColor.evaluate(a):null)})))}eachChild(a){for(const u of this.sections)a(u.content),u.scale&&a(u.scale),u.font&&a(u.font),u.textColor&&a(u.textColor)}outputDefined(){return!1}serialize(){const a=["format"];for(const u of this.sections){a.push(u.content.serialize());const p={};u.scale&&(p["font-scale"]=u.scale.serialize()),u.font&&(p["text-font"]=u.font.serialize()),u.textColor&&(p["text-color"]=u.textColor.serialize()),a.push(p)}return a}}class dd{constructor(a,u,p,_){this._imageWarnHistory={},this.type=lu,this.namePrimary=a,this.nameSecondary=u,p&&(this.paramsPrimary=p.params,this.iconsetIdPrimary=p.iconset?p.iconset.id:void 0),_&&(this.paramsSecondary=_.params,this.iconsetIdSecondary=_.iconset?_.iconset.id:void 0)}static parse(a,u){if(a.length<2)return u.error("Expected two or more arguments.");let p=1;const _=[];function m(){if(p<a.length){const M=u.parse(a[p],p++,ti);return M?(_.push({image:M,options:{}}),!0):(u.error(_.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function b(){if(p<a.length){const P=a[p];if((M=P)===null||typeof M!="object"||Array.isArray(M))return!0;const R=P.params,E=P.iconset,O=u.concat(p);if(!R&&!E)return p++,!0;if(R){if(typeof R!="object"||R.constructor!==Object)return O.error('Image options "params" should be an object'),!1;const L={},D=O.concat(void 0,"params");for(const k in R){if(!k)return D.error("Image parameter name should be non-empty"),!1;const B=D.concat(void 0,k).parse(R[k],void 0,jo,void 0,{typeAnnotation:"coerce"});if(!B)return!1;L[k]=B}_[_.length-1].options.params=L}if(E){if(typeof E!="object"||E.constructor!==Object)return O.error('Image options "iconset" should be an object'),!1;if(!E.id)return O.error('Image options "iconset" should have an "id" property'),!1;_[_.length-1].options.iconset=E}return p++,!0}var M;return!0}for(let M=0;M<2;M++)if(!m()||!b())return;return new dd(_[0].image,_[1]?_[1].image:void 0,_[0].options,_[1]?_[1].options:void 0)}evaluateParams(a,u){const p={};if(u){for(const _ in u)if(u[_])try{p[_]=u[_].evaluate(a)}catch{continue}if(Object.keys(p).length!==0)return{params:p}}}evaluate(a){const u={name:this.namePrimary.evaluate(a),iconsetId:this.iconsetIdPrimary},p=this.nameSecondary?{name:this.nameSecondary.evaluate(a),iconsetId:this.iconsetIdSecondary}:void 0,_=Ho.build(u,p,this.paramsPrimary?this.evaluateParams(a,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(a,this.paramsSecondary):void 0);if(_&&a.availableImages){const m=_.getPrimary().id;if(_.available=a.availableImages.some((b=>da.isEqual(b,m))),_.available){const b=_.getSecondary()?_.getSecondary().id:null;b&&(_.available=a.availableImages.some((M=>da.isEqual(M,b))))}}return _}eachChild(a){if(a(this.namePrimary),this.paramsPrimary)for(const u in this.paramsPrimary)this.paramsPrimary[u]&&a(this.paramsPrimary[u]);if(this.nameSecondary&&(a(this.nameSecondary),this.paramsSecondary))for(const u in this.paramsSecondary)this.paramsSecondary[u]&&a(this.paramsSecondary[u])}outputDefined(){return!1}serializeOptions(a,u){const p={};if(u&&(p.iconset={id:u}),a){p.params={};for(const _ in a)a[_]&&(p.params[_]=a[_].serialize())}return Object.keys(p).length>0?p:void 0}serialize(){const a=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const u=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);u&&a.push(u)}if(this.nameSecondary&&(a.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const u=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);u&&a.push(u)}return a}}function uu(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}const vO={"to-boolean":zr,"to-color":jo,"to-number":Ln,"to-string":ti};class du{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const p=a[0],_=[];let m=zf;if(p==="to-array"){if(!Array.isArray(a[1]))return null;const b=a[1].length;if(u.expectedType){if(u.expectedType.kind!=="array")return u.error(`Expected ${u.expectedType.kind} but found array.`);m=Io(u.expectedType.itemType,b)}else{if(!(b>0&&ac(a[1][0])))return null;m=Io(Ps(a[1][0]),b)}for(let M=0;M<b;M++){const P=a[1][M];let R;if(uu(P)==="array")R=u.parse(P,void 0,m.itemType);else{const E=uu(P);if(E!==m.itemType.kind)return u.error(`Expected ${m.itemType.kind} but found ${E}.`);R=u.registry.literal.parse(["literal",P===void 0?null:P],u)}if(!R)return null;_.push(R)}}else{if((p==="to-boolean"||p==="to-string")&&a.length!==2)return u.error("Expected one argument.");m=vO[p];for(let b=1;b<a.length;b++){const M=u.parse(a[b],b,Wr);if(!M)return null;_.push(M)}}return new du(m,_)}evaluate(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){let u,p;for(const _ of this.args){if(u=_.evaluate(a),p=null,u instanceof ii)return u;if(typeof u=="string"){const m=a.parseColor(u);if(m)return m}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:hg(u[0],u[1],u[2],u[3]),!p))return new ii(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new ps(p||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const p of this.args){if(u=p.evaluate(a),u===null)return 0;const _=Number(u);if(!isNaN(_))return _}throw new ps(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?Uo.fromString(so(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?Ho.build(so(this.args[0].evaluate(a))):this.type.kind==="array"?this.args.map((u=>u.evaluate(a))):so(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}serialize(){if(this.type.kind==="formatted")return new jf([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new dd(this.args[0]).serialize();const a=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild((u=>{a.push(u.serialize())})),a}}const bO=["Unknown","Point","LineString","Polygon"];class ky{constructor(a,u){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=a,this.options=u}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?bO[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(a){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,u=this.featureDistanceData.scale,{x:p,y:_}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(p*u-a[0])+this.featureDistanceData.bearing[1]*(_*u-a[1])}return 0}parseColor(a){let u=this._parseColorCache[a];return u||(u=this._parseColorCache[a]=ii.parse(a)),u}getConfig(a){return this.options?this.options.get(a):null}}class na{constructor(a,u,p,_,m){this.name=a,this.type=u,this._evaluate=p,this.args=_,this._overloadIndex=m}evaluate(a){if(!this._evaluate){const u=na.definitions[this.name];this._evaluate=Array.isArray(u)?u[2]:u.overloads[this._overloadIndex][1]}return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((a=>a.serialize())))}static parse(a,u){const p=a[0],_=na.definitions[p];if(!_)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(_)?_[0]:_.type,b=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,M=[];let P=null,R=-1;for(const[E,O]of b){if(Array.isArray(E)&&E.length!==a.length-1)continue;M.push(E),R++,P=new pb(u.registry,u.path,null,u.scope,void 0,u._scope,u.options);const L=[];let D=!1;for(let k=1;k<a.length;k++){const B=a[k],W=Array.isArray(E)?E[k-1]:E.type,G=P.parse(B,1+L.length,W);if(!G){D=!0;break}L.push(G)}if(!D)if(Array.isArray(E)&&E.length!==L.length)P.error(`Expected ${E.length} arguments, but found ${L.length} instead.`);else{for(let k=0;k<L.length;k++){const B=Array.isArray(E)?E[k]:E.type,W=L[k];P.concat(k+1).checkSubtype(B,W.type)}if(P.errors.length===0)return new na(p,m,O,L,R)}}if(M.length===1)u.errors.push(...P.errors);else{const E=(M.length?M:b.map((([L])=>L))).map(xO).join(" | "),O=[];for(let L=1;L<a.length;L++){const D=u.parse(a[L],1+O.length);if(!D)return null;O.push(ds(D.type))}u.error(`Expected arguments of type ${E}, but found (${O.join(", ")}) instead.`)}return null}static register(a,u){na.definitions=u;for(const p in u)a[p]=na}}function xO(h){return Array.isArray(h)?`(${h.map(ds).join(", ")})`:`(${ds(h.type)}...)`}class ah{constructor(a,u,p){this.type=au,this.locale=p,this.caseSensitive=a,this.diacriticSensitive=u}static parse(a,u){if(a.length!==2)return u.error("Expected one argument.");const p=a[1];if(typeof p!="object"||Array.isArray(p))return u.error("Collator options argument must be an object.");const _=p["case-sensitive"]===void 0?u.parse(!1,1,zr):u.parseObjectValue(p["case-sensitive"],1,"case-sensitive",zr);if(!_)return null;const m=p["diacritic-sensitive"]===void 0?u.parse(!1,1,zr):u.parseObjectValue(p["diacritic-sensitive"],1,"diacritic-sensitive",zr);if(!m)return null;let b=null;return p.locale&&(b=u.parseObjectValue(p.locale,1,"locale",ti),!b)?null:new ah(_,m,b)}evaluate(a){return new Ry(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}serialize(){const a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]}}function wE(h,a,u=0,p=h.length-1,_=wO){for(;p>u;){if(p-u>600){const P=p-u+1,R=a-u+1,E=Math.log(P),O=.5*Math.exp(2*E/3),L=.5*Math.sqrt(E*O*(P-O)/P)*(R-P/2<0?-1:1);wE(h,a,Math.max(u,Math.floor(a-R*O/P+L)),Math.min(p,Math.floor(a+(P-R)*O/P+L)),_)}const m=h[a];let b=u,M=p;for(fg(h,u,a),_(h[p],m)>0&&fg(h,u,p);b<M;){for(fg(h,b,M),b++,M--;_(h[b],m)<0;)b++;for(;_(h[M],m)>0;)M--}_(h[u],m)===0?fg(h,u,M):(M++,fg(h,M,p)),M<=a&&(u=M+1),a<=M&&(p=M-1)}}function fg(h,a,u){const p=h[a];h[a]=h[u],h[u]=p}function wO(h,a){return h<a?-1:h>a?1:0}function SO(h){let a=0;for(let u,p,_=0,m=h.length,b=m-1;_<m;b=_++)u=h[_],p=h[b],a+=(p.x-u.x)*(u.y+p.y);return a}function pg(h,a){h[0]=Math.min(h[0],a[0]),h[1]=Math.min(h[1],a[1]),h[2]=Math.max(h[2],a[0]),h[3]=Math.max(h[3],a[1])}function mg(h,a){return!(h[0]<=a[0]||h[2]>=a[2]||h[1]<=a[1]||h[3]>=a[3])}function EO(h,a,u){const p=h[0]-a[0],_=h[1]-a[1],m=h[0]-u[0],b=h[1]-u[1];return p*b-m*_==0&&p*m<=0&&_*b<=0}function lh(h,a,u=!1){let p=!1;for(let M=0,P=a.length;M<P;M++){const R=a[M];for(let E=0,O=R.length,L=O-1;E<O;L=E++){const D=R[L],k=R[E];if(EO(h,D,k))return u;(m=D)[1]>(_=h)[1]!=(b=k)[1]>_[1]&&_[0]<(b[0]-m[0])*(_[1]-m[1])/(b[1]-m[1])+m[0]&&(p=!p)}}var _,m,b;return p}function ch(h,a,u,p){const _=p[0]-u[0],m=p[1]-u[1],b=(h[0]-u[0])*m-_*(h[1]-u[1]),M=(a[0]-u[0])*m-_*(a[1]-u[1]);return b>0&&M<0||b<0&&M>0}function Ly(h,a,u,p){return(_=[p[0]-u[0],p[1]-u[1]])[0]*(m=[a[0]-h[0],a[1]-h[1]])[1]-_[1]*m[0]!=0&&!(!ch(h,a,u,p)||!ch(u,p,h,a));var _,m}const hd=8192;function lb(h,a){const u=(180+h[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,_=Math.pow(2,a.z);return[Math.round(u*_*hd),Math.round(p*_*hd)]}function TO(h,a){for(let u=0;u<a.length;u++)if(lh(h,a[u]))return!0;return!1}function MO(h,a,u){for(const p of u)for(let _=0,m=p.length,b=m-1;_<m;b=_++)if(Ly(h,a,p[b],p[_]))return!0;return!1}function SE(h,a){for(let u=0;u<h.length;++u)if(!lh(h[u],a))return!1;for(let u=0;u<h.length-1;++u)if(MO(h[u],h[u+1],a))return!1;return!0}function AO(h,a){for(let u=0;u<a.length;u++)if(SE(h,a[u]))return!0;return!1}function fd(h,a,u){const p=[];for(let _=0;_<h.length;_++){const m=[];for(let b=0;b<h[_].length;b++){const M=lb(h[_][b],u);pg(a,M),m.push(M)}p.push(m)}return p}function br(h,a,u){const p=[];for(let _=0;_<h.length;_++){const m=fd(h[_],a,u);p.push(m)}return p}function zn(h,a,u,p){if(h[0]<u[0]||h[0]>u[2]){const _=.5*p;let m=h[0]-u[0]>_?-p:u[0]-h[0]>_?p:0;m===0&&(m=h[0]-u[2]>_?-p:u[2]-h[0]>_?p:0),h[0]+=m}pg(a,h)}function Ny(h,a,u,p){const _=Math.pow(2,p.z)*hd,m=[p.x*hd,p.y*hd],b=[];if(!h)return b;for(const M of h)for(const P of M){const R=[P.x+m[0],P.y+m[1]];zn(R,a,u,_),b.push(R)}return b}function or(h,a,u,p){const _=Math.pow(2,p.z)*hd,m=[p.x*hd,p.y*hd],b=[];if(!h)return b;for(const P of h){const R=[];for(const E of P){const O=[E.x+m[0],E.y+m[1]];pg(a,O),R.push(O)}b.push(R)}if(a[2]-a[0]<=_/2){(M=a)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const P of b)for(const R of P)zn(R,a,u,_)}var M;return b}class hu{constructor(a,u){this.type=zr,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(ac(a[1])){const p=a[1];if(p.type==="FeatureCollection")for(let _=0;_<p.features.length;++_){const m=p.features[_].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new hu(p,p.features[_].geometry)}else if(p.type==="Feature"){const _=p.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new hu(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new hu(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return(function(u,p){const _=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],b=u.canonicalID();if(!b)return!1;if(p.type==="Polygon"){const M=fd(p.coordinates,m,b),P=Ny(u.geometry(),_,m,b);if(!mg(_,m))return!1;for(const R of P)if(!lh(R,M))return!1}if(p.type==="MultiPolygon"){const M=br(p.coordinates,m,b),P=Ny(u.geometry(),_,m,b);if(!mg(_,m))return!1;for(const R of P)if(!TO(R,M))return!1}return!0})(a,this.geometries);if(a.geometryType()==="LineString")return(function(u,p){const _=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],b=u.canonicalID();if(!b)return!1;if(p.type==="Polygon"){const M=fd(p.coordinates,m,b),P=or(u.geometry(),_,m,b);if(!mg(_,m))return!1;for(const R of P)if(!SE(R,M))return!1}if(p.type==="MultiPolygon"){const M=br(p.coordinates,m,b),P=or(u.geometry(),_,m,b);if(!mg(_,m))return!1;for(const R of P)if(!AO(R,M))return!1}return!0})(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Uf={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},nr=1/298.257223563,cb=nr*(2-nr),uh=Math.PI/180;class Hf{static fromTile(a,u,p){const _=Math.PI*(1-2*(a+.5)/Math.pow(2,u)),m=Math.atan(.5*(Math.exp(_)-Math.exp(-_)))/uh;return new Hf(m,p)}static get units(){return Uf}constructor(a,u){if(a===void 0)throw new Error("No latitude given.");if(u&&!Uf[u])throw new Error(`Unknown unit ${u}. Use one of: ${Object.keys(Uf).join(", ")}`);const p=6378.137*uh*(u?Uf[u]:1),_=Math.cos(a*uh),m=1/(1-cb*(1-_*_)),b=Math.sqrt(m);this.kx=p*b*_,this.ky=p*b*m*(1-cb)}distance(a,u){const p=ls(a[0]-u[0])*this.kx,_=(a[1]-u[1])*this.ky;return Math.sqrt(p*p+_*_)}bearing(a,u){const p=ls(u[0]-a[0])*this.kx;return Math.atan2(p,(u[1]-a[1])*this.ky)/uh}destination(a,u,p){const _=p*uh;return this.offset(a,Math.sin(_)*u,Math.cos(_)*u)}offset(a,u,p){return[a[0]+u/this.kx,a[1]+p/this.ky]}lineDistance(a){let u=0;for(let p=0;p<a.length-1;p++)u+=this.distance(a[p],a[p+1]);return u}area(a){let u=0;for(let p=0;p<a.length;p++){const _=a[p];for(let m=0,b=_.length,M=b-1;m<b;M=m++)u+=ls(_[m][0]-_[M][0])*(_[m][1]+_[M][1])*(p?-1:1)}return Math.abs(u)/2*this.kx*this.ky}along(a,u){let p=0;if(u<=0)return a[0];for(let _=0;_<a.length-1;_++){const m=a[_],b=a[_+1],M=this.distance(m,b);if(p+=M,p>u)return Wf(m,b,(u-(p-M))/M)}return a[a.length-1]}pointToSegmentDistance(a,u,p){let[_,m]=u,b=ls(p[0]-_)*this.kx,M=(p[1]-m)*this.ky;if(b!==0||M!==0){const P=(ls(a[0]-_)*this.kx*b+(a[1]-m)*this.ky*M)/(b*b+M*M);P>1?(_=p[0],m=p[1]):P>0&&(_+=b/this.kx*P,m+=M/this.ky*P)}return b=ls(a[0]-_)*this.kx,M=(a[1]-m)*this.ky,Math.sqrt(b*b+M*M)}pointOnLine(a,u){let p=1/0,_=a[0][0],m=a[0][1],b=0,M=0;for(let P=0;P<a.length-1;P++){let R=a[P][0],E=a[P][1],O=ls(a[P+1][0]-R)*this.kx,L=(a[P+1][1]-E)*this.ky,D=0;O===0&&L===0||(D=(ls(u[0]-R)*this.kx*O+(u[1]-E)*this.ky*L)/(O*O+L*L),D>1?(R=a[P+1][0],E=a[P+1][1]):D>0&&(R+=O/this.kx*D,E+=L/this.ky*D)),O=ls(u[0]-R)*this.kx,L=(u[1]-E)*this.ky;const k=O*O+L*L;k<p&&(p=k,_=R,m=E,b=P,M=D)}return{point:[_,m],index:b,t:Math.max(0,Math.min(1,M))}}lineSlice(a,u,p){let _=this.pointOnLine(p,a),m=this.pointOnLine(p,u);if(_.index>m.index||_.index===m.index&&_.t>m.t){const R=_;_=m,m=R}const b=[_.point],M=_.index+1,P=m.index;!ub(p[M],b[0])&&M<=P&&b.push(p[M]);for(let R=M+1;R<=P;R++)b.push(p[R]);return ub(p[P],m.point)||b.push(m.point),b}lineSliceAlong(a,u,p){let _=0;const m=[];for(let b=0;b<p.length-1;b++){const M=p[b],P=p[b+1],R=this.distance(M,P);if(_+=R,_>a&&m.length===0&&m.push(Wf(M,P,(a-(_-R))/R)),_>=u)return m.push(Wf(M,P,(u-(_-R))/R)),m;_>a&&m.push(P)}return m}bufferPoint(a,u){const p=u/this.ky,_=u/this.kx;return[a[0]-_,a[1]-p,a[0]+_,a[1]+p]}bufferBBox(a,u){const p=u/this.ky,_=u/this.kx;return[a[0]-_,a[1]-p,a[2]+_,a[3]+p]}insideBBox(a,u){return ls(a[0]-u[0])>=0&&ls(a[0]-u[2])<=0&&a[1]>=u[1]&&a[1]<=u[3]}}function ub(h,a){return h[0]===a[0]&&h[1]===a[1]}function Wf(h,a,u){const p=ls(a[0]-h[0]);return[h[0]+p*u,h[1]+(a[1]-h[1])*u]}function ls(h){for(;h<-180;)h+=360;for(;h>180;)h-=360;return h}class gg{constructor(a=[],u=((p,_)=>p<_?-1:p>_?1:0)){if(this.data=a,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:u,compare:p}=this,_=u[a];for(;a>0;){const m=a-1>>1,b=u[m];if(p(_,b)>=0)break;u[a]=b,a=m}u[a]=_}_down(a){const{data:u,compare:p}=this,_=this.length>>1,m=u[a];for(;a<_;){let b=1+(a<<1);const M=b+1;if(M<this.length&&p(u[M],u[b])<0&&(b=M),p(u[b],m)>=0)break;u[a]=u[b],a=b}u[a]=m}}var gn=8192;function Fy(h,a){return a.dist-h.dist}const fu=100,Po=50;function EE(h){const a=[1/0,1/0,-1/0,-1/0];if(a.length!==h.length)return!1;for(let u=0;u<a.length;u++)if(a[u]!==h[u])return!1;return!0}function zy(h){return h[1]-h[0]+1}function pu(h,a){const u=h[1]>=h[0]&&h[1]<a;return u||console.warn("Distance Expression: Index is out of range"),u}function Gf(h,a){if(h[0]>h[1])return[null,null];const u=zy(h);if(a){if(u===2)return[h,null];const p=Math.floor(u/2);return[[h[0],h[0]+p],[h[0]+p,h[1]]]}{if(u===1)return[h,null];const p=Math.floor(u/2)-1;return[[h[0],h[0]+p],[h[0]+p+1,h[1]]]}}function pd(h,a){const u=[1/0,1/0,-1/0,-1/0];if(!pu(a,h.length))return u;for(let p=a[0];p<=a[1];++p)pg(u,h[p]);return u}function Yf(h){const a=[1/0,1/0,-1/0,-1/0];for(let u=0;u<h.length;++u)for(let p=0;p<h[u].length;++p)pg(a,h[u][p]);return a}function qf(h,a,u){if(EE(h)||EE(a))return NaN;let p=0,_=0;return h[2]<a[0]&&(p=a[0]-h[2]),h[0]>a[2]&&(p=h[0]-a[2]),h[1]>a[3]&&(_=h[1]-a[3]),h[3]<a[1]&&(_=a[1]-h[3]),u.distance([0,0],[p,_])}function CO(h){return 360*h-180}function IO(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function db(h,a){const u=Math.pow(2,a.z),p=(h.y/gn+a.y)/u;return[CO((h.x/gn+a.x)/u),IO(p)]}function TE(h,a){const u=[];for(let p=0;p<h.length;++p)u.push(db(h[p],a));return u}function ME(h,a,u){const p=u.pointOnLine(a,h).point;return u.distance(h,p)}function AE(h,a,u,p,_){const m=u.slice(p[0],p[1]+1);let b=1/0;for(let M=a[0];M<=a[1];++M)if((b=Math.min(b,ME(h[M],m,_)))===0)return 0;return b}function By(h,a,u,p,_){const m=Math.min(_.pointToSegmentDistance(h,u,p),_.pointToSegmentDistance(a,u,p)),b=Math.min(_.pointToSegmentDistance(u,h,a),_.pointToSegmentDistance(p,h,a));return Math.min(m,b)}function PO(h,a,u,p,_){if(!pu(a,h.length)||!pu(p,u.length))return NaN;let m=1/0;for(let b=a[0];b<a[1];++b)for(let M=p[0];M<p[1];++M){if(Ly(h[b],h[b+1],u[M],u[M+1]))return 0;m=Math.min(m,By(h[b],h[b+1],u[M],u[M+1],_))}return m}function dh(h,a,u,p,_){if(!pu(a,h.length)||!pu(p,u.length))return NaN;let m=1/0;for(let b=a[0];b<=a[1];++b)for(let M=p[0];M<=p[1];++M)if((m=Math.min(m,_.distance(h[b],u[M])))===0)return m;return m}function OO(h,a,u){if(lh(h,a,!0))return 0;let p=1/0;for(const _ of a){const m=_.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(_[0]!==_[m-1]&&(p=Math.min(p,u.pointToSegmentDistance(h,_[m-1],_[0])))===0||(p=Math.min(p,ME(h,_,u)))===0)return p}return p}function DO(h,a,u,p){if(!pu(a,h.length))return NaN;for(let m=a[0];m<=a[1];++m)if(lh(h[m],u,!0))return 0;let _=1/0;for(let m=a[0];m<a[1];++m)for(const b of u)for(let M=0,P=b.length,R=P-1;M<P;R=M++){if(Ly(h[m],h[m+1],b[R],b[M]))return 0;_=Math.min(_,By(h[m],h[m+1],b[R],b[M],p))}return _}function $y(h,a){for(const u of h)for(let p=0;p<=u.length-1;++p)if(lh(u[p],a,!0))return!0;return!1}function CE(h,a,u,p=1/0){const _=Yf(h),m=Yf(a);if(p!==1/0&&qf(_,m,u)>=p)return p;if(mg(_,m)){if($y(h,a))return 0}else if($y(a,h))return 0;let b=p;for(const M of h)for(let P=0,R=M.length,E=R-1;P<R;E=P++)for(const O of a)for(let L=0,D=O.length,k=D-1;L<D;k=L++){if(Ly(M[E],M[P],O[k],O[L]))return 0;b=Math.min(b,By(M[E],M[P],O[k],O[L],u))}return b}function _g(h,a,u,p,_,m,b){if(m===null||b===null)return;const M=qf(pd(p,m),pd(_,b),u);M<a&&h.push({dist:M,range1:m,range2:b})}function lc(h,a,u,p,_=1/0){let m=Math.min(p.distance(h[0],u[0][0]),_);if(m===0)return m;const b=new gg([{dist:0,range1:[0,h.length-1],range2:[0,0]}],Fy),M=a?Po:fu,P=Yf(u);for(;b.length;){const R=b.pop();if(R.dist>=m)continue;const E=R.range1;if(zy(E)<=M){if(!pu(E,h.length))return NaN;if(a){const O=DO(h,E,u,p);if((m=Math.min(m,O))===0)return m}else for(let O=E[0];O<=E[1];++O){const L=OO(h[O],u,p);if((m=Math.min(m,L))===0)return m}}else{const O=Gf(E,a);if(O[0]!==null){const L=qf(pd(h,O[0]),P,p);L<m&&b.push({dist:L,range1:O[0],range2:[0,0]})}if(O[1]!==null){const L=qf(pd(h,O[1]),P,p);L<m&&b.push({dist:L,range1:O[1],range2:[0,0]})}}}return m}function hb(h,a,u,p,_,m=1/0){let b=Math.min(m,_.distance(h[0],u[0]));if(b===0)return b;const M=new gg([{dist:0,range1:[0,h.length-1],range2:[0,u.length-1]}],Fy),P=a?Po:fu,R=p?Po:fu;for(;M.length;){const E=M.pop();if(E.dist>=b)continue;const O=E.range1,L=E.range2;if(zy(O)<=P&&zy(L)<=R){if(!pu(O,h.length)||!pu(L,u.length))return NaN;if(a&&p?b=Math.min(b,PO(h,O,u,L,_)):a||p?a&&!p?b=Math.min(b,AE(u,L,h,O,_)):!a&&p&&(b=Math.min(b,AE(h,O,u,L,_))):b=Math.min(b,dh(h,O,u,L,_)),b===0)return b}else{const D=Gf(O,a),k=Gf(L,p);_g(M,b,_,h,u,D[0],k[0]),_g(M,b,_,h,u,D[0],k[1]),_g(M,b,_,h,u,D[1],k[0]),_g(M,b,_,h,u,D[1],k[1])}}return b}function Vy(h,a,u,p,_=1/0){let m=_;const b=pd(h,[0,h.length-1]);for(const M of u)if(!(m!==1/0&&qf(b,pd(M,[0,M.length-1]),p)>=m)&&(m=Math.min(m,hb(h,a,M,!0,p,m)),m===0))return m;return m}function yg(h,a,u,p,_=1/0){let m=_;const b=pd(h,[0,h.length-1]);for(const M of u){if(m!==1/0&&qf(b,Yf(M),p)>=m)continue;const P=lc(h,a,M,p,m);if(isNaN(P))return P;if((m=Math.min(m,P))===0)return m}return m}function jy(h){return h==="Point"||h==="MultiPoint"||h==="LineString"||h==="MultiLineString"||h==="Polygon"||h==="MultiPolygon"}class md{constructor(a,u){this.type=Ln,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'distance' expression requires either one argument, but found ' ${a.length-1} instead.`);if(ac(a[1])){const p=a[1];if(p.type==="FeatureCollection"){for(let _=0;_<p.features.length;++_)if(jy(p.features[_].geometry.type))return new md(p,p.features[_].geometry)}else if(p.type==="Feature"){if(jy(p.geometry.type))return new md(p,p.geometry)}else if(jy(p.type))return new md(p,p)}return u.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(a){const u=a.geometry(),p=a.canonicalID();if(u!=null&&p!=null){if(a.geometryType()==="Point")return(function(_,m,b){const M=[];for(const R of _)for(const E of R)M.push(db(E,m));const P=new Hf(M[0][1],"meters");return b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString"?hb(M,!1,b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",P):b.type==="MultiLineString"?Vy(M,!1,b.coordinates,P):b.type==="Polygon"||b.type==="MultiPolygon"?yg(M,!1,b.type==="Polygon"?[b.coordinates]:b.coordinates,P):null})(u,p,this.geometries);if(a.geometryType()==="LineString")return(function(_,m,b){const M=[];for(const R of _){const E=[];for(const O of R)E.push(db(O,m));M.push(E)}const P=new Hf(M[0][0][1],"meters");if(b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString")return Vy(b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",M,P);if(b.type==="MultiLineString"){let R=1/0;for(let E=0;E<b.coordinates.length;E++){const O=Vy(b.coordinates[E],!0,M,P,R);if(isNaN(O))return O;if((R=Math.min(R,O))===0)return R}return R}if(b.type==="Polygon"||b.type==="MultiPolygon"){let R=1/0;for(let E=0;E<M.length;E++){const O=yg(M[E],!0,b.type==="Polygon"?[b.coordinates]:b.coordinates,P,R);if(isNaN(O))return O;if((R=Math.min(R,O))===0)return R}return R}return null})(u,p,this.geometries);if(a.geometryType()==="Polygon")return(function(_,m,b){const M=[];for(const R of(function(E,O){const L=E.length;if(L<=1)return[E];const D=[];let k,B;for(let W=0;W<L;W++){const G=SO(E[W]);G!==0&&(E[W].area=Math.abs(G),B===void 0&&(B=G<0),B===G<0?(k&&D.push(k),k=[E[W]]):k.push(E[W]))}return k&&D.push(k),D})(_)){const E=[];for(let O=0;O<R.length;++O)E.push(TE(R[O],m));M.push(E)}const P=new Hf(M[0][0][0][1],"meters");if(b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString")return yg(b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",M,P);if(b.type==="MultiLineString"){let R=1/0;for(let E=0;E<b.coordinates.length;E++){const O=yg(b.coordinates[E],!0,M,P,R);if(isNaN(O))return O;if((R=Math.min(R,O))===0)return R}return R}return b.type==="Polygon"||b.type==="MultiPolygon"?(function(R,E,O){let L=1/0;for(const D of R)for(const k of E){const B=CE(D,k,O,L);if(isNaN(B))return B;if((L=Math.min(L,B))===0)return L}return L})(b.type==="Polygon"?[b.coordinates]:b.coordinates,M,P):null})(u,p,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Uy(h,a){switch(h){case"string":return so(a);case"number":return+a;case"boolean":return!!a;case"color":return ii.parse(a);case"formatted":return Uo.fromString(so(a));case"resolvedImage":return Ho.build(so(a))}return a}function fb(h,a,u,p){return p!==void 0&&(h=p*Math.round(h/p)),a!==void 0&&h<a&&(h=a),u!==void 0&&h>u&&(h=u),h}class hh{constructor(a,u,p){this.type=a,this.key=u,this.scope=p}static parse(a,u){let p=u.expectedType;if(p==null&&(p=Wr),a.length<2||a.length>3)return u.error("Invalid number of arguments for 'config' expression.");const _=u.parse(a[1],1);if(!(_ instanceof cu))return u.error("Key name of 'config' expression must be a string literal.");if(a.length>=3){const m=u.parse(a[2],2);return m instanceof cu?new hh(p,so(_.value),so(m.value)):u.error("Scope of 'config' expression must be a string literal.")}return new hh(p,so(_.value))}evaluate(a){const u=[this.key,this.scope,a.scope].filter(Boolean).join(""),p=a.getConfig(u);if(!p)return null;const{type:_,value:m,values:b,minValue:M,maxValue:P,stepValue:R}=p,E=p.default.evaluate(a);let O=E;if(m){const L=a.scope;a.scope=(L||"").split("").slice(1).join(""),O=m.evaluate(a),a.scope=L}return _&&(O=Uy(_,O)),O===void 0||M===void 0&&P===void 0&&R===void 0||(typeof O=="number"?O=fb(O,M,P,R):Array.isArray(O)&&(O=O.map((L=>typeof L=="number"?fb(L,M,P,R):L)))),m!==void 0&&O!==void 0&&b&&!b.includes(O)&&(O=E,_&&(O=Uy(_,O))),(_&&_!==this.type||O!==void 0&&Ps(O)!==this.type)&&(O=Uy(this.type.kind,O)),O}eachChild(){}outputDefined(){return!1}serialize(){const a=["config",this.key];return this.scope&&a.concat(this.key),a}}function Xf(h){if(h instanceof na&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof hu||h instanceof md)return!1;let a=!0;return h.eachChild((u=>{a&&!Xf(u)&&(a=!1)})),a}function vg(h){if(h instanceof na&&h.name==="feature-state")return!1;let a=!0;return h.eachChild((u=>{a&&!vg(u)&&(a=!1)})),a}function bg(h){if(h instanceof hh)return new Set([h.key]);let a=new Set;return h.eachChild((u=>{a=new Set([...a,...bg(u)])})),a}function mu(h,a){if(h instanceof na&&a.indexOf(h.name)>=0)return!1;let u=!0;return h.eachChild((p=>{u&&!mu(p,a)&&(u=!1)})),u}class fh{constructor(a,u){this.type=u.type,this.name=a,this.boundExpression=u}static parse(a,u){if(a.length!==2||typeof a[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const p=a[1];return u.scope.has(p)?new fh(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Zf{constructor(a,u=[],p,_=new Dy,m=[],b,M){this.registry=a,this.path=u,this.key=u.map((P=>typeof P=="string"?`['${P}']`:`[${P}]`)).join(""),this.scope=_,this.errors=m,this.expectedType=p,this._scope=b,this.options=M}parse(a,u,p,_,m={}){return u||p?this.concat(u,null,p,_)._parse(a,m):this._parse(a,m)}parseObjectValue(a,u,p,_,m,b={}){return this.concat(u,p,_,m)._parse(a,b)}_parse(a,u){function p(_,m,b){return b==="assert"?new el(m,[_]):b==="coerce"?new du(m,[_]):_}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=typeof a[0]=="string"?this.registry[a[0]]:void 0;if(_){let m=_.parse(a,this);if(!m)return null;if(this.expectedType){const b=this.expectedType,M=m.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||M.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string"){if(this.checkSubtype(b,M))return null}else m=p(m,b,u.typeAnnotation||"coerce");else m=p(m,b,u.typeAnnotation||"assert")}if(!(m instanceof cu)&&m.type.kind!=="resolvedImage"&&Hy(m)){const b=new ky(this._scope,this.options);try{m=new cu(m.type,m.evaluate(b))}catch(M){return this.error(M.message),null}}return m}return du.parse(["to-array",a],this)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,u,p,_){let m=typeof a=="number"?this.path.concat(a):this.path;m=typeof u=="string"?m.concat(u):m;const b=_?this.scope.concat(_):this.scope;return new Zf(this.registry,m,p||null,b,this.errors,this._scope,this.options)}error(a,...u){const p=`${this.key}${u.map((_=>`[${_}]`)).join("")}`;this.errors.push(new Rl(p,a))}checkSubtype(a,u){const p=$f(a,u);return p&&this.error(p),p}}var pb=Zf;function Hy(h){if(h instanceof fh)return Hy(h.boundExpression);if(h instanceof na&&h.name==="error"||h instanceof ah||h instanceof hu||h instanceof md||h instanceof hh)return!1;const a=h instanceof du||h instanceof el;let u=!0;return h.eachChild((p=>{u=a?u&&Hy(p):u&&p instanceof cu})),!!u&&Xf(h)&&mu(h,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function xg(h,a){const u=h.length-1;let p,_,m=0,b=u,M=0;for(;m<=b;)if(M=Math.floor((m+b)/2),p=h[M],_=h[M+1],p<=a){if(M===u||a<_)return M;m=M+1}else{if(!(p>a))throw new ps("Input is not a number.");b=M-1}return 0}class Dc{constructor(a,u,p){this.type=a,this.input=u,this.labels=[],this.outputs=[];for(const[_,m]of p)this.labels.push(_),this.outputs.push(m)}static parse(a,u){if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");const p=u.parse(a[1],1,Ln);if(!p)return null;const _=[];let m=null;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);for(let b=1;b<a.length;b+=2){const M=b===1?-1/0:a[b],P=a[b+1],R=b,E=b+1;if(typeof M!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(_.length&&_[_.length-1][0]>=M)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const O=u.parse(P,E,m);if(!O)return null;m=m||O.type,_.push([M,O])}return new Dc(m,p,_)}evaluate(a){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(a);const _=this.input.evaluate(a);if(_<=u[0])return p[0].evaluate(a);const m=u.length;return _>=u[m-1]?p[m-1].evaluate(a):p[xg(u,_)].evaluate(a)}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}serialize(){const a=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&a.push(this.labels[u]),a.push(this.outputs[u].serialize());return a}}const Cr=.95047,IE=1.08883,PE=4/29,Kf=6/29,mb=3*Kf*Kf,RO=Kf*Kf*Kf,zi=Math.PI/180,kO=180/Math.PI;function gb(h){return h>RO?Math.pow(h,1/3):h/mb+PE}function _b(h){return h>Kf?h*h*h:mb*(h-PE)}function yb(h){return 255*(h<=.0031308?12.92*h:1.055*Math.pow(h,1/2.4)-.055)}function vb(h){return(h/=255)<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function OE(h){const a=vb(h.r),u=vb(h.g),p=vb(h.b),_=gb((.4124564*a+.3575761*u+.1804375*p)/Cr),m=gb((.2126729*a+.7151522*u+.072175*p)/1);return{l:116*m-16,a:500*(_-m),b:200*(m-gb((.0193339*a+.119192*u+.9503041*p)/IE)),alpha:h.a}}function DE(h){let a=(h.l+16)/116,u=isNaN(h.a)?a:a+h.a/500,p=isNaN(h.b)?a:a-h.b/200;return a=1*_b(a),u=Cr*_b(u),p=IE*_b(p),new ii(yb(3.2404542*u-1.5371385*a-.4985314*p),yb(-.969266*u+1.8760108*a+.041556*p),yb(.0556434*u-.2040259*a+1.0572252*p),h.alpha)}function LO(h,a,u){const p=a-h;return h+u*(p>180||p<-180?p-360*Math.round(p/360):p)}const wg={forward:OE,reverse:DE,interpolate:function(h,a,u){return{l:jn(h.l,a.l,u),a:jn(h.a,a.a,u),b:jn(h.b,a.b,u),alpha:jn(h.alpha,a.alpha,u)}}},Sg={forward:function(h){const{l:a,a:u,b:p}=OE(h),_=Math.atan2(p,u)*kO;return{h:_<0?_+360:_,c:Math.sqrt(u*u+p*p),l:a,alpha:h.a}},reverse:function(h){const a=h.h*zi,u=h.c;return DE({l:h.l,a:Math.cos(a)*u,b:Math.sin(a)*u,alpha:h.alpha})},interpolate:function(h,a,u){return{h:LO(h.h,a.h,u),c:jn(h.c,a.c,u),l:jn(h.l,a.l,u),alpha:jn(h.alpha,a.alpha,u)}}};var RE=Object.freeze({__proto__:null,hcl:Sg,lab:wg});class tl{constructor(a,u,p,_,m){this.type=a,this.operator=u,this.interpolation=p,this.input=_,this.labels=[],this.outputs=[];for(const[b,M]of m)this.labels.push(b),this.outputs.push(M)}static interpolationFactor(a,u,p,_){let m=0;if(a.name==="exponential")m=bb(u,a.base,p,_);else if(a.name==="linear")m=bb(u,1,p,_);else if(a.name==="cubic-bezier"){const b=a.controlPoints;m=new On(b[0],b[1],b[2],b[3]).solve(bb(u,1,p,_))}return m}static parse(a,u){let[p,_,m,...b]=a;if(!Array.isArray(_)||_.length===0)return u.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const R=_[1];if(typeof R!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:R}}else{if(_[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const R=_.slice(1);if(R.length!==4||R.some((E=>typeof E!="number"||E<0||E>1)))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:R}}}if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length-1>3&&(a.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(m=u.parse(m,2,Ln),!m)return null;const M=[];let P=null;p==="interpolate-hcl"||p==="interpolate-lab"?P=jo:u.expectedType&&u.expectedType.kind!=="value"&&(P=u.expectedType);for(let R=0;R<b.length;R+=2){const E=b[R],O=b[R+1],L=R+3,D=R+4;if(typeof E!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(M.length&&M[M.length-1][0]>=E)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',L);const k=u.parse(O,D,P);if(!k)return null;P=P||k.type,M.push([E,k])}return P.kind==="number"||P.kind==="color"||P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number"?new tl(P,p,_,m,M):u.error(`Type ${ds(P)} is not interpolatable.`)}evaluate(a){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(a);const _=this.input.evaluate(a);if(_<=u[0])return p[0].evaluate(a);const m=u.length;if(_>=u[m-1])return p[m-1].evaluate(a);const b=xg(u,_),M=tl.interpolationFactor(this.interpolation,_,u[b],u[b+1]),P=p[b].evaluate(a),R=p[b+1].evaluate(a);return this.operator==="interpolate"?cg[this.type.kind.toLowerCase()](P,R,M):this.operator==="interpolate-hcl"?Sg.reverse(Sg.interpolate(Sg.forward(P),Sg.forward(R),M)):wg.reverse(wg.interpolate(wg.forward(P),wg.forward(R),M))}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}serialize(){let a;a=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const u=[this.operator,a,this.input.serialize()];for(let p=0;p<this.labels.length;p++)u.push(this.labels[p],this.outputs[p].serialize());return u}}function bb(h,a,u,p){const _=p-u,m=h-u;return _===0?0:a===1?m/_:(Math.pow(a,m)-1)/(Math.pow(a,_)-1)}class Wy{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expectected at least one argument.");let p=null;const _=u.expectedType;_&&_.kind!=="value"&&(p=_);const m=[];for(const M of a.slice(1)){const P=u.parse(M,1+m.length,p,void 0,{typeAnnotation:"omit"});if(!P)return null;p=p||P.type,m.push(P)}const b=_&&m.some((M=>$f(_,M.type)));return new Wy(b?Wr:p,m)}evaluate(a){let u,p=null,_=0;for(const m of this.args){if(_++,p=m.evaluate(a),p&&p instanceof Ho&&!p.available&&(u||(u=p),p=null,_===this.args.length))return u;if(p!==null)break}return p}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}serialize(){const a=["coalesce"];return this.eachChild((u=>{a.push(u.serialize())})),a}}class Gy{constructor(a,u){this.type=u.type,this.bindings=[].concat(a),this.result=u}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const u of this.bindings)a(u[1]);a(this.result)}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const p=[];for(let m=1;m<a.length-1;m+=2){const b=a[m];if(typeof b!="string")return u.error(`Expected string, but found ${typeof b} instead.`,m);if(/[^a-zA-Z0-9_]/.test(b))return u.error("Variable names must contain only alphanumeric characters or '_'.",m);const M=u.parse(a[m+1],m+1);if(!M)return null;p.push([b,M])}const _=u.parse(a[a.length-1],a.length-1,u.expectedType,p);return _?new Gy(p,_):null}outputDefined(){return this.result.outputDefined()}serialize(){const a=["let"];for(const[u,p]of this.bindings)a.push(u,p.serialize());return a.push(this.result.serialize()),a}}class xb{constructor(a,u,p){this.type=a,this.index=u,this.input=p}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=u.parse(a[1],1,Ln),_=u.parse(a[2],2,Io(u.expectedType||Wr));return p&&_?new xb(_.type.itemType,p,_):null}evaluate(a){const u=this.index.evaluate(a),p=this.input.evaluate(a);if(u<0)throw new ps(`Array index out of bounds: ${u} < 0.`);if(u>=p.length)throw new ps(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u!==Math.floor(u))throw new ps(`Array index must be an integer, but found ${u} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return p[u]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class wb{constructor(a,u,p){this.type=a,this.index=u,this.input=p}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=u.parse(a[1],1,Ln),_=u.parse(a[2],2,Io(u.expectedType||Wr));return p&&_?new wb(_.type.itemType,p,_):null}evaluate(a){const u=this.index.evaluate(a),p=this.input.evaluate(a);if(u<0)throw new ps(`Array index out of bounds: ${u} < 0.`);if(u>p.length-1)throw new ps(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u===Math.floor(u))return p[u];const _=Math.floor(u),m=Math.ceil(u),b=p[_],M=p[m];if(typeof b!="number"||typeof M!="number")throw new ps(`Cannot interpolate between non-number values at index ${u}.`);const P=u-_;return b*(1-P)+M*P}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class Sb{constructor(a,u){this.type=zr,this.needle=a,this.haystack=u}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=u.parse(a[1],1,Wr),_=u.parse(a[2],2,Wr);return p&&_?ob(p.type,[zr,ti,Ln,zf,Wr])?new Sb(p,_):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ds(p.type)} instead`):null}evaluate(a){const u=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(p==null)return!1;if(!Vf(u,["boolean","string","number","null"]))throw new ps(`Expected first argument to be of type boolean, string, number or null, but found ${ds(Ps(u))} instead.`);if(!Vf(p,["string","array"]))throw new ps(`Expected second argument to be of type array or string, but found ${ds(Ps(p))} instead.`);return p.indexOf(u)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Yy{constructor(a,u,p){this.type=Ln,this.needle=a,this.haystack=u,this.fromIndex=p}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=u.parse(a[1],1,Wr),_=u.parse(a[2],2,Wr);if(!p||!_)return null;if(!ob(p.type,[zr,ti,Ln,zf,Wr]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ds(p.type)} instead`);if(a.length===4){const m=u.parse(a[3],3,Ln);return m?new Yy(p,_,m):null}return new Yy(p,_)}evaluate(a){const u=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!Vf(u,["boolean","string","number","null"]))throw new ps(`Expected first argument to be of type boolean, string, number or null, but found ${ds(Ps(u))} instead.`);if(!Vf(p,["string","array"]))throw new ps(`Expected second argument to be of type array or string, but found ${ds(Ps(p))} instead.`);if(this.fromIndex){const _=this.fromIndex.evaluate(a);return p.indexOf(u,_)}return p.indexOf(u)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Eb{constructor(a,u,p,_,m,b){this.inputType=a,this.type=u,this.input=p,this.cases=_,this.outputs=m,this.otherwise=b}static parse(a,u){if(a.length<5)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return u.error("Expected an even number of arguments.");let p,_;u.expectedType&&u.expectedType.kind!=="value"&&(_=u.expectedType);const m={},b=[];for(let R=2;R<a.length-1;R+=2){let E=a[R];const O=a[R+1];Array.isArray(E)||(E=[E]);const L=u.concat(R);if(E.length===0)return L.error("Expected at least one branch label.");for(const k of E){if(typeof k!="number"&&typeof k!="string")return L.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return L.error("Numeric branch labels must be integer values.");if(p){if(L.checkSubtype(p,Ps(k)))return null}else p=Ps(k);if(m[String(k)]!==void 0)return L.error("Branch labels must be unique.");m[String(k)]=b.length}const D=u.parse(O,R,_);if(!D)return null;_=_||D.type,b.push(D)}const M=u.parse(a[1],1,Wr);if(!M)return null;const P=u.parse(a[a.length-1],a.length-1,_);return P?M.type.kind!=="value"&&u.concat(1).checkSubtype(p,M.type)?null:new Eb(p,_,M,m,b,P):null}evaluate(a){const u=this.input.evaluate(a);return(Ps(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const a=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),p=[],_={};for(const b of u){const M=_[this.cases[b]];M===void 0?(_[this.cases[b]]=p.length,p.push([this.cases[b],[b]])):p[M][1].push(b)}const m=b=>this.inputType.kind==="number"?Number(b):b;for(const[b,M]of p)a.push(M.length===1?m(M[0]):M.map(m)),a.push(this.outputs[b].serialize());return a.push(this.otherwise.serialize()),a}}class Tb{constructor(a,u,p){this.type=a,this.branches=u,this.otherwise=p}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&u.expectedType.kind!=="value"&&(p=u.expectedType);const _=[];for(let b=1;b<a.length-1;b+=2){const M=u.parse(a[b],b,zr);if(!M)return null;const P=u.parse(a[b+1],b+1,p);if(!P)return null;_.push([M,P]),p=p||P.type}const m=u.parse(a[a.length-1],a.length-1,p);return m?new Tb(p,_,m):null}evaluate(a){for(const[u,p]of this.branches)if(u.evaluate(a))return p.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[u,p]of this.branches)a(u),a(p);a(this.otherwise)}outputDefined(){return this.branches.every((([a,u])=>u.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const a=["case"];return this.eachChild((u=>{a.push(u.serialize())})),a}}class qy{constructor(a,u,p,_){this.type=a,this.input=u,this.beginIndex=p,this.endIndex=_}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=u.parse(a[1],1,Wr),_=u.parse(a[2],2,Ln);if(!p||!_)return null;if(!ob(p.type,[Io(Wr),ti,Wr]))return u.error(`Expected first argument to be of type array or string, but found ${ds(p.type)} instead`);if(a.length===4){const m=u.parse(a[3],3,Ln);return m?new qy(p.type,p,_,m):null}return new qy(p.type,p,_)}evaluate(a){const u=this.input.evaluate(a),p=this.beginIndex.evaluate(a);if(!Vf(u,["string","array"]))throw new ps(`Expected first argument to be of type array or string, but found ${ds(Ps(u))} instead.`);if(this.endIndex){const _=this.endIndex.evaluate(a);return u.slice(p,_)}return u.slice(p)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function kE(h,a){return h==="=="||h==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function LE(h,a,u,p){return p.compare(a,u)===0}function Jf(h,a,u){const p=h!=="=="&&h!=="!=";return class Ose{constructor(m,b,M){this.type=zr,this.lhs=m,this.rhs=b,this.collator=M,this.hasUntypedArgument=m.type.kind==="value"||b.type.kind==="value"}static parse(m,b){if(m.length!==3&&m.length!==4)return b.error("Expected two or three arguments.");const M=m[0];let P=b.parse(m[1],1,Wr);if(!P)return null;if(!kE(M,P.type))return b.concat(1).error(`"${M}" comparisons are not supported for type '${ds(P.type)}'.`);let R=b.parse(m[2],2,Wr);if(!R)return null;if(!kE(M,R.type))return b.concat(2).error(`"${M}" comparisons are not supported for type '${ds(R.type)}'.`);if(P.type.kind!==R.type.kind&&P.type.kind!=="value"&&R.type.kind!=="value")return b.error(`Cannot compare types '${ds(P.type)}' and '${ds(R.type)}'.`);p&&(P.type.kind==="value"&&R.type.kind!=="value"?P=new el(R.type,[P]):P.type.kind!=="value"&&R.type.kind==="value"&&(R=new el(P.type,[R])));let E=null;if(m.length===4){if(P.type.kind!=="string"&&R.type.kind!=="string"&&P.type.kind!=="value"&&R.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(E=b.parse(m[3],3,au),!E)return null}return new Ose(P,R,E)}evaluate(m){const b=this.lhs.evaluate(m),M=this.rhs.evaluate(m);if(p&&this.hasUntypedArgument){const P=Ps(b),R=Ps(M);if(P.kind!==R.kind||P.kind!=="string"&&P.kind!=="number")throw new ps(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${P.kind}, ${R.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const P=Ps(b),R=Ps(M);if(P.kind!=="string"||R.kind!=="string")return a(m,b,M)}return this.collator?u(m,b,M,this.collator.evaluate(m)):a(m,b,M)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[h];return this.eachChild((b=>{m.push(b.serialize())})),m}}}const NO=Jf("==",(function(h,a,u){return a===u}),LE),FO=Jf("!=",(function(h,a,u){return a!==u}),(function(h,a,u,p){return!LE(0,a,u,p)})),zO=Jf("<",(function(h,a,u){return a<u}),(function(h,a,u,p){return p.compare(a,u)<0})),BO=Jf(">",(function(h,a,u){return a>u}),(function(h,a,u,p){return p.compare(a,u)>0})),$O=Jf("<=",(function(h,a,u){return a<=u}),(function(h,a,u,p){return p.compare(a,u)<=0})),VO=Jf(">=",(function(h,a,u){return a>=u}),(function(h,a,u,p){return p.compare(a,u)>=0}));class Eg{constructor(a,u,p,_,m,b){this.type=ti,this.number=a,this.locale=u,this.currency=p,this.unit=_,this.minFractionDigits=m,this.maxFractionDigits=b}static parse(a,u){if(a.length!==3)return u.error("Expected two arguments.");const p=u.parse(a[1],1,Ln);if(!p)return null;const _=a[2];if(typeof _!="object"||Array.isArray(_))return u.error("NumberFormat options argument must be an object.");let m=null;if(_.locale&&(m=u.parseObjectValue(_.locale,2,"locale",ti),!m))return null;let b=null;if(_.currency&&(b=u.parseObjectValue(_.currency,2,"currency",ti),!b))return null;let M=null;if(_.unit&&(M=u.parseObjectValue(_.unit,2,"unit",ti),!M))return null;let P=null;if(_["min-fraction-digits"]&&(P=u.parseObjectValue(_["min-fraction-digits"],2,"min-fraction-digits",Ln),!P))return null;let R=null;return _["max-fraction-digits"]&&(R=u.parseObjectValue(_["max-fraction-digits"],2,"max-fraction-digits",Ln),!R)?null:new Eg(p,m,b,M,P,R)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(a):void 0,unit:this.unit?this.unit.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.unit&&a(this.unit),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.unit&&(a.unit=this.unit.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]}}class Mb{constructor(a){this.type=Ln,this.input=a}static parse(a,u){if(a.length!==2)return u.error(`Expected 1 argument, but found ${a.length-1} instead.`);const p=u.parse(a[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${ds(p.type)} instead.`):new Mb(p):null}evaluate(a){const u=this.input.evaluate(a);if(typeof u=="string"||Array.isArray(u))return u.length;throw new ps(`Expected value to be of type string or array, but found ${ds(Ps(u))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){const a=["length"];return this.eachChild((u=>{a.push(u.serialize())})),a}}function Ab(h){return function(){h=1831565813+(h|=0)|0;let a=Math.imul(h^h>>>15,1|h);return a=a+Math.imul(a^a>>>7,61|a)^a,((a^a>>>14)>>>0)/4294967296}}const Qf={"==":NO,"!=":FO,">":BO,"<":zO,">=":VO,"<=":$O,array:el,at:xb,"at-interpolated":wb,boolean:el,case:Tb,coalesce:Wy,collator:ah,format:jf,image:dd,in:Sb,"index-of":Yy,interpolate:tl,"interpolate-hcl":tl,"interpolate-lab":tl,length:Mb,let:Gy,literal:cu,match:Eb,number:el,"number-format":Eg,object:el,slice:qy,step:Dc,string:el,"to-boolean":du,"to-color":du,"to-number":du,"to-string":du,var:fh,within:hu,distance:md,config:hh};function NE(h,[a,u,p,_]){a=a.evaluate(h),u=u.evaluate(h),p=p.evaluate(h);const m=_?_.evaluate(h):1,b=hg(a,u,p,m);if(b)throw new ps(b);return new ii(a/255*m,u/255*m,p/255*m,m)}function FE(h,[a,u,p,_]){a=a.evaluate(h),u=u.evaluate(h),p=p.evaluate(h);const m=_?_.evaluate(h):1,b=(function(R,E,O,L){return typeof R=="number"&&R>=0&&R<=360?typeof E=="number"&&E>=0&&E<=100&&typeof O=="number"&&O>=0&&O<=100?L===void 0||typeof L=="number"&&L>=0&&L<=1?null:`Invalid hsla value [${[R,E,O,L].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof L=="number"?[R,E,O,L]:[R,E,O]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof L=="number"?[R,E,O,L]:[R,E,O]).join(", ")}]: 'h' must be between 0 and 360.`})(a,u,p,m);if(b)throw new ps(b);const M=`hsla(${a}, ${u}%, ${p}%, ${m})`,P=ii.parse(M);if(!P)throw new ps(`Failed to parse HSLA color: ${M}`);return P}function Cb(h,a){return h in a}function Xy(h,a){const u=a[h];return u===void 0?null:u}function kl(h){return{type:h}}function Ib(h){return{result:"success",value:h}}function gu(h){return{result:"error",value:h}}function Pb(h,a){return!!h&&!!h.parameters&&h.parameters.indexOf(a)>-1}function ep(h){return h["property-type"]==="data-driven"}function Zy(h){return Pb(h.expression,"measure-light")}function zE(h){return Pb(h.expression,"zoom")}function Ob(h){return!!h.expression&&h.expression.interpolated}function Ky(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function BE(h){return h}function $E(h,a){const u=a.type==="color",p=h.stops&&typeof h.stops[0][0]=="object",_=p||!(p||h.property!==void 0),m=h.type||(Ob(a)?"exponential":"interval");if(u&&((h=Or({},h)).stops&&(h.stops=h.stops.map((R=>[R[0],ii.parse(R[1])]))),h.default=ii.parse(h.default?h.default:a.default)),h.colorSpace&&h.colorSpace!=="rgb"&&!RE[h.colorSpace])throw new Error(`Unknown color space: ${h.colorSpace}`);let b,M,P;if(m==="exponential")b=Db;else if(m==="interval")b=VE;else if(m==="categorical"){b=jO,M=Object.create(null);for(const R of h.stops)M[R[0]]=R[1];P=typeof h.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);b=Jy}if(p){const R={},E=[];for(let D=0;D<h.stops.length;D++){const k=h.stops[D],B=k[0].zoom;R[B]===void 0&&(R[B]={zoom:B,type:h.type,property:h.property,default:h.default,stops:[]},E.push(B)),R[B].stops.push([k[0].value,k[1]])}const O=[];for(const D of E)O.push([R[D].zoom,$E(R[D],a)]);const L={name:"linear"};return{kind:"composite",interpolationType:L,interpolationFactor:tl.interpolationFactor.bind(void 0,L),zoomStops:O.map((D=>D[0])),evaluate:({zoom:D},k)=>Db({stops:O,base:h.base},a,D).evaluate(D,k)}}if(_){const R=m==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:tl.interpolationFactor.bind(void 0,R),zoomStops:h.stops.map((E=>E[0])),evaluate:({zoom:E})=>b(h,a,E,M,P)}}return{kind:"source",evaluate(R,E){const O=E&&E.properties?E.properties[h.property]:void 0;return O===void 0?Tg(h.default,a.default):b(h,a,O,M,P)}}}function Tg(h,a,u){return h!==void 0?h:a!==void 0?a:u!==void 0?u:void 0}function jO(h,a,u,p,_){return Tg(typeof u===_?p[u]:void 0,h.default,a.default)}function VE(h,a,u){if(uu(u)!=="number")return Tg(h.default,a.default);const p=h.stops.length;if(p===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[p-1][0])return h.stops[p-1][1];const _=xg(h.stops.map((m=>m[0])),u);return h.stops[_][1]}function Db(h,a,u){const p=h.base!==void 0?h.base:1;if(uu(u)!=="number")return Tg(h.default,a.default);const _=h.stops.length;if(_===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[_-1][0])return h.stops[_-1][1];const m=xg(h.stops.map((E=>E[0])),u),b=(function(E,O,L,D){const k=D-L,B=E-L;return k===0?0:O===1?B/k:(Math.pow(O,B)-1)/(Math.pow(O,k)-1)})(u,p,h.stops[m][0],h.stops[m+1][0]),M=h.stops[m][1],P=h.stops[m+1][1];let R=cg[a.type]||BE;if(h.colorSpace&&h.colorSpace!=="rgb"){const E=RE[h.colorSpace];R=(O,L)=>E.reverse(E.interpolate(E.forward(O),E.forward(L),b))}return typeof M.evaluate=="function"?{evaluate(...E){const O=M.evaluate.apply(void 0,E),L=P.evaluate.apply(void 0,E);if(O!==void 0&&L!==void 0)return R(O,L,b)}}:R(M,P,b)}function Jy(h,a,u){return a.type==="color"?u=ii.parse(u):a.type==="formatted"?u=Uo.fromString(u.toString()):a.type==="resolvedImage"?u=Ho.build(u.toString()):uu(u)===a.type||a.type==="enum"&&a.values[u]||(u=void 0),Tg(u,h.default,a.default)}na.register(Qf,{error:[{kind:"error"},[ti],(h,[a])=>{throw new ps(a.evaluate(h))}],typeof:[ti,[Wr],(h,[a])=>ds(Ps(a.evaluate(h)))],"to-rgba":[Io(Ln,4),[jo],(h,[a])=>a.evaluate(h).toRenderColor(null).toArray()],"to-hsla":[Io(Ln,4),[jo],(h,[a])=>a.evaluate(h).toRenderColor(null).toHslaArray()],rgb:[jo,[Ln,Ln,Ln],NE],rgba:[jo,[Ln,Ln,Ln,Ln],NE],hsl:[jo,[Ln,Ln,Ln],FE],hsla:[jo,[Ln,Ln,Ln,Ln],FE],has:{type:zr,overloads:[[[ti],(h,[a])=>Cb(a.evaluate(h),h.properties())],[[ti,Bf],(h,[a,u])=>Cb(a.evaluate(h),u.evaluate(h))]]},get:{type:Wr,overloads:[[[ti],(h,[a])=>Xy(a.evaluate(h),h.properties())],[[ti,Bf],(h,[a,u])=>Xy(a.evaluate(h),u.evaluate(h))]]},"feature-state":[Wr,[ti],(h,[a])=>Xy(a.evaluate(h),h.featureState||{})],properties:[Bf,[],h=>h.properties()],"geometry-type":[ti,[],h=>h.geometryType()],id:[Wr,[],h=>h.id()],zoom:[Ln,[],h=>h.globals.zoom],pitch:[Ln,[],h=>h.globals.pitch||0],"distance-from-center":[Ln,[],h=>h.distanceFromCenter()],"measure-light":[Ln,[ti],(h,[a])=>h.measureLight(a.evaluate(h))],"heatmap-density":[Ln,[],h=>h.globals.heatmapDensity||0],"line-progress":[Ln,[],h=>h.globals.lineProgress||0],"raster-value":[Ln,[],h=>h.globals.rasterValue||0],"raster-particle-speed":[Ln,[],h=>h.globals.rasterParticleSpeed||0],"sky-radial-progress":[Ln,[],h=>h.globals.skyRadialProgress||0],accumulated:[Wr,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[Ln,kl(Ln),(h,a)=>{let u=0;for(const p of a)u+=p.evaluate(h);return u}],"*":[Ln,kl(Ln),(h,a)=>{let u=1;for(const p of a)u*=p.evaluate(h);return u}],"-":{type:Ln,overloads:[[[Ln,Ln],(h,[a,u])=>a.evaluate(h)-u.evaluate(h)],[[Ln],(h,[a])=>-a.evaluate(h)]]},"/":[Ln,[Ln,Ln],(h,[a,u])=>a.evaluate(h)/u.evaluate(h)],"%":[Ln,[Ln,Ln],(h,[a,u])=>a.evaluate(h)%u.evaluate(h)],ln2:[Ln,[],()=>Math.LN2],pi:[Ln,[],()=>Math.PI],e:[Ln,[],()=>Math.E],"^":[Ln,[Ln,Ln],(h,[a,u])=>Math.pow(a.evaluate(h),u.evaluate(h))],sqrt:[Ln,[Ln],(h,[a])=>Math.sqrt(a.evaluate(h))],log10:[Ln,[Ln],(h,[a])=>Math.log(a.evaluate(h))/Math.LN10],ln:[Ln,[Ln],(h,[a])=>Math.log(a.evaluate(h))],log2:[Ln,[Ln],(h,[a])=>Math.log(a.evaluate(h))/Math.LN2],sin:[Ln,[Ln],(h,[a])=>Math.sin(a.evaluate(h))],cos:[Ln,[Ln],(h,[a])=>Math.cos(a.evaluate(h))],tan:[Ln,[Ln],(h,[a])=>Math.tan(a.evaluate(h))],asin:[Ln,[Ln],(h,[a])=>Math.asin(a.evaluate(h))],acos:[Ln,[Ln],(h,[a])=>Math.acos(a.evaluate(h))],atan:[Ln,[Ln],(h,[a])=>Math.atan(a.evaluate(h))],min:[Ln,kl(Ln),(h,a)=>Math.min(...a.map((u=>u.evaluate(h))))],max:[Ln,kl(Ln),(h,a)=>Math.max(...a.map((u=>u.evaluate(h))))],abs:[Ln,[Ln],(h,[a])=>Math.abs(a.evaluate(h))],round:[Ln,[Ln],(h,[a])=>{const u=a.evaluate(h);return u<0?-Math.round(-u):Math.round(u)}],floor:[Ln,[Ln],(h,[a])=>Math.floor(a.evaluate(h))],ceil:[Ln,[Ln],(h,[a])=>Math.ceil(a.evaluate(h))],"filter-==":[zr,[ti,Wr],(h,[a,u])=>h.properties()[a.value]===u.value],"filter-id-==":[zr,[Wr],(h,[a])=>h.id()===a.value],"filter-type-==":[zr,[ti],(h,[a])=>h.geometryType()===a.value],"filter-<":[zr,[ti,Wr],(h,[a,u])=>{const p=h.properties()[a.value],_=u.value;return typeof p==typeof _&&p<_}],"filter-id-<":[zr,[Wr],(h,[a])=>{const u=h.id(),p=a.value;return typeof u==typeof p&&u<p}],"filter->":[zr,[ti,Wr],(h,[a,u])=>{const p=h.properties()[a.value],_=u.value;return typeof p==typeof _&&p>_}],"filter-id->":[zr,[Wr],(h,[a])=>{const u=h.id(),p=a.value;return typeof u==typeof p&&u>p}],"filter-<=":[zr,[ti,Wr],(h,[a,u])=>{const p=h.properties()[a.value],_=u.value;return typeof p==typeof _&&p<=_}],"filter-id-<=":[zr,[Wr],(h,[a])=>{const u=h.id(),p=a.value;return typeof u==typeof p&&u<=p}],"filter->=":[zr,[ti,Wr],(h,[a,u])=>{const p=h.properties()[a.value],_=u.value;return typeof p==typeof _&&p>=_}],"filter-id->=":[zr,[Wr],(h,[a])=>{const u=h.id(),p=a.value;return typeof u==typeof p&&u>=p}],"filter-has":[zr,[Wr],(h,[a])=>a.value in h.properties()],"filter-has-id":[zr,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[zr,[Io(ti)],(h,[a])=>a.value.indexOf(h.geometryType())>=0],"filter-id-in":[zr,[Io(Wr)],(h,[a])=>a.value.indexOf(h.id())>=0],"filter-in-small":[zr,[ti,Io(Wr)],(h,[a,u])=>u.value.indexOf(h.properties()[a.value])>=0],"filter-in-large":[zr,[ti,Io(Wr)],(h,[a,u])=>(function(p,_,m,b){for(;m<=b;){const M=m+b>>1;if(_[M]===p)return!0;_[M]>p?b=M-1:m=M+1}return!1})(h.properties()[a.value],u.value,0,u.value.length-1)],all:{type:zr,overloads:[[[zr,zr],(h,[a,u])=>a.evaluate(h)&&u.evaluate(h)],[kl(zr),(h,a)=>{for(const u of a)if(!u.evaluate(h))return!1;return!0}]]},any:{type:zr,overloads:[[[zr,zr],(h,[a,u])=>a.evaluate(h)||u.evaluate(h)],[kl(zr),(h,a)=>{for(const u of a)if(u.evaluate(h))return!0;return!1}]]},"!":[zr,[zr],(h,[a])=>!a.evaluate(h)],"is-supported-script":[zr,[ti],(h,[a])=>{const u=h.globals&&h.globals.isSupportedScript;return!u||u(a.evaluate(h))}],upcase:[ti,[ti],(h,[a])=>a.evaluate(h).toUpperCase()],downcase:[ti,[ti],(h,[a])=>a.evaluate(h).toLowerCase()],concat:[ti,kl(Wr),(h,a)=>a.map((u=>so(u.evaluate(h)))).join("")],"resolved-locale":[ti,[au],(h,[a])=>a.evaluate(h).resolvedLocale()],random:[Ln,[Ln,Ln,Wr],(h,a)=>{const[u,p,_]=a.map((b=>b.evaluate(h)));if(u>p||u===p)return u;let m;if(typeof _=="string")m=(function(b){let M=0;if(b.length===0)return M;for(let P=0;P<b.length;P++)M=(M<<5)-M+b.charCodeAt(P),M|=0;return M})(_);else{if(typeof _!="number")throw new ps(`Invalid seed input: ${_}`);m=_}return u+Ab(m)()*(p-u)}]});class Rb{constructor(a,u,p,_){this.expression=a,this._warningHistory={},this._evaluator=new ky(p,_),this._defaultValue=u?(function(m){return m.type==="color"&&(Ky(m.default)||Array.isArray(m.default))?new ii(0,0,0,0):m.type==="color"?ii.parse(m.default)||null:m.default===void 0?null:m.default})(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this.configDependencies=bg(a)}evaluateWithoutErrorHandling(a,u,p,_,m,b,M,P){return this._evaluator.globals=a,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=_||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=b,this._evaluator.featureTileCoord=M||null,this._evaluator.featureDistanceData=P||null,this.expression.evaluate(this._evaluator)}evaluate(a,u,p,_,m,b,M,P){this._evaluator.globals=a,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=_||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=b||null,this._evaluator.featureTileCoord=M||null,this._evaluator.featureDistanceData=P||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new ps(`Expected value to be one of ${Object.keys(this._enumValues).map((E=>JSON.stringify(E))).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${R.message}`)),this._defaultValue}}}function Qy(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Qf}function tp(h,a,u,p){const _=new pb(Qf,[],a?(function(b){const M={color:jo,string:ti,number:Ln,enum:ti,boolean:zr,formatted:ug,resolvedImage:lu};return b.type==="array"?Io(M[b.value]||Wr,b.length):M[b.type]})(a):void 0,void 0,void 0,u,p),m=_.parse(h,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Ib(new Rb(m,a,u,p)):gu(_.errors)}class kb{constructor(a,u,p,_){this.kind=a,this._styleExpression=u,this.isLightConstant=p,this.isLineProgressConstant=_,this.isStateDependent=a!=="constant"&&!vg(u.expression),this.configDependencies=bg(u.expression)}evaluateWithoutErrorHandling(a,u,p,_,m,b){return this._styleExpression.evaluateWithoutErrorHandling(a,u,p,_,m,b)}evaluate(a,u,p,_,m,b){return this._styleExpression.evaluate(a,u,p,_,m,b)}}class np{constructor(a,u,p,_,m,b){this.kind=a,this.zoomStops=p,this._styleExpression=u,this.isStateDependent=a!=="camera"&&!vg(u.expression),this.isLightConstant=m,this.isLineProgressConstant=b,this.configDependencies=bg(u.expression),this.interpolationType=_}evaluateWithoutErrorHandling(a,u,p,_,m,b){return this._styleExpression.evaluateWithoutErrorHandling(a,u,p,_,m,b)}evaluate(a,u,p,_,m,b){return this._styleExpression.evaluate(a,u,p,_,m,b)}interpolationFactor(a,u,p){return this.interpolationType?tl.interpolationFactor(this.interpolationType,a,u,p):0}}function Lb(h,a,u,p){if((h=tp(h,a,u,p)).result==="error")return h;const _=h.value.expression,m=Xf(_);if(!m&&!ep(a))return gu([new Rl("","data expressions not supported")]);const b=mu(_,["zoom","pitch","distance-from-center"]);if(!b&&!zE(a))return gu([new Rl("","zoom expressions not supported")]);const M=mu(_,["measure-light"]);if(!M&&!Zy(a))return gu([new Rl("","measure-light expression not supported")]);const P=mu(_,["line-progress"]);if(!P&&!(function(O){return Pb(O.expression,"line-progress")})(a))return gu([new Rl("","line-progress expression not supported")]);const R=a.expression&&a.expression.relaxZoomRestriction,E=tv(_);return E||b||R?E instanceof Rl?gu([E]):E instanceof tl&&!Ob(a)?gu([new Rl("",'"interpolate" expressions cannot be used with this property')]):Ib(E?new np(m&&P?"camera":"composite",h.value,E.labels,E instanceof tl?E.interpolation:void 0,M,P):new kb(m&&P?"constant":"source",h.value,M,P)):gu([new Rl("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class ev{constructor(a,u){this._parameters=a,this._specification=u,Or(this,$E(this._parameters,this._specification))}static deserialize(a){return new ev(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function tv(h){let a=null;if(h instanceof Gy)a=tv(h.result);else if(h instanceof Wy){for(const u of h.args)if(a=tv(u),a)break}else(h instanceof Dc||h instanceof tl)&&h.input instanceof na&&h.input.name==="zoom"&&(a=h);return a instanceof Rl||h.eachChild((u=>{const p=tv(u);p instanceof Rl?a=p:a&&p&&a!==p&&(a=new Rl("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),a}var Mg,jE,UE=(function(){if(jE)return Mg;jE=1,Mg=a;var h=3;function a(u,p,_){var m=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var b=new Int32Array(this.arrayBuffer);u=b[0],this.d=(p=b[1])+2*(_=b[2]);for(var M=0;M<this.d*this.d;M++){var P=b[h+M],R=b[h+M+1];m.push(P===R?null:b.subarray(P,R))}var E=b[h+m.length+1];this.keys=b.subarray(b[h+m.length],E),this.bboxes=b.subarray(E),this.insert=this._insertReadonly}else{this.d=p+2*_;for(var O=0;O<this.d*this.d;O++)m.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=u,this.padding=_,this.scale=p/u,this.uid=0;var L=_/p*u;this.min=-L,this.max=u+L}return a.prototype.insert=function(u,p,_,m,b){this._forEachCell(p,_,m,b,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(m),this.bboxes.push(b)},a.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},a.prototype._insertCell=function(u,p,_,m,b,M){this.cells[b].push(M)},a.prototype.query=function(u,p,_,m,b){var M=this.min,P=this.max;if(u<=M&&p<=M&&P<=_&&P<=m&&!b)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(u,p,_,m,this._queryCell,R,{},b),R},a.prototype._queryCell=function(u,p,_,m,b,M,P,R){var E=this.cells[b];if(E!==null)for(var O=this.keys,L=this.bboxes,D=0;D<E.length;D++){var k=E[D];if(P[k]===void 0){var B=4*k;(R?R(L[B+0],L[B+1],L[B+2],L[B+3]):u<=L[B+2]&&p<=L[B+3]&&_>=L[B+0]&&m>=L[B+1])?(P[k]=!0,M.push(O[k])):P[k]=!1}}},a.prototype._forEachCell=function(u,p,_,m,b,M,P,R){for(var E=this._convertToCellCoord(u),O=this._convertToCellCoord(p),L=this._convertToCellCoord(_),D=this._convertToCellCoord(m),k=E;k<=L;k++)for(var B=O;B<=D;B++){var W=this.d*B+k;if((!R||R(this._convertFromCellCoord(k),this._convertFromCellCoord(B),this._convertFromCellCoord(k+1),this._convertFromCellCoord(B+1)))&&b.call(this,u,p,_,m,W,M,P,R))return}},a.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},a.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},a.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,p=h+this.cells.length+1+1,_=0,m=0;m<this.cells.length;m++)_+=this.cells[m].length;var b=new Int32Array(p+_+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;for(var M=p,P=0;P<u.length;P++){var R=u[P];b[h+P]=M,b.set(R,M),M+=R.length}return b[h+u.length]=M,b.set(this.keys,M),b[h+u.length+1]=M+=this.keys.length,b.set(this.bboxes,M),M+=this.bboxes.length,b.buffer},Mg})(),rp=f(UE);const nv={};function An(h,a,u={}){Object.defineProperty(h,"_classRegistryKey",{value:a,writable:!1}),nv[a]={klass:h,omit:u.omit||[]}}An(Object,"Object"),rp.serialize=function(h,a){const u=h.toArrayBuffer();return a&&a.add(u),{buffer:u}},rp.deserialize=function(h){return new rp(h.buffer)},Object.defineProperty(rp,"name",{value:"Grid"}),An(rp,"Grid"),typeof DOMMatrix<"u"&&An(DOMMatrix,"DOMMatrix"),An(ii,"Color"),An(Error,"Error"),An(Uo,"Formatted"),An(dg,"FormattedSection"),An(_o,"AJAXError"),An(Ho,"ResolvedImage"),An(ev,"StylePropertyFunction"),An(Rb,"StyleExpression",{omit:["_evaluator"]}),An(da,"ImageId"),An(Oc,"ImageVariant"),An(np,"ZoomDependentExpression"),An(kb,"ZoomConstantExpression"),An(na,"CompoundExpression",{omit:["_evaluate"]});for(const h in Qf)nv[Qf[h]._classRegistryKey]||An(Qf[h],`Expression${h}`);function Nb(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function Fb(h){return self.ImageBitmap&&h instanceof ImageBitmap}function gd(h,a){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp)return h;if(Nb(h)||Fb(h))return a&&a.add(h),h;if(ArrayBuffer.isView(h))return a&&a.add(h.buffer),h;if(h instanceof ImageData)return a&&a.add(h.data.buffer),h;if(Array.isArray(h)){const u=[];for(const p of h)u.push(gd(p,a));return u}if(h instanceof Map){const u={$name:"Map",entries:[]};for(const[p,_]of h.entries())u.entries.push(gd(p),gd(_));return u}if(h instanceof Set){const u={$name:"Set"};let p=0;for(const _ of h.values())u[++p]=gd(_);return u}if(h instanceof DOMMatrix){const u={$name:"DOMMatrix"},p=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const _ of p)u[_]=h[_];return u}if(typeof h=="bigint")return{$name:"BigInt",value:h.toString()};if(typeof h=="object"){const u=h.constructor,p=u._classRegistryKey;if(!p)throw new Error(`Can't serialize object of unregistered class "${u.name}".`);const _=u.serialize?u.serialize(h,a):{};if(!u.serialize){for(const m in h)h.hasOwnProperty(m)&&(nv[p].omit.indexOf(m)>=0||(_[m]=gd(h[m],a)));h instanceof Error&&(_.message=h.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(_.$name=p),_}throw new Error("can't serialize object of type "+typeof h)}function nl(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||Nb(h)||Fb(h)||ArrayBuffer.isView(h)||h instanceof ImageData)return h;if(Array.isArray(h))return h.map(nl);if(typeof h=="object"){const a=h.$name||"Object";if(a==="Map"){const _=h.entries||[],m=new Map;for(let b=0;b<_.length;b+=2)m.set(nl(_[b]),nl(_[b+1]));return m}if(a==="Set"){const _=new Set;for(const m of Object.keys(h))m!=="$name"&&_.add(nl(h[m]));return _}if(a==="DOMMatrix"){let _;return _=h.is2D?[h.a,h.b,h.c,h.d,h.e,h.f]:[h.m11,h.m12,h.m13,h.m14,h.m21,h.m22,h.m23,h.m24,h.m31,h.m32,h.m33,h.m34,h.m41,h.m42,h.m43,h.m44],new DOMMatrix(_)}if(a==="BigInt")return BigInt(h.value);const{klass:u}=nv[a];if(!u)throw new Error(`Can't deserialize unregistered class "${a}".`);if(u.deserialize)return u.deserialize(h);const p=Object.create(u.prototype);for(const _ of Object.keys(h))_!=="$name"&&(p[_]=nl(h[_]));return p}throw new Error("can't deserialize object of type "+typeof h)}const Bn={"Latin-1 Supplement":h=>h>=128&&h<=255,Arabic:h=>h>=1536&&h<=1791,"Arabic Supplement":h=>h>=1872&&h<=1919,"Arabic Extended-A":h=>h>=2208&&h<=2303,"Hangul Jamo":h=>h>=4352&&h<=4607,"Unified Canadian Aboriginal Syllabics":h=>h>=5120&&h<=5759,Khmer:h=>h>=6016&&h<=6143,"Unified Canadian Aboriginal Syllabics Extended":h=>h>=6320&&h<=6399,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"CJK Radicals Supplement":h=>h>=11904&&h<=12031,"Kangxi Radicals":h=>h>=12032&&h<=12255,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Bopomofo:h=>h>=12544&&h<=12591,"Hangul Compatibility Jamo":h=>h>=12592&&h<=12687,Kanbun:h=>h>=12688&&h<=12703,"Bopomofo Extended":h=>h>=12704&&h<=12735,"CJK Strokes":h=>h>=12736&&h<=12783,"Katakana Phonetic Extensions":h=>h>=12784&&h<=12799,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"CJK Unified Ideographs Extension A":h=>h>=13312&&h<=19903,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Yi Syllables":h=>h>=40960&&h<=42127,"Yi Radicals":h=>h>=42128&&h<=42191,"Hangul Jamo Extended-A":h=>h>=43360&&h<=43391,"Hangul Syllables":h=>h>=44032&&h<=55215,"Hangul Jamo Extended-B":h=>h>=55216&&h<=55295,"Private Use Area":h=>h>=57344&&h<=63743,"CJK Compatibility Ideographs":h=>h>=63744&&h<=64255,"Arabic Presentation Forms-A":h=>h>=64336&&h<=65023,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Arabic Presentation Forms-B":h=>h>=65136&&h<=65279,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519,Osage:h=>h>=66736&&h<=66815,"CJK Unified Ideographs Extension B":h=>h>=131072&&h<=173791};function zb(h){for(const a of h)if(rv(a.charCodeAt(0)))return!0;return!1}function UO(h){for(const a of h)if(!HE(a.charCodeAt(0)))return!1;return!0}function HE(h){return!(Bn.Arabic(h)||Bn["Arabic Supplement"](h)||Bn["Arabic Extended-A"](h)||Bn["Arabic Presentation Forms-A"](h)||Bn["Arabic Presentation Forms-B"](h))}function rv(h){return!(h!==746&&h!==747&&(h<4352||!(Bn["Bopomofo Extended"](h)||Bn.Bopomofo(h)||Bn["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Bn["CJK Compatibility Ideographs"](h)||Bn["CJK Compatibility"](h)||Bn["CJK Radicals Supplement"](h)||Bn["CJK Strokes"](h)||!(!Bn["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Bn["CJK Unified Ideographs Extension A"](h)||Bn["CJK Unified Ideographs"](h)||Bn["Enclosed CJK Letters and Months"](h)||Bn["Hangul Compatibility Jamo"](h)||Bn["Hangul Jamo Extended-A"](h)||Bn["Hangul Jamo Extended-B"](h)||Bn["Hangul Jamo"](h)||Bn["Hangul Syllables"](h)||Bn.Hiragana(h)||Bn["Ideographic Description Characters"](h)||Bn.Kanbun(h)||Bn["Kangxi Radicals"](h)||Bn["Katakana Phonetic Extensions"](h)||Bn.Katakana(h)&&h!==12540||!(!Bn["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Bn["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Bn["Unified Canadian Aboriginal Syllabics"](h)||Bn["Unified Canadian Aboriginal Syllabics Extended"](h)||Bn["Vertical Forms"](h)||Bn["Yijing Hexagram Symbols"](h)||Bn["Yi Syllables"](h)||Bn["Yi Radicals"](h))))}function Bb(h){return!(rv(h)||(function(a){return!!(Bn["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||Bn["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||Bn["Letterlike Symbols"](a)||Bn["Number Forms"](a)||Bn["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||Bn["Control Pictures"](a)&&a!==9251||Bn["Optical Character Recognition"](a)||Bn["Enclosed Alphanumerics"](a)||Bn["Geometric Shapes"](a)||Bn["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||Bn["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||Bn["CJK Symbols and Punctuation"](a)||Bn.Katakana(a)||Bn["Private Use Area"](a)||Bn["CJK Compatibility Forms"](a)||Bn["Small Form Variants"](a)||Bn["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)})(h))}function WE(h){return Bn.Arabic(h)||Bn["Arabic Supplement"](h)||Bn["Arabic Extended-A"](h)||Bn["Arabic Presentation Forms-A"](h)||Bn["Arabic Presentation Forms-B"](h)}function iv(h){return h>=1424&&h<=2303||Bn["Arabic Presentation Forms-A"](h)||Bn["Arabic Presentation Forms-B"](h)}function $b(h,a){return!(!a&&iv(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Bn.Khmer(h))}function GE(h){for(const a of h)if(iv(a.charCodeAt(0)))return!0;return!1}const Vb="deferred",Rc="loading",jb="loaded";let Ub=null,ha="unavailable",_d=null;const Ag=function(h){h&&typeof h=="string"&&h.indexOf("NetworkError")>-1&&(ha="error"),Ub&&Ub(h)};function sv(){ip.fire(new Ca("pluginStateChange",{pluginStatus:ha,pluginURL:_d}))}const ip=new sc,ov=function(){return ha},YE=function(){if(ha!==Vb||!_d)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ha=Rc,sv(),_d&&Pc({url:_d},(h=>{h?Ag(h):(ha=jb,sv())}))},Ll={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ha===jb||Ll.applyArabicShaping!=null,isLoading:()=>ha===Rc,setState(h){ha=h.pluginStatus,_d=h.pluginURL},isParsed:()=>Ll.applyArabicShaping!=null&&Ll.processBidirectionalText!=null&&Ll.processStyledBidirectionalText!=null,getPluginURL:()=>_d};class vi{constructor(a,u){this.zoom=a,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch,this.brightness=u.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(a){return(function(u,p){for(const _ of u)if(!$b(_.charCodeAt(0),p))return!1;return!0})(a,Ll.isLoaded())}}class sp{constructor(a,u,p,_){this.property=a,this.value=u,this.expression=(function(m,b,M,P){if(Ky(m))return new ev(m,b);if(Qy(m)||Array.isArray(m)&&m.length>0){const R=Lb(m,b,M,P);if(R.result==="error")throw new Error(R.value.map((E=>`${E.key}: ${E.message}`)).join(", "));return R.value}{let R=m;return typeof m=="string"&&b.type==="color"&&(R=ii.parse(m)),{kind:"constant",configDependencies:new Set,evaluate:()=>R}}})(u===void 0?a.specification.default:u,a.specification,p,_)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,u,p){return this.property.possiblyEvaluate(this,a,u,p)}}class Hb{constructor(a,u,p){this.property=a,this.value=new sp(a,void 0,u,p)}transitioned(a,u){return new av(this.property,this.value,u,vn({},a.transition,this.transition),a.now)}untransitioned(){return new av(this.property,this.value,null,{},0)}}class Wb{constructor(a,u,p){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues),this._scope=u,this._options=p,this.configDependencies=new Set}getValue(a){return cn(this._values[a].value.value)}setValue(a,u){this._values.hasOwnProperty(a)||(this._values[a]=new Hb(this._values[a].property,this._scope,this._options)),this._values[a].value=new sp(this._values[a].property,u===null?void 0:cn(u),this._scope,this._options),this._values[a].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[a].value.expression.configDependencies]))}setTransitionOrValue(a,u){u&&(this._options=u);const p=this._properties.properties;if(a)for(const _ in a){const m=a[_];if(_.endsWith("-transition")){const b=_.slice(0,-11);p[b]&&this.setTransition(b,m)}else p.hasOwnProperty(_)&&this.setValue(_,m)}}getTransition(a){return cn(this._values[a].transition)}setTransition(a,u){this._values.hasOwnProperty(a)||(this._values[a]=new Hb(this._values[a].property)),this._values[a].transition=cn(u)||void 0}serialize(){const a={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(a[u]=p);const _=this.getTransition(u);_!==void 0&&(a[`${u}-transition`]=_)}return a}transitioned(a,u){const p=new Cg(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].transitioned(a,u._values[_]);return p}untransitioned(){const a=new Cg(this._properties);for(const u of Object.keys(this._values))a._values[u]=this._values[u].untransitioned();return a}}class av{constructor(a,u,p,_,m){const b=_.delay||0,M=_.duration||0;m=m||0,this.property=a,this.value=u,this.begin=m+b,this.end=this.begin+M,a.specification.transition&&(_.delay||_.duration)&&(this.prior=p)}possiblyEvaluate(a,u,p){const _=a.now||0,m=this.value.possiblyEvaluate(a,u,p),b=this.prior;if(b){if(_>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(_<this.begin)return b.possiblyEvaluate(a,u,p);{const M=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(a,u,p),m,lt(M))}}return m}}class Cg{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,u,p){const _=new lp(this._properties);for(const m of Object.keys(this._values))_._values[m]=this._values[m].possiblyEvaluate(a,u,p);return _}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class op{constructor(a,u,p){this._properties=a,this._values=Object.create(a.defaultPropertyValues),this._scope=u,this._options=p,this.configDependencies=new Set}getValue(a){return cn(this._values[a].value)}setValue(a,u){this._values[a]=new sp(this._values[a].property,u===null?void 0:cn(u),this._scope,this._options),this._values[a].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[a].expression.configDependencies]))}serialize(){const a={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(a[u]=p)}return a}possiblyEvaluate(a,u,p){const _=new lp(this._properties);for(const m of Object.keys(this._values))_._values[m]=this._values[m].possiblyEvaluate(a,u,p);return _}}class ap{constructor(a,u,p){this.property=a,this.value=u,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,u,p,_){return this.property.evaluate(this.value,this.parameters,a,u,p,_)}}class lp{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class hn{constructor(a){this.specification=a}possiblyEvaluate(a,u){return a.expression.evaluate(u)}interpolate(a,u,p){const _=cg[this.specification.type];return _?_(a,u,p):a}}class Mn{constructor(a,u){this.specification=a,this.overrides=u}possiblyEvaluate(a,u,p,_){return new ap(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(u,null,{},p,_)}:a.expression,u)}interpolate(a,u,p){if(a.value.kind!=="constant"||u.value.kind!=="constant")return a;if(a.value.value===void 0||u.value.value===void 0)return new ap(this,{kind:"constant",value:void 0},a.parameters);const _=cg[this.specification.type];return _?new ap(this,{kind:"constant",value:_(a.value.value,u.value.value,p)},a.parameters):a}evaluate(a,u,p,_,m,b){return a.kind==="constant"?a.value:a.evaluate(u,p,_,m,b)}}class cp{constructor(a){this.specification=a}possiblyEvaluate(a,u,p,_){return!!a.expression.evaluate(u,null,{},p,_)}interpolate(){return!1}}class Xi{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new vi(0,{});for(const p in a){const _=a[p];_.specification.overridable&&this.overridableProperties.push(p);const m=this.defaultPropertyValues[p]=new sp(_,void 0),b=this.defaultTransitionablePropertyValues[p]=new Hb(_);this.defaultTransitioningPropertyValues[p]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=m.possiblyEvaluate(u)}}}An(Mn,"DataDrivenProperty"),An(hn,"DataConstantProperty"),An(cp,"ColorRampProperty");var Tt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow","experimental":true},"rain":{"type":"rain","experimental":true},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor","experimental":true},"imports":{"type":"array","value":"import"},"iconsets":{"experimental":true,"type":"iconsets"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"experimental":true,"type":"*"},"selectors":{"experimental":true,"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"experimental":true,"type":"string","required":true},"properties":{"experimental":true,"type":"selectorProperty","required":false},"featureNamespace":{"experimental":true,"type":"string","required":false},"_uniqueFeatureID":{"experimental":true,"type":"boolean","private":true,"required":false}},"selectorProperty":{"experimental":true,"*":{"experimental":true,"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"required":true,"type":"enum","values":{"sprite":1}},"url":{"required":true,"type":"string"}},"iconset_source":{"type":{"required":true,"type":"enum","values":{"source":1}},"source":{"required":true,"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","experimental":true,"private":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","experimental":true,"private":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}},"buildingFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","experimental":true,"private":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"experimental":true,"private":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"*"}}}');function qE(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function lv(h){if(Array.isArray(h))return h.map(lv);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const a={};for(const u in h)a[u]=lv(h[u]);return a}return qE(h)}function Gb(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const a of h.slice(1))if(!Gb(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}function Yb(h,a="",u=null,p="fill"){if(h==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Gb(h)||(h=cv(h));const _=h;let m=!0;try{m=(function(E){if(!up(E))return E;let O=lv(E);return ZE(O),O=XE(O),O})(_)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(_,null,2)}
        `)}let b=null,M=null;if(p!=="background"&&p!=="sky"&&p!=="slot"){M=Tt[`filter_${p}`];const E=tp(m,M,a,u);if(E.result==="error")throw new Error(E.value.map((O=>`${O.key}: ${O.message}`)).join(", "));b=(O,L,D)=>E.value.evaluate(O,L,{},D)}let P=null,R=null;if(m!==_){const E=tp(_,M,a,u);if(E.result==="error")throw new Error(E.value.map((O=>`${O.key}: ${O.message}`)).join(", "));P=(O,L,D,k,B)=>E.value.evaluate(O,L,{},D,void 0,void 0,k,B),R=!Xf(E.value.expression)}return{filter:b,dynamicFilter:P||void 0,needGeometry:KE(m),needFeature:!!R}}function XE(h){if(!Array.isArray(h))return h;const a=(function(u){if(HO.has(u[0])){for(let p=1;p<u.length;p++)if(up(u[p]))return!0}return u})(h);return a===!0?a:a.map((u=>XE(u)))}function ZE(h){let a=!1;const u=[];if(h[0]==="case"){for(let p=1;p<h.length-1;p+=2)a=a||up(h[p]),u.push(h[p+1]);u.push(h[h.length-1])}else if(h[0]==="match"){a=a||up(h[1]);for(let p=2;p<h.length-1;p+=2)u.push(h[p+1]);u.push(h[h.length-1])}else if(h[0]==="step"){a=a||up(h[1]);for(let p=1;p<h.length-1;p+=2)u.push(h[p+1])}a&&(h.length=0,h.push("any",...u));for(let p=1;p<h.length;p++)ZE(h[p])}function up(h){if(!Array.isArray(h))return!1;if((a=h[0])==="pitch"||a==="distance-from-center")return!0;var a;for(let u=1;u<h.length;u++)if(up(h[u]))return!0;return!1}const HO=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function WO(h,a){return h<a?-1:h>a?1:0}function KE(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let a=1;a<h.length;a++)if(KE(h[a]))return!0;return!1}function cv(h){if(!h)return!0;const a=h[0];return h.length<=1?a!=="any":a==="=="?yd(h[1],h[2],"=="):a==="!="?ph(yd(h[1],h[2],"==")):a==="<"||a===">"||a==="<="||a===">="?yd(h[1],h[2],a):a==="any"?(u=h.slice(1),["any"].concat(u.map(cv))):a==="all"?["all"].concat(h.slice(1).map(cv)):a==="none"?["all"].concat(h.slice(1).map(cv).map(ph)):a==="in"?qb(h[1],h.slice(2)):a==="!in"?ph(qb(h[1],h.slice(2))):a==="has"?Xb(h[1]):a!=="!has"||ph(Xb(h[1]));var u}function yd(h,a,u){switch(h){case"$type":return[`filter-type-${u}`,a];case"$id":return[`filter-id-${u}`,a];default:return[`filter-${u}`,h,a]}}function qb(h,a){if(a.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some((u=>typeof u!=typeof a[0]))?["filter-in-large",h,["literal",a.sort(WO)]]:["filter-in-small",h,["literal",a]]}}function Xb(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function ph(h){return["!",h]}const uv="";function dp(h,a){return a?`${h}${uv}${a}`:h}const _u="-transition",JE=new Set(["fill","line","background","hillshade","raster"]);class oo extends sc{constructor(a,u,p,_,m){if(super(),this.id=a.id,this.fqid=dp(this.id,p),this.type=a.type,this.scope=p,this.lut=_,this.options=m,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,a.type!=="custom"){if(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type&&a.type!=="background"&&a.type!=="sky"&&a.type!=="slot"){this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter;const b=tp(this.filter,Tt[`filter_${a.type}`]);b.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...b.value.configDependencies]))}if(a.slot&&(this.slot=a.slot),u.layout&&(this._unevaluatedLayout=new op(u.layout,this.scope,m),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),u.paint){this._transitionablePaint=new Wb(u.paint,this.scope,m);for(const b in a.paint)this.setPaintProperty(b,a.paint[b]);for(const b in a.layout)this.setLayoutProperty(b,a.layout[b]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new lp(u.paint)}}}onAdd(a){}onRemove(a){}isDraped(a){return!this.is3D(!0)&&JE.has(this.type)}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,u){if(this.type==="custom"&&a==="visibility")return void(this.visibility=u);const p=this._unevaluatedLayout;p._properties.properties[a]&&(p.setValue(a,u),this.configDependencies=new Set([...this.configDependencies,...p.configDependencies]),a==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(a){return a.endsWith(_u)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,u){const p=this._transitionablePaint,_=p._properties.properties;if(a.endsWith(_u)){const O=a.slice(0,-11);return _[O]&&p.setTransition(O,u||void 0),!1}if(!_[a])return!1;const m=p._values[a],b=m.value.isDataDriven(),M=m.value;p.setValue(a,u),this.configDependencies=new Set([...this.configDependencies,...p.configDependencies]),this._handleSpecialPaintPropertyUpdate(a);const P=p._values[a].value,R=P.isDataDriven(),E=a.endsWith("pattern")||a==="line-dasharray";return R||b||E||this._handleOverridablePaintPropertyUpdate(a,M,P)}_handleSpecialPaintPropertyUpdate(a){}getProgramIds(){return null}getDefaultProgramParams(a,u,p){return null}_handleOverridablePaintPropertyUpdate(a,u,p){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,u)}serialize(){return Qt({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},((a,u)=>!(a===void 0||u==="layout"&&!Object.keys(a).length||u==="paint"&&!Object.keys(a).length)))}is3D(a){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const a in this.paint._values){const u=this.paint.get(a);if(u instanceof ap&&ep(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(a){this._filterCompiled||(this._featureFilter=Yb(this.filter,this.scope,a),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(a){this._stats&&(a.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(a){}queryIntersectsFeature(a,u,p,_,m,b,M,P,R){}}const GO={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ig{constructor(a,u){this._structArray=a,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ci{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,u){return a._trim(),u&&(a.isTransferred=!0,u.add(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const u=Object.create(this.prototype);return u.arrayBuffer=a.arrayBuffer,u.length=a.length,u.capacity=a.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...a){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...a){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Gr(h,a=1){let u=0,p=0;return{members:h.map((_=>{const m=GO[_.type].BYTES_PER_ELEMENT,b=u=QE(u,Math.max(a,m)),M=_.components||1;return p=Math.max(p,m),u+=m*M,{name:_.name,type:_.type,components:M,offset:b}})),size:QE(u,Math.max(p,a)),alignment:a}}function QE(h,a){return Math.ceil(h/a)*a}class yu extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u){const p=this.length;return this.resize(p+1),this.emplace(p,a,u)}emplace(a,u,p){const _=2*a;return this.int16[_+0]=u,this.int16[_+1]=p,a}}yu.prototype.bytesPerElement=4,An(yu,"StructArrayLayout2i4");class hp extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,u,p)}emplace(a,u,p,_){const m=3*a;return this.int16[m+0]=u,this.int16[m+1]=p,this.int16[m+2]=_,a}}hp.prototype.bytesPerElement=6,An(hp,"StructArrayLayout3i6");class vu extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p,_){const m=this.length;return this.resize(m+1),this.emplace(m,a,u,p,_)}emplace(a,u,p,_,m){const b=4*a;return this.int16[b+0]=u,this.int16[b+1]=p,this.int16[b+2]=_,this.int16[b+3]=m,a}}vu.prototype.bytesPerElement=8,An(vu,"StructArrayLayout4i8");class mh extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.float32[1*a+0]=u,a}}mh.prototype.bytesPerElement=4,An(mh,"StructArrayLayout1f4");class Pg extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,u,p)}emplace(a,u,p,_){const m=4*a,b=2*a;return this.int16[m+0]=u,this.int16[m+1]=p,this.float32[b+1]=_,a}}Pg.prototype.bytesPerElement=8,An(Pg,"StructArrayLayout2i1f8");class Zb extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,u,p)}emplace(a,u,p,_){const m=4*a;return this.int16[m+0]=u,this.int16[m+1]=p,this.int16[m+2]=_,a}}Zb.prototype.bytesPerElement=8,An(Zb,"StructArrayLayout3i8");class Nl extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,p,_,m)}emplace(a,u,p,_,m,b){const M=5*a;return this.int16[M+0]=u,this.int16[M+1]=p,this.int16[M+2]=_,this.int16[M+3]=m,this.int16[M+4]=b,a}}Nl.prototype.bytesPerElement=10,An(Nl,"StructArrayLayout5i10");class Kb extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b,M){const P=this.length;return this.resize(P+1),this.emplace(P,a,u,p,_,m,b,M)}emplace(a,u,p,_,m,b,M,P){const R=6*a,E=12*a,O=3*a;return this.int16[R+0]=u,this.int16[R+1]=p,this.uint8[E+4]=_,this.uint8[E+5]=m,this.uint8[E+6]=b,this.uint8[E+7]=M,this.float32[O+2]=P,a}}Kb.prototype.bytesPerElement=12,An(Kb,"StructArrayLayout2i4ub1f12");class cc extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,u,p)}emplace(a,u,p,_){const m=3*a;return this.float32[m+0]=u,this.float32[m+1]=p,this.float32[m+2]=_,a}}cc.prototype.bytesPerElement=12,An(cc,"StructArrayLayout3f12");class vd extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,p,_,m)}emplace(a,u,p,_,m,b){const M=6*a,P=3*a;return this.uint16[M+0]=u,this.uint16[M+1]=p,this.uint16[M+2]=_,this.uint16[M+3]=m,this.float32[P+2]=b,a}}vd.prototype.bytesPerElement=12,An(vd,"StructArrayLayout4ui1f12");class dv extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,p,_){const m=this.length;return this.resize(m+1),this.emplace(m,a,u,p,_)}emplace(a,u,p,_,m){const b=4*a;return this.uint16[b+0]=u,this.uint16[b+1]=p,this.uint16[b+2]=_,this.uint16[b+3]=m,a}}dv.prototype.bytesPerElement=8,An(dv,"StructArrayLayout4ui8");class hv extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b){const M=this.length;return this.resize(M+1),this.emplace(M,a,u,p,_,m,b)}emplace(a,u,p,_,m,b,M){const P=6*a;return this.int16[P+0]=u,this.int16[P+1]=p,this.int16[P+2]=_,this.int16[P+3]=m,this.int16[P+4]=b,this.int16[P+5]=M,a}}hv.prototype.bytesPerElement=12,An(hv,"StructArrayLayout6i12");class Jb extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b,M,P,R,E,O,L){const D=this.length;return this.resize(D+1),this.emplace(D,a,u,p,_,m,b,M,P,R,E,O,L)}emplace(a,u,p,_,m,b,M,P,R,E,O,L,D){const k=12*a;return this.int16[k+0]=u,this.int16[k+1]=p,this.int16[k+2]=_,this.int16[k+3]=m,this.uint16[k+4]=b,this.uint16[k+5]=M,this.uint16[k+6]=P,this.uint16[k+7]=R,this.int16[k+8]=E,this.int16[k+9]=O,this.int16[k+10]=L,this.int16[k+11]=D,a}}Jb.prototype.bytesPerElement=24,An(Jb,"StructArrayLayout4i4ui4i24");class Qb extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b){const M=this.length;return this.resize(M+1),this.emplace(M,a,u,p,_,m,b)}emplace(a,u,p,_,m,b,M){const P=10*a,R=5*a;return this.int16[P+0]=u,this.int16[P+1]=p,this.int16[P+2]=_,this.float32[R+2]=m,this.float32[R+3]=b,this.float32[R+4]=M,a}}Qb.prototype.bytesPerElement=20,An(Qb,"StructArrayLayout3i3f20");class gh extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_){const m=this.length;return this.resize(m+1),this.emplace(m,a,u,p,_)}emplace(a,u,p,_,m){const b=4*a;return this.float32[b+0]=u,this.float32[b+1]=p,this.float32[b+2]=_,this.float32[b+3]=m,a}}gh.prototype.bytesPerElement=16,An(gh,"StructArrayLayout4f16");class ex extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint32[1*a+0]=u,a}}ex.prototype.bytesPerElement=4,An(ex,"StructArrayLayout1ul4");class bd extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u){const p=this.length;return this.resize(p+1),this.emplace(p,a,u)}emplace(a,u,p){const _=2*a;return this.uint16[_+0]=u,this.uint16[_+1]=p,a}}bd.prototype.bytesPerElement=4,An(bd,"StructArrayLayout2ui4");class tx extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b,M,P,R,E,O,L,D){const k=this.length;return this.resize(k+1),this.emplace(k,a,u,p,_,m,b,M,P,R,E,O,L,D)}emplace(a,u,p,_,m,b,M,P,R,E,O,L,D,k){const B=20*a,W=10*a;return this.int16[B+0]=u,this.int16[B+1]=p,this.int16[B+2]=_,this.int16[B+3]=m,this.int16[B+4]=b,this.float32[W+3]=M,this.float32[W+4]=P,this.float32[W+5]=R,this.float32[W+6]=E,this.int16[B+14]=O,this.uint32[W+8]=L,this.uint16[B+18]=D,this.uint16[B+19]=k,a}}tx.prototype.bytesPerElement=40,An(tx,"StructArrayLayout5i4f1i1ul2ui40");class Og extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b,M){const P=this.length;return this.resize(P+1),this.emplace(P,a,u,p,_,m,b,M)}emplace(a,u,p,_,m,b,M,P){const R=8*a;return this.int16[R+0]=u,this.int16[R+1]=p,this.int16[R+2]=_,this.int16[R+4]=m,this.int16[R+5]=b,this.int16[R+6]=M,this.int16[R+7]=P,a}}Og.prototype.bytesPerElement=16,An(Og,"StructArrayLayout3i2i2i16");class nx extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,p,_,m)}emplace(a,u,p,_,m,b){const M=4*a,P=8*a;return this.float32[M+0]=u,this.float32[M+1]=p,this.float32[M+2]=_,this.int16[P+6]=m,this.int16[P+7]=b,a}}nx.prototype.bytesPerElement=16,An(nx,"StructArrayLayout2f1f2i16");class rx extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b){const M=this.length;return this.resize(M+1),this.emplace(M,a,u,p,_,m,b)}emplace(a,u,p,_,m,b,M){const P=20*a,R=5*a;return this.uint8[P+0]=u,this.uint8[P+1]=p,this.float32[R+1]=_,this.float32[R+2]=m,this.float32[R+3]=b,this.float32[R+4]=M,a}}rx.prototype.bytesPerElement=20,An(rx,"StructArrayLayout2ub4f20");class yo extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,u,p)}emplace(a,u,p,_){const m=3*a;return this.uint16[m+0]=u,this.uint16[m+1]=p,this.uint16[m+2]=_,a}}yo.prototype.bytesPerElement=6,An(yo,"StructArrayLayout3ui6");class fv extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W,G,Q,K,Z,re){const ce=this.length;return this.resize(ce+1),this.emplace(ce,a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W,G,Q,K,Z,re)}emplace(a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W,G,Q,K,Z,re,ce){const fe=30*a,Pe=15*a,Me=60*a;return this.int16[fe+0]=u,this.int16[fe+1]=p,this.int16[fe+2]=_,this.float32[Pe+2]=m,this.float32[Pe+3]=b,this.uint16[fe+8]=M,this.uint16[fe+9]=P,this.uint32[Pe+5]=R,this.uint32[Pe+6]=E,this.uint32[Pe+7]=O,this.uint16[fe+16]=L,this.uint16[fe+17]=D,this.uint16[fe+18]=k,this.float32[Pe+10]=B,this.float32[Pe+11]=W,this.uint8[Me+48]=G,this.uint8[Me+49]=Q,this.uint8[Me+50]=K,this.uint32[Pe+13]=Z,this.int16[fe+28]=re,this.uint8[Me+58]=ce,a}}fv.prototype.bytesPerElement=60,An(fv,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class pv extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W,G,Q,K,Z,re,ce,fe,Pe,Me,Ae,Ze,Oe,Je,rt,et,dt,ct){const xt=this.length;return this.resize(xt+1),this.emplace(xt,a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W,G,Q,K,Z,re,ce,fe,Pe,Me,Ae,Ze,Oe,Je,rt,et,dt,ct)}emplace(a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W,G,Q,K,Z,re,ce,fe,Pe,Me,Ae,Ze,Oe,Je,rt,et,dt,ct,xt){const pt=20*a,St=40*a,Zt=80*a;return this.float32[pt+0]=u,this.float32[pt+1]=p,this.int16[St+4]=_,this.int16[St+5]=m,this.int16[St+6]=b,this.int16[St+7]=M,this.int16[St+8]=P,this.int16[St+9]=R,this.int16[St+10]=E,this.int16[St+11]=O,this.int16[St+12]=L,this.uint16[St+13]=D,this.uint16[St+14]=k,this.uint16[St+15]=B,this.uint16[St+16]=W,this.uint16[St+17]=G,this.uint16[St+18]=Q,this.uint16[St+19]=K,this.uint16[St+20]=Z,this.uint16[St+21]=re,this.uint16[St+22]=ce,this.uint16[St+23]=fe,this.uint16[St+24]=Pe,this.uint16[St+25]=Me,this.uint16[St+26]=Ae,this.uint16[St+27]=Ze,this.uint32[pt+14]=Oe,this.float32[pt+15]=Je,this.float32[pt+16]=rt,this.float32[pt+17]=et,this.float32[pt+18]=dt,this.uint8[Zt+76]=ct,this.uint16[St+39]=xt,a}}pv.prototype.bytesPerElement=80,An(pv,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class Ia extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m){const b=this.length;return this.resize(b+1),this.emplace(b,a,u,p,_,m)}emplace(a,u,p,_,m,b){const M=5*a;return this.float32[M+0]=u,this.float32[M+1]=p,this.float32[M+2]=_,this.float32[M+3]=m,this.float32[M+4]=b,a}}Ia.prototype.bytesPerElement=20,An(Ia,"StructArrayLayout5f20");class mv extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b,M){const P=this.length;return this.resize(P+1),this.emplace(P,a,u,p,_,m,b,M)}emplace(a,u,p,_,m,b,M,P){const R=7*a;return this.float32[R+0]=u,this.float32[R+1]=p,this.float32[R+2]=_,this.float32[R+3]=m,this.float32[R+4]=b,this.float32[R+5]=M,this.float32[R+6]=P,a}}mv.prototype.bytesPerElement=28,An(mv,"StructArrayLayout7f28");class ix extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b,M,P,R,E,O){const L=this.length;return this.resize(L+1),this.emplace(L,a,u,p,_,m,b,M,P,R,E,O)}emplace(a,u,p,_,m,b,M,P,R,E,O,L){const D=11*a;return this.float32[D+0]=u,this.float32[D+1]=p,this.float32[D+2]=_,this.float32[D+3]=m,this.float32[D+4]=b,this.float32[D+5]=M,this.float32[D+6]=P,this.float32[D+7]=R,this.float32[D+8]=E,this.float32[D+9]=O,this.float32[D+10]=L,a}}ix.prototype.bytesPerElement=44,An(ix,"StructArrayLayout11f44");class sx extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b,M,P,R){const E=this.length;return this.resize(E+1),this.emplace(E,a,u,p,_,m,b,M,P,R)}emplace(a,u,p,_,m,b,M,P,R,E){const O=9*a;return this.float32[O+0]=u,this.float32[O+1]=p,this.float32[O+2]=_,this.float32[O+3]=m,this.float32[O+4]=b,this.float32[O+5]=M,this.float32[O+6]=P,this.float32[O+7]=R,this.float32[O+8]=E,a}}sx.prototype.bytesPerElement=36,An(sx,"StructArrayLayout9f36");class fp extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u){const p=this.length;return this.resize(p+1),this.emplace(p,a,u)}emplace(a,u,p){const _=2*a;return this.float32[_+0]=u,this.float32[_+1]=p,a}}fp.prototype.bytesPerElement=8,An(fp,"StructArrayLayout2f8");class Dg extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,p,_){const m=this.length;return this.resize(m+1),this.emplace(m,a,u,p,_)}emplace(a,u,p,_,m){const b=6*a;return this.uint32[3*a+0]=u,this.uint16[b+2]=p,this.uint16[b+3]=_,this.uint16[b+4]=m,a}}Dg.prototype.bytesPerElement=12,An(Dg,"StructArrayLayout1ul3ui12");class gv extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint16[1*a+0]=u,a}}gv.prototype.bytesPerElement=2,An(gv,"StructArrayLayout1ui2");class _v extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W){const G=this.length;return this.resize(G+1),this.emplace(G,a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W)}emplace(a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W,G){const Q=16*a;return this.float32[Q+0]=u,this.float32[Q+1]=p,this.float32[Q+2]=_,this.float32[Q+3]=m,this.float32[Q+4]=b,this.float32[Q+5]=M,this.float32[Q+6]=P,this.float32[Q+7]=R,this.float32[Q+8]=E,this.float32[Q+9]=O,this.float32[Q+10]=L,this.float32[Q+11]=D,this.float32[Q+12]=k,this.float32[Q+13]=B,this.float32[Q+14]=W,this.float32[Q+15]=G,a}}_v.prototype.bytesPerElement=64,An(_v,"StructArrayLayout16f64");class yv extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,p,_,m,b,M){const P=this.length;return this.resize(P+1),this.emplace(P,a,u,p,_,m,b,M)}emplace(a,u,p,_,m,b,M,P){const R=10*a,E=5*a;return this.uint16[R+0]=u,this.uint16[R+1]=p,this.uint16[R+2]=_,this.uint16[R+3]=m,this.float32[E+2]=b,this.float32[E+3]=M,this.float32[E+4]=P,a}}yv.prototype.bytesPerElement=20,An(yv,"StructArrayLayout4ui3f20");class vv extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.int16[1*a+0]=u,a}}vv.prototype.bytesPerElement=2,An(vv,"StructArrayLayout1i2");class ox extends Ci{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint8[1*a+0]=u,a}}ox.prototype.bytesPerElement=1,An(ox,"StructArrayLayout1ub1");class ax extends Ig{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ax.prototype.size=40;class Rg extends tx{get(a){return new ax(this,a)}}An(Rg,"CollisionBoxArray");class eT extends Ig{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(a){this._structArray.uint8[this._pos1+49]=a}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(a){this._structArray.uint8[this._pos1+50]=a}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(a){this._structArray.uint32[this._pos4+13]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(a){this._structArray.uint8[this._pos1+58]=a}}eT.prototype.size=60;class tT extends fv{get(a){return new eT(this,a)}}An(tT,"PlacedSymbolArray");class nT extends Ig{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(a){this._structArray.uint32[this._pos4+14]=a}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(a){this._structArray.float32[this._pos4+18]=a}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}nT.prototype.size=80;class rT extends pv{get(a){return new nT(this,a)}}An(rT,"SymbolInstanceArray");class iT extends mh{getoffsetX(a){return this.float32[1*a+0]}}An(iT,"GlyphOffsetArray");class kg extends yu{getx(a){return this.int16[2*a+0]}gety(a){return this.int16[2*a+1]}}An(kg,"SymbolLineVertexArray");class Lg extends Ig{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Lg.prototype.size=12;class Pa extends Dg{get(a){return new Lg(this,a)}}An(Pa,"FeatureIndexArray");class Ng extends bd{geta_centroid_pos0(a){return this.uint16[2*a+0]}geta_centroid_pos1(a){return this.uint16[2*a+1]}}An(Ng,"FillExtrusionCentroidArray");class sT extends Ig{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}sT.prototype.size=6;class oT extends hp{get(a){return new sT(this,a)}}An(oT,"FillExtrusionWallArray");const YO=Gr([{name:"a_pos",components:2,type:"Int16"}],4),qO=Gr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Bi{constructor(a=[]){this.segments=a}_prepareSegment(a,u,p,_){let m=this.segments[this.segments.length-1];return a>Bi.MAX_VERTEX_ARRAY_LENGTH&&Te(`Max vertices per segment is ${Bi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!m||m.vertexLength+a>Bi.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==_)&&(m={vertexOffset:u,primitiveOffset:p,vertexLength:0,primitiveLength:0},_!==void 0&&(m.sortKey=_),this.segments.push(m)),m}prepareSegment(a,u,p,_){return this._prepareSegment(a,u.length,p.length,_)}get(){return this.segments}destroy(){for(const a of this.segments)for(const u in a.vaos)a.vaos[u].destroy()}static simpleSegment(a,u,p,_){return new Bi([{vertexOffset:a,primitiveOffset:u,vertexLength:p,primitiveLength:_,vaos:{},sortKey:0}])}}function aT(h,a){return 256*(h=$e(Math.floor(h),0,255))+$e(Math.floor(a),0,255)}Bi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,An(Bi,"SegmentVector");const lx=Gr([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),XO=Gr([{name:"a_dash",components:4,type:"Uint16"}]);class Fg{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(a,u,p,_){this.ids.push(cx(a)),this.positions.push(u,p,_)}eachPosition(a,u){const p=cx(a);let _=0,m=this.ids.length-1;for(;_<m;){const b=_+m>>1;this.ids[b]>=p?m=b:_=b+1}for(;this.ids[_]===p;)u(this.positions[3*_],this.positions[3*_+1],this.positions[3*_+2]),_++}static serialize(a,u){const p=new Float64Array(a.ids),_=new Uint32Array(a.positions);return zg(p,_,0,p.length-1),u&&(u.add(p.buffer),u.add(_.buffer)),{ids:p,positions:_}}static deserialize(a){const u=new Fg;let p;u.ids=a.ids,u.positions=a.positions;for(const _ of u.ids)_!==p&&u.uniqueIds.push(_),p=_;return u.indexed=!0,u}}function cx(h){const a=+h;return!isNaN(a)&&Number.MIN_SAFE_INTEGER<=a&&a<=Number.MAX_SAFE_INTEGER?a:Qa(String(h))}function zg(h,a,u,p){for(;u<p;){const _=h[u+p>>1];let m=u-1,b=p+1;for(;;){do m++;while(h[m]<_);do b--;while(h[b]>_);if(m>=b)break;bv(h,m,b),bv(a,3*m,3*b),bv(a,3*m+1,3*b+1),bv(a,3*m+2,3*b+2)}b-u<p-b?(zg(h,a,u,b),u=b+1):(zg(h,a,b+1,p),p=b)}}function bv(h,a,u){const p=h[a];h[a]=h[u],h[u]=p}An(Fg,"FeaturePositionMap");class kc{constructor(a){this.gl=a.gl,this.initialized=!1}fetchUniformLocation(a,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(a,u),this.initialized=!0),!!this.location}set(a,u,p){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Bg extends kc{constructor(a){super(a),this.current=0}set(a,u,p){this.fetchUniformLocation(a,u)&&this.current!==p&&(this.current=p,this.gl.uniform1i(this.location,p))}}class ms extends kc{constructor(a){super(a),this.current=0}set(a,u,p){this.fetchUniformLocation(a,u)&&this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))}}class Fl extends kc{constructor(a){super(a),this.current=[0,0]}set(a,u,p){this.fetchUniformLocation(a,u)&&(p[0]===this.current[0]&&p[1]===this.current[1]||(this.current=p,this.gl.uniform2f(this.location,p[0],p[1])))}}class pp extends kc{constructor(a){super(a),this.current=[0,0,0]}set(a,u,p){this.fetchUniformLocation(a,u)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]||(this.current=p,this.gl.uniform3f(this.location,p[0],p[1],p[2])))}}class $g extends kc{constructor(a){super(a),this.current=[0,0,0,0]}set(a,u,p){this.fetchUniformLocation(a,u)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]&&p[3]===this.current[3]||(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3])))}}class lT extends kc{constructor(a){super(a),this.current=ii.transparent.toRenderColor(null)}set(a,u,p){this.fetchUniformLocation(a,u)&&(p.r===this.current.r&&p.g===this.current.g&&p.b===this.current.b&&p.a===this.current.a||(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a)))}}const cT=new Float32Array(16);class Vg extends kc{constructor(a){super(a),this.current=cT}set(a,u,p){if(this.fetchUniformLocation(a,u)){if(p[12]!==this.current[12]||p[0]!==this.current[0])return this.current=p,void this.gl.uniformMatrix4fv(this.location,!1,p);for(let _=1;_<16;_++)if(p[_]!==this.current[_]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);break}}}}const ux=new Float32Array(9),ZO=new Float32Array(4);class dx extends kc{constructor(a){super(a),this.current=ZO}set(a,u,p){if(this.fetchUniformLocation(a,u)){for(let _=0;_<4;_++)if(p[_]!==this.current[_]){this.current=p,this.gl.uniformMatrix2fv(this.location,!1,p);break}}}}function hx(h){return[aT(255*h.r,255*h.g),aT(255*h.b,255*h.a)]}class jg{constructor(a,u,p,_){this.value=a,this.uniformNames=u.map((m=>`u_${m}`)),this.type=p,this.context=_}setUniform(a,u,p,_,m){const b=_.constantOr(this.value);u.set(a,m,b instanceof ii?b.toRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):b)}getBinding(a,u){return this.type==="color"?new lT(a):new ms(a)}}class _h{constructor(a,u){this.uniformNames=u.map((p=>`u_${p}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(a){this.pixelRatio=a.pixelRatio||1,this.pattern=a.tl.concat(a.br)}setUniform(a,u,p,_,m){const b=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;b&&u.set(a,m,b)}getBinding(a,u){return u==="u_pattern"||u==="u_dash"?new $g(a):new ms(a)}}class bu{constructor(a,u,p,_){this.expression=a,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map((m=>({name:`a_${m}`,type:"Float32",components:p==="color"?2:1,offset:0}))),this.paintVertexArray=new _}populatePaintArray(a,u,p,_,m,b,M){const P=this.paintVertexArray.length,R=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new vi(0,{brightness:b}),u,{},m,_,M):this.expression.kind==="constant"&&this.expression.value,E=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vi(0,{brightness:b}),u,{},m,_,M):this.lutExpression.value)==="none";this.paintVertexArray.resize(a),this._setPaintValue(P,a,R,E?null:this.context.lut)}updatePaintArray(a,u,p,_,m,b,M){const P=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:M},p,_,void 0,m):this.expression.kind==="constant"&&this.expression.value,R=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vi(0,{brightness:M}),p,_,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(a,u,P,R?null:this.context.lut)}_setPaintValue(a,u,p,_){if(this.type==="color"){const m=hx(p.toRenderColor(_));for(let b=a;b<u;b++)this.paintVertexArray.emplace(b,m[0],m[1])}else{for(let m=a;m<u;m++)this.paintVertexArray.emplace(m,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class uc{constructor(a,u,p,_,m,b){this.expression=a,this.uniformNames=u.map((M=>`u_${M}_t`)),this.type=p,this.useIntegerZoom=_,this.context=m,this.maxValue=0,this.paintVertexAttributes=u.map((M=>({name:`a_${M}`,type:"Float32",components:p==="color"?4:2,offset:0}))),this.paintVertexArray=new b}populatePaintArray(a,u,p,_,m,b,M){const P=this.expression.evaluate(new vi(this.context.zoom,{brightness:b}),u,{},m,_,M),R=this.expression.evaluate(new vi(this.context.zoom+1,{brightness:b}),u,{},m,_,M),E=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vi(0,{brightness:b}),u,{},m,_,M):this.lutExpression.value)==="none",O=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(O,a,P,R,E?null:this.context.lut)}updatePaintArray(a,u,p,_,m,b,M){const P=this.expression.evaluate({zoom:this.context.zoom,brightness:M},p,_,void 0,m),R=this.expression.evaluate({zoom:this.context.zoom+1,brightness:M},p,_,void 0,m),E=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vi(0,{brightness:M}),p,_,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(a,u,P,R,E?null:this.context.lut)}_setPaintValue(a,u,p,_,m){if(this.type==="color"){const b=hx(p.toRenderColor(m)),M=hx(p.toRenderColor(m));for(let P=a;P<u;P++)this.paintVertexArray.emplace(P,b[0],b[1],M[0],M[1])}else{for(let b=a;b<u;b++)this.paintVertexArray.emplace(b,p,_);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(_))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,u,p,_,m){const b=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,M=$e(this.expression.interpolationFactor(b,this.context.zoom,this.context.zoom+1),0,1);u.set(a,m,M)}getBinding(a,u){return new ms(a)}}class xd{constructor(a,u,p,_,m){this.expression=a,this.layerId=m,this.paintVertexAttributes=(p==="array"?XO:lx).members;for(let b=0;b<u.length;++b);this.paintVertexArray=new _}populatePaintArray(a,u,p,_){const m=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValues(m,a,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(a,u,p,_,m,b,M){this._setPaintValues(a,u,p.patterns&&p.patterns[this.layerId],b)}_setPaintValues(a,u,p,_){if(!_||!p)return;const m=_[p];if(!m)return;const{tl:b,br:M,pixelRatio:P}=m;for(let R=a;R<u;R++)this.paintVertexArray.emplace(R,b[0],b[1],M[0],M[1],P)}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class yh{constructor(a,u,p=(()=>!0)){this.binders={},this._buffers=[],this.context=u;const _=[];for(const m in a.paint._values){const b=a.paint.get(m);if(m.endsWith("-use-theme")||!p(m)||!(b instanceof ap&&ep(b.property.specification)))continue;const M=JO(m,a.type),P=b.value,R=b.property.specification.type,E=!!b.property.useIntegerZoom,O=m==="line-dasharray"||m.endsWith("pattern"),L=a.paint.get(`${m}-use-theme`),D=m==="line-dasharray"&&a.layout.get("line-cap").value.kind!=="constant"||L&&L.value.kind!=="constant";if(P.kind!=="constant"||D)if(P.kind==="source"||D||O){const k=uT(m,R,"source");this.binders[m]=O?new xd(P,M,R,k,a.id):new bu(P,M,R,k),_.push(`/a_${m}`)}else{const k=uT(m,R,"composite");this.binders[m]=new uc(P,M,R,E,u,k),_.push(`/z_${m}`)}else this.binders[m]=O?new _h(P.value,M):new jg(P.value,M,R,u),_.push(`/u_${m}`);L&&(this.binders[m].lutExpression=L.value)}this.cacheKey=_.sort().join("")}getMaxValue(a){const u=this.binders[a];return u instanceof bu||u instanceof uc?u.maxValue:0}populatePaintArrays(a,u,p,_,m,b,M){for(const P in this.binders){const R=this.binders[P];R.context=this.context,(R instanceof bu||R instanceof uc||R instanceof xd)&&R.populatePaintArray(a,u,p,_,m,b,M)}}setConstantPatternPositions(a){for(const u in this.binders){const p=this.binders[u];p instanceof _h&&p.setConstantPatternPositions(a)}}updatePaintArrays(a,u,p,_,m,b,M,P,R){let E=!1;const O=Object.keys(a),L=O.length!==0&&!P,D=L?O:u.uniqueIds;this.context.lut=m.lut;for(const k in this.binders){const B=this.binders[k];if(B.context=this.context,(B instanceof bu||B instanceof uc||B instanceof xd)&&B.expression&&B.expression.kind&&B.expression.kind!=="constant"&&(B.expression.isStateDependent===!0||B.expression.isLightConstant===!1)){const W=m.paint.get(k);B.expression=W.value;for(const G of D){const Q=a[G.toString()];u.eachPosition(G,((K,Z,re)=>{const ce=_.feature(K);B.updatePaintArray(Z,re,ce,Q,b,M,R)}))}if(!L)for(const G of p.uniqueIds){const Q=a[G.toString()];p.eachPosition(G,((K,Z,re)=>{const ce=_.feature(K);B.updatePaintArray(Z,re,ce,Q,b,M,R)}))}E=!0}}return E}defines(){const a=[];for(const u in this.binders){const p=this.binders[u];(p instanceof jg||p instanceof _h)&&a.push(...p.uniformNames.map((_=>`#define HAS_UNIFORM_${_}`)))}return a}getBinderAttributes(){const a=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof bu||p instanceof uc||p instanceof xd)for(let _=0;_<p.paintVertexAttributes.length;_++)a.push(p.paintVertexAttributes[_].name)}return a}getBinderUniforms(){const a=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof jg||p instanceof _h||p instanceof uc)for(const _ of p.uniformNames)a.push(_)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a){const u=[];for(const p in this.binders){const _=this.binders[p];if(_ instanceof jg||_ instanceof _h||_ instanceof uc)for(const m of _.uniformNames)u.push({name:m,property:p,binding:_.getBinding(a,m)})}return u}setUniforms(a,u,p,_,m){for(const{name:b,property:M,binding:P}of p)this.binders[M].setUniform(a,P,m,_.get(M),b)}updatePaintBuffers(){this._buffers=[];for(const a in this.binders){const u=this.binders[a];(u instanceof bu||u instanceof uc||u instanceof xd)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(a){for(const u in this.binders){const p=this.binders[u];(p instanceof bu||p instanceof uc||p instanceof xd)&&p.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const u=this.binders[a];(u instanceof bu||u instanceof uc||u instanceof xd)&&u.destroy()}}}class wd{constructor(a,u,p=(()=>!0)){this.programConfigurations={};for(const _ of a)this.programConfigurations[_.id]=new yh(_,u,p);this.needsUpload=!1,this._featureMap=new Fg,this._featureMapWithoutIds=new Fg,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(a,u,p,_,m,b,M,P){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(a,u,_,m,b,M,P);u.id!==void 0?this._featureMap.add(u.id,p,this._bufferOffset,a):(this._featureMapWithoutIds.add(this._idlessCounter,p,this._bufferOffset,a),this._idlessCounter+=1),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,u,p,_,m,b,M){for(const P of p)this.needsUpload=this.programConfigurations[P.id].updatePaintArrays(a,this._featureMap,this._featureMapWithoutIds,u,P,_,m,b,M||0)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}const KO={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function JO(h,a){return KO[h]||[h.replace(`${a}-`,"").replace(/-/g,"_")]}const QO={"line-pattern":{source:vd,composite:vd},"fill-pattern":{source:vd,composite:vd},"fill-extrusion-pattern":{source:vd,composite:vd},"line-dasharray":{source:dv,composite:dv}},xv={color:{source:fp,composite:gh},number:{source:mh,composite:fp}};function uT(h,a,u){const p=QO[h];return p&&p[u]||xv[a][u]}An(jg,"ConstantBinder"),An(_h,"PatternConstantBinder"),An(bu,"SourceExpressionBinder"),An(xd,"PatternCompositeBinder"),An(uc,"CompositeExpressionBinder"),An(yh,"ProgramConfiguration",{omit:["_buffers"]}),An(wd,"ProgramConfigurationSet");const ra=gn/Math.PI/2,mp=5,dT=6,hT=16383,gp=64,wv=[gp,32,16],rl=-ra,il=ra;function _p(h,a,u,p=ra){return u=ut(u),[h*Math.sin(u)*p,-a*p,h*Math.cos(u)*p]}function vh(h,a,u){return _p(Math.cos(ut(h)),Math.sin(ut(h)),a,u)}const bh=63710088e-1,fx=2*Math.PI*bh;class Yr{constructor(a,u){if(isNaN(a)||isNaN(u))throw new Error(`Invalid LngLat object: (${a}, ${u})`);if(this.lng=+a,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Yr(tn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const u=Math.PI/180,p=this.lat*u,_=a.lat*u,m=Math.sin(p)*Math.sin(_)+Math.cos(p)*Math.cos(_)*Math.cos((a.lng-this.lng)*u);return bh*Math.acos(Math.min(m,1))}toBounds(a=0){const u=360*a/40075017,p=u/Math.cos(Math.PI/180*this.lat);return new Sd({lng:this.lng-p,lat:this.lat-u},{lng:this.lng+p,lat:this.lat+u})}toEcef(a){return vh(this.lat,this.lng,ra+a*ra/bh)}static convert(a){if(a instanceof Yr)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Yr(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Yr(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Sd{constructor(a,u){if(a)if(u)this.setSouthWest(a).setNorthEast(u);else if(a.length===4){const p=a;this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]])}else{const p=a;this.setSouthWest(p[0]).setNorthEast(p[1])}}setNorthEast(a){return this._ne=a instanceof Yr?new Yr(a.lng,a.lat):Yr.convert(a),this}setSouthWest(a){return this._sw=a instanceof Yr?new Yr(a.lng,a.lat):Yr.convert(a),this}extend(a){const u=this._sw,p=this._ne;let _,m;if(a instanceof Yr)_=a,m=a;else{if(!(a instanceof Sd))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Sd.convert(a)):this.extend(Yr.convert(a)):typeof a=="object"&&a!==null&&a.hasOwnProperty("lat")&&(a.hasOwnProperty("lon")||a.hasOwnProperty("lng"))?this.extend(Yr.convert(a)):this;if(_=a._sw,m=a._ne,!_||!m)return this}return u||p?(u.lng=Math.min(_.lng,u.lng),u.lat=Math.min(_.lat,u.lat),p.lng=Math.max(m.lng,p.lng),p.lat=Math.max(m.lat,p.lat)):(this._sw=new Yr(_.lng,_.lat),this._ne=new Yr(m.lng,m.lat)),this}getCenter(){return new Yr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Yr(this.getWest(),this.getNorth())}getSouthEast(){return new Yr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:u,lat:p}=Yr.convert(a);let _=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&_}static convert(a){if(a)return a instanceof Sd?a:new Sd(a)}}const e4=0,t4=25.5;function Sv(h){return fx*Math.cos(h*Math.PI/180)}function Lc(h){return(180+h)/360}function Oo(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function Do(h,a){return h/Sv(a)}function Oa(h){return 360*h-180}function vo(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function px(h,a){return h*Sv(vo(a))}const hs=85.051129;function fT(h){return Math.cos(ut($e(h,-hs,hs)))}function Ed(h,a){const u=$e(a,e4,t4),p=Math.pow(2,u);return fT(h)*fx/(512*p)}function n4(h){return 1/Math.cos(h*Math.PI/180)}function v(h,a=0){const u=Math.exp(Math.PI*(1-(h.y+a/gn)/(1<<h.z)*2));return 80150034*u/(u*u+1)/gn/(1<<h.z)}class l{constructor(a,u,p=0){this.x=+a,this.y=+u,this.z=+p}static fromLngLat(a,u=0){const p=Yr.convert(a);return new l(Lc(p.lng),Oo(p.lat),Do(u,p.lat))}toLngLat(){return new Yr(Oa(this.x),vo(this.y))}toAltitude(){return px(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/fx*n4(vo(this.y))}}function d(h,a,u,p,_,m,b,M,P){const R=(a+p)/2,E=(u+_)/2,O=new ge(R,E);M(O),(function(L,D,k,B,W,G){const Q=k-W,K=B-G;return Math.abs((B-D)*Q-(k-L)*K)/Math.hypot(Q,K)})(O.x,O.y,m.x,m.y,b.x,b.y)>=P?(d(h,a,u,R,E,m,O,M,P),d(h,R,E,p,_,O,b,M,P)):h.push(b)}function y(h,a,u){let p=h[0],_=p.x,m=p.y;a(p);const b=[p];for(let M=1;M<h.length;M++){const P=h[M],{x:R,y:E}=P;a(P),d(b,_,m,R,E,p,P,a,u),_=R,m=E,p=P}return b}function S(h,a,u,p){if(p(a,u)){const _=a.add(u)._mult(.5);S(h,a,_,p),S(h,_,u,p)}else h.push(u)}function T(h,a){let u=h[0];const p=[u];for(let _=1;_<h.length;_++){const m=h[_];S(p,u,m,a),u=m}return p}const I=Math.pow(2,14)-1,N=-I-1;function $(h,a){const u=Math.round(h.x*a),p=Math.round(h.y*a);return h.x=$e(u,N,I),h.y=$e(p,N,I),(u<h.x||u>h.x+1||p<h.y||p>h.y+1)&&Te("Geometry exceeds allowed extent, reduce your vector tile buffer size"),h}function U(h,a,u){const p=h.loadGeometry(),_=h.extent,m=gn/_;if(a&&u&&u.projection.isReprojectedInTileSpace){const b=1<<a.z,{scale:M,x:P,y:R,projection:E}=u,O=L=>{const D=Oa((a.x+L.x/_)/b),k=vo((a.y+L.y/_)/b),B=E.project(D,k);L.x=(B.x*M-P)*_,L.y=(B.y*M-R)*_};for(let L=0;L<p.length;L++)if(h.type!==1)p[L]=y(p[L],O,1);else{const D=[];for(const k of p[L])k.x<0||k.x>=_||k.y<0||k.y>=_||(O(k),D.push(k));p[L]=D}}for(const b of p)for(const M of b)$(M,m);return p}function H(h,a){return{type:h.type,id:h.id,properties:h.properties,geometry:a?U(h):[]}}function X(h,a,u,p,_){h.emplaceBack(2*a+(p+1)/2,2*u+(_+1)/2)}function q(h,a,u){h.emplaceBack(a.x,a.y,a.z,u[0]*16384,u[1]*16384,u[2]*16384)}class ne{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.fqid)),this.index=a.index,this.hasPattern=!1,this.projection=a.projection,this.layoutVertexArray=new yu,this.indexArray=new yo,this.segments=new Bi,this.programConfigurations=new wd(a.layers,{zoom:a.zoom,lut:a.lut}),this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}updateFootprints(a,u){}populate(a,u,p,_){const m=this.layers[0],b=[];let M=null;m.type==="circle"&&(M=m.layout.get("circle-sort-key"));for(const{feature:R,id:E,index:O,sourceLayerIndex:L}of a){const D=this.layers[0]._featureFilter.needGeometry,k=H(R,D);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),k,p))continue;const B=M?M.evaluate(k,{},p):void 0,W={id:E,properties:R.properties,type:R.type,sourceLayerIndex:L,index:O,geometry:D?k.geometry:U(R,p,_),patterns:{},sortKey:B};b.push(W)}M&&b.sort(((R,E)=>R.sortKey-E.sortKey));let P=null;_.projection.name==="globe"&&(this.globeExtVertexArray=new hv,P=_.projection);for(const R of b){const{geometry:E,index:O,sourceLayerIndex:L}=R,D=a[O].feature;this.addFeature(R,E,O,u.availableImages,p,P,u.brightness),u.featureIndex.insert(D,E,O,L,this.index)}}update(a,u,p,_,m,b,M){this.programConfigurations.updatePaintArrays(a,u,m,p,_,b,M)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,YO.members),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,qO.members))),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(a,u,p,_,m,b,M){for(const P of u)for(const R of P){const E=R.x,O=R.y;if(E<0||E>=gn||O<0||O>=gn)continue;if(b){const k=b.projectTilePoint(E,O,m),B=b.upVector(m,E,O),W=this.globeExtVertexArray;q(W,k,B),q(W,k,B),q(W,k,B),q(W,k,B)}const L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),D=L.vertexLength;X(this.layoutVertexArray,E,O,-1,-1),X(this.layoutVertexArray,E,O,1,-1),X(this.layoutVertexArray,E,O,1,1),X(this.layoutVertexArray,E,O,-1,1),this.indexArray.emplaceBack(D,D+1,D+2),this.indexArray.emplaceBack(D,D+2,D+3),L.vertexLength+=4,L.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,{},_,m,M)}}function de(h,a){for(let u=0;u<h.length;u++)if(Fe(a,h[u]))return!0;for(let u=0;u<a.length;u++)if(Fe(h,a[u]))return!0;return!!Ie(h,a)}function ae(h,a,u){return!!Fe(h,a)||!!De(a,h,u)}function he(h,a){if(h.length===1)return Ne(a,h[0]);for(let u=0;u<a.length;u++){const p=a[u];for(let _=0;_<p.length;_++)if(Fe(h,p[_]))return!0}for(let u=0;u<h.length;u++)if(Ne(a,h[u]))return!0;for(let u=0;u<a.length;u++)if(Ie(h,a[u]))return!0;return!1}function me(h,a,u){if(h.length>1){if(Ie(h,a))return!0;for(let p=0;p<a.length;p++)if(De(a[p],h,u))return!0}for(let p=0;p<h.length;p++)if(De(h[p],a,u))return!0;return!1}function Ie(h,a){if(h.length===0||a.length===0)return!1;for(let u=0;u<h.length-1;u++){const p=h[u],_=h[u+1];for(let m=0;m<a.length-1;m++)if(Le(p,_,a[m],a[m+1]))return!0}return!1}function Le(h,a,u,p){return ye(h,u,p)!==ye(a,u,p)&&ye(h,a,u)!==ye(h,a,p)}function De(h,a,u){const p=u*u;if(a.length===1)return h.distSqr(a[0])<p;for(let _=1;_<a.length;_++)if(Ye(h,a[_-1],a[_])<p)return!0;return!1}function Ye(h,a,u){const p=a.distSqr(u);if(p===0)return h.distSqr(a);const _=((h.x-a.x)*(u.x-a.x)+(h.y-a.y)*(u.y-a.y))/p;return h.distSqr(_<0?a:_>1?u:u.sub(a)._mult(_)._add(a))}function Ne(h,a){let u,p,_,m=!1;for(let b=0;b<h.length;b++){u=h[b];for(let M=0,P=u.length-1;M<u.length;P=M++)p=u[M],_=u[P],p.y>a.y!=_.y>a.y&&a.x<(_.x-p.x)*(a.y-p.y)/(_.y-p.y)+p.x&&(m=!m)}return m}function Fe(h,a){let u=!1;for(let p=0,_=h.length-1;p<h.length;_=p++){const m=h[p],b=h[_];m.y>a.y!=b.y>a.y&&a.x<(b.x-m.x)*(a.y-m.y)/(b.y-m.y)+m.x&&(u=!u)}return u}function Be(h,a,u,p,_){for(const b of h)if(a<=b.x&&u<=b.y&&p>=b.x&&_>=b.y)return!0;const m=[new ge(a,u),new ge(a,_),new ge(p,_),new ge(p,u)];if(h.length>2){for(const b of m)if(Fe(h,b))return!0}for(let b=0;b<h.length-1;b++)if(Qe(h[b],h[b+1],m))return!0;return!1}function Qe(h,a,u){const p=u[0],_=u[2];if(h.x<p.x&&a.x<p.x||h.x>_.x&&a.x>_.x||h.y<p.y&&a.y<p.y||h.y>_.y&&a.y>_.y)return!1;const m=ye(h,a,u[0]);return m!==ye(h,a,u[1])||m!==ye(h,a,u[2])||m!==ye(h,a,u[3])}function tt(h,a,u,p,_,m){let b=a.y-h.y,M=h.x-a.x;if(m=m||0){const P=b*b+M*M;if(P===0)return!0;const R=Math.sqrt(P);b/=R,M/=R}return!((u.x-h.x)*b+(u.y-h.y)*M-m<0||(p.x-h.x)*b+(p.y-h.y)*M-m<0||(_.x-h.x)*b+(_.y-h.y)*M-m<0)}function Ot(h,a,u,p,_,m,b){return!(tt(h,a,p,_,m,b)||tt(a,u,p,_,m,b)||tt(u,h,p,_,m,b)||tt(p,_,h,a,u,b)||tt(_,m,h,a,u,b)||tt(m,p,h,a,u,b))}function bt(h,a,u){const p=a.paint.get(h).value;return p.kind==="constant"?p.value:u.programConfigurations.get(a.id).getMaxValue(h)}function Ht(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Wt(h,a,u,p,_){if(!a[0]&&!a[1])return h;const m=ge.convert(a)._mult(_);u==="viewport"&&m._rotate(-p);const b=[];for(let M=0;M<h.length;M++)b.push(h[M].sub(m));return b}function sn(h,a,u,p){const _=ge.convert(h)._mult(p);return a==="viewport"&&_._rotate(-u),_}let gt,Ut;An(ne,"CircleBucket",{omit:["layers"]});var ft,jt={exports:{}},Bt=(ft||(ft=1,(function(h,a){(function(u){function p(m,b,M){var P=_(256*m,256*(b=Math.pow(2,M)-b-1),M),R=_(256*(m+1),256*(b+1),M);return P[0]+","+P[1]+","+R[0]+","+R[1]}function _(m,b,M){var P=2*Math.PI*6378137/256/Math.pow(2,M);return[m*P-2*Math.PI*6378137/2,b*P-2*Math.PI*6378137/2]}u.getURL=function(m,b,M,P,R,E){return E=E||{},m+"?"+["bbox="+p(M,P,R),"format="+(E.format||"image/png"),"service="+(E.service||"WMS"),"version="+(E.version||"1.1.1"),"request="+(E.request||"GetMap"),"srs="+(E.srs||"EPSG:3857"),"width="+(E.width||256),"height="+(E.height||256),"layers="+b].join("&")},u.getTileBBox=p,u.getMercCoords=_,Object.defineProperty(u,"__esModule",{value:!0})})(a)})(0,jt.exports)),jt.exports);class Gt{constructor(a,u,p){this.z=a,this.x=u,this.y=p,this.key=_n(0,a,a,u,p)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,u){const p=Bt.getTileBBox(this.x,this.y,this.z),_=(function(m,b,M){let P,R="";for(let E=m;E>0;E--)P=1<<E-1,R+=(b&P?1:0)+(M&P?2:0);return R})(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_).replace("{bbox-epsg-3857}",p)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Dt{constructor(a,u){this.wrap=a,this.canonical=u,this.key=_n(a,u.z,u.z,u.x,u.y)}}class qt{constructor(a,u,p,_,m){this.overscaledZ=a,this.wrap=u,this.canonical=new Gt(p,+_,+m),this.key=u===0&&a===p?this.canonical.key:_n(u,a,p,_,m)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){const u=this.canonical.z-a;return a>this.canonical.z?new qt(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qt(a,this.wrap,a,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(a,u=!0){if(this.overscaledZ===a&&u)return this.key;if(a>this.canonical.z)return _n(this.wrap*+u,a,this.canonical.z,this.canonical.x,this.canonical.y);{const p=this.canonical.z-a;return _n(this.wrap*+u,a,a,this.canonical.x>>p,this.canonical.y>>p)}}isChildOf(a){if(a.wrap!==this.wrap)return!1;const u=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.z<this.canonical.z&&a.canonical.x===this.canonical.x>>u&&a.canonical.y===this.canonical.y>>u}children(a){if(this.overscaledZ>=a)return[new qt(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,p=2*this.canonical.x,_=2*this.canonical.y;return[new qt(u,this.wrap,u,p,_),new qt(u,this.wrap,u,p+1,_),new qt(u,this.wrap,u,p,_+1),new qt(u,this.wrap,u,p+1,_+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new qt(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new qt(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Dt(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function _n(h,a,u,p,_){const m=1<<Math.min(u,22);let b=m*(_%m)+p%m;return h&&u<22&&(b+=m*m*((h<0?-2*h-1:2*h)%(1<<2*(22-u)))),16*(32*b+u)+(a-u)}const yn=[h=>{let a=h.canonical.x-1,u=h.wrap;return a<0&&(a=(1<<h.canonical.z)-1,u--),new qt(h.overscaledZ,u,h.canonical.z,a,h.canonical.y)},h=>{let a=h.canonical.x+1,u=h.wrap;return a===1<<h.canonical.z&&(a=0,u++),new qt(h.overscaledZ,u,h.canonical.z,a,h.canonical.y)},h=>new qt(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,(h.canonical.y===0?1<<h.canonical.z:h.canonical.y)-1),h=>new qt(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,h.canonical.y===(1<<h.canonical.z)-1?0:h.canonical.y+1)];An(Gt,"CanonicalTileID"),An(qt,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const wn=Gr([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Rn}=wn,rr=Gr([{name:"a_pos_3",components:3,type:"Int16"}]);var Vn=Gr([{name:"a_pos",type:"Int16",components:2}]);class er{constructor(a,u){this.pos=a,this.dir=u}intersectsPlane(a,u,p){const _=_e.vec2.dot(u,this.dir);if(Math.abs(_)<1e-6)return!1;const m=((a[0]-this.pos[0])*u[0]+(a[1]-this.pos[1])*u[1])/_;return p[0]=this.pos[0]+this.dir[0]*m,p[1]=this.pos[1]+this.dir[1]*m,!0}}class Zn{constructor(a,u){this.pos=a,this.dir=u}intersectsPlane(a,u,p){const _=_e.vec3.dot(u,this.dir);if(Math.abs(_)<1e-6)return!1;const m=((a[0]-this.pos[0])*u[0]+(a[1]-this.pos[1])*u[1]+(a[2]-this.pos[2])*u[2])/_;return p[0]=this.pos[0]+this.dir[0]*m,p[1]=this.pos[1]+this.dir[1]*m,p[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(a,u,p){if(_e.vec3.equals(this.pos,a)||u===0)return p[0]=p[1]=p[2]=0,!1;const[_,m,b]=this.dir,M=this.pos[0]-a[0],P=this.pos[1]-a[1],R=this.pos[2]-a[2],E=_*_+m*m+b*b,O=2*(M*_+P*m+R*b),L=O*O-4*E*(M*M+P*P+R*R-u*u);if(L<0){const D=Math.max(-O/2,0),k=M+_*D,B=P+m*D,W=R+b*D,G=Math.hypot(k,B,W);return p[0]=k*u/G,p[1]=B*u/G,p[2]=W*u/G,!1}{const D=(-O-Math.sqrt(L))/(2*E);if(D<0){const k=Math.hypot(M,P,R);return p[0]=M*u/k,p[1]=P*u/k,p[2]=R*u/k,!1}return p[0]=M+_*D,p[1]=P+m*D,p[2]=R+b*D,!0}}}class Mr{constructor(a,u,p,_,m){this.TL=a,this.TR=u,this.BR=p,this.BL=_,this.horizon=m}static fromInvProjectionMatrix(a,u,p){const _=[-1,1,1],m=[1,1,1],b=[1,-1,1],M=[-1,-1,1],P=_e.vec3.transformMat4(_,_,a),R=_e.vec3.transformMat4(m,m,a),E=_e.vec3.transformMat4(b,b,a),O=_e.vec3.transformMat4(M,M,a);return new Mr(P,R,E,O,u/p)}}function qr(h,a,u){let p=1/0,_=-1/0;const m=[];for(const b of h){_e.vec3.sub(m,b,a);const M=_e.vec3.dot(m,u);p=Math.min(p,M),_=Math.max(_,M)}return[p,_]}function Si(h,a){let u=!0;for(let p=0;p<h.planes.length;p++){const _=h.planes[p];let m=0;for(let b=0;b<a.length;b++)m+=_e.vec3.dot(_,a[b])+_[3]>=0;if(m===0)return 0;m!==a.length&&(u=!1)}return u?2:1}function vr(h,a){for(const u of h.projections){const p=qr(a,h.points[0],u.axis);if(u.projection[1]<p[0]||u.projection[0]>p[1])return 0}return 1}function $i(h,a){let u=0;const p=[0,0,0,0];for(let _=0;_<h.length;_++)p[0]=h[_][0],p[1]=h[_][1],p[2]=h[_][2],p[3]=1,_e.vec4.dot(p,a)>=0&&u++;return u}class ar{constructor(a,u){this.points=a||new Array(8).fill([0,0,0]),this.planes=u||new Array(6).fill([0,0,0,0]),this.bounds=kn.fromPoints(this.points),this.projections=[],this.frustumEdges=[_e.vec3.sub([],this.points[2],this.points[3]),_e.vec3.sub([],this.points[0],this.points[3]),_e.vec3.sub([],this.points[4],this.points[0]),_e.vec3.sub([],this.points[5],this.points[1]),_e.vec3.sub([],this.points[6],this.points[2]),_e.vec3.sub([],this.points[7],this.points[3])];for(const p of this.frustumEdges){const _=[0,-p[2],p[1]],m=[p[2],0,-p[0]];this.projections.push({axis:_,projection:qr(this.points,this.points[0],_)}),this.projections.push({axis:m,projection:qr(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(a,u,p,_){const m=Math.pow(2,p),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((R=>{const E=_e.vec4.transformMat4([],R,a),O=1/E[3]/u*m;return _e.vec4.mul(E,E,[O,O,_?1/E[3]:O,O])})),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((R=>{const E=_e.vec3.sub([],b[R[0]],b[R[1]]),O=_e.vec3.sub([],b[R[2]],b[R[1]]),L=_e.vec3.normalize([],_e.vec3.cross([],E,O)),D=-_e.vec3.dot(L,b[R[1]]);return L.concat(D)})),P=[];for(let R=0;R<b.length;R++)P.push([b[R][0],b[R][1],b[R][2]]);return new ar(P,M)}intersectsPrecise(a,u,p){for(let _=0;_<u.length;_++)if(!$i(a,u[_]))return 0;for(let _=0;_<this.planes.length;_++)if(!$i(a,this.planes[_]))return 0;for(const _ of p)for(const m of this.frustumEdges){const b=_e.vec3.cross([],_,m),M=_e.vec3.length(b);if(M===0)continue;_e.vec3.scale(b,b,1/M);const P=qr(this.points,this.points[0],b),R=qr(a,this.points[0],b);if(P[0]>R[1]||R[0]>P[1])return 0}return 1}containsPoint(a){for(const u of this.planes){const p=u[3];if(_e.vec3.dot([u[0],u[1],u[2]],a)+p<0)return!1}return!0}}class kn{static fromPoints(a){const u=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0];for(const _ of a)_e.vec3.min(u,u,_),_e.vec3.max(p,p,_);return new kn(u,p)}static fromTileIdAndHeight(a,u,p){const _=1<<a.canonical.z,m=a.canonical.x,b=a.canonical.y;return new kn([m/_,b/_,u],[(m+1)/_,(b+1)/_,p])}static applyTransform(a,u){const p=a.getCorners();for(let _=0;_<p.length;++_)_e.vec3.transformMat4(p[_],p[_],u);return kn.fromPoints(p)}static applyTransformFast(a,u){const p=[u[12],u[13],u[14]],_=[...p];for(let m=0;m<3;m++)for(let b=0;b<3;b++){const M=u[4*b+m],P=M*a.min[b],R=M*a.max[b];p[m]+=Math.min(P,R),_[m]+=Math.max(P,R)}return new kn(p,_)}static projectAabbCorners(a,u){const p=a.getCorners();for(let _=0;_<p.length;++_)_e.vec3.transformMat4(p[_],p[_],u);return p}constructor(a,u){this.min=a,this.max=u,this.center=_e.vec3.scale([],_e.vec3.add([],this.min,this.max),.5)}quadrant(a){const u=[a%2==0,a<2],p=_e.vec3.clone(this.min),_=_e.vec3.clone(this.max);for(let m=0;m<u.length;m++)p[m]=u[m]?this.min[m]:this.center[m],_[m]=u[m]?this.center[m]:this.max[m];return _[2]=this.max[2],new kn(p,_)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}distanceZ(a){return Math.max(Math.min(this.max[2],a[2]),this.min[2])-a[2]}getCorners(){const a=this.min,u=this.max;return[[a[0],a[1],a[2]],[u[0],a[1],a[2]],[u[0],u[1],a[2]],[a[0],u[1],a[2]],[a[0],a[1],u[2]],[u[0],a[1],u[2]],[u[0],u[1],u[2]],[a[0],u[1],u[2]]]}intersects(a){return this.intersectsAabb(a.bounds)?Si(a,this.getCorners()):0}intersectsFlat(a){return this.intersectsAabb(a.bounds)?Si(a,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(a,u){return u||this.intersects(a)?vr(a,this.getCorners()):0}intersectsPreciseFlat(a,u){return u||this.intersectsFlat(a)?vr(a,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(a){for(let u=0;u<3;++u)if(this.min[u]>a.max[u]||a.min[u]>this.max[u])return!1;return!0}intersectsAabbXY(a){return!(this.min[0]>a.max[0]||a.min[0]>this.max[0]||this.min[1]>a.max[1]||a.min[1]>this.max[1])}encapsulate(a){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],a.min[u]),this.max[u]=Math.max(this.max[u],a.max[u])}encapsulatePoint(a){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],a[u]),this.max[u]=Math.max(this.max[u],a[u])}closestPoint(a){return[Math.max(Math.min(this.max[0],a[0]),this.min[0]),Math.max(Math.min(this.max[1],a[1]),this.min[1]),Math.max(Math.min(this.max[2],a[2]),this.min[2])]}}function Ir(h){return h*ra/bh}An(kn,"Aabb");const si=[new kn([rl,rl,rl],[il,il,il]),new kn([rl,rl,rl],[0,0,il]),new kn([0,rl,rl],[il,0,il]),new kn([rl,0,rl],[0,il,il]),new kn([0,0,rl],[il,il,il])];function Br(h,a,u,p=!0){const _=_e.vec3.scale([],h._camera.position,h.worldSize),m=[a,u,1,1];_e.vec4.transformMat4(m,m,h.pixelMatrixInverse),_e.vec4.scale(m,m,1/m[3]);const b=_e.vec3.sub([],m,_),M=_e.vec3.normalize([],b),P=h.globeMatrix,R=[P[12],P[13],P[14]],E=_e.vec3.sub([],R,_),O=_e.vec3.length(E),L=_e.vec3.normalize([],E),D=h.worldSize/(2*Math.PI),k=_e.vec3.dot(L,M),B=Math.asin(D/O);if(B<Math.acos(k)){if(!p)return null;const Ze=[],Oe=[];_e.vec3.scale(Ze,M,O/k),_e.vec3.normalize(Oe,_e.vec3.sub(Oe,Ze,E)),_e.vec3.normalize(M,_e.vec3.add(M,E,_e.vec3.scale(M,Oe,Math.tan(B)*O)))}const W=[];new Zn(_,M).closestPointOnSphere(R,D,W);const G=_e.vec3.normalize([],xn(P,0)),Q=_e.vec3.normalize([],xn(P,1)),K=_e.vec3.normalize([],xn(P,2)),Z=_e.vec3.dot(G,W),re=_e.vec3.dot(Q,W),ce=_e.vec3.dot(K,W),fe=Rt(Math.asin(-re/D));let Pe=Rt(Math.atan2(Z,ce));Pe=h.center.lng+(function(Ze,Oe){const Je=(Oe-Ze+180)%360-180;return Je<-180?Je+360:Je})(h.center.lng,Pe);const Me=Lc(Pe),Ae=$e(Oo(fe),0,1);return new l(Me,Ae)}class ss{constructor(a,u,p){this.a=_e.vec3.sub([],a,p),this.b=_e.vec3.sub([],u,p),this.center=p;const _=_e.vec3.normalize([],this.a),m=_e.vec3.normalize([],this.b);this.angle=Math.acos(_e.vec3.dot(_,m))}}function ws(h,a){if(h.angle===0)return null;let u;return u=h.a[a]===0?1/h.angle*.5*Math.PI:1/h.angle*Math.atan(h.b[a]/h.a[a]/Math.sin(h.angle)-1/Math.tan(h.angle)),u<0||u>1?null:(function(p,_,m,b){const M=Math.sin(m);return p*(Math.sin((1-b)*m)/M)+_*(Math.sin(b*m)/M)})(h.a[a],h.b[a],h.angle,$e(u,0,1))+h.center[a]}function Bs(h){if(h.z<=1)return si[h.z+2*h.y+h.x];const a=Vi(Lr(h));return kn.fromPoints(a)}function Xs(h,a,u){return _e.vec3.scale(h,h,1-u),_e.vec3.scaleAndAdd(h,h,a,u)}function sl(h,a,u){for(const p of h)_e.vec3.transformMat4(p,p,a),_e.vec3.scale(p,p,u)}function Wo(h,a,u,p){const _=a/h.worldSize,m=h.globeMatrix;if(u.z<=1){const Me=Bs(u).getCorners();return sl(Me,m,_),kn.fromPoints(Me)}const b=Lr(u,p),M=Vi(b,ra+Ir(h._tileCoverLift));sl(M,m,_);const P=Number.MAX_VALUE,R=[-P,-P,-P],E=[P,P,P];if(b.contains(h.center)){for(const Ze of M)_e.vec3.min(E,E,Ze),_e.vec3.max(R,R,Ze);R[2]=0;const Me=h.point,Ae=[Me.x*_,Me.y*_,0];return _e.vec3.min(E,E,Ae),_e.vec3.max(R,R,Ae),new kn(E,R)}if(h._tileCoverLift>0){for(const Me of M)_e.vec3.min(E,E,Me),_e.vec3.max(R,R,Me);return new kn(E,R)}const O=[m[12]*_,m[13]*_,m[14]*_],L=b.getCenter(),D=$e(h.center.lat,-hs,hs),k=$e(L.lat,-hs,hs),B=Lc(h.center.lng),W=Oo(D);let G=B-Lc(L.lng);const Q=W-Oo(k);G>.5?G-=1:G<-.5&&(G+=1);let K=0;if(Math.abs(G)>Math.abs(Q))K=G>=0?1:3;else{K=Q>=0?0:2;const Me=[m[4]*_,m[5]*_,m[6]*_],Ae=-Math.sin(ut(Q>=0?b.getSouth():b.getNorth()))*ra;_e.vec3.scaleAndAdd(O,O,Me,Ae)}const Z=M[K],re=M[(K+1)%4],ce=new ss(Z,re,O),fe=[ws(ce,0)||Z[0],ws(ce,1)||Z[1],ws(ce,2)||Z[2]],Pe=fa(h.zoom);if(Pe>0){const Me=(function({x:Ze,y:Oe,z:Je},rt,et,dt,ct){const xt=1/(1<<Je);let pt=Ze*xt,St=pt+xt,Zt=Oe*xt,Yt=Zt+xt,Cn=0;const rn=(pt+St)/2-dt;return rn>.5?Cn=-1:rn<-.5&&(Cn=1),pt=((pt+Cn)*rt-(dt*=rt))*et+dt,St=((St+Cn)*rt-dt)*et+dt,Zt=(Zt*rt-(ct*=rt))*et+ct,Yt=(Yt*rt-ct)*et+ct,[[pt,Yt,0],[St,Yt,0],[St,Zt,0],[pt,Zt,0]]})(u,a,h._pixelsPerMercatorPixel,B,W);for(let Ze=0;Ze<M.length;Ze++)Xs(M[Ze],Me[Ze],Pe);const Ae=_e.vec3.add([],Me[K],Me[(K+1)%4]);_e.vec3.scale(Ae,Ae,.5),Xs(fe,Ae,Pe)}for(const Me of M)_e.vec3.min(E,E,Me),_e.vec3.max(R,R,Me);return E[2]=Math.min(Z[2],re[2]),_e.vec3.min(E,E,fe),_e.vec3.max(R,R,fe),new kn(E,R)}function Lr({x:h,y:a,z:u},p=!1){const _=1/(1<<u),m=new Yr(Oa(h*_),a===(1<<u)-1&&p?-90:vo((a+1)*_)),b=new Yr(Oa((h+1)*_),a===0&&p?90:vo(a*_));return new Sd(m,b)}function Vi(h,a=ra){const u=ut(h.getNorth()),p=ut(h.getSouth()),_=Math.cos(u),m=Math.cos(p),b=Math.sin(u),M=Math.sin(p),P=h.getWest(),R=h.getEast();return[_p(m,M,P,a),_p(m,M,R,a),_p(_,b,R,a),_p(_,b,P,a)]}function Xr(h,a,u,p){const _=1<<u.z,m=(h/gn+u.x)/_;return vh(vo((a/gn+u.y)/_),Oa(m),p)}function _i({min:h,max:a}){return hT/Math.max(a[0]-h[0],a[1]-h[1],a[2]-h[2])}const bo=new Float64Array(16);function Li(h){const a=_i(h),u=_e.mat4.fromScaling(bo,[a,a,a]);return _e.mat4.translate(u,u,_e.vec3.negate([],h.min))}function $s(h){const a=_e.mat4.fromTranslation(bo,h.min),u=1/_i(h);return _e.mat4.scale(a,a,[u,u,u])}function Nc(h){const a=gn/(2*Math.PI);return h/(2*Math.PI)/a}function Da(h,a){return gn/(512*Math.pow(2,h))*_i(Bs(a))}function zl(h,a,u,p,_){const m=Nc(u),b=[h,a,-u/(2*Math.PI)],M=_e.mat4.identity(new Float64Array(16));return _e.mat4.translate(M,M,b),_e.mat4.scale(M,M,[m,m,m]),_e.mat4.rotateX(M,M,ut(-_)),_e.mat4.rotateY(M,M,ut(-p)),M}function fa(h){return Mt(mp,dT,h)}function Bl(h,a){const u=vh(a.lat,a.lng),p=(function(m){const b=vh(m._center.lat,m._center.lng),M=_e.vec3.fromValues(0,1,0);let P=_e.vec3.cross([],M,b);const R=_e.mat4.fromRotation([],-m.angle,b);P=_e.vec3.transformMat4(P,P,R),_e.mat4.fromRotation(R,-m._pitch,P);const E=_e.vec3.normalize([],b);return _e.vec3.scale(E,E,Ir(m.cameraToCenterDistance/m.pixelsPerMeter)),_e.vec3.transformMat4(E,E,R),_e.vec3.add([],b,E)})(h),_=_e.vec3.subtract([],p,u);return _e.vec3.angle(_,u)}function Ra(h,a){return Bl(h,a)>Math.PI/2*1.01}const xu=ut(85),Fc=Math.cos(xu),wu=Math.sin(xu),mx=_e.mat4.create(),yp=h=>{const a=[];return h.paint.get("circle-pitch-alignment")==="map"&&a.push("PITCH_WITH_MAP"),h.paint.get("circle-pitch-scale")==="map"&&a.push("SCALE_WITH_MAP"),a};function Ev(h,a,u,p,_,m,b,M,P){if(m&&h.queryGeometry.isAboveHorizon)return!1;m&&(P*=h.pixelToTileUnitsFactor);const R=h.tileID.canonical,E=u.projection.upVectorScale(R,u.center.lat,u.worldSize).metersToTile;for(const O of a)for(const L of O){const D=L.add(M),k=_&&u.elevation?u.elevation.exaggeration()*_.getElevationAt(D.x,D.y,!0):0,B=u.projection.projectTilePoint(D.x,D.y,R);if(k>0){const K=u.projection.upVector(R,D.x,D.y);B.x+=K[0]*E*k,B.y+=K[1]*E*k,B.z+=K[2]*E*k}const W=m?D:gx(B.x,B.y,B.z,p),G=m?h.tilespaceRays.map((K=>Hce(K,k))):h.queryGeometry.screenGeometry,Q=_e.vec4.transformMat4([],[B.x,B.y,B.z,1],p);if(!b&&m?P*=Q[3]/u.cameraToCenterDistance:b&&!m&&(P*=u.cameraToCenterDistance/Q[3]),m){const K=vo((L.y/gn+R.y)/(1<<R.z));P/=u.projection.pixelsPerMeter(K,1)/Do(1,K)}if(ae(G,W,P))return!0}return!1}function gx(h,a,u,p){const _=_e.vec4.transformMat4([],[h,a,u,1],p);return new ge(_[0]/_[3],_[1]/_[3])}const kB=_e.vec3.fromValues(0,0,0),Uce=_e.vec3.fromValues(0,0,1);function Hce(h,a){const u=_e.vec3.create();return kB[2]=a,h.intersectsPlane(kB,Uce,u),new ge(u[0],u[1])}class LB extends ne{}let NB,FB,zB,BB;function $B(h,{width:a,height:u},p,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==a*u*p)throw new RangeError("mismatched image size")}else _=new Uint8Array(a*u*p);return h.width=a,h.height=u,h.data=_,h}function VB(h,a,u){const{width:p,height:_}=a;p===h.width&&_===h.height||(r4(h,a,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,p),height:Math.min(h.height,_)},u,null),h.width=p,h.height=_,h.data=a.data)}function r4(h,a,u,p,_,m,b,M){if(_.width===0||_.height===0)return a;if(_.width>h.width||_.height>h.height||u.x>h.width-_.width||u.y>h.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>a.width||_.height>a.height||p.x>a.width-_.width||p.y>a.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const P=h.data,R=a.data,E=m===4&&M;for(let O=0;O<_.height;O++){const L=((u.y+O)*h.width+u.x)*m,D=((p.y+O)*a.width+p.x)*m;if(E)for(let k=0;k<_.width;k++){const B=L+k*m+3,W=D+k*m;R[W+0]=255,R[W+1]=255,R[W+2]=255,R[W+3]=P[B]}else if(b)for(let k=0;k<_.width;k++){const B=L+k*m,W=D+k*m,G=P[B+3],Q=new ii(P[B+0]/255*G,P[B+1]/255*G,P[B+2]/255*G,G).toRenderColor(b).toArray();R[W+0]=Q[0],R[W+1]=Q[1],R[W+2]=Q[2],R[W+3]=Q[3]}else for(let k=0;k<_.width*m;k++)R[D+k]=P[L+k]}return a}An(LB,"HeatmapBucket",{omit:["layers"]});class vp{constructor(a,u){$B(this,a,1,u)}resize(a){VB(this,new vp(a),1)}clone(){return new vp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,p,_,m){r4(a,u,p,_,m,1,null)}}class Ro{constructor(a,u){$B(this,a,4,u)}resize(a){VB(this,new Ro(a),4)}replace(a,u){u?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new Ro({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,p,_,m,b,M){r4(a,u,p,_,m,4,b,M)}}class jB{constructor(a,u){this.width=a.width,this.height=a.height,this.data=u instanceof Uint8Array?new Float32Array(u.buffer):u}}function _x(h){const a={},u=h.resolution||256,p=h.clips?h.clips.length:1,_=h.image||new Ro({width:u,height:p}),m=(b,M,P)=>{a[h.evaluationKey]=P;const R=h.expression.evaluate(a);R&&(_.data[b+M+0]=Math.floor(255*R.r/R.a),_.data[b+M+1]=Math.floor(255*R.g/R.a),_.data[b+M+2]=Math.floor(255*R.b/R.a),_.data[b+M+3]=Math.floor(255*R.a))};if(h.clips)for(let b=0,M=0;b<p;++b,M+=4*u)for(let P=0,R=0;P<u;P++,R+=4){const E=P/(u-1),{start:O,end:L}=h.clips[b];m(M,R,O*(1-E)+L*E)}else for(let b=0,M=0;b<u;b++,M+=4)m(0,M,b/(u-1));return _}An(vp,"AlphaImage"),An(Ro,"RGBAImage");const Wce=Gr([{name:"a_pos",components:2,type:"Int16"}],4),Gce=Gr([{name:"a_road_z_offset",components:1,type:"Float32"}],4),Yce=Gr([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),qce=Gr([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function yx(h,a,u=2){const p=a&&a.length,_=p?a[0]*u:h.length;let m=UB(h,0,_,u,!0);const b=[];if(!m||m.next===m.prev)return b;let M,P,R;if(p&&(m=(function(E,O,L,D){const k=[];for(let B=0,W=O.length;B<W;B++){const G=UB(E,O[B]*D,B<W-1?O[B+1]*D:E.length,D,!1);G===G.next&&(G.steiner=!0),k.push(nue(G))}k.sort(Qce);for(let B=0;B<k.length;B++)L=eue(k[B],L);return L})(h,a,m,u)),h.length>80*u){M=1/0,P=1/0;let E=-1/0,O=-1/0;for(let L=u;L<_;L+=u){const D=h[L],k=h[L+1];D<M&&(M=D),k<P&&(P=k),D>E&&(E=D),k>O&&(O=k)}R=Math.max(E-M,O-P),R=R!==0?32767/R:0}return vx(m,b,u,M,P,R,0),b}function UB(h,a,u,p,_){let m;if(_===(function(b,M,P,R){let E=0;for(let O=M,L=P-R;O<P;O+=R)E+=(b[L]-b[O])*(b[O+1]+b[L+1]),L=O;return E})(h,a,u,p)>0)for(let b=a;b<u;b+=p)m=GB(b/p|0,h[b],h[b+1],m);else for(let b=u-p;b>=a;b-=p)m=GB(b/p|0,h[b],h[b+1],m);return m&&pT(m,m.next)&&(xx(m),m=m.next),m}function Ug(h,a){if(!h)return h;a||(a=h);let u,p=h;do if(u=!1,p.steiner||!pT(p,p.next)&&Zs(p.prev,p,p.next)!==0)p=p.next;else{if(xx(p),p=a=p.prev,p===p.next)break;u=!0}while(u||p!==a);return a}function vx(h,a,u,p,_,m,b){if(!h)return;!b&&m&&(function(P,R,E,O){let L=P;do L.z===0&&(L.z=i4(L.x,L.y,R,E,O)),L.prevZ=L.prev,L.nextZ=L.next,L=L.next;while(L!==P);L.prevZ.nextZ=null,L.prevZ=null,(function(D){let k,B=1;do{let W,G=D;D=null;let Q=null;for(k=0;G;){k++;let K=G,Z=0;for(let ce=0;ce<B&&(Z++,K=K.nextZ,K);ce++);let re=B;for(;Z>0||re>0&&K;)Z!==0&&(re===0||!K||G.z<=K.z)?(W=G,G=G.nextZ,Z--):(W=K,K=K.nextZ,re--),Q?Q.nextZ=W:D=W,W.prevZ=Q,Q=W;G=K}Q.nextZ=null,B*=2}while(k>1)})(L)})(h,p,_,m);let M=h;for(;h.prev!==h.next;){const P=h.prev,R=h.next;if(m?Zce(h,p,_,m):Xce(h))a.push(P.i,h.i,R.i),xx(h),h=R.next,M=R.next;else if((h=R)===M){b?b===1?vx(h=Kce(Ug(h),a),a,u,p,_,m,2):b===2&&Jce(h,a,u,p,_,m):vx(Ug(h),a,u,p,_,m,1);break}}}function Xce(h){const a=h.prev,u=h,p=h.next;if(Zs(a,u,p)>=0)return!1;const _=a.x,m=u.x,b=p.x,M=a.y,P=u.y,R=p.y,E=_<m?_<b?_:b:m<b?m:b,O=M<P?M<R?M:R:P<R?P:R,L=_>m?_>b?_:b:m>b?m:b,D=M>P?M>R?M:R:P>R?P:R;let k=p.next;for(;k!==a;){if(k.x>=E&&k.x<=L&&k.y>=O&&k.y<=D&&Tv(_,M,m,P,b,R,k.x,k.y)&&Zs(k.prev,k,k.next)>=0)return!1;k=k.next}return!0}function Zce(h,a,u,p){const _=h.prev,m=h,b=h.next;if(Zs(_,m,b)>=0)return!1;const M=_.x,P=m.x,R=b.x,E=_.y,O=m.y,L=b.y,D=M<P?M<R?M:R:P<R?P:R,k=E<O?E<L?E:L:O<L?O:L,B=M>P?M>R?M:R:P>R?P:R,W=E>O?E>L?E:L:O>L?O:L,G=i4(D,k,a,u,p),Q=i4(B,W,a,u,p);let K=h.prevZ,Z=h.nextZ;for(;K&&K.z>=G&&Z&&Z.z<=Q;){if(K.x>=D&&K.x<=B&&K.y>=k&&K.y<=W&&K!==_&&K!==b&&Tv(M,E,P,O,R,L,K.x,K.y)&&Zs(K.prev,K,K.next)>=0||(K=K.prevZ,Z.x>=D&&Z.x<=B&&Z.y>=k&&Z.y<=W&&Z!==_&&Z!==b&&Tv(M,E,P,O,R,L,Z.x,Z.y)&&Zs(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;K&&K.z>=G;){if(K.x>=D&&K.x<=B&&K.y>=k&&K.y<=W&&K!==_&&K!==b&&Tv(M,E,P,O,R,L,K.x,K.y)&&Zs(K.prev,K,K.next)>=0)return!1;K=K.prevZ}for(;Z&&Z.z<=Q;){if(Z.x>=D&&Z.x<=B&&Z.y>=k&&Z.y<=W&&Z!==_&&Z!==b&&Tv(M,E,P,O,R,L,Z.x,Z.y)&&Zs(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function Kce(h,a){let u=h;do{const p=u.prev,_=u.next.next;!pT(p,_)&&HB(p,u,u.next,_)&&bx(p,_)&&bx(_,p)&&(a.push(p.i,u.i,_.i),xx(u),xx(u.next),u=h=_),u=u.next}while(u!==h);return Ug(u)}function Jce(h,a,u,p,_,m){let b=h;do{let M=b.next.next;for(;M!==b.prev;){if(b.i!==M.i&&rue(b,M)){let P=WB(b,M);return b=Ug(b,b.next),P=Ug(P,P.next),vx(b,a,u,p,_,m,0),void vx(P,a,u,p,_,m,0)}M=M.next}b=b.next}while(b!==h)}function Qce(h,a){return h.x-a.x}function eue(h,a){const u=(function(_,m){let b=m;const M=_.x,P=_.y;let R,E=-1/0;do{if(P<=b.y&&P>=b.next.y&&b.next.y!==b.y){const B=b.x+(P-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(B<=M&&B>E&&(E=B,R=b.x<b.next.x?b:b.next,B===M))return R}b=b.next}while(b!==m);if(!R)return null;const O=R,L=R.x,D=R.y;let k=1/0;b=R;do{if(M>=b.x&&b.x>=L&&M!==b.x&&Tv(P<D?M:E,P,L,D,P<D?E:M,P,b.x,b.y)){const B=Math.abs(P-b.y)/(M-b.x);bx(b,_)&&(B<k||B===k&&(b.x>R.x||b.x===R.x&&tue(R,b)))&&(R=b,k=B)}b=b.next}while(b!==O);return R})(h,a);if(!u)return a;const p=WB(u,h);return Ug(p,p.next),Ug(u,u.next)}function tue(h,a){return Zs(h.prev,h,a.prev)<0&&Zs(a.next,h,h.next)<0}function i4(h,a,u,p,_){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-u)*_|0)|h<<8))|h<<4))|h<<2))|h<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-p)*_|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function nue(h){let a=h,u=h;do(a.x<u.x||a.x===u.x&&a.y<u.y)&&(u=a),a=a.next;while(a!==h);return u}function Tv(h,a,u,p,_,m,b,M){return(_-b)*(a-M)>=(h-b)*(m-M)&&(h-b)*(p-M)>=(u-b)*(a-M)&&(u-b)*(m-M)>=(_-b)*(p-M)}function rue(h,a){return h.next.i!==a.i&&h.prev.i!==a.i&&!(function(u,p){let _=u;do{if(_.i!==u.i&&_.next.i!==u.i&&_.i!==p.i&&_.next.i!==p.i&&HB(_,_.next,u,p))return!0;_=_.next}while(_!==u);return!1})(h,a)&&(bx(h,a)&&bx(a,h)&&(function(u,p){let _=u,m=!1;const b=(u.x+p.x)/2,M=(u.y+p.y)/2;do _.y>M!=_.next.y>M&&_.next.y!==_.y&&b<(_.next.x-_.x)*(M-_.y)/(_.next.y-_.y)+_.x&&(m=!m),_=_.next;while(_!==u);return m})(h,a)&&(Zs(h.prev,h,a.prev)||Zs(h,a.prev,a))||pT(h,a)&&Zs(h.prev,h,h.next)>0&&Zs(a.prev,a,a.next)>0)}function Zs(h,a,u){return(a.y-h.y)*(u.x-a.x)-(a.x-h.x)*(u.y-a.y)}function pT(h,a){return h.x===a.x&&h.y===a.y}function HB(h,a,u,p){const _=gT(Zs(h,a,u)),m=gT(Zs(h,a,p)),b=gT(Zs(u,p,h)),M=gT(Zs(u,p,a));return _!==m&&b!==M||!(_!==0||!mT(h,u,a))||!(m!==0||!mT(h,p,a))||!(b!==0||!mT(u,h,p))||!(M!==0||!mT(u,a,p))}function mT(h,a,u){return a.x<=Math.max(h.x,u.x)&&a.x>=Math.min(h.x,u.x)&&a.y<=Math.max(h.y,u.y)&&a.y>=Math.min(h.y,u.y)}function gT(h){return h>0?1:h<0?-1:0}function bx(h,a){return Zs(h.prev,h,h.next)<0?Zs(h,a,h.next)>=0&&Zs(h,h.prev,a)>=0:Zs(h,a,h.prev)<0||Zs(h,h.next,a)<0}function WB(h,a){const u=s4(h.i,h.x,h.y),p=s4(a.i,a.x,a.y),_=h.next,m=a.prev;return h.next=a,a.prev=h,u.next=_,_.prev=u,p.next=u,u.prev=p,m.next=p,p.prev=m,p}function GB(h,a,u,p){const _=s4(h,a,u);return p?(_.next=p.next,_.prev=p,p.next.prev=_,p.next=_):(_.prev=_,_.next=_),_}function xx(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function s4(h,a,u){return{i:h,x:a,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function _T(h,a){const u=h.length;if(u<=1)return[h];const p=[];let _,m;for(let b=0;b<u;b++){const M=We(h[b]);M!==0&&(h[b].area=Math.abs(M),m===void 0&&(m=M<0),m===M<0?(_&&p.push(_),_=[h[b]]):_.push(h[b]))}if(_&&p.push(_),a>1)for(let b=0;b<p.length;b++)p[b].length<=a||(wE(p[b],a,1,p[b].length-1,iue),p[b]=p[b].slice(0,a));return p}function iue(h,a){return a.area-h.area}function YB(h,a,u=1){if(!h)return null;const p=typeof h=="string"?Ho.from(h).getPrimary():h.getPrimary(),_=p.id.toString();return a.has(_)||a.set(_,[]),p.scaleSelf(u),a.get(_).push(p),p.toString()}function o4(h,a,u,p){const _=p.patternDependencies;let m=!1;for(const b of a){const M=b.paint.get(`${h}-pattern`);M.isConstant()||(m=!0),YB(M.constantOr(null),_,u)&&(m=!0)}return m}function a4(h,a,u,p,_,m){const b=m.patternDependencies;for(const M of a){const P=M.paint.get(`${h}-pattern`).value;if(P.kind!=="constant"){let R=P.evaluate({zoom:p},u,{},m.availableImages);R=R&&R.name?R.name:R;const E=YB(R,b,_);E&&(u.patterns[M.id]=E)}}return u}var l4,qB,c4,XB,u4,ZB,KB,yT={};function JB(){if(qB)return l4;qB=1;var h=je();function a(_,m,b,M,P){this.properties={},this.extent=b,this.type=0,this._pbf=_,this._geometry=-1,this._keys=M,this._values=P,_.readFields(u,this,m)}function u(_,m,b){_==1?m.id=b.readVarint():_==2?(function(M,P){for(var R=M.readVarint()+M.pos;M.pos<R;){var E=P._keys[M.readVarint()],O=P._values[M.readVarint()];P.properties[E]=O}})(b,m):_==3?m.type=b.readVarint():_==4&&(m._geometry=b.pos)}function p(_){for(var m,b,M=0,P=0,R=_.length,E=R-1;P<R;E=P++)M+=((b=_[E]).x-(m=_[P]).x)*(m.y+b.y);return M}return l4=a,a.types=["Unknown","Point","LineString","Polygon"],a.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var m,b=_.readVarint()+_.pos,M=1,P=0,R=0,E=0,O=[];_.pos<b;){if(P<=0){var L=_.readVarint();M=7&L,P=L>>3}if(P--,M===1||M===2)R+=_.readSVarint(),E+=_.readSVarint(),M===1&&(m&&O.push(m),m=[]),m.push(new h(R,E));else{if(M!==7)throw new Error("unknown command "+M);m&&m.push(m[0].clone())}}return m&&O.push(m),O},a.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var m=_.readVarint()+_.pos,b=1,M=0,P=0,R=0,E=1/0,O=-1/0,L=1/0,D=-1/0;_.pos<m;){if(M<=0){var k=_.readVarint();b=7&k,M=k>>3}if(M--,b===1||b===2)(P+=_.readSVarint())<E&&(E=P),P>O&&(O=P),(R+=_.readSVarint())<L&&(L=R),R>D&&(D=R);else if(b!==7)throw new Error("unknown command "+b)}return[E,L,O,D]},a.prototype.toGeoJSON=function(_,m,b){var M,P,R=this.extent*Math.pow(2,b),E=this.extent*_,O=this.extent*m,L=this.loadGeometry(),D=a.types[this.type];function k(G){for(var Q=0;Q<G.length;Q++){var K=G[Q];G[Q]=[360*(K.x+E)/R-180,360/Math.PI*Math.atan(Math.exp((180-360*(K.y+O)/R)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(M=0;M<L.length;M++)B[M]=L[M][0];k(L=B);break;case 2:for(M=0;M<L.length;M++)k(L[M]);break;case 3:for(L=(function(G){var Q=G.length;if(Q<=1)return[G];for(var K,Z,re=[],ce=0;ce<Q;ce++){var fe=p(G[ce]);fe!==0&&(Z===void 0&&(Z=fe<0),Z===fe<0?(K&&re.push(K),K=[G[ce]]):K.push(G[ce]))}return K&&re.push(K),re})(L),M=0;M<L.length;M++)for(P=0;P<L[M].length;P++)k(L[M][P])}L.length===1?L=L[0]:D="Multi"+D;var W={type:"Feature",geometry:{type:D,coordinates:L},properties:this.properties};return"id"in this&&(W.id=this.id),W},l4}function QB(){if(XB)return c4;XB=1;var h=JB();function a(p,_){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=p,this._keys=[],this._values=[],this._features=[],p.readFields(u,this,_),this.length=this._features.length}function u(p,_,m){p===15?_.version=m.readVarint():p===1?_.name=m.readString():p===5?_.extent=m.readVarint():p===2?_._features.push(m.pos):p===3?_._keys.push(m.readString()):p===4&&_._values.push((function(b){for(var M=null,P=b.readVarint()+b.pos;b.pos<P;){var R=b.readVarint()>>3;M=R===1?b.readString():R===2?b.readFloat():R===3?b.readDouble():R===4?b.readVarint64():R===5?b.readVarint():R===6?b.readSVarint():R===7?b.readBoolean():null}return M})(m))}return c4=a,a.prototype.feature=function(p){if(p<0||p>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[p];var _=this._pbf.readVarint()+this._pbf.pos;return new h(this._pbf,_,this.extent,this._keys,this._values)},c4}function e8(){return KB||(KB=1,yT.VectorTile=(function(){if(ZB)return u4;ZB=1;var h=QB();function a(u,p,_){if(u===3){var m=new h(_,_.readVarint()+_.pos);m.length&&(p[m.name]=m)}}return u4=function(u,p){this.layers=u.readFields(a,{},p)},u4})(),yT.VectorTileFeature=JB(),yT.VectorTileLayer=QB()),yT}var bp=e8();const Hg="3d_elevation_id",t8="level";class sue{constructor(){this._valid=!1}reset(a){return this.feature=a,this._valid=!0,this._geometry=a.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(a,u){return this._valid&&a(u(this._geometry)),this}require(a,u,p){return this.get(a,!0,u,p)}optional(a,u,p){return this.get(a,!1,u,p)}success(){return this._valid}get(a,u,p,_){const m=this.feature.properties.hasOwnProperty(a)?+this.feature.properties[a]:void 0;return this._valid&&m!==void 0?p(_?_(m):m):u&&(this._valid=!1),this}}class n8{constructor(a,u){this.featureFunc=a,this.vertexFunc=u}parseFeature(a,u,p){return this.featureFunc(a,u,p)}parseVertex(a,u,p){return this.vertexFunc(a,u,p)}}const oue=new n8(((h,a,u)=>h.reset(a).require(Hg,(p=>{u.id=p})).optional("fixed_height_relative",(p=>{u.constantHeight=p}),xh.decodeRelativeHeight).geometry((p=>{u.bounds=p}),xh.computeBounds).success()),((h,a,u)=>h.reset(a).require(Hg,(p=>{u.id=p})).require("elevation_idx",(p=>{u.idx=p})).require("extent",(p=>{u.extent=p})).require("height_relative",(p=>{u.height=p}),xh.decodeRelativeHeight).geometry((p=>{u.position=p}),xh.getPoint).success())),aue=new n8(((h,a,u)=>h.reset(a).require(Hg,(p=>{u.id=p})).optional("fixed_height",(p=>{u.constantHeight=p}),xh.decodeMetricHeight).geometry((p=>{u.bounds=p}),xh.computeBounds).success()),((h,a,u)=>h.reset(a).require(Hg,(p=>{u.id=p})).require("elevation_idx",(p=>{u.idx=p})).require("extent",(p=>{u.extent=p})).require("height",(p=>{u.height=p}),xh.decodeMetricHeight).geometry((p=>{u.position=p}),xh.getPoint).success()));class xh{static computeBounds(a){const u=new ge(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),p=new ge(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const _ of a[0])u.x>_.x&&(u.x=_.x),u.y>_.y&&(u.y=_.y),p.x<_.x&&(p.x=_.x),p.y<_.y&&(p.y=_.y);return{min:u,max:p}}static getPoint(a){return _e.vec2.fromValues(a[0][0].x,a[0][0].y)}static decodeRelativeHeight(a){return 1e-4*a*5}static decodeMetricHeight(a){return 1e-4*a}static parse(a){const u=[],p=[],_=a.length,m=new sue;for(let M=0;M<_;M++){const P=a.feature(M),R=P.properties.hasOwnProperty("version")?String(P.properties.version):void 0,E=(b=R)?b==="1.0.1"?aue:void 0:oue;if(E===void 0){Te(`Unknown elevation feature version number ${R||"(unknown)"}`);continue}const O=P.properties.hasOwnProperty("type")?P.properties.type:void 0;if(O){if(bp.VectorTileFeature.types[P.type]==="Point"&&O==="curve_point"){const L={};E.parseVertex(m,P,L)&&u.push(L)}else if(bp.VectorTileFeature.types[P.type]==="Polygon"&&O==="curve_meta"){const L={};E.parseFeature(m,P,L)&&p.push(L)}}}var b;return{vertices:u,features:p}}}class d4{constructor(a,u,p,_,m,b){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=a,this.heightRange={min:p,max:p},this.safeArea=u,this.constantHeight=p,this.constantHeight==null&&(this.constantHeight!=null||_.length!==0)){this.vertices=_,this.edges=m,this.edges=this.edges.filter((M=>M.a<this.vertices.length&&M.b<this.vertices.length&&!_e.vec2.exactEquals(this.vertices[M.a].position,this.vertices[M.b].position))),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const M of this.vertices)this.vertexProps.push({dir:_e.vec2.fromValues(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,M.height),this.heightRange.max=Math.max(this.heightRange.max,M.height);for(const M of this.edges){const P=this.vertices[M.a].position,R=this.vertices[M.b].position,E=_e.vec2.subtract(_e.vec2.create(),R,P),O=_e.vec2.length(E),L=_e.vec2.scale(_e.vec2.create(),E,1/O);this.edgeProps.push({vec:E,dir:L,len:O});const D=this.vertexProps[M.a].dir,k=this.vertexProps[M.b].dir;_e.vec2.add(D,D,L),_e.vec2.add(k,k,L)}for(const M of this.vertexProps)M.dir[0]===0&&M.dir[1]===0||_e.vec2.normalize(M.dir,M.dir);this.tessellate(b)}}pointElevation(a){if(this.constantHeight!=null)return this.constantHeight;const u=this.getClosestEdge(a);if(u==null)return 0;const[p,_]=u;return((m,b,M)=>(1-M)*m+M*b)(this.vertices[this.edges[p].a].height,this.vertices[this.edges[p].b].height,_)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(a){if(this.edges.length===0)return;let u=0,p=Number.POSITIVE_INFINITY,_=0;const m=_e.vec2.fromValues(a.x,a.y);for(let b=0;b<this.edges.length;b++){const M=this.edges[b],P=this.edgeProps[b].dir,R=new er(m,this.edgeProps[b].dir),E=this.vertices[M.a].position,O=this.vertices[M.b].position,L=_e.vec2.create(),D=_e.vec2.create(),k=R.intersectsPlane(E,this.vertexProps[M.a].dir,L),B=R.intersectsPlane(O,this.vertexProps[M.b].dir,D);if(!k||!B)continue;const W=_e.vec2.subtract(_e.vec2.create(),D,L),G=_e.vec2.subtract(_e.vec2.create(),m,L),Q=_e.vec2.dot(W,W),K=Q>0?_e.vec2.dot(G,W)/Q:0,Z=$e(K,0,1),re=Math.abs((K-Z)*this.edgeProps[b].len),ce=_e.vec2.subtract(_e.vec2.create(),m,E),fe=re+Math.abs(_e.vec2.dot(ce,_e.vec2.fromValues(P[1],-P[0])));fe<p&&(u=b,p=fe,_=Z)}return[u,_]}tessellate(a){for(let u=this.edges.length-1;u>=0;--u){const p=this.edges[u].a,_=this.edges[u].b,{position:m,height:b,extent:M}=this.vertices[p],{position:P,height:R,extent:E}=this.vertices[_],O=this.vertexProps[p].dir,L=this.vertexProps[_].dir,D=_e.vec3.fromValues(m[0]/a,m[1]/a,b),k=_e.vec3.fromValues(P[0]/a,P[1]/a,R),B=_e.vec3.fromValues(O[1],-O[0],0);_e.vec3.scale(B,B,M);const W=_e.vec3.fromValues(L[1],-L[0],0);if(_e.vec3.scale(W,W,E),this.distSqLines(_e.vec3.fromValues(D[0]+.5*B[0],D[1]+.5*B[1],D[2]+.5*B[2]),_e.vec3.fromValues(k[0]-.5*W[0],k[1]-.5*W[1],k[2]-.5*W[2]),_e.vec3.fromValues(D[0]-.5*B[0],D[1]-.5*B[1],D[2]-.5*B[2]),_e.vec3.fromValues(k[0]+.5*W[0],k[1]+.5*W[1],k[2]+.5*W[2]))<=.05*.05)continue;const G=this.vertices.length,Q=_e.vec2.add(_e.vec2.create(),m,P);this.vertices.push({position:_e.vec2.scale(Q,Q,.5),height:.5*(b+R),extent:.5*(M+E)});const K=_e.vec2.add(_e.vec2.create(),O,L);this.vertexProps.push({dir:_e.vec2.normalize(K,K)}),this.edges.splice(u,1),this.edgeProps.splice(u,1),this.edges.push({a:p,b:G}),this.edges.push({a:G,b:_});const Z=_e.vec2.subtract(_e.vec2.create(),this.vertices[G].position,m),re=_e.vec2.length(Z),ce={vec:Z,dir:_e.vec2.scale(_e.vec2.create(),Z,1/re),len:re};this.edgeProps.push(ce),this.edgeProps.push(ce)}}distSqLines(a,u,p,_){const m=_e.vec3.subtract(_e.vec3.create(),u,a),b=_e.vec3.subtract(_e.vec3.create(),_,p),M=_e.vec3.subtract(_e.vec3.create(),a,p),P=_e.vec3.dot(m,m),R=_e.vec3.dot(m,b),E=_e.vec3.dot(m,M),O=_e.vec3.dot(b,b),L=_e.vec3.dot(b,M),D=P*O-R*R;if(D===0){const Q=_e.vec3.dot(M,b)/_e.vec3.dot(b,b),K=_e.vec3.lerp(_e.vec3.create(),p,_,Q);return _e.vec3.squaredDistance(K,a)}const k=(R*L-E*O)/D,B=(P*L-R*E)/D,W=_e.vec3.lerp(_e.vec3.create(),a,u,k),G=_e.vec3.lerp(_e.vec3.create(),p,_,B);return _e.vec3.squaredDistance(W,G)}}class lue{constructor(a,u){this.zScale=1,this.xOffset=0,this.yOffset=0,a.equals(u)||(this.zScale=Math.pow(2,u.z-a.z),this.xOffset=(a.x*this.zScale-u.x)*gn,this.yOffset=(a.y*this.zScale-u.y)*gn)}constantElevation(a,u){if(a.constantHeight!=null)return this.computeBiasedHeight(a.constantHeight,u)}pointElevation(a,u,p){const _=this.constantElevation(u,p);return _??(a.x=a.x*this.zScale+this.xOffset,a.y=a.y*this.zScale+this.yOffset,this.computeBiasedHeight(u.pointElevation(a),p))}computeBiasedHeight(a,u){return u<=0?a:a+u*Mt(0,u,a>=0?a:Math.abs(.5*a))}}An(d4,"ElevationFeature");class r8{constructor(){this.polygons=new Map}add(a,...u){this.polygons.has(a)?this.polygons.get(a).push(...u):this.polygons.set(a,u)}merge(a){for(const[u,p]of a.polygons)this.add(u,...p)}}class Wg{constructor(){this.portals=[]}static evaluate(a){if(a.length===0)return new Wg;let u=[];for(const R of a)u.push(...R.portals);if(u.length===0)return new Wg;const p=(R,E)=>R<=0&&E<=0||R>=gn&&E>=gn;for(const R of u){const E=R.va,O=R.vb;(p(E.x,O.x)||p(E.y,O.y))&&(R.type="border")}const _=u.filter((R=>R.type!=="unevaluated")),m=u.filter((R=>R.type==="unevaluated"));if(m.length===0)return new Wg;m.sort(((R,E)=>R.hash===E.hash?R.isTunnel===E.isTunnel?0:R.isTunnel?-1:1:R.hash<E.hash?1:-1)),u=_.concat(m);let b=_.length,M=b,P=b;do if(M++,M===u.length||u[b].hash!==u[M].hash){if(M-b==2){P<b&&(u[P]=u[b],u[b]=null);const R=u[P],E=u[M-1];R.type=R.isTunnel!==E.isTunnel?"tunnel":"polygon",R.connection={a:R.connection.a,b:E.connection.a},P++}b=M}while(b!==u.length);return u.splice(P),u.sort(((R,E)=>R.hash<E.hash?1:-1)),{portals:u}}}An(Wg,"ElevationPortalGraph"),An(r8,"ElevationPolygons");class cue{constructor(a,u,p){this.outPositions=a,this.outNormals=u,this.outIndices=p,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(a,u,p){let _=a[2];p!=null&&(_*=p);const m=this.getVec3Bits(a)<<96n|this.getVec3Bits(u),b=this.vertexLookup.get(m);if(b!=null)return b;const M=this.outPositions.length;this.vertexLookup.set(m,M);const P=Math.trunc(16384*u[0]),R=Math.trunc(16384*u[1]),E=Math.trunc(16384*u[2]);return this.outPositions.emplaceBack(a[0],a[1],_),this.outNormals.emplaceBack(P,R,E),M}addVertices(a,u,...p){const _=[];for(const m of p){const b=this.addVertex(m,a,u);_.push(b)}return _}addTriangles(a,u,p){if(u&&p){const _=p.length===1,m=_e.vec3.fromValues(0,0,0);for(let b=0;b<a.length;b+=3){const M=u[a[b+0]],P=u[a[b+1]],R=u[a[b+2]],E=_?p[0]:p[a[b+1]],O=_?p[0]:p[a[b+2]],L=this.addVertex(_e.vec3.fromValues(M.x,M.y,_?p[0]:p[a[b+0]]),m),D=this.addVertex(_e.vec3.fromValues(P.x,P.y,E),m),k=this.addVertex(_e.vec3.fromValues(R.x,R.y,O),m);this.outIndices.emplaceBack(L,D,k)}}else for(let _=0;_<a.length;_+=3)this.outIndices.emplaceBack(a[_+0],a[_+1],a[_+2])}addQuad(a,u){const p=this.addVertices(u,void 0,...a.map((P=>_e.vec3.fromValues(P.coord.x,P.coord.y,P.height)))),[_,m,b,M]=p;this.addTriangles([_,m,b,b,M,_])}getBits(a){return this.view.setFloat32(0,a),BigInt(this.view.getUint32(0))}getVec3Bits(a){return this.getBits(a[0])<<64n|this.getBits(a[1])<<32n|this.getBits(a[2])}}class Su{constructor(a){this.unevaluatedPortals=new Wg,this.portalPolygons=new r8,this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new Pg,this.vertexNormals=new Zb,this.indexArray=new yo,this.tileToMeters=v(a)}addVertices(a,u){const p=this.unevalVertices.length;for(let _=0;_<a.length;_++)this.unevalVertices.push(a[_]),this.unevalHeights.push(u[_]);return p}addTriangles(a,u,p){const _=p?this.unevalTunnelTriangles:this.unevalTriangles;for(const m of a)_.push(m+u)}addRenderableRing(a,u,p,_,m){const b=[new ge(m.min.x,m.min.y),new ge(m.max.x,m.min.y),new ge(m.max.x,m.max.y),new ge(m.min.x,m.max.y)];for(let M=0;M<p-1;M++){const P=u+M,R=P+1,E=this.unevalVertices[P],O=this.unevalVertices[R];if(!(E.x>=m.min.x&&E.x<=m.max.x&&E.y>=m.min.y&&E.y<=m.max.y||O.x>=m.min.x&&O.x<=m.max.x&&O.y>=m.min.y&&O.y<=m.max.y||Qe(E,O,b))||this.isOnBorder(E.x,O.x)||this.isOnBorder(E.y,O.y))continue;const L=Su.computeEdgeHash(this.unevalVertices[P],this.unevalVertices[R]);let D,k=this.vertexHashLookup.get(Su.computePosHash(E));k!=null?D=k.next:(k=this.vertexHashLookup.get(Su.computePosHash(O)),D=k!=null?k.prev:L),this.unevalEdges.push({polygonIdx:a,a:P,b:R,hash:L,portalHash:D,isTunnel:_,type:"unevaluated"})}}addPortalCandidates(a,u,p,_,m){if(u.length===0)return;this.portalPolygons.add(a,{geometry:u,zLevel:m});const b=u[0];this.vertexHashLookup.clear();let M=Su.computeEdgeHash(b[b.length-2],b[b.length-1]);for(let P=0;P<b.length-1;P++){const R=b[P+0],E=b[P+1],O=_e.vec2.fromValues(E.x-R.x,E.y-R.y),L=_e.vec2.length(O);if(L===0)continue;let D="unevaluated";const k=_.pointElevation(R),B=_.pointElevation(E);Math.abs(k)<.01&&Math.abs(B)<.01?D="entrance":(this.isOnBorder(R.x,E.x)||this.isOnBorder(R.y,E.y))&&(D="border");const W=Su.computeEdgeHash(R,E);this.unevaluatedPortals.portals.push({connection:{a,b:void 0},va:R,vb:E,vab:O,length:L,hash:W,isTunnel:p,type:D});const G=Su.computePosHash(R);this.vertexHashLookup.set(G,{prev:M,next:W}),M=W}}construct(a){if(this.unevalVertices.length===0)return;const u=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),p=O=>{O.primitiveLength=this.indexArray.length-O.primitiveOffset},_=new cue(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(a.portals,this.unevalEdges);const m=u(),b=u(),M=u(),P=(O,L)=>{O.sort(((k,B)=>k.type===L&&B.type!==L?-1:k.type!==L&&B.type===L?1:0));const D=O.findIndex((k=>k.type!==L));return D>=0?D:O.length};let R=0;this.unevalEdges.length>0&&(R=P(this.unevalEdges,"none"),this.constructBridgeStructures(_,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:R},this.tileToMeters));const E=u();if(this.unevalEdges.length>0){const O=this.unevalEdges.splice(R),L=P(O,"tunnel")+R;this.unevalEdges.push(...O),this.constructTunnelStructures(_,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:R},{min:R,max:L})}p(M),_.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),p(E),_.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),p(b),_.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),p(m),this.maskSegments=Bi.simpleSegment(0,E.primitiveOffset,0,E.primitiveLength),this.depthSegments=Bi.simpleSegment(0,b.primitiveOffset,0,b.primitiveLength),this.renderableSegments=Bi.simpleSegment(0,M.primitiveOffset,0,M.primitiveLength),this.shadowCasterSegments=Bi.simpleSegment(0,m.primitiveOffset,0,m.primitiveLength)}upload(a){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=a.createVertexBuffer(this.vertexPositions,Yce.members),this.vertexBufferNormal=a.createVertexBuffer(this.vertexNormals,qce.members),this.indexBuffer=a.createIndexBuffer(this.indexArray))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableSegments.destroy(),this.shadowCasterSegments.destroy())}computeVertexConnections(a,u,p,_){const m=new Map;for(let b=p;b<_;b++){const M=u[b],P=M.a,R=M.b;m.has(P)||m.set(P,{}),m.has(R)||m.set(R,{});const E=m.get(P),O=m.get(R);a[R]>0&&(E.to=R),a[P]>0&&(O.from=P)}return m}constructBridgeStructures(a,u,p,_,m,b){const M=this.computeVertexConnections(p,_,m.min,m.max),P=1/b,R=.5*P,E=L=>_e.vec3.fromValues(u[L].x,u[L].y,p[L]*P),O=L=>{const D=M.get(L),k=D.from,B=D.to;if(!k||!B)return;const W=E(k),G=E(L),Q=E(B),K=_e.vec3.fromValues(0,0,0);if(!_e.vec3.exactEquals(W,G)){const re=_e.vec3.sub(_e.vec3.create(),G,W);_e.vec3.add(K,K,_e.vec3.normalize(re,re))}if(!_e.vec3.exactEquals(Q,G)){const re=_e.vec3.sub(_e.vec3.create(),Q,G);_e.vec3.add(K,K,_e.vec3.normalize(re,re))}const Z=_e.vec3.len(K);return Z>0?_e.vec3.scale(K,K,1/Z):void 0};for(let L=m.min;L<m.max;L++){const D=_[L],k=this.prepareEdgePoints(u,p,D,((en,$n)=>en>=$n));if(k==null)continue;const B=k[0],W=k[1],G=_e.vec3.fromValues(B.coord.x,B.coord.y,P*B.height),Q=_e.vec3.fromValues(W.coord.x,W.coord.y,P*W.height);if(_e.vec3.exactEquals(G,Q))continue;const K=_e.vec3.sub(_e.vec3.create(),Q,G);_e.vec3.normalize(K,K);const Z=en=>_e.vec3.normalize(en,en),re=O(D.a)||K,ce=O(D.b)||K,fe=Z(_e.vec3.fromValues(re[1],-re[0],0)),Pe=Z(_e.vec3.fromValues(ce[1],-ce[0],0)),Me=Z(_e.vec3.cross(_e.vec3.create(),fe,re)),Ae=Z(_e.vec3.cross(_e.vec3.create(),Pe,ce)),Ze=_e.vec3.create(),Oe=[_e.vec3.add(_e.vec3.create(),G,_e.vec3.scale(Ze,_e.vec3.sub(Ze,fe,Me),R)),_e.vec3.add(_e.vec3.create(),G,_e.vec3.scale(Ze,_e.vec3.add(Ze,fe,Me),R)),_e.vec3.add(_e.vec3.create(),G,_e.vec3.scale(Ze,Me,R)),G],Je=[_e.vec3.add(_e.vec3.create(),Q,_e.vec3.scale(Ze,_e.vec3.sub(Ze,Pe,Ae),R)),_e.vec3.add(_e.vec3.create(),Q,_e.vec3.scale(Ze,_e.vec3.add(Ze,Pe,Ae),R)),_e.vec3.add(_e.vec3.create(),Q,_e.vec3.scale(Ze,Ae,R)),Q],[rt,et]=a.addVertices(fe,b,Oe[0],Oe[1]),[dt,ct]=a.addVertices(Pe,b,Je[0],Je[1]);a.addTriangles([rt,et,dt,et,ct,dt]);const[xt,pt]=a.addVertices(Me,b,Oe[1],Oe[2]),[St,Zt]=a.addVertices(Ae,b,Je[1],Je[2]);a.addTriangles([xt,pt,St,pt,Zt,St]);const[Yt,Cn]=a.addVertices(_e.vec3.negate(fe,fe),b,Oe[2],Oe[3]),[rn,pn]=a.addVertices(_e.vec3.negate(Pe,Pe),b,Je[2],Je[3]);a.addTriangles([Yt,Cn,rn,Cn,pn,rn])}}constructTunnelStructures(a,u,p,_,m,b){const M=P=>_e.vec3.normalize(P,P);for(let P=m.min;P<m.max;P++){const R=this.prepareEdgePoints(u,p,_[P],((D,k)=>D<=k));if(R==null)continue;const[E,O]=R,L=M(_e.vec3.fromValues(O.coord.y-E.coord.y,-(O.coord.x-E.coord.x),0));a.addQuad([E,O,{coord:O.coord,height:_[P].isTunnel?-.1:0},{coord:E.coord,height:_[P].isTunnel?-.1:0}],L)}for(let P=b.min;P<b.max;P++){const R=_[P],E=u[R.a],O=u[R.b],L=M(_e.vec3.fromValues(O.y-E.y,-(O.x-E.x),0));a.addQuad([{coord:O,height:0},{coord:E,height:0},{coord:E,height:p[R.a]+4},{coord:O,height:p[R.b]+4}],L),a.addQuad([{coord:E,height:0},{coord:O,height:0},{coord:O,height:p[R.b]+4},{coord:E,height:p[R.a]+4}],L)}}prepareEdgePoints(a,u,p,_){const m=a[p.a],b=a[p.b];let M=u[p.a],P=u[p.b];if(!(M!==0&&_(M,0)||P!==0&&_(P,0)))return;const R=m.clone(),E=b.clone();if(_(M,0)){if(!_(P,0)){const O=P/(P-M);E.x=jn(E.x,R.x,O),E.y=jn(E.y,R.y,O),P=jn(P,M,O)}}else{const O=M/(M-P);R.x=jn(R.x,E.x,O),R.y=jn(R.y,E.y,O),M=jn(M,P,O)}return[{coord:R,height:M},{coord:E,height:P}]}prepareEdges(a,u){if(u.length===0)return;u.sort(((M,P)=>M.hash===P.hash?P.polygonIdx-M.polygonIdx:P.hash>M.hash?1:-1));let p=0,_=0,m=0,b=u[p].polygonIdx;do _++,(_===u.length||u[p].hash!==u[_].hash)&&((_-p==1||u[_-1].polygonIdx!==b)&&(m<p&&(u[m]=u[p],u[p]=null),u[m].type="none",m++),p=_,p!==u.length&&(b=u[p].polygonIdx));while(p!==u.length);if(u.splice(m),u.length!==0&&a.length!==0){u.sort(((R,E)=>R.hash<E.hash?1:-1));let M=0,P=0;for(;M!==u.length&&P!==a.length;){const R=u[M],E=a[P];R.portalHash>E.hash?M++:E.hash>R.portalHash?P++:(R.type=E.type,M++)}}}isOnBorder(a,u){return a<=0&&u<=0||a>=gn&&u>=gn}static computeEdgeHash(a,u){return(a.y===u.y&&a.x>u.x||a.y>u.y)&&([a,u]=[u,a]),BigInt(Su.computePosHash(a))<<32n|BigInt(Su.computePosHash(u))}static computePosHash(a){return((65535&a.x)<<16|65535&a.y)>>>0}}class h4{constructor(a,u){this.layoutVertexArray=new yu,this.indexArray=new yo,this.lineIndexArray=new bd,this.triangleSegments=new Bi,this.lineSegments=new Bi,this.programConfigurations=new wd(a.layers,{zoom:a.zoom,lut:a.lut}),this.uploaded=!1,u&&(this.elevatedLayoutVertexArray=new mh)}update(a,u,p,_,m,b,M){this.programConfigurations.updatePaintArrays(a,u,m,p,_,b,M)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Wce.members),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.lineIndexBuffer=a.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=a.createVertexBuffer(this.elevatedLayoutVertexArray,Gce.members))),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(a,u,p,_,m,b){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,u,p,_,m,b)}}class f4{constructor(a){this.zoom=a.zoom,this.pixelRatio=a.pixelRatio,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.fqid)),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.bufferData=new h4(a,!1),this.elevationBufferData=new h4(a,!0),this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id)),this.projection=a.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference")}updateFootprints(a,u){}populate(a,u,p,_){this.hasPattern=o4("fill",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("fill-sort-key"),b=[];for(const{feature:M,id:P,index:R,sourceLayerIndex:E}of a){const O=this.layers[0]._featureFilter.needGeometry,L=H(M,O);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),L,p))continue;const D=m?m.evaluate(L,{},p,u.availableImages):void 0,k={id:P,properties:M.properties,type:M.type,sourceLayerIndex:E,index:R,geometry:O?L.geometry:U(M,p,_),patterns:{},sortKey:D};b.push(k)}m&&b.sort(((M,P)=>M.sortKey-P.sortKey));for(const M of b){const{geometry:P,index:R,sourceLayerIndex:E}=M;if(this.hasPattern){const O=a4("fill",this.layers,M,this.zoom,this.pixelRatio,u);this.patternFeatures.push(O)}else this.addFeature(M,P,R,p,{},u.availableImages,u.brightness,u.elevationFeatures);u.featureIndex.insert(a[R].feature,P,R,E,this.index)}}update(a,u,p,_,m,b,M){this.bufferData.update(a,u,p,_,m,b,M),this.elevationBufferData.update(a,u,p,_,m,b,M)}addFeatures(a,u,p,_,m,b){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,u,p,_,b,a.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(a){this.bufferData.upload(a),this.elevationBufferData.upload(a),this.elevatedStructures&&this.elevatedStructures.upload(a)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(a,u,p,_,m,b=[],M,P){const R=_T(u,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(a,R,_,p,P):this.addGeometry(R,this.bufferData),this.bufferData.populatePaintArrays(a,p,m,b,_,M),this.elevationBufferData.populatePaintArrays(a,p,m,b,_,M)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(a){this.elevatedStructures&&this.elevatedStructures.construct(a)}addElevatedRoadFeature(a,u,p,_,m){const b=new Array,M=this.getElevationFeature(a,m);if(M){b.push({polygons:u,elevationFeature:M,elevationTileID:p});for(const P of b)if(P.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new Su(P.elevationTileID));const E=P.elevationFeature.isTunnel();let O=0;a.properties.hasOwnProperty(t8)&&(O=+a.properties[t8]);for(const L of P.polygons)this.elevatedStructures.addPortalCandidates(P.elevationFeature.id,L,E,P.elevationFeature,O)}const R=new lue(p,P.elevationTileID);this.addElevatedGeometry(P.polygons,R,P.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,_)}}else this.addGeometry(u,this.bufferData)}addElevatedGeometry(a,u,p,_,m){const b={elevation:p,elevationSampler:u,bias:_,index:m},[M,P]=this.addGeometry(a,this.elevationBufferData,b);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:M,max:P}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,M),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,P))}addGeometry(a,u,p){let _=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,b=null;p&&(b=p.elevationSampler.constantElevation(p.elevation,p.bias),b!=null&&(_=b,m=b));const M=(P,R,E)=>{if(p!=null)if(R.push(P),b!=null)u.elevatedLayoutVertexArray.emplaceBack(b),E.push(b);else{const O=p.elevationSampler.pointElevation(P,p.elevation,p.bias);u.elevatedLayoutVertexArray.emplaceBack(O),E.push(O),_=Math.min(_,O),m=Math.max(m,O)}};for(const P of a){let R=0;for(const K of P)R+=K.length;const E=u.triangleSegments.prepareSegment(R,u.layoutVertexArray,u.indexArray),O=E.vertexLength,L=[],D=[],k=[],B=[],W=[],G=u.layoutVertexArray.length;for(const K of P){if(K.length===0)continue;K!==P[0]&&D.push(L.length/2);const Z=u.lineSegments.prepareSegment(K.length,u.layoutVertexArray,u.lineIndexArray),re=Z.vertexLength;p&&W.push(u.layoutVertexArray.length-G),M(K[0],k,B),u.layoutVertexArray.emplaceBack(K[0].x,K[0].y),u.lineIndexArray.emplaceBack(re+K.length-1,re),L.push(K[0].x),L.push(K[0].y);for(let ce=1;ce<K.length;ce++)M(K[ce],k,B),u.layoutVertexArray.emplaceBack(K[ce].x,K[ce].y),u.lineIndexArray.emplaceBack(re+ce-1,re+ce),L.push(K[ce].x),L.push(K[ce].y);Z.vertexLength+=K.length,Z.primitiveLength+=K.length}const Q=yx(L,D);for(let K=0;K<Q.length;K+=3)u.indexArray.emplaceBack(O+Q[K],O+Q[K+1],O+Q[K+2]);if(p&&this.elevationMode==="hd-road-base"){const K=p.elevation.isTunnel(),Z=p.elevation.safeArea,re=this.elevatedStructures.addVertices(k,B);this.elevatedStructures.addTriangles(Q,re,K);const ce=W.length;if(ce>0){for(let fe=0;fe<ce-1;fe++)this.elevatedStructures.addRenderableRing(p.index,W[fe]+re,W[fe+1]-W[fe],K,Z);this.elevatedStructures.addRenderableRing(p.index,W[ce-1]+re,k.length-W[ce-1],K,Z)}}E.vertexLength+=R,E.primitiveLength+=Q.length/3}return[_,m]}getElevationFeature(a,u){if(!u)return;const p=+a.properties[Hg];return p!=null?u.find((_=>_.id===p)):void 0}}let i8,s8,o8,a8;An(f4,"FillBucket",{omit:["layers","patternFeatures"]}),An(h4,"FillBufferData"),An(Su,"ElevatedStructures");class p4{constructor(a,u,p,_){if(this.triangleCount=u.length/3,this.min=new ge(0,0),this.max=new ge(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||a.length===0)return;const[m,b]=[a[0].clone(),a[0].clone()];for(let O=1;O<a.length;++O){const L=a[O];m.x=Math.min(m.x,L.x),m.y=Math.min(m.y,L.y),b.x=Math.max(b.x,L.x),b.y=Math.max(b.y,L.y)}if(_){const O=Math.ceil(Math.max(b.x-m.x,b.y-m.y)/_);p=Math.max(p,O)}if(p===0)return;this.min=m,this.max=b;const M=this.max.sub(this.min);M.x=Math.max(M.x,1),M.y=Math.max(M.y,1);const P=Math.max(M.x,M.y)/p;this.cellsX=Math.max(1,Math.ceil(M.x/P)),this.cellsY=Math.max(1,Math.ceil(M.y/P)),this.xScale=1/P,this.yScale=1/P;const R=[];for(let O=0;O<this.triangleCount;O++){const L=a[u[3*O+0]].sub(this.min),D=a[u[3*O+1]].sub(this.min),k=a[u[3*O+2]].sub(this.min),B=Td(Math.floor(Math.min(L.x,D.x,k.x)),this.xScale,this.cellsX),W=Td(Math.floor(Math.max(L.x,D.x,k.x)),this.xScale,this.cellsX),G=Td(Math.floor(Math.min(L.y,D.y,k.y)),this.yScale,this.cellsY),Q=Td(Math.floor(Math.max(L.y,D.y,k.y)),this.yScale,this.cellsY),K=new ge(0,0),Z=new ge(0,0),re=new ge(0,0),ce=new ge(0,0);for(let fe=G;fe<=Q;++fe){K.y=Z.y=fe*P,re.y=ce.y=(fe+1)*P;for(let Pe=B;Pe<=W;++Pe)K.x=re.x=Pe*P,Z.x=ce.x=(Pe+1)*P,(Ot(L,D,k,K,Z,ce)||Ot(L,D,k,K,ce,re))&&R.push({cellIdx:fe*this.cellsX+Pe,triIdx:O})}}if(R.length===0)return;R.sort(((O,L)=>O.cellIdx-L.cellIdx||O.triIdx-L.triIdx));let E=0;for(;E<R.length;){const O=R[E].cellIdx,L={start:this.payload.length,len:0};for(;E<R.length&&R[E].cellIdx===O;)++L.len,this.payload.push(R[E++].triIdx);this.cells[O]=L}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(a,u){if(this.triangleCount===0||this.cells.length===0||a.x>this.max.x||this.min.x>a.x||a.y>this.max.y||this.min.y>a.y)return;const p=Td(a.x-this.min.x,this.xScale,this.cellsX),_=Td(a.y-this.min.y,this.yScale,this.cellsY),m=this.cells[_*this.cellsX+p];if(m){this._lazyInitLookup();for(let b=0;b<m.len;b++){const M=this.payload[m.start+b],P=Math.floor(M/8),R=1<<M%8;if(!(this.lookup[P]&R)&&(this.lookup[P]|=R,u.push(M),u.length===this.triangleCount))return}}}query(a,u,p){if(this.triangleCount===0||this.cells.length===0||a.x>this.max.x||this.min.x>u.x||a.y>this.max.y||this.min.y>u.y)return;this._lazyInitLookup();const _=Td(a.x-this.min.x,this.xScale,this.cellsX),m=Td(u.x-this.min.x,this.xScale,this.cellsX),b=Td(a.y-this.min.y,this.yScale,this.cellsY),M=Td(u.y-this.min.y,this.yScale,this.cellsY);for(let P=b;P<=M;P++)for(let R=_;R<=m;R++){const E=this.cells[P*this.cellsX+R];if(E)for(let O=0;O<E.len;O++){const L=this.payload[E.start+O],D=Math.floor(L/8),k=1<<L%8;if(!(this.lookup[D]&k)&&(this.lookup[D]|=k,p.push(L),p.length===this.triangleCount))return}}}}function Td(h,a,u){return Math.max(0,Math.min(u-1,Math.floor(h*a)))}An(p4,"TriangleGridIndex");class l8{constructor(a){this.zoom=a.zoom,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.fqid)),this.index=a.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id)),this.footprints=[]}updateFootprints(a,u){for(const p of this.footprints)u.push({footprint:p,id:a})}populate(a,u,p,_){const m=[];for(const{feature:b,id:M,index:P,sourceLayerIndex:R}of a){const E=this.layers[0]._featureFilter.needGeometry,O=H(b,E);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),O,p))continue;const L={id:M,properties:b.properties,type:b.type,sourceLayerIndex:R,index:P,geometry:E?O.geometry:U(b,p,_),patterns:{}};m.push(L)}for(const b of m){const{geometry:M,index:P,sourceLayerIndex:R}=b;this.addFeature(b,M,P,p,{},u.availableImages,u.brightness),u.featureIndex.insert(a[P].feature,M,P,R,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(a){}update(a,u,p,_,m,b,M){}destroy(){}addFeature(a,u,p,_,m,b=[],M){for(const P of _T(u,2)){const R=[],E=[],O=[],L=new ge(1/0,1/0),D=new ge(-1/0,-1/0);for(const W of P)if(W.length!==0){W!==P[0]&&O.push(E.length/2);for(let G=0;G<W.length;G++)E.push(W[G].x),E.push(W[G].y),R.push(W[G]),L.x=Math.min(L.x,W[G].x),L.y=Math.min(L.y,W[G].y),D.x=Math.max(D.x,W[G].x),D.y=Math.max(D.y,W[G].y)}const k=yx(E,O),B=new p4(R,k,8,256);this.footprints.push({vertices:R,indices:k,grid:B,min:L,max:D})}}}An(l8,"ClipBucket",{omit:["layers"]});const uue=Gr([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),due=Gr([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),hue=Gr([{name:"a_centroid_pos",components:2,type:"Uint16"}]),fue=Gr([{name:"a_join_normal_inside",components:3,type:"Int16"}]),pue=Gr([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),mue=Gr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:gue}=uue;class Gg extends ge{constructor(a,u,p){super(a,u),this.z=p}}class c8 extends Gg{constructor(a,u,p,_){super(a,u,p),this.w=_}}function vT(h,a,u,p){const _=[],m=p===0?(b,M,P,R,E,O)=>{b.push(new ge(O,P+(O-M)/(R-M)*(E-P)))}:(b,M,P,R,E,O)=>{b.push(new ge(M+(O-P)/(E-P)*(R-M),O))};for(const b of h){const M=[];for(const P of b){if(P.length<=2)continue;const R=[];for(let L=0;L<P.length-1;L++){const D=P[L].x,k=P[L].y,B=P[L+1].x,W=P[L+1].y,G=p===0?D:k,Q=p===0?B:W;G<a?Q>a&&m(R,D,k,B,W,a):G>u?Q<u&&m(R,D,k,B,W,u):R.push(P[L]),Q<a&&G>=a&&m(R,D,k,B,W,a),Q>u&&G<=u&&m(R,D,k,B,W,u)}let E=P[P.length-1];const O=p===0?E.x:E.y;O>=a&&O<=u&&R.push(E),R.length&&(E=R[R.length-1],R[0].x===E.x&&R[0].y===E.y||R.push(R[0]),M.push(R))}M.length&&_.push(M)}return _}function u8(h,a,u,p){const _=u==="x"?"y":"x",m=(p-h[u])/(a[u]-h[u]);h[_]=h[_]+(a[_]-h[_])*m,h[u]=p,h.hasOwnProperty("z")&&(h.z=jn(h.z,a.z,m)),h.hasOwnProperty("w")&&(h.w=jn(h.w,a.w,m))}function d8(h,a,u,p){const _=u,m=p;for(const b of["x","y"]){let M=h,P=a;M[b]>=P[b]&&(M=a,P=h),M[b]<_&&P[b]>_&&u8(M,P,b,_),M[b]<m&&P[b]>m&&u8(P,M,b,m)}}const bT=Number.MAX_SAFE_INTEGER;function h8(h,a,u,p){return h.order<a||h.order===bT||!(h.clipMask&u)||(function(_,m){return m.length!==0&&m.find((b=>b===_))===void 0})(p,h.clipScope)}function xT(h,a){return h.x-a.x||h.y-a.y}function f8(h,a){return xT(h.min,a.min)===0&&xT(h.max,a.max)===0}function m4(h,a){return!(h.min.x>a.max.x||h.max.x<a.min.x||h.min.y>a.max.y||h.max.y<a.min.y)}function g4(h,a){if(h.length!==a.length)return!1;for(let u=0;u<h.length;u++)if(h[u].sourceId!==a[u].sourceId||!f8(h[u],a[u])||h[u].order!==a[u].order||h[u].clipMask!==a[u].clipMask||!nt(h[u].clipScope,a[u].clipScope))return!1;return!0}function p8(h,a,u){const p=1/gn,_=1/(1<<u.canonical.z),m=(a.x*p+u.canonical.x)*_+u.wrap,b=(a.y*p+u.canonical.y)*_;return{min:new ge((h.x*p+u.canonical.x)*_+u.wrap,(h.y*p+u.canonical.y)*_),max:new ge(m,b)}}function _ue(h,a,u){const p=1<<u.canonical.z,_=((a.x-u.wrap)*p-u.canonical.x)*gn,m=(a.y*p-u.canonical.y)*gn;return{min:new ge(((h.x-u.wrap)*p-u.canonical.x)*gn,(h.y*p-u.canonical.y)*gn),max:new ge(_,m)}}function m8(h,a,u,p,_,m,b){const M=h.indices,P=h.vertices,R=[];for(let E=p;E<p+_;E+=3){const O=a[u[E+0]+m],L=a[u[E+1]+m],D=a[u[E+2]+m],k=Math.min(O.x,L.x,D.x),B=Math.max(O.x,L.x,D.x),W=Math.min(O.y,L.y,D.y),G=Math.max(O.y,L.y,D.y);R.length=0,h.grid.query(new ge(k,W),new ge(B,G),R);for(let Q=0;Q<R.length;Q++){const K=R[Q];if(Ot(P[M[3*K+0]],P[M[3*K+1]],P[M[3*K+2]],O,L,D,b))return!0}}return!1}function g8(h,a,u,p){if(!h||!u)return!1;let _=h.vertices;if(!a.canonical.equals(p.canonical)||a.wrap!==p.wrap){if(u.vertices.length<h.vertices.length)return g8(u,p,h,a);const m=a.canonical,b=p.canonical,M=Math.pow(2,b.z-m.z);_=h.vertices.map((P=>new ge((P.x+m.x*gn)*M-b.x*gn,(P.y+m.y*gn)*M-b.y*gn)))}return m8(u,_,h.indices,0,h.indices.length,0,0)}function _8(h,a,u,p){const _=Math.pow(2,p.z-u.z);return new ge((h+u.x*gn)*_-p.x*gn,(a+u.y*gn)*_-p.y*gn)}function y8(h,a){const u=[];a.grid.queryPoint(h,u);const p=a.indices,_=a.vertices;for(let m=0;m<u.length;m++){const b=u[m];if(Fe([_[p[3*b+0]],_[p[3*b+1]],_[p[3*b+2]]],h))return!0}return!1}const _4=[new ge(0,0),new ge(gn,0),new ge(gn,gn),new ge(0,gn)];function v8(h,a){const u=[];let p=[];if(!a||h.length<2)return[h];if(h.length===2)return Qe(h[0],h[1],_4)?[h]:[];for(let _=0;_<h.length+2;_++){const m=h[_%h.length],b=h[(_+1)%h.length],M=Qe(_===0?h[h.length-1]:h[(_-1)%h.length],m,_4),P=Qe(m,b,_4),R=M||P;R&&p.push(m),R&&P||p.length>0&&(p.length>1&&u.push(p),p=[])}return p.length>1&&u.push(p),u}const y4=bp.VectorTileFeature.types,yue=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],vue=["fill-extrusion-flood-light-ground-radius"],bue=Math.pow(2,13),xue=Math.pow(2,15)-1,b8=new ge(0,1),xp=2147483648;function wx(h,a,u,p,_,m,b,M){h.emplaceBack((a<<1)+b,(u<<1)+m,(Math.floor(p*bue)<<1)+_,Math.round(M))}function Sx(h,a,u){h.emplaceBack(a.x*gn,a.y*gn,u?1:0)}function wT(h,a,u,p,_,m){h.emplaceBack(a.x,a.y,(u.x<<1)+p,(u.y<<1)+_,m)}function Ex(h,a,u){h.emplaceBack(a.x,a.y,a.z,u[0]*16384,u[1]*16384,u[2]*16384)}class x8{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class w8{constructor(){this.centroidXY=new ge(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new ge(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new ge(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new ge(this.max.x-this.min.x,this.max.y-this.min.y)}}class S8{constructor(){this.acc=new ge(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(a,u){a.min.x===Number.MAX_VALUE&&(a.min.x=a.max.x=u.x,a.min.y=a.max.y=u.y)}appendEdge(a,u,p){this.accCount++,this.acc._add(u);let _=!!this.borders;u.x<a.min.x?(a.min.x=u.x,_=!0):u.x>a.max.x&&(a.max.x=u.x,_=!0),u.y<a.min.y?(a.min.y=u.y,_=!0):u.y>a.max.y&&(a.max.y=u.y,_=!0),((u.x===0||u.x===gn)&&u.x===p.x)!=((u.y===0||u.y===gn)&&u.y===p.y)&&this.processBorderOverlap(u,p),_&&this.checkBorderIntersection(u,p)}checkBorderIntersection(a,u){u.x<0!=a.x<0&&this.addBorderIntersection(0,jn(u.y,a.y,(0-u.x)/(a.x-u.x))),u.x>gn!=a.x>gn&&this.addBorderIntersection(1,jn(u.y,a.y,(gn-u.x)/(a.x-u.x))),u.y<0!=a.y<0&&this.addBorderIntersection(2,jn(u.x,a.x,(0-u.y)/(a.y-u.y))),u.y>gn!=a.y>gn&&this.addBorderIntersection(3,jn(u.x,a.x,(gn-u.y)/(a.y-u.y)))}addBorderIntersection(a,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const p=this.borders[a];u<p[0]&&(p[0]=u),u>p[1]&&(p[1]=u)}processBorderOverlap(a,u){if(a.x===u.x){if(a.y===u.y)return;const p=a.x===0?0:1;this.addBorderIntersection(p,u.y),this.addBorderIntersection(p,a.y)}else{const p=a.y===0?2:3;this.addBorderIntersection(p,u.x),this.addBorderIntersection(p,a.x)}}centroid(){return this.accCount===0?new ge(0,0):new ge(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce(((a,u)=>a+ +(u[0]!==Number.MAX_VALUE)),0):0}}function E8(h,a){const u=h.add(a)._unit(),p=$e(h.x*u.x+h.y*u.y,-1,1);var _,m,b;return b=Math.acos(p),Math.min(4,Math.max(-4,Math.tan(b)))/4*xue*((_=h).x*(m=a).y-_.y*m.x<0?-1:1)}const wue=[h=>h.x<0,h=>h.x>gn,h=>h.y<0,h=>h.y>gn];function Sue(h,a,u,p){const _=[4];if(p===0)return _;u._mult(p);const m=h.sub(u),b=a.sub(u),M=[h,a,m,b];for(let P=0;P<4;P++)for(const R of M)if(wue[P](R)){_.push(P);break}return _}class T8{constructor(a){this.vertexArray=new Nl,this.indexArray=new yo,this.programConfigurations=new wd(a.layers,{zoom:a.zoom,lut:a.lut},(u=>vue.includes(u))),this._segments=new Bi,this.hiddenByLandmarkVertexArray=new ox,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Bi}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(a,u,p,_=!1){const m=a.length;if(m>2){let b=Math.max(0,this._segments.get().length-1);const M=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[b].length);let P;b!==this._segments.get().length-1&&(b++,this._segmentToGroundQuads[b]=[],this._segmentToRegionTriCounts[b]=[0,0,0,0,0]);{const R=a[0],E=a[1];P=E8(R.sub(a[m-1])._perp()._unit(),E.sub(R)._perp()._unit())}for(let R=0;R<m;R++){const E=R===m-1?0:R+1,O=a[R],L=a[E],D=a[E===m-1?0:E+1],k=L.sub(O)._perp()._unit(),B=E8(k,D.sub(L)._perp()._unit()),W=P,G=B;if(v4(O,L,u)||_&&C8(O,u)&&C8(L,u)){P=B;continue}const Q=M.vertexLength;wT(this.vertexArray,O,L,1,1,W),wT(this.vertexArray,O,L,1,0,W),wT(this.vertexArray,O,L,0,1,G),wT(this.vertexArray,O,L,0,0,G),M.vertexLength+=4;const K=Sue(O,L,k,p);for(const Z of K)this._segmentToGroundQuads[b].push({id:Q,region:Z}),this._segmentToRegionTriCounts[b][Z]+=2,M.primitiveLength+=2;P=B}}}prepareBorderSegments(){if(!this.hasData())return;const a=this._segments.get(),u=a.length;for(let p=0;p<u;p++)this._segmentToGroundQuads[p].sort(((_,m)=>_.region-m.region));for(let p=0;p<u;p++){const _=this._segmentToGroundQuads[p],m=a[p],b=this._segmentToRegionTriCounts[p];b.reduce(((P,R)=>P+R),0);let M=0;for(let P=0;P<=4;P++){const R=b[P];if(R!==0){let E=this.regionSegments[P];E||(E=this.regionSegments[P]=new Bi);const O={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+M,vertexLength:m.vertexLength,primitiveLength:R};E.get().push(O)}M+=R}for(let P=0;P<_.length;P++){const R=_[P].id;this.indexArray.emplaceBack(R,R+1,R+3),this.indexArray.emplaceBack(R,R+3,R+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(a,u,p,_,m,b){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,a,u,p,_,m,b)}upload(a){this.hasData()&&(this.vertexBuffer=a.createVertexBuffer(this.vertexArray,due.members),this.indexBuffer=a.createIndexBuffer(this.indexArray))}uploadPaintProperties(a){this.hasData()&&this.programConfigurations.upload(a)}update(a,u,p,_,m,b,M){this.hasData()&&this.programConfigurations.updatePaintArrays(a,u,p,_,m,b,M)}updateHiddenByLandmark(a){if(!this.hasData())return;const u=a.groundVertexCount+a.groundVertexArrayOffset;if(a.groundVertexCount===0)return;const p=a.flags&xp?1:0;for(let _=a.groundVertexArrayOffset;_<u;++_)this.hiddenByLandmarkVertexArray.emplace(_,p);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(a){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=a.createVertexBuffer(this.hiddenByLandmarkVertexArray,pue.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let a=0;a<=4;a++){const u=this.regionSegments[a];u&&u.destroy()}}}}class ST{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.overscaling=a.overscaling,this.layers=a.layers,this.pixelRatio=a.pixelRatio,this.layerIds=this.layers.map((u=>u.fqid)),this.index=a.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=a.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new yo,this.footprintVertices=new yu,this.footprintSegments=[],this.layoutVertexArray=new vu,this.centroidVertexArray=new Ng,this.wallVertexArray=new oT,this.indexArray=new yo,this.programConfigurations=new wd(a.layers,{zoom:a.zoom,lut:a.lut},(u=>yue.includes(u))),this.segments=new Bi,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id)),this.groundEffect=new T8(a),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(a,u){}populate(a,u,p,_){this.features=[],this.hasPattern=o4("fill-extrusion",this.layers,this.pixelRatio,u),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=v(p),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:m,id:b,index:M,sourceLayerIndex:P}of a){const R=this.layers[0]._featureFilter.needGeometry,E=H(m,R);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),E,p))continue;const O={id:b,sourceLayerIndex:P,index:M,geometry:R?E.geometry:U(m,p,_),properties:m.properties,type:m.type,patterns:{}},L=this.layoutVertexArray.length,D=y4[O.type]==="Polygon";if(this.hasPattern)this.features.push(a4("fill-extrusion",this.layers,O,this.zoom,this.pixelRatio,u));else if(this.wallMode)for(const k of O.geometry)for(const B of v8(k,D))this.addFeature(O,[B],M,p,{},u.availableImages,_,u.brightness);else this.addFeature(O,O.geometry,M,p,{},u.availableImages,_,u.brightness);u.featureIndex.insert(m,O.geometry,M,P,this.index,L)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(a,u,p,_,m,b){for(const M of this.features){const P=y4[M.type]==="Polygon",{geometry:R}=M;if(this.wallMode)for(const E of R)for(const O of v8(E,P))this.addFeature(M,[O],M.index,u,p,_,m,b);else this.addFeature(M,R,M.index,u,p,_,m,b)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(a,u,p,_,m,b,M){this.programConfigurations.updatePaintArrays(a,u,m,p,_,b,M),this.groundEffect.update(a,u,m,p,_,b,M)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,gue),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.wallVertexBuffer=a.createVertexBuffer(this.wallVertexArray,fue.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=a.createVertexBuffer(this.layoutVertexExtArray,mue.members,!0)),this.groundEffect.upload(a)),this.groundEffect.uploadPaintProperties(a),this.programConfigurations.upload(a),this.uploaded=!0}uploadCentroid(a){this.groundEffect.uploadHiddenByLandmark(a),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,hue.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,u,p,_,m,b,M,P){const R=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(a,{})/this.tileToMeter,E=[new ge(0,0),new ge(gn,gn)],O=M.projection,L=O.name==="globe",D=this.wallMode||y4[a.type]==="Polygon",k=new S8;k.centroidDataIndex=this.centroidData.length;const B=new w8,W=this.layers[0].paint.get("fill-extrusion-base").evaluate(a,{},_)<=0,G=this.layers[0].paint.get("fill-extrusion-height").evaluate(a,{},_);let Q;if(B.height=G,B.vertexArrayOffset=this.layoutVertexArray.length,B.groundVertexArrayOffset=this.groundEffect.vertexArray.length,L&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new hv),this.wallMode){if(L)return void Te("Non zero fill-extrusion-line-width is not yet supported on globe.");if(u.length!==1)return;Q=(function(Ae){const Ze=Ae[0].x===Ae[Ae.length-1].x&&Ae[0].y===Ae[Ae.length-1].y;(function(pn){let en=0;const $n=pn.length;for(let Sn=0;Sn<$n;Sn++)en+=(pn[(Sn+1)%$n].x-pn[Sn].x)*(pn[(Sn+1)%$n].y+pn[Sn].y);return en>=0})(Ae)||(Ae=Ae.reverse());const Je={geometry:[],joinNormals:[],indices:[]},rt=[],et=[],dt=[];let ct=Ae.length;for(;ct>=2&&Ae[ct-1].equals(Ae[ct-2]);)ct--;if(ct<(Ze?3:2))return Je;let xt,pt,St,Zt,Yt,Cn=0;for(;Cn<ct-1&&Ae[Cn].equals(Ae[Cn+1]);)Cn++;Ze&&(xt=Ae[ct-2],Yt=Ae[Cn].sub(xt)._unit()._perp());for(let pn=Cn;pn<ct;pn++){if(St=pn===ct-1?Ze?Ae[Cn+1]:void 0:Ae[pn+1],St&&Ae[pn].equals(St))continue;Yt&&(Zt=Yt),xt&&(pt=xt),xt=Ae[pn],Yt=St?St.sub(xt)._unit()._perp():Zt,Zt=Zt||Yt;let en=Zt.add(Yt);en.x===0&&en.y===0||en._unit();const $n=en.x*Yt.x+en.y*Yt.y,Sn=$n!==0?1/$n:1/0,Dn=Zt.x*Yt.y-Zt.y*Yt.x>0;let Kn="miter";const pr=2;Kn==="miter"&&Sn>pr&&(Kn="bevel"),Kn==="bevel"&&(Sn>100&&(Kn="flipbevel"),Sn<pr&&(Kn="miter"));const tr=(xr,fr,Er,$r)=>{const bi=new ge(xr.x,xr.y),Qn=new ge(xr.x,xr.y);bi.x+=fr.x*$r,bi.y+=fr.y*$r,Qn.x-=fr.x*Math.max(Er,1),Qn.y-=fr.y*Math.max(Er,1),dt.push(fr),rt.push(bi),et.push(Qn)};if(Kn==="miter")en._mult(Sn),tr(xt,en,0,0);else if(Kn==="flipbevel")en=Yt.mult(-1),tr(xt,en,0,0),tr(xt,en.mult(-1),0,0);else{const xr=-Math.sqrt(Sn*Sn-1),fr=Dn?xr:0,Er=Dn?0:xr;pt&&tr(xt,Zt,fr,Er),St&&tr(xt,Yt,fr,Er)}}Je.geometry=[...rt,...et.reverse(),rt[0]],Je.joinNormals=[...dt,...dt.reverse(),dt[dt.length-1]];const rn=Je.geometry.length-1;for(let pn=0;pn<rn/2;pn++)if(pn+1<rn/2){let en=pn,$n=pn+1,Sn=rn-1-pn,Dn=rn-2-pn;en=en===0?rn-1:en-1,$n=$n===0?rn-1:$n-1,Sn=Sn===0?rn-1:Sn-1,Dn=Dn===0?rn-1:Dn-1,Je.indices.push(Sn),Je.indices.push($n),Je.indices.push(en),Je.indices.push(Sn),Je.indices.push(Dn),Je.indices.push($n)}return Je})(u[0]),u=[Q.geometry]}const K=(Ae,Ze)=>Ae<(Ze.length-1)/2||Ae===Ze.length-1,Z=this.wallMode?[u]:_T(u,500);for(let Ae=Z.length-1;Ae>=0;Ae--){const Ze=Z[Ae];(Ze.length===0||(re=Ze[0]).every((Oe=>Oe.x<=0))||re.every((Oe=>Oe.x>=gn))||re.every((Oe=>Oe.y<=0))||re.every((Oe=>Oe.y>=gn)))&&Z.splice(Ae,1)}var re;let ce;if(L)ce=D8(Z,E,_);else{ce=[];for(const Ae of Z)ce.push({polygon:Ae,bounds:E})}const fe=D?this.edgeRadius:0,Pe=fe>0&&this.zoom<17,Me=(Ae,Ze)=>{if(Ae.length===0)return!1;const Oe=Ae[Ae.length-1];return Ze.x===Oe.x&&Ze.y===Oe.y};for(const{polygon:Ae,bounds:Ze}of ce){let Oe=0,Je=0;for(const ct of Ae)D&&!ct[0].equals(ct[ct.length-1])&&ct.push(ct[0]),Je+=D?ct.length-1:ct.length;const rt=this.segments.prepareSegment((D?5:4)*Je,this.layoutVertexArray,this.indexArray);B.footprintSegIdx<0&&(B.footprintSegIdx=this.footprintSegments.length),B.polygonSegIdx<0&&(B.polygonSegIdx=this.polygonSegments.length);const et={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},dt=new x8;if(dt.vertexOffset=this.footprintVertices.length,dt.indexOffset=3*this.footprintIndices.length,dt.ringIndices=[],D){const ct=[],xt=[];Oe=rt.vertexLength;for(let St=0;St<Ae.length;St++){const Zt=Ae[St];Zt.length&&St!==0&&xt.push(ct.length/2);const Yt=[];let Cn,rn;Cn=Zt[1].sub(Zt[0])._perp()._unit(),dt.ringIndices.push(Zt.length-1);for(let pn=1;pn<Zt.length;pn++){const en=Zt[pn],$n=Zt[pn===Zt.length-1?1:pn+1],Sn=en.clone();if(fe){rn=$n.sub(en)._perp()._unit();const Dn=Cn.add(rn)._unit(),Kn=fe*Math.min(4,1/(Cn.x*Dn.x+Cn.y*Dn.y));Sn.x+=Kn*Dn.x,Sn.y+=Kn*Dn.y,Sn.x=Math.round(Sn.x),Sn.y=Math.round(Sn.y),Cn=rn}if(!W||fe!==0&&!Pe||Me(Yt,Sn)||Yt.push(Sn),wx(this.layoutVertexArray,Sn.x,Sn.y,0,0,1,1,0),this.wallMode){const Dn=K(pn,Zt);Sx(this.wallVertexArray,Q.joinNormals[pn],!Dn)}rt.vertexLength++,this.footprintVertices.emplaceBack(en.x,en.y),ct.push(en.x,en.y),L&&Ex(this.layoutVertexExtArray,O.projectTilePoint(Sn.x,Sn.y,_),O.upVector(_,Sn.x,Sn.y))}W&&(fe===0||Pe)&&(Yt.length!==0&&Me(Yt,Yt[0])&&Yt.pop(),this.groundEffect.addData(Yt,Ze,R))}const pt=this.wallMode?Q.indices:yx(ct,xt);for(let St=0;St<pt.length;St+=3)this.footprintIndices.emplaceBack(dt.vertexOffset+pt[St+0],dt.vertexOffset+pt[St+1],dt.vertexOffset+pt[St+2]),this.indexArray.emplaceBack(Oe+pt[St],Oe+pt[St+2],Oe+pt[St+1]),rt.primitiveLength++;dt.indexCount+=pt.length,dt.vertexCount+=this.footprintVertices.length-dt.vertexOffset}for(let ct=0;ct<Ae.length;ct++){const xt=Ae[ct];k.startRing(B,xt[0]);let pt=xt.length>4&&I8(xt[xt.length-2],xt[0],xt[1]),St=fe?Eue(xt[xt.length-2],xt[0],xt[1],fe):0;const Zt=[];let Yt,Cn,rn;Cn=xt[1].sub(xt[0])._perp()._unit();let pn=!0;for(let en=1,$n=0;en<xt.length;en++){let Sn=xt[en-1],Dn=xt[en];const Kn=xt[en===xt.length-1?1:en+1];if(k.appendEdge(B,Dn,Sn),v4(Dn,Sn,Ze)){fe&&(Cn=Kn.sub(Dn)._perp()._unit(),pn=!pn);continue}const pr=Dn.sub(Sn)._perp(),tr=pr.x/(Math.abs(pr.x)+Math.abs(pr.y)),xr=pr.y>0?1:0,fr=Sn.dist(Dn);if($n+fr>32768&&($n=0),fe){rn=Kn.sub(Dn)._perp()._unit();let Qn=A8(Sn,Dn,Kn,M8(Cn,rn),fe);isNaN(Qn)&&(Qn=0);const Pr=Dn.sub(Sn)._unit();Sn=Sn.add(Pr.mult(St))._round(),Dn=Dn.add(Pr.mult(-Qn))._round(),St=Qn,Cn=rn,W&&this.zoom>=17&&(Me(Zt,Sn)||Zt.push(Sn),Me(Zt,Dn)||Zt.push(Dn))}const Er=rt.vertexLength,$r=xt.length>4&&I8(Sn,Dn,Kn);let bi=P8($n,pt,pn);if(wx(this.layoutVertexArray,Sn.x,Sn.y,tr,xr,0,0,bi),wx(this.layoutVertexArray,Sn.x,Sn.y,tr,xr,0,1,bi),this.wallMode){const Qn=K(en-1,xt),Pr=Q.joinNormals[en-1];Sx(this.wallVertexArray,Pr,Qn),Sx(this.wallVertexArray,Pr,Qn)}if($n+=fr,bi=P8($n,$r,!pn),pt=$r,wx(this.layoutVertexArray,Dn.x,Dn.y,tr,xr,0,0,bi),wx(this.layoutVertexArray,Dn.x,Dn.y,tr,xr,0,1,bi),this.wallMode){const Qn=K(en,xt),Pr=Q.joinNormals[en];Sx(this.wallVertexArray,Pr,Qn),Sx(this.wallVertexArray,Pr,Qn)}if(rt.vertexLength+=4,this.indexArray.emplaceBack(Er+0,Er+1,Er+2),this.indexArray.emplaceBack(Er+1,Er+3,Er+2),rt.primitiveLength+=2,fe){const Qn=Oe+(en===1?xt.length-2:en-2),Pr=en===1?Oe:Qn+1;if(this.indexArray.emplaceBack(Er+1,Qn,Er+3),this.indexArray.emplaceBack(Qn,Pr,Er+3),rt.primitiveLength+=2,Yt===void 0&&(Yt=Er),!v4(Kn,xt[en],Ze)){const Ni=en===xt.length-1?Yt:rt.vertexLength;this.indexArray.emplaceBack(Er+2,Er+3,Ni),this.indexArray.emplaceBack(Er+3,Ni+1,Ni),this.indexArray.emplaceBack(Er+3,Pr,Ni+1),rt.primitiveLength+=3}pn=!pn}if(L){const Qn=this.layoutVertexExtArray,Pr=O.projectTilePoint(Sn.x,Sn.y,_),Ni=O.projectTilePoint(Dn.x,Dn.y,_),Wi=O.upVector(_,Sn.x,Sn.y),Zi=O.upVector(_,Dn.x,Dn.y);Ex(Qn,Pr,Wi),Ex(Qn,Pr,Wi),Ex(Qn,Ni,Zi),Ex(Qn,Ni,Zi)}}D&&(Oe+=xt.length-1),W&&fe&&this.zoom>=17&&(Zt.length!==0&&Me(Zt,Zt[0])&&Zt.pop(),this.groundEffect.addData(Zt,Ze,R,fe>0))}this.footprintSegments.push(dt),et.triangleCount=this.indexArray.length-et.triangleArrayOffset,this.polygonSegments.push(et),++B.footprintSegLen,++B.polygonSegLen}if(B.vertexCount=this.layoutVertexArray.length-B.vertexArrayOffset,B.groundVertexCount=this.groundEffect.vertexArray.length-B.groundVertexArrayOffset,B.vertexCount!==0){if(B.centroidXY=k.borders?b8:this.encodeCentroid(k,B),this.centroidData.push(B),k.borders){this.featuresOnBorder.push(k);const Ae=this.featuresOnBorder.length-1;for(let Ze=0;Ze<k.borders.length;Ze++)k.borders[Ze][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Ze].push(Ae)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,m,b,_,P),this.groundEffect.addPaintPropertiesData(a,p,m,b,_,P),this.maxHeight=Math.max(this.maxHeight,G)}}sortBorders(){for(let a=0;a<this.borderFeatureIndices.length;a++)this.borderFeatureIndices[a].sort(((u,p)=>this.featuresOnBorder[u].borders[a][0]-this.featuresOnBorder[p].borders[a][0]))}splitToSubtiles(){const a=[];for(let M=0;M<this.centroidData.length;M++){const P=this.centroidData[M],R=+(P.min.y+P.max.y>gn),E=2*R+(+(P.min.x+P.max.x>gn)^R);for(let O=0;O<P.polygonSegLen;O++){const L=P.polygonSegIdx+O;a.push({centroidIdx:M,subtile:E,polygonSegmentIdx:L,triangleSegmentIdx:this.polygonSegments[L].triangleSegIdx})}}const u=new yo;a.sort(((M,P)=>M.triangleSegmentIdx===P.triangleSegmentIdx?M.subtile-P.subtile:M.triangleSegmentIdx-P.triangleSegmentIdx));let p=0,_=0,m=0;for(const M of a){if(M.triangleSegmentIdx!==p)break;m++}const b=a.length;for(;_!==a.length;){p=a[_].triangleSegmentIdx;let M=0,P=_,R=_;for(let E=P;E<m&&a[E].subtile===M;E++)R++;for(;P!==m;){const E=a[P];M=E.subtile;const O=this.centroidData[E.centroidIdx].min.clone(),L=this.centroidData[E.centroidIdx].max.clone(),D={vertexOffset:this.segments.segments[p].vertexOffset,primitiveOffset:u.length,vertexLength:this.segments.segments[p].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let k=P;k<R;k++){const B=a[k],W=this.polygonSegments[B.polygonSegmentIdx],G=this.centroidData[B.centroidIdx].min,Q=this.centroidData[B.centroidIdx].max,K=this.indexArray.uint16;for(let Z=W.triangleArrayOffset;Z<W.triangleArrayOffset+W.triangleCount;Z++)u.emplaceBack(K[3*Z],K[3*Z+1],K[3*Z+2]);D.primitiveLength+=W.triangleCount,O.x=Math.min(O.x,G.x),O.y=Math.min(O.y,G.y),L.x=Math.max(L.x,Q.x),L.y=Math.max(L.y,Q.y)}D.primitiveLength>0&&this.triangleSubSegments.push({segment:D,min:O,max:L}),P=R;for(let k=P;k<m&&a[k].subtile===a[P].subtile;k++)R++}_=m;for(let E=_;E<b&&a[E].triangleSegmentIdx===a[_].triangleSegmentIdx;E++)m++}u._trim(),this.indexArray=u}getVisibleSegments(a,u,p){const _=new Bi;if(this.wallMode){for(const B of this.triangleSubSegments)_.segments.push(B.segment);return _}let m=0,b=0;const M=1<<a.canonical.z;if(u){const B=u.getMinMaxForTile(a);B&&(m=B.min,b=B.max)}b+=this.maxHeight;const P=a.toUnwrapped();let R;const E=[P.canonical.x/M+P.wrap,P.canonical.y/M],O=[(P.canonical.x+1)/M+P.wrap,(P.canonical.y+1)/M],L=(B,W,G)=>[B[0]*(1-G[0])+W[0]*G[0],B[1]*(1-G[1])+W[1]*G[1]],D=[],k=[];for(const B of this.triangleSubSegments){D[0]=B.min.x/gn,D[1]=B.min.y/gn,k[0]=B.max.x/gn,k[1]=B.max.y/gn;const W=L(E,O,D),G=L(E,O,k);if(new kn([W[0],W[1],m],[G[0],G[1],b]).intersectsPrecise(p)===0){R&&(_.segments.push(R),R=void 0);continue}const Q=B.segment;R&&R.vertexOffset!==Q.vertexOffset&&(_.segments.push(R),R=void 0),R?(R.vertexLength+=Q.vertexLength,R.primitiveLength+=Q.primitiveLength):R={vertexOffset:Q.vertexOffset,primitiveLength:Q.primitiveLength,vertexLength:Q.vertexLength,primitiveOffset:Q.primitiveOffset,sortKey:void 0,vaos:{}}}return R&&_.segments.push(R),_}encodeCentroid(a,u){const p=a.centroid(),_=u.span(),m=Math.min(7,Math.round(_.x*this.tileToMeter/10)),b=Math.min(7,Math.round(_.y*this.tileToMeter/10));return new ge($e(p.x,1,gn-1)<<3|m,$e(p.y,1,gn-1)<<3|b)}encodeBorderCentroid(a){if(!a.borders)return new ge(0,0);const u=a.borders,p=Number.MAX_VALUE;if(u[0][0]!==p||u[1][0]!==p){const _=u[0][0]!==p?0:1;return new ge(6|(u[0][0]!==p?0:65528),(u[_][0]+u[_][1])/2<<3|6)}{const _=u[2][0]!==p?2:3;return new ge((u[_][0]+u[_][1])/2<<3|6,6|(u[2][0]!==p?0:65528))}}showCentroid(a){const u=this.centroidData[a.centroidDataIndex];u.flags&=xp,u.centroidXY.x=0,u.centroidXY.y=0,this.writeCentroidToBuffer(u)}writeCentroidToBuffer(a){this.groundEffect.updateHiddenByLandmark(a);const u=a.vertexArrayOffset,p=a.vertexCount+a.vertexArrayOffset,_=a.flags&xp?b8:a.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(u);if(this.centroidVertexArray.geta_centroid_pos1(u)!==_.y||m!==_.x){for(let b=u;b<p;++b)this.centroidVertexArray.emplace(b,_.x,_.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const a of this.centroidData)this.writeCentroidToBuffer(a)}updateReplacement(a,u,p){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const _=u.getReplacementRegionsForTile(a.toUnwrapped());if(g4(this.activeReplacements,_))return;if(this.activeReplacements=_,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const b of this.centroidData)b.flags&=2147483647;const m=[];for(const b of this.activeReplacements){if(b.order<p)continue;const M=Math.max(1,Math.pow(2,b.footprintTileId.canonical.z-a.canonical.z));for(const P of this.centroidData)if(!(P.flags&xp||b.min.x>P.max.x||P.min.x>b.max.x||b.min.y>P.max.y||P.min.y>b.max.y))for(let R=0;R<P.footprintSegLen;R++){const E=this.footprintSegments[P.footprintSegIdx+R];if(m.length=0,Tue(this.footprintVertices,E.vertexOffset,E.vertexCount,b.footprintTileId.canonical,a.canonical,m),m8(b.footprint,m,this.footprintIndices.uint16,E.indexOffset,E.indexCount,-E.vertexOffset,-M)){P.flags|=xp;break}}}for(const b of this.centroidData)this.writeCentroidToBuffer(b);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(a,u,p){let _=!1;for(let m=0;m<p.footprintSegLen;m++){const b=this.footprintSegments[p.footprintSegIdx+m];let M=0;for(const P of b.ringIndices){for(let R=M,E=P+M-1;R<P+M;E=R++){const O=this.footprintVertices.int16[2*(R+b.vertexOffset)+0],L=this.footprintVertices.int16[2*(R+b.vertexOffset)+1],D=this.footprintVertices.int16[2*(E+b.vertexOffset)+1];L>u!=D>u&&a<(this.footprintVertices.int16[2*(E+b.vertexOffset)+0]-O)*(u-L)/(D-L)+O&&(_=!_)}M=P}}return _}getHeightAtTileCoord(a,u){let p=Number.NEGATIVE_INFINITY,_=!0;const m=4*(a+gn)*gn+(u+gn);if(this.partLookup.hasOwnProperty(m)){const b=this.partLookup[m];return b?{height:b.height,hidden:!!(b.flags&xp)}:void 0}for(const b of this.centroidData)a>b.max.x||b.min.x>a||u>b.max.y||b.min.y>u||this.footprintContainsPoint(a,u,b)&&b&&b.height>p&&(p=b.height,this.partLookup[m]=b,_=!!(b.flags&xp));if(p!==Number.NEGATIVE_INFINITY)return{height:p,hidden:_};this.partLookup[m]=void 0}}function M8(h,a){const u=h.add(a)._unit();return h.x*u.x+h.y*u.y}function Eue(h,a,u,p){const _=a.sub(h)._perp()._unit(),m=u.sub(a)._perp()._unit();return A8(h,a,u,M8(_,m),p)}function A8(h,a,u,p,_){const m=Math.sqrt(1-p*p);return Math.min(h.dist(a)/3,a.dist(u)/3,_*m/p)}function v4(h,a,u){return h.x<u[0].x&&a.x<u[0].x||h.x>u[1].x&&a.x>u[1].x||h.y<u[0].y&&a.y<u[0].y||h.y>u[1].y&&a.y>u[1].y}function C8(h,a){return h.x<a[0].x||h.x>a[1].x||h.y<a[0].y||h.y>a[1].y}function I8(h,a,u){if(h.x<0||h.x>=gn||a.x<0||a.x>=gn||u.x<0||u.x>=gn)return!1;const p=u.sub(a),_=p.perp(),m=h.sub(a);return(p.x*m.x+p.y*m.y)/Math.sqrt((p.x*p.x+p.y*p.y)*(m.x*m.x+m.y*m.y))>-.866&&_.x*m.x+_.y*m.y<0}function P8(h,a,u){const p=a?2|h:-3&h;return u?1|p:-2&p}function O8(){const h=Math.PI/32,a=Math.tan(h),u=bh;return u*Math.sqrt(1+2*a*a)-u}function D8(h,a,u){const p=1<<u.z,_=Oa(u.x/p),m=Oa((u.x+1)/p),b=vo(u.y/p),M=vo((u.y+1)/p);return(function(P,R,E,O,L=0,D){const k=[];if(!P.length||!E||!O)return k;const B=(ce,fe)=>{for(const Pe of ce)k.push({polygon:Pe,bounds:fe})},W=Math.ceil(Math.log2(E)),G=Math.ceil(Math.log2(O)),Q=W-G,K=[];for(let ce=0;ce<Math.abs(Q);ce++)K.push(Q>0?0:1);for(let ce=0;ce<Math.min(W,G);ce++)K.push(0),K.push(1);let Z=P;if(Z=vT(Z,R[0].y-L,R[1].y+L,1),Z=vT(Z,R[0].x-L,R[1].x+L,0),!Z.length)return k;const re=[];for(K.length?re.push({polygons:Z,bounds:R,depth:0}):B(Z,R);re.length;){const ce=re.pop(),fe=ce.depth,Pe=K[fe],Me=ce.bounds[0],Ae=ce.bounds[1],Ze=Pe===0?Me.x:Me.y,Oe=Pe===0?Ae.x:Ae.y,Je=D?D(Pe,Ze,Oe):.5*(Ze+Oe),rt=vT(ce.polygons,Ze-L,Je+L,Pe),et=vT(ce.polygons,Je-L,Oe+L,Pe);if(rt.length){const dt=[Me,new ge(Pe===0?Je:Ae.x,Pe===1?Je:Ae.y)];K.length>fe+1?re.push({polygons:rt,bounds:dt,depth:fe+1}):B(rt,dt)}if(et.length){const dt=[new ge(Pe===0?Je:Me.x,Pe===1?Je:Me.y),Ae];K.length>fe+1?re.push({polygons:et,bounds:dt,depth:fe+1}):B(et,dt)}}return k})(h,a,Math.ceil((m-_)/11.25),Math.ceil((b-M)/11.25),1,((P,R,E)=>{if(P===0)return .5*(R+E);{const O=vo((u.y+R/gn)/p);return(Oo(.5*(vo((u.y+E/gn)/p)+O))*p-u.y)*gn}}))}function Tue(h,a,u,p,_,m){const b=Math.pow(2,p.z-_.z);for(let M=0;M<u;M++){let P=h.int16[2*(M+a)+0],R=h.int16[2*(M+a)+1];P=(P+_.x*gn)*b-p.x*gn,R=(R+_.y*gn)*b-p.y*gn,m.push(new ge(P,R))}}let R8,k8;function Tx(h,a){return h.x*a.x+h.y*a.y}function L8(h,a){if(h.length===1){let u=0;const p=a[u++];let _;for(;!_||p.equals(_);)if(_=a[u++],!_)return 1/0;for(;u<a.length;u++){const m=a[u],b=h[0],M=_.sub(p),P=m.sub(p),R=b.sub(p),E=Tx(M,M),O=Tx(M,P),L=Tx(P,P),D=Tx(R,M),k=Tx(R,P),B=E*L-O*O,W=(L*D-O*k)/B,G=(E*k-O*D)/B,Q=p.z*(1-W-G)+_.z*W+m.z*G;if(isFinite(Q))return Q}return 1/0}{let u=1/0;for(const p of a)u=Math.min(u,p.z);return u}}function N8(h,a,u,p,_,m,b,M){const P=b*_.getElevationAt(h,a,!0,!0),R=m[0]!==0,E=R?m[1]===0?b*(m[0]/7-450):b*(function(O,L,D){const k=Math.floor(L[0]/8),B=Math.floor(L[1]/8),W=10*(L[0]-8*k),G=10*(L[1]-8*B),Q=O.getElevationAt(k,B,!0,!0),K=O.getMeterToDEM(D),Z=Math.floor(.5*(W*K-1)),re=Math.floor(.5*(G*K-1)),ce=O.tileCoordToPixel(k,B),fe=2*Z+1,Pe=2*re+1,Me=(function(et,dt,ct,xt,pt){return[et.getElevationAtPixel(dt,ct,!0),et.getElevationAtPixel(dt+pt,ct,!0),et.getElevationAtPixel(dt,ct+pt,!0),et.getElevationAtPixel(dt+xt,ct+pt,!0)]})(O,ce.x-Z,ce.y-re,fe,Pe),Ae=Math.abs(Me[0]-Me[1]),Ze=Math.abs(Me[2]-Me[3]),Oe=Math.abs(Me[0]-Me[2])+Math.abs(Me[1]-Me[3]),Je=Math.min(.25,.5*K*(Ae+Ze)/fe),rt=Math.min(.25,.5*K*Oe/Pe);return Q+Math.max(Je*W,rt*G)})(_,m,M):P;return{base:P+(u===0?-1:u),top:R?Math.max(E+p,P+u+2):P+p}}An(ST,"FillExtrusionBucket",{omit:["layers","features"]}),An(w8,"PartData"),An(x8,"FootprintSegment"),An(S8,"BorderCentroidData"),An(T8,"GroundEffect");const Mue=Gr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),Aue=Gr([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:Cue}=Mue,Iue=Gr([{name:"a_packed",components:3,type:"Float32"}]),{members:Pue}=Iue,Oue=Gr([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:Due}=Oue;class F8{constructor(a,u){this.width=a,this.height=u,this.nextRow=0,this.image=new vp({width:a,height:u}),this.positions={},this.uploaded=!1}getDash(a,u){const p=this.getKey(a,u);return this.positions[p]}trim(){const a=this.width,u=this.height=Ve(this.nextRow);this.image.resize({width:a,height:u})}getKey(a,u){return a.join(",")+u}getDashRanges(a,u,p){const _=[];let m=a.length%2==1?-a[a.length-1]*p:0,b=a[0]*p,M=!0;_.push({left:m,right:b,isDash:M,zeroLength:a[0]===0});let P=a[0];for(let R=1;R<a.length;R++){M=!M;const E=a[R];m=P*p,P+=E,b=P*p,_.push({left:m,right:b,isDash:M,zeroLength:E===0})}return _}addRoundDash(a,u,p){const _=u/2;for(let m=-p;m<=p;m++){const b=this.width*(this.nextRow+p+m);let M=0,P=a[M];for(let R=0;R<this.width;R++){R/P.right>1&&(P=a[++M]);const E=Math.abs(R-P.left),O=Math.abs(R-P.right),L=Math.min(E,O);let D;const k=m/p*(_+1);if(P.isDash){const B=_-Math.abs(k);D=Math.sqrt(L*L+B*B)}else D=_-Math.sqrt(L*L+k*k);this.image.data[b+R]=Math.max(0,Math.min(255,D+128))}}}addRegularDash(a,u){for(let P=a.length-1;P>=0;--P){const R=a[P],E=a[P+1];R.zeroLength?a.splice(P,1):E&&E.isDash===R.isDash&&(E.left=R.left,a.splice(P,1))}const p=a[0],_=a[a.length-1];p.isDash===_.isDash&&(p.left=_.left-this.width,_.right=p.right+this.width);const m=this.width*this.nextRow;let b=0,M=a[b];for(let P=0;P<this.width;P++){P/M.right>1&&(M=a[++b]);const R=Math.abs(P-M.left),E=Math.abs(P-M.right),O=Math.min(R,E);this.image.data[m+P]=Math.max(0,Math.min(255,(M.isDash?O:-O)+u+128))}}addDash(a,u){const p=this.getKey(a,u);if(this.positions[p])return this.positions[p];const _=u==="round",m=_?7:0,b=2*m+1;if(this.nextRow+b>this.height)return Te("LineAtlas out of space"),null;a.length===0&&a.push(1);let M=0;for(let E=0;E<a.length;E++)a[E]<0&&(Te("Negative value is found in line dasharray, replacing values with 0"),a[E]=0),M+=a[E];if(M!==0){const E=this.width/M,O=this.getDashRanges(a,this.width,E);_?this.addRoundDash(O,E,m):this.addRegularDash(O,u==="square"?.5*E:0)}const P=this.nextRow+m;this.nextRow+=b;const R={tl:[P,m],br:[M,0]};return this.positions[p]=R,R}}An(F8,"LineAtlas");const Rue=bp.VectorTileFeature.types,kue=Math.cos(Math.PI/180*37.5),Lue=Math.cos(Math.PI/180*5);class b4{constructor(a){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=a.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=a.overscaling,this.pixelRatio=a.pixelRatio,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.fqid)),this.index=a.index,this.projection=a.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((u=>{this.gradients[u.id]={}})),this.layoutVertexArray=new Kb,this.layoutVertexArray2=new cc,this.patternVertexArray=new cc,this.indexArray=new yo,this.programConfigurations=new wd(a.layers,{zoom:a.zoom,lut:a.lut}),this.segments=new Bi,this.maxLineLength=0,this.zOffsetVertexArray=new cc,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id)),this.tessellationStep=a.tessellationStep?a.tessellationStep:gn/64}updateFootprints(a,u){}populate(a,u,p,_){this.hasPattern=o4("line",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("line-sort-key");this.tileToMeter=v(p);const b=this.layers[0].layout.get("line-z-offset"),M=b.isConstant()&&!b.constantOr(0),P=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset=P==="sea"||P==="ground"||!M&&P==="none",this.hasZOffset&&P==="none"&&Te(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const R=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&R!==void 0;const E=[];for(const{feature:k,id:B,index:W,sourceLayerIndex:G}of a){const Q=this.layers[0]._featureFilter.needGeometry,K=H(k,Q);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),K,p))continue;const Z=m?m.evaluate(K,{},p):void 0,re={id:B,properties:k.properties,type:k.type,sourceLayerIndex:G,index:W,geometry:Q?K.geometry:U(k,p,_),patterns:{},sortKey:Z};E.push(re)}m&&E.sort(((k,B)=>k.sortKey-B.sortKey));const{lineAtlas:O,featureIndex:L}=u,D=this.addConstantDashes(O);for(const k of E){const{geometry:B,index:W,sourceLayerIndex:G}=k;if(D&&this.addFeatureDashes(k,O),this.hasPattern){const Q=a4("line",this.layers,k,this.zoom,this.pixelRatio,u);this.patternFeatures.push(Q)}else this.addFeature(k,B,W,p,O.positions,u.availableImages,u.brightness);L.insert(a[W].feature,B,W,G,this.index)}}addConstantDashes(a){let u=!1;for(const p of this.layers){const _=p.paint.get("line-dasharray").value,m=p.layout.get("line-cap").value;if(_.kind!=="constant"||m.kind!=="constant")u=!0;else{const b=m.value,M=_.value;if(!M)continue;a.addDash(M,b)}}return u}addFeatureDashes(a,u){const p=this.zoom;for(const _ of this.layers){const m=_.paint.get("line-dasharray").value,b=_.layout.get("line-cap").value;if(m.kind==="constant"&&b.kind==="constant")continue;let M,P;if(m.kind==="constant"){if(M=m.value,!M)continue}else M=m.evaluate({zoom:p},a);P=b.kind==="constant"?b.value:b.evaluate({zoom:p},a),u.addDash(M,P),a.patterns[_.id]=u.getKey(M,P)}}update(a,u,p,_,m,b,M){this.programConfigurations.updatePaintArrays(a,u,m,p,_,b,M)}addFeatures(a,u,p,_,m,b){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,u,p,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,Pue)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=a.createVertexBuffer(this.patternVertexArray,Due)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=a.createVertexBuffer(this.zOffsetVertexArray,Aue.members,!0)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Cue),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,u,p,_,m,b,M){const P=this.layers[0].layout,R=P.get("line-join").evaluate(a,{}),E=P.get("line-cap").evaluate(a,{}),O=P.get("line-miter-limit"),L=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(a),this.lineFeature=a,this.zOffsetValue=P.get("line-z-offset").value;const D=this.layers[0].paint.get("line-width").value;D.kind!=="constant"&&D.isLineProgressConstant===!1&&(this.variableWidthValue=D);for(const k of u)this.addLine(k,a,_,R,E,O,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,m,b,_,M)}addLine(a,u,p,_,m,b,M){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const P=_==="none";if(this.patternJoinNone=this.hasPattern&&P,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let K=0;K<a.length-1;K++)this.totalDistance+=a[K].dist(a[K+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=Rue[u.type]==="Polygon";let E=a.length;for(;E>=2&&a[E-1].equals(a[E-2]);)E--;let O=0;for(;O<E-1&&a[O].equals(a[O+1]);)O++;if(E<(R?3:2))return;_==="bevel"&&(b=1.05);const L=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let D,k,B,W,G,Q;this.e1=this.e2=-1,R&&(D=a[E-2],G=a[O].sub(D)._unit()._perp());for(let K=O;K<E;K++){if(B=K===E-1?R?a[O+1]:void 0:a[K+1],B&&a[K].equals(B))continue;G&&(W=G),D&&(k=D),D=a[K],Q=this.evaluateLineProgressFeatures(k?k.dist(D):0),G=B?B.sub(D)._unit()._perp():W,W=W||G;const Z=k&&B;let re=Z?_:R||P?"butt":m;const ce=W.x*G.x+W.y*G.y;if(P){const rt=function(et){if(et.patternJoinNone){const dt=et.segmentPoints.length/2,ct=et.lineSoFar-et.segmentStart;for(let xt=0;xt<dt;++xt){const pt=et.segmentPoints[2*xt+1],St=Math.round(et.segmentPoints[2*xt])+.5+.25*pt;et.patternVertexArray.emplaceBack(St,ct,et.segmentStart),et.patternVertexArray.emplaceBack(St,ct,et.segmentStart)}et.segmentPoints.length=0}et.e1=et.e2=-1};if(Z&&ce<Lue){this.updateDistance(k,D),this.addCurrentVertex(D,W,1,1,L,Q),rt(this),this.addCurrentVertex(D,G,-1,-1,L,Q);continue}if(k){if(!B){this.updateDistance(k,D),this.addCurrentVertex(D,W,1,1,L,Q),rt(this);continue}re="miter"}}let fe=W.add(G);fe.x===0&&fe.y===0||fe._unit();const Pe=fe.x*G.x+fe.y*G.y,Me=Pe!==0?1/Pe:1/0,Ae=2*Math.sqrt(2-2*Pe),Ze=Pe<kue&&k&&B,Oe=W.x*G.y-W.y*G.x>0,Je=this.overscaling<=16?15*gn/(512*this.overscaling):0;if(Z&&re==="round"){if(Me<M)re="miter";else if(Me<=2){const rt=x4(D,-10,gn+10);re=this.hasZOffset&&(rt||this.hasCrossSlope)?"miter":"fakeround"}}if(re==="miter"&&Me>b&&(re="bevel"),re==="bevel"&&(Me>2&&(re="flipbevel"),Me<b&&(re="miter")),k&&!(re==="miter"&&Ze)&&this.updateDistance(k,D),re==="miter")if(Ze){const rt=D.dist(k);if(rt>2*Je){const dt=D.sub(D.sub(k)._mult(Je/rt)._round());this.updateDistance(k,dt),this.addCurrentVertex(dt,W,0,0,L,Q),k=dt}this.updateDistance(k,D),fe._mult(Me),this.addCurrentVertex(D,fe,0,0,L,Q);const et=D.dist(B);if(et>2*Je){const dt=D.add(B.sub(D)._mult(Je/et)._round());this.updateDistance(D,dt),this.addCurrentVertex(dt,G,0,0,L,Q),D=dt}}else fe._mult(Me),this.addCurrentVertex(D,fe,0,0,L,Q);else if(re==="flipbevel"){if(Me>100)fe=G.mult(-1);else{const rt=Me*W.add(G).mag()/W.sub(G).mag();fe._perp()._mult(rt*(Oe?-1:1))}this.addCurrentVertex(D,fe,0,0,L,Q),this.addCurrentVertex(D,fe.mult(-1),0,0,L,Q)}else if(re==="bevel"||re==="fakeround"){Q!=null&&k&&this.addCurrentVertex(D,W,-1,-1,L,Q);const rt=D.dist(k)<=2*Je&&re!=="bevel",et=fe.mult(Oe?1:-1);et._mult(Me);const dt=G.mult(Oe?-1:1),ct=W.mult(Oe?-1:1),xt=this.evaluateLineProgressFeatures(this.distance);if(Q==null&&(this.addHalfVertex(D,et.x,et.y,!1,!Oe,0,L,xt),rt||this.addHalfVertex(D,et.x+2*ct.x,et.y+2*ct.y,!1,Oe,0,L,xt)),re==="fakeround"){const pt=Math.round(180*Ae/Math.PI/20);this.addHalfVertex(D,ct.x,ct.y,!1,Oe,0,L,xt);for(let St=0;St<pt;St++){let Zt=St/pt;if(Zt!==.5){const Cn=Zt-.5;Zt+=Zt*Cn*(Zt-1)*((1.0904+ce*(ce*(3.55645-1.43519*ce)-3.2452))*Cn*Cn+(.848013+ce*(.215638*ce-1.06021)))}const Yt=dt.sub(ct)._mult(Zt)._add(ct)._unit();this.addHalfVertex(D,Yt.x,Yt.y,!1,Oe,0,L,xt)}this.addHalfVertex(D,dt.x,dt.y,!1,Oe,0,L,xt)}rt||Q!=null||this.addHalfVertex(D,et.x+2*dt.x,et.y+2*dt.y,!1,Oe,0,L,xt),Q!=null&&B&&this.addCurrentVertex(D,G,1,1,L,Q)}else re==="butt"?this.addCurrentVertex(D,fe,0,0,L,Q):re==="square"?(k||this.addCurrentVertex(D,fe,-1,-1,L,Q),this.addCurrentVertex(D,fe,0,0,L,Q),k&&this.addCurrentVertex(D,fe,1,1,L,Q)):re==="round"&&(k&&(this.addCurrentVertex(D,W,0,0,L,Q),this.addCurrentVertex(D,W,1,1,L,Q,!0)),B&&(this.addCurrentVertex(D,G,-1,-1,L,Q,!0),this.addCurrentVertex(D,G,0,0,L,Q)))}}addVerticesTo(a,u,p,_,m,b,M,P,R,E){const O=(u.w-a.w)/this.tessellationStep|0;let L=0;const D=this.scaledDistance;if(O>1){this.lineSoFar=a.w;const B=(u.x-a.x)/O,W=(u.y-a.y)/O,G=(u.z-a.z)/O,Q=(u.w-a.w)/O;for(let K=1;K<O;++K){a.x+=B,a.y+=W,a.z+=G,this.lineSoFar+=Q,L+=Q;const Z=this.evaluateLineProgressFeatures(this.prevDistance+L);this.scaledDistance=(this.prevDistance+L)/this.totalDistance,this.addHalfVertex(a,p,_,E,!1,M,R,Z),this.addHalfVertex(a,m,b,E,!0,-P,R,Z)}}this.lineSoFar=u.w,this.scaledDistance=D;const k=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(u,p,_,E,!1,M,R,k),this.addHalfVertex(u,m,b,E,!0,-P,R,k)}evaluateLineProgressFeatures(a){if(!this.variableWidthValue&&!this.hasZOffset)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+a)/this.totalFeatureLength):Te(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let u=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(u=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.hasZOffset?this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:u}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:u}:{zOffset:0,variableWidth:u}}addCurrentVertex(a,u,p,_,m,b,M=!1){const P=u.x+u.y*p,R=u.y-u.x*p,E=u.y*_-u.x,O=-u.y-u.x*_;if(b!=null){const L=this.hasZOffset,D=-10,k=gn+10,B=b.zOffset,W=new c8(a.x,a.y,B,this.lineSoFar),G=!!L&&x4(a,D,k),Q=this.lineSoFar,K=this.distance;if(this.currentVertex)if(G){const Z=this.currentVertexIsOutside,re=this.currentVertex,ce=new c8(a.x,a.y,B,this.lineSoFar);if(d8(re,ce,D,k),!x4(ce,D,k)){if(Z){this.e1=this.e2=-1,this.distance-=re.dist(W),this.lineSoFar=re.w;const fe=this.evaluateLineProgressFeatures(re.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(re,P,R,M,!1,p,m,fe),this.addHalfVertex(re,E,O,M,!0,-_,m,fe),this.prevDistance=this.distance}this.distance=this.prevDistance+re.dist(ce),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(re,ce,P,R,E,O,p,_,m,M),this.distance=K,this.scaledDistance=this.distance/this.totalDistance}}else{const Z=this.currentVertex;if(this.currentVertexIsOutside){d8(Z,W,D,k),this.e1=this.e2=-1,this.distance-=Z.dist(W),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=Z.w;const re=this.evaluateLineProgressFeatures(Z.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(Z,P,R,M,!1,p,m,re),this.addHalfVertex(Z,E,O,M,!0,-_,m,re),this.prevDistance=this.distance,this.distance=K,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(Z,W,P,R,E,O,p,_,m,M)}else G||(this.addHalfVertex(a,P,R,M,!1,p,m,b),this.addHalfVertex(a,E,O,M,!0,-_,m,b));this.currentVertex=W,this.currentVertexIsOutside=G,this.lineSoFar=Q}else this.addHalfVertex(a,P,R,M,!1,p,m,b),this.addHalfVertex(a,E,O,M,!0,-_,m,b)}addHalfVertex({x:a,y:u},p,_,m,b,M,P,R){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),b||this.segmentPoints.push(this.lineSoFar-this.segmentStart,M)),this.layoutVertexArray.emplaceBack((a<<1)+(m?1:0),(u<<1)+(b?1:0),Math.round(63*p)+128,Math.round(63*_)+128,1+(M===0?0:M<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const O=jn(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,O)}const E=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,E),P.primitiveLength++),b?this.e2=E:this.e1=E,R!=null&&this.zOffsetVertexArray.emplaceBack(R.zOffset,R.variableWidth,R.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(a,u){this.prevDistance=this.distance,this.distance+=a.dist(u),this.updateScaledDistance()}}function x4(h,a,u){return h.x<a||h.x>u||h.y<a||h.y>u}let z8,B8;function $8(h,a,u){return a*(gn/(h.tileSize*Math.pow(2,u-h.tileID.overscaledZ)))}An(b4,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const V8=(h,a,u)=>(1-u)*h+u*a;function j8(h,a){return 1/$8(h,1,a.tileZoom)}function U8(h,a,u,p){return h.translatePosMatrix(p||a.tileID.projMatrix,a,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const H8=h=>{const a=[];W8(h)&&a.push("RENDER_LINE_DASH"),h.paint.get("line-gradient")&&a.push("RENDER_LINE_GRADIENT");const u=h.paint.get("line-trim-offset");u[0]===0&&u[1]===0||a.push("RENDER_LINE_TRIM_OFFSET"),h.paint.get("line-border-width").constantOr(1)!==0&&a.push("RENDER_LINE_BORDER");const p=h.layout.get("line-join").constantOr("miter")==="none",_=!!h.paint.get("line-pattern").constantOr(1);return p&&_&&a.push("LINE_JOIN_NONE"),a};function W8(h){const a=h.paint.get("line-dasharray").value;return a.value||a.kind!=="constant"}let w4;const G8=()=>w4||(w4={layout:z8||(z8=new Xi({"line-cap":new Mn(Tt.layout_line["line-cap"]),"line-join":new Mn(Tt.layout_line["line-join"]),"line-miter-limit":new hn(Tt.layout_line["line-miter-limit"]),"line-round-limit":new hn(Tt.layout_line["line-round-limit"]),"line-sort-key":new Mn(Tt.layout_line["line-sort-key"]),"line-z-offset":new Mn(Tt.layout_line["line-z-offset"]),"line-elevation-reference":new hn(Tt.layout_line["line-elevation-reference"]),"line-cross-slope":new hn(Tt.layout_line["line-cross-slope"]),visibility:new hn(Tt.layout_line.visibility),"line-width-unit":new hn(Tt.layout_line["line-width-unit"])})),paint:B8||(B8=new Xi({"line-opacity":new Mn(Tt.paint_line["line-opacity"]),"line-color":new Mn(Tt.paint_line["line-color"]),"line-translate":new hn(Tt.paint_line["line-translate"]),"line-translate-anchor":new hn(Tt.paint_line["line-translate-anchor"]),"line-width":new Mn(Tt.paint_line["line-width"]),"line-gap-width":new Mn(Tt.paint_line["line-gap-width"]),"line-offset":new Mn(Tt.paint_line["line-offset"]),"line-blur":new Mn(Tt.paint_line["line-blur"]),"line-dasharray":new Mn(Tt.paint_line["line-dasharray"]),"line-pattern":new Mn(Tt.paint_line["line-pattern"]),"line-gradient":new cp(Tt.paint_line["line-gradient"]),"line-trim-offset":new hn(Tt.paint_line["line-trim-offset"]),"line-trim-fade-range":new hn(Tt.paint_line["line-trim-fade-range"]),"line-trim-color":new hn(Tt.paint_line["line-trim-color"]),"line-emissive-strength":new hn(Tt.paint_line["line-emissive-strength"]),"line-border-width":new Mn(Tt.paint_line["line-border-width"]),"line-border-color":new Mn(Tt.paint_line["line-border-color"]),"line-occlusion-opacity":new hn(Tt.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},w4);class Nue extends Mn{possiblyEvaluate(a,u){return u=new vi(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,transition:u.transition}),super.possiblyEvaluate(a,u)}evaluate(a,u,p,_){return u=vn({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(a,u,p,_)}}let Mx;function Y8(h,a){return a>0?a+2*h:h}const Fue=Gr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),zue=Gr([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Bue=Gr([{name:"a_projected_pos",components:4,type:"Float32"}],4);Gr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const $ue=Gr([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),Vue=Gr([{name:"a_texb",components:2,type:"Uint16"}]),jue=Gr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),Uue=Gr([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Gr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const q8=Gr([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Hue=Gr([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Gr([{name:"triangle",components:3,type:"Uint16"}]),Gr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Gr([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),Gr([{type:"Float32",name:"offsetX"}]),Gr([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var ko=24;const Eu=128;function X8(h,a,u,p,_){if(h.kind==="camera")return h.maxSize;if(h.kind==="composite"){const m=a.possiblyEvaluate(new vi(h.maxZoom),u).evaluate(_,{},u),b=a.possiblyEvaluate(new vi(h.minZoom),u).evaluate(_,{},u);return Math.max(m,b)}return a.possiblyEvaluate(new vi(p)).evaluate(_,{},u)}function S4(h,a){const{expression:u}=a;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new vi(h+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:_}=u;let m=0;for(;m<p.length&&p[m]<=h;)m++;m=Math.max(0,m-1);let b=m;for(;b<p.length&&p[b]<h+1;)b++;b=Math.min(p.length-1,b);const M=p[m],P=p[b];return u.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:P,interpolationType:_}:{kind:"camera",minZoom:M,maxZoom:P,minSize:u.evaluate(new vi(M)),maxSize:u.evaluate(new vi(P)),interpolationType:_}}}function ET(h,{uSize:a,uSizeT:u},{lowerSize:p,upperSize:_}){return h.kind==="source"?p/Eu:h.kind==="composite"?jn(p/Eu,_/Eu,u):a}function Mv(h,a,u=1){let p=0,_=0;if(h.kind==="constant")_=h.layoutSize*u;else if(h.kind!=="source"){const{interpolationType:m,minZoom:b,maxZoom:M}=h,P=m?$e(tl.interpolationFactor(m,a,b,M),0,1):0;h.kind==="camera"?_=jn(h.minSize,h.maxSize,P)*u:p=P*u}return{uSizeT:p,uSize:_}}var Wue=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Eu,evaluateSizeForFeature:ET,evaluateSizeForZoom:Mv,getRasterizedIconSize:X8,getSizeData:S4});function Gue(h,a,u){return h.sections.forEach((p=>{p.text=(function(_,m,b){const M=m.layout.get("text-transform").evaluate(b,{});return M==="uppercase"?_=_.toLocaleUpperCase():M==="lowercase"&&(_=_.toLocaleLowerCase()),Ll.applyArabicShaping&&(_=Ll.applyArabicShaping(_)),_})(p.text,a,u)})),h}const Ax={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function Yue(h){return h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""}function que(h){return h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""||h===""}var Z8,E4,K8,T4={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Xue(){return Z8||(Z8=1,T4.read=function(h,a,u,p,_){var m,b,M=8*_-p-1,P=(1<<M)-1,R=P>>1,E=-7,O=u?_-1:0,L=u?-1:1,D=h[a+O];for(O+=L,m=D&(1<<-E)-1,D>>=-E,E+=M;E>0;m=256*m+h[a+O],O+=L,E-=8);for(b=m&(1<<-E)-1,m>>=-E,E+=p;E>0;b=256*b+h[a+O],O+=L,E-=8);if(m===0)m=1-R;else{if(m===P)return b?NaN:1/0*(D?-1:1);b+=Math.pow(2,p),m-=R}return(D?-1:1)*b*Math.pow(2,m-p)},T4.write=function(h,a,u,p,_,m){var b,M,P,R=8*m-_-1,E=(1<<R)-1,O=E>>1,L=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=p?0:m-1,k=p?1:-1,B=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(M=isNaN(a)?1:0,b=E):(b=Math.floor(Math.log(a)/Math.LN2),a*(P=Math.pow(2,-b))<1&&(b--,P*=2),(a+=b+O>=1?L/P:L*Math.pow(2,1-O))*P>=2&&(b++,P/=2),b+O>=E?(M=0,b=E):b+O>=1?(M=(a*P-1)*Math.pow(2,_),b+=O):(M=a*Math.pow(2,O-1)*Math.pow(2,_),b=0));_>=8;h[u+D]=255&M,D+=k,M/=256,_-=8);for(b=b<<_|M,R+=_;R>0;h[u+D]=255&b,D+=k,b/=256,R-=8);h[u+D-k]|=128*B}),T4}function J8(){if(K8)return E4;K8=1,E4=a;var h=Xue();function a(Z){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Z)?Z:new Uint8Array(Z||0),this.pos=0,this.type=0,this.length=this.buf.length}a.Varint=0,a.Fixed64=1,a.Bytes=2,a.Fixed32=5;var u=4294967296,p=1/u,_=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function m(Z){return Z.type===a.Bytes?Z.readVarint()+Z.pos:Z.pos+1}function b(Z,re,ce){return ce?4294967296*re+(Z>>>0):4294967296*(re>>>0)+(Z>>>0)}function M(Z,re,ce){var fe=re<=16383?1:re<=2097151?2:re<=268435455?3:Math.floor(Math.log(re)/(7*Math.LN2));ce.realloc(fe);for(var Pe=ce.pos-1;Pe>=Z;Pe--)ce.buf[Pe+fe]=ce.buf[Pe]}function P(Z,re){for(var ce=0;ce<Z.length;ce++)re.writeVarint(Z[ce])}function R(Z,re){for(var ce=0;ce<Z.length;ce++)re.writeSVarint(Z[ce])}function E(Z,re){for(var ce=0;ce<Z.length;ce++)re.writeFloat(Z[ce])}function O(Z,re){for(var ce=0;ce<Z.length;ce++)re.writeDouble(Z[ce])}function L(Z,re){for(var ce=0;ce<Z.length;ce++)re.writeBoolean(Z[ce])}function D(Z,re){for(var ce=0;ce<Z.length;ce++)re.writeFixed32(Z[ce])}function k(Z,re){for(var ce=0;ce<Z.length;ce++)re.writeSFixed32(Z[ce])}function B(Z,re){for(var ce=0;ce<Z.length;ce++)re.writeFixed64(Z[ce])}function W(Z,re){for(var ce=0;ce<Z.length;ce++)re.writeSFixed64(Z[ce])}function G(Z,re){return(Z[re]|Z[re+1]<<8|Z[re+2]<<16)+16777216*Z[re+3]}function Q(Z,re,ce){Z[ce]=re,Z[ce+1]=re>>>8,Z[ce+2]=re>>>16,Z[ce+3]=re>>>24}function K(Z,re){return(Z[re]|Z[re+1]<<8|Z[re+2]<<16)+(Z[re+3]<<24)}return a.prototype={destroy:function(){this.buf=null},readFields:function(Z,re,ce){for(ce=ce||this.length;this.pos<ce;){var fe=this.readVarint(),Pe=fe>>3,Me=this.pos;this.type=7&fe,Z(Pe,re,this),this.pos===Me&&this.skip(fe)}return re},readMessage:function(Z,re){return this.readFields(Z,re,this.readVarint()+this.pos)},readFixed32:function(){var Z=G(this.buf,this.pos);return this.pos+=4,Z},readSFixed32:function(){var Z=K(this.buf,this.pos);return this.pos+=4,Z},readFixed64:function(){var Z=G(this.buf,this.pos)+G(this.buf,this.pos+4)*u;return this.pos+=8,Z},readSFixed64:function(){var Z=G(this.buf,this.pos)+K(this.buf,this.pos+4)*u;return this.pos+=8,Z},readFloat:function(){var Z=h.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Z},readDouble:function(){var Z=h.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Z},readVarint:function(Z){var re,ce,fe=this.buf;return re=127&(ce=fe[this.pos++]),ce<128?re:(re|=(127&(ce=fe[this.pos++]))<<7,ce<128?re:(re|=(127&(ce=fe[this.pos++]))<<14,ce<128?re:(re|=(127&(ce=fe[this.pos++]))<<21,ce<128?re:(function(Pe,Me,Ae){var Ze,Oe,Je=Ae.buf;if(Ze=(112&(Oe=Je[Ae.pos++]))>>4,Oe<128||(Ze|=(127&(Oe=Je[Ae.pos++]))<<3,Oe<128)||(Ze|=(127&(Oe=Je[Ae.pos++]))<<10,Oe<128)||(Ze|=(127&(Oe=Je[Ae.pos++]))<<17,Oe<128)||(Ze|=(127&(Oe=Je[Ae.pos++]))<<24,Oe<128)||(Ze|=(1&(Oe=Je[Ae.pos++]))<<31,Oe<128))return b(Pe,Ze,Me);throw new Error("Expected varint not more than 10 bytes")})(re|=(15&(ce=fe[this.pos]))<<28,Z,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Z=this.readVarint();return Z%2==1?(Z+1)/-2:Z/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Z=this.readVarint()+this.pos,re=this.pos;return this.pos=Z,Z-re>=12&&_?(function(ce,fe,Pe){return _.decode(ce.subarray(fe,Pe))})(this.buf,re,Z):(function(ce,fe,Pe){for(var Me="",Ae=fe;Ae<Pe;){var Ze,Oe,Je,rt=ce[Ae],et=null,dt=rt>239?4:rt>223?3:rt>191?2:1;if(Ae+dt>Pe)break;dt===1?rt<128&&(et=rt):dt===2?(192&(Ze=ce[Ae+1]))==128&&(et=(31&rt)<<6|63&Ze)<=127&&(et=null):dt===3?(Oe=ce[Ae+2],(192&(Ze=ce[Ae+1]))==128&&(192&Oe)==128&&((et=(15&rt)<<12|(63&Ze)<<6|63&Oe)<=2047||et>=55296&&et<=57343)&&(et=null)):dt===4&&(Oe=ce[Ae+2],Je=ce[Ae+3],(192&(Ze=ce[Ae+1]))==128&&(192&Oe)==128&&(192&Je)==128&&((et=(15&rt)<<18|(63&Ze)<<12|(63&Oe)<<6|63&Je)<=65535||et>=1114112)&&(et=null)),et===null?(et=65533,dt=1):et>65535&&(et-=65536,Me+=String.fromCharCode(et>>>10&1023|55296),et=56320|1023&et),Me+=String.fromCharCode(et),Ae+=dt}return Me})(this.buf,re,Z)},readBytes:function(){var Z=this.readVarint()+this.pos,re=this.buf.subarray(this.pos,Z);return this.pos=Z,re},readPackedVarint:function(Z,re){if(this.type!==a.Bytes)return Z.push(this.readVarint(re));var ce=m(this);for(Z=Z||[];this.pos<ce;)Z.push(this.readVarint(re));return Z},readPackedSVarint:function(Z){if(this.type!==a.Bytes)return Z.push(this.readSVarint());var re=m(this);for(Z=Z||[];this.pos<re;)Z.push(this.readSVarint());return Z},readPackedBoolean:function(Z){if(this.type!==a.Bytes)return Z.push(this.readBoolean());var re=m(this);for(Z=Z||[];this.pos<re;)Z.push(this.readBoolean());return Z},readPackedFloat:function(Z){if(this.type!==a.Bytes)return Z.push(this.readFloat());var re=m(this);for(Z=Z||[];this.pos<re;)Z.push(this.readFloat());return Z},readPackedDouble:function(Z){if(this.type!==a.Bytes)return Z.push(this.readDouble());var re=m(this);for(Z=Z||[];this.pos<re;)Z.push(this.readDouble());return Z},readPackedFixed32:function(Z){if(this.type!==a.Bytes)return Z.push(this.readFixed32());var re=m(this);for(Z=Z||[];this.pos<re;)Z.push(this.readFixed32());return Z},readPackedSFixed32:function(Z){if(this.type!==a.Bytes)return Z.push(this.readSFixed32());var re=m(this);for(Z=Z||[];this.pos<re;)Z.push(this.readSFixed32());return Z},readPackedFixed64:function(Z){if(this.type!==a.Bytes)return Z.push(this.readFixed64());var re=m(this);for(Z=Z||[];this.pos<re;)Z.push(this.readFixed64());return Z},readPackedSFixed64:function(Z){if(this.type!==a.Bytes)return Z.push(this.readSFixed64());var re=m(this);for(Z=Z||[];this.pos<re;)Z.push(this.readSFixed64());return Z},skip:function(Z){var re=7&Z;if(re===a.Varint)for(;this.buf[this.pos++]>127;);else if(re===a.Bytes)this.pos=this.readVarint()+this.pos;else if(re===a.Fixed32)this.pos+=4;else{if(re!==a.Fixed64)throw new Error("Unimplemented type: "+re);this.pos+=8}},writeTag:function(Z,re){this.writeVarint(Z<<3|re)},realloc:function(Z){for(var re=this.length||16;re<this.pos+Z;)re*=2;if(re!==this.length){var ce=new Uint8Array(re);ce.set(this.buf),this.buf=ce,this.length=re}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Z){this.realloc(4),Q(this.buf,Z,this.pos),this.pos+=4},writeSFixed32:function(Z){this.realloc(4),Q(this.buf,Z,this.pos),this.pos+=4},writeFixed64:function(Z){this.realloc(8),Q(this.buf,-1&Z,this.pos),Q(this.buf,Math.floor(Z*p),this.pos+4),this.pos+=8},writeSFixed64:function(Z){this.realloc(8),Q(this.buf,-1&Z,this.pos),Q(this.buf,Math.floor(Z*p),this.pos+4),this.pos+=8},writeVarint:function(Z){(Z=+Z||0)>268435455||Z<0?(function(re,ce){var fe,Pe;if(re>=0?(fe=re%4294967296|0,Pe=re/4294967296|0):(Pe=~(-re/4294967296),4294967295^(fe=~(-re%4294967296))?fe=fe+1|0:(fe=0,Pe=Pe+1|0)),re>=18446744073709552e3||re<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");ce.realloc(10),(function(Me,Ae,Ze){Ze.buf[Ze.pos++]=127&Me|128,Me>>>=7,Ze.buf[Ze.pos++]=127&Me|128,Me>>>=7,Ze.buf[Ze.pos++]=127&Me|128,Me>>>=7,Ze.buf[Ze.pos++]=127&Me|128,Ze.buf[Ze.pos]=127&(Me>>>=7)})(fe,0,ce),(function(Me,Ae){var Ze=(7&Me)<<4;Ae.buf[Ae.pos++]|=Ze|((Me>>>=3)?128:0),Me&&(Ae.buf[Ae.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Ae.buf[Ae.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Ae.buf[Ae.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Ae.buf[Ae.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Ae.buf[Ae.pos++]=127&Me)))))})(Pe,ce)})(Z,this):(this.realloc(4),this.buf[this.pos++]=127&Z|(Z>127?128:0),Z<=127||(this.buf[this.pos++]=127&(Z>>>=7)|(Z>127?128:0),Z<=127||(this.buf[this.pos++]=127&(Z>>>=7)|(Z>127?128:0),Z<=127||(this.buf[this.pos++]=Z>>>7&127))))},writeSVarint:function(Z){this.writeVarint(Z<0?2*-Z-1:2*Z)},writeBoolean:function(Z){this.writeVarint(!!Z)},writeString:function(Z){Z=String(Z),this.realloc(4*Z.length),this.pos++;var re=this.pos;this.pos=(function(fe,Pe,Me){for(var Ae,Ze,Oe=0;Oe<Pe.length;Oe++){if((Ae=Pe.charCodeAt(Oe))>55295&&Ae<57344){if(!Ze){Ae>56319||Oe+1===Pe.length?(fe[Me++]=239,fe[Me++]=191,fe[Me++]=189):Ze=Ae;continue}if(Ae<56320){fe[Me++]=239,fe[Me++]=191,fe[Me++]=189,Ze=Ae;continue}Ae=Ze-55296<<10|Ae-56320|65536,Ze=null}else Ze&&(fe[Me++]=239,fe[Me++]=191,fe[Me++]=189,Ze=null);Ae<128?fe[Me++]=Ae:(Ae<2048?fe[Me++]=Ae>>6|192:(Ae<65536?fe[Me++]=Ae>>12|224:(fe[Me++]=Ae>>18|240,fe[Me++]=Ae>>12&63|128),fe[Me++]=Ae>>6&63|128),fe[Me++]=63&Ae|128)}return Me})(this.buf,Z,this.pos);var ce=this.pos-re;ce>=128&&M(re,ce,this),this.pos=re-1,this.writeVarint(ce),this.pos+=ce},writeFloat:function(Z){this.realloc(4),h.write(this.buf,Z,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Z){this.realloc(8),h.write(this.buf,Z,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Z){var re=Z.length;this.writeVarint(re),this.realloc(re);for(var ce=0;ce<re;ce++)this.buf[this.pos++]=Z[ce]},writeRawMessage:function(Z,re){this.pos++;var ce=this.pos;Z(re,this);var fe=this.pos-ce;fe>=128&&M(ce,fe,this),this.pos=ce-1,this.writeVarint(fe),this.pos+=fe},writeMessage:function(Z,re,ce){this.writeTag(Z,a.Bytes),this.writeRawMessage(re,ce)},writePackedVarint:function(Z,re){re.length&&this.writeMessage(Z,P,re)},writePackedSVarint:function(Z,re){re.length&&this.writeMessage(Z,R,re)},writePackedBoolean:function(Z,re){re.length&&this.writeMessage(Z,L,re)},writePackedFloat:function(Z,re){re.length&&this.writeMessage(Z,E,re)},writePackedDouble:function(Z,re){re.length&&this.writeMessage(Z,O,re)},writePackedFixed32:function(Z,re){re.length&&this.writeMessage(Z,D,re)},writePackedSFixed32:function(Z,re){re.length&&this.writeMessage(Z,k,re)},writePackedFixed64:function(Z,re){re.length&&this.writeMessage(Z,B,re)},writePackedSFixed64:function(Z,re){re.length&&this.writeMessage(Z,W,re)},writeBytesField:function(Z,re){this.writeTag(Z,a.Bytes),this.writeBytes(re)},writeFixed32Field:function(Z,re){this.writeTag(Z,a.Fixed32),this.writeFixed32(re)},writeSFixed32Field:function(Z,re){this.writeTag(Z,a.Fixed32),this.writeSFixed32(re)},writeFixed64Field:function(Z,re){this.writeTag(Z,a.Fixed64),this.writeFixed64(re)},writeSFixed64Field:function(Z,re){this.writeTag(Z,a.Fixed64),this.writeSFixed64(re)},writeVarintField:function(Z,re){this.writeTag(Z,a.Varint),this.writeVarint(re)},writeSVarintField:function(Z,re){this.writeTag(Z,a.Varint),this.writeSVarint(re)},writeStringField:function(Z,re){this.writeTag(Z,a.Bytes),this.writeString(re)},writeFloatField:function(Z,re){this.writeTag(Z,a.Fixed32),this.writeFloat(re)},writeDoubleField:function(Z,re){this.writeTag(Z,a.Fixed64),this.writeDouble(re)},writeBooleanField:function(Z,re){this.writeVarintField(Z,!!re)}},E4}var TT=f(J8());const M4=3;function Zue(h,a,u){a.glyphs=[],h===1&&u.readMessage(Kue,a)}function Kue(h,a,u){if(h===3){const{id:p,bitmap:_,width:m,height:b,left:M,top:P,advance:R}=u.readMessage(Jue,{});a.glyphs.push({id:p,bitmap:new vp({width:m+2*M4,height:b+2*M4},_),metrics:{width:m,height:b,left:M,top:P,advance:R}})}else h===4?a.ascender=u.readSVarint():h===5&&(a.descender=u.readSVarint())}function Jue(h,a,u){h===1?a.id=u.readVarint():h===2?a.bitmap=u.readBytes():h===3?a.width=u.readVarint():h===4?a.height=u.readVarint():h===5?a.left=u.readSVarint():h===6?a.top=u.readSVarint():h===7&&(a.advance=u.readVarint())}const Q8=M4,ol={horizontal:1,vertical:2,horizontalOnly:3};class Cx{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(a,u){const p=new Cx;return p.scale=a||1,p.fontStack=u,p}static forImage(a){const u=new Cx;return u.image=a,u}}class Av{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,u,p){const _=new Av;for(let m=0;m<a.sections.length;m++){const b=a.sections[m];b.image?_.addImageSection(b,p):_.addTextSection(b,u)}return _}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSections(){return this.sections}getSectionIndex(a){return this.sectionIndex[a]}getCodePoint(a){return this.text.codePointAt(a)}verticalizePunctuation(a){this.text=(function(u,p){let _="";for(let m=0;m<u.length;m++){const b=u.charCodeAt(m+1)||null,M=u.charCodeAt(m-1)||null;_+=!p&&(b&&Bb(b)&&!Ax[u[m+1]]||M&&Bb(M)&&!Ax[u[m-1]])||!Ax[u[m]]?u[m]:Ax[u[m]]}return _})(this.text,a)}trim(){let a=0;for(let p=0;p<this.text.length&&MT[this.text.charCodeAt(p)];p++)a++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=a&&MT[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(a,u),this.sectionIndex=this.sectionIndex.slice(a,u)}substring(a,u){const p=new Av;return p.text=this.text.substring(a,u),p.sectionIndex=this.sectionIndex.slice(a,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((a,u)=>Math.max(a,this.sections[u].scale)),0)}addTextSection(a,u){this.text+=a.text,this.sections.push(Cx.forText(a.scale,a.fontStack||u));const p=this.sections.length-1;for(let _=0;_<a.text.length;++_)this.sectionIndex.push(p)}addImageSection(a,u){const p=a.image?a.image.getPrimary():null;if(!p)return void Te("Can't add FormattedSection with an empty image.");p.scaleSelf(u);const _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCodePoint(_),this.sections.push(Cx.forImage(p)),this.sectionIndex.push(this.sections.length-1)):Te("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function A4(h,a,u,p,_,m,b,M,P,R,E,O,L,D,k,B=1){const W=Av.fromFeature(h,_,B);O===ol.vertical&&W.verticalizePunctuation(L);let G=[];const Q=(function(fe,Pe,Me,Ae,Ze,Oe){if(!fe)return[];const Je=[],rt=(function(xt,pt,St,Zt,Yt,Cn){let rn=0;for(let pn=0;pn<xt.length();pn++){const en=xt.getSection(pn);rn+=e$(xt.getCodePoint(pn),en,Zt,Yt,pt,Cn)}return rn/Math.max(1,Math.ceil(rn/St))})(fe,Pe,Me,Ae,Ze,Oe),et=fe.text.indexOf("")>=0;let dt=0;for(let xt=0;xt<fe.length();xt++){const pt=fe.getSection(xt),St=fe.getCodePoint(xt);if(MT[St]||(dt+=e$(St,pt,Ae,Ze,Pe,Oe)),xt<fe.length()-1){const Zt=!((ct=St)<11904||!(Bn["Bopomofo Extended"](ct)||Bn.Bopomofo(ct)||Bn["CJK Compatibility Forms"](ct)||Bn["CJK Compatibility Ideographs"](ct)||Bn["CJK Compatibility"](ct)||Bn["CJK Radicals Supplement"](ct)||Bn["CJK Strokes"](ct)||Bn["CJK Symbols and Punctuation"](ct)||Bn["CJK Unified Ideographs Extension A"](ct)||Bn["CJK Unified Ideographs"](ct)||Bn["Enclosed CJK Letters and Months"](ct)||Bn["Halfwidth and Fullwidth Forms"](ct)||Bn.Hiragana(ct)||Bn["Ideographic Description Characters"](ct)||Bn["Kangxi Radicals"](ct)||Bn["Katakana Phonetic Extensions"](ct)||Bn.Katakana(ct)||Bn["Vertical Forms"](ct)||Bn["Yi Radicals"](ct)||Bn["Yi Syllables"](ct)));(Que[St]||Zt||pt.image)&&Je.push(n$(xt+1,dt,rt,Je,ede(St,fe.getCodePoint(xt+1),Zt&&et),!1))}}var ct;return r$(n$(fe.length(),dt,rt,Je,0,!0))})(W,R,m,a,p,D),{processBidirectionalText:K,processStyledBidirectionalText:Z}=Ll;if(K&&W.sections.length===1){const fe=K(W.toString(),Q);for(const Pe of fe){const Me=new Av;Me.text=Pe,Me.sections=W.sections;for(let Ae=0;Ae<Pe.length;Ae++)Me.sectionIndex.push(0);G.push(Me)}}else if(Z){const fe=Z(W.text,W.sectionIndex,Q);for(const Pe of fe){const Me=new Av;Me.text=Pe[0],Me.sectionIndex=Pe[1],Me.sections=W.sections,G.push(Me)}}else G=(function(fe,Pe){const Me=[],Ae=fe.text;let Ze=0;for(const Oe of Pe)Me.push(fe.substring(Ze,Oe)),Ze=Oe;return Ze<Ae.length&&Me.push(fe.substring(Ze,Ae.length)),Me})(W,Q);const re=[],ce={positionedLines:re,text:W.toString(),top:E[1],bottom:E[1],left:E[0],right:E[0],writingMode:O,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if((function(fe,Pe,Me,Ae,Ze,Oe,Je,rt,et,dt,ct,xt){let pt=0,St=0,Zt=0;const Yt=rt==="right"?1:rt==="left"?0:.5;let Cn=!1;for(const Dn of Ze){const Kn=Dn.getSections();for(const pr of Kn){if(pr.image)continue;const tr=Pe[pr.fontStack];if(tr&&(Cn=tr.ascender!==void 0&&tr.descender!==void 0,!Cn))break}if(!Cn)break}let rn=0;for(const Dn of Ze){Dn.trim();const Kn=Dn.getMaxScale(),pr=(Kn-1)*ko,tr={positionedGlyphs:[],lineOffset:0};fe.positionedLines[rn]=tr;const xr=tr.positionedGlyphs;let fr=0;if(!Dn.length()){St+=Oe,++rn;continue}let Er=0,$r=0;for(let Qn=0;Qn<Dn.length();Qn++){const Pr=Dn.getSection(Qn),Ni=Dn.getSectionIndex(Qn),Wi=Dn.getCodePoint(Qn);let Zi=Pr.scale,os=null,yi=null,Ks=null,pa=ko,Ss=0;et===ol.vertical&&((pn=Wi)===12312||pn===12313||pn===12316||pn===12540||pn===12448)&&(et=ol.horizontal);const Ds=!(et===ol.horizontal||!ct&&!rv(Wi)||ct&&(MT[Wi]||WE(Wi)));if(Pr.image){const Go=Ae.get(Pr.image.toString());if(!Go)continue;Ks=Pr.image,fe.iconsInText=fe.iconsInText||!0,yi=Go.paddedRect;const xo=Go.displaySize;Zi=Zi*ko/xt,os={width:xo[0],height:xo[1],left:0,top:-Q8,advance:Ds?xo[1]:xo[0],localGlyph:!1},Ss=Cn?-os.height*Zi:Kn*ko-17-xo[1]*Zi,pa=os.advance;const hc=(Ds?xo[0]:xo[1])*Zi-ko*Kn;hc>0&&hc>fr&&(fr=hc)}else{const Go=Me[Pr.fontStack];if(!Go)continue;Go[Wi]&&(yi=Go[Wi]);const xo=Pe[Pr.fontStack];if(!xo)continue;const hc=xo.glyphs[Wi];if(!hc)continue;if(os=hc.metrics,pa=Wi!==8203?ko:0,Cn){const Ap=xo.ascender!==void 0?Math.abs(xo.ascender):0,Bc=xo.descender!==void 0?Math.abs(xo.descender):0,Iu=(Ap+Bc)*Zi;Er<Iu&&(Er=Iu,$r=(Ap-Bc)/2*Zi),Ss=-Ap*Zi}else Ss=(Kn-Zi)*ko-17}Ds?(fe.verticalizable=!0,xr.push({glyph:Wi,image:Ks,x:pt,y:St+Ss,vertical:Ds,scale:Zi,localGlyph:os.localGlyph,fontStack:Pr.fontStack,sectionIndex:Ni,metrics:os,rect:yi}),pt+=pa*Zi+dt):(xr.push({glyph:Wi,image:Ks,x:pt,y:St+Ss,vertical:Ds,scale:Zi,localGlyph:os.localGlyph,fontStack:Pr.fontStack,sectionIndex:Ni,metrics:os,rect:yi}),pt+=os.advance*Zi+dt)}xr.length!==0&&(Zt=Math.max(pt-dt,Zt),Cn?i$(xr,Yt,fr,$r,Oe*Kn/2):i$(xr,Yt,fr,0,Oe/2)),pt=0;const bi=Oe*Kn+fr;tr.lineOffset=Math.max(fr,pr),St+=bi,++rn}var pn;const en=St,{horizontalAlign:$n,verticalAlign:Sn}=C4(Je);(function(Dn,Kn,pr,tr,xr,fr){const Er=(Kn-pr)*xr,$r=-fr*tr;for(const bi of Dn)for(const Qn of bi.positionedGlyphs)Qn.x+=Er,Qn.y+=$r})(fe.positionedLines,Yt,$n,Sn,Zt,en),fe.top+=-Sn*en,fe.bottom=fe.top+en,fe.left+=-$n*Zt,fe.right=fe.left+Zt,fe.hasBaseline=Cn})(ce,a,u,p,G,b,M,P,O,R,L,k),!(function(fe){for(const Pe of fe)if(Pe.positionedGlyphs.length!==0)return!1;return!0})(re))return ce}const MT={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Que={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function e$(h,a,u,p,_,m){if(a.image){const b=p.get(a.image.toString());return b?b.displaySize[0]*a.scale*ko/m+_:0}{const b=u[a.fontStack],M=b&&b.glyphs[h];return M?M.metrics.advance*a.scale+_:0}}function t$(h,a,u,p){const _=Math.pow(h-a,2);return p?h<a?_/2:2*_:_+Math.abs(u)*u}function ede(h,a,u){let p=0;return h===10&&(p-=1e4),u&&(p+=150),h!==40&&h!==65288||(p+=50),a!==41&&a!==65289||(p+=50),p}function n$(h,a,u,p,_,m){let b=null,M=t$(a,u,_,m);for(const P of p){const R=t$(a-P.x,u,_,m)+P.badness;R<=M&&(b=P,M=R)}return{index:h,x:a,priorBreak:b,badness:M}}function r$(h){return h?r$(h.priorBreak).concat(h.index):[]}function C4(h){let a=.5,u=.5;switch(h){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:a,verticalAlign:u}}function i$(h,a,u,p,_){if(!(a||u||p||_))return;const m=h.length-1,b=h[m],M=(b.x+b.metrics.advance*b.scale)*a;for(let P=0;P<=m;P++)h[P].x-=M,h[P].y+=u+p+_}function tde(h,a,u,p){const{horizontalAlign:_,verticalAlign:m}=C4(p),b=u[0]-h.displaySize[0]*_,M=u[1]-h.displaySize[1]*m;return{imagePrimary:h,imageSecondary:a,top:M,bottom:M+h.displaySize[1],left:b,right:b+h.displaySize[0]}}function s$(h,a,u,p,_,m){const b=h.imagePrimary;let M;if(b.content){const W=b.content,G=b.pixelRatio||1;M=[W[0]/G,W[1]/G,b.displaySize[0]-W[2]/G,b.displaySize[1]-W[3]/G]}const P=a.left*m,R=a.right*m;let E,O,L,D;u==="width"||u==="both"?(D=_[0]+P-p[3],O=_[0]+R+p[1]):(D=_[0]+(P+R-b.displaySize[0])/2,O=D+b.displaySize[0]);const k=a.top*m,B=a.bottom*m;return u==="height"||u==="both"?(E=_[1]+k-p[0],L=_[1]+B+p[2]):(E=_[1]+(k+B-b.displaySize[1])/2,L=E+b.displaySize[1]),{imagePrimary:b,imageSecondary:void 0,top:E,right:O,bottom:L,left:D,collisionPadding:M}}class wh extends ge{constructor(a,u,p,_,m){super(a,u),this.angle=_,this.z=p,m!==void 0&&(this.segment=m)}clone(){return new wh(this.x,this.y,this.z,this.angle,this.segment)}}function o$(h,a,u,p,_){if(a.segment===void 0)return!0;let m=a,b=a.segment+1,M=0;for(;M>-u/2;){if(b--,b<0)return!1;M-=h[b].dist(m),m=h[b]}M+=h[b].dist(h[b+1]),b++;const P=[];let R=0;for(;M<u/2;){const E=h[b],O=h[b+1];if(!O)return!1;let L=h[b-1].angleTo(E)-E.angleTo(O);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:M,angleDelta:L}),R+=L;M-P[0].distance>p;)R-=P.shift().angleDelta;if(R>_)return!1;b++,M+=E.dist(O)}return!0}function a$(h){let a=0;for(let u=0;u<h.length-1;u++)a+=h[u].dist(h[u+1]);return a}function l$(h,a,u){return h?.6*a*u:0}function c$(h,a){return Math.max(h?h.right-h.left:0,a?a.right-a.left:0)}function nde(h,a,u,p,_,m){const b=l$(u,_,m),M=c$(u,p)*m;let P=0;const R=a$(h)/2;for(let E=0;E<h.length-1;E++){const O=h[E],L=h[E+1],D=O.dist(L);if(P+D>R){const k=(R-P)/D,B=jn(O.x,L.x,k),W=jn(O.y,L.y,k),G=new wh(B,W,0,L.angleTo(O),E);return!b||o$(h,G,M,b,a)?G:void 0}P+=D}}function rde(h,a,u,p,_,m,b,M,P){const R=l$(p,m,b),E=c$(p,_),O=E*b,L=h[0].x===0||h[0].x===P||h[0].y===0||h[0].y===P;return a-O<a/4&&(a=O+a/4),u$(h,L?a/2*M%a:(E/2+2*m)*b*M%a,a,R,u,O,L,!1,P)}function u$(h,a,u,p,_,m,b,M,P){const R=m/2,E=a$(h);let O=0,L=a-u,D=[];for(let k=0;k<h.length-1;k++){const B=h[k],W=h[k+1],G=B.dist(W),Q=W.angleTo(B);for(;L+u<O+G;){L+=u;const K=(L-O)/G,Z=jn(B.x,W.x,K),re=jn(B.y,W.y,K);if(Z>=0&&Z<P&&re>=0&&re<P&&L-R>=0&&L+R<=E){const ce=new wh(Z,re,0,Q,k);p&&!o$(h,ce,m,p,_)||D.push(ce)}}O+=G}return M||D.length||b||(D=u$(h,O/2,u,p,_,m,b,!0,P)),D}function d$(h,a,u,p,_){const m=[];for(let b=0;b<h.length;b++){const M=h[b];let P;for(let R=0;R<M.length-1;R++){let E=M[R],O=M[R+1];E.x<a&&O.x<a||(E.x<a?E=new ge(a,E.y+(a-E.x)/(O.x-E.x)*(O.y-E.y))._round():O.x<a&&(O=new ge(a,E.y+(a-E.x)/(O.x-E.x)*(O.y-E.y))._round()),E.y<u&&O.y<u||(E.y<u?E=new ge(E.x+(u-E.y)/(O.y-E.y)*(O.x-E.x),u)._round():O.y<u&&(O=new ge(E.x+(u-E.y)/(O.y-E.y)*(O.x-E.x),u)._round()),E.x>=p&&O.x>=p||(E.x>=p?E=new ge(p,E.y+(p-E.x)/(O.x-E.x)*(O.y-E.y))._round():O.x>=p&&(O=new ge(p,E.y+(p-E.x)/(O.x-E.x)*(O.y-E.y))._round()),E.y>=_&&O.y>=_||(E.y>=_?E=new ge(E.x+(_-E.y)/(O.y-E.y)*(O.x-E.x),_)._round():O.y>=_&&(O=new ge(E.x+(_-E.y)/(O.y-E.y)*(O.x-E.x),_)._round()),P&&E.equals(P[P.length-1])||(P=[E],m.push(P)),P.push(O)))))}}return m}function h$(h){let a=0,u=0;for(const b of h)a+=b.w*b.h,u=Math.max(u,b.w);h.sort(((b,M)=>M.h-b.h));const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),u),h:1/0}];let _=0,m=0;for(const b of h)for(let M=p.length-1;M>=0;M--){const P=p[M];if(!(b.w>P.w||b.h>P.h)){if(b.x=P.x,b.y=P.y,m=Math.max(m,b.y+b.h),_=Math.max(_,b.x+b.w),b.w===P.w&&b.h===P.h){const R=p.pop();M<p.length&&(p[M]=R)}else b.h===P.h?(P.x+=b.w,P.w-=b.w):b.w===P.w?(P.y+=b.h,P.h-=b.h):(p.push({x:P.x+b.w,y:P.y,w:P.w-b.w,h:b.h}),P.y+=b.h,P.h-=b.h);break}}return{w:_,h:m,fill:a/(_*m)||0}}An(wh,"Anchor");const Cv=1;class Ix{static getImagePositionScale(a,u,p){if(u&&a&&a.options&&a.options.transform){const _=a.options.transform;return{x:_.a,y:_.d}}return{x:p,y:p}}constructor(a,u,p,_){this.paddedRect=a;const{pixelRatio:m,version:b,stretchX:M,stretchY:P,content:R,sdf:E,usvg:O}=u;this.pixelRatio=m,this.stretchX=M,this.stretchY=P,this.content=R,this.version=b,this.padding=p,this.sdf=E,this.scale=Ix.getImagePositionScale(_,O,m)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function f$(h,a,u){const p=Oc.parse(h),_=(function(m,b,M=[1,1]){return{x:0,y:0,w:(m.data?m.data.width:m.width*M[0])+2*b,h:(m.data?m.data.height:m.height*M[1])+2*b}})(a,u,[p.options.transform.a,p.options.transform.d]);return{bin:_,imagePosition:new Ix(_,a,u,p),imageVariant:p}}class p${constructor(a,u,p){const _=new Map,m=new Map;this.haveRenderCallbacks=[];const b=[];this.addImages(a,_,Cv,b),this.addImages(u,m,2,b);const{w:M,h:P}=h$(b),R=new Ro({width:M||1,height:P||1});for(const[E,O]of a.entries()){const L=_.get(E).paddedRect;Ro.copy(O.data,R,{x:0,y:0},{x:L.x+Cv,y:L.y+Cv},O.data,p,O.sdf)}for(const[E,O]of u.entries()){const L=m.get(E),D=L.paddedRect;let k=L.padding;const B=D.x+k,W=D.y+k,G=O.data.width,Q=O.data.height;k=k>1?k-1:k,Ro.copy(O.data,R,{x:0,y:0},{x:B,y:W},O.data,p),Ro.copy(O.data,R,{x:0,y:Q-k},{x:B,y:W-k},{width:G,height:k},p),Ro.copy(O.data,R,{x:0,y:0},{x:B,y:W+Q},{width:G,height:k},p),Ro.copy(O.data,R,{x:G-k,y:0},{x:B-k,y:W},{width:k,height:Q},p),Ro.copy(O.data,R,{x:0,y:0},{x:B+G,y:W},{width:k,height:Q},p),Ro.copy(O.data,R,{x:G-k,y:Q-k},{x:B-k,y:W-k},{width:k,height:k},p),Ro.copy(O.data,R,{x:0,y:Q-k},{x:B+G,y:W-k},{width:k,height:k},p),Ro.copy(O.data,R,{x:0,y:0},{x:B+G,y:W+Q},{width:k,height:k},p),Ro.copy(O.data,R,{x:G-k,y:0},{x:B-k,y:W+Q},{width:k,height:k},p)}this.lut=p,this.image=R,this.iconPositions=_,this.patternPositions=m}addImages(a,u,p,_){for(const[m,b]of a.entries()){const{bin:M,imagePosition:P,imageVariant:R}=f$(m,b,p);u.set(m,P),_.push(M),b.hasRenderCallback&&this.haveRenderCallbacks.push(R.id)}}patchUpdatedImages(a,u,p){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((_=>a.hasImage(_,p))),a.dispatchRenderCallbacks(this.haveRenderCallbacks,p);for(const _ of a.getUpdatedImages(p)){for(const m of this.iconPositions.keys()){const b=Oc.parse(m);if(da.isEqual(b.id,_)){const M=a.getImage(_,p);this.patchUpdatedImage(this.iconPositions.get(m),M,u)}}for(const m of this.patternPositions.keys()){const b=Oc.parse(m);if(da.isEqual(b.id,_)){const M=a.getImage(_,p);this.patchUpdatedImage(this.patternPositions.get(m),M,u)}}}}patchUpdatedImage(a,u,p){if(!a||!u||a.version===u.version)return;a.version=u.version;const[_,m]=a.tl,b=a.sdf;if(this.lut||b){const M={width:u.data.width,height:u.data.height},P=new Ro(M);Ro.copy(u.data,P,{x:0,y:0},{x:0,y:0},M,this.lut,b),p.update(P,{position:{x:_,y:m}})}else p.update(u.data,{position:{x:_,y:m}})}}An(Ix,"ImagePosition"),An(p$,"ImageAtlas");const Px=1e20;function m$(h,a,u,p,_,m,b,M,P){for(let R=a;R<a+p;R++)g$(h,u*m+R,m,_,b,M,P);for(let R=u;R<u+_;R++)g$(h,R*m+a,1,p,b,M,P)}function g$(h,a,u,p,_,m,b){m[0]=0,b[0]=-Px,b[1]=Px,_[0]=h[a];for(let M=1,P=0,R=0;M<p;M++){_[M]=h[a+M*u];const E=M*M;do{const O=m[P];R=(_[M]-_[O]+E-O*O)/(M-O)/2}while(R<=b[P]&&--P>-1);P++,m[P]=M,b[P]=R,b[P+1]=Px}for(let M=0,P=0;M<p;M++){for(;b[P+1]<M;)P++;const R=m[P],E=M-R;h[a+M*u]=_[R]+E*E}}const Tu=2,I4={none:0,ideographs:1,all:2};class Iv{constructor(a,u,p){this.requestManager=a,this.localGlyphMode=u,this.localFontFamily=p,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(a,u){this.urls[u]=a}getGlyphs(a,u,p){const _=[],m=this.urls[u]||ue.GLYPHS_URL;for(const b in a)for(const M of a[b])_.push({stack:b,id:M});on(_,(({stack:b,id:M},P)=>{let R=this.entries[b];R||(R=this.entries[b]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let E=R.glyphs[M];if(E!==void 0)return void P(null,{stack:b,id:M,glyph:E});if(E=this._tinySDF(R,b,M),E)return R.glyphs[M]=E,void P(null,{stack:b,id:M,glyph:E});const O=Math.floor(M/256);if(256*O>65535)return Te("glyphs > 65535 not supported"),void P(null,{stack:b,id:M,glyph:E});if(R.ranges[O])return void P(null,{stack:b,id:M,glyph:E});let L=R.requests[O];L||(L=R.requests[O]=[],Iv.loadGlyphRange(b,O,m,this.requestManager,((D,k)=>{if(k){R.ascender=k.ascender,R.descender=k.descender;for(const B in k.glyphs)this._doesCharSupportLocalGlyph(+B)||(R.glyphs[+B]=k.glyphs[+B]);R.ranges[O]=!0}for(const B of L)B(D,k);delete R.requests[O]}))),L.push(((D,k)=>{D?P(D):k&&P(null,{stack:b,id:M,glyph:k.glyphs[M]||null})}))}),((b,M)=>{if(b)p(b);else if(M){const P={};for(const{stack:R,id:E,glyph:O}of M)P[R]===void 0&&(P[R]={}),P[R].glyphs===void 0&&(P[R].glyphs={}),P[R].glyphs[E]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics},P[R].ascender=this.entries[R].ascender,P[R].descender=this.entries[R].descender;p(null,P)}}))}_doesCharSupportLocalGlyph(a){return this.localGlyphMode!==I4.none&&(this.localGlyphMode===I4.all?!!this.localFontFamily:!!this.localFontFamily&&(Bn["CJK Unified Ideographs"](a)||Bn["Hangul Syllables"](a)||Bn.Hiragana(a)||Bn.Katakana(a)||Bn["CJK Symbols and Punctuation"](a)||Bn["CJK Unified Ideographs Extension A"](a)||Bn["CJK Unified Ideographs Extension B"](a)||Bn.Osage(a)))}_tinySDF(a,u,p){const _=this.localFontFamily;if(!_||!this._doesCharSupportLocalGlyph(p))return;let m=a.tinySDF;if(!m){let B="400";/bold/i.test(u)?B="900":/medium/i.test(u)?B="500":/light/i.test(u)&&(B="200"),m=a.tinySDF=new Iv.TinySDF({fontFamily:_,fontWeight:B,fontSize:24*Tu,buffer:3*Tu,radius:8*Tu}),m.fontWeight=B}if(this.localGlyphs[m.fontWeight][p])return this.localGlyphs[m.fontWeight][p];const b=String.fromCodePoint(p),{data:M,width:P,height:R,glyphWidth:E,glyphHeight:O,glyphLeft:L,glyphTop:D,glyphAdvance:k}=m.draw(b);return this.localGlyphs[m.fontWeight][p]={id:p,bitmap:new vp({width:P,height:R},M),metrics:{width:E/Tu,height:O/Tu,left:L/Tu,top:D/Tu-27,advance:k/Tu,localGlyph:!0}}}}Iv.loadGlyphRange=function(h,a,u,p,_){const m=256*a,b=m+255,M=p.transformRequest(p.normalizeGlyphsURL(u).replace("{fontstack}",h).replace("{range}",`${m}-${b}`),io.Glyphs);Pc(M,((P,R)=>{if(P)_(P);else if(R){const E={},O=(function(L){return new TT(L).readFields(Zue,{})})(R);for(const L of O.glyphs)E[L.id]=L;_(null,{glyphs:E,ascender:O.ascender,descender:O.descender})}}))},Iv.TinySDF=class{constructor({fontSize:h=24,buffer:a=3,radius:u=8,cutoff:p=.25,fontFamily:_="sans-serif",fontWeight:m="normal",fontStyle:b="normal"}={}){this.buffer=a,this.cutoff=p,this.radius=u;const M=this.size=h+4*a,P=this._createCanvas(M),R=this.ctx=P.getContext("2d",{willReadFrequently:!0});R.font=`${b} ${m} ${h}px ${_}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(h){const a=document.createElement("canvas");return a.width=a.height=h,a}draw(h){const{width:a,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:_,actualBoundingBoxRight:m}=this.ctx.measureText(h),b=Math.ceil(u),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-_))),P=Math.min(this.size-this.buffer,b+Math.ceil(p)),R=M+2*this.buffer,E=P+2*this.buffer,O=Math.max(R*E,0),L=new Uint8ClampedArray(O),D={data:L,width:R,height:E,glyphWidth:M,glyphHeight:P,glyphTop:b,glyphLeft:0,glyphAdvance:a};if(M===0||P===0)return D;const{ctx:k,buffer:B,gridInner:W,gridOuter:G}=this;k.clearRect(B,B,M,P),k.fillText(h,B,B+b);const Q=k.getImageData(B,B,M,P);G.fill(Px,0,O),W.fill(0,0,O);for(let K=0;K<P;K++)for(let Z=0;Z<M;Z++){const re=Q.data[4*(K*M+Z)+3]/255;if(re===0)continue;const ce=(K+B)*R+Z+B;if(re===1)G[ce]=0,W[ce]=Px;else{const fe=.5-re;G[ce]=fe>0?fe*fe:0,W[ce]=fe<0?fe*fe:0}}m$(G,0,0,R,E,R,this.f,this.v,this.z),m$(W,B,B,M,P,R,this.f,this.v,this.z);for(let K=0;K<O;K++){const Z=Math.sqrt(G[K])-Math.sqrt(W[K]);L[K]=Math.round(255-255*(Z/this.radius+this.cutoff))}return D}};const wp=Cv;function _$(h,a){return h+a[1]-a[0]}function y$(h,a,u,p,_=1){const m=[],b=h.imagePrimary,M=b.pixelRatio,P=b.paddedRect.w-2*wp,R=b.paddedRect.h-2*wp,E=(h.right-h.left)*_,O=(h.bottom-h.top)*_,L=b.stretchX||[[0,P]],D=b.stretchY||[[0,R]],k=L.reduce(_$,0),B=D.reduce(_$,0),W=P-k,G=R-B;let Q=0,K=k,Z=0,re=B,ce=0,fe=W,Pe=0,Me=G;if(b.content&&p){const Ze=b.content;Q=AT(L,0,Ze[0]),Z=AT(D,0,Ze[1]),K=AT(L,Ze[0],Ze[2]),re=AT(D,Ze[1],Ze[3]),ce=Ze[0]-Q,Pe=Ze[1]-Z,fe=Ze[2]-Ze[0]-K,Me=Ze[3]-Ze[1]-re}const Ae=(Ze,Oe,Je,rt)=>{const et=CT(Ze.stretch-Q,K,E,h.left*_),dt=IT(Ze.fixed-ce,fe,Ze.stretch,k),ct=CT(Oe.stretch-Z,re,O,h.top*_),xt=IT(Oe.fixed-Pe,Me,Oe.stretch,B),pt=CT(Je.stretch-Q,K,E,h.left*_),St=IT(Je.fixed-ce,fe,Je.stretch,k),Zt=CT(rt.stretch-Z,re,O,h.top*_),Yt=IT(rt.fixed-Pe,Me,rt.stretch,B),Cn=new ge(et,ct),rn=new ge(pt,ct),pn=new ge(pt,Zt),en=new ge(et,Zt),$n=new ge(dt/M,xt/M),Sn=new ge(St/M,Yt/M),Dn=a*Math.PI/180;if(Dn){const Er=Math.sin(Dn),$r=Math.cos(Dn),bi=[$r,-Er,Er,$r];Cn._matMult(bi),rn._matMult(bi),en._matMult(bi),pn._matMult(bi)}const Kn=Ze.stretch+Ze.fixed,pr=Je.stretch+Je.fixed,tr=Oe.stretch+Oe.fixed,xr=rt.stretch+rt.fixed,fr=h.imageSecondary;return{tl:Cn,tr:rn,bl:en,br:pn,texPrimary:{x:b.paddedRect.x+wp+Kn,y:b.paddedRect.y+wp+tr,w:pr-Kn,h:xr-tr},texSecondary:fr?{x:fr.paddedRect.x+wp+Kn,y:fr.paddedRect.y+wp+tr,w:pr-Kn,h:xr-tr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$n,pixelOffsetBR:Sn,minFontScaleX:fe/M/E,minFontScaleY:Me/M/O,isSDF:u}};if(p&&(b.stretchX||b.stretchY)){const Ze=v$(L,W,k),Oe=v$(D,G,B);for(let Je=0;Je<Ze.length-1;Je++){const rt=Ze[Je],et=Ze[Je+1];for(let dt=0;dt<Oe.length-1;dt++)m.push(Ae(rt,Oe[dt],et,Oe[dt+1]))}}else m.push(Ae({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:R+1}));return m}function AT(h,a,u){let p=0;for(const _ of h)p+=Math.max(a,Math.min(u,_[1]))-Math.max(a,Math.min(u,_[0]));return p}function v$(h,a,u){const p=[{fixed:-wp,stretch:0}];for(const[_,m]of h){const b=p[p.length-1];p.push({fixed:_-b.stretch,stretch:b.stretch}),p.push({fixed:_-b.stretch,stretch:b.stretch+(m-_)})}return p.push({fixed:a+wp,stretch:u}),p}function CT(h,a,u,p){return h/a*u+p}function IT(h,a,u,p){return h-a*u/p}function ide(h,a,u,p){const _=a+h.positionedLines[p].lineOffset;return p===0?u+_/2:u+(_+(a+h.positionedLines[p-1].lineOffset))/2}function sde(h,a=1,u=!1){let p=1/0,_=1/0,m=-1/0,b=-1/0;const M=h[0];for(let D=0;D<M.length;D++){const k=M[D];(!D||k.x<p)&&(p=k.x),(!D||k.y<_)&&(_=k.y),(!D||k.x>m)&&(m=k.x),(!D||k.y>b)&&(b=k.y)}const P=Math.min(m-p,b-_);let R=P/2;const E=new gg([],ode);if(P===0)return new ge(p,_);for(let D=p;D<m;D+=P)for(let k=_;k<b;k+=P)E.push(new Pv(D+R,k+R,R,h));let O=(function(D){let k=0,B=0,W=0;const G=D[0];for(let Q=0,K=G.length,Z=K-1;Q<K;Z=Q++){const re=G[Q],ce=G[Z],fe=re.x*ce.y-ce.x*re.y;B+=(re.x+ce.x)*fe,W+=(re.y+ce.y)*fe,k+=3*fe}return new Pv(B/k,W/k,0,D)})(h),L=E.length;for(;E.length;){const D=E.pop();(D.d>O.d||!O.d)&&(O=D,u&&console.log("found best %d after %d probes",Math.round(1e4*D.d)/1e4,L)),D.max-O.d<=a||(R=D.h/2,E.push(new Pv(D.p.x-R,D.p.y-R,R,h)),E.push(new Pv(D.p.x+R,D.p.y-R,R,h)),E.push(new Pv(D.p.x-R,D.p.y+R,R,h)),E.push(new Pv(D.p.x+R,D.p.y+R,R,h)),L+=4)}return u&&(console.log(`num probes: ${L}`),console.log(`best distance: ${O.d}`)),O.p}function ode(h,a){return a.max-h.max}class Pv{constructor(a,u,p,_){this.p=new ge(a,u),this.h=p,this.d=(function(m,b){let M=!1,P=1/0;for(let R=0;R<b.length;R++){const E=b[R];for(let O=0,L=E.length,D=L-1;O<L;D=O++){const k=E[O],B=E[D];k.y>m.y!=B.y>m.y&&m.x<(B.x-k.x)*(m.y-k.y)/(B.y-k.y)+k.x&&(M=!M),P=Math.min(P,Ye(m,k,B))}}return(M?1:-1)*Math.sqrt(P)})(this.p,_),this.max=this.d+this.h*Math.SQRT2}}const P4=Number.POSITIVE_INFINITY,ade=Math.sqrt(2);function b$(h,[a,u]){let p=0,_=0;if(u===P4){a<0&&(a=0);const m=a/ade;switch(h){case"top-right":case"top-left":_=m-7;break;case"bottom-right":case"bottom-left":_=7-m;break;case"bottom":_=7-a;break;case"top":_=a-7}switch(h){case"top-right":case"bottom-right":p=-m;break;case"top-left":case"bottom-left":p=m;break;case"left":p=a;break;case"right":p=-a}}else{switch(a=Math.abs(a),u=Math.abs(u),h){case"top-right":case"top-left":case"top":_=u-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-u}switch(h){case"top-right":case"bottom-right":case"right":p=-a;break;case"top-left":case"bottom-left":case"left":p=a}}return[p,_]}function x$(h,a,u,p,_,m,b,M){if(!h)return;const P=X8(a,u,p,_,m);return h.scaleSelf(P*M*b)}function w$(h,a,u,p,_,m,b,M){return{iconPrimary:x$(h.getPrimary(),a,u,p,_,m,b,M),iconSecondary:x$(h.getSecondary(),a,u,p,_,m,b,M)}}function S$(h,a,u,p){if(!h)return;const _=a.get(u.toString());if(h.imagePrimary=_,p){const m=a.get(p.toString());h.imageSecondary=m}}function lde(h,a){for(const u in h.horizontal)E$(h.horizontal[u],a);E$(h.vertical,a)}function E$(h,a){if(h){for(const u of h.positionedLines)for(const p of u.positionedGlyphs)if(p.image!==null){const _=p.image.toString();p.rect=a.get(_).paddedRect}}}function O4(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cde(h,a,u,p,_,m,b,M,P){const R=D4(m.horizontal)||m.vertical,E=u.get("icon-text-fit-padding").evaluate(p,{},_);let O,L=a;return a&&P!=="none"&&(h.allowVerticalPlacement&&m.vertical&&(O=s$(a,m.vertical,P,E,M,b)),R&&(L=s$(a,R,P,E,M,b))),{defaultShapedIcon:L,verticallyShapedIcon:O}}function ude(h,a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W,G,Q,K){let Z=b.textMaxSize.evaluate(a,{},L);Z===void 0?Z=M*b.textScaleFactor:Z*=b.textScaleFactor;const re=h.layers[0].layout,ce=D4(u.horizontal)||u.vertical,fe=D.name==="globe",Pe=ko,Me=h.tilePixelRatio*Z/Pe,Ae=(dt=h.overscaling,h.zoom>18&&dt>2&&(dt>>=1),Math.max(gn/(512*dt),1)*re.get("symbol-spacing")),Ze=re.get("text-padding")*h.tilePixelRatio,Oe=re.get("icon-padding")*h.tilePixelRatio,Je=ut(re.get("text-max-angle")),rt=re.get("icon-rotation-alignment")==="map"&&K!=="point",et=Ae/2;var dt;h.hasAnyIconTextFit===!1&&W!=="none"&&(h.hasAnyIconTextFit=!0);const ct=a.properties?+a.properties[Hg]:null,xt=ct&&h.elevationFeatureIdToIndex?h.elevationFeatureIdToIndex.get(ct):65535,pt=(St,Zt,Yt)=>{if(Zt.x<0||Zt.x>=gn||Zt.y<0||Zt.y>=gn)return;let Cn=null;if(fe){const{x:rn,y:pn,z:en}=D.projectTilePoint(Zt.x,Zt.y,Yt);Cn={anchor:new wh(rn,pn,en,0,void 0),up:D.upVector(Yt,Zt.x,Zt.y)}}(function(rn,pn,en,$n,Sn,Dn,Kn,pr,tr,xr,fr,Er,$r,bi,Qn,Pr,Ni,Wi,Zi,os,yi,Ks,pa,Ss,Ds,Go,xo,hc,Ap){const Bc=rn.addToLineVertexArray(pn,$n);let Iu,Cp,Ip,Kg,oV,aV,lV,cV=0,uV=0,dV=0,hV=0,dD=-1,hD=-1;const Md={};let fV=Qa("");const Jg=en?en.anchor:pn,fD=hc!=="none";let pD=0,mD=0;if(tr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[pD,mD]=tr.layout.get("text-offset").evaluate(yi,{},Ds).map((fc=>fc*ko)):(pD=tr.layout.get("text-radial-offset").evaluate(yi,{},Ds)*ko,mD=P4),rn.allowVerticalPlacement&&Sn.vertical){const fc=Sn.vertical;if(Qn)aV=R4(fc),pr&&(lV=R4(pr));else{const al=tr.layout.get("text-rotate").evaluate(yi,{},Ds)+90;Ip=PT(xr,Jg,pn,fr,Er,$r,fc,bi,al,Pr),pr&&(Kg=PT(xr,Jg,pn,fr,Er,$r,pr,Wi,al))}}if(Dn){const fc=rn.iconSizeData,al=tr.layout.get("icon-rotate").evaluate(yi,{},Ds),Xx=y$(Dn,al,pa,fD,Ks.iconScaleFactor),_D=pr?y$(pr,al,pa,fD,Ks.iconScaleFactor):void 0;Cp=PT(xr,Jg,pn,fr,Er,$r,Dn,Wi,al,null),cV=4*Xx.length;let Qg=null;fc.kind==="source"?(Qg=[Eu*tr.layout.get("icon-size").evaluate(yi,{},Ds)*Ks.iconScaleFactor],Qg[0]>Sp&&Te(`${rn.layerIds[0]}: Value for "icon-size" is >= ${Ox}. Reduce your "icon-size".`)):fc.kind==="composite"&&(Qg=[Eu*Ks.compositeIconSizes[0].evaluate(yi,{},Ds)*Ks.iconScaleFactor,Eu*Ks.compositeIconSizes[1].evaluate(yi,{},Ds)*Ks.iconScaleFactor],(Qg[0]>Sp||Qg[1]>Sp)&&Te(`${rn.layerIds[0]}: Value for "icon-size" is >= ${Ox}. Reduce your "icon-size".`)),rn.addSymbols(rn.icon,Xx,Qg,os,Zi,yi,!1,en,pn,Bc.lineStartIndex,Bc.lineLength,-1,Ss,Ds,Go,xo),dD=rn.icon.placedSymbolArray.length-1,_D&&(uV=4*_D.length,rn.addSymbols(rn.icon,_D,Qg,os,Zi,yi,ol.vertical,en,pn,Bc.lineStartIndex,Bc.lineLength,-1,Ss,Ds,Go,xo),hD=rn.icon.placedSymbolArray.length-1)}for(const fc in Sn.horizontal){const al=Sn.horizontal[fc];Iu||(fV=Qa(al.text),Qn?oV=R4(al):Iu=PT(xr,Jg,pn,fr,Er,$r,al,bi,tr.layout.get("text-rotate").evaluate(yi,{},Ds),Pr));const Xx=al.positionedLines.length===1;if(dV+=T$(rn,en,pn,al,Kn,tr,Qn,yi,Pr,Bc,Sn.vertical?ol.horizontal:ol.horizontalOnly,Xx?Object.keys(Sn.horizontal):[fc],Md,dD,Ks,Ss,Ds,Go),Xx)break}Sn.vertical&&(hV+=T$(rn,en,pn,Sn.vertical,Kn,tr,Qn,yi,Pr,Bc,ol.vertical,["vertical"],Md,hD,Ks,Ss,Ds,Go));let Pp=-1;const gD=(fc,al)=>fc?Math.max(fc,al):al;Pp=gD(oV,Pp),Pp=gD(aV,Pp),Pp=gD(lV,Pp);const jhe=Pp>-1?1:0;rn.glyphOffsetArray.length>=65535&&Te("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),yi.sortKey!==void 0&&rn.addToSortKeyRanges(rn.symbolInstances.length,yi.sortKey),rn.symbolInstances.emplaceBack(pn.x,pn.y,Jg.x,Jg.y,Jg.z,Md.right>=0?Md.right:-1,Md.center>=0?Md.center:-1,Md.left>=0?Md.left:-1,Md.vertical>=0?Md.vertical:-1,dD,hD,fV,Iu!==void 0?Iu:rn.collisionBoxArray.length,Iu!==void 0?Iu+1:rn.collisionBoxArray.length,Ip!==void 0?Ip:rn.collisionBoxArray.length,Ip!==void 0?Ip+1:rn.collisionBoxArray.length,Cp!==void 0?Cp:rn.collisionBoxArray.length,Cp!==void 0?Cp+1:rn.collisionBoxArray.length,Kg||rn.collisionBoxArray.length,Kg?Kg+1:rn.collisionBoxArray.length,fr,dV,hV,cV,uV,jhe,0,pD,mD,Pp,0,fD?1:0,Ap)})(h,Zt,Cn,St,u,p,m,_,h.layers[0],h.collisionBoxArray,a.index,a.sourceLayerIndex,h.index,Ze,Q,R,0,Oe,rt,G,a,b,E,O,L,k,B,W,xt)};if(K==="line")for(const St of d$(a.geometry,0,0,gn,gn)){const Zt=rde(St,Ae,Je,u.vertical||ce,p,Pe,Me,h.overscaling,gn);for(const Yt of Zt)ce&&dde(h,ce.text,et,Yt)||pt(St,Yt,L)}else if(K==="line-center"){for(const St of a.geometry)if(St.length>1){const Zt=nde(St,Je,u.vertical||ce,p,Pe,Me);Zt&&pt(St,Zt,L)}}else if(a.type==="Polygon")for(const St of _T(a.geometry,0)){const Zt=sde(St,16);pt(St[0],new wh(Zt.x,Zt.y,0,0,void 0),L)}else if(a.type==="LineString")for(const St of a.geometry)pt(St,new wh(St[0].x,St[0].y,0,0,void 0),L);else if(a.type==="Point")for(const St of a.geometry)for(const Zt of St)pt([Zt],new wh(Zt.x,Zt.y,0,0,void 0),L)}const Ox=255,Sp=Ox*Eu;function T$(h,a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W,G){const Q=(function(re,ce,fe,Pe,Me,Ae,Ze,Oe){const Je=[];if(ce.positionedLines.length===0)return Je;const rt=Pe.layout.get("text-rotate").evaluate(Ae,{})*Math.PI/180,et=(function(St){const Zt=St[0],Yt=St[1],Cn=Zt*Yt;return Cn>0?[Zt,-Yt]:Cn<0?[-Zt,Yt]:Zt===0?[Yt,Zt]:[Yt,-Zt]})(fe);let dt=Math.abs(ce.top-ce.bottom);for(const St of ce.positionedLines)dt-=St.lineOffset;const ct=ce.positionedLines.length,xt=dt/ct;let pt=ce.top-fe[1];for(let St=0;St<ct;++St){const Zt=ce.positionedLines[St];pt=ide(ce,xt,pt,St);for(const Yt of Zt.positionedGlyphs){if(!Yt.rect)continue;const Cn=Yt.rect||{};let rn=Q8+1,pn=!0,en=1,$n=0;if(Yt.image){const yi=Ze.get(Yt.image.toString());if(!yi)continue;if(yi.sdf){Te("SDF images are not supported in formatted text and will be ignored.");continue}pn=!1,en=yi.pixelRatio,rn=Cv/en}const Sn=(Me||Oe)&&Yt.vertical,Dn=Yt.metrics.advance*Yt.scale/2,Kn=Yt.metrics,pr=Yt.rect;if(pr===null)continue;Oe&&ce.verticalizable&&($n=Yt.image?Dn-Yt.metrics.width*Yt.scale/2:0);const tr=Me?[Yt.x+Dn,Yt.y]:[0,0];let xr=[0,0],fr=[0,0],Er=!1;Me||(Sn?(fr=[Yt.x+Dn+et[0],Yt.y+et[1]-$n],Er=!0):xr=[Yt.x+Dn+fe[0],Yt.y+fe[1]-$n]);const $r=pr.w*Yt.scale/(en*(Yt.localGlyph?Tu:1)),bi=pr.h*Yt.scale/(en*(Yt.localGlyph?Tu:1));let Qn,Pr,Ni,Wi;if(Sn){const yi=Yt.y-pt,Ks=new ge(-Dn,Dn-yi),pa=-Math.PI/2,Ss=new ge(...fr);Qn=new ge(-Dn+xr[0],xr[1]),Qn._rotateAround(pa,Ks)._add(Ss),Qn.x+=-yi+Dn,Qn.y-=(Kn.left-rn)*Yt.scale;const Ds=Yt.image?Kn.advance*Yt.scale:ko*Yt.scale,Go=String.fromCodePoint(Yt.glyph);Yue(Go)?Qn.x+=(1-rn)*Yt.scale:que(Go)?Qn.x+=Ds-Kn.height*Yt.scale+(-rn-1)*Yt.scale:Qn.x+=Yt.image||Kn.width+2*rn===pr.w&&Kn.height+2*rn===pr.h?(Ds-bi)/2:(Ds-(Kn.height+2*rn)*Yt.scale)/2,Pr=new ge(Qn.x,Qn.y-$r),Ni=new ge(Qn.x+bi,Qn.y),Wi=new ge(Qn.x+bi,Qn.y-$r)}else{const yi=(Kn.left-rn)*Yt.scale-Dn+xr[0],Ks=(-Kn.top-rn)*Yt.scale+xr[1],pa=yi+$r,Ss=Ks+bi;Qn=new ge(yi,Ks),Pr=new ge(pa,Ks),Ni=new ge(yi,Ss),Wi=new ge(pa,Ss)}if(rt){let yi;yi=Me?new ge(0,0):Er?new ge(et[0],et[1]):new ge(fe[0],fe[1]),Qn._rotateAround(rt,yi),Pr._rotateAround(rt,yi),Ni._rotateAround(rt,yi),Wi._rotateAround(rt,yi)}const Zi=new ge(0,0),os=new ge(0,0);Je.push({tl:Qn,tr:Pr,bl:Ni,br:Wi,texPrimary:Cn,texSecondary:void 0,writingMode:ce.writingMode,glyphOffset:tr,sectionIndex:Yt.sectionIndex,isSDF:pn,pixelOffsetTL:Zi,pixelOffsetBR:os,minFontScaleX:0,minFontScaleY:0})}}return Je})(0,p,P,m,b,M,_,h.allowVerticalPlacement),K=h.textSizeData;let Z=null;K.kind==="source"?(Z=[Eu*m.layout.get("text-size").evaluate(M,{},W)*k.textScaleFactor],Z[0]>Sp&&Te(`${h.layerIds[0]}: Value for "text-size" is >= ${Ox}. Reduce your "text-size".`)):K.kind==="composite"&&(Z=[Eu*k.compositeTextSizes[0].evaluate(M,{},W)*k.textScaleFactor,Eu*k.compositeTextSizes[1].evaluate(M,{},W)*k.textScaleFactor],(Z[0]>Sp||Z[1]>Sp)&&Te(`${h.layerIds[0]}: Value for "text-size" is >= ${Ox}. Reduce your "text-size".`)),h.addSymbols(h.text,Q,Z,P,b,M,E,a,u,R.lineStartIndex,R.lineLength,D,B,W,G,!1);for(const re of O)L[re]=h.text.placedSymbolArray.length-1;return 4*Q.length}function D4(h){for(const a in h)return h[a];return null}function PT(h,a,u,p,_,m,b,M,P,R){let E=b.top,O=b.bottom,L=b.left,D=b.right;const k=b.collisionPadding;if(k&&(L-=k[0],E-=k[1],D+=k[2],O+=k[3]),P){const B=new ge(L,E),W=new ge(D,E),G=new ge(L,O),Q=new ge(D,O),K=ut(P);let Z=new ge(0,0);R&&(Z=new ge(R[0],R[1])),B._rotateAround(K,Z),W._rotateAround(K,Z),G._rotateAround(K,Z),Q._rotateAround(K,Z),L=Math.min(B.x,W.x,G.x,Q.x),D=Math.max(B.x,W.x,G.x,Q.x),E=Math.min(B.y,W.y,G.y,Q.y),O=Math.max(B.y,W.y,G.y,Q.y)}return h.emplaceBack(a.x,a.y,a.z,u.x,u.y,L,E,D,O,M,p,_,m),h.length-1}function R4(h){h.collisionPadding&&(h.top-=h.collisionPadding[1],h.bottom+=h.collisionPadding[3]);const a=h.bottom-h.top;return a>0?Math.max(10,a):null}function dde(h,a,u,p){const _=h.compareText;if(a in _){const m=_[a];for(let b=m.length-1;b>=0;b--)if(p.dist(m[b])<u)return!0}else _[a]=[];return _[a].push(p),!1}function M$(h,a){const u=h.fovAboveCenter,p=h.elevation?h.elevation.getMinElevationBelowMSL()*a:0,_=(h._camera.position[2]*h.worldSize-p)/Math.cos(h._pitch),m=Math.sin(u)*_/Math.sin(Math.max(Math.PI/2-h._pitch-u,.01));let b=Math.sin(h._pitch)*m+_;const M=_*(1/h._horizonShift);if(!h.elevation||h.elevation.exaggeration()===0){let P=Math.max(h.zoom-17,0);h.isOrthographic&&(P/=10),b*=1+P}return Math.min(1.01*b,M)}function Dx(h,a){if(!a.isReprojectedInTileSpace)return{scale:1<<h.z,x:h.x,y:h.y,x2:h.x+1,y2:h.y+1,projection:a};const u=Math.pow(2,-h.z),p=h.x*u,_=(h.x+1)*u,m=h.y*u,b=(h.y+1)*u,M=Oa(p),P=Oa(_),R=vo(m),E=vo(b),O=a.project(M,R),L=a.project(P,R),D=a.project(P,E),k=a.project(M,E);let B=Math.min(O.x,L.x,D.x,k.x),W=Math.min(O.y,L.y,D.y,k.y),G=Math.max(O.x,L.x,D.x,k.x),Q=Math.max(O.y,L.y,D.y,k.y);const K=u/16;function Z(ce,fe,Pe,Me,Ae,Ze){const Oe=(Pe+Ae)/2,Je=(Me+Ze)/2,rt=a.project(Oa(Oe),vo(Je)),et=Math.max(0,B-rt.x,W-rt.y,rt.x-G,rt.y-Q);B=Math.min(B,rt.x),G=Math.max(G,rt.x),W=Math.min(W,rt.y),Q=Math.max(Q,rt.y),et>K&&(Z(ce,rt,Pe,Me,Oe,Je),Z(rt,fe,Oe,Je,Ae,Ze))}Z(O,L,p,m,_,m),Z(L,D,_,m,_,b),Z(D,k,_,b,p,b),Z(k,O,p,b,p,m),B-=K,W-=K,G+=K,Q+=K;const re=1/Math.max(G-B,Q-W);return{scale:re,x:B*re,y:W*re,x2:G*re,y2:Q*re,projection:a}}function A$(h,{x:a,y:u},p=0){return new ge(((a-p)*h.scale-h.x)*gn,(u*h.scale-h.y)*gn)}const hde=_e.mat4.identity(new Float32Array(16));class Ep{constructor(a){this.spec=a,this.name=a.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(a,u){return{x:0,y:0,z:0}}unproject(a,u){return new Yr(0,0)}projectTilePoint(a,u,p){return{x:a,y:u,z:0}}locationPoint(a,u,p,_=!0){return a._coordinatePoint(a.locationCoordinate(u,p),_)}pixelsPerMeter(a,u){return Do(1,a)*u}pixelSpaceConversion(a,u,p){return 1}farthestPixelDistance(a){return M$(a,a.pixelsPerMeter)}pointCoordinate(a,u,p,_){const m=a.horizonLineFromTop(!1),b=new ge(u,Math.max(m,p));return a.rayIntersectionCoordinate(a.pointRayIntersection(b,_))}pointCoordinate3D(a,u,p){const _=new ge(u,p);if(a.elevation)return a.elevation.pointCoordinate(_);{const m=this.pointCoordinate(a,_.x,_.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(a,u){if(a.elevation&&a.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(a,u.x,u.y);const p=a.horizonLineFromTop();return u.y<p}createInversionMatrix(a,u){return hde}createTileMatrix(a,u,p){let _,m,b;const M=p.canonical,P=_e.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const R=Dx(M,this);_=1,m=R.x+p.wrap*R.scale,b=R.y,_e.mat4.scale(P,P,[_/R.scale,_/R.scale,a.pixelsPerMeter/u])}else _=u/a.zoomScale(M.z),m=(M.x+Math.pow(2,M.z)*p.wrap)*_,b=M.y*_;return _e.mat4.translate(P,P,[m,b,0]),_e.mat4.scale(P,P,[_/gn,_/gn,1]),P}upVector(a,u,p){return[0,0,1]}upVectorScale(a,u,p){return{metersToTile:1}}}class fde extends Ep{constructor(a){super(a),this.range=[4,7],this.center=a.center||[-96,37.5];const[u,p]=this.parallels=a.parallels||[29.5,45.5],_=Math.sin(ut(u));this.n=(_+Math.sin(ut(p)))/2,this.c=1+_*(2*this.n-_),this.r0=Math.sqrt(this.c)/this.n}project(a,u){const{n:p,c:_,r0:m}=this,b=ut(a-this.center[0]),M=ut(u),P=Math.sqrt(_-2*p*Math.sin(M))/p;return{x:P*Math.sin(b*p),y:P*Math.cos(b*p)-m,z:0}}unproject(a,u){const{n:p,c:_,r0:m}=this,b=m+u;let M=Math.atan2(a,Math.abs(b))*Math.sign(b);b*p<0&&(M-=Math.PI*Math.sign(a)*Math.sign(b));const P=ut(this.center[0])*p;M=tn(M,-Math.PI-P,Math.PI-P);const R=$e(Rt(M/p)+this.center[0],-180,180),E=Math.asin($e((_-(a*a+b*b)*p*p)/(2*p),-1,1)),O=$e(Rt(E),-hs,hs);return new Yr(R,O)}}const Rx=1.340264,kx=-.081106,Lx=893e-6,Nx=.003796,OT=Math.sqrt(3)/2;class pde extends Ep{project(a,u){u=u/180*Math.PI,a=a/180*Math.PI;const p=Math.asin(OT*Math.sin(u)),_=p*p,m=_*_*_;return{x:.5*(a*Math.cos(p)/(OT*(Rx+3*kx*_+m*(7*Lx+9*Nx*_)))/Math.PI+.5),y:1-.5*(p*(Rx+kx*_+m*(Lx+Nx*_))/Math.PI+1),z:0}}unproject(a,u){a=(2*a-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,_=p*p,m=_*_*_;for(let E,O,L,D=0;D<12&&(O=p*(Rx+kx*_+m*(Lx+Nx*_))-u,L=Rx+3*kx*_+m*(7*Lx+9*Nx*_),E=O/L,p=$e(p-E,-Math.PI/3,Math.PI/3),_=p*p,m=_*_*_,!(Math.abs(E)<1e-12));++D);const b=OT*a*(Rx+3*kx*_+m*(7*Lx+9*Nx*_))/Math.cos(p),M=Math.asin(Math.sin(p)/OT),P=$e(180*b/Math.PI,-180,180),R=$e(180*M/Math.PI,-hs,hs);return new Yr(P,R)}}class mde extends Ep{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0}project(a,u){return{x:.5+a/360,y:.5-u/360,z:0}}unproject(a,u){const p=360*(a-.5),_=$e(360*(.5-u),-hs,hs);return new Yr(p,_)}}const Ov=Math.PI/2;function DT(h){return Math.tan((Ov+h)/2)}class gde extends Ep{constructor(a){super(a),this.center=a.center||[0,30];const[u,p]=this.parallels=a.parallels||[30,30];let _=ut(u),m=ut(p);this.southernCenter=_+m<0,this.southernCenter&&(_=-_,m=-m);const b=Math.cos(_),M=DT(_);this.n=_===m?Math.sin(_):Math.log(b/Math.cos(m))/Math.log(DT(m)/M),this.f=b*Math.pow(DT(_),this.n)/this.n}project(a,u){u=ut(u),this.southernCenter&&(u=-u),a=ut(a-this.center[0]);const p=1e-6,{n:_,f:m}=this;m>0?u<-Ov+p&&(u=-Ov+p):u>Ov-p&&(u=Ov-p);const b=m/Math.pow(DT(u),_);let M=b*Math.sin(_*a),P=m-b*Math.cos(_*a);return M=.5*(M/Math.PI+.5),P=.5*(P/Math.PI+.5),{x:M,y:this.southernCenter?P:1-P,z:0}}unproject(a,u){a=(2*a-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:p,f:_}=this,m=_-u,b=Math.sign(m),M=Math.sign(p)*Math.sqrt(a*a+m*m);let P=Math.atan2(a,Math.abs(m))*b;m*p<0&&(P-=Math.PI*Math.sign(a)*b);const R=$e(Rt(P/p)+this.center[0],-180,180),E=$e(Rt(2*Math.atan(Math.pow(_/M,1/p))-Ov),-hs,hs);return new Yr(R,this.southernCenter?-E:E)}}class C$ extends Ep{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(a,u){return{x:Lc(a),y:Oo(u),z:0}}unproject(a,u){const p=Oa(a),_=vo(u);return new Yr(p,_)}}const I$=ut(hs);class _de extends Ep{project(a,u){const p=(u=ut(u))*u,_=p*p;return{x:.5*((a=ut(a))*(.8707-.131979*p+_*(_*(.003971*p-.001529*_)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+p*(.015085+_*(.028874*p-.044475-.005916*_)))/Math.PI+1),z:0}}unproject(a,u){a=(2*a-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,_=25,m=0,b=p*p;do{b=p*p;const R=b*b;m=(p*(1.007226+b*(.015085+R*(.028874*b-.044475-.005916*R)))-u)/(1.007226+b*(.045255+R*(.259866*b-.311325-.005916*11*R))),p=$e(p-m,-I$,I$)}while(Math.abs(m)>1e-6&&--_>0);b=p*p;const M=$e(Rt(a/(.8707+b*(b*(b*b*b*(.003971-.001529*b)-.013791)-.131979))),-180,180),P=Rt(p);return new Yr(M,P)}}const P$=ut(hs);class yde extends Ep{project(a,u){u=ut(u),a=ut(a);const p=Math.cos(u),_=2/Math.PI,m=Math.acos(p*Math.cos(a/2)),b=Math.sin(m)/m,M=.5*(a*_+2*p*Math.sin(a/2)/b)||0,P=.5*(u+Math.sin(u)/b)||0;return{x:.5*(M/Math.PI+.5),y:1-.5*(P/Math.PI+1),z:0}}unproject(a,u){let p=a=(2*a-.5)*Math.PI,_=u=(2*(1-u)-1)*Math.PI,m=25;const b=1e-6;let M=0,P=0;do{const R=Math.cos(_),E=Math.sin(_),O=2*E*R,L=E*E,D=R*R,k=Math.cos(p/2),B=Math.sin(p/2),W=2*k*B,G=B*B,Q=1-D*k*k,K=Q?1/Q:0,Z=Q?Math.acos(R*k)*Math.sqrt(1/Q):0,re=.5*(2*Z*R*B+2*p/Math.PI)-a,ce=.5*(Z*E+_)-u,fe=.5*K*(D*G+Z*R*k*L)+1/Math.PI,Pe=K*(W*O/4-Z*E*B),Me=.125*K*(O*B-Z*E*D*W),Ae=.5*K*(L*k+Z*G*R)+.5,Ze=Pe*Me-Ae*fe;M=(ce*Pe-re*Ae)/Ze,P=(re*Me-ce*fe)/Ze,p=$e(p-M,-Math.PI,Math.PI),_=$e(_-P,-P$,P$)}while((Math.abs(M)>b||Math.abs(P)>b)&&--m>0);return new Yr(Rt(p),Rt(_))}}class O$ extends Ep{constructor(a){super(a),this.center=a.center||[0,0],this.parallels=a.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ut(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(a,u){const{scale:p,cosPhi:_}=this;return{x:ut(a)*_*p+.5,y:-Math.sin(ut(u))/_*p+.5,z:0}}unproject(a,u){const{scale:p,cosPhi:_}=this,m=-(u-.5)/p,b=$e(Rt((a-.5)/p)/_,-180,180),M=Math.asin($e(m*_,-1,1)),P=$e(Rt(M),-hs,hs);return new Yr(b,P)}}class vde extends C${constructor(a){super(a),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(a,u,p){const _=Xr(a,u,p),m=Li(Bs(p));return _e.vec3.transformMat4(_,_,m),{x:_[0],y:_[1],z:_[2]}}locationPoint(a,u,p){const _=vh(u.lat,u.lng),m=_e.vec3.normalize([],_),b=p?a._centerAltitude+p:a.elevation?a.elevation.getAtPointOrZero(a.locationCoordinate(u),a._centerAltitude):a._centerAltitude,M=Do(1,0)*gn*b;_e.vec3.scaleAndAdd(_,_,m,M);const P=_e.mat4.identity(new Float64Array(16));return _e.mat4.multiply(P,a.pixelMatrix,a.globeMatrix),_e.vec3.transformMat4(_,_,P),new ge(_[0],_[1])}pixelsPerMeter(a,u){return Do(1,0)*u}pixelSpaceConversion(a,u,p){const _=Do(1,a)*u,m=jn(Do(1,45)*u,_,p);return this.pixelsPerMeter(a,u)/m}createTileMatrix(a,u,p){const _=$s(Bs(p.canonical));return _e.mat4.multiply(new Float64Array(16),a.globeMatrix,_)}createInversionMatrix(a,u){const{center:p}=a,_=Li(Bs(u));return _e.mat4.rotateY(_,_,ut(p.lng)),_e.mat4.rotateX(_,_,ut(p.lat)),_e.mat4.scale(_,_,[a._pixelsPerMercatorPixel,a._pixelsPerMercatorPixel,1]),Float32Array.from(_)}pointCoordinate(a,u,p,_){return Br(a,u,p,!0)||new l(0,0)}pointCoordinate3D(a,u,p){const _=this.pointCoordinate(a,u,p,0);return[_.x,_.y,_.z]}isPointAboveHorizon(a,u){return!Br(a,u.x,u.y,!1)}farthestPixelDistance(a){const u=(function(_,m){const b=_.cameraToCenterDistance,M=_._centerAltitude*m,P=_._camera,R=_._camera.forward(),E=_e.vec3.add([],_e.vec3.scale([],R,-b),[0,0,M]),O=_.worldSize/(2*Math.PI),L=[0,0,-O],D=_.width/_.height,k=Math.tan(_.fovAboveCenter),B=_e.vec3.scale([],P.up(),k),W=_e.vec3.scale([],P.right(),k*D),G=_e.vec3.normalize([],_e.vec3.add([],_e.vec3.add([],R,B),W)),Q=[];let K;if(new Zn(E,G).closestPointOnSphere(L,O,Q)){const Z=_e.vec3.add([],Q,L),re=_e.vec3.sub([],Z,E);K=Math.cos(_.fovAboveCenter)*_e.vec3.length(re)}else{const Z=_e.vec3.sub([],E,L),re=_e.vec3.sub([],L,E);_e.vec3.normalize(re,re);const ce=_e.vec3.length(Z)-O;K=Math.sqrt(ce*(ce+2*O));const fe=Math.acos(K/(O+ce))-Math.acos(_e.vec3.dot(R,re));K*=Math.cos(fe)}return 1.01*K})(a,this.pixelsPerMeter(a.center.lat,a.worldSize)),p=fa(a.zoom);if(p>0){const _=M$(a,Do(1,a.center.lat)*a.worldSize),m=a.worldSize/(2*Math.PI),b=Math.max(a.width,a.height)/a.worldSize*Math.PI;return jn(u,_+m*(1-Math.cos(b)),Math.pow(p,10))}return u}upVector(a,u,p){return Xr(u,p,a,1)}upVectorScale(a){return{metersToTile:Ir(_i(Bs(a)))}}}function D$(h){const a=h.parallels,u=!!a&&Math.abs(a[0]+a[1])<.01;switch(h.name){case"mercator":return new C$(h);case"equirectangular":return new mde(h);case"naturalEarth":return new _de(h);case"equalEarth":return new pde(h);case"winkelTripel":return new yde(h);case"albers":return u?new O$(h):new fde(h);case"lambertConformalConic":return u?new O$(h):new gde(h);case"globe":return new vde(h)}throw new Error(`Invalid projection name: ${h.name}`)}const bde=bp.VectorTileFeature.types,xde=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function RT(h,a,u,p,_,m,b,M,P,R,E,O,L){const D=M?Math.min(Sp,Math.round(M[0])):0,k=M?Math.min(Sp,Math.round(M[1])):0;h.emplaceBack(a,u,Math.round(32*p),Math.round(32*_),m,b,(D<<1)+(P?1:0),k,16*R,16*E,256*O,256*L)}function kT(h,a,u){h.emplaceBack(a,u)}function LT(h,a,u,p,_,m,b){h.emplaceBack(a,u,p,_,m,b)}function NT(h,a,u,p,_){h.emplaceBack(a,u,p,_),h.emplaceBack(a,u,p,_),h.emplaceBack(a,u,p,_),h.emplaceBack(a,u,p,_)}function wde(h){for(const a of h.sections)if(GE(a.text))return!0;return!1}class k4{constructor(a){this.layoutVertexArray=new Jb,this.indexArray=new yo,this.programConfigurations=a,this.segments=new Bi,this.dynamicLayoutVertexArray=new gh,this.opacityVertexArray=new ex,this.placedSymbolArray=new tT,this.iconTransitioningVertexArray=new bd,this.globeExtVertexArray=new Qb,this.zOffsetVertexArray=new mh}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(a,u,p,_,m){this.isEmpty()||(p&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Fue.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,Bue.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,xde,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=a.createVertexBuffer(this.iconTransitioningVertexArray,Vue.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,zue.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=a.createVertexBuffer(this.zOffsetVertexArray,$ue.members,!0)),this.opacityVertexBuffer.itemSize=1),(p||_)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}An(k4,"SymbolBuffers");class L4{constructor(a,u,p){this.layoutVertexArray=new a,this.layoutAttributes=u,this.indexArray=new p,this.segments=new Bi,this.collisionVertexArray=new rx,this.collisionVertexArrayExt=new gh}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,jue.members,!0),this.collisionVertexBufferExt=a.createVertexBuffer(this.collisionVertexArrayExt,Uue.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}An(L4,"CollisionBuffers");class FT{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.lut=a.lut,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((b=>b.fqid)),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=_e.mat4.identity([]),this.placementViewportMatrix=_e.mat4.identity([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=S4(this.zoom,u["text-size"]),this.iconSizeData=S4(this.zoom,u["icon-size"]);const p=this.layers[0].layout,_=p.get("symbol-sort-key"),m=p.get("symbol-z-order");this.canOverlap=p.get("text-allow-overlap")||p.get("icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&_.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=p.get("text-writing-mode").map((b=>ol[b])),this.stateDependentLayerIds=this.layers.filter((b=>b.isStateDependent())).map((b=>b.id)),this.sourceID=a.sourceID,this.projection=a.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new k4(new wd(this.layers,{zoom:this.zoom,lut:this.lut},(a=>a.startsWith("text")||a.startsWith("symbol")))),this.icon=new k4(new wd(this.layers,{zoom:this.zoom,lut:this.lut},(a=>a.startsWith("icon")||a.startsWith("symbol")))),this.glyphOffsetArray=new iT,this.lineVertexArray=new kg,this.symbolInstances=new rT}calculateGlyphDependencies(a,u,p,_,m){for(const b of a){const M=b.codePointAt(0);if(M===void 0)break;if(u[M]=!0,_&&m&&M<=65535){const P=Ax[b];P&&(u[P.charCodeAt(0)]=!0)}}}updateFootprints(a,u){}updateReplacement(a,u){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const p=u.getReplacementRegionsForTile(a.toUnwrapped(),!0);return!g4(this.activeReplacements,p)&&(this.activeReplacements=p,!0)}populate(a,u,p,_){const m=this.layers[0],b=m.layout,M=this.projection.name==="globe",P=b.get("text-font"),R=b.get("text-field"),E=b.get("icon-image"),[O,L]=b.get("icon-size-scale-range"),D=$e(u.scaleFactor||1,O,L),k=(R.value.kind!=="constant"||R.value.value instanceof Uo&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),B=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,W=b.get("symbol-sort-key");if(this.features=[],!k&&!B)return;const G=u.iconDependencies,Q=u.glyphDependencies,K=u.availableImages,Z=new vi(this.zoom);for(const{feature:re,id:ce,index:fe,sourceLayerIndex:Pe}of a){const Me=m._featureFilter.needGeometry,Ae=H(re,Me);if(!m._featureFilter.filter(Z,Ae,p))continue;if(Me||(Ae.geometry=U(re,p,_)),M&&re.type!==1&&p.z<=5){const et=Ae.geometry,dt=.98078528056,ct=(xt,pt)=>{const St=Xr(xt.x,xt.y,p,1),Zt=Xr(pt.x,pt.y,p,1);return _e.vec3.dot(St,Zt)<dt};for(let xt=0;xt<et.length;xt++)et[xt]=T(et[xt],ct)}let Ze,Oe;if(k){const et=m.getValueAndResolveTokens("text-field",Ae,p,K),dt=Uo.factory(et);wde(dt)&&(this.hasRTLText=!0),(!this.hasRTLText||ov()==="unavailable"||this.hasRTLText&&Ll.isParsed())&&(Ze=Gue(dt,m,Ae))}if(B){const et=m.getValueAndResolveTokens("icon-image",Ae,p,K);Oe=et instanceof Ho?et:Ho.build(et)}if(!Ze&&!Oe)continue;const Je=this.sortFeaturesByKey?W.evaluate(Ae,{},p):void 0,rt={id:ce,text:Ze,icon:Oe,index:fe,sourceLayerIndex:Pe,geometry:Ae.geometry,properties:re.properties,type:bde[re.type],sortKey:Je};if(this.features.push(rt),Oe){const et=this.layers[0]._unevaluatedLayout._values,{iconPrimary:dt,iconSecondary:ct}=w$(Oe,this.iconSizeData,et["icon-size"],p,this.zoom,rt,this.pixelRatio,D),xt=dt.id.toString();if(G.has(xt)?G.get(xt).push(dt):G.set(xt,[dt]),ct){const pt=ct.id.toString();G.has(pt)?G.get(pt).push(ct):G.set(pt,[ct])}}if(Ze){const et=P.evaluate(Ae,{},p).join(","),dt=b.get("text-rotation-alignment")==="map"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ol.vertical)>=0;for(const ct of Ze.sections)if(ct.image){const xt=ct.image.getPrimary().scaleSelf(this.pixelRatio),pt=xt.id.toString(),St=G.get(pt)||[];St.push(xt),G.set(pt,St)}else{const xt=zb(Ze.toString()),pt=ct.fontStack||et,St=Q[pt]=Q[pt]||{};this.calculateGlyphDependencies(ct.text,St,dt,this.allowVerticalPlacement,xt)}}}if(b.get("symbol-placement")==="line"&&(this.features=(function(re){const ce={},fe={},Pe=[];let Me=0;function Ae(rt){Pe.push(re[rt]),Me++}function Ze(rt,et,dt){const ct=fe[rt];return delete fe[rt],fe[et]=ct,Pe[ct].geometry[0].pop(),Pe[ct].geometry[0]=Pe[ct].geometry[0].concat(dt[0]),ct}function Oe(rt,et,dt){const ct=ce[et];return delete ce[et],ce[rt]=ct,Pe[ct].geometry[0].shift(),Pe[ct].geometry[0]=dt[0].concat(Pe[ct].geometry[0]),ct}function Je(rt,et,dt){const ct=dt?et[0][et[0].length-1]:et[0][0];return`${rt}:${ct.x}:${ct.y}`}for(let rt=0;rt<re.length;rt++){const et=re[rt],dt=et.geometry,ct=et.text?et.text.toString():null;if(!ct){Ae(rt);continue}const xt=Je(ct,dt),pt=Je(ct,dt,!0);if(xt in fe&&pt in ce&&fe[xt]!==ce[pt]){const St=Oe(xt,pt,dt),Zt=Ze(xt,pt,Pe[St].geometry);delete ce[xt],delete fe[pt],fe[Je(ct,Pe[Zt].geometry,!0)]=Zt,Pe[St].geometry=null}else xt in fe?Ze(xt,pt,dt):pt in ce?Oe(xt,pt,dt):(Ae(rt),ce[xt]=Me-1,fe[pt]=Me-1)}return Pe.filter((rt=>rt.geometry))})(this.features)),b.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",u.elevationFeatures){!this.elevationFeatures&&u.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const re of u.elevationFeatures)this.elevationFeatureIdToIndex.set(re.id,this.elevationFeatures.length),this.elevationFeatures.push(re)}}else b.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort(((re,ce)=>re.sortKey-ce.sortKey))}update(a,u,p,_,m,b,M){this.text.programConfigurations.updatePaintArrays(a,u,m,p,_,b,M),this.icon.programConfigurations.updatePaintArrays(a,u,m,p,_,b,M)}updateRoadElevation(){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let a=!1;for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);if(p.elevationFeatureIndex===65535)continue;const _=this.elevationFeatures[p.elevationFeatureIndex];if(_){const m=.05+_.pointElevation(new ge(p.tileAnchorX,p.tileAnchorY));p.zOffset!==m&&(a=!0,p.zOffset=m)}}a&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const a=(m,b,M)=>{p+=b,p>m.length&&m.resize(p);for(let P=-b;P<0;P++)m.emplace(P+p,M)},u=(m,b,M)=>{_+=b,_>m.length&&m.resize(_);for(let P=-b;P<0;P++)m.emplace(P+_,M)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let p=0,_=0;for(let m=0;m<this.symbolInstances.length;m++){const b=this.symbolInstances.get(m),{numHorizontalGlyphVertices:M,numVerticalGlyphVertices:P,numIconVertices:R}=b,E=b.zOffset,O=R>0;if((M>0||P>0)&&(a(this.text.zOffsetVertexArray,M,E),a(this.text.zOffsetVertexArray,P,E)),O){const{placedIconSymbolIndex:L,verticalPlacedIconSymbolIndex:D}=b;L>=0&&u(this.icon.zOffsetVertexArray,R,E),D>=0&&u(this.icon.zOffsetVertexArray,b.numVerticalIconVertices,E)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=D$(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,u){const p=this.lineVertexArray.length;if(a.segment!==void 0)for(const{x:_,y:m}of u)this.lineVertexArray.emplaceBack(_,m);return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(a,u,p,_,m,b,M,P,R,E,O,L,D,k,B,W){const G=a.indexArray,Q=a.layoutVertexArray,K=a.globeExtVertexArray,Z=a.segments.prepareSegment(4*u.length,Q,G,this.canOverlap?b.sortKey:void 0),re=this.glyphOffsetArray.length,ce=Z.vertexLength,fe=this.allowVerticalPlacement&&M===ol.vertical?Math.PI/2:0,Pe=b.text&&b.text.sections;for(let Ae=0;Ae<u.length;Ae++){const{tl:Ze,tr:Oe,bl:Je,br:rt,texPrimary:et,texSecondary:dt,pixelOffsetTL:ct,pixelOffsetBR:xt,minFontScaleX:pt,minFontScaleY:St,glyphOffset:Zt,isSDF:Yt,sectionIndex:Cn}=u[Ae],rn=Z.vertexLength,pn=Zt[1];if(RT(Q,R.x,R.y,Ze.x,pn+Ze.y,et.x,et.y,p,Yt,ct.x,ct.y,pt,St),RT(Q,R.x,R.y,Oe.x,pn+Oe.y,et.x+et.w,et.y,p,Yt,xt.x,ct.y,pt,St),RT(Q,R.x,R.y,Je.x,pn+Je.y,et.x,et.y+et.h,p,Yt,ct.x,xt.y,pt,St),RT(Q,R.x,R.y,rt.x,pn+rt.y,et.x+et.w,et.y+et.h,p,Yt,xt.x,xt.y,pt,St),P){const{x:en,y:$n,z:Sn}=P.anchor,[Dn,Kn,pr]=P.up;LT(K,en,$n,Sn,Dn,Kn,pr),LT(K,en,$n,Sn,Dn,Kn,pr),LT(K,en,$n,Sn,Dn,Kn,pr),LT(K,en,$n,Sn,Dn,Kn,pr),NT(a.dynamicLayoutVertexArray,en,$n,Sn,fe)}else NT(a.dynamicLayoutVertexArray,R.x,R.y,R.z,fe);if(W){const en=dt||et;kT(a.iconTransitioningVertexArray,en.x,en.y),kT(a.iconTransitioningVertexArray,en.x+en.w,en.y),kT(a.iconTransitioningVertexArray,en.x,en.y+en.h),kT(a.iconTransitioningVertexArray,en.x+en.w,en.y+en.h)}G.emplaceBack(rn,rn+1,rn+2),G.emplaceBack(rn+1,rn+2,rn+3),Z.vertexLength+=4,Z.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Zt[0]),Ae!==u.length-1&&Cn===u[Ae+1].sectionIndex||a.programConfigurations.populatePaintArrays(Q.length,b,b.index,{},D,k,B,Pe&&Pe[Cn])}const Me=P?P.anchor:R;a.placedSymbolArray.emplaceBack(Me.x,Me.y,Me.z,R.x,R.y,re,this.glyphOffsetArray.length-re,ce,E,O,R.segment,p?p[0]:0,p?p[1]:0,_[0],_[1],M,0,!1,0,L,0)}_commitLayoutVertex(a,u,p,_,m,b,M){a.emplaceBack(u,p,_,m,b,Math.round(M.x),Math.round(M.y))}_addCollisionDebugVertices(a,u,p,_,m,b,M){const P=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),R=P.vertexLength,E=M.tileAnchorX,O=M.tileAnchorY;for(let D=0;D<4;D++)p.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(p.collisionVertexArrayExt,u,a.padding,M.zOffset),this._commitLayoutVertex(p.layoutVertexArray,_,m,b,E,O,new ge(a.x1,a.y1)),this._commitLayoutVertex(p.layoutVertexArray,_,m,b,E,O,new ge(a.x2,a.y1)),this._commitLayoutVertex(p.layoutVertexArray,_,m,b,E,O,new ge(a.x2,a.y2)),this._commitLayoutVertex(p.layoutVertexArray,_,m,b,E,O,new ge(a.x1,a.y2)),P.vertexLength+=4;const L=p.indexArray;L.emplaceBack(R,R+1),L.emplaceBack(R+1,R+2),L.emplaceBack(R+2,R+3),L.emplaceBack(R+3,R),P.primitiveLength+=4}_addTextDebugCollisionBoxes(a,u,p,_,m,b){for(let M=_;M<m;M++){const P=p.get(M),R=this.getSymbolInstanceTextSize(a,b,u,M);this._addCollisionDebugVertices(P,R,this.textCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,b)}}_addIconDebugCollisionBoxes(a,u,p,_,m,b){for(let M=_;M<m;M++){const P=p.get(M),R=this.getSymbolInstanceIconSize(a,u,b.placedIconSymbolIndex);this._addCollisionDebugVertices(P,R,this.iconCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,b)}}generateCollisionDebugBuffers(a,u,p){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new L4(Og,q8.members,bd),this.iconCollisionBox=new L4(Og,q8.members,bd);const _=Mv(this.iconSizeData,a),m=Mv(this.textSizeData,a,p);for(let b=0;b<this.symbolInstances.length;b++){const M=this.symbolInstances.get(b);this._addTextDebugCollisionBoxes(m,a,u,M.textBoxStartIndex,M.textBoxEndIndex,M),this._addTextDebugCollisionBoxes(m,a,u,M.verticalTextBoxStartIndex,M.verticalTextBoxEndIndex,M),this._addIconDebugCollisionBoxes(_,a,u,M.iconBoxStartIndex,M.iconBoxEndIndex,M),this._addIconDebugCollisionBoxes(_,a,u,M.verticalIconBoxStartIndex,M.verticalIconBoxEndIndex,M)}}getSymbolInstanceTextSize(a,u,p,_){const m=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:_),b=ET(this.textSizeData,a,m)/ko;return this.tilePixelRatio*b}getSymbolInstanceIconSize(a,u,p){const _=this.icon.placedSymbolArray.get(p),m=ET(this.iconSizeData,a,_);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(a,u,p,_){a.emplaceBack(u,-p,-p,_),a.emplaceBack(u,p,-p,_),a.emplaceBack(u,p,p,_),a.emplaceBack(u,-p,p,_)}_updateTextDebugCollisionBoxes(a,u,p,_,m,b,M){for(let P=_;P<m;P++){const R=p.get(P),E=this.getSymbolInstanceTextSize(a,b,u,P);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,E,R.padding,b.zOffset)}}_updateIconDebugCollisionBoxes(a,u,p,_,m,b,M){for(let P=_;P<m;P++){const R=p.get(P),E=this.getSymbolInstanceIconSize(a,u,b.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,E,R.padding,b.zOffset)}}updateCollisionDebugBuffers(a,u,p,_){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const m=Mv(this.iconSizeData,a,_),b=Mv(this.textSizeData,a,p);for(let M=0;M<this.symbolInstances.length;M++){const P=this.symbolInstances.get(M);this._updateTextDebugCollisionBoxes(b,a,u,P.textBoxStartIndex,P.textBoxEndIndex,P,p),this._updateTextDebugCollisionBoxes(b,a,u,P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P,p),this._updateIconDebugCollisionBoxes(m,a,u,P.iconBoxStartIndex,P.iconBoxEndIndex,P,_),this._updateIconDebugCollisionBoxes(m,a,u,P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex,P,_)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(a,u,p,_,m,b,M,P,R){const E={};if(u<p){const{x1:O,y1:L,x2:D,y2:k,padding:B,projectedAnchorX:W,projectedAnchorY:G,projectedAnchorZ:Q,tileAnchorX:K,tileAnchorY:Z,featureIndex:re}=a.get(u);E.textBox={x1:O,y1:L,x2:D,y2:k,padding:B,projectedAnchorX:W,projectedAnchorY:G,projectedAnchorZ:Q,tileAnchorX:K,tileAnchorY:Z},E.textFeatureIndex=re}if(_<m){const{x1:O,y1:L,x2:D,y2:k,padding:B,projectedAnchorX:W,projectedAnchorY:G,projectedAnchorZ:Q,tileAnchorX:K,tileAnchorY:Z,featureIndex:re}=a.get(_);E.verticalTextBox={x1:O,y1:L,x2:D,y2:k,padding:B,projectedAnchorX:W,projectedAnchorY:G,projectedAnchorZ:Q,tileAnchorX:K,tileAnchorY:Z},E.verticalTextFeatureIndex=re}if(b<M){const{x1:O,y1:L,x2:D,y2:k,padding:B,projectedAnchorX:W,projectedAnchorY:G,projectedAnchorZ:Q,tileAnchorX:K,tileAnchorY:Z,featureIndex:re}=a.get(b);E.iconBox={x1:O,y1:L,x2:D,y2:k,padding:B,projectedAnchorX:W,projectedAnchorY:G,projectedAnchorZ:Q,tileAnchorX:K,tileAnchorY:Z},E.iconFeatureIndex=re}if(P<R){const{x1:O,y1:L,x2:D,y2:k,padding:B,projectedAnchorX:W,projectedAnchorY:G,projectedAnchorZ:Q,tileAnchorX:K,tileAnchorY:Z,featureIndex:re}=a.get(P);E.verticalIconBox={x1:O,y1:L,x2:D,y2:k,padding:B,projectedAnchorX:W,projectedAnchorY:G,projectedAnchorZ:Q,tileAnchorX:K,tileAnchorY:Z},E.verticalIconFeatureIndex=re}return E}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(a,u){const p=a.placedSymbolArray.get(u),_=p.vertexStartIndex+4*p.numGlyphs;for(let m=p.vertexStartIndex;m<_;m+=4)a.indexArray.emplaceBack(m,m+1,m+2),a.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(a),p=Math.cos(a),_=[],m=[],b=[];for(let M=0;M<this.symbolInstances.length;++M){b.push(M);const P=this.symbolInstances.get(M);_.push(0|Math.round(u*P.tileAnchorX+p*P.tileAnchorY)),m.push(P.featureIndex)}return b.sort(((M,P)=>_[M]-_[P]||m[P]-m[M])),b}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let a=0;a<this.symbolInstances.length;++a)this.symbolInstanceIndexesSortedZOffset.push(a)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort(((a,u)=>this.symbolInstances.get(u).zOffset-this.symbolInstances.get(a).zOffset))}addToSortKeyRanges(a,u){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex);const{rightJustifiedTextSymbolIndex:_,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:b,verticalPlacedTextSymbolIndex:M,placedIconSymbolIndex:P,verticalPlacedIconSymbolIndex:R}=p;_>=0&&this.addIndicesForPlacedSymbol(this.text,_),m>=0&&m!==_&&this.addIndicesForPlacedSymbol(this.text,m),b>=0&&b!==m&&b!==_&&this.addIndicesForPlacedSymbol(this.text,b),M>=0&&this.addIndicesForPlacedSymbol(this.text,M),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P),R>=0&&this.addIndicesForPlacedSymbol(this.icon,R)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let R$,k$,N4;An(FT,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),FT.addDynamicAttributes=NT;class L${constructor(a){this.type=a.property.overrides?a.property.overrides.runtimeType:zf,this.defaultValue=a}evaluate(a){if(a.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(a.formattedSection))return u.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}An(L$,"FormatSectionOverride",{omit:["defaultValue"]});const F4=()=>N4||(N4={layout:R$||(R$=new Xi({"symbol-placement":new hn(Tt.layout_symbol["symbol-placement"]),"symbol-spacing":new hn(Tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new hn(Tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Mn(Tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new hn(Tt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new hn(Tt.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new hn(Tt.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new hn(Tt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new hn(Tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new hn(Tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new hn(Tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Mn(Tt.layout_symbol["icon-size"]),"icon-size-scale-range":new hn(Tt.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Mn(Tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Mn(Tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Mn(Tt.layout_symbol["icon-image"]),"icon-rotate":new Mn(Tt.layout_symbol["icon-rotate"]),"icon-padding":new hn(Tt.layout_symbol["icon-padding"]),"icon-keep-upright":new hn(Tt.layout_symbol["icon-keep-upright"]),"icon-offset":new Mn(Tt.layout_symbol["icon-offset"]),"icon-anchor":new Mn(Tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new hn(Tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new hn(Tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new hn(Tt.layout_symbol["text-rotation-alignment"]),"text-field":new Mn(Tt.layout_symbol["text-field"]),"text-font":new Mn(Tt.layout_symbol["text-font"]),"text-size":new Mn(Tt.layout_symbol["text-size"]),"text-size-scale-range":new hn(Tt.layout_symbol["text-size-scale-range"]),"text-max-width":new Mn(Tt.layout_symbol["text-max-width"]),"text-line-height":new Mn(Tt.layout_symbol["text-line-height"]),"text-letter-spacing":new Mn(Tt.layout_symbol["text-letter-spacing"]),"text-justify":new Mn(Tt.layout_symbol["text-justify"]),"text-radial-offset":new Mn(Tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new hn(Tt.layout_symbol["text-variable-anchor"]),"text-anchor":new Mn(Tt.layout_symbol["text-anchor"]),"text-max-angle":new hn(Tt.layout_symbol["text-max-angle"]),"text-writing-mode":new hn(Tt.layout_symbol["text-writing-mode"]),"text-rotate":new Mn(Tt.layout_symbol["text-rotate"]),"text-padding":new hn(Tt.layout_symbol["text-padding"]),"text-keep-upright":new hn(Tt.layout_symbol["text-keep-upright"]),"text-transform":new Mn(Tt.layout_symbol["text-transform"]),"text-offset":new Mn(Tt.layout_symbol["text-offset"]),"text-allow-overlap":new hn(Tt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new hn(Tt.layout_symbol["text-ignore-placement"]),"text-optional":new hn(Tt.layout_symbol["text-optional"]),visibility:new hn(Tt.layout_symbol.visibility)})),paint:k$||(k$=new Xi({"icon-opacity":new Mn(Tt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Mn(Tt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Mn(Tt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Mn(Tt.paint_symbol["text-emissive-strength"]),"icon-color":new Mn(Tt.paint_symbol["icon-color"]),"icon-halo-color":new Mn(Tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Mn(Tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Mn(Tt.paint_symbol["icon-halo-blur"]),"icon-translate":new hn(Tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new hn(Tt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Mn(Tt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Mn(Tt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Mn(Tt.paint_symbol["text-occlusion-opacity"]),"text-color":new Mn(Tt.paint_symbol["text-color"],{runtimeType:jo,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Mn(Tt.paint_symbol["text-halo-color"]),"text-halo-width":new Mn(Tt.paint_symbol["text-halo-width"]),"text-halo-blur":new Mn(Tt.paint_symbol["text-halo-blur"]),"text-translate":new hn(Tt.paint_symbol["text-translate"]),"text-translate-anchor":new hn(Tt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new hn(Tt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new hn(Tt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new hn(Tt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new hn(Tt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Mn(Tt.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},N4);class zT extends oo{constructor(a,u,p,_){super(a,F4(),u,p,_),this._colorAdjustmentMatrix=_e.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=a.paint!==void 0&&("icon-occlusion-opacity"in a.paint||"text-occlusion-opacity"in a.paint)}recalculate(a,u){super.recalculate(a,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const p=this.layout.get("text-writing-mode");if(p){const _=[];for(const m of p)_.indexOf(m)<0&&_.push(m);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(a,u,p,_){return this._saturation===a&&this._contrast===u&&this._brightnessMin===p&&this._brightnessMax===_||(this._colorAdjustmentMatrix=(function(m,b,M,P){m=yt(m),b=cr(b);const R=_e.mat4.create(),E=m/3,O=1-2*E,L=[O,E,E,0,E,O,E,0,E,E,O,0,0,0,0,1],D=.5-.5*b,k=P-M;return _e.mat4.multiply(R,[k,0,0,0,0,k,0,0,0,0,k,0,M,M,M,1],[b,0,0,0,0,b,0,0,0,0,b,0,D,D,D,1]),_e.mat4.multiply(R,R,L),R})(a,u,p,_),this._saturation=a,this._contrast=u,this._brightnessMin=p,this._brightnessMax=_),this._colorAdjustmentMatrix}getValueAndResolveTokens(a,u,p,_){const m=this.layout.get(a).evaluate(u,{},p,_),b=this._unevaluatedLayout._values[a];return b.isDataDriven()||Qy(b.value)||!m?m:(function(M,P){return P.replace(/{([^{}]+)}/g,((R,E)=>E in M?String(M[E]):""))})(u.properties,m)}createBucket(a){return new FT(a)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const a of F4().paint.overridableProperties){if(!zT.hasPaintOverride(this.layout,a))continue;const u=this.paint.get(a),p=new L$(u),_=new Rb(p,u.property.specification,this.scope,this.options);let m=null;m=u.value.kind==="constant"||u.value.kind==="source"?new kb("source",_):new np("composite",_,u.value.zoomStops,u.value._interpolationType),this.paint._values[a]=new ap(u.property,m,u.parameters)}}_handleOverridablePaintPropertyUpdate(a,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&zT.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,u){const p=a.get("text-field"),_=F4().paint.properties[u];let m=!1;const b=M=>{for(const P of M)if(_.overrides&&_.overrides.hasOverride(P))return void(m=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Uo)b(p.value.value.sections);else if(p.value.kind==="source"){const M=R=>{m||(R instanceof cu&&Ps(R.value)===ug?b(R.value.sections):R instanceof jf?b(R.sections):R.eachChild(M))},P=p.value;P._styleExpression&&M(P._styleExpression.expression)}return m}getProgramIds(){return["symbol"]}getDefaultProgramParams(a,u,p){return{config:new yh(this,{zoom:u,lut:p}),overrideFog:!1}}}let N$,F$,z$,B$;var z4=Gr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function B4(h){switch(h){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function $4(h){switch(h){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class V4{constructor(a,u,p,_){this.context=a,this.format=p,this.useMipmap=_&&_.useMipmap,this.texture=a.gl.createTexture(),this.update(u,{premultiply:_&&_.premultiply})}update(a,u){const p=a&&a instanceof HTMLVideoElement&&a.width===0?a.videoWidth:a.width,_=a&&a instanceof HTMLVideoElement&&a.height===0?a.videoHeight:a.height,{context:m}=this,{gl:b}=m,{x:M,y:P}=u&&u.position?u.position:{x:0,y:0},R=M+p,E=P+_;!this.size||this.size[0]===R&&this.size[1]===E||(b.bindTexture(b.TEXTURE_2D,null),b.deleteTexture(this.texture),this.texture=b.createTexture(),this.size=null),b.bindTexture(b.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA8&&(!u||u.premultiply!==!1));const O=a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||ImageBitmap&&a instanceof ImageBitmap;if(!this.size&&R>0&&E>0){const L=this.useMipmap?Math.floor(Math.log2(Math.max(R,E)))+1:1;b.texStorage2D(b.TEXTURE_2D,L,this.format,R,E),this.size=[R,E]}if(this.size)if(O)b.texSubImage2D(b.TEXTURE_2D,0,M,P,B4(this.format),$4(this.format),a);else{const L=a.data;L&&b.texSubImage2D(b.TEXTURE_2D,0,M,P,p,_,B4(this.format),$4(this.format),L)}this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(a,u,p=!1){const{context:_}=this,{gl:m}=_;m.bindTexture(m.TEXTURE_2D,this.texture),a!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,a),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!p?a===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:a),this.minFilter=a),u!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,u),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,u),this.wrapS=u)}bindExtraParam(a,u,p,_){const{context:m}=this,{gl:b}=m;b.bindTexture(b.TEXTURE_2D,this.texture),u!==this.magFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,u),this.magFilter=u),a!==this.minFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,this.useMipmap?a===b.NEAREST?b.NEAREST_MIPMAP_NEAREST:b.LINEAR_MIPMAP_LINEAR:a),this.minFilter=a),p!==this.wrapS&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,p),this.wrapS=p),_!==this.wrapT&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,_),this.wrapT=_)}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class BT{constructor(a,u){this.context=a,this.texture=u}bind(a,u){const{context:p}=this,{gl:_}=p;_.bindTexture(_.TEXTURE_2D,this.texture),a!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,a),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,a),this.minFilter=a),u!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrapS=u)}}function $T(h,a,u,p,_,m,b,M){const P=[h,a,1,u,p,1,_,m,1],R=[b,M,1],E=_e.mat3.adjoint([],P),[O,L,D]=_e.vec3.transformMat3(R,R,E);return _e.mat3.multiply(P,P,[O,0,0,0,L,0,0,0,D])}function $$(h,a,u,p,_,m,b,M){const P=(function(R,E,O,L,D,k,B,W){const G=$T(0,0,1,0,1,1,0,1),Q=$T(R,E,O,L,D,k,B,W),K=_e.mat3.adjoint([],G);return _e.mat3.multiply(Q,Q,K)})(h,a,u,p,_,m,b,M);return[P[2]/P[8]/gn,P[5]/P[8]/gn]}function VT(h){return[h[0],Math.min(Math.max(h[1],-hs),hs)]}class V$ extends sc{constructor(a,u,p,_){super(),this.id=a,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(_),this.options=u,this._dirty=!1}load(a,u){if(this._loaded=u||!1,this.fire(new Ca("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return a&&(this.coordinates=a),this._loaded=!0,void this._finishLoading();this._imageRequest=tb(this.map._requestManager.transformRequest(this.url,io.Image),((p,_)=>{this._imageRequest=null,this._loaded=!0,p?this.fire(new Ff(p)):_&&(this.image=_ instanceof HTMLImageElement?Nt.getImageData(_):_,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,a&&(this.coordinates=a),this._finishLoading())}))}loaded(){return this._loaded}updateImage(a){return a.url?(this._imageRequest&&a.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=a.url,this.load(a.coordinates,this._loaded),this):this}setTexture(a){if(!(a.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new BT(this.map.painter.context,a.handle),this.width=a.dimensions[0],this.height=a.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Ca("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(a){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof BT||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(a){if(this.coordinates=a,this._boundsArray=void 0,this._unsupportedCoords=!1,!a.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let u=a[0][1],p=a[0][1];for(const m of a)m[1]>p&&(p=m[1]),m[1]<u&&(u=m[1]);const _=(p+u)/2;if(_>hs?this.onNorthPole=!0:_<-hs&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=a.map(l.fromLngLat);this.tileID=(function(b){let M=1/0,P=1/0,R=-1/0,E=-1/0;for(const B of b)M=Math.min(M,B.x),P=Math.min(P,B.y),R=Math.max(R,B.x),E=Math.max(E,B.y);const O=Math.max(R-M,E-P),L=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),D=Math.pow(2,L);let k=Math.floor((M+R)/2*D);return k>1&&(k-=1),new Gt(L,k,Math.floor((P+E)/2*D))})(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Ca("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(a){for(const G in this.tiles){const Q=this.tiles[G];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const u=Dx(new Gt(0,0,0),this.map.transform.projection),p=[u.projection.project(this.coordinates[0][0],this.coordinates[0][1]),u.projection.project(this.coordinates[1][0],this.coordinates[1][1]),u.projection.project(this.coordinates[2][0],this.coordinates[2][1]),u.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!(function(G){const Q=G[1].x-G[0].x,K=G[1].y-G[0].y,Z=G[2].x-G[1].x,re=G[2].y-G[1].y,ce=G[3].x-G[2].x,fe=G[3].y-G[2].y,Pe=G[0].x-G[3].x,Me=G[0].y-G[3].y,Ae=Q*re-Z*K,Ze=Z*fe-ce*re,Oe=ce*Me-Pe*fe,Je=Pe*K-Q*Me;return Ae>0&&Ze>0&&Oe>0&&Je>0||Ae<0&&Ze<0&&Oe<0&&Je<0})(p))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const _=Dx(this.tileID,this.map.transform.projection),[m,b,M,P]=this.coordinates.map((G=>{const Q=_.projection.project(G[0],G[1]);return A$(_,Q)._round()}));this.perspectiveTransform=$$(m.x,m.y,b.x,b.y,M.x,M.y,P.x,P.y);const R=this._boundsArray=new vu;R.emplaceBack(m.x,m.y,0,0),R.emplaceBack(b.x,b.y,gn,0),R.emplaceBack(P.x,P.y,0,gn),R.emplaceBack(M.x,M.y,gn,gn),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=a.createVertexBuffer(R,z4.members),this.boundsSegments=Bi.simpleSegment(0,0,4,2);const E=[],O=[VT((L=this.coordinates)[0]),VT(L[1]),VT(L[2]),VT(L[3])];var L;const[D,k,B,W]=(function(G){let Q=G[0][0],K=Q,Z=G[0][1],re=Z;for(let ce=1;ce<G.length;ce++)G[ce][0]<Q?Q=G[ce][0]:G[ce][0]>K&&(K=G[ce][0]),G[ce][1]<Z?Z=G[ce][1]:G[ce][1]>re&&(re=G[ce][1]);return[Q,Z,K-Q,re-Z]})(O);{const G=new vu,[Q,K,Z,re]=(function(ct){let xt=ct[0].x,pt=xt,St=ct[0].y,Zt=St;for(let Yt=1;Yt<ct.length;Yt++)ct[Yt].x<xt?xt=ct[Yt].x:ct[Yt].x>pt&&(pt=ct[Yt].x),ct[Yt].y<St?St=ct[Yt].y:ct[Yt].y>Zt&&(Zt=ct[Yt].y);return[xt,St,pt-xt,Zt-St]})(p),ce=ct=>[(ct.x-Q)/Z,(ct.y-K)/re],[fe,Pe,Me,Ae]=p.map(ce),Ze=(function(ct,xt,pt,St,Zt,Yt,Cn,rn){const pn=$T(0,0,1,0,1,1,0,1),en=$T(ct,xt,pt,St,Zt,Yt,Cn,rn),$n=_e.mat3.adjoint([],en);return _e.mat3.multiply(pn,pn,$n)})(fe[0],fe[1],Pe[0],Pe[1],Me[0],Me[1],Ae[0],Ae[1]);this.elevatedGlobePerspectiveTransform=$$(fe[0],fe[1],Pe[0],Pe[1],Me[0],Me[1],Ae[0],Ae[1]);const Oe=(ct,xt)=>{E.push(ct.lng);const pt=Math.round((ct.lng-D)/B*gn),St=Math.round((ct.lat-k)/W*gn),Zt=ce(xt),Yt=_e.vec3.transformMat3([],[Zt[0],Zt[1],1],Ze),Cn=Math.round(Yt[0]/Yt[2]*gn),rn=Math.round(Yt[1]/Yt[2]*gn);G.emplaceBack(pt,St,Cn,rn)},Je=p[3].x-p[0].x,rt=p[3].y-p[0].y,et=p[2].x-p[1].x,dt=p[2].y-p[1].y;for(let ct=0;ct<65;ct++){const xt=ct/64,pt=[p[0].x+xt*Je,p[0].y+xt*rt],St=[p[1].x+xt*et,p[1].y+xt*dt],Zt=St[0]-pt[0],Yt=St[1]-pt[1];for(let Cn=0;Cn<65;Cn++){const rn=Cn/64,pn={x:pt[0]+Zt*rn,y:pt[1]+Yt*rn};Oe(u.projection.unproject(pn.x,pn.y),pn)}}this.elevatedGlobeVertexBuffer=a.createVertexBuffer(G,z4.members)}{this.maxLongitudeTriangleSize=0;let G=[],Q=new yo;const K=(Z,re,ce)=>{Q.emplaceBack(Z,re,ce);const fe=E[Z],Pe=E[re],Me=E[ce],Ae=Math.min(Math.min(fe,Pe),Me),Ze=Math.max(Math.max(fe,Pe),Me)-Ae;Ze>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Ze),G.push(Ae+Ze/2)};for(let Z=0;Z<64;Z++)for(let re=0;re<64;re++){const ce=65*Z+re,fe=ce+1,Pe=ce+65,Me=Pe+1;K(ce,Pe,fe),K(fe,Pe,Me)}[G,Q]=(function(Z,re){const ce=Array.from({length:Z.length},((Me,Ae)=>Ae));ce.sort(((Me,Ae)=>Z[Me]-Z[Ae]));const fe=[],Pe=new yo;for(let Me=0;Me<ce.length;Me++){const Ae=ce[Me];fe.push(Z[Ae]);const Ze=3*Ae,Oe=Ze+1;Pe.emplaceBack(re.uint16[Ze],re.uint16[Oe],re.uint16[Oe+1])}return[fe,Pe]})(G,Q),this.elevatedGlobeTrianglesCenterLongitudes=G,this.elevatedGlobeIndexBuffer=a.createIndexBuffer(Q)}this.elevatedGlobeSegments=Bi.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,B/gn,0,W/gn,0,0,k,D,0])}prepare(){const a=Object.keys(this.tiles).length!==0;if(this.tileID&&!a)return;const u=this.map.painter.context,p=u.gl;!this._dirty||this.texture instanceof BT||(this.texture?this.texture.update(this.image):(this.texture=new V4(u,this.image,p.RGBA8),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this._dirty=!1),a&&this._prepareData(u)}loadTile(a,u){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},u(null)):(a.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(a){const u=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!u)return null;const p=this.elevatedGlobeTrianglesCenterLongitudes;let _=(m=a+180)+360*Math.round((p[0]-m)/360);var m;const b=new Bi,M=(O,L)=>{b.segments.push({vertexOffset:0,primitiveOffset:O,vertexLength:u.segments[0].vertexLength,primitiveLength:L,sortKey:void 0,vaos:{}})},P=.51*this.maxLongitudeTriangleSize;if(Math.abs(p[0]-_)<=P){const O=Gn(p,0,p.length,_+P);return O===p.length||M(O,Hn(p,O+1,p.length,_+360-P)-O),b}_<p[0]&&(_+=360);const R=Hn(p,0,p.length,_-P);if(R===p.length)return M(0,p.length),b;M(0,R-0);const E=Gn(p,R+1,p.length,_+P);return E!==p.length&&M(E,p.length-E),b}}const Sde=(Math.pow(256,2)-1)/16907520;class j$ extends oo{constructor(a,u,p,_){super(a,{layout:z$||(z$=new Xi({visibility:new hn(Tt.layout_raster.visibility)})),paint:B$||(B$=new Xi({"raster-opacity":new hn(Tt.paint_raster["raster-opacity"]),"raster-color":new cp(Tt.paint_raster["raster-color"]),"raster-color-mix":new hn(Tt.paint_raster["raster-color-mix"]),"raster-color-range":new hn(Tt.paint_raster["raster-color-range"]),"raster-hue-rotate":new hn(Tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new hn(Tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new hn(Tt.paint_raster["raster-brightness-max"]),"raster-saturation":new hn(Tt.paint_raster["raster-saturation"]),"raster-contrast":new hn(Tt.paint_raster["raster-contrast"]),"raster-resampling":new hn(Tt.paint_raster["raster-resampling"]),"raster-fade-duration":new hn(Tt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new hn(Tt.paint_raster["raster-emissive-strength"]),"raster-array-band":new hn(Tt.paint_raster["raster-array-band"]),"raster-elevation":new hn(Tt.paint_raster["raster-elevation"]),"raster-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},u,p,_),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(a){return!(a&&a._source instanceof V$&&(a._source.onNorthPole||a._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(a){a!=="raster-color"&&a!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(a){if(!this.hasColorMap()||!this._curRampRange)return;const u=this._transitionablePaint._values["raster-color"].value.expression,[p,_]=a||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(p)&&isNaN(_)||p===this._curRampRange[0]&&_===this._curRampRange[1]||(this.colorRamp=_x({expression:u,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:p,end:_}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[p,_])}}let U$,H$,W$,G$,Y$;class q$ extends oo{constructor(a,u,p,_){super(a,{layout:U$||(U$=new Xi({visibility:new hn(Tt["layout_raster-particle"].visibility)})),paint:H$||(H$=new Xi({"raster-particle-array-band":new hn(Tt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new hn(Tt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new cp(Tt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new hn(Tt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new hn(Tt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new hn(Tt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new hn(Tt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new hn(Tt["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},u,p,_),this._updateColorRamp(),this.lastInvalidatedAt=Nt.now()}onRemove(a){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(a){return!1}_handleSpecialPaintPropertyUpdate(a){a!=="raster-particle-color"&&a!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),a==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const a=this._transitionablePaint._values["raster-particle-color"].value.expression,u=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=_x({expression:a,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:u}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Nt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class Ede extends oo{constructor(a,u){super(a,{},u,null),this.implementation=a,a.slot&&(this.slot=a.slot)}is3D(a){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(a){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(a){this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)}onRemove(a){this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)}}function j4(h,a,u){const p=[0,0,1],_=_e.quat.identity([]);return _e.quat.rotateY(_,_,u?-ut(h)+Math.PI:ut(h)),_e.quat.rotateX(_,_,-ut(a)),_e.vec3.transformQuat(p,p,_),_e.vec3.normalize(p,p)}function X$(h,a){const u=jT(h.projection,h.zoom,h.width,h.height),p=(function(m,b,M,P,R){const E=new Yr(M.lng-180*Tp,M.lat),O=new Yr(M.lng+180*Tp,M.lat),L=m.project(E.lng,E.lat),D=m.project(O.lng,O.lat),k=-Math.atan2(D.y-L.y,D.x-L.x),B=l.fromLngLat(M);B.y=$e(B.y,-1+Tp,1-Tp);const W=B.toLngLat(),G=m.project(W.lng,W.lat),Q=l.fromLngLat(W);Q.x+=Tp;const K=Q.toLngLat(),Z=m.project(K.lng,K.lat),re=K$(Z.x-G.x,Z.y-G.y,k),ce=l.fromLngLat(W);ce.y+=Tp;const fe=ce.toLngLat(),Pe=m.project(fe.lng,fe.lat),Me=K$(Pe.x-G.x,Pe.y-G.y,k),Ae=Math.abs(re.x)/Math.abs(Me.y),Ze=_e.mat4.identity([]);_e.mat4.rotateZ(Ze,Ze,-k*(1-(R?0:P)));const Oe=_e.mat4.identity([]);return _e.mat4.scale(Oe,Oe,[1,1-(1-Ae)*P,1]),Oe[4]=-Me.x/Me.y*P,_e.mat4.rotateZ(Oe,Oe,k),_e.mat4.multiply(Oe,Ze,Oe),Oe})(h.projection,0,h.center,u,a),_=Z$(h);return _e.mat4.scale(p,p,[_,_,1]),p}function Z$(h){const a=h.projection,u=jT(h.projection,h.zoom,h.width,h.height),p=U4(a,h.center),_=U4(a,Yr.convert(a.center));return Math.pow(2,p*u+(1-u)*_)}function jT(h,a,u,p,_=1/0){const m=h.range;if(!m)return 0;const b=Math.min(_,Math.max(u,p)),M=Math.log(b/1024)/Math.LN2;return Mt(m[0]+M,m[1]+M,a)}const Tp=1/4e4;function U4(h,a){const u=$e(a.lat,-hs,hs),p=new Yr(a.lng-180*Tp,u),_=new Yr(a.lng+180*Tp,u),m=h.project(p.lng,u),b=h.project(_.lng,u),M=l.fromLngLat(p),P=l.fromLngLat(_),R=b.x-m.x,E=b.y-m.y,O=P.x-M.x,L=P.y-M.y,D=Math.sqrt((O*O+L*L)/(R*R+E*E));return Math.log(D)/Math.LN2}function K$(h,a,u){const p=Math.cos(u),_=Math.sin(u);return{x:h*p-a*_,y:h*_+a*p}}function J$(h,a,u){_e.mat4.identity(h),_e.mat4.rotateZ(h,h,ut(a[2])),_e.mat4.rotateX(h,h,ut(a[0])),_e.mat4.rotateY(h,h,ut(a[1])),_e.mat4.scale(h,h,u),_e.mat4.multiply(h,h,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function UT(h,a,u,p,_,m,b,M){const P=[u[0]-a[0],u[1]-a[1],0],R=[p[0]-a[0],p[1]-a[1],0];if(_e.vec3.length(P)<1e-12||_e.vec3.length(R)<1e-12)return _e.quat.identity(h);const E=_e.vec3.cross([],P,R);_e.vec3.normalize(E,E),_e.vec3.subtract(R,p,a),P[2]=(m-_)*M,R[2]=(b-_)*M;const O=P;return _e.vec3.cross(O,P,R),_e.vec3.normalize(O,O),_e.quat.rotationTo(h,E,O)}function H4(h,a,u=!1){const p=fa(a.zoom),_=(function(m,b,M){const P=b.worldSize,R=[m[12],m[13],m[14]],E=vo(R[1]/P),O=Oa(R[0]/P),L=_e.mat4.identity([]),D=Do(1,E)*P,k=Do(1,0)*P*Ed(E,b.zoom),B=1/Nc(P);let W=k*B;if(M){const Z=jT(b.projection,b.zoom,b.width,b.height,1024);W=B*b.projection.pixelSpaceConversion(b.center.lat,P,Z)}const G=vh(E,O);_e.vec3.add(G,G,_e.vec3.scale([],_e.vec3.normalize([],G),D*W*R[2]));const Q=(function(Z){const re=[Z[0],Z[1],Z[2]];let ce=[0,1,0];const fe=_e.vec3.cross([],ce,re);return _e.vec3.cross(ce,re,fe),_e.vec3.squaredLength(ce)===0&&(ce=[0,1,0],_e.vec3.cross(fe,re,ce)),_e.vec3.normalize(fe,fe),_e.vec3.normalize(ce,ce),_e.vec3.normalize(re,re),[fe[0],fe[1],fe[2],0,ce[0],ce[1],ce[2],0,re[0],re[1],re[2],0,Z[0],Z[1],Z[2],1]})(G);_e.mat4.scale(L,L,[W,W,W*D]),_e.mat4.translate(L,L,[-R[0],-R[1],-R[2]]);const K=_e.mat4.multiply([],b.globeMatrix,Q);return _e.mat4.multiply(K,K,L),_e.mat4.multiply(K,K,m),K})(h,a,u);if(p>0){const m=(function(b,M){const P=M.worldSize,R=Do(1,0)*P*Ed(M.center.lat,M.zoom)/Nc(P),E=Do(1,M.center.lat)*P,O=_e.mat4.identity([]);return _e.mat4.rotateY(O,O,ut(M.center.lng)),_e.mat4.rotateX(O,O,ut(M.center.lat)),_e.mat4.translate(O,O,[0,0,ra]),_e.mat4.scale(O,O,[R,R,R*E]),_e.mat4.translate(O,O,[M.point.x-.5*P,M.point.y-.5*P,0]),_e.mat4.multiply(O,O,b),_e.mat4.multiply(O,M.globeMatrix,O)})(h,a);return(function(b,M,P){const R=(k,B,W)=>{const G=_e.vec3.length(k),Q=_e.vec3.length(B),K=Xs(k,B,W);return _e.vec3.scale(K,K,1/_e.vec3.length(K)*jn(G,Q,W))},E=R([b[0],b[1],b[2]],[M[0],M[1],M[2]],P),O=R([b[4],b[5],b[6]],[M[4],M[5],M[6]],P),L=R([b[8],b[9],b[10]],[M[8],M[9],M[10]],P),D=Xs([b[12],b[13],b[14]],[M[12],M[13],M[14]],P);return[E[0],E[1],E[2],0,O[0],O[1],O[2],0,L[0],L[1],L[2],0,D[0],D[1],D[2],1]})(_,m,p)}return _}function Q$(h,a,u,p){const _=kn.projectAabbCorners(p,u);let m=Number.MAX_VALUE,b=-1;for(let R=0;R<_.length;++R){const E=_[R];E[0]=(.5*E[0]+.5)*a.width,E[1]=(.5-.5*E[1])*a.height,E[2]<m&&(b=R,m=E[2])}const M=R=>new ge(_[R][0],_[R][1]);let P;switch(b){case 0:case 6:P=[M(1),M(5),M(4),M(7),M(3),M(2),M(1)];break;case 1:case 7:P=[M(0),M(4),M(5),M(6),M(2),M(3),M(0)];break;case 3:case 5:P=[M(1),M(0),M(4),M(7),M(6),M(2),M(1)];break;default:P=[M(1),M(5),M(6),M(7),M(3),M(0),M(1)]}if(de(h,P))return m}const Tde=Gr([{name:"a_pos_3f",components:3,type:"Float32"}]),Mde=Gr([{name:"a_color_3f",components:3,type:"Float32"}]),Ade=Gr([{name:"a_color_4f",components:4,type:"Float32"}]),Cde=Gr([{name:"a_uv_2f",components:2,type:"Float32"}]),Ide=Gr([{name:"a_normal_3f",components:3,type:"Float32"}]),Pde=Gr([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),Ode=Gr([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),e7={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class HT{constructor(a,u,p,_){this.message=(a?`${a}: `:"")+p,_&&(this.identifier=_),u!=null&&u.__line__&&(this.line=u.__line__)}}function t7(h,a){const u=h.indexOf("://")===-1;try{return new URL(h,u&&a?"http://example.com":void 0),!0}catch{return!1}}class n7{constructor(a,u){this.feature=a,this.instancedDataOffset=u,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class r7{constructor(){this.instancedDataArray=new _v,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class W4{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.fqid)),this.projection=a.projection,this.index=a.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id)),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(a,u){}populate(a,u,p,_){this.tileToMeter=v(p);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:b,id:M,index:P,sourceLayerIndex:R}of a){const E=M??(b.properties&&b.properties.hasOwnProperty("id")?b.properties.id:void 0),O=H(b,m);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),O,p))continue;const L={id:E,sourceLayerIndex:R,index:P,geometry:m?O.geometry:U(b,p,_),properties:b.properties,type:b.type,patterns:{}},D=this.addFeature(L,L.geometry,O);D&&u.featureIndex.insert(b,L.geometry,P,R,this.index,this.instancesPerModel[D].instancedDataArray.length,gn/32)}this.lookup=null}update(a,u,p,_){for(const m in this.instancesPerModel){const b=this.instancesPerModel[m];for(const M in a)b.idToFeaturesIndex.hasOwnProperty(M)&&(this.evaluate(b.features[b.idToFeaturesIndex[M]],a[M],b,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let a=!1;for(const u in this.instancesPerModel){const p=this.instancesPerModel[u];for(const _ of p.features){const m=this.layers[0],b=_.feature,M=this.canonical,P=m.paint.get("model-rotation").evaluate(b,{},M),R=m.paint.get("model-scale").evaluate(b,{},M),E=m.paint.get("model-translation").evaluate(b,{},M);_e.vec3.exactEquals(_.rotation,P)&&_e.vec3.exactEquals(_.scale,R)&&_e.vec3.exactEquals(_.translation,E)||(this.evaluate(_,_.featureStates,p,!0),a=!0)}}return a}updateReplacement(a,u,p,_){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const m=u.getReplacementRegionsForTile(a.toUnwrapped(),!0);if(g4(this.activeReplacements,m))return!1;this.activeReplacements=m;let b=!1;for(const M in this.instancesPerModel){const P=this.instancesPerModel[M],R=P.instancedDataArray;for(const E of P.features){const O=E.instancedDataOffset,L=E.instancedDataCount;for(let D=0;D<L;D++){const k=16*(D+O);let B=R.float32[k+0];const W=B>gn;B=W?B-gn:B;const G=Math.floor(B),Q=R.float32[k+1];let K=!1;for(const Z of this.activeReplacements)if(!h8(Z,p,e7.Model,_)&&!(Z.min.x>G||G>Z.max.x||Z.min.y>Q||Q>Z.max.y)&&(K=y8(_8(G,Q,a.canonical,Z.footprintTileId.canonical),Z.footprint),K))break;R.float32[k]=K?B+gn:B,b=b||K!==W}}}return b}isEmpty(){for(const a in this.instancesPerModel)if(this.instancesPerModel[a].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(a){if(!this.uploaded)for(const u in this.instancesPerModel){const p=this.instancesPerModel[u];p.instancedDataArray.length<0||p.instancedDataArray.length===0||(p.instancedDataBuffer?p.instancedDataBuffer.updateData(p.instancedDataArray):p.instancedDataBuffer=a.createVertexBuffer(p.instancedDataArray,Pde.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const u in this.instancesPerModel){const p=this.instancesPerModel[u];p.instancedDataArray.length!==0&&p.instancedDataBuffer&&p.instancedDataBuffer.destroy()}const a=this.layers[0].modelManager;if(a&&this.modelUris)for(const u of this.modelUris)a.removeModel(u,"")}addFeature(a,u,p){const _=this.layers[0],m=_.layout.get("model-id").evaluate(p,{},this.canonical);if(!m)return Te(`modelId is not evaluated for layer ${_.id} and it is not going to get rendered.`),m;t7(m,!1)&&(this.modelUris.includes(m)||this.modelUris.push(m)),this.instancesPerModel[m]||(this.instancesPerModel[m]=new r7);const b=this.instancesPerModel[m],M=b.instancedDataArray,P=new n7(p,M.length);for(const R of u)for(const E of R){if(E.x<0||E.x>=gn||E.y<0||E.y>=gn)continue;const O=(this.lookupDim-1)/gn,L=this.lookupDim*(E.y*O|0)+E.x*O|0;if(this.lookup){if(this.lookup[L]!==0)continue;this.lookup[L]=1}this.instanceCount++;const D=M.length;M.resize(D+1),b.instancesEvaluatedElevation.push(0),M.float32[16*D]=E.x,M.float32[16*D+1]=E.y}return P.instancedDataCount=b.instancedDataArray.length-P.instancedDataOffset,P.instancedDataCount>0&&(a.id&&(b.idToFeaturesIndex[a.id]=b.features.length),b.features.push(P),this.evaluate(P,{},b,!1)),m}getModelUris(){return this.modelUris}evaluate(a,u,p,_){const m=this.layers[0],b=a.feature,M=this.canonical,P=a.rotation=m.paint.get("model-rotation").evaluate(b,u,M),R=a.scale=m.paint.get("model-scale").evaluate(b,u,M),E=a.translation=m.paint.get("model-translation").evaluate(b,u,M),O=m.paint.get("model-color").evaluate(b,u,M);O.a=m.paint.get("model-color-mix-intensity").evaluate(b,u,M);const L=[];this.maxVerticalOffset<E[2]&&(this.maxVerticalOffset=E[2]),this.maxScale=Math.max(Math.max(this.maxScale,R[0]),Math.max(R[1],R[2])),J$(L,P,R);const D=Math.round(100*O.a)+O.b/1.05;for(let k=0;k<a.instancedDataCount;++k){const B=a.instancedDataOffset+k,W=16*B,G=p.instancedDataArray.float32;let Q=0;_&&(Q=G[W+6]-p.instancesEvaluatedElevation[B]);const K=0|G[W+1];G[W]=(0|G[W])+O.r/1.05,G[W+1]=K+O.g/1.05,G[W+2]=D,G[W+3]=1/(M.z>10?this.tileToMeter:v(M,K)),G[W+4]=E[0],G[W+5]=E[1],G[W+6]=E[2]+Q,G[W+7]=L[0],G[W+8]=L[1],G[W+9]=L[2],G[W+10]=L[4],G[W+11]=L[5],G[W+12]=L[6],G[W+13]=L[8],G[W+14]=L[9],G[W+15]=L[10],p.instancesEvaluatedElevation[B]=E[2]}}}let i7,s7;An(W4,"ModelBucket",{omit:["layers"]}),An(r7,"PerModelAttributes"),An(n7,"ModelFeature");const Yg=64,Dv={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function o7(h,a,u,p,_,m,b,M,P,R=!1){const E=u.zoom,O=u.project(p),L=Ed(p.lat,E),D=1/L;_e.mat4.identity(h),_e.mat4.translate(h,h,[O.x+b[0]*D,O.y+b[1]*D,b[2]]);let k=1,B=1;const W=u.worldSize;if(R){if(u.projection.name==="mercator"){let Z=0;u.elevation&&(Z=u.elevation.getAtPointOrZero(new l(O.x/W,O.y/W),0));const re=_e.vec4.transformMat4([],[O.x,O.y,Z,1],u.projMatrix)[3]/u.cameraToCenterDistance;k=re,B=re*Ed(u.center.lat,E)}else if(u.projection.name==="globe"){const Z=H4(h,u),re=_e.mat4.multiply([],u.projMatrix,Z),ce=[0,0,0,1];_e.vec4.transformMat4(ce,ce,re);const fe=ce[3]/u.cameraToCenterDistance,Pe=fa(E),Me=u.projection.pixelsPerMeter(p.lat,W)*Ed(p.lat,E),Ae=u.projection.pixelsPerMeter(u.center.lat,W)*Ed(u.center.lat,E);k=fe/jn(Me,fT(u.center.lat),Pe),B=fe*L/Me,k*=Ae,B*=Ae}}else k=D;_e.mat4.scale(h,h,[k,k,B]);const G=[...h],Q=a.orientation,K=[];if(J$(K,[Q[0]+_[0],Q[1]+_[1],Q[2]+_[2]],m),_e.mat4.multiply(h,G,K),M&&u.elevation){let Z=0;const re=[];if(P&&u.elevation){Z=(function(Pe,Me,Ae,Ze,Oe){const Je=Me.elevation;if(!Je)return 0;const rt=kn.projectAabbCorners(Ae,Ze),et=Do(1,Oe.lat)*Me.worldSize,dt=(function($n,Sn){const Dn=[0,0,1],Kn=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const pr of Kn){const tr=$n[pr.corners[0]],xr=$n[pr.corners[1]],fr=$n[pr.corners[2]],Er=[xr[0]-tr[0],xr[1]-tr[1],Sn*(xr[2]-tr[2])],$r=_e.vec3.cross(Er,Er,[fr[0]-tr[0],fr[1]-tr[1],Sn*(fr[2]-tr[2])]);_e.vec3.normalize($r,$r),pr.dotProductWithUp=_e.vec3.dot($r,Dn)}return Kn.sort(((pr,tr)=>pr.dotProductWithUp-tr.dotProductWithUp)),Kn[0].corners})(rt,et),ct=rt[dt[0]],xt=rt[dt[1]],pt=rt[dt[2]],St=rt[dt[3]],Zt=Je.getAtPointOrZero(new l(ct[0]/Me.worldSize,ct[1]/Me.worldSize),0),Yt=Je.getAtPointOrZero(new l(xt[0]/Me.worldSize,xt[1]/Me.worldSize),0),Cn=Je.getAtPointOrZero(new l(pt[0]/Me.worldSize,pt[1]/Me.worldSize),0),rn=Je.getAtPointOrZero(new l(St[0]/Me.worldSize,St[1]/Me.worldSize),0),pn=(Zt+rn)/2,en=(Yt+Cn)/2;return pn>en?Yt<Cn?UT(Pe,xt,St,ct,Yt,rn,Zt,et):UT(Pe,pt,ct,St,Cn,Zt,rn,et):Zt<rn?UT(Pe,ct,xt,pt,Zt,Yt,Cn,et):UT(Pe,St,pt,xt,rn,Cn,Yt,et),Math.max(pn,en)})(re,u,a.aabb,h,p);const ce=_e.mat4.fromQuat([],re),fe=_e.mat4.multiply([],ce,K);_e.mat4.multiply(h,G,fe)}else Z=u.elevation.getAtPointOrZero(new l(O.x/W,O.y/W),0);Z!==0&&(h[14]+=Z)}}function Fx(h,a,u=!1){h.uploaded||(h.gfxTexture=new V4(a,h.image,u?a.gl.R8:a.gl.RGBA8,{useMipmap:h.sampler.minFilter>=a.gl.NEAREST_MIPMAP_NEAREST}),h.uploaded=!0,h.image=null)}function Dde(h,a,u){h.indexBuffer=a.createIndexBuffer(h.indexArray,!1,!0),h.vertexBuffer=a.createVertexBuffer(h.vertexArray,Tde.members,!1,!0),h.normalArray&&(h.normalBuffer=a.createVertexBuffer(h.normalArray,Ide.members,!1,!0)),h.texcoordArray&&(h.texcoordBuffer=a.createVertexBuffer(h.texcoordArray,Cde.members,!1,!0)),h.colorArray&&(h.colorBuffer=a.createVertexBuffer(h.colorArray,(h.colorArray.bytesPerElement===12?Mde:Ade).members,!1,!0)),h.featureArray&&(h.pbrBuffer=a.createVertexBuffer(h.featureArray,Ode.members,!0)),h.segments=Bi.simpleSegment(0,0,h.vertexArray.length,h.indexArray.length);const p=h.material;p.pbrMetallicRoughness.baseColorTexture&&Fx(p.pbrMetallicRoughness.baseColorTexture,a),p.pbrMetallicRoughness.metallicRoughnessTexture&&Fx(p.pbrMetallicRoughness.metallicRoughnessTexture,a),p.normalTexture&&Fx(p.normalTexture,a),p.occlusionTexture&&Fx(p.occlusionTexture,a,u),p.emissionTexture&&Fx(p.emissionTexture,a)}function G4(h,a,u){if(h.meshes)for(const p of h.meshes)Dde(p,a,u);if(h.children)for(const p of h.children)G4(p,a,u)}function WT(h){if(h.meshes)for(const a of h.meshes)a.indexArray.destroy(),a.vertexArray.destroy(),a.colorArray&&a.colorArray.destroy(),a.normalArray&&a.normalArray.destroy(),a.texcoordArray&&a.texcoordArray.destroy(),a.featureArray&&a.featureArray.destroy();if(h.children)for(const a of h.children)WT(a)}function Y4(h){if(h.meshes)for(const u of h.meshes)u.vertexBuffer&&(u.vertexBuffer.destroy(),u.indexBuffer.destroy(),u.normalBuffer&&u.normalBuffer.destroy(),u.texcoordBuffer&&u.texcoordBuffer.destroy(),u.colorBuffer&&u.colorBuffer.destroy(),u.pbrBuffer&&u.pbrBuffer.destroy(),u.segments.destroy(),u.material&&((a=u.material).pbrMetallicRoughness.baseColorTexture&&a.pbrMetallicRoughness.baseColorTexture.gfxTexture&&a.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),a.pbrMetallicRoughness.metallicRoughnessTexture&&a.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&a.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),a.normalTexture&&a.normalTexture.gfxTexture&&a.normalTexture.gfxTexture.destroy(),a.emissionTexture&&a.emissionTexture.gfxTexture&&a.emissionTexture.gfxTexture.destroy(),a.occlusionTexture&&a.occlusionTexture.gfxTexture&&a.occlusionTexture.gfxTexture.destroy()));var a;if(h.children)for(const u of h.children)Y4(u)}class Rv{constructor(a,u,p){this._demTile=a,this._dem=this._demTile.dem,this._scale=u,this._offset=p}static create(a,u,p){const _=p||a.findDEMTileFor(u);if(!_||!_.dem)return;const m=_.dem,b=_.tileID,M=1<<u.canonical.z-b.canonical.z;return new Rv(_,m.dim/gn/M,[(u.canonical.x/M-b.canonical.x)*m.dim,(u.canonical.y/M-b.canonical.y)*m.dim])}tileCoordToPixel(a,u){const p=u*this._scale+this._offset[1],_=Math.floor(a*this._scale+this._offset[0]),m=Math.floor(p);return new ge(_,m)}getElevationAt(a,u,p,_){const m=a*this._scale+this._offset[0],b=u*this._scale+this._offset[1],M=Math.floor(m),P=Math.floor(b),R=this._dem;return _=!!_,p?jn(jn(R.get(M,P,_),R.get(M,P+1,_),b-P),jn(R.get(M+1,P,_),R.get(M+1,P+1,_),b-P),m-M):R.get(M,P,_)}getElevationAtPixel(a,u,p){return this._dem.get(a,u,!!p)}getMeterToDEM(a){return(1<<this._demTile.tileID.canonical.z)*Do(1,a)*this._dem.stride}}const q4=new Float32Array(262144),qg=new Uint8Array(262144);function a7(h){let a=0;if(h.meshes)for(const u of h.meshes)a=Math.max(a,u.aabb.max[2]);if(h.children)for(const u of h.children)a=Math.max(a,a7(u));return a}function l7(h,a,u){if(h.meshes)for(const p of h.meshes){if(p.aabb.min[0]===1/0)continue;const _=kn.applyTransform(p.aabb,h.matrix);u.insert(a,_.min[0],_.min[1],_.max[0],_.max[1])}if(h.children)for(const p of h.children)l7(p,a,u)}const c7=["","wall","door","roof","window","lamp","logo"];class u7{constructor(a){this.node=a,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:a.id,geometry:[],properties:{height:a7(a)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new kn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let a=0;const u=new kn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const p of this.node.meshes)this.node.lightMeshIndex!==a&&(p.transformedAabb=kn.applyTransformFast(p.aabb,this.node.matrix),u.encapsulate(p.transformedAabb)),a++;this.aabb=u}return this.aabb}}class GT{constructor(a,u,p,_,m,b,M){this.id=p,this.layers=a,this.layerIds=this.layers.map((P=>P.fqid)),this.stateDependentLayerIds=this.layers.filter((P=>P.isStateDependent())).map((P=>P.id)),this.modelTraits|=Dv.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,_&&(this.modelTraits|=Dv.HasMapboxMeshFeatures),m&&(this.modelTraits|=Dv.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=b,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const P of u)this.nodesInfo.push(new u7(P)),l7(P,M.featureIndexArray.length,M.grid),M.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,M.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(a,u){for(const p of this.getNodesInfo()){const _=p.node;_.footprint&&u.push({footprint:_.footprint,id:a})}}update(a){const u=Object.keys(a).length!==0;if(u&&!this.stateDependentLayers.length)return;const p=u?this.stateDependentLayers:this.layers;if(!nt(a,this.states))for(const _ of p)this.evaluate(_,a);this.states=structuredClone(a)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(a){if(!this.needsUpload)return;const u=this.getNodesInfo();for(const p of u){const _=p.node;this.uploaded?this.updatePbrBuffer(_):G4(_,a,!0)}for(const p of u)WT(p.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(a){let u=!1;if(!a.meshes)return u;for(const p of a.meshes)p.pbrBuffer&&(p.pbrBuffer.updateData(p.featureArray),u=!0);return u}needsReEvaluation(a,u,p){const _=a.transform.projectionOptions,m=a.style.getBrightness(),b=this.brightness!==m;if(!this.uploaded||this.dirty||_.name!==this.projection.name||zx(p.paint.get("model-color").value,b)||zx(p.paint.get("model-color-mix-intensity").value,b)||zx(p.paint.get("model-roughness").value,b)||zx(p.paint.get("model-emissive-strength").value,b)||zx(p.paint.get("model-height-based-emissive-strength-multiplier").value,b)){this.projection=_,this.brightness=m;const M=this.getNodesInfo();for(const P of M)P.state=null;return!0}return!1}evaluateScale(a,u){if(a.transform.zoom===this.zoom)return;this.zoom=a.transform.zoom;const p=this.getNodesInfo(),_=this.id.canonical;for(const m of p){const b=m.feature;m.evaluatedScale=u.paint.get("model-scale").evaluate(b,{},_)}}evaluate(a,u){const p=this.getNodesInfo();for(const _ of p){if(!_.node.meshes)continue;const m=_.feature,b=u&&u[m.id];if(nt(b,_.state))continue;_.state=structuredClone(b);const M=_.node.meshes&&_.node.meshes[0].featureData,P=_.evaluatedColor[2],R=_.evaluatedRMEA[2],E=this.id.canonical;if(_.hasTranslucentParts=!1,M){for(let O=0;O<c7.length;O++){const L=c7[O];L.length&&(m.properties.part=L);const D=a.paint.get("model-color").evaluate(m,b,E).toRenderColor(null),k=a.paint.get("model-color-mix-intensity").evaluate(m,b,E);_.evaluatedColor[O]=[D.r,D.g,D.b,k],_.evaluatedRMEA[O][0]=a.paint.get("model-roughness").evaluate(m,b,E),_.evaluatedRMEA[O][2]=a.paint.get("model-emissive-strength").evaluate(m,b,E),_.evaluatedRMEA[O][3]=D.a,_.emissionHeightBasedParams[O]=a.paint.get("model-height-based-emissive-strength-multiplier").evaluate(m,b,E),!_.hasTranslucentParts&&D.a<1&&(_.hasTranslucentParts=!0)}delete m.properties.part,kde(_,P!==_.evaluatedColor[2]||R!==_.evaluatedRMEA[2],this.modelTraits)}else _.evaluatedRMEA[0][2]=a.paint.get("model-emissive-strength").evaluate(m,b,E);_.evaluatedScale=a.paint.get("model-scale").evaluate(m,b,E),this.updatePbrBuffer(_.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(a,u,p,_){const m=a.findDEMTileFor(p);if(m&&(m.tileID.canonical!==this.terrainTile||u!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const b=Rv.create(a,p,m);if(!b)return;this.modelTraits&Dv.HasMapboxMeshFeatures&&this.updateDEM(a,b,p,_);for(const M of this.getNodesInfo()){const P=M.node;if(!P.footprint||!P.footprint.vertices||!P.footprint.vertices.length)continue;const R=P.footprint.vertices;let E=b.getElevationAt(R[0].x,R[0].y,!0,!0);for(let O=1;O<R.length;O++)E=Math.min(E,b.getElevationAt(R[O].x,R[O].y,!0,!0));P.elevation=E}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=u}}updateDEM(a,u,p,_){let m=u._dem._modifiedForSources[_];if(m===void 0&&(u._dem._modifiedForSources[_]=[],m=u._dem._modifiedForSources[_]),m.includes(p.canonical))return;const b=u._dem.dim;m.push(p.canonical);let M=!1;for(const P of this.getNodesInfo()){const R=P.node;if(!R.footprint||!R.footprint.grid)continue;const E=R.footprint.grid,O=u.tileCoordToPixel(E.min.x,E.min.y),L=u.tileCoordToPixel(E.max.x,E.max.y),D=Math.min(Math.min(b-L.y,O.x),Math.min(O.y,b-L.x));if(D<0)continue;const k=$e(D,2,5);let B=Math.max(0,O.x-k),W=Math.max(0,O.y-k),G=Math.min(L.x+k,b-1),Q=Math.min(L.y+k,b-1);for(let ce=W;ce<=Q;++ce)for(let fe=B;fe<=G;++fe)qg[ce*b+fe]=255;let K=0,Z=0;for(let ce=0;ce<E.cellsY;++ce)for(let fe=0;fe<E.cellsX;++fe){if(!E.cells[ce*E.cellsX+fe])continue;const Pe=u.tileCoordToPixel(E.min.x+fe/E.xScale,E.min.y+ce/E.yScale),Me=u.tileCoordToPixel(E.min.x+(fe+1)/E.xScale,E.min.y+(ce+1)/E.yScale);for(let Ae=Pe.y;Ae<=Math.min(Me.y+1,b-1);++Ae)for(let Ze=Pe.x;Ze<=Math.min(Me.x+1,b-1);++Ze)qg[Ae*b+Ze]===255&&(qg[Ae*b+Ze]=0,K+=u.getElevationAtPixel(Ze,Ae),Z++)}const re=K/Z;B=Math.max(1,O.x-k),W=Math.max(1,O.y-k),G=Math.min(L.x+k,b-2),Q=Math.min(L.y+k,b-2),M=!0;for(let ce=W;ce<=Q;++ce)for(let fe=B;fe<=G;++fe)qg[ce*b+fe]===0&&(q4[ce*b+fe]=u._dem.set(fe,ce,re));for(let ce=1;ce<k;++ce){B=Math.max(1,O.x-ce),W=Math.max(1,O.y-ce),G=Math.min(L.x+ce,b-2),Q=Math.min(L.y+ce,b-2);for(let fe=W;fe<=Q;++fe)for(let Pe=B;Pe<=G;++Pe){const Me=fe*b+Pe;if(qg[Me]===255){let Ae=0,Ze=0,Oe=-1,Je=-1;for(let rt=-1;rt<=1;++rt)for(let et=-1;et<=1;++et){const dt=(fe+rt)*b+Pe+et;if(qg[dt]>=ce)continue;const ct=q4[dt],xt=Math.abs(ct);xt>Ze&&(Ae=ct,Ze=xt,Oe=et,Je=rt)}if(Ze>.1){const rt=1-(ce+.5*Math.abs(Oe*Je))/k;let et=u._dem.get(Pe,fe)+Ae*rt;const dt=u._dem.get(Pe+Oe,fe+Je),ct=u._dem.get(Pe-Oe,fe-Je,!0);(et-dt)*(et-ct)>0&&(et=(dt+ct)/2),q4[Me]=u._dem.set(Pe,fe,et),qg[Me]=ce}}}}}M&&(u._demTile.needsDEMTextureUpload=!0,u._dem._timestamp=Nt.now())}setFilter(a){this.filter=a?Yb(a):null}getNodesInfo(){return this.filter?this.nodesInfo.filter((a=>this.filter.filter(new vi(this.id.overscaledZ),a.feature,this.id.canonical))):this.nodesInfo}destroy(){const a=this.getNodesInfo();for(const u of a)WT(u.node),Y4(u.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(a,u){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const p=u.getReplacementRegionsForTile(a.toUnwrapped()),_=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const b=_[m].node;_[m].hiddenByReplacement=!!b.footprint&&!p.find((M=>M.footprint===b.footprint))}}getHeightAtTileCoord(a,u){const p=this.getNodesInfo(),_=[],m=[0,0,0],b=_e.mat4.identity([]);for(let M=0;M<this.nodesInfo.length;M++){const P=p[M],R=P.node.meshes[0],E=R.transformedAabb;if(a<E.min[0]||u<E.min[1]||a>E.max[0]||u>E.max[1])continue;if(P.node.hidden===!0)return{height:1/0,maxHeight:P.feature.properties.height,hidden:!1,verticalScale:P.evaluatedScale[2]};_e.mat4.invert(b,P.node.matrix),m[0]=a,m[1]=u,_e.vec3.transformMat4(m,m,b);const O=(m[0]-R.aabb.min[0])/(R.aabb.max[0]-R.aabb.min[0])*Yg|0,L=Math.min(63,(m[1]-R.aabb.min[1])/(R.aabb.max[1]-R.aabb.min[1])*Yg|0)*Yg+Math.min(63,O),D=R.heightmap[L];if(!(D<0&&P.node.footprint))return P.hiddenByReplacement?void 0:{height:D,maxHeight:P.feature.properties.height,hidden:!1,verticalScale:P.evaluatedScale[2]};if(P.node.footprint.grid.query(new ge(a,u),new ge(a,u),_),_.length>0)return{height:void 0,maxHeight:P.feature.properties.height,hidden:P.hiddenByReplacement,verticalScale:P.evaluatedScale[2]}}}}function zx(h,a){return!h.isLightConstant&&a}function Rde(h,a,u,p,_,m,b,M){let P=(61440&a|(61440&a)>>4)>>8,R=(3840&a|(3840&a)>>4)>>4,E=240&a|(240&a)>>4;u[3]>0&&(P=jn(P,255*u[0],u[3]),R=jn(R,255*u[1],u[3]),E=jn(E,255*u[2],u[3]));const O=P<<8|R,L=E<<8|Math.floor(255*p[3]),D=(function(ce){const fe=$e(ce,0,2);return Math.min(Math.round(.5*fe*255),255)})(p[2])<<8|15*p[0]<<4|15*p[1],k=$e(_[0],0,1),B=$e(_[1],0,1),W=$e(_[2],0,1),G=$e(_[3],0,1);let Q,K,Z,re;if(k!==B&&b!==m&&B!==k){const ce=b-m;K=1/(ce*(B-k)),Z=-(m+ce*k)/(ce*(B-k));const fe=$e(_[4],-1,1);re=Math.pow(10,fe),Q=255*W<<8|255*G}else Q=65535,K=0,Z=1,re=1;if(h.emplaceBack(O,L,D,Q,K,Z,re),M){const ce=M.length;M.clear();for(let fe=0;fe<ce;fe++)M.emplaceBack(O,L,D,Q,K,Z,re)}}function kde(h,a,u){const p=h.node;let _=0;const m=u&Dv.HasMeshoptCompression;for(const b of p.meshes){if(p.lights&&p.lightMeshIndex===_||!b.featureData)continue;b.featureArray=new yv,b.featureArray.reserve(b.featureData.length);let M=a;for(const P of b.featureData){const R=m?65535&P:P>>16&65535,E=m?P>>16&65535:65535&P,O=(15&E)<8?15&E:0,L=h.evaluatedRMEA[O],D=h.evaluatedColor[O],k=h.emissionHeightBasedParams[O];let B;if(M&&O===2&&p.lights&&(B=new yv,B.resize(10*p.lights.length)),Rde(b.featureArray,R,D,L,k,b.aabb.min[2],b.aabb.max[2],B),B&&M){M=!1;const W=p.meshes[p.lightMeshIndex];W.featureArray=B,W.featureArray._trim()}}b.featureArray._trim(),_++}}function d7(h,a,u,p){const _=1<<h.z;a.lat=vo((p/gn+h.y)/_),a.lng=Oa((u/gn+h.x)/_)}An(GT,"Tiled3dModelBucket",{omit:["layers"]}),An(u7,"Tiled3dModelFeature");const Lde={circle:class extends oo{constructor(h,a,u,p){super(h,{layout:gt||(gt=new Xi({"circle-sort-key":new Mn(Tt.layout_circle["circle-sort-key"]),"circle-elevation-reference":new hn(Tt.layout_circle["circle-elevation-reference"]),visibility:new hn(Tt.layout_circle.visibility)})),paint:Ut||(Ut=new Xi({"circle-radius":new Mn(Tt.paint_circle["circle-radius"]),"circle-color":new Mn(Tt.paint_circle["circle-color"]),"circle-blur":new Mn(Tt.paint_circle["circle-blur"]),"circle-opacity":new Mn(Tt.paint_circle["circle-opacity"]),"circle-translate":new hn(Tt.paint_circle["circle-translate"]),"circle-translate-anchor":new hn(Tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new hn(Tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new hn(Tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Mn(Tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Mn(Tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Mn(Tt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new hn(Tt.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},a,u,p)}createBucket(h){return new ne(h)}queryRadius(h){const a=h;return bt("circle-radius",this,a)+bt("circle-stroke-width",this,a)+Ht(this.paint.get("circle-translate"))}queryIntersectsFeature(h,a,u,p,_,m,b,M){const P=sn(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),R=this.paint.get("circle-radius").evaluate(a,u)+this.paint.get("circle-stroke-width").evaluate(a,u);return Ev(h,p,m,b,M,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",P,R)}getProgramIds(){return["circle"]}getDefaultProgramParams(h,a,u){const p=yp(this);return{config:new yh(this,{zoom:a,lut:u}),defines:p,overrideFog:!1}}},heatmap:class extends oo{createBucket(h){return new LB(h)}constructor(h,a,u,p){super(h,{layout:NB||(NB=new Xi({visibility:new hn(Tt.layout_heatmap.visibility)})),paint:FB||(FB=new Xi({"heatmap-radius":new Mn(Tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Mn(Tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new hn(Tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new cp(Tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new hn(Tt.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},a,u,p),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(h){h==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=_x({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(h){return bt("heatmap-radius",this,h)}queryIntersectsFeature(h,a,u,p,_,m,b,M){const P=this.paint.get("heatmap-radius").evaluate(a,u);return Ev(h,p,m,b,M,!0,!0,new ge(0,0),P)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(h,a,u){return h==="heatmap"?{config:new yh(this,{zoom:a,lut:u}),overrideFog:!1}:{}}},hillshade:class extends oo{constructor(h,a,u,p){super(h,{layout:zB||(zB=new Xi({visibility:new hn(Tt.layout_hillshade.visibility)})),paint:BB||(BB=new Xi({"hillshade-illumination-direction":new hn(Tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new hn(Tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new hn(Tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new hn(Tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new hn(Tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new hn(Tt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new hn(Tt.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},a,u,p)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(h,a,u){return{overrideFog:!1}}},fill:class extends oo{constructor(h,a,u,p){super(h,{layout:i8||(i8=new Xi({"fill-sort-key":new Mn(Tt.layout_fill["fill-sort-key"]),visibility:new hn(Tt.layout_fill.visibility),"fill-elevation-reference":new hn(Tt.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Mn(Tt.layout_fill["fill-construct-bridge-guard-rail"])})),paint:s8||(s8=new Xi({"fill-antialias":new hn(Tt.paint_fill["fill-antialias"]),"fill-opacity":new Mn(Tt.paint_fill["fill-opacity"]),"fill-color":new Mn(Tt.paint_fill["fill-color"]),"fill-outline-color":new Mn(Tt.paint_fill["fill-outline-color"]),"fill-translate":new hn(Tt.paint_fill["fill-translate"]),"fill-translate-anchor":new hn(Tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Mn(Tt.paint_fill["fill-pattern"]),"fill-emissive-strength":new hn(Tt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Mn(Tt.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Mn(Tt.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Mn(Tt.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},a,u,p)}getProgramIds(){const h=this.paint.get("fill-pattern"),a=h&&h.constantOr(1),u=[a?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(a&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getDefaultProgramParams(h,a,u){return{config:new yh(this,{zoom:a,lut:u}),overrideFog:!1}}recalculate(h,a){super.recalculate(h,a);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(h){return new f4(h)}queryRadius(){return Ht(this.paint.get("fill-translate"))}queryIntersectsFeature(h,a,u,p,_,m){return!h.queryGeometry.isAboveHorizon&&he(Wt(h.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),p)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(h){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const a=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return h!=null?a&&!h:a}},"fill-extrusion":class extends oo{constructor(h,a,u,p){super(h,{layout:R8||(R8=new Xi({visibility:new hn(Tt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new hn(Tt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:k8||(k8=new Xi({"fill-extrusion-opacity":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Mn(Tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Mn(Tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Mn(Tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Mn(Tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Mn(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Mn(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Mn(Tt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Mn(Tt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new hn(Tt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},a,u,p),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(h){return new ST(h)}queryRadius(){return Ht(this.paint.get("fill-extrusion-translate"))}is3D(h){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(h,a,u,p,_,m,b,M,P){const R=sn(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),E=this.paint.get("fill-extrusion-height").evaluate(a,u),O=this.paint.get("fill-extrusion-base").evaluate(a,u),L=[0,0],D=M&&m.elevation,k=m.elevation?m.elevation.exaggeration():1,B=h.tile.getBucket(this);if(D&&B instanceof ST){const Z=B.centroidVertexArray,re=P+1;re<Z.length&&(L[0]=Z.geta_centroid_pos0(re),L[1]=Z.geta_centroid_pos1(re))}if(L[0]===0&&L[1]===1)return!1;m.projection.name==="globe"&&(p=D8([p],[new ge(0,0),new ge(gn,gn)],h.tileID.canonical).map((Z=>Z.polygon)).flat());const W=D?M:null,[G,Q]=(function(Z,re,ce,fe,Pe,Me,Ae,Ze,Oe,Je,rt){return Z.projection.name==="globe"?(function(et,dt,ct,xt,pt,St,Zt,Yt,Cn,rn,pn){const en=[],$n=[],Sn=et.projection.upVectorScale(pn,et.center.lat,et.worldSize).metersToTile,Dn=[0,0,0,1],Kn=[0,0,0,1],pr=(xr,fr,Er,$r)=>{xr[0]=fr,xr[1]=Er,xr[2]=$r,xr[3]=1},tr=O8();ct>0&&(ct+=tr),xt+=tr;for(const xr of dt){const fr=[],Er=[];for(const $r of xr){const bi=$r.x+pt.x,Qn=$r.y+pt.y,Pr=et.projection.projectTilePoint(bi,Qn,pn),Ni=et.projection.upVector(pn,$r.x,$r.y);let Wi=ct,Zi=xt;if(Zt){const os=N8(bi,Qn,ct,xt,Zt,Yt,Cn,rn);Wi+=os.base,Zi+=os.top}ct!==0?pr(Dn,Pr.x+Ni[0]*Sn*Wi,Pr.y+Ni[1]*Sn*Wi,Pr.z+Ni[2]*Sn*Wi):pr(Dn,Pr.x,Pr.y,Pr.z),pr(Kn,Pr.x+Ni[0]*Sn*Zi,Pr.y+Ni[1]*Sn*Zi,Pr.z+Ni[2]*Sn*Zi),_e.vec3.transformMat4(Dn,Dn,St),_e.vec3.transformMat4(Kn,Kn,St),fr.push(new Gg(Dn[0],Dn[1],Dn[2])),Er.push(new Gg(Kn[0],Kn[1],Kn[2]))}en.push(fr),$n.push(Er)}return[en,$n]})(Z,re,ce,fe,Pe,Me,Ae,Ze,Oe,Je,rt):Ae?(function(et,dt,ct,xt,pt,St,Zt,Yt,Cn){const rn=[],pn=[],en=[0,0,0,1];for(const $n of et){const Sn=[],Dn=[];for(const Kn of $n){const pr=Kn.x+xt.x,tr=Kn.y+xt.y,xr=N8(pr,tr,dt,ct,St,Zt,Yt,Cn);en[0]=pr,en[1]=tr,en[2]=xr.base,en[3]=1,_e.vec4.transformMat4(en,en,pt),en[3]=Math.max(en[3],1e-5);const fr=new Gg(en[0]/en[3],en[1]/en[3],en[2]/en[3]);en[0]=pr,en[1]=tr,en[2]=xr.top,en[3]=1,_e.vec4.transformMat4(en,en,pt),en[3]=Math.max(en[3],1e-5);const Er=new Gg(en[0]/en[3],en[1]/en[3],en[2]/en[3]);Sn.push(fr),Dn.push(Er)}rn.push(Sn),pn.push(Dn)}return[rn,pn]})(re,ce,fe,Pe,Me,Ae,Ze,Oe,Je):(function(et,dt,ct,xt,pt){const St=[],Zt=[],Yt=pt[8]*dt,Cn=pt[9]*dt,rn=pt[10]*dt,pn=pt[11]*dt,en=pt[8]*ct,$n=pt[9]*ct,Sn=pt[10]*ct,Dn=pt[11]*ct;for(const Kn of et){const pr=[],tr=[];for(const xr of Kn){const fr=xr.x+xt.x,Er=xr.y+xt.y,$r=pt[0]*fr+pt[4]*Er+pt[12],bi=pt[1]*fr+pt[5]*Er+pt[13],Qn=pt[2]*fr+pt[6]*Er+pt[14],Pr=pt[3]*fr+pt[7]*Er+pt[15],Ni=$r+Yt,Wi=bi+Cn,Zi=Qn+rn,os=Math.max(Pr+pn,1e-5),yi=$r+en,Ks=bi+$n,pa=Qn+Sn,Ss=Math.max(Pr+Dn,1e-5);pr.push(new Gg(Ni/os,Wi/os,Zi/os)),tr.push(new Gg(yi/Ss,Ks/Ss,pa/Ss))}St.push(pr),Zt.push(tr)}return[St,Zt]})(re,ce,fe,Pe,Me)})(m,p,O,E,R,b,W,L,k,m.center.lat,h.tileID.canonical),K=h.queryGeometry;return(function(Z,re,ce){let fe=1/0;he(ce,re)&&(fe=L8(ce,re[0]));for(let Pe=0;Pe<re.length;Pe++){const Me=re[Pe],Ae=Z[Pe];for(let Ze=0;Ze<Me.length-1;Ze++){const Oe=Me[Ze],Je=[Oe,Me[Ze+1],Ae[Ze+1],Ae[Ze],Oe];de(ce,Je)&&(fe=Math.min(fe,L8(ce,Je)))}}return fe!==1/0&&fe})(G,Q,K.isPointQuery()?K.screenBounds:K.screenGeometry)}},line:class extends oo{constructor(h,a,u,p){const _=G8();super(h,_,a,u,p),_.layout&&(this.layout=new lp(_.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(h){if(h==="line-gradient"){const a=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=a._styleExpression&&a._styleExpression.expression instanceof Dc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(h,a){super.recalculate(h,a),this.paint._values["line-floorwidth"]=(()=>{if(Mx)return Mx;const u=G8();return Mx=new Nue(u.paint.properties["line-width"].specification),Mx.useIntegerZoom=!0,Mx})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,h)}createBucket(h){return new b4(h)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(h,a,u){const p=H8(this);return{config:new yh(this,{zoom:a,lut:u}),defines:p,overrideFog:!1}}queryRadius(h){const a=h,u=Y8(bt("line-width",this,a),bt("line-gap-width",this,a)),p=bt("line-offset",this,a);return u/2+Math.abs(p)+Ht(this.paint.get("line-translate"))}queryIntersectsFeature(h,a,u,p,_,m){if(h.queryGeometry.isAboveHorizon)return!1;const b=Wt(h.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),M=h.pixelToTileUnitsFactor/2*Y8(this.paint.get("line-width").evaluate(a,u),this.paint.get("line-gap-width").evaluate(a,u)),P=this.paint.get("line-offset").evaluate(a,u);return P&&(p=(function(R,E){const O=[],L=new ge(0,0);for(let D=0;D<R.length;D++){const k=R[D],B=[];for(let W=0;W<k.length;W++){const G=k[W],Q=k[W+1],K=W===0?L:G.sub(k[W-1])._unit()._perp(),Z=W===k.length-1?L:Q.sub(G)._unit()._perp(),re=K._add(Z)._unit();re._mult(1/(re.x*Z.x+re.y*Z.y)),B.push(re._mult(E)._add(G))}O.push(B)}return O})(p,P*h.pixelToTileUnitsFactor)),(function(R,E,O){for(let L=0;L<E.length;L++){const D=E[L];if(R.length>=3){for(let k=0;k<D.length;k++)if(Fe(R,D[k]))return!0}if(me(R,D,O))return!0}return!1})(b,p,M)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(h){return!this.hasElevatedBuckets}},symbol:zT,background:class extends oo{constructor(h,a,u,p){super(h,{layout:N$||(N$=new Xi({visibility:new hn(Tt.layout_background.visibility)})),paint:F$||(F$=new Xi({"background-pitch-alignment":new hn(Tt.paint_background["background-pitch-alignment"]),"background-color":new hn(Tt.paint_background["background-color"]),"background-pattern":new hn(Tt.paint_background["background-pattern"]),"background-opacity":new hn(Tt.paint_background["background-opacity"]),"background-emissive-strength":new hn(Tt.paint_background["background-emissive-strength"]),"background-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},a,u,p)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(h,a,u){return{overrideFog:!1}}is3D(h){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:j$,"raster-particle":q$,sky:class extends oo{constructor(h,a,u,p){super(h,{layout:W$||(W$=new Xi({visibility:new hn(Tt.layout_sky.visibility)})),paint:G$||(G$=new Xi({"sky-type":new hn(Tt.paint_sky["sky-type"]),"sky-atmosphere-sun":new hn(Tt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new hn(Tt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new hn(Tt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new hn(Tt.paint_sky["sky-gradient-radius"]),"sky-gradient":new cp(Tt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new hn(Tt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new hn(Tt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new hn(Tt.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},a,u,p),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(h){h==="sky-gradient"?this._updateColorRamp():h!=="sky-atmosphere-sun"&&h!=="sky-atmosphere-halo-color"&&h!=="sky-atmosphere-color"&&h!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=_x({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(h){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const a=h.style.light.properties.get("position");return this._lightPosition.azimuthal!==a.azimuthal||this._lightPosition.polar!==a.polar}return!1}getCenter(h,a){if(this.paint.get("sky-type")==="atmosphere"){const p=this.paint.get("sky-atmosphere-sun"),_=!p,m=h.style.light,b=m.properties.get("position");return _&&m.properties.get("anchor")==="viewport"&&Te("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),_?j4(b.azimuthal,90-b.polar,a):j4(p[0],90-p[1],a)}const u=this.paint.get("sky-gradient-center");return j4(u[0],90-u[1],a)}isSky(){return!0}markSkyboxValid(h){this._skyboxInvalidated=!1,this._lightPosition=h.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const h=this.paint.get("sky-type");return h==="atmosphere"?["skyboxCapture","skybox"]:h==="gradient"?["skyboxGradient"]:null}},slot:class extends oo{constructor(h,a,u,p){super(h,{paint:Y$||(Y$=new Xi({}))},a,null)}},model:class extends oo{constructor(h,a,u,p){super(h,{layout:i7||(i7=new Xi({visibility:new hn(Tt.layout_model.visibility),"model-id":new Mn(Tt.layout_model["model-id"])})),paint:s7||(s7=new Xi({"model-opacity":new Mn(Tt.paint_model["model-opacity"]),"model-rotation":new Mn(Tt.paint_model["model-rotation"]),"model-scale":new Mn(Tt.paint_model["model-scale"]),"model-translation":new Mn(Tt.paint_model["model-translation"]),"model-color":new Mn(Tt.paint_model["model-color"]),"model-color-mix-intensity":new Mn(Tt.paint_model["model-color-mix-intensity"]),"model-type":new hn(Tt.paint_model["model-type"]),"model-cast-shadows":new hn(Tt.paint_model["model-cast-shadows"]),"model-receive-shadows":new hn(Tt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new hn(Tt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Mn(Tt.paint_model["model-emissive-strength"]),"model-roughness":new Mn(Tt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Mn(Tt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new hn(Tt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new hn(Tt.paint_model["model-front-cutoff"]),"model-color-use-theme":new Mn({type:"string",default:"default","property-type":"data-driven"})}))},a,u,p),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(h){return new W4(h)}getProgramIds(){return["model"]}is3D(h){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(h){return h instanceof GT?gn-1:0}queryIntersectsFeature(h,a,u,p,_,m){if(!this.modelManager)return!1;const b=this.modelManager,M=h.tile.getBucket(this);if(!(M&&M instanceof W4))return!1;for(const P in M.instancesPerModel){const R=M.instancesPerModel[P],E=a.id!==void 0?a.id:a.properties&&a.properties.hasOwnProperty("id")?a.properties.id:void 0;if(R.idToFeaturesIndex.hasOwnProperty(E)){const O=R.features[R.idToFeaturesIndex[E]],L=b.getModel(P,this.scope);if(!L)return!1;let D=_e.mat4.create();const k=new Yr(0,0),B=M.canonical;let W=Number.MAX_VALUE;for(let G=0;G<O.instancedDataCount;++G){const Q=16*(O.instancedDataOffset+G),K=R.instancedDataArray.float32,Z=[K[Q+4],K[Q+5],K[Q+6]];d7(B,k,K[Q],0|K[Q+1]),o7(D,L,m,k,O.rotation,O.scale,Z,!1,!1,!1),m.projection.name==="globe"&&(D=H4(D,m));const re=_e.mat4.multiply([],m.projMatrix,D),ce=h.queryGeometry,fe=Q$(ce.isPointQuery()?ce.screenBounds:ce.screenGeometry,m,re,L.aabb);fe!=null&&(W=Math.min(fe,W))}return W!==Number.MAX_VALUE&&W}}return!1}_handleOverridablePaintPropertyUpdate(h,a,u){return!(!this.layout||a.isDataDriven()||u.isDataDriven()||h!=="model-color"&&h!=="model-color-mix-intensity"&&h!=="model-rotation"&&h!=="model-scale"&&h!=="model-translation"&&h!=="model-emissive-strength")}_isPropertyZoomDependent(h){const a=this._transitionablePaint._values[h];return a!=null&&a.value!=null&&a.value.expression!=null&&a.value.expression instanceof np}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends oo{constructor(h,a,u,p){super(h,{layout:o8||(o8=new Xi({"clip-layer-types":new hn(Tt.layout_clip["clip-layer-types"]),"clip-layer-scope":new hn(Tt.layout_clip["clip-layer-scope"])})),paint:a8||(a8=new Xi({}))},a,u,p)}recalculate(h,a){super.recalculate(h,a)}createBucket(h){return new l8(h)}is3D(h){return!0}}};class Nde{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Fde{constructor(){this.tasks={},this.taskQueue=[],qe(["process"],this),this.invoker=new Nde(this.process),this.nextId=0}add(a,u){const p=this.nextId++,_=(function({type:m,isSymbolTile:b,zoom:M}){return M=M||0,m==="message"?0:m!=="maybePrepare"||b?m!=="parseTile"||b?m==="parseTile"&&b?300-M:m==="maybePrepare"&&b?400-M:500:200-M:100-M})(u);if(_===0){try{a()}finally{}return null}return this.tasks[p]={fn:a,metadata:u,priority:_,id:p},this.taskQueue.push(p),this.invoker.trigger(),{cancel:()=>{delete this.tasks[p]}}}process(){try{if(this.taskQueue=this.taskQueue.filter((p=>!!this.tasks[p])),!this.taskQueue.length)return;const a=this.pick();if(a===null)return;const u=this.tasks[a];if(delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let a=null,u=1/0;for(let _=0;_<this.taskQueue.length;_++){const m=this.tasks[this.taskQueue[_]];m.priority<u&&(u=m.priority,a=_)}if(a===null)return null;const p=this.taskQueue[a];return this.taskQueue.splice(a,1),p}remove(){this.invoker.remove()}}class h7{constructor(a,u,p){this.target=a,this.parent=u,this.mapId=p,this.callbacks={},this.cancelCallbacks={},qe(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new Fde}send(a,u,p,_,m=!1,b){const M=Math.round(1e18*Math.random()).toString(36).substring(0,10);p&&(p.metadata=b,this.callbacks[M]=p);const P=new Set;return this.target.postMessage({id:M,type:a,hasCallback:!!p,targetMapId:_,mustQueue:m,sourceMapId:this.mapId,data:gd(u,P)},P),{cancel:()=>{p&&delete this.callbacks[M],this.target.postMessage({id:M,type:"<cancel>",targetMapId:_,sourceMapId:this.mapId})}}}receive(a){const u=a.data;if(!u)return;const p=u.id;if(p&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){const _=this.cancelCallbacks[p];delete this.cancelCallbacks[p],_&&_.cancel()}else if(u.mustQueue||At()){const _=this.callbacks[p],m=this.scheduler.add((()=>this.processTask(p,u)),_&&_.metadata||{type:"message"});m&&(this.cancelCallbacks[p]=m)}else this.processTask(p,u)}processTask(a,u){if(delete this.cancelCallbacks[a],u.type==="<response>"){const p=this.callbacks[a];delete this.callbacks[a],p&&(u.error?p(nl(u.error)):p(null,nl(u.data)))}else{const p=new Set,_=u.hasCallback?(b,M)=>{this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:b?gd(b):null,data:gd(M,p)},p)}:()=>{},m=nl(u.data);if(this.parent[u.type])this.parent[u.type](u.sourceMapId,m,_);else if(this.parent.getWorkerSource){const b=u.type.split(".");this.parent.getWorkerSource(u.sourceMapId,b[0],m.source,m.scope)[b[1]](m,_)}else _(new Error(`Could not find function ${u.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var Bx={workerUrl:"",workerClass:null,workerParams:void 0};const X4="mapboxgl_preloaded_worker_pool";class Xg{constructor(){this.active={}}acquire(a,u=Xg.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<u;)this.workers.push(Bx.workerClass!=null?new Bx.workerClass:new self.Worker(Bx.workerUrl,Bx.workerParams));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.workers&&this.numActive()===0&&(this.workers.forEach((u=>{u.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[X4]}numActive(){return Object.keys(this.active).length}}Xg.workerCount=2;class kv{constructor(a,u,p="Worker",_=Xg.workerCount){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=wt();const m=this.workerPool.acquire(this.id,_);for(let b=0;b<m.length;b++){const M=new kv.Actor(m[b],u,this.id);M.name=`${p} ${b}`,this.actors.push(M)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(a,u,p){on(this.actors,((_,m)=>{_.send(a,u,m)}),p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((a=>{a.remove()})),this.actors=[],this.workerPool.release(this.id)}}let $x,Z4;function YT(){return $x||($x=new Xg),$x}kv.Actor=h7;const K4=new ii(0,0,0);var J4=(h=>(h[h.PATH_RULE_UNSPECIFIED=0]="PATH_RULE_UNSPECIFIED",h[h.PATH_RULE_NON_ZERO=1]="PATH_RULE_NON_ZERO",h[h.PATH_RULE_EVEN_ODD=2]="PATH_RULE_EVEN_ODD",h))(J4||{}),qT=(h=>(h[h.LINE_CAP_UNSPECIFIED=0]="LINE_CAP_UNSPECIFIED",h[h.LINE_CAP_BUTT=1]="LINE_CAP_BUTT",h[h.LINE_CAP_ROUND=2]="LINE_CAP_ROUND",h[h.LINE_CAP_SQUARE=3]="LINE_CAP_SQUARE",h))(qT||{}),Vx=(h=>(h[h.LINE_JOIN_UNSPECIFIED=0]="LINE_JOIN_UNSPECIFIED",h[h.LINE_JOIN_MITER=1]="LINE_JOIN_MITER",h[h.LINE_JOIN_MITER_CLIP=2]="LINE_JOIN_MITER_CLIP",h[h.LINE_JOIN_ROUND=3]="LINE_JOIN_ROUND",h[h.LINE_JOIN_BEVEL=4]="LINE_JOIN_BEVEL",h))(Vx||{}),f7=(h=>(h[h.PAINT_ORDER_UNSPECIFIED=0]="PAINT_ORDER_UNSPECIFIED",h[h.PAINT_ORDER_FILL_AND_STROKE=1]="PAINT_ORDER_FILL_AND_STROKE",h[h.PAINT_ORDER_STROKE_AND_FILL=2]="PAINT_ORDER_STROKE_AND_FILL",h))(f7||{}),Lv=(h=>(h[h.PATH_COMMAND_UNSPECIFIED=0]="PATH_COMMAND_UNSPECIFIED",h[h.PATH_COMMAND_MOVE=1]="PATH_COMMAND_MOVE",h[h.PATH_COMMAND_LINE=2]="PATH_COMMAND_LINE",h[h.PATH_COMMAND_QUAD=3]="PATH_COMMAND_QUAD",h[h.PATH_COMMAND_CUBIC=4]="PATH_COMMAND_CUBIC",h[h.PATH_COMMAND_CLOSE=5]="PATH_COMMAND_CLOSE",h))(Lv||{}),p7=(h=>(h[h.MASK_TYPE_UNSPECIFIED=0]="MASK_TYPE_UNSPECIFIED",h[h.MASK_TYPE_LUMINANCE=1]="MASK_TYPE_LUMINANCE",h[h.MASK_TYPE_ALPHA=2]="MASK_TYPE_ALPHA",h))(p7||{});function zde(h,a,u){h===1&&a.icons.push((function(p,_){return(function(m){if(m.usvg_tree.height||(m.usvg_tree.height=m.usvg_tree.width),!m.metadata)return m;const{metadata:b}=m;if(b.content_area){const{content_area:M}=b;M.top==null&&(M.top=M.left),M.width==null&&(M.width=m.usvg_tree.width),M.height==null&&(M.height=M.width)}return b.stretch_x&&b.stretch_x.length&&m7(b,"x"),b.stretch_y&&b.stretch_y.length&&m7(b,"y"),m})(p.readFields(Bde,{name:void 0},_))})(u,u.readVarint()+u.pos))}function m7(h,a){const u=[],p=h[`stretch_${a}`];let _=null;for(let m=0;m<p.length;m++)_===null?_=u.length===0?p[0]:u[u.length-1][1]+p[m]:(u.push([_,_+p[m]]),_=null);h[`stretch_${a}_areas`]=u}function Bde(h,a,u){h===1?a.name=u.readString():h===2?a.metadata=(function(p,_){return p.readFields($de,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},_)})(u,u.readVarint()+u.pos):h===3&&(a.usvg_tree=(function(p,_){return p.readFields(Ude,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},_)})(u,u.readVarint()+u.pos),a.data="usvg_tree")}function $de(h,a,u){h===1?a.stretch_x=u.readPackedVarint():h===2?a.stretch_y=u.readPackedVarint():h===3?a.content_area=(function(p,_){return p.readFields(Vde,{left:0},_)})(u,u.readVarint()+u.pos):h===4&&a.variables.push((function(p,_){return p.readFields(jde,{name:void 0},_)})(u,u.readVarint()+u.pos))}function Vde(h,a,u){h===1?a.left=u.readVarint():h===2?a.width=u.readVarint():h===3?a.top=u.readVarint():h===4&&(a.height=u.readVarint())}function jde(h,a,u){h===1?a.name=u.readString():h===2&&(a.rgb_color=KT(u.readVarint()),a.value="rgb_color")}function Ude(h,a,u){h===1?a.width=a.height=u.readVarint():h===2?a.height=u.readVarint():h===3?a.children.push(XT(u,u.readVarint()+u.pos)):h===4?a.linear_gradients.push((function(p,_){return p.readFields(Zde,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},_)})(u,u.readVarint()+u.pos)):h===5?a.radial_gradients.push((function(p,_){return p.readFields(Jde,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},_)})(u,u.readVarint()+u.pos)):h===7?a.clip_paths.push((function(p,_){return p.readFields(Qde,{children:[]},_)})(u,u.readVarint()+u.pos)):h===8&&a.masks.push((function(p,_){const m=p.readFields(ehe,{left:0,width:20,mask_type:1,children:[]},_);return m.height==null&&(m.height=m.width),m.top==null&&(m.top=m.left),m})(u,u.readVarint()+u.pos))}function XT(h,a){return h.readFields(Hde,{},a)}function Hde(h,a,u){h===1?(a.group=(function(p,_){return p.readFields(Wde,{opacity:255,children:[]},_)})(u,u.readVarint()+u.pos),a.node="group"):h===2&&(a.path=(function(p,_){return p.readFields(Yde,{paint_order:1,commands:[],step:1,diffs:[],rule:1},_)})(u,u.readVarint()+u.pos),a.node="path")}function Wde(h,a,u){h===1?a.transform=ZT(u,u.readVarint()+u.pos):h===2?a.opacity=u.readVarint():h===5?a.clip_path_idx=u.readVarint():h===6?a.mask_idx=u.readVarint():h===7&&a.children.push(XT(u,u.readVarint()+u.pos))}function ZT(h,a){return h.readFields(Gde,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},a)}function Gde(h,a,u){h===1?a.sx=u.readFloat():h===2?a.ky=u.readFloat():h===3?a.kx=u.readFloat():h===4?a.sy=u.readFloat():h===5?a.tx=u.readFloat():h===6&&(a.ty=u.readFloat())}function Yde(h,a,u){h===1?a.fill=(function(p,_){return p.readFields(qde,{rgb_color:K4,paint:"rgb_color",opacity:255},_)})(u,u.readVarint()+u.pos):h===2?a.stroke=(function(p,_){return p.readFields(Xde,{rgb_color:K4,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},_)})(u,u.readVarint()+u.pos):h===3?a.paint_order=u.readVarint():h===5?u.readPackedVarint(a.commands):h===6?a.step=u.readFloat():h===7?u.readPackedSVarint(a.diffs):h===8&&(a.rule=u.readVarint())}function qde(h,a,u){h===1?(a.rgb_color=KT(u.readVarint()),a.paint="rgb_color"):h===2?(a.linear_gradient_idx=u.readVarint(),a.paint="linear_gradient_idx"):h===3?(a.radial_gradient_idx=u.readVarint(),a.paint="radial_gradient_idx"):h===5&&(a.opacity=u.readVarint())}function KT(h){return new ii((h>>16&255)/255,(h>>8&255)/255,(255&h)/255,1)}function Xde(h,a,u){h===1?(a.rgb_color=KT(u.readVarint()),a.paint="rgb_color"):h===2?(a.linear_gradient_idx=u.readVarint(),a.paint="linear_gradient_idx"):h===3?(a.radial_gradient_idx=u.readVarint(),a.paint="radial_gradient_idx"):h===5?u.readPackedFloat(a.dasharray):h===6?a.dashoffset=u.readFloat():h===7?a.miterlimit=u.readFloat():h===8?a.opacity=u.readVarint():h===9?a.width=u.readFloat():h===10?a.linecap=u.readVarint():h===11&&(a.linejoin=u.readVarint())}function Zde(h,a,u){h===1?a.transform=ZT(u,u.readVarint()+u.pos):h===2?a.spread_method=u.readVarint():h===3?a.stops.push(g7(u,u.readVarint()+u.pos)):h===4?a.x1=u.readFloat():h===5?a.y1=u.readFloat():h===6?a.x2=u.readFloat():h===7&&(a.y2=u.readFloat())}function g7(h,a){return h.readFields(Kde,{offset:0,opacity:255,rgb_color:K4},a)}function Kde(h,a,u){h===1?a.offset=u.readFloat():h===2?a.opacity=u.readVarint():h===3&&(a.rgb_color=KT(u.readVarint()))}function Jde(h,a,u){h===1?a.transform=ZT(u,u.readVarint()+u.pos):h===2?a.spread_method=u.readVarint():h===3?a.stops.push(g7(u,u.readVarint()+u.pos)):h===4?a.cx=u.readFloat():h===5?a.cy=u.readFloat():h===6?a.r=u.readFloat():h===7?a.fx=u.readFloat():h===8?a.fy=u.readFloat():h===9&&(a.fr=u.readFloat())}function Qde(h,a,u){h===1?a.transform=ZT(u,u.readVarint()+u.pos):h===2?a.clip_path_idx=u.readVarint():h===3&&a.children.push(XT(u,u.readVarint()+u.pos))}function ehe(h,a,u){h===1?a.left=a.top=u.readFloat():h===2?a.width=a.height=u.readFloat():h===3?a.top=u.readFloat():h===4?a.height=u.readFloat():h===5?a.mask_type=u.readVarint():h===6?a.mask_idx=u.readVarint():h===7&&a.children.push(XT(u,u.readVarint()+u.pos))}class the{static calculate(a={},u=[]){const p=new Map,_=new Map;if(Object.keys(a).length===0)return p;u.forEach((m=>{_.set(m.name,m.rgb_color||new ii(0,0,0))}));for(const[m,b]of Object.entries(a))_.has(m)?p.set(_.get(m).toStringPremultipliedAlpha(),b):console.warn(`Ignoring unknown image variable "${m}"`);return p}}function Nv(h,a=255,u){const p=a/255,_=h.toStringPremultipliedAlpha(),m=u.has(_)?u.get(_).clone():h.clone();return m.a*=p,m.toString()}function jx(h,a){if(!zt()){const u=document.createElement("canvas");return u.width=h,u.height=a,u}return new OffscreenCanvas(h,a)}function nhe(h,a){const u=the.calculate(a.params,h.metadata?h.metadata.variables:[]),p=h.usvg_tree,_=p.width,m=p.height,b=a.transform?a.transform:new DOMMatrix,M=Math.max(1,Math.round(_*b.a)),P=Math.max(1,Math.round(m*b.d)),R=new DOMMatrix([M/_,0,0,P/m,0,0]),E=jx(M,P).getContext("2d");return Q4(E,R,p,p,u),E.getImageData(0,0,M,P)}function Q4(h,a,u,p,_){for(const m of p.children)_7(h,a,u,m,_)}function _7(h,a,u,p,_){p.group?(h.save(),(function(m,b,M,P,R){const E=P.mask_idx!=null?M.masks[P.mask_idx]:null,O=P.clip_path_idx!=null?M.clip_paths[P.clip_path_idx]:null;if(P.transform&&(b=JT(P.transform).preMultiplySelf(b)),!(function(k,B,W){return k.opacity!==255||B||W})(P,O!=null,E!=null))return void Q4(m,b,M,P,R);const L=jx(m.canvas.width,m.canvas.height),D=L.getContext("2d");Q4(D,b,M,P,R),O&&E7(D,b,M,O),E&&T7(D,b,M,E,R),m.globalAlpha=P.opacity/255,m.drawImage(L,0,0)})(h,a,u,p.group,_),h.restore()):p.path&&(h.save(),(function(m,b,M,P,R){const E=M7(P);m.setTransform(b),P.paint_order===f7.PAINT_ORDER_FILL_AND_STROKE?(y7(m,M,P,E,R),b7(m,M,P,E,R)):(b7(m,M,P,E,R),y7(m,M,P,E,R))})(h,a,u,p.path,_),h.restore())}function y7(h,a,u,p,_){const m=u.fill;if(!m)return;const b=m.opacity/255;switch(m.paint){case"rgb_color":h.fillStyle=Nv(m.rgb_color,m.opacity,_);break;case"linear_gradient_idx":h.fillStyle=x7(h,a.linear_gradients[m.linear_gradient_idx],b,_);break;case"radial_gradient_idx":h.fillStyle=w7(h,a.radial_gradients[m.radial_gradient_idx],b,_)}h.fill(p,v7(u))}function v7(h){return h.rule===J4.PATH_RULE_NON_ZERO?"nonzero":h.rule===J4.PATH_RULE_EVEN_ODD?"evenodd":void 0}function b7(h,a,u,p,_){const m=u.stroke;if(!m)return;h.lineWidth=m.width,h.miterLimit=m.miterlimit,h.setLineDash(m.dasharray),h.lineDashOffset=m.dashoffset;const b=m.opacity/255;switch(m.paint){case"rgb_color":h.strokeStyle=Nv(m.rgb_color,m.opacity,_);break;case"linear_gradient_idx":h.strokeStyle=x7(h,a.linear_gradients[m.linear_gradient_idx],b,_);break;case"radial_gradient_idx":h.strokeStyle=w7(h,a.radial_gradients[m.radial_gradient_idx],b,_)}switch(m.linejoin){case Vx.LINE_JOIN_MITER_CLIP:case Vx.LINE_JOIN_MITER:h.lineJoin="miter";break;case Vx.LINE_JOIN_ROUND:h.lineJoin="round";break;case Vx.LINE_JOIN_BEVEL:h.lineJoin="bevel"}switch(m.linecap){case qT.LINE_CAP_BUTT:h.lineCap="butt";break;case qT.LINE_CAP_ROUND:h.lineCap="round";break;case qT.LINE_CAP_SQUARE:h.lineCap="square"}h.stroke(p)}function x7(h,a,u,p){if(a.stops.length===1){const L=a.stops[0];return Nv(L.rgb_color,L.opacity*u,p)}const _=JT(a.transform),{x1:m,y1:b,x2:M,y2:P}=a,R=_.transformPoint(new DOMPoint(m,b)),E=_.transformPoint(new DOMPoint(M,P)),O=h.createLinearGradient(R.x,R.y,E.x,E.y);for(const L of a.stops)O.addColorStop(L.offset,Nv(L.rgb_color,L.opacity*u,p));return O}function w7(h,a,u,p){if(a.stops.length===1){const L=a.stops[0];return Nv(L.rgb_color,L.opacity*u,p)}const _=JT(a.transform),{fx:m,fy:b,cx:M,cy:P}=a,R=_.transformPoint(new DOMPoint(m,b)),E=_.transformPoint(new DOMPoint(M,P)),O=h.createRadialGradient(R.x,R.y,0,E.x,E.y,a.r*((_.a+_.d)/2));for(const L of a.stops)O.addColorStop(L.offset,Nv(L.rgb_color,L.opacity*u,p));return O}function S7(h,a,u,p){const _=p.transform?JT(p.transform).preMultiplySelf(a):a,m=jx(h.canvas.width,h.canvas.height),b=m.getContext("2d");for(const P of p.children)if(P.group)S7(b,_,u,P.group);else if(P.path){const R=P.path,E=new Path2D;E.addPath(M7(R),_),b.fill(E,v7(R))}const M=p.clip_path_idx!=null?u.clip_paths[p.clip_path_idx]:null;M&&E7(b,_,u,M),h.globalCompositeOperation="source-over",h.drawImage(m,0,0)}function E7(h,a,u,p){const _=jx(h.canvas.width,h.canvas.height);S7(_.getContext("2d"),a,u,p),h.globalCompositeOperation="destination-in",h.drawImage(_,0,0)}function T7(h,a,u,p,_){if(p.children.length===0)return;const m=p.mask_idx!=null?u.masks[p.mask_idx]:null;m&&T7(h,a,u,m,_);const b=h.canvas.width,M=h.canvas.height,P=jx(b,M),R=P.getContext("2d"),E=p.width,O=p.height,L=p.left,D=p.top,k=new Path2D,B=new Path2D;B.rect(L,D,E,O),k.addPath(B,a),R.clip(k);for(const Q of p.children)_7(R,a,u,Q,_);const W=R.getImageData(0,0,b,M),G=W.data;if(p.mask_type===p7.MASK_TYPE_LUMINANCE)for(let Q=0;Q<G.length;Q+=4)G[Q+3]=G[Q+3]/255*(.2126*G[Q]+.7152*G[Q+1]+.0722*G[Q+2]);R.putImageData(W,0,0),h.globalCompositeOperation="destination-in",h.drawImage(P,0,0)}function JT(h){return h?new DOMMatrix([h.sx,h.ky,h.kx,h.sy,h.tx,h.ty]):new DOMMatrix}function M7(h){const a=new Path2D,u=h.step;let p=h.diffs[0]*u,_=h.diffs[1]*u;a.moveTo(p,_);for(let m=0,b=2;m<h.commands.length;m++)switch(h.commands[m]){case Lv.PATH_COMMAND_MOVE:p+=h.diffs[b++]*u,_+=h.diffs[b++]*u,a.moveTo(p,_);break;case Lv.PATH_COMMAND_LINE:p+=h.diffs[b++]*u,_+=h.diffs[b++]*u,a.lineTo(p,_);break;case Lv.PATH_COMMAND_QUAD:{const M=p+h.diffs[b++]*u,P=_+h.diffs[b++]*u;p=M+h.diffs[b++]*u,_=P+h.diffs[b++]*u,a.quadraticCurveTo(M,P,p,_);break}case Lv.PATH_COMMAND_CUBIC:{const M=p+h.diffs[b++]*u,P=_+h.diffs[b++]*u,R=M+h.diffs[b++]*u,E=P+h.diffs[b++]*u;p=R+h.diffs[b++]*u,_=E+h.diffs[b++]*u,a.bezierCurveTo(M,P,R,E,p,_);break}case Lv.PATH_COMMAND_CLOSE:a.closePath()}return a}class QT{constructor(a){this.capacity=a,this.cache=new Map}get(a){if(!this.cache.has(a))return;const u=this.cache.get(a);return this.cache.delete(a),this.cache.set(a,u),u}put(a,u){this.cache.has(a)?this.cache.delete(a):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(a,u)}delete(a){this.cache.delete(a)}}An(QT,"LRUCache");class eD{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(a){return new Ro(a,a.data)}getFromCache(a,u,p){return this.cacheMap.has(p)||this.cacheMap.set(p,new QT(150)),this.cacheMap.get(p).get(dp(a.toString(),u))}setInCache(a,u,p,_){this.cacheDependenciesMap.has(_)||this.cacheDependenciesMap.set(_,new Map),this.cacheMap.has(_)||this.cacheMap.set(_,new QT(150));const m=this.cacheDependenciesMap.get(_),b=dp(a.id.toString(),p);m.get(b)||m.set(b,new Set);const M=this.cacheMap.get(_),P=a.toString();m.get(b).add(P),M.put(dp(a.toString(),p),u)}removeImagesFromCacheByIds(a,u,p=0){if(!this.cacheMap.has(p)||!this.cacheDependenciesMap.has(p))return;const _=this.cacheMap.get(p),m=this.cacheDependenciesMap.get(p);for(const b of a){const M=dp(b.toString(),u);if(m.has(M)){for(const P of m.get(M))_.delete(P);m.delete(M)}}}rasterize(a,u,p,_,m=nhe){const b=this.getFromCache(a,p,_);if(b)return b.clone();const M=m(u.icon,a.options),P=eD._getImage(M);return this.setInCache(a,P,p,_),P.clone()}}class A7{constructor(a){this.size=a,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(a,u){const p=this.toIdx(a,u);return{min:this.minimums[p],max:this.maximums[p]}}isLeaf(a,u){return this.leaves[this.toIdx(a,u)]}toIdx(a,u){return u*this.size+a}}function C7(h,a,u,p){let _=0,m=Number.MAX_VALUE;for(let b=0;b<3;b++)if(Math.abs(p[b])<1e-15){if(u[b]<h[b]||u[b]>a[b])return null}else{const M=1/p[b];let P=(h[b]-u[b])*M,R=(a[b]-u[b])*M;if(P>R){const E=P;P=R,R=E}if(P>_&&(_=P),R<m&&(m=R),_>m)return null}return _}function I7(h,a,u,p,_,m,b,M,P,R,E){const O=p-h,L=_-a,D=m-u,k=b-h,B=M-a,W=P-u,G=E[1]*W-E[2]*B,Q=E[2]*k-E[0]*W,K=E[0]*B-E[1]*k,Z=O*G+L*Q+D*K;if(Math.abs(Z)<1e-15)return null;const re=1/Z,ce=R[0]-h,fe=R[1]-a,Pe=R[2]-u,Me=(ce*G+fe*Q+Pe*K)*re;if(Me<0||Me>1)return null;const Ae=fe*D-Pe*L,Ze=Pe*O-ce*D,Oe=ce*L-fe*O,Je=(E[0]*Ae+E[1]*Ze+E[2]*Oe)*re;return Je<0||Me+Je>1?null:(k*Ae+B*Ze+W*Oe)*re}function P7(h,a,u){return(h-a)/(u-a)}function O7(h,a,u,p,_,m,b,M,P){const R=1<<u,E=m-p,O=b-_,L=(h+1)/R*E+p,D=(a+0)/R*O+_,k=(a+1)/R*O+_;M[0]=(h+0)/R*E+p,M[1]=D,P[0]=L,P[1]=k}class D7{constructor(a){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=a,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=(function(m){const b=Math.ceil(Math.log2(m.dim/8)),M=[];let P=Math.ceil(Math.pow(2,b));const R=1/P,E=(D,k,B,W,G)=>{const Q=W?1:0,K=(D+1)*B-Q,Z=k*B,re=(k+1)*B-Q;G[0]=D*B,G[1]=Z,G[2]=K,G[3]=re};let O=new A7(P);const L=[];for(let D=0;D<P*P;D++){E(D%P,Math.floor(D/P),R,!1,L);const k=Mp(L[0],L[1],m),B=Mp(L[2],L[1],m),W=Mp(L[2],L[3],m),G=Mp(L[0],L[3],m);O.minimums.push(Math.min(k,B,W,G)),O.maximums.push(Math.max(k,B,W,G)),O.leaves.push(1)}for(M.push(O),P/=2;P>=1;P/=2){const D=M[M.length-1];O=new A7(P);for(let k=0;k<P*P;k++){E(k%P,Math.floor(k/P),2,!0,L);const B=D.getElevation(L[0],L[1]),W=D.getElevation(L[2],L[1]),G=D.getElevation(L[2],L[3]),Q=D.getElevation(L[0],L[3]),K=D.isLeaf(L[0],L[1]),Z=D.isLeaf(L[2],L[1]),re=D.isLeaf(L[2],L[3]),ce=D.isLeaf(L[0],L[3]),fe=Math.min(B.min,W.min,G.min,Q.min),Pe=Math.max(B.max,W.max,G.max,Q.max),Me=K&&Z&&re&&ce;O.maximums.push(Pe),O.minimums.push(fe),O.leaves.push(Pe-fe<=5&&Me?1:0)}M.push(O)}return M})(this.dem),p=u.length-1,_=u[p];this._addNode(_.minimums[0],_.maximums[0],_.leaves[0]),this._construct(u,0,0,p,0)}raycastRoot(a,u,p,_,m,b,M=1){return C7([a,u,-100],[p,_,this.maximums[0]*M],m,b)}raycast(a,u,p,_,m,b,M=1){if(!this.nodeCount)return null;const P=this.raycastRoot(a,u,p,_,m,b,M);if(P==null)return null;const R=[],E=[],O=[],L=[],D=[{idx:0,t:P,nodex:0,nodey:0,depth:0}];for(;D.length>0;){const{idx:k,t:B,nodex:W,nodey:G,depth:Q}=D.pop();if(this.leaves[k]){O7(W,G,Q,a,u,p,_,O,L);const Z=1<<Q,re=(W+0)/Z,ce=(W+1)/Z,fe=(G+0)/Z,Pe=(G+1)/Z,Me=Mp(re,fe,this.dem)*M,Ae=Mp(ce,fe,this.dem)*M,Ze=Mp(ce,Pe,this.dem)*M,Oe=Mp(re,Pe,this.dem)*M,Je=I7(O[0],O[1],Me,L[0],O[1],Ae,L[0],L[1],Ze,m,b),rt=I7(L[0],L[1],Ze,O[0],L[1],Oe,O[0],O[1],Me,m,b),et=Math.min(Je!==null?Je:Number.MAX_VALUE,rt!==null?rt:Number.MAX_VALUE);if(et!==Number.MAX_VALUE)return et;{const dt=_e.vec3.scaleAndAdd([],m,b,B);if(R7(Me,Ae,Oe,Ze,P7(dt[0],O[0],L[0]),P7(dt[1],O[1],L[1]))>=dt[2])return B}continue}let K=0;for(let Z=0;Z<this._siblingOffset.length;Z++){O7((W<<1)+this._siblingOffset[Z][0],(G<<1)+this._siblingOffset[Z][1],Q+1,a,u,p,_,O,L),O[2]=-100,L[2]=this.maximums[this.childOffsets[k]+Z]*M;const re=C7(O,L,m,b);if(re!=null){const ce=re;R[Z]=ce;let fe=!1;for(let Pe=0;Pe<K&&!fe;Pe++)ce>=R[E[Pe]]&&(E.splice(Pe,0,Z),fe=!0);fe||(E[K]=Z),K++}}for(let Z=0;Z<K;Z++){const re=E[Z];D.push({idx:this.childOffsets[k]+re,t:R[re],nodex:(W<<1)+this._siblingOffset[re][0],nodey:(G<<1)+this._siblingOffset[re][1],depth:Q+1})}}return null}_addNode(a,u,p){return this.minimums.push(a),this.maximums.push(u),this.leaves.push(p),this.childOffsets.push(0),this.nodeCount++}_construct(a,u,p,_,m){if(a[_].isLeaf(u,p)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const b=_-1,M=a[b];let P=0,R=0;for(let E=0;E<this._siblingOffset.length;E++){const O=2*u+this._siblingOffset[E][0],L=2*p+this._siblingOffset[E][1],D=M.getElevation(O,L),k=M.isLeaf(O,L),B=this._addNode(D.min,D.max,k);k&&(P|=1<<E),R||(R=B)}for(let E=0;E<this._siblingOffset.length;E++)P&1<<E||this._construct(a,2*u+this._siblingOffset[E][0],2*p+this._siblingOffset[E][1],b,R+E)}}function R7(h,a,u,p,_,m){return jn(jn(h,u,m),jn(a,p,m),_)}function Mp(h,a,u){const p=u.dim,_=$e(h*p-.5,0,p-1),m=$e(a*p-.5,0,p-1),b=Math.floor(_),M=Math.floor(m),P=Math.min(b+1,p-1),R=Math.min(M+1,p-1);return R7(u.get(b,M),u.get(P,M),u.get(b,R),u.get(P,R),_-b,m-M)}const rhe={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function ihe(h,a,u){return(256*h*256+256*a+u)/10-1e4}function she(h,a,u){return 256*h+a+u/256-32768}class eM{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(a,u,p,_=!1){if(this.uid=a,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return void Te(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const m=this.dim=u.height-2,b=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.floatView=new Float32Array(u.data.buffer),this.borderReady=_,this._modifiedForSources={},!_){for(let P=0;P<m;P++)b[this._idx(-1,P)]=b[this._idx(0,P)],b[this._idx(m,P)]=b[this._idx(m-1,P)],b[this._idx(P,-1)]=b[this._idx(P,0)],b[this._idx(P,m)]=b[this._idx(P,m-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(m,-1)]=b[this._idx(m-1,0)],b[this._idx(-1,m)]=b[this._idx(0,m-1)],b[this._idx(m,m)]=b[this._idx(m-1,m-1)]}const M=p==="terrarium"?she:ihe;for(let P=0;P<b.length;++P){const R=4*P;this.floatView[P]=M(this.pixels[R],this.pixels[R+1],this.pixels[R+2])}this._timestamp=Nt.now()}_buildQuadTree(){this._tree=new D7(this)}get(a,u,p=!1){p&&(a=$e(a,-1,this.dim),u=$e(u,-1,this.dim));const _=this._idx(a,u);return this.floatView[_]}set(a,u,p){const _=this._idx(a,u),m=this.floatView[_];return this.floatView[_]=p,p-m}static getUnpackVector(a){return rhe[a]}_idx(a,u){if(a<-1||a>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(a+1)}static pack(a,u){const p=[0,0,0,0],_=eM.getUnpackVector(u);let m=Math.floor((a+_[3])/_[2]);return p[2]=m%256,m=Math.floor(m/256),p[1]=m%256,m=Math.floor(m/256),p[0]=m,p}getPixels(){return new jB({width:this.stride,height:this.stride},this.pixels)}backfillBorder(a,u,p){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let _=u*this.dim,m=u*this.dim+this.dim,b=p*this.dim,M=p*this.dim+this.dim;switch(u){case-1:_=m-1;break;case 1:m=_+1}switch(p){case-1:b=M-1;break;case 1:M=b+1}const P=-u*this.dim,R=-p*this.dim;for(let E=b;E<M;E++)for(let O=_;O<m;O++){const L=4*this._idx(O,E),D=4*this._idx(O+P,E+R);this.pixels[L+0]=a.pixels[D+0],this.pixels[L+1]=a.pixels[D+1],this.pixels[L+2]=a.pixels[D+2],this.pixels[L+3]=a.pixels[D+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function ohe(h,a,u){h===1?a.headerLength=u.readFixed32():h===2?a.x=u.readVarint():h===3?a.y=u.readVarint():h===4?a.z=u.readVarint():h===5&&a.layers.push((function(p,_){return p.readFields(dhe,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},_)})(u,u.readVarint()+u.pos))}function ahe(h,a,u){h===1?(a.delta_filter=(function(p,_){return p.readFields(lhe,{blockSize:0},_)})(u,u.readVarint()+u.pos),a.filter="delta_filter"):h===2?(u.readVarint(),a.filter="zigzag_filter"):h===3?(u.readVarint(),a.filter="bitshuffle_filter"):h===4&&(u.readVarint(),a.filter="byteshuffle_filter")}function lhe(h,a,u){h===1&&(a.blockSize=u.readVarint())}function che(h,a,u){h===1?(u.readVarint(),a.codec="gzip_data"):h===2?(u.readVarint(),a.codec="jpeg_image"):h===3?(u.readVarint(),a.codec="webp_image"):h===4&&(u.readVarint(),a.codec="png_image")}function uhe(h,a,u){let p=0,_=0;h===1?a.firstByte=u.readFixed64():h===2?a.lastByte=u.readFixed64():h===3?a.filters.push((function(m,b){return m.readFields(ahe,{},b)})(u,u.readVarint()+u.pos)):h===4?a.codec=(function(m,b){return m.readFields(che,{},b)})(u,u.readVarint()+u.pos):h===5?_=u.readFloat():h===6?p=u.readFloat():h===7?a.bands.push(u.readString()):h===8?a.offset=u.readDouble():h===9&&(a.scale=u.readDouble()),a.offset===0&&(a.offset=_),a.scale===0&&(a.scale=p)}function dhe(h,a,u){h===1?a.version=u.readVarint():h===2?a.name=u.readString():h===3?a.units=u.readString():h===4?a.tileSize=u.readVarint():h===5?a.buffer=u.readVarint():h===6?a.pixelFormat=u.readVarint():h===7&&a.dataIndex.push((function(p,_){return p.readFields(uhe,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},_)})(u,u.readVarint()+u.pos))}function hhe(h,a,u){if(h===2)(function(p,_,m){p.readFields(fhe,m,_)})(u,u.readVarint()+u.pos,a);else if(h===3)throw new Error("Not implemented")}function fhe(h,a,u){if(h===1){let p=0;const _=u.readVarint()+u.pos;for(;u.pos<_;)a[p++]=u.readVarint()}}function phe(h,a){if(a.length!==4)throw new Error(`Expected data of dimension 4 but got ${a.length}.`);let u=a[3];for(let p=2;p>=1;p--){const _=p===1?1:0,m=p===2?1:0;for(let b=0;b<a[0];b++){const M=a[1]*b;for(let P=_;P<a[1];P++){const R=a[2]*(P+M);for(let E=m;E<a[2];E++){const O=a[3]*(E+R);for(let L=0;L<a[3];L++){const D=O+L;h[D]+=h[D-u]}}}}u*=a[p]}return h}function mhe(h){for(let a=0,u=h.length;a<u;a++)h[a]=h[a]>>>1^-(1&h[a]);return h}function ghe(h,a){switch(a){case"uint32":return h;case"uint16":for(let u=0;u<h.length;u+=2){const p=h[u],_=h[u+1];h[u]=(240&p)>>4|(61440&p)>>8|(240&_)<<4|61440&_,h[u+1]=15&p|(3840&p)>>4|(15&_)<<8|(3840&_)<<4}return h;case"uint8":for(let u=0;u<h.length;u+=4){const p=h[u],_=h[u+1],m=h[u+2],b=h[u+3];h[u+0]=(192&p)>>6|(192&_)>>4|(192&m)>>2|192&b,h[u+1]=(48&p)>>4|(48&_)>>2|48&m|(48&b)<<2,h[u+2]=(12&p)>>2|12&_|(12&m)<<2|(12&b)<<4,h[u+3]=3&p|(3&_)<<2|(3&m)<<4|(3&b)<<6}return h;default:throw new Error(`Invalid pixel format, "${a}"`)}}An(eM,"DEMData"),An(D7,"DemMinMaxQuadTree",{omit:["dem"]});var dc=Uint8Array,Ux=Uint16Array,_he=Int32Array,k7=new dc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),L7=new dc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yhe=new dc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),N7=function(h,a){for(var u=new Ux(31),p=0;p<31;++p)u[p]=a+=1<<h[p-1];var _=new _he(u[30]);for(p=1;p<30;++p)for(var m=u[p];m<u[p+1];++m)_[m]=m-u[p]<<5|p;return{b:u,r:_}},F7=N7(k7,2),z7=F7.b,vhe=F7.r;z7[28]=258,vhe[258]=28;for(var bhe=N7(L7,0).b,B7=new Ux(32768),Os=0;Os<32768;++Os){var Fv=(43690&Os)>>1|(21845&Os)<<1;B7[Os]=((65280&(Fv=(61680&(Fv=(52428&Fv)>>2|(13107&Fv)<<2))>>4|(3855&Fv)<<4))>>8|(255&Fv)<<8)>>1}var Hx=function(h,a,u){for(var p=h.length,_=0,m=new Ux(a);_<p;++_)h[_]&&++m[h[_]-1];var b,M=new Ux(a);for(_=1;_<a;++_)M[_]=M[_-1]+m[_-1]<<1;b=new Ux(1<<a);var P=15-a;for(_=0;_<p;++_)if(h[_])for(var R=_<<4|h[_],E=a-h[_],O=M[h[_]-1]++<<E,L=O|(1<<E)-1;O<=L;++O)b[B7[O]>>P]=R;return b},Wx=new dc(288);for(Os=0;Os<144;++Os)Wx[Os]=8;for(Os=144;Os<256;++Os)Wx[Os]=9;for(Os=256;Os<280;++Os)Wx[Os]=7;for(Os=280;Os<288;++Os)Wx[Os]=8;var $7=new dc(32);for(Os=0;Os<32;++Os)$7[Os]=5;var xhe=Hx(Wx,9),whe=Hx($7,5),tD=function(h){for(var a=h[0],u=1;u<h.length;++u)h[u]>a&&(a=h[u]);return a},Mu=function(h,a,u){var p=a/8|0;return(h[p]|h[p+1]<<8)>>(7&a)&u},nD=function(h,a){var u=a/8|0;return(h[u]|h[u+1]<<8|h[u+2]<<16)>>(7&a)},She=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Au=function(h,a,u){var p=new Error(a||She[h]);if(p.code=h,Error.captureStackTrace&&Error.captureStackTrace(p,Au),!u)throw p;return p},Ehe=new dc(0),The=typeof TextDecoder<"u"&&new TextDecoder;try{The.decode(Ehe,{stream:!0})}catch{}const Mhe={gzip_data:"gzip"};class zc extends Error{constructor(a){super(a),this.name="MRTError"}}const Ahe={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},V7={uint32:1,uint16:2,uint8:4},Che={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let rD;class tM{constructor(a=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=a}getLayer(a){const u=this.layers[a];if(!u)throw new zc(`Layer '${a}' not found`);return u}getHeaderLength(a){const u=new Uint8Array(a),p=new DataView(a);if(u[0]!==13)throw new zc("File is not a valid MRT.");return p.getUint32(1,!0)}parseHeader(a){const u=new Uint8Array(a),p=this.getHeaderLength(a);if(u.length<p)throw new zc(`Expected header with length >= ${p} but got buffer of length ${u.length}`);const _=(function(m,b){return m.readFields(ohe,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)})(new rD(u.subarray(0,p)));if(!isNaN(this.x)&&(this.x!==_.x||this.y!==_.y||this.z!==_.z))throw new zc(`Invalid attempt to parse header ${_.z}/${_.x}/${_.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=_.x,this.y=_.y,this.z=_.z;for(const m of _.layers)this.layers[m.name]=new j7(m,{cacheSize:this._cacheSize});return this}createDecodingTask(a){const u=[],p=this.getLayer(a.layerName);for(let _ of a.blockIndices){const m=p.dataIndex[_],b=m.firstByte-a.firstByte,M=m.lastByte-a.firstByte;if(p._blocksInProgress.has(_))continue;const P={layerName:p.name,firstByte:b,lastByte:M,pixelFormat:p.pixelFormat,blockIndex:_,blockShape:[m.bands.length].concat(p.bandShape),buffer:p.buffer,codec:m.codec.codec,filters:m.filters.map((R=>R.filter))};p._blocksInProgress.add(_),u.push(P)}return new U7(u,(()=>{u.forEach((_=>p._blocksInProgress.delete(_.blockIndex)))}),((_,m)=>{if(u.forEach((b=>p._blocksInProgress.delete(b.blockIndex))),_)throw _;m.forEach((b=>{this.getLayer(b.layerName).processDecodedData(b)}))}))}}class j7{constructor({version:a,name:u,units:p,tileSize:_,pixelFormat:m,buffer:b,dataIndex:M},P){if(this.version=a,this.version!==1)throw new zc(`Cannot parse raster layer encoded with MRT version ${a}`);this.name=u,this.units=p,this.tileSize=_,this.buffer=b,this.pixelFormat=Ahe[m],this.dataIndex=M,this.bandShape=[_+2*b,_+2*b,V7[this.pixelFormat]],this._decodedBlocks=new QT(P?P.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return V7[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map((({bands:a})=>a)).flat()}processDecodedData(a){const u=a.blockIndex.toString();this._decodedBlocks.get(u)||this._decodedBlocks.put(u,a.data)}getBlockForBand(a){let u=0;switch(typeof a){case"string":for(const[p,_]of this.dataIndex.entries()){for(const[m,b]of _.bands.entries())if(b===a)return{bandIndex:u+m,blockIndex:p,blockBandIndex:m};u+=_.bands.length}break;case"number":for(const[p,_]of this.dataIndex.entries()){if(a>=u&&a<u+_.bands.length)return{bandIndex:a,blockIndex:p,blockBandIndex:a-u};u+=_.bands.length}break;default:throw new zc(`Invalid band \`${JSON.stringify(a)}\`. Expected string or integer.`)}return{blockIndex:-1,blockBandIndex:-1}}getDataRange(a){let u=1/0,p=-1/0;const _=[],m=new Set;for(const b of a){const{blockIndex:M}=this.getBlockForBand(b);if(M<0)throw new zc(`Invalid band: ${JSON.stringify(b)}`);const P=this.dataIndex[M];_.includes(M)||_.push(M),m.add(M),u=Math.min(u,P.firstByte),p=Math.max(p,P.lastByte)}if(m.size>this.cacheSize)throw new zc(`Number of blocks to decode (${m.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:u,lastByte:p,blockIndices:_}}hasBand(a){const{blockIndex:u}=this.getBlockForBand(a);return u>=0}hasDataForBand(a){const{blockIndex:u}=this.getBlockForBand(a);return u>=0&&!!this._decodedBlocks.get(u.toString())}getBandView(a){const{blockIndex:u,blockBandIndex:p}=this.getBlockForBand(a);if(u<0)throw new zc(`Band not found: ${JSON.stringify(a)}`);const _=this._decodedBlocks.get(u.toString());if(!_)throw new zc(`Data for band ${JSON.stringify(a)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[u],b=this.bandShape.reduce(((R,E)=>R*E),1),M=p*b,P=_.subarray(M,M+b);return{data:P,bytes:new Uint8Array(P.buffer).subarray(P.byteOffset,P.byteOffset+P.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:m.offset,scale:m.scale}}}tM.setPbf=function(h){rD=h};class U7{constructor(a,u,p){this.tasks=a,this._onCancel=u,this._onComplete=p,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(a,u){this._finalized||(this._onComplete(a,u),this._finalized=!0)}}tM.performDecoding=function(h,a){const u=new Uint8Array(h);return Promise.all(a.tasks.map((p=>{const{layerName:_,firstByte:m,lastByte:b,pixelFormat:M,blockShape:P,blockIndex:R,filters:E,codec:O}=p,L=u.subarray(m,b+1),D=new Uint32Array(P[0]*P[1]*P[2]);let k;if(O!=="gzip_data")throw new zc(`Unhandled codec: ${O}`);return k=(function(B,W){if(!globalThis.DecompressionStream&&W==="gzip_data")return Promise.resolve(((Z=(function(fe){fe[0]==31&&fe[1]==139&&fe[2]==8||Au(6,"invalid gzip data");var Pe=fe[3],Me=10;4&Pe&&(Me+=2+(fe[10]|fe[11]<<8));for(var Ae=(Pe>>3&1)+(Pe>>4&1);Ae>0;Ae-=!fe[Me++]);return Me+(2&Pe)})(K=B))+8>K.length&&Au(6,"invalid gzip data"),(function(fe,Pe,Me,Ae){var Ze=fe.length;if(!Ze||Pe.f&&!Pe.l)return Me||new dc(0);var Oe=!Me,Je=Oe||Pe.i!=2,rt=Pe.i;Oe&&(Me=new dc(3*Ze));var et,dt,ct=function(Cp){var Ip=Me.length;if(Cp>Ip){var Kg=new dc(Math.max(2*Ip,Cp));Kg.set(Me),Me=Kg}},xt=Pe.f||0,pt=Pe.p||0,St=Pe.b||0,Zt=Pe.l,Yt=Pe.d,Cn=Pe.m,rn=Pe.n,pn=8*Ze;do{if(!Zt){xt=Mu(fe,pt,1);var en=Mu(fe,pt+1,3);if(pt+=3,!en){var $n=fe[(Qn=4+((pt+7)/8|0))-4]|fe[Qn-3]<<8,Sn=Qn+$n;if(Sn>Ze){rt&&Au(0);break}Je&&ct(St+$n),Me.set(fe.subarray(Qn,Sn),St),Pe.b=St+=$n,Pe.p=pt=8*Sn,Pe.f=xt;continue}if(en==1)Zt=xhe,Yt=whe,Cn=9,rn=5;else if(en==2){var Dn=Mu(fe,pt,31)+257,Kn=Mu(fe,pt+10,15)+4,pr=Dn+Mu(fe,pt+5,31)+1;pt+=14;for(var tr=new dc(pr),xr=new dc(19),fr=0;fr<Kn;++fr)xr[yhe[fr]]=Mu(fe,pt+3*fr,7);pt+=3*Kn;var Er=tD(xr),$r=(1<<Er)-1,bi=Hx(xr,Er);for(fr=0;fr<pr;){var Qn,Pr=bi[Mu(fe,pt,$r)];if(pt+=15&Pr,(Qn=Pr>>4)<16)tr[fr++]=Qn;else{var Ni=0,Wi=0;for(Qn==16?(Wi=3+Mu(fe,pt,3),pt+=2,Ni=tr[fr-1]):Qn==17?(Wi=3+Mu(fe,pt,7),pt+=3):Qn==18&&(Wi=11+Mu(fe,pt,127),pt+=7);Wi--;)tr[fr++]=Ni}}var Zi=tr.subarray(0,Dn),os=tr.subarray(Dn);Cn=tD(Zi),rn=tD(os),Zt=Hx(Zi,Cn),Yt=Hx(os,rn)}else Au(1);if(pt>pn){rt&&Au(0);break}}Je&&ct(St+131072);for(var yi=(1<<Cn)-1,Ks=(1<<rn)-1,pa=pt;;pa=pt){var Ss=(Ni=Zt[nD(fe,pt)&yi])>>4;if((pt+=15&Ni)>pn){rt&&Au(0);break}if(Ni||Au(2),Ss<256)Me[St++]=Ss;else{if(Ss==256){pa=pt,Zt=null;break}var Ds=Ss-254;Ss>264&&(Ds=Mu(fe,pt,(1<<(hc=k7[fr=Ss-257]))-1)+z7[fr],pt+=hc);var Go=Yt[nD(fe,pt)&Ks],xo=Go>>4;if(Go||Au(3),pt+=15&Go,os=bhe[xo],xo>3){var hc=L7[xo];os+=nD(fe,pt)&(1<<hc)-1,pt+=hc}if(pt>pn){rt&&Au(0);break}Je&&ct(St+131072);var Ap=St+Ds;if(St<os){var Bc=0-os,Iu=Math.min(os,Ap);for(Bc+St<0&&Au(3);St<Iu;++St)Me[St]=(void 0)[Bc+St]}for(;St<Ap;++St)Me[St]=Me[St-os]}}Pe.l=Zt,Pe.p=pa,Pe.b=St,Pe.f=xt,Zt&&(xt=1,Pe.m=Cn,Pe.d=Yt,Pe.n=rn)}while(!xt);return St!=Me.length&&Oe?(et=Me,((dt=St)==null||dt>et.length)&&(dt=et.length),new dc(et.subarray(0,dt))):Me.subarray(0,St)})(K.subarray(Z,-8),{i:2},new dc(((G=K)[(Q=G.length)-4]|G[Q-3]<<8|G[Q-2]<<16|G[Q-1]<<24)>>>0))));var G,Q,K,Z;const re=Mhe[W];if(!re)throw new Error(`Unhandled codec: ${W}`);const ce=new globalThis.DecompressionStream(re);return new Response(new Blob([B]).stream().pipeThrough(ce)).arrayBuffer().then((fe=>new Uint8Array(fe)))})(L,O).then((B=>((function(W,G){W.readFields(hhe,G)})(new rD(B),D),new Che[M](D.buffer)))),k.then((B=>{for(let W=E.length-1;W>=0;W--)switch(E[W]){case"delta_filter":phe(B,P);break;case"zigzag_filter":mhe(B);break;case"bitshuffle_filter":ghe(B,M);break;default:throw new zc(`Unhandled filter "${E[W]}"`)}return{layerName:_,blockIndex:R,data:B}})).catch((B=>{throw B}))})))},An(U7,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),An(tM,"MapboxRasterTile"),An(j7,"MapboxRasterLayer",{omit:["_blocksInProgress"]});let Gx,iD,Cu,zv,sD,Bv=null;function H7(){return At()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:iD||ue.DRACO_URL}function W7(){if(At()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(zv)return zv;const h=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return zv=WebAssembly.validate(h)?ue.MESHOPT_SIMD_URL:ue.MESHOPT_URL,zv}const nM={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ihe={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},Yx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function G7(h,a,u){const p=u.json.bufferViews.length,_=u.buffers.length;a.bufferView=p,u.json.bufferViews[p]={buffer:_,byteLength:h.byteLength},u.buffers[_]=h}const oD="KHR_draco_mesh_compression";function Phe(h,a){const u=h.extensions&&h.extensions[oD];if(!u)return;const p=new Cu.Decoder,_=Z7(a,u.bufferView),m=new Cu.Mesh;if(!p.DecodeArrayToMesh(_,_.byteLength,m))throw new Error("Failed to decode Draco mesh");const b=a.json.accessors[h.indices],M=nM[b.componentType],P=b.count*M.BYTES_PER_ELEMENT,R=Cu._malloc(P);M===Uint16Array?p.GetTrianglesUInt16Array(m,P,R):p.GetTrianglesUInt32Array(m,P,R),G7(Cu.memory.buffer.slice(R,R+P),b,a),Cu._free(R);for(const E of Object.keys(u.attributes)){const O=p.GetAttributeByUniqueId(m,u.attributes[E]),L=a.json.accessors[h.attributes[E]],D=Ihe[L.componentType],k=L.count*Yx[L.type]*nM[L.componentType].BYTES_PER_ELEMENT,B=Cu._malloc(k);p.GetAttributeDataArrayForAllPoints(m,O,Cu[D],k,B),G7(Cu.memory.buffer.slice(B,B+k),L,a),Cu._free(B)}p.destroy(),m.destroy(),delete h.extensions[oD]}const rM="EXT_meshopt_compression";function Ohe(h,a){if(!h.extensions||!h.extensions[rM])return;const u=h.extensions[rM],p=new Uint8Array(a.buffers[u.buffer],u.byteOffset||0,u.byteLength||0),_=new Uint8Array(u.count*u.byteStride);sD.decodeGltfBuffer(_,u.count,u.byteStride,p,u.mode,u.filter),h.buffer=a.buffers.length,h.byteOffset=0,a.buffers[h.buffer]=_.buffer,delete h.extensions[rM]}const Y7=1179937895,q7=new TextDecoder("utf8");function X7(h,a){return new URL(h,a).href}function Dhe(h,a,u,p){return fetch(X7(h.uri,p)).then((_=>_.arrayBuffer())).then((_=>{a.buffers[u]=_}))}function Z7(h,a){const u=h.json.bufferViews[a];return new Uint8Array(h.buffers[u.buffer],u.byteOffset||0,u.byteLength)}function Rhe(h,a,u,p){if(h.uri){const _=X7(h.uri,p);return fetch(_).then((m=>m.blob())).then((m=>createImageBitmap(m))).then((m=>{a.images[u]=m}))}if(h.bufferView!==void 0){const _=Z7(a,h.bufferView),m=new Blob([_],{type:h.mimeType});return createImageBitmap(m).then((b=>{a.images[u]=b}))}}function K7(h,a=0,u){const p={json:null,images:[],buffers:[]};if(new Uint32Array(h,a,1)[0]===Y7){const E=new Uint32Array(h,a);let O=2;const L=(E[O++]>>2)-3,D=E[O++]>>2;if(O++,p.json=JSON.parse(q7.decode(E.subarray(O,O+D))),O+=D,O<L){const k=E[O++];O++;const B=a+(O<<2);p.buffers[0]=h.slice(B,B+k)}}else p.json=JSON.parse(q7.decode(new Uint8Array(h,a)));const{buffers:_,images:m,meshes:b,extensionsUsed:M,bufferViews:P}=p.json;let R=Promise.resolve();if(_){const E=[];for(let O=0;O<_.length;O++){const L=_[O];L.uri?E.push(Dhe(L,p,O,u)):p.buffers[O]||(p.buffers[O]=null)}R=Promise.all(E)}return R.then((()=>{const E=[],O=M&&M.includes(oD),L=M&&M.includes(rM);if(O&&E.push((function(){if(!Cu)return Gx??(Gx=(function(D){let k,B=null;function W(){k=new Uint8Array(B.buffer)}function G(){throw new Error("Unexpected Draco error.")}const Q={a:{a:G,d:function(K,Z,re){return k.copyWithin(K,Z,Z+re)},c:function(K){const Z=k.length,re=Math.max(K>>>0,Math.ceil(1.2*Z)),ce=Math.ceil((re-Z)/65536);try{return B.grow(ce),W(),!0}catch{return!1}},b:G}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(D,Q):D.then((K=>K.arrayBuffer())).then((K=>WebAssembly.instantiate(K,Q)))).then((K=>{const{Rb:Z,Qb:re,P:ce,T:fe,X:Pe,Ja:Me,La:Ae,Qa:Ze,Va:Oe,Wa:Je,eb:rt,jb:et,f:dt,e:ct,yb:xt,zb:pt,Ab:St,Bb:Zt,Db:Yt,Gb:Cn}=K.instance.exports;B=ct;const rn=(()=>{let pn=0,en=0,$n=0,Sn=0;return Dn=>{$n&&(Z(Sn),Z(pn),en+=$n,$n=pn=0),pn||(en+=128,pn=re(en));const Kn=Dn.length+7&-8;let pr=pn;Kn>=en&&($n=Kn,pr=Sn=re(Kn));for(let tr=0;tr<Dn.length;tr++)k[pr+tr]=Dn[tr];return pr}})();return W(),dt(),{memory:ct,_free:Z,_malloc:re,Mesh:class{constructor(){this.ptr=ce()}destroy(){fe(this.ptr)}},Decoder:class{constructor(){this.ptr=Me()}destroy(){et(this.ptr)}DecodeArrayToMesh(pn,en,$n){const Sn=rn(pn),Dn=Ae(this.ptr,Sn,en,$n.ptr);return!!Pe(Dn)}GetAttributeByUniqueId(pn,en){return{ptr:Ze(this.ptr,pn.ptr,en)}}GetTrianglesUInt16Array(pn,en,$n){Oe(this.ptr,pn.ptr,en,$n)}GetTrianglesUInt32Array(pn,en,$n){Je(this.ptr,pn.ptr,en,$n)}GetAttributeDataArrayForAllPoints(pn,en,$n,Sn,Dn){rt(this.ptr,pn.ptr,en.ptr,$n,Sn,Dn)}},DT_INT8:xt(),DT_UINT8:pt(),DT_INT16:St(),DT_UINT16:Zt(),DT_UINT32:Yt(),DT_FLOAT32:Cn()}}))})(fetch(H7())),Gx.then((D=>{Cu=D,Gx=void 0})))})()),L&&E.push((function(){if(sD)return;const D=(function(k){let B;const W=WebAssembly.instantiateStreaming(k,{}).then((K=>{B=K.instance,B.exports.__wasm_call_ctors()})),G={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Q={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:W,supported:!0,decodeGltfBuffer(K,Z,re,ce,fe,Pe){(function(Me,Ae,Ze,Oe,Je,rt,et){const dt=Me.exports.sbrk,ct=Oe+3&-4,xt=dt(ct*Je),pt=dt(rt.length),St=new Uint8Array(Me.exports.memory.buffer);St.set(rt,pt);const Zt=Ae(xt,Oe,Je,pt,rt.length);if(Zt===0&&et&&et(xt,ct,Je),Ze.set(St.subarray(xt,xt+Oe*Je)),dt(xt-dt(0)),Zt!==0)throw new Error(`Malformed buffer data: ${Zt}`)})(B,B.exports[Q[fe]],K,Z,re,ce,B.exports[G[Pe]])}}})(fetch(W7()));return D.ready.then((()=>{sD=D}))})()),m)for(let D=0;D<m.length;D++)E.push(Rhe(m[D],p,D,u));return(E.length?Promise.all(E):Promise.resolve()).then((()=>{if(O&&b)for(const{primitives:D}of b)for(const k of D)Phe(k,p);if(L&&b&&P)for(const D of P)Ohe(D,p);return p}))}))}function Zg(h,a){const u=h.json.bufferViews[a.bufferView],p=nM[a.componentType];return new p(h.buffers[u.buffer],(a.byteOffset||0)+(u.byteOffset||0),a.count*(u.byteStride&&u.byteStride!==Yx[a.type]*p.BYTES_PER_ELEMENT?u.byteStride/p.BYTES_PER_ELEMENT:Yx[a.type]))}function aD(h,a,u,p){const _=nM[a.componentType],m=(function(E){switch(E){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}})(_),b=h.json.bufferViews[a.bufferView],M=b.byteStride?b.byteStride/_.BYTES_PER_ELEMENT:Yx[a.type],P=u.float32,R=P.length/u.capacity;for(let E=0,O=0;E<a.count*M;E+=M,O+=R)for(let L=0;L<R;L++)P[O+L]=p[E+L]*m;u._trim()}function khe(h,a,u){const p=h.indices,_=h.attributes,m={};m.indexArray=new yo;const b=a.json.accessors[p],M=b.count/3;m.indexArray.reserve(M);const P=Zg(a,b);for(let L=0;L<M;L++)m.indexArray.emplaceBack(P[3*L],P[3*L+1],P[3*L+2]);m.indexArray._trim(),m.vertexArray=new cc;const R=a.json.accessors[_.POSITION];m.vertexArray.reserve(R.count);const E=Zg(a,R);for(let L=0;L<R.count;L++)m.vertexArray.emplaceBack(E[3*L],E[3*L+1],E[3*L+2]);if(m.vertexArray._trim(),m.aabb=new kn(R.min,R.max),m.centroid=(function(L,D){const k=[0,0,0],B=L.length;if(B>0){for(let W=0;W<B;W++){const G=3*L[W];k[0]+=D[G],k[1]+=D[G+1],k[2]+=D[G+2]}k[0]/=B,k[1]/=B,k[2]/=B}return k})(P,E),_.COLOR_0!==void 0){const L=a.json.accessors[_.COLOR_0],D=Yx[L.type],k=Zg(a,L);m.colorArray=D===3?new cc:new gh,m.colorArray.resize(L.count),aD(a,L,m.colorArray,k)}if(_.NORMAL!==void 0){m.normalArray=new cc;const L=a.json.accessors[_.NORMAL];m.normalArray.resize(L.count);const D=Zg(a,L);aD(a,L,m.normalArray,D)}if(_.TEXCOORD_0!==void 0&&u.length>0){m.texcoordArray=new fp;const L=a.json.accessors[_.TEXCOORD_0];m.texcoordArray.resize(L.count);const D=Zg(a,L);aD(a,L,m.texcoordArray,D)}if(_._FEATURE_ID_RGBA4444!==void 0){const L=a.json.accessors[_._FEATURE_ID_RGBA4444];a.json.extensionsUsed&&a.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=Zg(a,L))}_._FEATURE_RGBA4444!==void 0&&(m.featureData=new Uint32Array(Zg(a,a.json.accessors[_._FEATURE_RGBA4444]).buffer));const O=h.material;return m.material=(function(L,D){const{emissiveFactor:k=[0,0,0],alphaMode:B="OPAQUE",alphaCutoff:W=.5,normalTexture:G,occlusionTexture:Q,emissiveTexture:K,doubleSided:Z}=L,{baseColorFactor:re=[1,1,1,1],metallicFactor:ce=1,roughnessFactor:fe=1,baseColorTexture:Pe,metallicRoughnessTexture:Me}=L.pbrMetallicRoughness||{},Ae=Q?D[Q.index]:void 0;if(Q&&Q.extensions&&Q.extensions.KHR_texture_transform&&Ae){const Ze=Q.extensions.KHR_texture_transform;Ae.offsetScale=[Ze.offset[0],Ze.offset[1],Ze.scale[0],Ze.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new ii(...re),metallicFactor:ce,roughnessFactor:fe,baseColorTexture:Pe?D[Pe.index]:void 0,metallicRoughnessTexture:Me?D[Me.index]:void 0},doubleSided:Z,emissiveFactor:k,alphaMode:B,alphaCutoff:W,normalTexture:G?D[G.index]:void 0,occlusionTexture:Ae,emissionTexture:K?D[K.index]:void 0,defined:L.defined===void 0}})(O!==void 0?a.json.materials[O]:{defined:!1},u),m}function J7(h,a,u){const{matrix:p,rotation:_,translation:m,scale:b,mesh:M,extras:P,children:R}=h,E={};if(E.matrix=p||_e.mat4.fromRotationTranslationScale([],_||[0,0,0,1],m||[0,0,0],b||[1,1,1]),M!==void 0){E.meshes=u[M];const O=E.anchor=[0,0];for(const L of E.meshes){const{min:D,max:k}=L.aabb;O[0]+=D[0]+k[0],O[1]+=D[1]+k[1]}O[0]=Math.floor(O[0]/E.meshes.length/2),O[1]=Math.floor(O[1]/E.meshes.length/2)}if(P&&(P.id&&(E.id=P.id),P.lights&&(E.lights=(function(O){if(!O.length)return[];const L=(function(G){const Q=atob(G),K=new Uint8Array(Q.length);for(let Z=0;Z<Q.length;Z++)K[Z]=Q.codePointAt(Z);return K})(O),D=[],k=L.length/24,B=new Uint16Array(L.buffer),W=new Float32Array(L.buffer);for(let G=0;G<k;G++){const Q=B[2*G*6]/30,K=B[2*G*6+1]/30,Z=B[2*G*6+10]/100,re=W[6*G+1],ce=W[6*G+2],fe=W[6*G+3],Pe=W[6*G+4],Me=fe-re,Ae=Pe-ce,Ze=Math.hypot(Me,Ae);D.push({pos:[re+.5*Me,ce+.5*Ae,K],normal:[Ae/Ze,-Me/Ze,0],width:Ze,height:Q,depth:Z,points:[re,ce,fe,Pe]})}return D})(P.lights))),R){const O=[];for(const L of R)O.push(J7(a.json.nodes[L],a,u));E.children=O}return E}function Lhe(h){if(h.vertices.length===0||h.indices.length===0)return null;const a=new p4(h.vertices,h.indices,8,256),[u,p]=[a.min.clone(),a.max.clone()];return{vertices:h.vertices,indices:h.indices,grid:a,min:u,max:p}}function Nhe(h){if(!h.extras||!h.extras.ground)return null;const a=h.extras.ground;if(!a||!Array.isArray(a)||a.length===0)return null;const u=a[0];if(!u||!Array.isArray(u)||u.length===0)return null;const p=[];for(const b of u){if(!Array.isArray(b)||b.length!==2)continue;const M=b[0],P=b[1];typeof M=="number"&&typeof P=="number"&&p.push(new ge(M,P))}if(p.length<3)return null;p.length>1&&p[p.length-1].equals(p[0])&&p.pop();let _=0;for(let b=0;b<p.length;b++){const M=p[b],P=p[(b+1)%p.length],R=p[(b+2)%p.length];_+=(M.x-P.x)*(R.y-P.y)-(R.x-P.x)*(M.y-P.y)}_>0&&p.reverse();const m=yx(p.flatMap((b=>[b.x,b.y])),[]);return m.length===0?null:{vertices:p,indices:m}}function Fhe(h,a){const u=[],p=[];let _=0;const m=[];for(const b of h){_=u.length;const M=b.vertexArray.float32,P=b.indexArray.uint16;for(let R=0;R<b.vertexArray.length;R++)m[0]=M[3*R+0],m[1]=M[3*R+1],m[2]=M[3*R+2],_e.vec3.transformMat4(m,m,a),u.push(new ge(m[0],m[1]));for(let R=0;R<3*b.indexArray.length;R++)p.push(P[R]+_)}if(p.length%3!=0)return null;for(let b=0;b<p.length;b+=3){const M=u[p[b+0]],P=u[p[b+1]],R=u[p[b+2]];(M.x-P.x)*(R.y-P.y)-(R.x-P.x)*(M.y-P.y)>0&&([p[b+1],p[b+2]]=[p[b+2],p[b+1]])}return{vertices:u,indices:p}}function Q7(h){const a=(function(P,R){const E=[],O=WebGL2RenderingContext;if(P.json.textures)for(const L of P.json.textures){const D={magFilter:O.LINEAR,minFilter:O.NEAREST,wrapS:O.REPEAT,wrapT:O.REPEAT};L.sampler!==void 0&&Object.assign(D,P.json.samplers[L.sampler]),E.push({image:R[L.source],sampler:D,uploaded:!1})}return E})(h,h.images),u=(function(P,R){const E=[];for(const O of P.json.meshes){const L=[];for(const D of O.primitives)L.push(khe(D,P,R));E.push(L)}return E})(h,a),{scenes:p,scene:_,nodes:m}=h.json,b=p?p[_||0].nodes:m,M=[];for(const P of b)M.push(J7(m[P],h,u));return(function(P,R,E){const O={},L=new Set;for(let D=0;D<P.length;D++){const k=E[R[D]];if(!k.extras)continue;const B=k.extras["mapbox:footprint:version"],W=k.extras["mapbox:footprint:id"];(B||W)&&L.add(D),B==="1.0.0"&&W&&(O[W]=D)}for(let D=0;D<P.length;D++){if(L.has(D))continue;const k=P[D],B=E[R[D]];if(!B.extras)continue;let W=null;k.id in O&&(W=Fhe(P[O[k.id]].meshes,k.matrix)),W||(W=Nhe(B)),W&&(k.footprint=Lhe(W))}if(L.size>0){const D=Array.from(L.values()).sort(((k,B)=>k-B));for(let k=D.length-1;k>=0;k--)P.splice(D[k],1)}})(M,b,h.json.nodes),M}function zhe(h){h.heightmap=new Float32Array(4096),h.heightmap.fill(-1);const a=h.vertexArray.float32,u=h.aabb.min[0]-1,p=h.aabb.min[1]-1,_=Yg/(h.aabb.max[0]-u+2),m=Yg/(h.aabb.max[1]-p+2);for(let b=0;b<a.length;b+=3){const M=a[b+2],P=(a[b+0]-u)*_|0,R=(a[b+1]-p)*m|0;M>h.heightmap[R*Yg+P]&&(h.heightmap[R*Yg+P]=M)}}function Bhe(h,a){const u={};u.indexArray=new yo,u.indexArray.reserve(4*h.length),u.vertexArray=new cc,u.vertexArray.reserve(10*h.length),u.colorArray=new gh,u.vertexArray.reserve(10*h.length);let p=0;for(const b of h){const M=Math.min(10,Math.max(4,1.3*b.height))*a,P=[-b.normal[1],b.normal[0],0],R=Math.min(.29,.1*b.width/b.depth),E=b.width-2*b.depth*a*(R+.01),O=_e.vec3.scaleAndAdd([],b.pos,P,E/2),L=_e.vec3.scaleAndAdd([],b.pos,P,-E/2),D=[O[0],O[1],O[2]+b.height],k=[L[0],L[1],L[2]+b.height],B=_e.vec3.scaleAndAdd([],b.normal,P,R);_e.vec3.scale(B,B,M);const W=_e.vec3.scaleAndAdd([],b.normal,P,-R);_e.vec3.scale(W,W,M),_e.vec3.add(B,O,B),_e.vec3.add(W,L,W),O[2]+=.1,L[2]+=.1,u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(W[0],W[1],W[2]),u.vertexArray.emplaceBack(O[0],O[1],O[2]),u.vertexArray.emplaceBack(L[0],L[1],L[2]),u.vertexArray.emplaceBack(D[0],D[1],D[2]),u.vertexArray.emplaceBack(k[0],k[1],k[2]),u.vertexArray.emplaceBack(O[0],O[1],O[2]),u.vertexArray.emplaceBack(L[0],L[1],L[2]),u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(W[0],W[1],W[2]);const G=E/M/2;u.colorArray.emplaceBack(-G-R,-1,G,.8),u.colorArray.emplaceBack(G+R,-1,G,.8),u.colorArray.emplaceBack(-G,0,G,1.3),u.colorArray.emplaceBack(G,0,G,1.3),u.colorArray.emplaceBack(G+R,-.8,G,.7),u.colorArray.emplaceBack(G+R,-.8,G,.7),u.colorArray.emplaceBack(0,0,G,1.3),u.colorArray.emplaceBack(0,0,G,1.3),u.colorArray.emplaceBack(G+R,-1.2,G,.8),u.colorArray.emplaceBack(G+R,-1.2,G,.8),u.indexArray.emplaceBack(6+p,4+p,8+p),u.indexArray.emplaceBack(7+p,9+p,5+p),u.indexArray.emplaceBack(0+p,1+p,2+p),u.indexArray.emplaceBack(1+p,3+p,2+p),p+=10}const _={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=ii.white,_.pbrMetallicRoughness=m,u.material=_,u.aabb=new kn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),u}class eV{constructor(a){this._stringToNumber={},this._numberToString=[];for(let u=0;u<a.length;u++){const p=a[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(a){return this._stringToNumber[a]}decode(a){return this._numberToString[a]}}const $he=["id","tile","layer","source","sourceLayer","state"];class $v{constructor(a,u,p,_,m){this.type="Feature",this._vectorTileFeature=a,this._z=u,this._x=p,this._y=_,this.properties=a.properties,this.id=m}clone(){const a=new $v(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(a.state=Object.assign({},this.state)),this.layer&&(a.layer=Object.assign({},this.layer)),this.source&&(a.source=this.source),this.sourceLayer&&(a.sourceLayer=this.sourceLayer),a}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const u of $he)this[u]!==void 0&&(a[u]=this[u]);return a}}class tV{constructor(a,u){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new rp(gn,16,0),this.featureIndexArray=new Pa,this.promoteId=u,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(a,u,p,_,m,b=0,M=0){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,_,m,b);const R=this.grid;for(let E=0;E<u.length;E++){const O=u[E],L=[1/0,1/0,-1/0,-1/0];for(let D=0;D<O.length;D++){const k=O[D];L[0]=Math.min(L[0],k.x),L[1]=Math.min(L[1],k.y),L[2]=Math.max(L[2],k.x),L[3]=Math.max(L[3],k.y)}M!==0&&(L[0]-=M,L[1]-=M,L[2]+=M,L[3]+=M),L[0]<gn&&L[1]<gn&&L[2]>=0&&L[3]>=0&&R.insert(P,L[0],L[1],L[2],L[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new bp.VectorTile(new TT(this.rawTileData)).layers,this.sourceLayerCoder=new eV(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const a in this.vtLayers)this.vtFeatures[a]=[]}return this.vtLayers}query(a,u){const{tilespaceGeometry:p,transform:_,tileTransform:m,pixelPosMatrix:b,availableImages:M}=u;this.loadVTLayers(),this.serializedLayersCache.clear();const P=p.bufferedTilespaceBounds,R=this.grid.query(P.min.x,P.min.y,P.max.x,P.max.y,((D,k,B,W)=>Be(p.bufferedTilespaceGeometry,D,k,B,W)));R.sort(Vhe);let E=null;_.elevation&&R.length>0&&(E=Rv.create(_.elevation,this.tileID));const O={};let L;for(let D=0;D<R.length;D++){const k=R[D];if(k===L)continue;L=k;const B=this.featureIndexArray.get(k);let W=null;this.is3DTile?this.loadMatchingModelFeature(O,B,a,p,_):this.loadMatchingFeature(O,B,a,M,((G,Q,K,Z=0)=>(W||(W=U(G,this.tileID.canonical,m)),Q.queryIntersectsFeature(p,G,K,W,this.z,_,b,E,Z))))}return O}loadMatchingFeature(a,u,p,_,m){const{featureIndex:b,bucketIndex:M,sourceLayerIndex:P,layoutVertexArrayOffset:R}=u,E=this.bucketLayerIDs[M],O=p.layers,L=Object.keys(O);if(L.length&&!(function(G,Q){for(let K=0;K<G.length;K++)if(Q.indexOf(G[K])>=0)return!0;return!1})(L,E))return;const D=p.sourceCache,k=this.sourceLayerCoder.decode(P),B=this.vtLayers[k].feature(b),W=this.getId(B,k);for(let G=0;G<E.length;G++){const Q=E[G];if(!O[Q])continue;const{styleLayer:K,targets:Z}=O[Q];let re={};W!==void 0&&(re=D.getFeatureState(K.sourceLayer,W));const ce=!m||m(B,K,re,R);if(!ce)continue;const fe=new $v(B,this.z,this.x,this.y,W);fe.tile=this.tileID.canonical,fe.state=re;let Pe=this.serializedLayersCache.get(Q);Pe||(Pe=K.serialize(),Pe.id=Q,this.serializedLayersCache.set(Q,Pe)),fe.source=Pe.source,fe.sourceLayer=Pe["source-layer"],fe.layer=vn({},Pe),fe.layer.paint=nV(Pe.paint,K.paint,B,re,_),fe.layer.layout=nV(Pe.layout,K.layout,B,re,_);let Me=!1;for(const Ae of Z){this.updateFeatureProperties(fe,Ae);const{filter:Ze}=Ae;if(Ze){if(B.properties=fe.properties,Ze.needGeometry){const Oe=H(B,!0);if(!Ze.filter(new vi(this.tileID.overscaledZ),Oe,this.tileID.canonical))continue}else if(!Ze.filter(new vi(this.tileID.overscaledZ),B))continue}Me=!0,Ae.targetId&&this.addFeatureVariant(fe,Ae)}Me&&this.appendToResult(a,Q,b,fe,ce)}}loadMatchingModelFeature(a,u,p,_,m){const b=this.bucketLayerIDs[0][0],M=p.layers;if(!M[b])return;const{styleLayer:P,targets:R}=M[b];if(P.type!=="model")return;const E=_.tile,O=u.featureIndex,L=E.getBucket(P);if(!(L&&L instanceof GT))return;const D=(function(Pe,Me,Ae,Ze){const Oe=Pe.getNodesInfo()[Me];if(Oe.hiddenByReplacement||!Oe.node.meshes)return;let Je=Number.MAX_VALUE;const rt=Oe.node,et=Ae.tile,dt=Ze.calculatePosMatrix(et.tileID.toUnwrapped(),Ze.worldSize),ct=Oe.evaluatedScale;let xt=0;Ze.elevation&&rt.elevation&&(xt=rt.elevation*Ze.elevation.exaggeration()),_e.mat4.translate(dt,dt,[(rt.anchor?rt.anchor[0]:0)*(ct[0]-1),(rt.anchor?rt.anchor[1]:0)*(ct[1]-1),xt]),_e.mat4.scale(dt,dt,ct);const pt=Ae.queryGeometry,St=pt.isPointQuery()?pt.screenBounds:pt.screenGeometry,Zt=function(Cn){const rn=_e.mat4.multiply([],dt,Cn.matrix);_e.mat4.multiply(rn,Ze.expandedFarZProjMatrix,rn);for(let pn=0;pn<Cn.meshes.length;++pn){const en=Cn.meshes[pn];if(pn===Cn.lightMeshIndex)continue;const $n=Q$(St,Ze,rn,en.aabb);$n!=null&&(Je=Math.min($n,Je))}if(Cn.children)for(const pn of Cn.children)Zt(pn)};if(Zt(rt),Je===Number.MAX_VALUE)return;const Yt=new Yr(0,0);return d7(et.tileID.canonical,Yt,Oe.node.anchor[0],Oe.node.anchor[1]),{intersectionZ:Je,position:Yt,feature:Oe.feature}})(L,O,_,m);if(!D)return;const{z:k,x:B,y:W}=E.tileID.canonical,{feature:G,intersectionZ:Q,position:K}=D;let Z={};G.id!==void 0&&(Z=p.sourceCache.getFeatureState(P.sourceLayer,G.id));const re=new $v({},k,B,W,G.id);re.tile=this.tileID.canonical,re.state=Z,re.properties=G.properties,re.geometry={type:"Point",coordinates:[K.lng,K.lat]};let ce=this.serializedLayersCache.get(b);ce||(ce=P.serialize(),ce.id=b,this.serializedLayersCache.set(b,ce)),re.source=ce.source,re.sourceLayer=ce["source-layer"],re.layer=vn({},ce);let fe=!1;for(const Pe of R){this.updateFeatureProperties(re,Pe);const{filter:Me}=Pe;if(Me){if(G.properties=re.properties,Me.needGeometry){if(!Me.filter(new vi(this.tileID.overscaledZ),G,this.tileID.canonical))continue}else if(!Me.filter(new vi(this.tileID.overscaledZ),G))continue}fe=!0,Pe.targetId&&this.addFeatureVariant(re,Pe)}fe&&this.appendToResult(a,b,O,re,Q)}updateFeatureProperties(a,u,p){if(u.properties){const _={};for(const m in u.properties){const b=u.properties[m].evaluate({zoom:this.z},a._vectorTileFeature,a.state,a.tile,p);b!=null&&(_[m]=b)}a.properties=_}}addFeatureVariant(a,u,p){const _={target:u.target,namespace:u.namespace,uniqueFeatureID:u.uniqueFeatureID};u.properties&&(_.properties=a.properties),a.variants=a.variants||{},a.variants[u.targetId]=a.variants[u.targetId]||[],a.variants[u.targetId].push(_)}appendToResult(a,u,p,_,m){let b=a[u];b===void 0&&(b=a[u]=[]),b.push({featureIndex:p,feature:_,intersectionZ:m})}lookupSymbolFeatures(a,u,p,_,m){const b={};this.loadVTLayers();for(const M of a)this.loadMatchingFeature(b,{bucketIndex:u,sourceLayerIndex:p,featureIndex:M,layoutVertexArrayOffset:0},_,m);return b}loadFeature(a){const{featureIndex:u,sourceLayerIndex:p}=a;this.loadVTLayers();const _=this.sourceLayerCoder.decode(p),m=this.vtFeatures[_];if(m[u])return m[u];const b=this.vtLayers[_].feature(u);return m[u]=b,b}hasLayer(a){for(const u of this.bucketLayerIDs)for(const p of u)if(a===p)return!0;return!1}getId(a,u){let p=a.id;if(this.promoteId){const _=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[u];if(_!=null)if(Array.isArray(_)){if(!this.promoteIdExpression){const m=tp(_);if(m.result!=="success"){const b=m.value.map((M=>`${M.key}: ${M.message}`)).join(", ");return void Te(`Failed to create expression for promoteId: ${b}`)}this.promoteIdExpression=m.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new ky),p=this.promoteIdExpression.evaluate({zoom:0},a)}else p=a.properties[_];typeof p=="boolean"&&(p=Number(p))}return p}}function nV(h,a,u,p,_){return Pt(h,((m,b)=>{const M=a instanceof lp?a.get(b):null;return M&&M.evaluate?M.evaluate(u,p,_):M}))}function Vhe(h,a){return a-h}An(tV,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const rV=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class lD{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,p]=new Uint8Array(a,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=p>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const m=rV[15&p];if(!m)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(a,2,1),[M]=new Uint32Array(a,4,1);return new lD(M,b,m,a)}constructor(a,u=64,p=Float64Array,_){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const m=rV.indexOf(this.ArrayType),b=2*a*this.ArrayType.BYTES_PER_ELEMENT,M=a*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-M%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${p}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+M+P,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+b+M+P),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+M+P,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=a)}add(a,u){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=a,this.coords[this._pos++]=u,p}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return cD(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,u,p,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:b,nodeSize:M}=this,P=[0,m.length-1,0],R=[];for(;P.length;){const E=P.pop()||0,O=P.pop()||0,L=P.pop()||0;if(O-L<=M){for(let W=L;W<=O;W++){const G=b[2*W],Q=b[2*W+1];G>=a&&G<=p&&Q>=u&&Q<=_&&R.push(m[W])}continue}const D=L+O>>1,k=b[2*D],B=b[2*D+1];k>=a&&k<=p&&B>=u&&B<=_&&R.push(m[D]),(E===0?a<=k:u<=B)&&(P.push(L),P.push(D-1),P.push(1-E)),(E===0?p>=k:_>=B)&&(P.push(D+1),P.push(O),P.push(1-E))}return R}within(a,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:m,nodeSize:b}=this,M=[0,_.length-1,0],P=[],R=p*p;for(;M.length;){const E=M.pop()||0,O=M.pop()||0,L=M.pop()||0;if(O-L<=b){for(let W=L;W<=O;W++)sV(m[2*W],m[2*W+1],a,u)<=R&&P.push(_[W]);continue}const D=L+O>>1,k=m[2*D],B=m[2*D+1];sV(k,B,a,u)<=R&&P.push(_[D]),(E===0?a-p<=k:u-p<=B)&&(M.push(L),M.push(D-1),M.push(1-E)),(E===0?a+p>=k:u+p>=B)&&(M.push(D+1),M.push(O),M.push(1-E))}return P}}function cD(h,a,u,p,_,m){if(_-p<=u)return;const b=p+_>>1;iV(h,a,b,p,_,m),cD(h,a,u,p,b-1,1-m),cD(h,a,u,b+1,_,1-m)}function iV(h,a,u,p,_,m){for(;_>p;){if(_-p>600){const R=_-p+1,E=u-p+1,O=Math.log(R),L=.5*Math.exp(2*O/3),D=.5*Math.sqrt(O*L*(R-L)/R)*(E-R/2<0?-1:1);iV(h,a,u,Math.max(p,Math.floor(u-E*L/R+D)),Math.min(_,Math.floor(u+(R-E)*L/R+D)),m)}const b=a[2*u+m];let M=p,P=_;for(qx(h,a,p,u),a[2*_+m]>b&&qx(h,a,p,_);M<P;){for(qx(h,a,M,P),M++,P--;a[2*M+m]<b;)M++;for(;a[2*P+m]>b;)P--}a[2*p+m]===b?qx(h,a,p,P):(P++,qx(h,a,P,_)),P<=u&&(p=P+1),u<=P&&(_=P-1)}}function qx(h,a,u,p){uD(h,u,p),uD(a,2*u,2*p),uD(a,2*u+1,2*p+1)}function uD(h,a,u){const p=h[a];h[a]=h[u],h[u]=p}function sV(h,a,u,p){const _=h-u,m=a-p;return _*_+m*m}i.$=na,i.A=Ca,i.B=Oc,i.C=dp,i.D=kv,i.E=sc,i.F=2,i.G=Ix,i.H=h$,i.I=da,i.J=class extends HT{},i.K=uu,i.L=Or,i.M=qE,i.N=Ob,i.O=ep,i.P=ge,i.Q=zE,i.R=io,i.S=Qy,i.T=V4,i.U=lv,i.V=HT,i.W=Lb,i.X=tp,i.Y=vg,i.Z=mu,i._=Xf,i.a=function(h){return ue.API_CDN_URL_REGEX.test(h)},i.a$=H,i.a0=Dl,i.a1=Gb,i.a2=Ky,i.a3=Zy,i.a4=function(h){const a=h.value;let u=[];if(!a)return u;const p=uu(a);return p!=="string"?(u=u.concat([new HT(h.key,a,`string expected, "${p}" found`)]),u):(t7(a,!0)||(u=u.concat([new HT(h.key,a,`invalid url "${a}"`)])),u)},i.a5=Tt,i.a6=Wb,i.a7=Xi,i.a8=hn,i.a9=class{constructor(h){this.specification=h}possiblyEvaluate(h,a){return ot(h.expression.evaluate(a))}interpolate(h,a,u){return{x:jn(h.x,a.x,u),y:jn(h.y,a.y,u),z:jn(h.z,a.z,u),azimuthal:jn(h.azimuthal,a.azimuthal,u),polar:jn(h.polar,a.polar,u)}}},i.aA=function(h,a){const u={};for(let p=0;p<a.length;p++){const _=a[p];_ in h&&(u[_]=h[_])}return u},i.aB=Sd,i.aC=Oo,i.aD=class{constructor(h){this.entries={},this.scheduler=h}request(h,a,u,p){const _=this.entries[h]=this.entries[h]||{callbacks:[]};if(_.result){const[m,b]=_.result;return this.scheduler?this.scheduler.add((()=>{p(m,b)}),a):p(m,b),()=>{}}return _.callbacks.push(p),_.cancel||(_.cancel=u(((m,b)=>{_.result=[m,b];for(const M of _.callbacks)this.scheduler?this.scheduler.add((()=>{M(m,b)}),a):M(m,b);setTimeout((()=>delete this.entries[h]),3e3)}))),()=>{_.result||(_.callbacks=_.callbacks.filter((m=>m!==p)),_.callbacks.length||(_.cancel(),delete this.entries[h]))}}},i.aE=function(h,a,u){const p=JSON.stringify(h.request);return h.data&&(this.deduped.entries[p]={result:[null,h.data]}),this.deduped.request(p,{type:"parseTile",isSymbolTile:h.isSymbolTile,zoom:h.tileZoom},(_=>{const m=Pc(h.request,((b,M,P,R)=>{b?_(b):M&&_(null,{vectorTile:u?void 0:new bp.VectorTile(new TT(M)),rawData:M,cacheControl:P,expires:R})}));return()=>{m.cancel(),_()}}),a)},i.aF=function(h){ni++,ni>dr&&(h.getActor().send("enforceCacheSizeLimit",sr),ni=0)},i.aG=function(h){return h<=1?1:Math.pow(2,Math.floor(Math.log(h)/Math.LN2))},i.aH=qt,i.aI=j$,i.aJ=q$,i.aK=V$,i.aL=function(h,a){const u=document.createElement("video");u.muted=!0,u.onloadstart=function(){a(null,u)};for(let p=0;p<h.length;p++){const _=document.createElement("source");eb(h[p])||(u.crossOrigin="Anonymous"),_.src=h[p],u.appendChild(_)}return{cancel:()=>{}}},i.aM=BT,i.aN=function(h){return fetch(h).then((a=>a.arrayBuffer())).then((a=>K7(a,0,h)))},i.aO=Q7,i.aP=class{constructor(h,a,u,p){this.id=h,this.position=a!=null?new Yr(a[0],a[1]):new Yr(0,0),this.orientation=u??[0,0,0],this.nodes=p,this.uploaded=!1,this.aabb=new kn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(h,a){if(_e.mat4.multiply(h.matrix,a,h.matrix),h.meshes)for(const u of h.meshes){const p=kn.applyTransformFast(u.aabb,h.matrix);this.aabb.encapsulate(p)}if(h.children)for(const u of h.children)this._applyTransformations(u,h.matrix)}computeBoundsAndApplyParent(){const h=_e.mat4.identity([]);for(const a of this.nodes)this._applyTransformations(a,h)}computeModelMatrix(h,a,u,p,_,m,b=!1){o7(this.matrix,this,h.transform,this.position,a,u,p,_,m,b)}upload(h){if(!this.uploaded){for(const a of this.nodes)G4(a,h);for(const a of this.nodes)WT(a);this.uploaded=!0}}destroy(){for(const h of this.nodes)Y4(h)}},i.aQ=qe,i.aR=Dx,i.aS=Oa,i.aT=vo,i.aU=vu,i.aV=yo,i.aW=wt,i.aX=Rg,i.aY=FT,i.aZ=function(){Ll.isLoading()||Ll.isLoaded()||ov()!=="deferred"||YE()},i.a_=Yb,i.aa=vi,i.ab=np,i.ac=l,i.ad=_e,i.ae=Mt,i.af=lp,i.ag=fa,i.ah=jn,i.ai=gn,i.aj=bE,i.ak=ut,i.al=ii,i.am=class{constructor(h){this.specification=h}possiblyEvaluate(h,a){return(function([u,p]){const _=ot([1,u,p]);return{x:_.x,y:_.y,z:_.z}})(h.expression.evaluate(a))}interpolate(h,a,u){return{x:jn(h.x,a.x,u),y:jn(h.y,a.y,u),z:jn(h.z,a.z,u)}}},i.an=function(h,a,u=0,p=!0){const _=new ge(u,u),m=h.sub(_),b=a.add(_),M=[m,new ge(b.x,m.y),b,new ge(m.x,b.y)];return p&&M.push(m.clone()),M},i.ao=function(h,a){const u=[];for(let p=0;p<h.length;p++){const _=tn(p-1,-1,h.length-1),m=tn(p+1,-1,h.length-1),b=h[p],M=h[m],P=h[_].sub(b).unit(),R=M.sub(b).unit(),E=R.angleWithSep(P.x,P.y),O=P.add(R).unit().mult(-1*a/Math.sin(E/2));u.push(b.add(O))}return u},i.ap=A$,i.aq=Be,i.ar=function(h,a,u=0){return _e.vec3.fromValues(((a.x-u)*h.scale-h.x)*gn,(a.y*h.scale-h.y)*gn,px(a.z,a.y))},i.as=Zn,i.at=$8,i.au=function(h){let a=1/0,u=1/0,p=-1/0,_=-1/0;for(const m of h)a=Math.min(a,m.x),u=Math.min(u,m.y),p=Math.max(p,m.x),_=Math.max(_,m.y);return{min:new ge(a,u),max:new ge(p,_)}},i.av=Lc,i.aw=Fe,i.ax=y,i.ay=$e,i.az=ra,i.b=function(h){return ue.API_FONTS_REGEX.test(h)},i.b$=jT,i.b0=$v,i.b1=Vt,i.b2=b4,i.b3=f4,i.b4=U,i.b5=yu,i.b6=gv,i.b7=Vn,i.b8=Bi,i.b9=yx,i.bA=y8,i.bB=O4,i.bC=b$,i.bD=C4,i.bE=lD,i.bF=tn,i.bG=xn,i.bH=Do,i.bI=function(h,a,u){h[4*a+0]=u[0],h[4*a+1]=u[1],h[4*a+2]=u[2],h[4*a+3]=u[3]},i.bJ=Vg,i.bK=Fl,i.bL=pp,i.bM=ms,i.bN=Bg,i.bO=Yr,i.bP=D$,i.bQ=Dt,i.bR=ar,i.bS=Z$,i.bT=Gt,i.bU=Wo,i.bV=function(h,a,u,p,_,m,b,M,P){if(P.name==="globe")return Wo(h,a,new Gt(u,p,_),!1);const R=Dx({z:u,x:p,y:_},P);return new kn([(m+R.x/R.scale)*a,a*(R.y/R.scale),b],[(m+R.x2/R.scale)*a,a*(R.y2/R.scale),M])},i.bW=function(h,a,u){let p=0;for(let _=0;_<2;++_)h[_]>0&&(p+=(h[_]-0)*(h[_]-0)),a[_]<0&&(p+=(0-a[_])*(0-a[_]));return p},i.bX=hs,i.bY=dT,i.bZ=function(h){const a=_e.mat4.identity(new Float64Array(16));_e.mat4.multiply(a,h.pixelMatrix,h.globeMatrix);const u=[0,rl,0],p=[0,il,0];return _e.vec3.transformMat4(u,u,a),_e.vec3.transformMat4(p,p,a),[u[0]>0&&u[0]<=h.width&&u[1]>0&&u[1]<=h.height&&!Ra(h,new Yr(h.center.lat,90)),p[0]>0&&p[0]<=h.width&&p[1]>0&&p[1]<=h.height&&!Ra(h,new Yr(h.center.lat,-90))]},i.b_=function(h,a){const{scale:u}=h.tileTransform,p=u*gn/(h.tileSize*Math.pow(2,a.zoom-h.tileID.overscaledZ+h.tileID.canonical.z));return _e.mat2.scale(new Float32Array(4),a.inverseAdjustmentMatrix,[p,p])},i.ba=z4,i.bb=function(h,a){const u=fa(a.zoom);if(u===0)return Bs(h);const p=Lr(h),_=Vi(p),m=Lc(p.getWest())*a.worldSize,b=Lc(p.getEast())*a.worldSize,M=Oo(p.getNorth())*a.worldSize,P=Oo(p.getSouth())*a.worldSize,R=[m,M,0],E=[b,M,0],O=[m,P,0],L=[b,P,0],D=_e.mat4.invert([],a.globeMatrix);return _e.vec3.transformMat4(R,R,D),_e.vec3.transformMat4(E,E,D),_e.vec3.transformMat4(O,O,D),_e.vec3.transformMat4(L,L,D),_[0]=Xs(_[0],O,u),_[1]=Xs(_[1],L,u),_[2]=Xs(_[2],E,u),_[3]=Xs(_[3],R,u),kn.fromPoints(_)},i.bc=Li,i.bd=Xr,i.be=Xs,i.bf=hp,i.bg=rr,i.bh=tM,i.bi=TT,i.bj=Pc,i.bk=function(h,a){const u=[];for(const p in h)p in a||u.push(p);return u},i.bl=on,i.bm=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.bn=nt,i.bo=function(h,a){const{x:u,y:p}=h.point,_=zl(u,p,h.worldSize/h._pixelsPerMercatorPixel,0,0);return _e.mat4.multiply(_,_,$s(Bs(a)))},i.bp=Mv,i.bq=ol,i.br=ET,i.bs=function(h,a,u,p,_){const m=5*a+2;h.float32[m+0]=u,h.float32[m+1]=p,h.float32[m+2]=_},i.bt=NT,i.bu=d$,i.bv=de,i.bw=ko,i.bx=h8,i.by=e7,i.bz=_8,i.c=Re,i.c$=H8,i.c0=X$,i.c1=function(h){const a=X$(h,!0);return _e.mat2.invert([],[a[0],a[1],a[4],a[5]])},i.c2=Mr,i.c3=function(h){const{x:a,y:u}=h.point,{lng:p,lat:_}=h._center;return zl(a,u,h.worldSize,p,_)},i.c4=Rt,i.c5=_n,i.c6=mp,i.c7=function(h){const a=Math.round((h+45+360)%360/90)%4;return ze[a]},i.c8=45,i.c9=xE,i.cA=lT,i.cB=class extends kc{constructor(h){super(h),this.current=ux}set(h,a,u){if(this.fetchUniformLocation(h,a)){for(let p=0;p<9;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},i.cC=lt,i.cD=function(h,a,u){const p=fa(u.zoom),_=h.style.map._antialias,m=h.terrain&&h.terrain.exaggeration()>0;return p===0&&!_&&!m},i.cE=function(h){const a=h.pixelsPerMeter,u=a/Do(1,h.center.lat),p=_e.mat4.identity(new Float64Array(16));return _e.mat4.translate(p,p,[h.point.x,h.point.y,0]),_e.mat4.scale(p,p,[u,u,a]),Float32Array.from(p)},i.cF=Lr,i.cG=function(h){const a=hs-5;h=$e(h,-a,a)/a*90;const u=Math.pow(Math.abs(Math.sin(ut(h))),3);return Math.round(u*(wv.length-1))},i.cH=function(h,a,u,p){const _=a.getNorth(),m=a.getSouth(),b=a.getWest(),M=a.getEast(),P=1<<h.z,R=M-b,E=_-m,O=R/gp,L=-E/wv[u],D=[0,O,0,L,0,0,_,b,0];if(h.z>0){const k=180/p;_e.mat3.multiply(D,D,[k/R+1,0,0,0,k/E+1,0,-.5*k/O,.5*k/L,1])}return D[2]=P,D[5]=h.x,D[8]=h.y,D},i.cI=Bs,i.cJ=function(h,a,u){const p=_e.mat4.identity(new Float64Array(16)),_=(a/(1<<h)-.5)*Math.PI*2;return _e.mat4.rotateY(p,u.globeMatrix,_),Float32Array.from(p)},i.cK=class{isDataAvailableAtPoint(h){const a=this._source();if(this.isUsingMockSource()||!a||h.y<0||h.y>1)return!1;const u=a.getSource().maxzoom,p=1<<u,_=Math.floor(h.x),m=Math.floor((h.x-_)*p),b=Math.floor(h.y*p),M=this.findDEMTileFor(new qt(u,_,u,m,b));return!(!M||!M.dem)}getAtPointOrZero(h,a=0){return this.getAtPoint(h,a)||0}getAtPoint(h,a,u=!0){if(this.isUsingMockSource())return null;a==null&&(a=null);const p=this._source();if(!p||h.y<0||h.y>1)return a;const _=p.getSource().maxzoom,m=1<<_,b=Math.floor(h.x),M=h.x-b,P=new qt(_,b,_,Math.floor(M*m),Math.floor(h.y*m)),R=this.findDEMTileFor(P);if(!R||!R.dem)return a;const E=R.dem,O=1<<R.tileID.canonical.z,L=(M*O-R.tileID.canonical.x)*E.dim,D=(h.y*O-R.tileID.canonical.y)*E.dim,k=Math.floor(L),B=Math.floor(D);return(u?this.exaggeration():1)*jn(jn(E.get(k,B),E.get(k,B+1),D-B),jn(E.get(k+1,B),E.get(k+1,B+1),D-B),L-k)}getAtTileOffset(h,a,u){const p=1<<h.canonical.z;return this.getAtPointOrZero(new l(h.wrap+(h.canonical.x+a/gn)/p,(h.canonical.y+u/gn)/p))}getAtTileOffsetFunc(h,a,u,p){return _=>{const m=this.getAtTileOffset(h,_.x,_.y),b=p.upVector(h.canonical,_.x,_.y),M=p.upVectorScale(h.canonical,a,u).metersToTile;return _e.vec3.scale(b,b,m*M),b}}getForTilePoints(h,a,u,p){if(this.isUsingMockSource())return!1;const _=Rv.create(this,h,p);return!!_&&(a.forEach((m=>{m[2]=this.exaggeration()*_.getElevationAt(m[0],m[1],u)})),!0)}getMinMaxForTile(h){if(this.isUsingMockSource())return null;const a=this.findDEMTileFor(h);if(!a||!a.dem)return null;const u=a.dem.tree,p=a.tileID,_=1<<h.canonical.z-p.canonical.z;let m=h.canonical.x/_-p.canonical.x,b=h.canonical.y/_-p.canonical.y,M=0;for(let P=0;P<h.canonical.z-p.canonical.z&&!u.leaves[M];P++){m*=2,b*=2;const R=2*Math.floor(b)+Math.floor(m);M=u.childOffsets[M]+R,m%=1,b%=1}return{min:this.exaggeration()*u.minimums[M],max:this.exaggeration()*u.maximums[M]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(h,a,u){throw new Error("Pure virtual method called.")}pointCoordinate(h){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(h){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const h=this.visibleDemTiles;if(h.length===0)return null;let a=!1,u=Number.MAX_VALUE,p=Number.MIN_VALUE;for(const _ of h){const m=this.getMinMaxForTile(_.tileID);m&&(u=Math.min(u,m.min),p=Math.max(p,m.max),a=!0)}return a?{min:u,max:p}:null}},i.cL=jB,i.cM=Ir,i.cN=function(h,a){return[Math.pow(h[0],2.2)*a,Math.pow(h[1],2.2)*a,Math.pow(h[2],2.2)*a]},i.cO=Da,i.cP=yt,i.cQ=cr,i.cR=256,i.cS=function(h,a){const u=[0,0,0],p=Li(Bs(a.canonical));return _e.vec3.transformMat4(u,u,p),_e.vec3.transformMat4(u,u,h),u},i.cT=h=>({u_camera_to_center_distance:new ms(h),u_extrude_scale:new dx(h),u_device_pixel_ratio:new ms(h),u_matrix:new Vg(h),u_inv_rot_matrix:new Vg(h),u_merc_center:new Fl(h),u_tile_id:new pp(h),u_zoom_transition:new ms(h),u_up_dir:new pp(h),u_emissive_strength:new ms(h)}),i.cU=h=>({u_matrix:new Vg(h),u_pixels_to_tile_units:new dx(h),u_device_pixel_ratio:new ms(h),u_width_scale:new ms(h),u_floor_width_scale:new ms(h),u_units_to_pixels:new Fl(h),u_dash_image:new Bg(h),u_gradient_image:new Bg(h),u_image_height:new ms(h),u_texsize:new Fl(h),u_tile_units_to_pixels:new ms(h),u_alpha_discard_threshold:new ms(h),u_trim_offset:new Fl(h),u_trim_fade_range:new Fl(h),u_trim_color:new $g(h),u_emissive_strength:new ms(h),u_zbias_factor:new ms(h),u_tile_to_meter:new ms(h)}),i.cV=h=>({u_matrix:new Vg(h),u_texsize:new Fl(h),u_pixels_to_tile_units:new dx(h),u_device_pixel_ratio:new ms(h),u_width_scale:new ms(h),u_floor_width_scale:new ms(h),u_image:new Bg(h),u_units_to_pixels:new Fl(h),u_tile_units_to_pixels:new ms(h),u_alpha_discard_threshold:new ms(h),u_trim_offset:new Fl(h),u_trim_fade_range:new Fl(h),u_trim_color:new $g(h),u_emissive_strength:new ms(h),u_zbias_factor:new ms(h),u_tile_to_meter:new ms(h)}),i.cW=nx,i.cX=Hue,i.cY=Wue,i.cZ=yp,i.c_=(h,a,u,p,_,m)=>{const b=h.transform,M=b.projection.name==="globe";let P;if(m.paint.get("circle-pitch-alignment")==="map")if(M){const E=Da(b.zoom,a.canonical)*b._pixelsPerMercatorPixel;P=Float32Array.from([E,0,0,E])}else P=b.calculatePixelsToTileUnitsMatrix(u);else P=new Float32Array([b.pixelsToGLUnits[0],0,0,b.pixelsToGLUnits[1]]);const R={u_camera_to_center_distance:h.transform.getCameraToCenterDistance(b.projection),u_matrix:h.translatePosMatrix(a.projMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Nt.devicePixelRatio,u_extrude_scale:P,u_inv_rot_matrix:mx,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(M){R.u_inv_rot_matrix=p,R.u_merc_center=_,R.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],R.u_zoom_transition=fa(b.zoom);const E=_[0]*gn,O=_[1]*gn;R.u_up_dir=b.projection.upVector(new Gt(0,0,0),E,O)}return R},i.ca=Sv,i.cb=$g,i.cc=function(h,a,u){const p=Math.sqrt(h*h+a*a+u*u),_=p>0?Math.acos(u/p)*ht:0;let m=h!==0||a!==0?Math.atan2(-a,-h)*ht+90:0;return m<0&&(m+=360),[p,m,_]},i.cd=v,i.ce=kn,i.cf=ot,i.cg=function(h){return[Math.pow(h[0],1/2.2),Math.pow(h[1],1/2.2),Math.pow(h[2],1/2.2)]},i.ch=function(h,a){return h.readFields(zde,{icons:[]},a)},i.ci=function(h){return h({pluginStatus:ha,pluginURL:_d}),ip.on("pluginStateChange",h),h},i.cj=YT,i.ck=Iv,i.cl=I4,i.cm=kf,i.cn=Ag,i.co=Tn,i.cp=Qa,i.cq=cn,i.cr=function(h){const a=h.indexOf(uv);return a>=0?h.slice(0,a):h},i.cs=function(h){return h.indexOf(uv)>=0},i.ct=function(h){const a=h.indexOf(uv);return a>=0?h.slice(a+1):""},i.cu=function(h){const a=[],u=h.id;return u===void 0&&a.push({message:`layers.${u}: missing required property "id"`}),h.render===void 0&&a.push({message:`layers.${u}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&a.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),a},i.cv=function(h,a,u,p){return h.type==="custom"?new Ede(h,a):new Lde[h.type](h,a,u,p)},i.cw=Qt,i.cx=class extends $v{constructor(h,a){super(h._vectorTileFeature,h._z,h._x,h._y,h.id),h.state&&(this.state=Object.assign({},h.state)),this.target=a.target,this.namespace=a.namespace,a.properties&&(this.properties=a.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=h.source,this.sourceLayer=h.sourceLayer,this.layer=h.layer)}toJSON(){const h=super.toJSON();return h.target=this.target,h.namespace=this.namespace,h}},i.cy=ip,i.cz=Ol,i.d=function(h){return ue.API_TILEJSON_REGEX.test(h)},i.d$=eV,i.d0=Ho,i.d1=(h,a,u,p,_,m,b,M)=>{const P=h.transform,R=P.pitch<15?V8(.07,.7,$e((14-P.zoom)/5,0,1)):.07,E=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:U8(h,a,u,p),u_texsize:a.imageAtlasTexture?a.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:P.calculatePixelsToTileUnitsMatrix(a),u_device_pixel_ratio:_,u_width_scale:m,u_floor_width_scale:b,u_image:0,u_tile_units_to_pixels:j8(a,P),u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:M,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(E?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:R,u_tile_to_meter:v(a.tileID.canonical,0)}},i.d2=(h,a,u,p,_,m,b,M,P)=>{const R=h.transform,E=R.calculatePixelsToTileUnitsMatrix(a),O=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none",L=R.pitch<15?V8(.07,.7,$e((14-R.zoom)/5,0,1)):.07;return{u_matrix:U8(h,a,u,p),u_pixels_to_tile_units:E,u_device_pixel_ratio:m,u_width_scale:b,u_floor_width_scale:M,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:_,u_texsize:W8(u)&&a.lineAtlasTexture?a.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:j8(a,h.transform),u_alpha_discard_threshold:0,u_trim_offset:P,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(O?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:L,u_tile_to_meter:v(a.tileID.canonical,0)}},i.d3=Ve,i.d4=_x,i.d5=px,i.d6=O8,i.d7=yn,i.d8=ST,i.d9=xp,i.dA=bT,i.dB=at,i.dC=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},i.dD=Et,i.dE=n4,i.dF=vh,i.dG=function([h,a,u]){const p=Math.hypot(h,a,u),_=Math.atan2(h,u),m=.5*Math.PI-Math.acos(-a/p);return new Yr(Rt(_),Rt(m))},i.dH=U4,i.dI=function(h){const a=h.navigator?h.navigator.userAgent:null;return!!(function(u){if(an==null){const p=u.navigator?u.navigator.userAgent:null;an=!!u.safari||!(!p||!(/\b(iPad|iPhone|iPod)\b/.test(p)||p.match("Safari")&&!p.match("Chrome")))}return an})(h)&&a&&(a.match("Version/15.4")||a.match("Version/15.5")||a.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},i.dJ=function(h,a){sr=h,dr=a},i.dK=Ra,i.dL=Bl,i.dM=function(h){const a=[0,0,0],u=_e.mat4.identity(new Float64Array(16));return _e.mat4.multiply(u,h.pixelMatrix,h.globeMatrix),_e.vec3.transformMat4(a,a,u),new ge(a[0],a[1])},i.dN=function(h,a,u=!1){if(ha===Vb||ha===Rc||ha===jb)throw new Error("setRTLTextPlugin cannot be called multiple times.");_d=Nt.resolveURL(h),ha=Vb,Ub=a,sv(),u||YE()},i.dO=ov,i.dP=function(){YT().acquire(X4)},i.dQ=function(){const h=$x;h&&(h.isPreloaded()&&h.numActive()===1?(h.release(X4),$x=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.dR=Xg,i.dS=function(h){const a=Gi();if(!a)return;const u=a.delete(In);h&&u.catch(h).then((()=>h()))},i.dT=Bx,i.dU=H7,i.dV=function(h){iD=Nt.resolveURL(h),Bv||(Bv=new kv(YT(),new sc)),Bv.broadcast("setDracoUrl",iD)},i.dW=W7,i.dX=function(h){zv=Nt.resolveURL(h),Bv||(Bv=new kv(YT(),new sc)),Bv.broadcast("setMeshoptUrl",zv)},i.dY=An,i.dZ=vp,i.d_=Tu,i.da=450,i.db=7,i.dc=Sde,i.dd=Gr,i.de=vv,i.df=256,i.dg=$s,i.dh=cc,i.di=Ia,i.dj=mv,i.dk=function(h,a,u,p,_){return $e((h-a)/(u-a)*(_-p)+p,p,_)},i.dl=Ab,i.dm=Ed,i.dn=class{constructor(h,a,u,p){this.context=h,this.format=p,this.size=u,this.texture=h.gl.createTexture();const[_,m,b]=this.size,{gl:M}=h;M.bindTexture(M.TEXTURE_3D,this.texture),h.pixelStoreUnpackFlipY.set(!1),h.pixelStoreUnpack.set(1),h.pixelStoreUnpackPremultiplyAlpha.set(!1),M.texImage3D(M.TEXTURE_3D,0,this.format,_,m,b,0,B4(this.format),$4(this.format),a.data)}bind(h,a){const{context:u}=this,{gl:p}=u;p.bindTexture(p.TEXTURE_3D,this.texture),h!==this.minFilter&&(p.texParameteri(p.TEXTURE_3D,p.TEXTURE_MAG_FILTER,h),p.texParameteri(p.TEXTURE_3D,p.TEXTURE_MIN_FILTER,h),this.minFilter=h),a!==this.wrapS&&(p.texParameteri(p.TEXTURE_3D,p.TEXTURE_WRAP_S,a),p.texParameteri(p.TEXTURE_3D,p.TEXTURE_WRAP_T,a),this.wrapS=a)}destroy(){const{gl:h}=this.context;h.deleteTexture(this.texture),this.texture=null}},i.dp=H4,i.dq=[1,1,1],i.dr=Rv,i.ds=Dv,i.dt=bd,i.du=fp,i.dv=bh,i.dw=sx,i.dx=ix,i.dy=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new ge(1/0,1/0),max:new ge(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(h,a=!1){const u=p8(new ge(0,0),new ge(gn,gn),h),p=[];if(a&&!m4(u,this._globalClipBounds))return p;for(const _ of this._activeRegions){if(_.hiddenByOverlap||!m4(u,_))continue;const m=_ue(_.min,_.max,h);p.push({min:m.min,max:m.max,sourceId:this._sourceIds[_.priority],footprint:_.footprint,footprintTileId:_.tileId,order:_.order,clipMask:_.clipMask,clipScope:_.clipScope})}return p}setSources(h){this._setSources(h.map((a=>({getSourceId:()=>a.cache.id,getFootprints:()=>{const u=[];for(const p of a.cache.getVisibleCoordinates()){const _=a.cache.getTile(p).buckets[a.layer];_&&_.updateFootprints(p.toUnwrapped(),u)}return u},getOrder:()=>a.order,getClipMask:()=>a.clipMask,getClipScope:()=>a.clipScope}))))}_addSource(h){const a=h.getFootprints();if(a.length===0)return;const u=h.getOrder(),p=h.getClipMask(),_=h.getClipScope();for(const m of a){if(!m.footprint)continue;const b=p8(m.footprint.min,m.footprint.max,m.id);this._activeRegions.push({min:b.min,max:b.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:m.id,footprint:m.footprint,order:u,clipMask:p,clipScope:_})}this._sourceIds.push(h.getSourceId())}_computeReplacement(){this._activeRegions.sort(((a,u)=>a.priority-u.priority||xT(a.min,u.min)||xT(a.max,u.max)||a.order-u.order||a.clipMask-u.clipMask||(function(p,_){const m=(b,M)=>b+M;return p.length-_.length||p.reduce(m,"").localeCompare(_.reduce(m,""))})(a.clipScope,u.clipScope)));let h=this._activeRegions.length!==this._prevRegions.length;if(!h){let a=0;for(;!h&&a!==this._activeRegions.length;){const u=this._activeRegions[a],p=this._prevRegions[a];h=u.priority!==p.priority||!f8(u,p)||u.order!==p.order||u.clipMask!==p.clipMask||!nt(u.clipScope,p.clipScope),++a}}if(h){++this._updateTime;for(const u of this._activeRegions)u.order!==bT&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,u.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,u.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,u.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,u.max.y));const a=u=>{const p=this._activeRegions;if(u>=p.length)return u;const _=p[u].priority;for(;u<p.length&&p[u].priority===_;)++u;return u};if(this._sourceIds.length>1){let u=0,p=a(u);for(;u!==p;){let _=u;const m=u;for(;_!==p;){const b=this._activeRegions[_];b.hiddenByOverlap=!1;for(let M=0;M<m;M++){const P=this._activeRegions[M];if(!P.hiddenByOverlap&&b.order===bT&&m4(b,P)&&(b.hiddenByOverlap=g8(b.footprint,b.tileId,P.footprint,P.tileId),b.hiddenByOverlap))break}++_}u=p,p=a(u)}}}}_setSources(h){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let a=h.length-1;a>=0;a--)this._addSource(h[a]);this._computeReplacement()}},i.dz=class{constructor(h){this._createGrid(h),this._createPoles(h)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const h of this._poleSegments)h.destroy();for(const h of this._gridSegments)h.withSkirts.destroy(),h.withoutSkirts.destroy()}_fillGridMeshWithLods(h,a){const u=new yu,p=new yo,_=[],m=h+1+2,b=a[0]+1,M=a[0]+1+(1+a.length),P=(R,E,O)=>{let L=R===m-1?R-2:R===0?R:R-1;return L+=O?24575:0,[L,E]};for(let R=0;R<m;++R)u.emplaceBack(...P(R,0,!0));for(let R=0;R<b;++R)for(let E=0;E<m;++E)u.emplaceBack(...P(E,R,(E===0||E===m-1)&&!0));for(let R=0;R<a.length;++R){const E=a[R];for(let O=0;O<m;++O)u.emplaceBack(...P(O,E,!0))}for(let R=0;R<a.length;++R){const E=p.length,O=a[R]+1+2,L=new yo;for(let B=0;B<O-1;B++){const W=B===O-2,G=W?m*(M-a.length+R-B):m;for(let Q=0;Q<m-1;Q++){const K=B*m+Q;B===0||W||Q===0||Q===m-2?(L.emplaceBack(K+1,K,K+G),L.emplaceBack(K+G,K+G+1,K+1)):(p.emplaceBack(K+1,K,K+G),p.emplaceBack(K+G,K+G+1,K+1))}}const D=Bi.simpleSegment(0,E,u.length,p.length-E);for(let B=0;B<L.uint16.length;B+=3)p.emplaceBack(L.uint16[B],L.uint16[B+1],L.uint16[B+2]);const k=Bi.simpleSegment(0,E,u.length,p.length-E);_.push({withoutSkirts:D,withSkirts:k})}return{vertices:u,indices:p,segments:_}}_createGrid(h){const a=this._fillGridMeshWithLods(gp,wv);this._gridSegments=a.segments,this._gridBuffer=h.createVertexBuffer(a.vertices,Vn.members),this._gridIndexBuffer=h.createIndexBuffer(a.indices,!0)}_createPoles(h){const a=new yo;for(let b=0;b<=gp;b++)a.emplaceBack(0,b+1,b+2);this._poleIndexBuffer=h.createIndexBuffer(a,!0);const u=new Ia,p=new Ia,_=new Ia,m=new Ia;this._poleSegments=[];for(let b=0,M=0;b<mp;b++){const P=360/(1<<b);u.emplaceBack(0,-ra,0,.5,0),p.emplaceBack(0,-ra,0,.5,1),_.emplaceBack(0,-ra,0,.5,.5),m.emplaceBack(0,-ra,0,.5,.5);for(let R=0;R<=gp;R++){let E=R/gp,O=0;const L=jn(0,P,E),[D,k,B]=_p(Fc,wu,L,ra);u.emplaceBack(D,k,B,E,O),p.emplaceBack(D,k,B,E,1-O);const W=ut(L);E=.5+.5*Math.sin(W),O=.5+.5*Math.cos(W),_.emplaceBack(D,k,B,E,O),m.emplaceBack(D,k,B,E,1-O)}this._poleSegments.push(Bi.simpleSegment(M,0,66,64)),M+=66}this._poleNorthVertexBuffer=h.createVertexBuffer(u,Rn,!1),this._poleSouthVertexBuffer=h.createVertexBuffer(p,Rn,!1),this._texturedPoleNorthVertexBuffer=h.createVertexBuffer(_,Rn,!1),this._texturedPoleSouthVertexBuffer=h.createVertexBuffer(m,Rn,!1)}getGridBuffers(h,a){return[this._gridBuffer,this._gridIndexBuffer,a?this._gridSegments[h].withSkirts:this._gridSegments[h].withoutSkirts]}getPoleBuffers(h,a){return[a?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,a?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[h]]}},i.e=ue,i.e0=tV,i.e1=F8,i.e2=Hg,i.e3="hd_road_elevation",i.e4=class{static parseFrom(h,a){const u=xh.parse(h);if(!u)return[];let{vertices:p,features:_}=u;const m=1/v(a);_.sort(((R,E)=>R.id-E.id)),p.sort(((R,E)=>R.id-E.id||R.idx-E.idx)),p=p.filter(((R,E,O)=>E===O.findIndex((L=>L.id===R.id&&L.idx===R.idx))));const b=new Array;let M=0;const P=p.length;for(const R of _){if(R.constantHeight){b.push(new d4(R.id,R.bounds,R.constantHeight));continue}for(;M!==P&&p[M].id<R.id;)M++;if(M===P||p[M].id!==R.id)continue;const E=new Array,O=new Array,L=M;for(;M!==P&&p[M].id===R.id;){const D=p[M];if(E.push({position:D.position,height:D.height,extent:D.extent}),M!==L&&p[M-1].idx===D.idx-1){const k=M-L;O.push({a:k-1,b:k})}M++}b.push(new d4(R.id,R.bounds,void 0,E,O,m))}return b}},i.e5=Pt,i.e6=Wg,i.e7=f$,i.e8=Cv,i.e9=function(h,a,u,p,_,m,b,M=1,P){h.createArrays(),h.tilePixelRatio=gn/(512*h.overscaling),h.compareText={},h.iconsNeedLinear=!1;const R=h.layers[0].layout,E=h.layers[0]._unevaluatedLayout._values,O={};O.scaleFactor=M,O.textSizeScaleRange=R.get("text-size-scale-range"),O.iconSizeScaleRange=R.get("icon-size-scale-range");const[L,D]=O.textSizeScaleRange,[k,B]=O.iconSizeScaleRange;O.textScaleFactor=$e(O.scaleFactor,L,D),O.iconScaleFactor=$e(O.scaleFactor,k,B);const W=E["text-size"],G=E["icon-size"];if(h.textSizeData.kind==="composite"){const{minZoom:fe,maxZoom:Pe}=h.textSizeData;O.compositeTextSizes=[W.possiblyEvaluate(new vi(fe),m),W.possiblyEvaluate(new vi(Pe),m)]}if(h.iconSizeData.kind==="composite"){const{minZoom:fe,maxZoom:Pe}=h.iconSizeData;O.compositeIconSizes=[G.possiblyEvaluate(new vi(fe),m),G.possiblyEvaluate(new vi(Pe),m)]}O.layoutTextSize=W.possiblyEvaluate(new vi(b+1),m),O.layoutIconSize=G.possiblyEvaluate(new vi(b+1),m),O.textMaxSize=W.possiblyEvaluate(new vi(18),m);const Q=R.get("symbol-placement"),K=R.get("text-rotation-alignment")==="map"&&Q!=="point",Z=R.get("text-size");let re=!1;const ce=[];for(const fe of h.features){const Pe=R.get("text-font").evaluate(fe,{},m).join(","),Me=Z.evaluate(fe,{},m)*O.textScaleFactor,Ae=O.layoutTextSize.evaluate(fe,{},m)*O.textScaleFactor,Ze=O.layoutIconSize.evaluate(fe,{},m)*O.iconScaleFactor,Oe={horizontal:{},vertical:void 0},Je=fe.text;let rt,et=[0,0];if(Je){const en=Je.toString(),$n=R.get("text-letter-spacing").evaluate(fe,{},m)*ko,Sn=R.get("text-line-height").evaluate(fe,{},m)*ko,Dn=UO(en)?$n:0,Kn=R.get("text-anchor").evaluate(fe,{},m),pr=R.get("text-variable-anchor");if(!pr){const $r=R.get("text-radial-offset").evaluate(fe,{},m);et=$r?b$(Kn,[$r*ko,P4]):R.get("text-offset").evaluate(fe,{},m).map((bi=>bi*ko))}let tr=K?"center":R.get("text-justify").evaluate(fe,{},m);const xr=Q==="point",fr=xr?R.get("text-max-width").evaluate(fe,{},m)*ko:1/0,Er=$r=>{h.allowVerticalPlacement&&zb(en)&&(Oe.vertical=A4(Je,a,u,_,Pe,fr,Sn,Kn,$r,Dn,et,ol.vertical,!0,Ae,Me,P))};if(!K&&pr){const $r=tr==="auto"?pr.map((Qn=>O4(Qn))):[tr];let bi=!1;for(let Qn=0;Qn<$r.length;Qn++){const Pr=$r[Qn];if(!Oe.horizontal[Pr])if(bi)Oe.horizontal[Pr]=Oe.horizontal[0];else{const Ni=A4(Je,a,u,_,Pe,fr,Sn,"center",Pr,Dn,et,ol.horizontal,!1,Ae,Me,P);Ni&&(Oe.horizontal[Pr]=Ni,bi=Ni.positionedLines.length===1)}}Er("left")}else{if(tr==="auto"&&(tr=O4(Kn)),xr||R.get("text-writing-mode").indexOf("horizontal")>=0||!zb(en)){const $r=A4(Je,a,u,_,Pe,fr,Sn,Kn,tr,Dn,et,ol.horizontal,!1,Ae,Me,P);$r&&(Oe.horizontal[tr]=$r)}Er(xr?"left":tr)}}let dt,ct,xt,pt,St,Zt=!1;if(fe.icon&&fe.icon.hasPrimary()){const en=w$(fe.icon,h.iconSizeData,E["icon-size"],m,h.zoom,fe,P,O.iconScaleFactor);dt=en.iconPrimary,ct=en.iconSecondary;const $n=dt.toString(),Sn=p.get($n);Sn&&(xt=R.get("icon-offset").evaluate(fe,{},m),pt=R.get("icon-anchor").evaluate(fe,{},m),St=R.get("icon-text-fit").evaluate(fe,{},m),rt=tde(_.get($n),ct?_.get(ct.toString()):void 0,xt,pt),Zt=Sn.sdf,h.sdfIcons===void 0?h.sdfIcons=Sn.sdf:h.sdfIcons!==Sn.sdf&&Te("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Sn.pixelRatio!==h.pixelRatio||R.get("icon-rotate").constantOr(1)!==0)&&(h.iconsNeedLinear=!0))}re=re||!(!fe.icon||!fe.icon.hasSecondary());const Yt=D4(Oe.horizontal)||Oe.vertical;h.iconsInText||(h.iconsInText=!!Yt&&Yt.iconsInText);const Cn=Ae*O.textScaleFactor/ko,{defaultShapedIcon:rn,verticallyShapedIcon:pn}=cde(h,rt,R,fe,m,Oe,Cn,xt,St);rt=rn,ce.push({feature:fe,shapedTextOrientations:Oe,shapedText:Yt,shapedIcon:rt,iconPrimary:dt,iconSecondary:ct,iconOffset:xt,iconAnchor:pt,verticallyShapedIcon:pn,layoutTextSize:Ae,layoutIconSize:Ze,textOffset:et,isSDFIcon:Zt,iconTextFit:St})}return{featureData:ce,sizes:O,hasAnySecondaryIcon:re,textAlongLine:K,symbolPlacement:Q}},i.ea=p$,i.eb=function(h,a,u,p,_,m,b,M,P,R){const{featureData:E,hasAnySecondaryIcon:O,sizes:L,textAlongLine:D,symbolPlacement:k}=a;for(const B of E){const{shapedIcon:W,verticallyShapedIcon:G,feature:Q,shapedTextOrientations:K,shapedText:Z,layoutTextSize:re,textOffset:ce,isSDFIcon:fe,iconPrimary:Pe,iconSecondary:Me,iconTextFit:Ae,iconOffset:Ze}=B;S$(W,R.iconPositions,Pe,Me),S$(G,R.iconPositions,Pe,Me),lde(K,R.iconPositions),(Z||W)&&ude(h,Q,K,W,G,P,L,re,0,ce,fe,p,_,b,M,O,Ae,Ze,D,k)}u&&h.generateCollisionDebugBuffers(m,h.collisionBoxArray,L.textScaleFactor)},i.ec=bp,i.ed=eM,i.ee=je,i.ef=e8,i.eg=J8,i.eh=f,i.ei=function(h){let a=0;if(new Uint32Array(h,0,1)[0]!==Y7){const u=new Uint32Array(h,0,7),[,,p,_,m,b]=u;a=u.byteLength+_+m+b+m,(p!==h.byteLength||a>=h.byteLength)&&Te("Invalid b3dm header information.")}return K7(h,a)},i.ej=function(h,a){const u=Q7(h);for(const p of u){for(const _ of p.meshes)zhe(_);p.lights&&(p.lightMeshIndex=p.meshes.length,p.meshes.push(Bhe(p.lights,a)))}return u},i.ek=GT,i.el=h7,i.em=Ll,i.en=function(h){Sr(),gr?.then((a=>{a.keys().then((u=>{for(let p=0;p<u.length-h;p++)a.delete(u[p])}))}))},i.f=function(h){return h.indexOf("mapbox:")===0},i.g=function(h,a){return Ol(vn(h,{method:"GET"}),a)},i.h=we,i.i=function(h){return ue.API_STYLE_REGEX.test(h)&&!Re(h)},i.j=function(h){return decodeURIComponent(atob(h).split("").map((a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2))).join(""))},i.k=function(h){return btoa(encodeURIComponent(h).replace(/%([0-9A-F]{2})/g,((a,u)=>String.fromCharCode(+("0x"+u)))))},i.l=vn,i.m=ri,i.n=function(h,a){return Ol(vn(h,{type:"json"}),a)},i.o=tb,i.p=function(h,a){return Ol(vn(h,{method:"POST"}),a)},i.q=Nt,i.r=Ro,i.s=function(h){try{const a=self[h];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch{return!1}},i.t=zt,i.u=function(){return(function h(a){return a?(a^Math.random()*(16>>a/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,h)})()},i.v=function(h){return!!h&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h)},i.w=Te,i.x=function(){return Z4||(Z4=new Xg),Z4},i.y=eD,i.z=Ff})),o(["./shared"],(function(i){function f(yt){const ue=yt?yt.url.toString():void 0;return ue?performance.getEntriesByName(ue):[]}function g(yt){if(typeof yt=="number"||typeof yt=="boolean"||typeof yt=="string"||yt==null)return JSON.stringify(yt);if(Array.isArray(yt)){let we="[";for(const Re of yt)we+=`${g(Re)},`;return`${we}]`}let ue="{";for(const we of Object.keys(yt).sort())ue+=`${we}:${g(yt[we])},`;return`${ue}}`}function x(yt){let ue="";for(const we of i.bm)(yt.type!=="model"||we!=="minzoom"&&we!=="maxzoom")&&(ue+=`/${g(yt[we])}`);return ue}class w{constructor(ue){this.keyCache={},this._layers={},this._layerConfigs={},ue&&this.replace(ue)}replace(ue,we){this._layerConfigs={},this._layers={},this.update(ue,[],we)}update(ue,we,Re){this._options=Re;for(const Ue of ue)this._layerConfigs[Ue.id]=Ue,(this._layers[Ue.id]=i.cv(Ue,this.scope,null,this._options)).compileFilter(Re),this.keyCache[Ue.id]&&delete this.keyCache[Ue.id];for(const Ue of we)delete this.keyCache[Ue],delete this._layerConfigs[Ue],delete this._layers[Ue];this.familiesBySource={};const Xe=(function(Ue,it){const vt={};for(let kt=0;kt<Ue.length;kt++){const zt=Ue[kt];let Nt=it&&it[zt.id];!Nt&&(Nt=x(zt),zt.type==="line"&&zt.paint)&&(function Tn(In){return typeof In=="string"&&In==="line-progress"||(Array.isArray(In)?In.some(Tn):!(!In||typeof In!="object")&&Object.values(In).some(Tn))})(zt.paint["line-width"])&&(Nt+=`/${g(zt.paint["line-width"])}`),it&&(it[zt.id]=Nt);let un=vt[Nt];un||(un=vt[Nt]=[]),un.push(zt)}const st=[];for(const kt in vt)st.push(vt[kt]);return st})(Object.values(this._layerConfigs),this.keyCache);for(const Ue of Xe){const it=Ue.map((un=>this._layers[un.id])),vt=it[0];if(vt.visibility==="none")continue;const st=vt.source||"";let kt=this.familiesBySource[st];kt||(kt=this.familiesBySource[st]={});const zt=vt.sourceLayer||"_geojsonTileLayer";let Nt=kt[zt];Nt||(Nt=kt[zt]=[]),Nt.push(it)}}}const A=1*i.d_;class C{constructor(ue){const we={},Re=[];for(const vt in ue){const st=ue[vt],kt=we[vt]={};for(const zt in st.glyphs){const Nt=st.glyphs[+zt];if(!Nt||Nt.bitmap.width===0||Nt.bitmap.height===0)continue;const un=Nt.metrics.localGlyph?A:1,Tn={x:0,y:0,w:Nt.bitmap.width+2*un,h:Nt.bitmap.height+2*un};Re.push(Tn),kt[zt]=Tn}}const{w:Xe,h:Ue}=i.H(Re),it=new i.dZ({width:Xe||1,height:Ue||1});for(const vt in ue){const st=ue[vt];for(const kt in st.glyphs){const zt=st.glyphs[+kt];if(!zt||zt.bitmap.width===0||zt.bitmap.height===0)continue;const Nt=we[vt][kt],un=zt.metrics.localGlyph?A:1;i.dZ.copy(zt.bitmap,it,{x:0,y:0},{x:Nt.x+un,y:Nt.y+un},zt.bitmap)}}this.image=it,this.positions=we}}i.dY(C,"GlyphAtlas");class F{constructor(ue){this.tileID=new i.aH(ue.tileID.overscaledZ,ue.tileID.wrap,ue.tileID.canonical.z,ue.tileID.canonical.x,ue.tileID.canonical.y),this.tileZoom=ue.tileZoom,this.uid=ue.uid,this.zoom=ue.zoom,this.lut=ue.lut,this.canonical=ue.tileID.canonical,this.pixelRatio=ue.pixelRatio,this.tileSize=ue.tileSize,this.source=ue.source,this.scope=ue.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ue.showCollisionBoxes,this.collectResourceTiming=!!ue.request&&ue.request.collectResourceTiming,this.promoteId=ue.promoteId,this.isSymbolTile=ue.isSymbolTile,this.tileTransform=i.aR(ue.tileID.canonical,ue.projection),this.projection=ue.projection,this.worldview=ue.worldview,this.localizableLayerIds=ue.localizableLayerIds,this.brightness=ue.brightness,this.extraShadowCaster=!!ue.extraShadowCaster,this.tessellationStep=ue.tessellationStep,this.scaleFactor=ue.scaleFactor}parse(ue,we,Re,Xe,Ue){this.status="parsing",this.data=ue,this.collisionBoxArray=new i.aX;const it=new i.d$(Object.keys(ue.layers).sort()),vt=new i.e0(this.tileID,this.promoteId);vt.bucketLayerIDs=[];const st={},kt=new i.e1(256,256),zt={featureIndex:vt,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:kt,availableImages:Re,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},Nt=we.familiesBySource[this.source];for(const Sr in Nt){const ni=ue.layers[Sr];if(!ni)continue;let ri=!1,li=!1,us=!1;for(const ta of Nt[Sr])ta[0].type==="symbol"?ri=!0:li=!0,ta[0].is3D()&&ta[0].type!=="model"&&(us=!0);if(this.extraShadowCaster&&!us||this.isSymbolTile===!0&&!ri||this.isSymbolTile===!1&&!li)continue;ni.version===1&&i.w(`Vector tile source "${this.source}" layer "${Sr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ro=it.encode(Sr),Vo=[];let Pl=!1;for(let ta=0,io=0;ta<ni.length;ta++){const _o=ni.feature(ta),kf=vt.getId(_o,Sr);if(this.localizableLayerIds&&this.localizableLayerIds.has(Sr)){const Ol=_o.properties?_o.properties.worldview:null;if(this.worldview&&typeof Ol=="string")if(Ol==="all")_o.properties.$localized=!0;else{if(!Ol.split(",").includes(this.worldview))continue;_o.properties.$localized=!0,_o.properties.worldview=this.worldview}}!Pl&&_o.properties&&_o.properties.hasOwnProperty(i.e2)&&(Pl=!0),Vo.push({feature:_o,id:kf,index:io,sourceLayerIndex:ro}),io++}Pl&&!zt.elevationFeatures&&ue.layers.hasOwnProperty(i.e3)&&(zt.elevationFeatures=i.e4.parseFrom(ue.layers[i.e3],this.canonical));for(const ta of Nt[Sr]){const io=ta[0];(!this.extraShadowCaster||io.is3D()&&io.type!=="model")&&(this.isSymbolTile!==void 0&&io.type==="symbol"!==this.isSymbolTile||io.minzoom&&this.zoom<Math.floor(io.minzoom)||io.maxzoom&&this.zoom>=io.maxzoom||io.visibility!=="none"&&(z(ta,this.zoom,zt.brightness,Re),(st[io.id]=io.createBucket({index:vt.bucketLayerIDs.length,layers:ta,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ro,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(Vo,zt,this.tileID.canonical,this.tileTransform),vt.bucketLayerIDs.push(ta.map((_o=>i.C(_o.id,_o.scope))))))}}let un,Tn,In,sr,dr,hr;kt.trim();const gr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ai=()=>{if(un)return this.status="done",Ue(un);if(this.extraShadowCaster)this.status="done",Ue(null,{buckets:Object.values(st).filter((Sr=>!Sr.isEmpty())),featureIndex:vt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:zt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Tn&&In&&sr){const Sr=new C(Tn),ni=new Map;for(const[us,ro]of In.entries()){const{imagePosition:Vo}=i.e7(us,ro,i.e8);ni.set(us,Vo)}const ri={};for(const us in st){const ro=st[us];ro instanceof i.aY&&(z(ro.layers,this.zoom,zt.brightness,Re),ri[us]=i.e9(ro,Tn,Sr.positions,In,ni,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio))}const li={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(Xe,In,dr,(()=>{li.iconsPending=!1,Gi(ri,Sr,li)})),this.rasterizeIfNeeded(Xe,sr,hr,(()=>{li.patternsPending=!1,Gi(ri,Sr,li)}))}},Gi=(Sr,ni,ri,li)=>{if(ri.iconsPending||ri.patternsPending)return;const us=new i.ea(In,sr,this.lut);for(const ro in st){const Vo=st[ro];if(ro in Sr)i.eb(Vo,Sr[ro],this.showCollisionBoxes,Re,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,In,us);else if(Vo.hasPattern&&(Vo instanceof i.b2||Vo instanceof i.b3||Vo instanceof i.d8)){z(Vo.layers,this.zoom,zt.brightness,Re);const Pl=Object.fromEntries(us.patternPositions);Vo.addFeatures(zt,this.tileID.canonical,Pl,Re,this.tileTransform,this.brightness)}}this.status="done",Ue(null,{buckets:Object.values(st).filter((ro=>!ro.isEmpty())),featureIndex:vt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ni.image,lineAtlas:kt,imageAtlas:us,brightness:zt.brightness})};if(!this.extraShadowCaster){const Sr=i.e5(zt.glyphDependencies,(li=>Object.keys(li).map(Number)));Object.keys(Sr).length?Xe.send("getGlyphs",{uid:this.uid,stacks:Sr,scope:this.scope},((li,us)=>{un||(un=li,Tn=us,Ai())}),void 0,!1,gr):Tn={};const ni=Array.from(zt.iconDependencies.keys()).map((li=>i.I.parse(li)));ni.length?Xe.send("getImages",{images:ni,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},((li,us)=>{un||(un=li,In=new Map,dr=this.updateImageMapAndGetImageTaskQueue(In,us,zt.iconDependencies),Ai())}),void 0,!1,gr):(In=new Map,dr=new Map);const ri=Array.from(zt.patternDependencies.keys()).map((li=>i.I.parse(li)));ri.length?Xe.send("getImages",{images:ri,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},((li,us)=>{un||(un=li,sr=new Map,hr=this.updateImageMapAndGetImageTaskQueue(sr,us,zt.patternDependencies),Ai())}),void 0,!1,gr):(sr=new Map,hr=new Map)}if(zt.elevationFeatures&&zt.elevationFeatures.length>0){const Sr=[];for(const ri of Object.values(st))if(ri instanceof i.b3){const li=ri.getUnevaluatedPortalGraph();li&&Sr.push(li)}const ni=i.e6.evaluate(Sr);for(const ri of Object.values(st))ri instanceof i.b3&&ri.setEvaluatedPortalGraph(ni)}Ai()}rasterizeIfNeeded(ue,we,Re,Xe){Array.from(we.values()).some((Ue=>Ue.usvg))?this.rasterize(ue,we,Re,Xe):Xe()}updateImageMapAndGetImageTaskQueue(ue,we,Re){const Xe=new Map;for(const Ue of we.keys()){const it=Re.get(Ue)||[];for(const vt of it){const st=vt.toString(),kt=we.get(vt.id.toString());kt.usvg?Xe.has(st)||(Xe.set(st,vt),ue.set(st,Object.assign({},kt))):ue.set(st,kt)}}return Xe}rasterize(ue,we,Re,Xe){this.rasterizeTask=ue.send("rasterizeImages",{scope:this.scope,tasks:Re},((Ue,it)=>{if(!Ue)for(const[vt,st]of it.entries()){const kt=Object.assign(we.get(vt),{data:st});we.set(vt,kt)}Xe()}))}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function z(yt,ue,we,Re){const Xe=new i.aa(ue,{brightness:we});for(const Ue of yt)Ue.recalculate(Xe,Re)}class j extends i.E{constructor(ue,we,Re,Xe,Ue,it){super(),this.actor=ue,this.layerIndex=we,this.availableImages=Re,this.loadVectorData=Ue||i.aE,this.loading={},this.loaded={},this.deduped=new i.aD(ue.scheduler),this.isSpriteLoaded=Xe,this.scheduler=ue.scheduler,this.brightness=it}loadTile(ue,we){const Re=ue.uid,Xe=ue&&ue.request,Ue=Xe&&Xe.collectResourceTiming,it=this.loading[Re]=new F(ue);it.abort=this.loadVectorData(ue,((vt,st)=>{const kt=!this.loading[Re];if(delete this.loading[Re],it.cancelRasterize(),kt||vt||!st)return it.status="done",kt||(this.loaded[Re]=it),we(vt);const zt=st.rawData,Nt={};st.expires&&(Nt.expires=st.expires),st.cacheControl&&(Nt.cacheControl=st.cacheControl),it.vectorTile=st.vectorTile||new i.ec.VectorTile(new i.bi(zt));const un=()=>{it.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor,((Tn,In)=>{if(Tn||!In)return we(Tn);const sr={};if(Ue){const dr=f(Xe);dr.length>0&&(sr.resourceTiming=JSON.parse(JSON.stringify(dr)))}we(null,i.l({rawTileData:zt.slice(0)},In,Nt,sr))}))};this.isSpriteLoaded?un():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(un,{type:"parseTile",isSymbolTile:ue.isSymbolTile,zoom:ue.tileZoom}):un()})),this.loaded=this.loaded||{},this.loaded[Re]=it}))}reloadTile(ue,we){const Re=this.loaded,Xe=ue.uid;if(Re&&Re[Xe]){const Ue=Re[Xe];Ue.scaleFactor=ue.scaleFactor,Ue.showCollisionBoxes=ue.showCollisionBoxes,Ue.projection=ue.projection,Ue.brightness=ue.brightness,Ue.tileTransform=i.aR(ue.tileID.canonical,ue.projection),Ue.extraShadowCaster=ue.extraShadowCaster,Ue.lut=ue.lut;const it=(vt,st)=>{const kt=Ue.reloadCallback;kt&&(delete Ue.reloadCallback,Ue.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor,kt)),we(vt,st)};Ue.status==="parsing"?Ue.reloadCallback=it:Ue.status==="done"&&(Ue.vectorTile?Ue.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor,it):it())}else we(null,void 0)}abortTile(ue,we){const Re=ue.uid,Xe=this.loading[Re];Xe&&(Xe.abort&&Xe.abort(),delete this.loading[Re]),we()}removeTile(ue,we){const Re=this.loaded,Xe=ue.uid;Re&&Re[Xe]&&delete Re[Xe],we()}}class V{loadTile(ue,we){const{uid:Re,encoding:Xe,rawImageData:Ue,padding:it}=ue,vt=ImageBitmap&&Ue instanceof ImageBitmap?this.getImageData(Ue,it):Ue;we(null,new i.ed(Re,vt,Xe,it<1))}reloadTile(ue,we){we(null,null)}abortTile(ue,we){we()}removeTile(ue,we){we()}getImageData(ue,we){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ue.width,ue.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ue.width,this.offscreenCanvas.height=ue.height,this.offscreenCanvasContext.drawImage(ue,0,0,ue.width,ue.height);const Re=this.offscreenCanvasContext.getImageData(-we,-we,ue.width+2*we,ue.height+2*we);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Re}}i.bh.setPbf(i.bi);class Y{constructor(ue){this._mrt=new i.bh(ue.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=ue.uid,this.tileID=ue.tileID,this.source=ue.source}parse(ue,we){const Re=this._mrt;this.status="parsing",this._entireBuffer=ue;try{Re.parseHeader(ue),this._isHeaderLoaded=!0;const Xe=[];for(const Ue in Re.layers){const it=Re.getLayer(Ue),vt=it.getDataRange(it.getBandList()),st=Re.createDecodingTask(vt),kt=ue.slice(vt.firstByte,vt.lastByte+1),zt=i.bh.performDecoding(kt,st).then((Nt=>st.complete(null,Nt))).catch((Nt=>st.complete(Nt,null)));Xe.push(zt)}Promise.allSettled(Xe).then((()=>we(null,Re)))}catch(Xe){we(Xe)}}}class te{constructor(ue){this.actor=ue,this.loading={},this.loaded={}}loadTile(ue,we){const Re=ue.uid,Xe=ue.request,Ue=this.loading[Re]=new Y(ue),{cancel:it}=i.bj(Xe,((vt,st,kt,zt)=>{const Nt=!this.loading[Re];if(delete this.loading[Re],Nt||vt||!st)return Ue.status="done",Nt||(this.loaded[Re]=Ue),we(vt);Ue.parse(st,((un,Tn)=>{if(un||!Tn)return we(un);we(null,Tn,kt,zt)})),this.loaded[Re]=Ue}));Ue.abort=it}reloadTile(ue,we){we(null,void 0)}abortTile(ue,we){const Re=ue.uid,Xe=this.loading[Re];Xe&&(Xe.abort&&Xe.abort(),delete this.loading[Re]),we()}removeTile(ue,we){const Re=ue.uid;this.loaded[Re]&&delete this.loaded[Re],we()}decodeRasterArray({task:ue,buffer:we},Re){i.bh.performDecoding(we,ue).then((Xe=>Re(null,Xe))).catch((Xe=>Re(Xe)))}}const J=i.ec.VectorTileFeature.prototype.toGeoJSON;class ee{constructor(ue){this._feature=ue,this.extent=i.ai,this.type=ue.type,this.properties=ue.tags,"id"in ue&&!isNaN(ue.id)&&(this.id=parseInt(ue.id,10))}loadGeometry(){if(this._feature.type===1){const ue=[];for(const we of this._feature.geometry)ue.push([new i.P(we[0],we[1])]);return ue}{const ue=[];for(const we of this._feature.geometry){const Re=[];for(const Xe of we)Re.push(new i.P(Xe[0],Xe[1]));ue.push(Re)}return ue}}toGeoJSON(ue,we,Re){return J.call(this,ue,we,Re)}}class le{constructor(ue){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.ai,this.length=ue.length,this._features=ue}feature(ue){return new ee(this._features[ue])}}const oe=64/4096,ve=128;class se{constructor(){this.features=new Map}clear(){this.features.clear()}load(ue=[],we){for(const Re of ue){const Xe=Re.id;if(Xe==null)continue;let Ue=this.features.get(Xe);Ue&&this.updateCache(Ue,we),Re.geometry?(Ue=pe(Re),this.updateCache(Ue,we),this.features.set(Xe,Ue)):this.features.delete(Xe),this.updateCache(Ue,we)}}updateCache(ue,we){for(const{canonical:Re,uid:Xe}of Object.values(we)){const{z:Ue,x:it,y:vt}=Re;ie(ue,Math.pow(2,Ue),it,vt)&&delete we[Xe]}}getTile(ue,we,Re){const Xe=Math.pow(2,ue),Ue=[];for(const it of this.features.values())ie(it,Xe,we,Re)&&Ue.push(Ee(it,Xe,we,Re));return{features:Ue}}getFeatures(){return[...this.features.values()]}}function ie({minX:yt,minY:ue,maxX:we,maxY:Re},Xe,Ue,it){return yt<(Ue+1+oe)/Xe&&ue<(it+1+oe)/Xe&&we>(Ue-oe)/Xe&&Re>(it-oe)/Xe}function pe(yt){const{id:ue,geometry:we,properties:Re}=yt;if(!we)return;if(we.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Xe,coordinates:Ue}=we,it={id:ue,type:1,geometry:[],tags:Re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},vt=it.geometry;if(Xe==="Point")be(Ue,vt,it);else if(Xe==="MultiPoint")for(const st of Ue)be(st,vt,it);else if(Xe==="LineString")it.type=2,Se(Ue,vt,it);else if(Xe==="MultiLineString")it.type=2,Ce(Ue,vt,it);else if(Xe==="Polygon")it.type=3,Ce(Ue,vt,it,!0);else{if(Xe!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");it.type=3;for(const st of Ue)Ce(st,vt,it,!0)}return it}function be([yt,ue],we,Re){const Xe=i.av(yt);let Ue=i.aC(ue);Ue=Ue<0?0:Ue>1?1:Ue,we.push(Xe,Ue),Re.minX=Math.min(Re.minX,Xe),Re.minY=Math.min(Re.minY,Ue),Re.maxX=Math.max(Re.maxX,Xe),Re.maxY=Math.max(Re.maxY,Ue)}function Se(yt,ue,we,Re=!1,Xe=!1){const Ue=[];for(const it of yt)be(it,Ue,we);ue.push(Ue),Re&&(function(it,vt){let st=0;for(let kt=0,zt=it.length,Nt=zt-2;kt<zt;Nt=kt,kt+=2)st+=(it[kt]-it[Nt])*(it[kt+1]+it[Nt+1]);if(st>0===vt)for(let kt=0,zt=it.length;kt<zt/2;kt+=2){const Nt=it[kt],un=it[kt+1];it[kt]=it[zt-2-kt],it[kt+1]=it[zt-1-kt],it[zt-2-kt]=Nt,it[zt-1-kt]=un}})(Ue,Xe)}function Ce(yt,ue,we,Re=!1){for(let Xe=0;Xe<yt.length;Xe++)Se(yt[Xe],ue,we,Re,Xe===0)}function Ee(yt,ue,we,Re){const{id:Xe,type:Ue,geometry:it,tags:vt}=yt,st=[];if(Ue===1)(function(kt,zt,Nt,un,Tn){for(let In=0;In<kt.length;In+=2){const sr=Math.round(i.ai*(kt[In+0]*zt-Nt)),dr=Math.round(i.ai*(kt[In+1]*zt-un));Tn.push([sr,dr])}})(it,ue,we,Re,st);else for(const kt of it)xe(kt,ue,we,Re,st);return{id:Xe,type:Ue,geometry:st,tags:vt}}function xe(yt,ue,we,Re,Xe){const Ue=-ve,it=i.ai+ve;let vt;for(let st=0;st<yt.length-2;st+=2){let kt=Math.round(i.ai*(yt[st+0]*ue-we)),zt=Math.round(i.ai*(yt[st+1]*ue-Re)),Nt=Math.round(i.ai*(yt[st+2]*ue-we)),un=Math.round(i.ai*(yt[st+3]*ue-Re));const Tn=Nt-kt,In=un-zt;kt<Ue&&Nt<Ue||(kt<Ue?(zt+=Math.round(In*((Ue-kt)/Tn)),kt=Ue):Nt<Ue&&(un=zt+Math.round(In*((Ue-kt)/Tn)),Nt=Ue),zt<Ue&&un<Ue||(zt<Ue?(kt+=Math.round(Tn*((Ue-zt)/In)),zt=Ue):un<Ue&&(Nt=kt+Math.round(Tn*((Ue-zt)/In)),un=Ue),kt>=it&&Nt>=it||(kt>=it?(zt+=Math.round(In*((it-kt)/Tn)),kt=it):Nt>=it&&(un=zt+Math.round(In*((it-kt)/Tn)),Nt=it),zt>=it&&un>=it||(zt>=it?(kt+=Math.round(Tn*((it-zt)/In)),zt=it):un>=it&&(Nt=kt+Math.round(Tn*((it-zt)/In)),un=it),vt&&kt===vt[vt.length-1][0]&&zt===vt[vt.length-1][1]||(vt=[[kt,zt]],Xe.push(vt)),vt.push([Nt,un])))))}}var ke,He,Ke,Ge={exports:{}},$t=(function(){if(Ke)return Ge.exports;Ke=1;var yt=i.eg(),ue=(function(){if(He)return ke;He=1;var zt=i.ee(),Nt=i.ef().VectorTileFeature;function un(In,sr){this.options=sr||{},this.features=In,this.length=In.length}function Tn(In,sr){this.id=typeof In.id=="number"?In.id:void 0,this.type=In.type,this.rawGeometry=In.type===1?[In.geometry]:In.geometry,this.properties=In.tags,this.extent=sr||4096}return ke=un,un.prototype.feature=function(In){return new Tn(this.features[In],this.options.extent)},Tn.prototype.loadGeometry=function(){var In=this.rawGeometry;this.geometry=[];for(var sr=0;sr<In.length;sr++){for(var dr=In[sr],hr=[],gr=0;gr<dr.length;gr++)hr.push(new zt(dr[gr][0],dr[gr][1]));this.geometry.push(hr)}return this.geometry},Tn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var In=this.geometry,sr=1/0,dr=-1/0,hr=1/0,gr=-1/0,Ai=0;Ai<In.length;Ai++)for(var Gi=In[Ai],Sr=0;Sr<Gi.length;Sr++){var ni=Gi[Sr];sr=Math.min(sr,ni.x),dr=Math.max(dr,ni.x),hr=Math.min(hr,ni.y),gr=Math.max(gr,ni.y)}return[sr,hr,dr,gr]},Tn.prototype.toGeoJSON=Nt.prototype.toGeoJSON,ke})();function we(zt){var Nt=new yt;return(function(un,Tn){for(var In in un.layers)Tn.writeMessage(3,Re,un.layers[In])})(zt,Nt),Nt.finish()}function Re(zt,Nt){var un;Nt.writeVarintField(15,zt.version||1),Nt.writeStringField(1,zt.name||""),Nt.writeVarintField(5,zt.extent||4096);var Tn={keys:[],values:[],keycache:{},valuecache:{}};for(un=0;un<zt.length;un++)Tn.feature=zt.feature(un),Nt.writeMessage(2,Xe,Tn);var In=Tn.keys;for(un=0;un<In.length;un++)Nt.writeStringField(3,In[un]);var sr=Tn.values;for(un=0;un<sr.length;un++)Nt.writeMessage(4,kt,sr[un])}function Xe(zt,Nt){var un=zt.feature;un.id!==void 0&&Nt.writeVarintField(1,un.id),Nt.writeMessage(2,Ue,zt),Nt.writeVarintField(3,un.type),Nt.writeMessage(4,st,un)}function Ue(zt,Nt){var un=zt.feature,Tn=zt.keys,In=zt.values,sr=zt.keycache,dr=zt.valuecache;for(var hr in un.properties){var gr=un.properties[hr],Ai=sr[hr];if(gr!==null){Ai===void 0&&(Tn.push(hr),sr[hr]=Ai=Tn.length-1),Nt.writeVarint(Ai);var Gi=typeof gr;Gi!=="string"&&Gi!=="boolean"&&Gi!=="number"&&(gr=JSON.stringify(gr));var Sr=Gi+":"+gr,ni=dr[Sr];ni===void 0&&(In.push(gr),dr[Sr]=ni=In.length-1),Nt.writeVarint(ni)}}}function it(zt,Nt){return(Nt<<3)+(7&zt)}function vt(zt){return zt<<1^zt>>31}function st(zt,Nt){for(var un=zt.loadGeometry(),Tn=zt.type,In=0,sr=0,dr=un.length,hr=0;hr<dr;hr++){var gr=un[hr],Ai=1;Tn===1&&(Ai=gr.length),Nt.writeVarint(it(1,Ai));for(var Gi=Tn===3?gr.length-1:gr.length,Sr=0;Sr<Gi;Sr++){Sr===1&&Tn!==1&&Nt.writeVarint(it(2,Gi-1));var ni=gr[Sr].x-In,ri=gr[Sr].y-sr;Nt.writeVarint(vt(ni)),Nt.writeVarint(vt(ri)),In+=ni,sr+=ri}Tn===3&&Nt.writeVarint(it(7,1))}}function kt(zt,Nt){var un=typeof zt;un==="string"?Nt.writeStringField(1,zt):un==="boolean"?Nt.writeBooleanField(7,zt):un==="number"&&(zt%1!=0?Nt.writeDoubleField(3,zt):zt<0?Nt.writeSVarintField(6,zt):Nt.writeVarintField(5,zt))}return Ge.exports=we,Ge.exports.fromVectorTileJs=we,Ge.exports.fromGeojsonVt=function(zt,Nt){Nt=Nt||{};var un={};for(var Tn in zt)un[Tn]=new ue(zt[Tn].features,Nt),un[Tn].name=Tn,un[Tn].version=Nt.version,un[Tn].extent=Nt.extent;return we({layers:un})},Ge.exports.GeoJSONWrapper=ue,Ge.exports})(),Ft=i.eh($t);const Lt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:yt=>yt},nn=Math.fround||(mn=new Float32Array(1),yt=>(mn[0]=+yt,mn[0]));var mn;const Xt=3,mt=5,Jt=6;class Kt{constructor(ue){this.options=Object.assign(Object.create(Lt),ue),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ue){const{log:we,minZoom:Re,maxZoom:Xe}=this.options;we&&console.time("total time");const Ue=`prepare ${ue.length} points`;we&&console.time(Ue),this.points=ue;const it=[];for(let st=0;st<ue.length;st++){const kt=ue[st];if(!kt.geometry)continue;const[zt,Nt]=kt.geometry.coordinates,un=nn(On(zt)),Tn=nn(je(Nt));it.push(un,Tn,1/0,st,-1,1),this.options.reduce&&it.push(0)}let vt=this.trees[Xe+1]=this._createTree(it);we&&console.timeEnd(Ue);for(let st=Xe;st>=Re;st--){const kt=+Date.now();vt=this.trees[st]=this._createTree(this._cluster(vt,st)),we&&console.log("z%d: %d clusters in %dms",st,vt.numItems,+Date.now()-kt)}return we&&console.timeEnd("total time"),this}getClusters(ue,we){let Re=((ue[0]+180)%360+360)%360-180;const Xe=Math.max(-90,Math.min(90,ue[1]));let Ue=ue[2]===180?180:((ue[2]+180)%360+360)%360-180;const it=Math.max(-90,Math.min(90,ue[3]));if(ue[2]-ue[0]>=360)Re=-180,Ue=180;else if(Re>Ue){const Nt=this.getClusters([Re,Xe,180,it],we),un=this.getClusters([-180,Xe,Ue,it],we);return Nt.concat(un)}const vt=this.trees[this._limitZoom(we)],st=vt.range(On(Re),je(it),On(Ue),je(Xe)),kt=vt.data,zt=[];for(const Nt of st){const un=this.stride*Nt;zt.push(kt[un+mt]>1?_e(kt,un,this.clusterProps):this.points[kt[un+Xt]])}return zt}getChildren(ue){const we=this._getOriginId(ue),Re=this._getOriginZoom(ue),Xe="No cluster with the specified id.",Ue=this.trees[Re];if(!Ue)throw new Error(Xe);const it=Ue.data;if(we*this.stride>=it.length)throw new Error(Xe);const vt=this.options.radius/(this.options.extent*Math.pow(2,Re-1)),st=Ue.within(it[we*this.stride],it[we*this.stride+1],vt),kt=[];for(const zt of st){const Nt=zt*this.stride;it[Nt+4]===ue&&kt.push(it[Nt+mt]>1?_e(it,Nt,this.clusterProps):this.points[it[Nt+Xt]])}if(kt.length===0)throw new Error(Xe);return kt}getLeaves(ue,we,Re){const Xe=[];return this._appendLeaves(Xe,ue,we=we||10,Re=Re||0,0),Xe}getTile(ue,we,Re){const Xe=this.trees[this._limitZoom(ue)],Ue=Math.pow(2,ue),{extent:it,radius:vt}=this.options,st=vt/it,kt=(Re-st)/Ue,zt=(Re+1+st)/Ue,Nt={features:[]};return this._addTileFeatures(Xe.range((we-st)/Ue,kt,(we+1+st)/Ue,zt),Xe.data,we,Re,Ue,Nt),we===0&&this._addTileFeatures(Xe.range(1-st/Ue,kt,1,zt),Xe.data,Ue,Re,Ue,Nt),we===Ue-1&&this._addTileFeatures(Xe.range(0,kt,st/Ue,zt),Xe.data,-1,Re,Ue,Nt),Nt.features.length?Nt:null}getClusterExpansionZoom(ue){let we=this._getOriginZoom(ue)-1;for(;we<=this.options.maxZoom;){const Re=this.getChildren(ue);if(we++,Re.length!==1)break;ue=Re[0].properties.cluster_id}return we}_appendLeaves(ue,we,Re,Xe,Ue){const it=this.getChildren(we);for(const vt of it){const st=vt.properties;if(st&&st.cluster?Ue+st.point_count<=Xe?Ue+=st.point_count:Ue=this._appendLeaves(ue,st.cluster_id,Re,Xe,Ue):Ue<Xe?Ue++:ue.push(vt),ue.length===Re)break}return Ue}_createTree(ue){const we=new i.bE(ue.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Re=0;Re<ue.length;Re+=this.stride)we.add(ue[Re],ue[Re+1]);return we.finish(),we.data=ue,we}_addTileFeatures(ue,we,Re,Xe,Ue,it){for(const vt of ue){const st=vt*this.stride,kt=we[st+mt]>1;let zt,Nt,un;if(kt)zt=bn(we,st,this.clusterProps),Nt=we[st],un=we[st+1];else{const sr=this.points[we[st+Xt]];zt=sr.properties;const[dr,hr]=sr.geometry.coordinates;Nt=On(dr),un=je(hr)}const Tn={type:1,geometry:[[Math.round(this.options.extent*(Nt*Ue-Re)),Math.round(this.options.extent*(un*Ue-Xe))]],tags:zt};let In;In=kt||this.options.generateId?we[st+Xt]:this.points[we[st+Xt]].id,In!==void 0&&(Tn.id=In),it.features.push(Tn)}}_limitZoom(ue){return Math.max(this.options.minZoom,Math.min(Math.floor(+ue),this.options.maxZoom+1))}_cluster(ue,we){const{radius:Re,extent:Xe,reduce:Ue,minPoints:it}=this.options,vt=Re/(Xe*Math.pow(2,we)),st=ue.data,kt=[],zt=this.stride;for(let Nt=0;Nt<st.length;Nt+=zt){if(st[Nt+2]<=we)continue;st[Nt+2]=we;const un=st[Nt],Tn=st[Nt+1],In=ue.within(st[Nt],st[Nt+1],vt),sr=st[Nt+mt];let dr=sr;for(const hr of In){const gr=hr*zt;st[gr+2]>we&&(dr+=st[gr+mt])}if(dr>sr&&dr>=it){let hr,gr=un*sr,Ai=Tn*sr,Gi=-1;const Sr=(Nt/zt<<5)+(we+1)+this.points.length;for(const ni of In){const ri=ni*zt;if(st[ri+2]<=we)continue;st[ri+2]=we;const li=st[ri+mt];gr+=st[ri]*li,Ai+=st[ri+1]*li,st[ri+4]=Sr,Ue&&(hr||(hr=this._map(st,Nt,!0),Gi=this.clusterProps.length,this.clusterProps.push(hr)),Ue(hr,this._map(st,ri)))}st[Nt+4]=Sr,kt.push(gr/dr,Ai/dr,1/0,Sr,-1,dr),Ue&&kt.push(Gi)}else{for(let hr=0;hr<zt;hr++)kt.push(st[Nt+hr]);if(dr>1)for(const hr of In){const gr=hr*zt;if(!(st[gr+2]<=we)){st[gr+2]=we;for(let Ai=0;Ai<zt;Ai++)kt.push(st[gr+Ai])}}}}return kt}_getOriginId(ue){return ue-this.points.length>>5}_getOriginZoom(ue){return(ue-this.points.length)%32}_map(ue,we,Re){if(ue[we+mt]>1){const it=this.clusterProps[ue[we+Jt]];return Re?Object.assign({},it):it}const Xe=this.points[ue[we+Xt]].properties,Ue=this.options.map(Xe);return Re&&Ue===Xe?Object.assign({},Ue):Ue}}function _e(yt,ue,we){return{type:"Feature",id:yt[ue+Xt],properties:bn(yt,ue,we),geometry:{type:"Point",coordinates:[(Re=yt[ue],360*(Re-.5)),ge(yt[ue+1])]}};var Re}function bn(yt,ue,we){const Re=yt[ue+mt],Xe=Re>=1e4?`${Math.round(Re/1e3)}k`:Re>=1e3?Math.round(Re/100)/10+"k":Re,Ue=yt[ue+Jt],it=Ue===-1?{}:Object.assign({},we[Ue]);return Object.assign(it,{cluster:!0,cluster_id:yt[ue+Xt],point_count:Re,point_count_abbreviated:Xe})}function On(yt){return yt/360+.5}function je(yt){const ue=Math.sin(yt*Math.PI/180),we=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return we<0?0:we>1?1:we}function ge(yt){const ue=(180-360*yt)*Math.PI/180;return 360*Math.atan(Math.exp(ue))/Math.PI-90}function nt(yt,ue,we,Re){let Xe=Re;const Ue=ue+(we-ue>>1);let it,vt=we-ue;const st=yt[ue],kt=yt[ue+1],zt=yt[we],Nt=yt[we+1];for(let un=ue+3;un<we;un+=3){const Tn=It(yt[un],yt[un+1],st,kt,zt,Nt);if(Tn>Xe)it=un,Xe=Tn;else if(Tn===Xe){const In=Math.abs(un-Ue);In<vt&&(it=un,vt=In)}}Xe>Re&&(it-ue>3&&nt(yt,ue,it,Re),yt[it+2]=Xe,we-it>3&&nt(yt,it,we,Re))}function It(yt,ue,we,Re,Xe,Ue){let it=Xe-we,vt=Ue-Re;if(it!==0||vt!==0){const st=((yt-we)*it+(ue-Re)*vt)/(it*it+vt*vt);st>1?(we=Xe,Re=Ue):st>0&&(we+=it*st,Re+=vt*st)}return it=yt-we,vt=ue-Re,it*it+vt*vt}function ht(yt,ue,we,Re){const Xe={id:yt??null,type:ue,geometry:we,tags:Re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ue==="Point"||ue==="MultiPoint"||ue==="LineString")ut(Xe,we);else if(ue==="Polygon")ut(Xe,we[0]);else if(ue==="MultiLineString")for(const Ue of we)ut(Xe,Ue);else if(ue==="MultiPolygon")for(const Ue of we)ut(Xe,Ue[0]);return Xe}function ut(yt,ue){for(let we=0;we<ue.length;we+=3)yt.minX=Math.min(yt.minX,ue[we]),yt.minY=Math.min(yt.minY,ue[we+1]),yt.maxX=Math.max(yt.maxX,ue[we]),yt.maxY=Math.max(yt.maxY,ue[we+1])}function Rt(yt,ue,we,Re){if(!ue.geometry)return;const Xe=ue.geometry.coordinates;if(Xe&&Xe.length===0)return;const Ue=ue.geometry.type,it=Math.pow(we.tolerance/((1<<we.maxZoom)*we.extent),2);let vt=[],st=ue.id;if(we.promoteId?st=ue.properties[we.promoteId]:we.generateId&&(st=Re||0),Ue==="Point")ze(Xe,vt);else if(Ue==="MultiPoint")for(const kt of Xe)ze(kt,vt);else if(Ue==="LineString")lt(Xe,vt,it,!1);else if(Ue==="MultiLineString"){if(we.lineMetrics){for(const kt of Xe)vt=[],lt(kt,vt,it,!1),yt.push(ht(st,"LineString",vt,ue.properties));return}at(Xe,vt,it,!1)}else if(Ue==="Polygon")at(Xe,vt,it,!0);else{if(Ue!=="MultiPolygon"){if(Ue==="GeometryCollection"){for(const kt of ue.geometry.geometries)Rt(yt,{id:st,geometry:kt,properties:ue.properties},we,Re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const kt of Xe){const zt=[];at(kt,zt,it,!0),vt.push(zt)}}yt.push(ht(st,Ue,vt,ue.properties))}function ze(yt,ue){ue.push(Et(yt[0]),$e(yt[1]),0)}function lt(yt,ue,we,Re){let Xe,Ue,it=0;for(let st=0;st<yt.length;st++){const kt=Et(yt[st][0]),zt=$e(yt[st][1]);ue.push(kt,zt,0),st>0&&(it+=Re?(Xe*zt-kt*Ue)/2:Math.sqrt(Math.pow(kt-Xe,2)+Math.pow(zt-Ue,2))),Xe=kt,Ue=zt}const vt=ue.length-3;ue[2]=1,nt(ue,0,vt,we),ue[vt+2]=1,ue.size=Math.abs(it),ue.start=0,ue.end=ue.size}function at(yt,ue,we,Re){for(let Xe=0;Xe<yt.length;Xe++){const Ue=[];lt(yt[Xe],Ue,we,Re),ue.push(Ue)}}function Et(yt){return yt/360+.5}function $e(yt){const ue=Math.sin(yt*Math.PI/180),we=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return we<0?0:we>1?1:we}function Mt(yt,ue,we,Re,Xe,Ue,it,vt){if(Re/=ue,Ue>=(we/=ue)&&it<Re)return yt;if(it<we||Ue>=Re)return null;const st=[];for(const kt of yt){const zt=kt.geometry;let Nt=kt.type;const un=Xe===0?kt.minX:kt.minY,Tn=Xe===0?kt.maxX:kt.maxY;if(un>=we&&Tn<Re){st.push(kt);continue}if(Tn<we||un>=Re)continue;let In=[];if(Nt==="Point"||Nt==="MultiPoint")tn(zt,In,we,Re,Xe);else if(Nt==="LineString")on(zt,In,we,Re,Xe,!1,vt.lineMetrics);else if(Nt==="MultiLineString")_t(zt,In,we,Re,Xe,!1);else if(Nt==="Polygon")_t(zt,In,we,Re,Xe,!0);else if(Nt==="MultiPolygon")for(const sr of zt){const dr=[];_t(sr,dr,we,Re,Xe,!0),dr.length&&In.push(dr)}if(In.length){if(vt.lineMetrics&&Nt==="LineString"){for(const sr of In)st.push(ht(kt.id,Nt,sr,kt.tags));continue}Nt!=="LineString"&&Nt!=="MultiLineString"||(In.length===1?(Nt="LineString",In=In[0]):Nt="MultiLineString"),Nt!=="Point"&&Nt!=="MultiPoint"||(Nt=In.length===3?"Point":"MultiPoint"),st.push(ht(kt.id,Nt,In,kt.tags))}}return st.length?st:null}function tn(yt,ue,we,Re,Xe){for(let Ue=0;Ue<yt.length;Ue+=3){const it=yt[Ue+Xe];it>=we&&it<=Re&&wt(ue,yt[Ue],yt[Ue+1],yt[Ue+2])}}function on(yt,ue,we,Re,Xe,Ue,it){let vt=vn(yt);const st=Xe===0?Ve:qe;let kt,zt,Nt=yt.start;for(let dr=0;dr<yt.length-3;dr+=3){const hr=yt[dr],gr=yt[dr+1],Ai=yt[dr+2],Gi=yt[dr+3],Sr=yt[dr+4],ni=Xe===0?hr:gr,ri=Xe===0?Gi:Sr;let li=!1;it&&(kt=Math.sqrt(Math.pow(hr-Gi,2)+Math.pow(gr-Sr,2))),ni<we?ri>we&&(zt=st(vt,hr,gr,Gi,Sr,we),it&&(vt.start=Nt+kt*zt)):ni>Re?ri<Re&&(zt=st(vt,hr,gr,Gi,Sr,Re),it&&(vt.start=Nt+kt*zt)):wt(vt,hr,gr,Ai),ri<we&&ni>=we&&(zt=st(vt,hr,gr,Gi,Sr,we),li=!0),ri>Re&&ni<=Re&&(zt=st(vt,hr,gr,Gi,Sr,Re),li=!0),!Ue&&li&&(it&&(vt.end=Nt+kt*zt),ue.push(vt),vt=vn(yt)),it&&(Nt+=kt)}let un=yt.length-3;const Tn=yt[un],In=yt[un+1],sr=Xe===0?Tn:In;sr>=we&&sr<=Re&&wt(vt,Tn,In,yt[un+2]),un=vt.length-3,Ue&&un>=3&&(vt[un]!==vt[0]||vt[un+1]!==vt[1])&&wt(vt,vt[0],vt[1],vt[2]),vt.length&&ue.push(vt)}function vn(yt){const ue=[];return ue.size=yt.size,ue.start=yt.start,ue.end=yt.end,ue}function _t(yt,ue,we,Re,Xe,Ue){for(const it of yt)on(it,ue,we,Re,Xe,Ue,!1)}function wt(yt,ue,we,Re){yt.push(ue,we,Re)}function Ve(yt,ue,we,Re,Xe,Ue){const it=(Ue-ue)/(Re-ue);return wt(yt,Ue,we+(Xe-we)*it,1),it}function qe(yt,ue,we,Re,Xe,Ue){const it=(Ue-we)/(Xe-we);return wt(yt,ue+(Re-ue)*it,Ue,1),it}function Pt(yt,ue){const we=[];for(let Re=0;Re<yt.length;Re++){const Xe=yt[Re],Ue=Xe.type;let it;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")it=Qt(Xe.geometry,ue);else if(Ue==="MultiLineString"||Ue==="Polygon"){it=[];for(const vt of Xe.geometry)it.push(Qt(vt,ue))}else if(Ue==="MultiPolygon"){it=[];for(const vt of Xe.geometry){const st=[];for(const kt of vt)st.push(Qt(kt,ue));it.push(st)}}we.push(ht(Xe.id,Ue,it,Xe.tags))}return we}function Qt(yt,ue){const we=[];we.size=yt.size,yt.start!==void 0&&(we.start=yt.start,we.end=yt.end);for(let Re=0;Re<yt.length;Re+=3)we.push(yt[Re]+ue,yt[Re+1],yt[Re+2]);return we}function cn(yt,ue){if(yt.transformed)return yt;const we=1<<yt.z,Re=yt.x,Xe=yt.y;for(const Ue of yt.features){const it=Ue.geometry,vt=Ue.type;if(Ue.geometry=[],vt===1)for(let st=0;st<it.length;st+=2)Ue.geometry.push(dn(it[st],it[st+1],ue,we,Re,Xe));else for(let st=0;st<it.length;st++){const kt=[];for(let zt=0;zt<it[st].length;zt+=2)kt.push(dn(it[st][zt],it[st][zt+1],ue,we,Re,Xe));Ue.geometry.push(kt)}}return yt.transformed=!0,yt}function dn(yt,ue,we,Re,Xe,Ue){return[Math.round(we*(yt*Re-Xe)),Math.round(we*(ue*Re-Ue))]}function Te(yt,ue,we,Re,Xe){const Ue=ue===Xe.maxZoom?0:Xe.tolerance/((1<<ue)*Xe.extent),it={features:[],numPoints:0,numSimplified:0,numFeatures:yt.length,source:null,x:we,y:Re,z:ue,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const vt of yt)ye(it,vt,Ue,Xe);return it}function ye(yt,ue,we,Re){const Xe=ue.geometry,Ue=ue.type,it=[];if(yt.minX=Math.min(yt.minX,ue.minX),yt.minY=Math.min(yt.minY,ue.minY),yt.maxX=Math.max(yt.maxX,ue.maxX),yt.maxY=Math.max(yt.maxY,ue.maxY),Ue==="Point"||Ue==="MultiPoint")for(let vt=0;vt<Xe.length;vt+=3)it.push(Xe[vt],Xe[vt+1]),yt.numPoints++,yt.numSimplified++;else if(Ue==="LineString")We(it,Xe,yt,we,!1,!1);else if(Ue==="MultiLineString"||Ue==="Polygon")for(let vt=0;vt<Xe.length;vt++)We(it,Xe[vt],yt,we,Ue==="Polygon",vt===0);else if(Ue==="MultiPolygon")for(let vt=0;vt<Xe.length;vt++){const st=Xe[vt];for(let kt=0;kt<st.length;kt++)We(it,st[kt],yt,we,!0,kt===0)}if(it.length){let vt=ue.tags||null;if(Ue==="LineString"&&Re.lineMetrics){vt={};for(const kt in ue.tags)vt[kt]=ue.tags[kt];vt.mapbox_clip_start=Xe.start/Xe.size,vt.mapbox_clip_end=Xe.end/Xe.size}const st={geometry:it,type:Ue==="Polygon"||Ue==="MultiPolygon"?3:Ue==="LineString"||Ue==="MultiLineString"?2:1,tags:vt};ue.id!==null&&(st.id=ue.id),yt.features.push(st)}}function We(yt,ue,we,Re,Xe,Ue){const it=Re*Re;if(Re>0&&ue.size<(Xe?it:Re))return void(we.numPoints+=ue.length/3);const vt=[];for(let st=0;st<ue.length;st+=3)(Re===0||ue[st+2]>it)&&(we.numSimplified++,vt.push(ue[st],ue[st+1])),we.numPoints++;Xe&&(function(st,kt){let zt=0;for(let Nt=0,un=st.length,Tn=un-2;Nt<un;Tn=Nt,Nt+=2)zt+=(st[Nt]-st[Tn])*(st[Nt+1]+st[Tn+1]);if(zt>0===kt)for(let Nt=0,un=st.length;Nt<un/2;Nt+=2){const Tn=st[Nt],In=st[Nt+1];st[Nt]=st[un-2-Nt],st[Nt+1]=st[un-1-Nt],st[un-2-Nt]=Tn,st[un-1-Nt]=In}})(vt,Ue),yt.push(vt)}const ot={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class At{constructor(ue,we){const Re=(we=this.options=(function(Ue,it){for(const vt in it)Ue[vt]=it[vt];return Ue})(Object.create(ot),we)).debug;if(Re&&console.time("preprocess data"),we.maxZoom<0||we.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(we.promoteId&&we.generateId)throw new Error("promoteId and generateId cannot be used together.");let Xe=(function(Ue,it){const vt=[];if(Ue.type==="FeatureCollection")for(let st=0;st<Ue.features.length;st++)Rt(vt,Ue.features[st],it,st);else Rt(vt,Ue.type==="Feature"?Ue:{geometry:Ue},it);return vt})(ue,we);this.tiles={},this.tileCoords=[],Re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",we.indexMaxZoom,we.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Xe=(function(Ue,it){const vt=it.buffer/it.extent;let st=Ue;const kt=Mt(Ue,1,-1-vt,vt,0,-1,2,it),zt=Mt(Ue,1,1-vt,2+vt,0,-1,2,it);return(kt||zt)&&(st=Mt(Ue,1,-vt,1+vt,0,-1,2,it)||[],kt&&(st=Pt(kt,1).concat(st)),zt&&(st=st.concat(Pt(zt,-1)))),st})(Xe,we),Xe.length&&this.splitTile(Xe,0,0,0),Re&&(Xe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ue,we,Re,Xe,Ue,it,vt){const st=[ue,we,Re,Xe],kt=this.options,zt=kt.debug;for(;st.length;){Xe=st.pop(),Re=st.pop(),we=st.pop(),ue=st.pop();const Nt=1<<we,un=Vt(we,Re,Xe);let Tn=this.tiles[un];if(!Tn&&(zt>1&&console.time("creation"),Tn=this.tiles[un]=Te(ue,we,Re,Xe,kt),this.tileCoords.push({z:we,x:Re,y:Xe}),zt)){zt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",we,Re,Xe,Tn.numFeatures,Tn.numPoints,Tn.numSimplified),console.timeEnd("creation"));const li=`z${we}`;this.stats[li]=(this.stats[li]||0)+1,this.total++}if(Tn.source=ue,Ue==null){if(we===kt.indexMaxZoom||Tn.numPoints<=kt.indexMaxPoints)continue}else{if(we===kt.maxZoom||we===Ue)continue;if(Ue!=null){const li=Ue-we;if(Re!==it>>li||Xe!==vt>>li)continue}}if(Tn.source=null,ue.length===0)continue;zt>1&&console.time("clipping");const In=.5*kt.buffer/kt.extent,sr=.5-In,dr=.5+In,hr=1+In;let gr=null,Ai=null,Gi=null,Sr=null,ni=Mt(ue,Nt,Re-In,Re+dr,0,Tn.minX,Tn.maxX,kt),ri=Mt(ue,Nt,Re+sr,Re+hr,0,Tn.minX,Tn.maxX,kt);ue=null,ni&&(gr=Mt(ni,Nt,Xe-In,Xe+dr,1,Tn.minY,Tn.maxY,kt),Ai=Mt(ni,Nt,Xe+sr,Xe+hr,1,Tn.minY,Tn.maxY,kt),ni=null),ri&&(Gi=Mt(ri,Nt,Xe-In,Xe+dr,1,Tn.minY,Tn.maxY,kt),Sr=Mt(ri,Nt,Xe+sr,Xe+hr,1,Tn.minY,Tn.maxY,kt),ri=null),zt>1&&console.timeEnd("clipping"),st.push(gr||[],we+1,2*Re,2*Xe),st.push(Ai||[],we+1,2*Re,2*Xe+1),st.push(Gi||[],we+1,2*Re+1,2*Xe),st.push(Sr||[],we+1,2*Re+1,2*Xe+1)}}getTile(ue,we,Re){ue=+ue,we=+we,Re=+Re;const Xe=this.options,{extent:Ue,debug:it}=Xe;if(ue<0||ue>24)return null;const vt=1<<ue,st=Vt(ue,we=we+vt&vt-1,Re);if(this.tiles[st])return cn(this.tiles[st],Ue);it>1&&console.log("drilling down to z%d-%d-%d",ue,we,Re);let kt,zt=ue,Nt=we,un=Re;for(;!kt&&zt>0;)zt--,Nt>>=1,un>>=1,kt=this.tiles[Vt(zt,Nt,un)];return kt&&kt.source?(it>1&&(console.log("found parent tile z%d-%d-%d",zt,Nt,un),console.time("drilling down")),this.splitTile(kt.source,zt,Nt,un,ue,we,Re),it>1&&console.timeEnd("drilling down"),this.tiles[st]?cn(this.tiles[st],Ue):null):null}}function Vt(yt,ue,we){return 32*((1<<yt)*we+ue)+yt}function an(yt,ue){const we=yt.tileID.canonical;if(!this._geoJSONIndex)return void ue(null,null);const Re=this._geoJSONIndex.getTile(we.z,we.x,we.y);if(!Re)return void ue(null,null);const Xe=new le(Re.features);let Ue=Ft(Xe);Ue.byteOffset===0&&Ue.byteLength===Ue.buffer.byteLength||(Ue=new Uint8Array(Ue)),ue(null,{vectorTile:Xe,rawData:Ue.buffer})}class xn extends j{constructor(ue,we,Re,Xe,Ue,it){super(ue,we,Re,Xe,an,it),Ue&&(this.loadGeoJSON=Ue),this._dynamicIndex=new se}loadData(ue,we){const Re=ue&&ue.request,Xe=Re&&Re.collectResourceTiming;this.loadGeoJSON(ue,((Ue,it)=>{if(Ue||!it)return we(Ue);if(typeof it!="object")return we(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`));{try{if(ue.filter){const st=i.X(ue.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(st.result==="error")throw new Error(st.value.map((kt=>`${kt.key}: ${kt.message}`)).join(", "));it.features=it.features.filter((kt=>st.value.evaluate({zoom:0},kt)))}ue.dynamic?(it.type==="Feature"&&(it={type:"FeatureCollection",features:[it]}),ue.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(it.features,this.loaded),ue.cluster&&(it.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=ue.cluster?new Kt((function({superclusterOptions:st,clusterProperties:kt}){if(!kt||!st)return st;const zt={},Nt={},un={accumulated:null,zoom:0},Tn={properties:null},In=Object.keys(kt);for(const sr of In){const[dr,hr]=kt[sr],gr=i.X(hr),Ai=i.X(typeof dr=="string"?[dr,["accumulated"],["get",sr]]:dr);zt[sr]=gr.value,Nt[sr]=Ai.value}return st.map=sr=>{Tn.properties=sr;const dr={};for(const hr of In)dr[hr]=zt[hr].evaluate(un,Tn);return dr},st.reduce=(sr,dr)=>{Tn.properties=dr;for(const hr of In)un.accumulated=sr[hr],sr[hr]=Nt[hr].evaluate(un,Tn)},st})(ue)).load(it.features):ue.dynamic?this._dynamicIndex:(function(st,kt){return new At(st,kt)})(it,ue.geojsonVtOptions)}catch(st){return we(st)}const vt={};if(Xe){const st=f(Re);st&&(vt.resourceTiming={},vt.resourceTiming[ue.source]=JSON.parse(JSON.stringify(st)))}we(null,vt)}}))}reloadTile(ue,we){const Re=this.loaded;return Re&&Re[ue.uid]?ue.partial?we(null,void 0):super.reloadTile(ue,we):this.loadTile(ue,we)}loadGeoJSON(ue,we){if(ue.request)i.n(ue.request,we);else{if(typeof ue.data!="string")return we(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`));try{return we(null,JSON.parse(ue.data))}catch{return we(new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ue,we){try{we(null,this._geoJSONIndex.getClusterExpansionZoom(ue.clusterId))}catch(Re){we(Re)}}getClusterChildren(ue,we){try{we(null,this._geoJSONIndex.getChildren(ue.clusterId))}catch(Re){we(Re)}}getClusterLeaves(ue,we){try{we(null,this._geoJSONIndex.getLeaves(ue.clusterId,ue.limit,ue.offset))}catch(Re){we(Re)}}}class Hn{constructor(ue,we){this.tileID=new i.aH(ue.tileID.overscaledZ,ue.tileID.wrap,ue.tileID.canonical.z,ue.tileID.canonical.x,ue.tileID.canonical.y),this.tileZoom=ue.tileZoom,this.uid=ue.uid,this.zoom=ue.zoom,this.canonical=ue.tileID.canonical,this.pixelRatio=ue.pixelRatio,this.tileSize=ue.tileSize,this.source=ue.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=ue.projection,this.brightness=we}parse(ue,we,Re,Xe){this.status="parsing";const Ue=new i.aH(Re.tileID.overscaledZ,Re.tileID.wrap,Re.tileID.canonical.z,Re.tileID.canonical.x,Re.tileID.canonical.y),it=[],vt=we.familiesBySource[Re.source],st=new i.e0(Ue,Re.promoteId);return st.bucketLayerIDs=[],st.is3DTile=!0,i.ei(ue).then((kt=>{if(!kt)return Xe(new Error("Could not parse tile"));const zt=i.ej(kt,1/i.cd(Re.tileID.canonical)),Nt=kt.json.extensionsUsed&&kt.json.extensionsUsed.includes("MAPBOX_mesh_features")||kt.json.asset.extras&&kt.json.asset.extras.MAPBOX_mesh_features,un=kt.json.extensionsUsed&&kt.json.extensionsUsed.includes("EXT_meshopt_compression"),Tn=new i.aa(this.zoom,{brightness:this.brightness});for(const In in vt)for(const sr of vt[In]){const dr=sr[0];st.bucketLayerIDs.push(sr.map((gr=>i.C(gr.id,gr.scope)))),dr.recalculate(Tn,[]);const hr=new i.ek(sr,zt,Ue,Nt,un,this.brightness,st);Nt||(hr.needsUpload=!0),it.push(hr),hr.evaluate(dr)}this.status="done",Xe(null,{buckets:it,featureIndex:st,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})})).catch((kt=>Xe(new Error(kt.message))))}}class Gn{constructor(ue,we,Re,Xe,Ue,it){this.actor=ue,this.layerIndex=we,this.availableImages=Re,this.brightness=it,this.loading={},this.loaded={}}loadTile(ue,we){const Re=ue.uid,Xe=this.loading[Re]=new Hn(ue,this.brightness);i.bj(ue.request,((Ue,it)=>{const vt=!this.loading[Re];return delete this.loading[Re],vt||Ue?(Xe.status="done",vt||(this.loaded[Re]=Xe),we(Ue)):it&&it.byteLength!==0?void Xe.parse(it,this.layerIndex,ue,((st,kt)=>{Xe.status="done",this.loaded=this.loaded||{},this.loaded[Re]=Xe,st||!kt?we(st):we(null,kt)})):(Xe.status="done",this.loaded[Re]=Xe,we())}))}reloadTile(ue,we){const Re=this.loaded,Xe=ue.uid;if(Re&&Re[Xe]){const Ue=Re[Xe];Ue.projection=ue.projection,Ue.brightness=ue.brightness;const it=(vt,st)=>{Ue.reloadCallback&&(delete Ue.reloadCallback,this.loadTile(ue,we)),we(vt,st)};Ue.status==="parsing"?Ue.reloadCallback=it:Ue.status==="done"&&this.loadTile(ue,we)}}abortTile(ue,we){const Re=ue.uid;this.loading[Re]&&delete this.loading[Re],we()}removeTile(ue,we){const Re=this.loaded,Xe=ue.uid;Re&&Re[Xe]&&delete Re[Xe],we()}}class cr{constructor(ue){this.self=ue,this.actor=new i.el(ue,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.imageRasterizer=new i.y,this.projections={},this.defaultProjection=i.bP({name:"mercator"}),this.workerSourceTypes={vector:j,geojson:xn,"raster-dem":V,"raster-array":te,"batched-model":Gn},this.workerSources={},this.self.registerWorkerSource=(we,Re)=>{if(this.workerSourceTypes[we])throw new Error(`Worker source with name "${we}" already registered.`);this.workerSourceTypes[we]=Re},this.self.registerRTLTextPlugin=we=>{if(i.em.isParsed())throw new Error("RTL text plugin already registered.");i.em.applyArabicShaping=we.applyArabicShaping,i.em.processBidirectionalText=we.processBidirectionalText,i.em.processStyledBidirectionalText=we.processStyledBidirectionalText}}clearCaches(ue,we,Re){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],Re()}checkIfReady(ue,we,Re){Re()}setReferrer(ue,we){this.referrer=we}spriteLoaded(ue,{scope:we,isLoaded:Re}){if(this.isSpriteLoaded[ue]||(this.isSpriteLoaded[ue]={}),this.isSpriteLoaded[ue][we]=Re,this.workerSources[ue]&&this.workerSources[ue][we])for(const Xe in this.workerSources[ue][we]){const Ue=this.workerSources[ue][we][Xe];for(const it in Ue){const vt=Ue[it];vt instanceof j&&(vt.isSpriteLoaded=Re,vt.fire(new i.A("isSpriteLoaded")))}}}setImages(ue,{scope:we,images:Re},Xe){if(this.availableImages[ue]||(this.availableImages[ue]={}),this.availableImages[ue][we]=Re,this.workerSources[ue]&&this.workerSources[ue][we]){for(const Ue in this.workerSources[ue][we]){const it=this.workerSources[ue][we][Ue];for(const vt in it)it[vt].availableImages=Re}Xe()}else Xe()}setProjection(ue,we){this.projections[ue]=i.bP(we)}setBrightness(ue,we,Re){this.brightness=we,Re()}setLayers(ue,we,Re){this.getLayerIndex(ue,we.scope).replace(we.layers,we.options),Re()}updateLayers(ue,we,Re){this.getLayerIndex(ue,we.scope).update(we.layers,we.removedIds,we.options),Re()}loadTile(ue,we,Re){we.projection=this.projections[ue]||this.defaultProjection,this.getWorkerSource(ue,we.type,we.source,we.scope).loadTile(we,Re)}decodeRasterArray(ue,we,Re){this.getWorkerSource(ue,we.type,we.source,we.scope).decodeRasterArray(we,Re)}reloadTile(ue,we,Re){we.projection=this.projections[ue]||this.defaultProjection,this.getWorkerSource(ue,we.type,we.source,we.scope).reloadTile(we,Re)}abortTile(ue,we,Re){this.getWorkerSource(ue,we.type,we.source,we.scope).abortTile(we,Re)}removeTile(ue,we,Re){this.getWorkerSource(ue,we.type,we.source,we.scope).removeTile(we,Re)}removeSource(ue,we,Re){if(!(this.workerSources[ue]&&this.workerSources[ue][we.scope]&&this.workerSources[ue][we.scope][we.type]&&this.workerSources[ue][we.scope][we.type][we.source]))return;const Xe=this.workerSources[ue][we.scope][we.type][we.source];delete this.workerSources[ue][we.scope][we.type][we.source],Xe.removeSource!==void 0?Xe.removeSource(we,Re):Re()}loadWorkerSource(ue,we,Re){try{this.self.importScripts(we.url),Re()}catch(Xe){Re(Xe.toString())}}syncRTLPluginState(ue,we,Re){try{i.em.setState(we);const Xe=i.em.getPluginURL();if(i.em.isLoaded()&&!i.em.isParsed()&&Xe!=null){this.self.importScripts(Xe);const Ue=i.em.isParsed();Re(Ue?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Xe}`),Ue)}}catch(Xe){Re(Xe.toString())}}setDracoUrl(ue,we){this.dracoUrl=we}getAvailableImages(ue,we){this.availableImages[ue]||(this.availableImages[ue]={});let Re=this.availableImages[ue][we];return Re||(Re=[]),Re}getLayerIndex(ue,we){this.layerIndexes[ue]||(this.layerIndexes[ue]={});let Re=this.layerIndexes[ue][we];return Re||(Re=this.layerIndexes[ue][we]=new w,Re.scope=we),Re}getWorkerSource(ue,we,Re,Xe){const Ue=this.workerSources;return Ue[ue]||(Ue[ue]={}),Ue[ue][Xe]||(Ue[ue][Xe]={}),Ue[ue][Xe][we]||(Ue[ue][Xe][we]={}),this.isSpriteLoaded[ue]||(this.isSpriteLoaded[ue]={}),Ue[ue][Xe][we][Re]||(Ue[ue][Xe][we][Re]=new this.workerSourceTypes[we]({send:(it,vt,st,kt,zt,Nt)=>{this.actor.send(it,vt,st,ue,zt,Nt)},scheduler:this.actor.scheduler},this.getLayerIndex(ue,Xe),this.getAvailableImages(ue,Xe),this.isSpriteLoaded[ue][Xe],void 0,this.brightness)),Ue[ue][Xe][we][Re]}rasterizeImages(ue,we,Re){const Xe=new Map;for(const[Ue,{image:it,imageVariant:vt}]of we.tasks.entries()){const st=this.imageRasterizer.rasterize(vt,it,we.scope,ue);Xe.set(Ue,st)}Re(void 0,Xe)}removeRasterizedImages(ue,we,Re){this.imageRasterizer.removeImagesFromCacheByIds(we.imageIds,we.scope,ue),Re()}enforceCacheSizeLimit(ue,we){i.en(we)}getWorkerPerformanceMetrics(ue,we,Re){Re(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new cr(self)),cr})),o(["./shared"],(function(i){var f="3.11.1";const g={create:"create",load:"load",fullLoad:"fullLoad"},x={mark(v){performance.mark(v)},measure(v,l,d){performance.measure(v,l,d)}};function w(v){const l=v.name.split("?")[0];return i.a(l)&&l.includes("mapbox-gl.js")?"javascript":i.a(l)&&l.includes("mapbox-gl.css")?"css":i.b(l)?"fontRange":i.c(l)?"sprite":i.i(l)?"style":i.d(l)?"tilejson":"other"}var A,C={},F=(function(){if(A)return C;function v(y){return!l(y)}function l(y){return typeof window>"u"||typeof document>"u"?"not a browser":(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var T,I,N=new Blob([""],{type:"text/javascript"}),$=URL.createObjectURL(N);try{I=new Worker($),T=!0}catch{T=!1}return I&&I.terminate(),URL.revokeObjectURL($),T})()?(function(){var T=document.createElement("canvas");T.width=T.height=1;var I=T.getContext("2d");if(!I)return!1;var N=I.getImageData(0,0,1,1);return N&&N.width===T.width})()?(d[S=y&&y.failIfMajorPerformanceCaveat]===void 0&&(d[S]=(function(T){var I,N=(function($){var U=document.createElement("canvas"),H=Object.create(v.webGLContextAttributes);return H.failIfMajorPerformanceCaveat=$,U.getContext("webgl2",H)})(T);if(!N)return!1;try{I=N.createShader(N.VERTEX_SHADER)}catch{return!1}return!(!I||N.isContextLost())&&(N.shaderSource(I,"void main() {}"),N.compileShader(I),N.getShaderParameter(I,N.COMPILE_STATUS)===!0)})(S)),d[S]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var S}A=1,C.supported=v,C.notSupportedReason=l;var d={};return v.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},C})();function z(v,l,d){const y=document.createElement(v);return l!=null&&(y.className=l),d&&d.appendChild(y),y}function j(v,l,d){const y=document.createElementNS("http://www.w3.org/2000/svg",v);for(const S of Object.keys(l))y.setAttributeNS(null,S,String(l[S]));return d&&d.appendChild(y),y}const V=typeof document<"u"?document.documentElement&&document.documentElement.style:null,Y=V&&V.userSelect!==void 0?"userSelect":"WebkitUserSelect";let te;function J(){V&&Y&&(te=V[Y],V[Y]="none")}function ee(){V&&Y&&(V[Y]=te)}function le(v){v.preventDefault(),v.stopPropagation(),window.removeEventListener("click",le,!0)}function oe(){window.addEventListener("click",le,!0),window.setTimeout((()=>{window.removeEventListener("click",le,!0)}),0)}function ve(v,l){const d=v.getBoundingClientRect();return pe(v,d,l)}function se(v,l){const d=v.getBoundingClientRect(),y=[];for(let S=0;S<l.length;S++)y.push(pe(v,d,l[S]));return y}function ie(v){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&v.button===2&&v.ctrlKey?0:v.button}function pe(v,l,d){const y=v.offsetWidth===l.width?1:v.offsetWidth/l.width;return new i.P((d.clientX-l.left)*y,(d.clientY-l.top)*y)}const be="01",Se="NO_ACCESS_TOKEN";class Ce{constructor(l,d,y){this._transformRequestFn=l,this._customAccessToken=d,this._silenceAuthErrors=!!y,this._createSkuToken()}_createSkuToken(){const l=(function(){let d="";for(let y=0;y<10;y++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",be,d].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,d){return this._transformRequestFn&&this._transformRequestFn(l,d)||{url:l}}normalizeStyleURL(l,d){if(!i.f(l))return l;const y=xe(l);return y.params.push(`sdk=js-${f}`),y.path=`/styles/v1${y.path}`,this._makeAPIURL(y,this._customAccessToken||d)}normalizeGlyphsURL(l,d){if(!i.f(l))return l;const y=xe(l);return y.path=`/fonts/v1${y.path}`,this._makeAPIURL(y,this._customAccessToken||d)}normalizeModelURL(l,d){if(!i.f(l))return l;const y=xe(l);return y.path=`/models/v1${y.path}`,this._makeAPIURL(y,this._customAccessToken||d)}normalizeSourceURL(l,d,y,S){if(!i.f(l))return l;const T=xe(l);return T.path=`/v4/${T.authority}.json`,T.params.push("secure"),y&&T.params.push(`language=${y}`),S&&T.params.push(`worldview=${S}`),this._makeAPIURL(T,this._customAccessToken||d)}normalizeIconsetURL(l,d){const y=xe(l);return i.f(l)?(y.path=`/styles/v1${y.path}/iconset.pbf`,this._makeAPIURL(y,this._customAccessToken||d)):ke(y)}normalizeSpriteURL(l,d,y,S){const T=xe(l);return i.f(l)?(T.path=`/styles/v1${T.path}/sprite${d}${y}`,this._makeAPIURL(T,this._customAccessToken||S)):(T.path+=`${d}${y}`,ke(T))}normalizeTileURL(l,d,y){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!i.f(l))return l;const S=xe(l);S.path=S.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${d||y&&S.authority!=="raster"&&y===512?"@2x":""}${i.m.supported?".webp":"$1"}`),S.authority==="raster"?S.path=`/${i.e.RASTER_URL_PREFIX}${S.path}`:S.authority==="rasterarrays"?S.path=`/${i.e.RASTERARRAYS_URL_PREFIX}${S.path}`:S.authority==="3dtiles"?S.path=`/${i.e.TILES3D_URL_PREFIX}${S.path}`:(S.path=S.path.replace(/^.+\/v4\//,"/"),S.path=`/${i.e.TILE_URL_VERSION}${S.path}`);const T=this._customAccessToken||(function(I){for(const N of I){const $=N.match(/^access_token=(.*)$/);if($)return $[1]}return null})(S.params)||i.e.ACCESS_TOKEN;return i.e.REQUIRE_ACCESS_TOKEN&&T&&this._skuToken&&S.params.push(`sku=${this._skuToken}`),this._makeAPIURL(S,T)}canonicalizeTileURL(l,d){const y=xe(l);if(!y.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!y.path.match(/\.[\w]+$/))return l;let S="mapbox://";y.path.match(/^\/raster\/v1\//)?S+=`raster/${y.path.replace(`/${i.e.RASTER_URL_PREFIX}/`,"")}`:y.path.match(/^\/rasterarrays\/v1\//)?S+=`rasterarrays/${y.path.replace(`/${i.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:S+=`tiles/${y.path.replace(`/${i.e.TILE_URL_VERSION}/`,"")}`;let T=y.params;return d&&(T=T.filter((I=>!I.match(/^access_token=/)))),T.length&&(S+=`?${T.join("&")}`),S}canonicalizeTileset(l,d){const y=!!d&&i.f(d),S=[];for(const T of l.tiles||[])i.h(T)?S.push(this.canonicalizeTileURL(T,y)):S.push(T);return S}_makeAPIURL(l,d){const y="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",S=xe(i.e.API_URL);if(l.protocol=S.protocol,l.authority=S.authority,l.protocol==="http"){const T=l.params.indexOf("secure");T>=0&&l.params.splice(T,1)}if(S.path!=="/"&&(l.path=`${S.path}${l.path}`),!i.e.REQUIRE_ACCESS_TOKEN)return ke(l);if(d=d||i.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!d)throw new Error(`An API access token is required to use Mapbox GL. ${y}`);if(d[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${y}`)}return l.params=l.params.filter((T=>T.indexOf("access_token")===-1)),l.params.push(`access_token=${d||""}`),ke(l)}}const Ee=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function xe(v){const l=v.match(Ee);if(!l)throw new Error("Unable to parse URL object");return{protocol:l[1],authority:l[2],path:l[3]||"/",params:l[4]?l[4].split("&"):[]}}function ke(v){const l=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${l}`}const He="mapbox.eventData";function Ke(v){if(!v)return null;const l=v.split(".");if(!l||l.length!==3)return null;try{return JSON.parse(i.j(l[1]))}catch{return null}}class Ge{constructor(l){this.type=l,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(l){const d=Ke(i.e.ACCESS_TOKEN);let y="";return y=d&&d.u?i.k(d.u):i.e.ACCESS_TOKEN||"",l?`${He}.${l}:${y}`:`${He}:${y}`}fetchEventData(){const l=i.s("localStorage"),d=this.getStorageKey(),y=this.getStorageKey("uuid");if(l)try{const S=localStorage.getItem(d);S&&(this.eventData=JSON.parse(S));const T=localStorage.getItem(y);T&&(this.anonId=T)}catch{i.w("Unable to read from LocalStorage")}}saveEventData(){const l=i.s("localStorage"),d=this.getStorageKey(),y=this.getStorageKey("uuid"),S=this.anonId;if(l&&S)try{localStorage.setItem(y,S),Object.keys(this.eventData).length>=1&&localStorage.setItem(d,JSON.stringify(this.eventData))}catch{i.w("Unable to write to LocalStorage")}}processRequests(l){}postEvent(l,d,y,S){if(!i.e.EVENTS_URL)return;const T=xe(i.e.EVENTS_URL);T.params.push(`access_token=${S||i.e.ACCESS_TOKEN||""}`);const I={event:this.type,created:new Date(l).toISOString()},N=d?i.l(I,d):I,$={url:ke(T),headers:{"Content-Type":"text/plain"},body:JSON.stringify([N])};this.pendingRequest=i.p($,(U=>{this.pendingRequest=null,y(U),this.saveEventData(),this.processRequests(S)}))}queueRequest(l,d){this.queue.push(l),this.processRequests(d)}}const $t=new class extends Ge{constructor(v){super("appUserTurnstile"),this._customAccessToken=v}postTurnstileEvent(v,l){i.e.EVENTS_URL&&i.e.ACCESS_TOKEN&&Array.isArray(v)&&v.some((d=>i.f(d)||i.h(d)))&&this.queueRequest(Date.now(),l)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const l=Ke(i.e.ACCESS_TOKEN),d=l?l.u:i.e.ACCESS_TOKEN;let y=d!==this.eventData.tokenU;i.v(this.anonId)||(this.anonId=i.u(),y=!0);const S=this.queue.shift();if(this.eventData.lastSuccess){const T=new Date(this.eventData.lastSuccess),I=new Date(S),N=(S-this.eventData.lastSuccess)/864e5;y=y||N>=1||N<-1||T.getDate()!==I.getDate()}else y=!0;y?this.postEvent(S,{sdkIdentifier:"mapbox-gl-js",sdkVersion:f,skuId:be,"enabled.telemetry":!1,userId:this.anonId},(T=>{T||(this.eventData.lastSuccess=S,this.eventData.tokenU=d)}),v):this.processRequests()}},Ft=$t.postTurnstileEvent.bind($t),Lt=new class extends Ge{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(v,l,d,y){this.skuToken=l,this.errorCb=y,i.e.EVENTS_URL&&(d||i.e.ACCESS_TOKEN?this.queueRequest({id:v,timestamp:Date.now()},d):this.errorCb(new Error(Se)))}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:d}=this.queue.shift();l&&this.success[l]||(this.anonId||this.fetchEventData(),i.v(this.anonId)||(this.anonId=i.u()),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:f,skuId:be,skuToken:this.skuToken,userId:this.anonId},(y=>{y?this.errorCb(y):l&&(this.success[l]=!0)}),v))}remove(){this.errorCb=null}},nn=Lt.postMapLoadEvent.bind(Lt),mn=new class extends Ge{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(v){let l=this.mapInstanceIdMap.get(v);return l||(l=i.u(),this.mapInstanceIdMap.set(v,l)),l}getEventId(v){const l=this.eventIdPerMapInstanceMap.get(v)||0;return this.eventIdPerMapInstanceMap.set(v,l+1),l}postStyleLoadEvent(v,l){const{map:d,style:y,importedStyles:S}=l;if(!i.e.EVENTS_URL||!v&&!i.e.ACCESS_TOKEN)return;const T=this.getMapInstanceId(d),I={mapInstanceId:T,eventId:this.getEventId(T),style:y};S.length&&(I.importedStyles=S),this.queueRequest({timestamp:Date.now(),payload:I},v)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,payload:d}=this.queue.shift();this.postEvent(l,d,(()=>{}),v)}},Xt=mn.postStyleLoadEvent.bind(mn),mt=new class extends Ge{constructor(){super("gljs.performance")}postPerformanceEvent(v,l){i.e.EVENTS_URL&&(v||i.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:l},v)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,performanceData:d}=this.queue.shift(),y=(function(S){const T=performance.getEntriesByType("resource"),I=performance.getEntriesByType("mark"),N=(function(ne){const de={};if(ne){for(const ae in ne)if(ae!=="other")for(const he of ne[ae]){const me=`${ae}ResolveRangeMin`,Ie=`${ae}ResolveRangeMax`,Le=`${ae}RequestCount`,De=`${ae}RequestCachedCount`;de[me]=Math.min(de[me]||1/0,he.startTime),de[Ie]=Math.max(de[Ie]||-1/0,he.responseEnd);const Ye=Ne=>{de[Ne]===void 0&&(de[Ne]=0),++de[Ne]};he.transferSize!==void 0&&he.transferSize===0&&Ye(De),Ye(Le)}}return de})((function(ne,de){const ae={};if(ne)for(const he of ne){const me=de(he);ae[me]===void 0&&(ae[me]=[]),ae[me].push(he)}return ae})(T,w)),$=window.devicePixelRatio,U=navigator.connection||navigator.mozConnection||navigator.webkitConnection,H=U?U.effectiveType:void 0,X={counters:[],metadata:[],attributes:[]},q=(ne,de,ae)=>{ae!=null&&ne.push({name:de,value:ae.toString()})};for(const ne in N)q(X.counters,ne,N[ne]);if(S.interactionRange[0]!==1/0&&S.interactionRange[1]!==-1/0&&(q(X.counters,"interactionRangeMin",S.interactionRange[0]),q(X.counters,"interactionRangeMax",S.interactionRange[1])),I)for(const ne of Object.keys(g)){const de=g[ne],ae=I.find((he=>he.name===de));ae&&q(X.counters,de,ae.startTime)}return q(X.counters,"visibilityHidden",S.visibilityHidden),q(X.attributes,"style",(function(ne){if(ne)for(const de of ne){const ae=de.name.split("?")[0];if(i.i(ae)){const he=ae.split("/").slice(-2);if(he.length===2)return`mapbox://styles/${he[0]}/${he[1]}`}}})(T)),q(X.attributes,"terrainEnabled",S.terrainEnabled?"true":"false"),q(X.attributes,"fogEnabled",S.fogEnabled?"true":"false"),q(X.attributes,"projection",S.projection),q(X.attributes,"zoom",S.zoom),q(X.metadata,"devicePixelRatio",$),q(X.metadata,"connectionEffectiveType",H),q(X.metadata,"navigatorUserAgent",navigator.userAgent),q(X.metadata,"screenWidth",window.screen.width),q(X.metadata,"screenHeight",window.screen.height),q(X.metadata,"windowWidth",window.innerWidth),q(X.metadata,"windowHeight",window.innerHeight),q(X.metadata,"mapWidth",S.width/$),q(X.metadata,"mapHeight",S.height/$),q(X.metadata,"webglRenderer",S.renderer),q(X.metadata,"webglVendor",S.vendor),q(X.metadata,"sdkVersion",f),q(X.metadata,"sdkIdentifier","mapbox-gl-js"),X})(d);for(const S of y.metadata);for(const S of y.counters);for(const S of y.attributes);this.postEvent(l,y,(()=>{}),v)}},Jt=mt.postPerformanceEvent.bind(mt),Kt=new class extends Ge{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(v,l,d,y){if(!i.e.API_URL||!i.e.SESSION_PATH)return;const S=xe(i.e.API_URL+i.e.SESSION_PATH);S.params.push(`sku=${l||""}`),S.params.push(`access_token=${y||i.e.ACCESS_TOKEN||""}`);const T={url:ke(S),headers:{"Content-Type":"text/plain"}};this.pendingRequest=i.g(T,(I=>{this.pendingRequest=null,d(I),this.saveEventData(),this.processRequests(y)}))}getSessionAPI(v,l,d,y){this.skuToken=l,this.errorCb=y,i.e.SESSION_PATH&&i.e.API_URL&&(d||i.e.ACCESS_TOKEN?this.queueRequest({id:v,timestamp:Date.now()},d):this.errorCb(new Error(Se)))}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:d}=this.queue.shift();l&&this.success[l]||this.getSession(d,this.skuToken,(y=>{y?this.errorCb(y):l&&(this.success[l]=!0)}),v)}remove(){this.errorCb=null}},_e=Kt.getSessionAPI.bind(Kt),bn=new Set;function On(v,l){l?bn.add(v):bn.delete(v)}class je{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages={}}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(l,d){this._updatedSourceCaches[l]=d,this.setDirty()}discardSourceCacheUpdate(l){delete this._updatedSourceCaches[l]}updateLayer(l){const d=l.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(l.id),this.setDirty()}removeLayer(l){const d=l.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][l.id]=l,this._updatedLayers[d].delete(l.id),this._updatedPaintProps.delete(l.fqid),this.setDirty()}getRemovedLayer(l){return this._removedLayers[l.scope]?this._removedLayers[l.scope][l.id]:null}discardLayerRemoval(l){this._removedLayers[l.scope]&&delete this._removedLayers[l.scope][l.id]}getLayerUpdatesByScope(){const l={};for(const d in this._updatedLayers)l[d]=l[d]||{},l[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)l[d]=l[d]||{},l[d].removedIds=Object.keys(this._removedLayers[d]);return l}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(l){this._updatedPaintProps.add(l.fqid),this.setDirty()}getUpdatedImages(l){return this._updatedImages[l]?Array.from(this._updatedImages[l].values()):[]}updateImage(l,d){this._updatedImages[d]=this._updatedImages[d]||new Set,this._updatedImages[d].add(i.I.toString(l)),this.setDirty()}resetUpdatedImages(l){this._updatedImages[l]&&this._updatedImages[l].clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages={}}}function ge(v){const{userImage:l}=v;return!!(l&&l.render&&l.render())&&(v.data.replace(new Uint8Array(l.data.buffer)),!0)}class nt extends i.E{constructor(l){super(),this.imageProviders=new Map,this.images=new Map,this.updatedImages=new Map,this.callbackDispatchedThisFrame=new Map,this.loaded=new Map,this.requestors=[],this.patterns=new Map,this.patternsInFlight=new Set,this.atlasImage=new Map,this.atlasTexture=new Map,this.dirty=!0,this.spriteFormat=l,l!=="raster"&&i.t()&&(this.imageRasterizerDispatcher=new i.D(i.x(),this,"Image Rasterizer Worker",1))}addScope(l){this.loaded.set(l,!1),this.imageProviders.set(l,new Map),this.images.set(l,new Map),this.updatedImages.set(l,new Set),this.callbackDispatchedThisFrame.set(l,new Set),this.patterns.set(l,new Map),this.atlasImage.set(l,new i.r({width:1,height:1}))}removeScope(l){this.loaded.delete(l),this.imageProviders.delete(l),this.images.delete(l),this.updatedImages.delete(l),this.callbackDispatchedThisFrame.delete(l),this.patterns.delete(l),this.atlasImage.delete(l);const d=this.atlasTexture.get(l);d&&(d.destroy(),this.atlasTexture.delete(l))}addImageProvider(l,d){this.imageProviders.has(d)||this.imageProviders.set(d,new Map),this.imageProviders.get(d).set(l.id,l)}removeImageProvider(l,d){this.imageProviders.has(d)&&this.imageProviders.get(d).delete(l)}getPendingImageProviders(){const l=[];for(const d of this.imageProviders.values())for(const y of d.values())y.hasPendingRequests()&&l.push(y);return l}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new i.y),this._imageRasterizer}isLoaded(){for(const l of this.loaded.keys())if(!this.loaded.get(l))return!1;return!0}setLoaded(l,d){if(this.loaded.get(d)!==l&&(this.loaded.set(d,l),l)){for(const{ids:y,callback:S}of this.requestors)this._notify(y,d,S);this.requestors=[]}}hasImage(l,d){return!!this.getImage(l,d)}getImage(l,d){return this.images.get(d).get(l.toString())}addImage(l,d,y){this._validate(l,y)&&this.images.get(d).set(l.toString(),y)}_validate(l,d){let y=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new i.z(new Error(`Image "${l.name}" has invalid "stretchX" value`))),y=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new i.z(new Error(`Image "${l.name}" has invalid "stretchY" value`))),y=!1),this._validateContent(d.content,d)||(this.fire(new i.z(new Error(`Image "${l.name}" has invalid "content" value`))),y=!1),y}_validateStretch(l,d){if(!l)return!0;let y=0;for(const S of l){if(S[0]<y||S[1]<S[0]||d<S[1])return!1;y=S[1]}return!0}_validateContent(l,d){return l?l.length!==4||!d.usvg&&(l[0]<0||d.data.width<l[0]||l[1]<0||d.data.height<l[1]||l[2]<0||d.data.width<l[2]||l[3]<0||d.data.height<l[3])?!1:!(l[2]<l[0]||l[3]<l[1]):!0}updateImage(l,d,y){const S=this.images.get(d).get(l.toString());y.version=S.version+1,this.images.get(d).set(l.toString(),y),this.updatedImages.get(d).add(l),this.removeFromImageRasterizerCache(l,d)}clearUpdatedImages(l){this.updatedImages.get(l).clear()}removeFromImageRasterizerCache(l,d){if(this.spriteFormat!=="raster")if(i.t()){const y={imageIds:[l],scope:d};this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",y)}else this.imageRasterizer.removeImagesFromCacheByIds([l],d)}removeImage(l,d){const y=this.images.get(d),S=y.get(l.toString());y.delete(l.toString()),this.patterns.get(d).delete(l.toString()),this.removeFromImageRasterizerCache(l,d),S.userImage&&S.userImage.onRemove&&S.userImage.onRemove()}listImages(l){return Array.from(this.images.get(l).keys()).map((d=>i.I.from(d)))}getImages(l,d,y){const S=[],T=[],I=this.imageProviders.get(d);for(const H of l){if(!H.iconsetId){S.push(H);continue}const X=I.get(H.iconsetId);X&&(this.getImage(H,d)?T.push(H):X.addPendingRequest(H))}if(S.length===0)return void this._notify(T,d,y);let N=!0;const $=!!this.loaded.get(d),U=this.images.get(d);if(!$)for(const H of S)U.has(H.toString())||(N=!1);$||N?this._notify(S,d,y):this.requestors.push({ids:S,scope:d,callback:y})}rasterizeImages({scope:l,tasks:d},y){const S=new Map;for(const[T,I]of d.entries()){const N=this.getImage(I.id,l);N&&S.set(T,{image:N,imageVariant:I})}this._rasterizeImages(l,S,y)}_rasterizeImages(l,d,y){if(i.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImages",{tasks:d,scope:l},y);else{const S=new Map;for(const[T,{image:I,imageVariant:N}]of d.entries())S.set(T,this.imageRasterizer.rasterize(N,I,l,0));y(void 0,S)}}getUpdatedImages(l){return this.updatedImages.get(l)||new Set}_notify(l,d,y){const S=this.images.get(d),T=new Map;for(const I of l){const N=S.get(I.toString());if(!N){if(I.iconsetId)continue;i.w(`Image "${I.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`),this.fire(new i.A("styleimagemissing",{id:I.name}));continue}const $={data:N.usvg?null:N.data.clone(),pixelRatio:N.pixelRatio,sdf:N.sdf,usvg:N.usvg,version:N.version,stretchX:N.stretchX,stretchY:N.stretchY,content:N.content,hasRenderCallback:!!(N.userImage&&N.userImage.render)};N.usvg&&Object.assign($,{width:N.icon.usvg_tree.width,height:N.icon.usvg_tree.height}),T.set(i.I.toString(I),$)}y(null,T)}getPixelSize(l){const{width:d,height:y}=this.atlasImage.get(l);return{width:d,height:y}}getPattern(l,d,y){const S=l.toString(),T=this.patterns.get(d),I=T.get(S),N=this.getImage(l,d);if(!N)return null;if(I){if(I.position.version===N.version)return I.position;I.position.version=N.version}else{if(N.usvg&&!N.data){const $=this.getPatternInFlightId(S,d);if(this.patternsInFlight.has($))return null;this.patternsInFlight.add($);const U=new i.B(l).scaleSelf(i.q.devicePixelRatio),H=new Map([[U.toString(),{image:N,imageVariant:U}]]);return this._rasterizeImages(d,H,((X,q)=>this.storePatternImage(U,d,N,y,q))),null}this.storePattern(l,d,N)}return this._updatePatternAtlas(d,y),T.get(S).position}getPatternInFlightId(l,d){return i.C(l,d)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(l,d,y,S,T){const I=l.toString(),N=T?T.get(I):void 0;N&&(y.data=N,this.storePattern(l.id,d,y),this._updatePatternAtlas(d,S),this.patternsInFlight.delete(this.getPatternInFlightId(l.id.toString(),d)))}storePattern(l,d,y){const S={w:y.data.width+2*i.F,h:y.data.height+2*i.F,x:0,y:0},T=new i.G(S,y,i.F);this.patterns.get(d).set(l.toString(),{bin:S,position:T})}bind(l,d){const y=l.gl;let S=this.atlasTexture.get(d);S?this.dirty&&(S.update(this.atlasImage.get(d)),this.dirty=!1):(S=new i.T(l,this.atlasImage.get(d),y.RGBA8),this.atlasTexture.set(d,S)),S.bind(y.LINEAR,y.CLAMP_TO_EDGE)}_updatePatternAtlas(l,d){const y=this.patterns.get(l),S=Array.from(y.values()).map((({bin:U})=>U)),{w:T,h:I}=i.H(S),N=this.atlasImage.get(l);N.resize({width:T||1,height:I||1});const $=this.images.get(l);for(const[U,{bin:H,position:X}]of y.entries()){let q=X.padding;const ne=H.x+q,de=H.y+q,ae=$.get(U).data,he=ae.width,me=ae.height;q=q>1?q-1:q,i.r.copy(ae,N,{x:0,y:0},{x:ne,y:de},{width:he,height:me},d),i.r.copy(ae,N,{x:0,y:me-q},{x:ne,y:de-q},{width:he,height:q},d),i.r.copy(ae,N,{x:0,y:0},{x:ne,y:de+me},{width:he,height:q},d),i.r.copy(ae,N,{x:he-q,y:0},{x:ne-q,y:de},{width:q,height:me},d),i.r.copy(ae,N,{x:0,y:0},{x:ne+he,y:de},{width:q,height:me},d),i.r.copy(ae,N,{x:he-q,y:me-q},{x:ne-q,y:de-q},{width:q,height:q},d),i.r.copy(ae,N,{x:0,y:me-q},{x:ne+he,y:de-q},{width:q,height:q},d),i.r.copy(ae,N,{x:0,y:0},{x:ne+he,y:de+me},{width:q,height:q},d),i.r.copy(ae,N,{x:he-q,y:0},{x:ne-q,y:de+me},{width:q,height:q},d)}this.dirty=!0}beginFrame(){for(const l of this.images.keys())this.callbackDispatchedThisFrame.set(l,new Set)}dispatchRenderCallbacks(l,d){const y=this.images.get(d);for(const S of l){if(this.callbackDispatchedThisFrame.get(d).has(S.toString()))continue;this.callbackDispatchedThisFrame.get(d).add(S.toString());const T=y.get(S.toString());ge(T)&&this.updateImage(S,d,T)}}}function It(v){const l=v.key,d=v.value,y=v.valueSpec||{},S=v.objectElementValidators||{},T=v.style,I=v.styleSpec;let N=[];const $=i.K(d);if($!=="object")return[new i.V(l,d,`object expected, ${$} found`)];for(const U in d){const H=U.split(".")[0];let X;S[H]?X=S[H]:y[H]?X=ye:S["*"]?X=S["*"]:y["*"]&&(X=ye),X?N=N.concat(X({key:(l&&`${l}.`)+U,value:d[U],valueSpec:y[H]||y["*"],style:T,styleSpec:I,object:d,objectKey:U},d)):N.push(new i.J(l,d[U],`unknown property "${U}"`))}for(const U in y)S[U]||y[U].required&&y[U].default===void 0&&d[U]===void 0&&N.push(new i.V(l,d,`missing required property "${U}"`));return N}function ht(v){const l=v.value,d=v.valueSpec,y=v.style,S=v.styleSpec,T=v.key,I=v.arrayElementValidator||ye;if(i.K(l)!=="array")return[new i.V(T,l,`array expected, ${i.K(l)} found`)];if(d.length&&l.length!==d.length)return[new i.V(T,l,`array length ${d.length} expected, length ${l.length} found`)];if(d["min-length"]&&l.length<d["min-length"])return[new i.V(T,l,`array length at least ${d["min-length"]} expected, length ${l.length} found`)];let N={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};S.$version<7&&(N.function=d.function),i.K(d.value)==="object"&&(N=d.value);let $=[];for(let U=0;U<l.length;U++)$=$.concat(I({array:l,arrayIndex:U,value:l[U],valueSpec:N,style:y,styleSpec:S,key:`${T}[${U}]`},!0));return $}function ut(v){const l=v.key,d=v.value,y=v.valueSpec;let S=i.K(d);if(S==="number"&&d!=d&&(S="NaN"),S!=="number")return[new i.V(l,d,`number expected, ${S} found`)];if("minimum"in y){let T=y.minimum;if(i.K(y.minimum)==="array"&&(T=y.minimum[v.arrayIndex]),d<T)return[new i.V(l,d,`${d} is less than the minimum value ${T}`)]}if("maximum"in y){let T=y.maximum;if(i.K(y.maximum)==="array"&&(T=y.maximum[v.arrayIndex]),d>T)return[new i.V(l,d,`${d} is greater than the maximum value ${T}`)]}return[]}function Rt(v){const l=v.valueSpec,d=i.M(v.value.type);let y,S,T,I={};const N=d!=="categorical"&&v.value.property===void 0,$=!N,U=i.K(v.value.stops)==="array"&&i.K(v.value.stops[0])==="array"&&i.K(v.value.stops[0][0])==="object",H=It({key:v.key,value:v.value,valueSpec:v.styleSpec.function,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{stops:function(ne){if(d==="identity")return[new i.V(ne.key,ne.value,'identity function may not have a "stops" property')];let de=[];const ae=ne.value;return de=de.concat(ht({key:ne.key,value:ae,valueSpec:ne.valueSpec,style:ne.style,styleSpec:ne.styleSpec,arrayElementValidator:X})),i.K(ae)==="array"&&ae.length===0&&de.push(new i.V(ne.key,ae,"array must have at least one stop")),de},default:function(ne){return ye({key:ne.key,value:ne.value,valueSpec:l,style:ne.style,styleSpec:ne.styleSpec})}}});return d==="identity"&&N&&H.push(new i.V(v.key,v.value,'missing required property "property"')),d==="identity"||v.value.stops||H.push(new i.V(v.key,v.value,'missing required property "stops"')),d==="exponential"&&v.valueSpec.expression&&!i.N(v.valueSpec)&&H.push(new i.V(v.key,v.value,"exponential functions not supported")),v.styleSpec.$version>=8&&($&&!i.O(v.valueSpec)?H.push(new i.V(v.key,v.value,"property functions not supported")):N&&!i.Q(v.valueSpec)&&H.push(new i.V(v.key,v.value,"zoom functions not supported"))),d!=="categorical"&&!U||v.value.property!==void 0||H.push(new i.V(v.key,v.value,'"property" property is required')),H;function X(ne){let de=[];const ae=ne.value,he=ne.key;if(i.K(ae)!=="array")return[new i.V(he,ae,`array expected, ${i.K(ae)} found`)];if(ae.length!==2)return[new i.V(he,ae,`array length 2 expected, length ${ae.length} found`)];if(U){if(i.K(ae[0])!=="object")return[new i.V(he,ae,`object expected, ${i.K(ae[0])} found`)];if(ae[0].zoom===void 0)return[new i.V(he,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new i.V(he,ae,"object stop key must have value")];const me=i.M(ae[0].zoom);if(typeof me!="number")return[new i.V(he,ae[0].zoom,"stop zoom values must be numbers")];if(T&&T>me)return[new i.V(he,ae[0].zoom,"stop zoom values must appear in ascending order")];me!==T&&(T=me,S=void 0,I={}),de=de.concat(It({key:`${he}[0]`,value:ae[0],valueSpec:{zoom:{}},style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{zoom:ut,value:q}}))}else de=de.concat(q({key:`${he}[0]`,value:ae[0],style:ne.style,styleSpec:ne.styleSpec},ae));return i.S(i.U(ae[1]))?de.concat([new i.V(`${he}[1]`,ae[1],"expressions are not allowed in function stops.")]):de.concat(ye({key:`${he}[1]`,value:ae[1],valueSpec:l,style:ne.style,styleSpec:ne.styleSpec}))}function q(ne,de){const ae=i.K(ne.value),he=i.M(ne.value),me=ne.value!==null?ne.value:de;if(y){if(ae!==y)return[new i.V(ne.key,me,`${ae} stop domain type must match previous stop domain type ${y}`)]}else y=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean"&&typeof he!="number"&&typeof he!="string"&&typeof he!="boolean")return[new i.V(ne.key,me,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&d!=="categorical"){let Ie=`number expected, ${ae} found`;return i.O(l)&&d===void 0&&(Ie+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new i.V(ne.key,me,Ie)]}return d!=="categorical"||ae!=="number"||typeof he=="number"&&isFinite(he)&&Math.floor(he)===he?d!=="categorical"&&ae==="number"&&typeof he=="number"&&typeof S=="number"&&S!==void 0&&he<S?[new i.V(ne.key,me,"stop domain values must appear in ascending order")]:(S=he,d==="categorical"&&he in I?[new i.V(ne.key,me,"stop domain values must be unique")]:(I[he]=!0,[])):[new i.V(ne.key,me,`integer expected, found ${String(he)}`)]}}function ze(v){const l=(v.expressionContext==="property"?i.W:i.X)(i.U(v.value),v.valueSpec);if(l.result==="error")return l.value.map((y=>new i.V(`${v.key}${y.key}`,v.value,y.message)));const d=l.value.expression||l.value._styleExpression.expression;if(v.expressionContext==="property"&&v.propertyKey==="text-font"&&!d.outputDefined())return[new i.V(v.key,v.value,`Invalid data expression for "${v.propertyKey}". Output values must be contained as literals within the expression.`)];if(v.expressionContext==="property"&&v.propertyType==="layout"&&!i.Y(d))return[new i.V(v.key,v.value,'"feature-state" data expressions are not supported with layout properties.')];if(v.expressionContext==="filter")return lt(d,v);if(v.expressionContext&&v.expressionContext.indexOf("cluster")===0){if(!i.Z(d,["zoom","feature-state"]))return[new i.V(v.key,v.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(v.expressionContext==="cluster-initial"&&!i._(d))return[new i.V(v.key,v.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function lt(v,l){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(l.valueSpec&&l.valueSpec.expression)for(const S of l.valueSpec.expression.parameters)d.delete(S);if(d.size===0)return[];const y=[];return v instanceof i.$&&d.has(v.name)?[new i.V(l.key,l.value,`["${v.name}"] expression is not supported in a filter for a ${l.object.type} layer with id: ${l.object.id}`)]:(v.eachChild((S=>{y.push(...lt(S,l))})),y)}function at(v){const l=v.key,d=v.value,y=v.valueSpec,S=[];return Array.isArray(y.values)?y.values.indexOf(i.M(d))===-1&&S.push(new i.V(l,d,`expected one of [${y.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(y.values).indexOf(i.M(d))===-1&&S.push(new i.V(l,d,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(d)} found`)),S}function Et(v){return i.a1(i.U(v.value))?ze(i.L({},v,{expressionContext:"filter",valueSpec:v.styleSpec[`filter_${v.layerType||"fill"}`]})):$e(v)}function $e(v){const l=v.value,d=v.key;if(i.K(l)!=="array")return[new i.V(d,l,`array expected, ${i.K(l)} found`)];const y=v.styleSpec;let S,T=[];if(l.length<1)return[new i.V(d,l,"filter array must have at least 1 element")];switch(T=T.concat(at({key:`${d}[0]`,value:l[0],valueSpec:y.filter_operator,style:v.style,styleSpec:v.styleSpec})),i.M(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&i.M(l[1])==="$type"&&T.push(new i.V(d,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&T.push(new i.V(d,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(S=i.K(l[1]),S!=="string"&&T.push(new i.V(`${d}[1]`,l[1],`string expected, ${S} found`)));for(let I=2;I<l.length;I++)S=i.K(l[I]),i.M(l[1])==="$type"?T=T.concat(at({key:`${d}[${I}]`,value:l[I],valueSpec:y.geometry_type,style:v.style,styleSpec:v.styleSpec})):S!=="string"&&S!=="number"&&S!=="boolean"&&T.push(new i.V(`${d}[${I}]`,l[I],`string, number, or boolean expected, ${S} found`));break;case"any":case"all":case"none":for(let I=1;I<l.length;I++)T=T.concat($e({key:`${d}[${I}]`,value:l[I],style:v.style,styleSpec:v.styleSpec}));break;case"has":case"!has":S=i.K(l[1]),l.length!==2?T.push(new i.V(d,l,`filter array for "${l[0]}" operator must have 2 elements`)):S!=="string"&&T.push(new i.V(`${d}[1]`,l[1],`string expected, ${S} found`))}return T}function Mt(v,l){const d=v.key,y=v.style,S=v.layer,T=v.styleSpec,I=v.value,N=v.objectKey,$=T[`${l}_${v.layerType}`];if(!$)return[];const U=N.match(/^(.*)-use-theme$/);if(l==="paint"&&U&&$[U[1]])return i.S(I)?[].concat(ye({key:v.key,value:I,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:y,styleSpec:T,expressionContext:"property",propertyType:l,propertyKey:N})):ye({key:d,value:I,valueSpec:{type:"string"},style:y,styleSpec:T});const H=N.match(/^(.*)-transition$/);if(l==="paint"&&H&&$[H[1]]&&$[H[1]].transition)return ye({key:d,value:I,valueSpec:T.transition,style:y,styleSpec:T});const X=v.valueSpec||$[N];if(!X)return[new i.J(d,I,`unknown property "${N}"`)];let q;if(i.K(I)==="string"&&i.O(X)&&!X.tokens&&(q=/^{([^}]+)}$/.exec(I))){const de=`\`{ "type": "identity", "property": ${q?JSON.stringify(q[1]):'"_"'} }\``;return[new i.V(d,I,`"${N}" does not support interpolation syntax
Use an identity property function instead: ${de}.`)]}const ne=[];if(v.layerType==="symbol")N!=="text-field"||!y||y.glyphs||y.imports||ne.push(new i.V(d,I,'use of "text-field" requires a style "glyphs" property')),N==="text-font"&&i.a2(i.U(I))&&i.M(I.type)==="identity"&&ne.push(new i.V(d,I,'"text-font" does not support identity functions'));else if(v.layerType==="model"&&l==="paint"&&S&&S.layout&&S.layout.hasOwnProperty("model-id")&&i.O(X)&&(i.a3(X)||i.Q(X))){const de=i.W(i.U(I),X),ae=de.value.expression||de.value._styleExpression.expression;ae&&!i.Z(ae,["measure-light"])&&(N==="model-emissive-strength"&&i._(ae)&&i.Y(ae)||ne.push(new i.V(d,I,`${N} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return ne.concat(ye({key:v.key,value:I,valueSpec:X,style:y,styleSpec:T,expressionContext:"property",propertyType:l,propertyKey:N}))}function tn(v){return Mt(v,"paint")}function on(v){return Mt(v,"layout")}function vn(v){let l=[];const d=v.value,y=v.key,S=v.style,T=v.styleSpec;d.type||d.ref||l.push(new i.V(y,d,'either "type" or "ref" is required'));let I=i.M(d.type);const N=i.M(d.ref);if(d.id){const $=i.M(d.id);for(let U=0;U<v.arrayIndex;U++){const H=S.layers[U];i.M(H.id)===$&&l.push(new i.V(y,d.id,`duplicate layer id "${d.id}", previously used at line ${H.id.__line__}`))}}if("ref"in d){let $;["type","source","source-layer","filter","layout"].forEach((U=>{U in d&&l.push(new i.V(y,d[U],`"${U}" is prohibited for ref layers`))})),S.layers.forEach((U=>{i.M(U.id)===N&&($=U)})),$?$.ref?l.push(new i.V(y,d.ref,"ref cannot reference another ref layer")):I=i.M($.type):typeof N=="string"&&l.push(new i.V(y,d.ref,`ref layer "${N}" not found`))}else if(I!=="background"&&I!=="sky"&&I!=="slot")if(d.source){const $=S.sources&&S.sources[d.source],U=$&&i.M($.type);$?U==="vector"&&I==="raster"?l.push(new i.V(y,d.source,`layer "${d.id}" requires a raster source`)):U==="raster"&&I!=="raster"?l.push(new i.V(y,d.source,`layer "${d.id}" requires a vector source`)):U!=="vector"||d["source-layer"]?U==="raster-dem"&&I!=="hillshade"?l.push(new i.V(y,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):U!=="raster-array"||["raster","raster-particle"].includes(I)?I!=="line"||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||U==="geojson"&&$.lineMetrics?I==="raster-particle"&&U!=="raster-array"&&l.push(new i.V(y,d.source,`layer "${d.id}" requires a 'raster-array' source.`)):l.push(new i.V(y,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new i.V(y,d.source,"raster-array source can only be used with layer type 'raster'.")):l.push(new i.V(y,d,`layer "${d.id}" must specify a "source-layer"`)):l.push(new i.V(y,d.source,`source "${d.source}" not found`))}else l.push(new i.V(y,d,'missing required property "source"'));return l=l.concat(It({key:y,value:d,valueSpec:T.layer,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ye({key:`${y}.type`,value:d.type,valueSpec:T.layer.type,style:v.style,styleSpec:v.styleSpec,object:d,objectKey:"type"}),filter:$=>Et(i.L({layerType:I},$)),layout:$=>It({layer:d,key:$.key,value:$.value,valueSpec:{},style:$.style,styleSpec:$.styleSpec,objectElementValidators:{"*":U=>on(i.L({layerType:I},U))}}),paint:$=>It({layer:d,key:$.key,value:$.value,valueSpec:{},style:$.style,styleSpec:$.styleSpec,objectElementValidators:{"*":U=>tn(i.L({layerType:I,layer:d},U))}})}})),l}function _t(v){const l=v.value,d=v.key,y=i.K(l);return y!=="string"?[new i.V(d,l,`string expected, ${y} found`)]:[]}const wt={promoteId:function v({key:l,value:d}){if(i.K(d)==="string")return _t({key:l,value:d});if(Array.isArray(d)){const y=[],S=i.U(d),T=i.X(S);return T.result==="error"&&T.value.forEach((I=>{y.push(new i.V(`${l}${I.key}`,null,`${I.message}`))})),i.Z(T.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||y.push(new i.V(`${l}`,null,"promoteId expression should be only feature dependent")),y}{const y=[];for(const S in d)y.push(...v({key:`${l}.${S}`,value:d[S]}));return y}}};function Ve(v){const l=v.value,d=v.key,y=v.styleSpec,S=v.style;if(!l.type)return[new i.V(d,l,'"type" is required')];const T=i.M(l.type);let I=[];switch(["vector","raster","raster-dem","raster-array"].includes(T)&&(l.url||l.tiles||I.push(new i.J(d,l,'Either "url" or "tiles" is required.'))),T){case"vector":case"raster":case"raster-dem":case"raster-array":return I=I.concat(It({key:d,value:l,valueSpec:y[`source_${T.replace("-","_")}`],style:v.style,styleSpec:y,objectElementValidators:wt})),I;case"geojson":if(I=It({key:d,value:l,valueSpec:y.source_geojson,style:S,styleSpec:y,objectElementValidators:wt}),l.cluster)for(const N in l.clusterProperties){const[$,U]=l.clusterProperties[N],H=typeof $=="string"?[$,["accumulated"],["get",N]]:$;I.push(...ze({key:`${d}.${N}.map`,value:U,expressionContext:"cluster-map"})),I.push(...ze({key:`${d}.${N}.reduce`,value:H,expressionContext:"cluster-reduce"}))}return I;case"video":return It({key:d,value:l,valueSpec:y.source_video,style:S,styleSpec:y});case"image":return It({key:d,value:l,valueSpec:y.source_image,style:S,styleSpec:y});case"canvas":return[new i.V(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return at({key:`${d}.type`,value:l.type,valueSpec:{values:qe(y)}})}}function qe(v){return v.source.reduce(((l,d)=>{const y=v[d];return y.type.type==="enum"&&(l=l.concat(Object.keys(y.type.values))),l}),[])}function Pt(v){const l=v.value,d=v.styleSpec,y=d.light,S=v.style;let T=[];const I=i.K(l);if(l===void 0)return T;if(I!=="object")return T=T.concat([new i.V("light",l,`object expected, ${I} found`)]),T;for(const N in l){const $=N.match(/^(.*)-transition$/),U=N.match(/^(.*)-use-theme$/);T=T.concat(U&&y[U[1]]?ye({key:N,value:l[N],valueSpec:{type:"string"},style:S,styleSpec:d}):$&&y[$[1]]&&y[$[1]].transition?ye({key:N,value:l[N],valueSpec:d.transition,style:S,styleSpec:d}):y[N]?ye({key:N,value:l[N],valueSpec:y[N],style:S,styleSpec:d}):[new i.V(N,l[N],`unknown property "${N}"`)])}return T}function Qt(v){const l=v.value;let d=[];if(!l)return d;const y=i.K(l);if(y!=="object")return d=d.concat([new i.V("light-3d",l,`object expected, ${y} found`)]),d;const S=v.styleSpec,T=S["light-3d"],I=v.key,N=v.style,$=v.style.lights;for(const X of["type","id"])if(!(X in l))return d=d.concat([new i.V("light-3d",l,`missing property ${X} on light`)]),d;if(l.type&&$)for(let X=0;X<v.arrayIndex;X++){const q=i.M(l.type),ne=$[X];i.M(ne.type)===q&&d.push(new i.V(I,l.id,`duplicate light type "${l.type}", previously defined at line ${ne.id.__line__}`))}const U=`properties_light_${l.type}`;if(!(U in S))return d=d.concat([new i.V("light-3d",l,`Invalid light type ${l.type}`)]),d;const H=S[U];for(const X in l)if(X==="properties"){const q=l[X],ne=i.K(q);if(ne!=="object")return d=d.concat([new i.V("properties",q,`object expected, ${ne} found`)]),d;for(const de in q)d=d.concat(H[de]?ye({key:de,value:q[de],valueSpec:H[de],style:N,styleSpec:S}):[new i.J(v.key,q[de],`unknown property "${de}"`)])}else{const q=X.match(/^(.*)-transition$/),ne=X.match(/^(.*)-use-theme$/);d=d.concat(ne&&T[ne[1]]?ye({key:X,value:l[X],valueSpec:{type:"string"},style:N,styleSpec:S}):q&&T[q[1]]&&T[q[1]].transition?ye({key:X,value:l[X],valueSpec:S.transition,style:N,styleSpec:S}):T[X]?ye({key:X,value:l[X],valueSpec:T[X],style:N,styleSpec:S}):[new i.J(X,l[X],`unknown property "${X}"`)])}return d}function cn(v){const l=v.value,d=v.key,y=v.style,S=v.styleSpec,T=S.terrain;let I=[];const N=i.K(l);if(l===void 0||N==="null")return I;if(N!=="object")return I=I.concat([new i.V("terrain",l,`object expected, ${N} found`)]),I;for(const $ in l){const U=$.match(/^(.*)-transition$/),H=$.match(/^(.*)-use-theme$/);I=I.concat(H&&T[H[1]]?ye({key:$,value:l[$],valueSpec:{type:"string"},style:y,styleSpec:S}):U&&T[U[1]]&&T[U[1]].transition?ye({key:$,value:l[$],valueSpec:S.transition,style:y,styleSpec:S}):T[$]?ye({key:$,value:l[$],valueSpec:T[$],style:y,styleSpec:S}):[new i.J($,l[$],`unknown property "${$}"`)])}if(l.source){const $=y.sources&&y.sources[l.source],U=$&&i.M($.type);$?U!=="raster-dem"&&I.push(new i.V(d,l.source,`terrain cannot be used with a source of type ${String(U)}, it only be used with a "raster-dem" source type`)):I.push(new i.V(d,l.source,`source "${l.source}" not found`))}else I.push(new i.V(d,l,'terrain is missing required property "source"'));return I}function dn(v){const l=v.value,d=v.style,y=v.styleSpec,S=y.fog;let T=[];const I=i.K(l);if(l===void 0)return T;if(I!=="object")return T=T.concat([new i.V("fog",l,`object expected, ${I} found`)]),T;for(const N in l){const $=N.match(/^(.*)-transition$/),U=N.match(/^(.*)-use-theme$/);T=T.concat(U&&S[U[1]]?ye({key:N,value:l[N],valueSpec:{type:"string"},style:d,styleSpec:y}):$&&S[$[1]]&&S[$[1]].transition?ye({key:N,value:l[N],valueSpec:y.transition,style:d,styleSpec:y}):S[N]?ye({key:N,value:l[N],valueSpec:S[N],style:d,styleSpec:y}):[new i.J(N,l[N],`unknown property "${N}"`)])}return T}const Te={"*":()=>[],array:ht,boolean:function(v){const l=v.value,d=v.key,y=i.K(l);return y!=="boolean"?[new i.V(d,l,`boolean expected, ${y} found`)]:[]},number:ut,color:function(v){const l=v.key,d=v.value,y=i.K(d);return y!=="string"?[new i.V(l,d,`color expected, ${y} found`)]:i.a0.parseCSSColor(d)===null?[new i.V(l,d,`color expected, "${d}" found`)]:[]},enum:at,filter:Et,function:Rt,layer:vn,object:It,source:Ve,model:i.a4,light:Pt,"light-3d":Qt,terrain:cn,fog:dn,string:_t,formatted:function(v){return _t(v).length===0?[]:ze(v)},resolvedImage:function(v){return _t(v).length===0?[]:ze(v)},projection:function(v){const l=v.value,d=v.styleSpec,y=d.projection,S=v.style;let T=[];const I=i.K(l);if(I==="object")for(const N in l)T=T.concat(ye({key:N,value:l[N],valueSpec:y[N],style:S,styleSpec:d}));else I!=="string"&&(T=T.concat([new i.V("projection",l,`object or string expected, ${I} found`)]));return T},import:function(v){const{value:l,styleSpec:d}=v,{data:y,...S}=l;Object.defineProperty(S,"__line__",{value:l.__line__,enumerable:!1});let T=It(i.L({},v,{value:S,valueSpec:d.import}));return i.M(S.id)===""&&T.push(new i.V(`${v.key}.id`,S,"import id can't be an empty string")),y&&(T=T.concat(ot(y,d,{key:`${v.key}.data`}))),T},iconset:function(v){const l=v.value,d=v.key,y=v.styleSpec,S=v.style;if(!l.type)return[new i.V(d,l,'"type" is required')];const T=i.M(l.type);let I=[];if(I=I.concat(It({key:d,value:l,valueSpec:y[`iconset_${T}`],style:S,styleSpec:y})),T==="source"&&l.source){const N=S.sources&&S.sources[l.source],$=N&&i.M(N.type);N?$!=="raster-array"&&I.push(new i.V(d,l.source,`iconset cannot be used with a source of type ${String($)}, it only be used with a "raster-array" source type`)):I.push(new i.V(d,l.source,`source "${l.source}" not found`))}return I}};function ye(v,l=!1){const d=v.value,y=v.valueSpec,S=v.styleSpec;if(y.expression&&i.a2(i.M(d)))return Rt(v);if(y.expression&&i.S(i.U(d)))return ze(v);if(y.type&&Te[y.type]){const T=Te[y.type](v);return l===!0&&T.length>0&&i.K(v.value)==="array"?ze(v):T}return It(i.L({},v,{valueSpec:y.type?S[y.type]:y}))}function We(v){const l=v.value,d=v.key,y=_t(v);return y.length||(l.indexOf("{fontstack}")===-1&&y.push(new i.V(d,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&y.push(new i.V(d,l,'"glyphs" url must include a "{range}" token'))),y}function ot(v,l=i.a5,d={}){return ye({key:d.key||"",value:v,valueSpec:l.$root,styleSpec:l,style:v,objectElementValidators:{glyphs:We,"*":()=>[]}})}function At(v,l=i.a5){return it(ot(v,l))}const Vt=v=>it(Ve(v)),an=v=>it(Pt(v)),xn=v=>it(Qt(v)),Hn=v=>it(cn(v)),Gn=v=>it(dn(v)),cr=v=>it((function(l){const d=l.value,y=l.style,S=l.styleSpec,T=S.snow;let I=[];const N=i.K(d);if(d===void 0)return I;if(N!=="object")return I=I.concat([new i.V("snow",d,`object expected, ${N} found`)]),I;for(const $ in d){const U=$.match(/^(.*)-transition$/);I=I.concat(U&&T[U[1]]&&T[U[1]].transition?ye({key:$,value:d[$],valueSpec:S.transition,style:y,styleSpec:S}):T[$]?ye({key:$,value:d[$],valueSpec:T[$],style:y,styleSpec:S}):[new i.J($,d[$],`unknown property "${$}"`)])}return I})(v)),yt=v=>it((function(l){const d=l.value,y=l.style,S=l.styleSpec,T=S.rain;let I=[];const N=i.K(d);if(d===void 0)return I;if(N!=="object")return I=I.concat([new i.V("rain",d,`object expected, ${N} found`)]),I;for(const $ in d){const U=$.match(/^(.*)-transition$/);I=I.concat(U&&T[U[1]]&&T[U[1]].transition?ye({key:$,value:d[$],valueSpec:S.transition,style:y,styleSpec:S}):T[$]?ye({key:$,value:d[$],valueSpec:T[$],style:y,styleSpec:S}):[new i.J($,d[$],`unknown property "${$}"`)])}return I})(v)),ue=v=>it(vn(v)),we=v=>it(Et(v)),Re=v=>it(tn(v)),Xe=v=>it(on(v)),Ue=v=>it(i.a4(v));function it(v){return v.slice().sort(((l,d)=>l.line&&d.line?l.line-d.line:0))}function vt(v,l){let d=!1;if(l&&l.length)for(const y of l)y instanceof i.J?i.w(y.message):(v.fire(new i.z(new Error(y.message))),d=!0);return d}let st;class kt extends i.E{constructor(l,d="flat"){super(),this._transitionable=new i.a6(st||(st=new i.a7({anchor:new i.a8(i.a5.light.anchor),position:new i.a9(i.a5.light.position),color:new i.a8(i.a5.light.color),intensity:new i.a8(i.a5.light.intensity)}))),this.setLight(l,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,d,y={}){this._validate(an,l,y)||(this._transitionable.setTransitionOrValue(l),this.id=d)}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,y){return(!y||y.validate!==!1)&&vt(this,l.call(At,i.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}}let zt=class extends i.E{constructor(v,l,d,y){super(),this.scope=d,this._transitionable=new i.a6(new i.a7({source:new i.a8(i.a5.terrain.source),exaggeration:new i.a8(i.a5.terrain.exaggeration)}),d,y),this._transitionable.setTransitionOrValue(v,y),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l}get(){return this._transitionable.serialize()}set(v,l){this._transitionable.setTransitionOrValue(v,l)}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}getExaggeration(v){return this._transitioning.possiblyEvaluate(new i.aa(v)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const v=this._transitionable._values.exaggeration;if(!v)return null;const l=v.value.expression;if(!l)return null;let d=-1,y=-1,S=1;for(const T of l.zoomStops)S=l.evaluate(new i.aa(T)),S>.01?(d=T,y=-1):y=T;return S<.01&&d>0&&y>d?[d,y]:null}isZoomDependent(){const v=this._transitionable._values.exaggeration;return v!=null&&v.value!=null&&v.value.expression!=null&&v.value.expression instanceof i.ab}};const Nt=45,un=65,Tn=.05;function In(v,l,d,y){const S=i.ae(Nt,un,d),[T,I]=sr(v,y);let N=1-Math.min(1,Math.exp((l-T)/(I-T)*-6));return N*=N*N,N=Math.min(1,1.00747*N),N*S*v.alpha}function sr(v,l){const d=.5/Math.tan(.5*l);return[v.range[0]+d,v.range[1]+d]}function dr(v,l,d,y,S){const T=i.ad.vec3.transformMat4([],[l,d,y],S.mercatorFogMatrix);return In(v,i.ad.vec3.length(T),S.pitch,S._fov)}function hr(v,l,d,y,S,T,I){const N=[[d,y,0],[S,y,0],[S,T,0],[d,T,0]];let $=Number.MAX_VALUE,U=-Number.MAX_VALUE;for(const H of N){const X=i.ad.vec3.transformMat4([],H,l),q=i.ad.vec3.length(X);$=Math.min($,q),U=Math.max(U,q)}return[In(v,$,I.pitch,I._fov),In(v,U,I.pitch,I._fov)]}class gr extends i.E{constructor(l,d,y,S){super();const T=new i.a7({range:new i.a8(i.a5.fog.range),color:new i.a8(i.a5.fog.color),"color-use-theme":new i.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new i.a8(i.a5.fog["high-color"]),"high-color-use-theme":new i.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new i.a8(i.a5.fog["space-color"]),"space-color-use-theme":new i.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new i.a8(i.a5.fog["horizon-blend"]),"star-intensity":new i.a8(i.a5.fog["star-intensity"]),"vertical-range":new i.a8(i.a5.fog["vertical-range"])});this._transitionable=new i.a6(T,y,new Map(S)),this.set(l,S),this._transitioning=this._transitionable.untransitioned(),this._transform=d,this.properties=new i.af(T),this.scope=y}get state(){const l=this._transform,d=l.projection.name==="globe",y=i.ag(l.zoom),S=this.properties.get("range"),T=[.5,3];return{range:d?[i.ah(T[0],S[0],y),i.ah(T[1],S[1],y)]:S,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,d,y={}){if(this._validate(Gn,l,y))return;const S=i.l({},l);for(const T of Object.keys(i.a5.fog))S[T]===void 0&&(S[T]=i.a5.fog[T].default);this._options=S,this._transitionable.setTransitionOrValue(this._options,d)}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:i.ae(Nt,un,l))*d.a}getOpacityAtLatLng(l,d){return this._transform.projection.supportsFog?(function(y,S,T){const I=i.ac.fromLngLat(S),N=T.elevation?T.elevation.getAtPointOrZero(I):0;return dr(y,I.x,I.y,N,T)})(this.state,l,d):0}getOpacityForTile(l){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(l.toUnwrapped());return hr(this.state,d,0,0,i.ai,i.ai,this._transform)}getOpacityForBounds(l,d,y,S,T){return this._transform.projection.supportsFog?hr(this.state,l,d,y,S,T,this._transform):[1,1]}getFovAdjustedRange(l){return this._transform.projection.supportsFog?sr(this.state,l):[0,1]}isVisibleOnFrustum(l){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const y of d){const S=l.points[y];let T;if(S[2]>=0)T=S;else{const I=l.points[y-4];T=i.aj(I,S,I[2]/(I[2]-S[2]))}if(dr(this.state,T[0],T[1],0,this._transform)>=Tn)return!0}return!1}updateConfig(l){this._transitionable.setTransitionOrValue(this._options,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,y){return(!y||y.validate!==!1)&&vt(this,l.call(At,i.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}}let Ai,Gi,Sr,ni,ri=class extends i.E{constructor(v,l,d,y){super();const S=Ai||(Ai=new i.a7({density:new i.a8(i.a5.snow.density),intensity:new i.a8(i.a5.snow.intensity),color:new i.a8(i.a5.snow.color),opacity:new i.a8(i.a5.snow.opacity),vignette:new i.a8(i.a5.snow.vignette),"vignette-color":new i.a8(i.a5.snow["vignette-color"]),"center-thinning":new i.a8(i.a5.snow["center-thinning"]),direction:new i.a8(i.a5.snow.direction),"flake-size":new i.a8(i.a5.snow["flake-size"])}));this._transitionable=new i.a6(S,d,new Map(y)),this.set(v,y),this._transitioning=this._transitionable.untransitioned(),this.properties=new i.af(S),this.scope=d}get state(){const v=this.properties.get("opacity"),l=this.properties.get("color"),d=this.properties.get("direction"),y=i.ak(d[0]),S=-Math.max(i.ak(d[1]),.01),T=[Math.cos(y)*Math.cos(S),Math.sin(y)*Math.cos(S),Math.sin(S)],I=this.properties.get("vignette"),N=this.properties.get("vignette-color");return N.a=I,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new i.al(l.r,l.g,l.b,l.a*v),direction:T,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:N}}get(){return this._transitionable.serialize()}set(v,l,d={}){if(this._validate(cr,v,d))return;const y=i.l({},v);for(const S of Object.keys(i.a5.snow))y[S]===void 0&&(y[S]=i.a5.snow[S].default);this._options=y,this._transitionable.setTransitionOrValue(this._options,l)}updateConfig(v){this._transitionable.setTransitionOrValue(this._options,new Map(v))}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}_validate(v,l,d){return(!d||d.validate!==!1)&&vt(this,v.call(At,i.l({value:l,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}},li=class extends i.E{constructor(v,l,d,y){super();const S=Gi||(Gi=new i.a7({density:new i.a8(i.a5.rain.density),intensity:new i.a8(i.a5.rain.intensity),color:new i.a8(i.a5.rain.color),opacity:new i.a8(i.a5.rain.opacity),vignette:new i.a8(i.a5.rain.vignette),"vignette-color":new i.a8(i.a5.rain["vignette-color"]),"center-thinning":new i.a8(i.a5.rain["center-thinning"]),direction:new i.a8(i.a5.rain.direction),"droplet-size":new i.a8(i.a5.rain["droplet-size"]),"distortion-strength":new i.a8(i.a5.rain["distortion-strength"])}));this._transitionable=new i.a6(S,d,new Map(y)),this.set(v,y),this._transitioning=this._transitionable.untransitioned(),this.properties=new i.af(S),this.scope=d}get state(){const v=this.properties.get("opacity"),l=this.properties.get("color"),d=this.properties.get("direction"),y=i.ak(d[0]),S=-Math.max(i.ak(d[1]),.01),T=[Math.cos(y)*Math.cos(S),Math.sin(y)*Math.cos(S),Math.sin(S)],I=this.properties.get("vignette-color");return I.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new i.al(l.r,l.g,l.b,l.a*v),direction:T,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:I}}get(){return this._transitionable.serialize()}set(v,l,d={}){if(this._validate(yt,v,d))return;const y=i.l({},v);for(const S of Object.keys(i.a5.rain))y[S]===void 0&&(y[S]=i.a5.rain[S].default);this._options=y,this._transitionable.setTransitionOrValue(this._options,l)}updateConfig(v){this._transitionable.setTransitionOrValue(this._options,new Map(v))}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}_validate(v,l,d){return(!d||d.validate!==!1)&&vt(this,v.call(At,i.l({value:l,style:{glyphs:!0,sprite:!0},styleSpec:i.a5})))}};class us extends i.E{constructor(l,d,y,S){super(),this.scope=y,this._options=l,this.properties=new i.af(d),this._transitionable=new i.a6(d,y,new Map(S)),this._transitionable.setTransitionOrValue(l.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(l){this._transitionable.setTransitionOrValue(this._options.properties,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(l,d){this._options=l,this._transitionable.setTransitionOrValue(l.properties,d)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class ro{constructor(l,d,y,S){this.screenBounds=l,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,S)}static createFromScreenPoints(l,d){let y,S;if(l instanceof i.P||typeof l[0]=="number"){const T=i.P.convert(l);y=[T],S=d.isPointAboveHorizon(T)}else{const T=i.P.convert(l[0]),I=i.P.convert(l[1]);y=[T,I],S=i.an(T,I).every((N=>d.isPointAboveHorizon(N)))}return new ro(y,d.getCameraPoint(),S,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return i.an(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const d=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],S=i.an(d,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<y.x?S.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?S[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(S[3]=this.cameraPoint)),i.ao(S,l)}bufferedCameraGeometryGlobe(l){const d=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],S=i.an(d,y,l),T=this.cameraPoint.clone();switch(3*((T.y>d.y)+(T.y>y.y))+((T.x>d.x)+(T.x>y.x))){case 0:S[0]=T,S[4]=T.clone();break;case 1:S.splice(1,0,T);break;case 2:S[1]=T;break;case 3:S.splice(4,0,T);break;case 5:S.splice(2,0,T);break;case 6:S[3]=T;break;case 7:S.splice(3,0,T);break;case 8:S[2]=T}return S}containsTile(l,d,y,S=0){const T=l.queryPadding/d._pixelsPerMercatorPixel+1,I=y?this._bufferedCameraMercator(T,d):this._bufferedScreenMercator(T,d);let N=l.tileID.wrap+(I.unwrapped?S:0);const $=I.polygon.map((he=>i.ap(l.tileTransform,he,N)));if(!i.aq($,0,0,i.ai,i.ai))return;N=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?S:0);const U=this.screenGeometryMercator.polygon.map((he=>i.ar(l.tileTransform,he,N))),H=U.map((he=>new i.P(he[0],he[1]))),X=d.getFreeCameraOptions().position||new i.ac(0,0,0),q=i.ar(l.tileTransform,X,N),ne=U.map((he=>{const me=i.ad.vec3.sub(he,he,q);return i.ad.vec3.normalize(me,me),new i.as(q,me)})),de=i.at(l,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:H,tilespaceRays:ne,bufferedTilespaceGeometry:$,bufferedTilespaceBounds:(ae=i.au($),ae.min.x=i.ay(ae.min.x,0,i.ai),ae.min.y=i.ay(ae.min.y,0,i.ai),ae.max.x=i.ay(ae.max.x,0,i.ai),ae.max.y=i.ay(ae.max.y,0,i.ai),ae),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:de};var ae}_bufferedScreenMercator(l,d){const y=ta(l);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{let S;return S=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),d):{polygon:this.bufferedScreenGeometry(l).map((T=>d.pointCoordinate3D(T))),unwrapped:!0},this._screenRaycastCache[y]=S,S}}_bufferedCameraMercator(l,d){const y=ta(l);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{let S;return S=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),d):{polygon:this.bufferedCameraGeometry(l).map((T=>d.pointCoordinate3D(T))),unwrapped:!0},this._cameraRaycastCache[y]=S,S}}_projectAndResample(l,d){const y=(function(T,I){const N=i.ad.mat4.multiply([],I.pixelMatrix,I.globeMatrix),$=[0,-i.az,0,1],U=[0,i.az,0,1],H=[0,0,0,1];i.ad.vec4.transformMat4($,$,N),i.ad.vec4.transformMat4(U,U,N),i.ad.vec4.transformMat4(H,H,N);const X=new i.P($[0]/$[3],$[1]/$[3]),q=new i.P(U[0]/U[3],U[1]/U[3]),ne=i.aw(T,X)&&$[3]<H[3],de=i.aw(T,q)&&U[3]<H[3];if(!ne&&!de)return null;const ae=(function(Fe,Be,Qe){for(let tt=1;tt<Fe.length;tt++){const Ot=Pl(Be.pointCoordinate3D(Fe[tt-1]).x),bt=Pl(Be.pointCoordinate3D(Fe[tt]).x);if(Qe<0){if(Ot<bt)return{idx:tt,t:-Ot/(bt-1-Ot)}}else if(bt<Ot)return{idx:tt,t:(1-Ot)/(bt+1-Ot)}}return null})(T,I,ne?-1:1);if(!ae)return null;const{idx:he,t:me}=ae;let Ie=he>1?Vo(T.slice(0,he),I):[],Le=he<T.length?Vo(T.slice(he),I):[];Ie=Ie.map((Fe=>new i.P(Pl(Fe.x),Fe.y))),Le=Le.map((Fe=>new i.P(Pl(Fe.x),Fe.y)));const De=[...Ie];De.length===0&&De.push(Le[Le.length-1]);const Ye=i.ah(De[De.length-1].y,(Le.length===0?Ie[0]:Le[0]).y,me);let Ne;return Ne=ne?[new i.P(0,Ye),new i.P(0,0),new i.P(1,0),new i.P(1,Ye)]:[new i.P(1,Ye),new i.P(1,1),new i.P(0,1),new i.P(0,Ye)],De.push(...Ne),Le.length===0?De.push(Ie[0]):De.push(...Le),{polygon:De.map((Fe=>new i.ac(Fe.x,Fe.y))),unwrapped:!1}})(l,d);if(y)return y;const S=(function(T,I){let N=!1,$=-1/0,U=0;for(let X=0;X<T.length-1;X++)T[X].x>$&&($=T[X].x,U=X);for(let X=0;X<T.length-1;X++){const q=(U+X)%(T.length-1),ne=T[q],de=T[q+1];Math.abs(ne.x-de.x)>.5&&(ne.x<de.x?(ne.x+=1,q===0&&(T[T.length-1].x+=1)):(de.x+=1,q+1===T.length-1&&(T[0].x+=1)),N=!0)}const H=i.av(I.center.lng);return N&&H<Math.abs(H-1)&&T.forEach((X=>{X.x-=1})),{polygon:T,unwrapped:N}})(Vo(l,d).map((T=>new i.P(Pl(T.x),T.y))),d);return{polygon:S.polygon.map((T=>new i.ac(T.x,T.y))),unwrapped:S.unwrapped}}}function Vo(v,l){return i.ax(v,(d=>{const y=l.pointCoordinate3D(d);d.x=y.x,d.y=y.y}),1/256)}function Pl(v){return v<0?1+v%1:v%1}function ta(v){return 100*v|0}function io(v,l,d,y,S){const T=function(N,$){if(N)return S(N);if($){if(v.url&&$.tiles&&v.tiles&&delete v.tiles,$.variants){if(!Array.isArray($.variants))return S(new Error("variants must be an array"));for(const H of $.variants){if(H==null||typeof H!="object"||H.constructor!==Object)return S(new Error("variant must be an object"));if(!Array.isArray(H.capabilities))return S(new Error("capabilities must be an array"));if(H.capabilities.length===1&&H.capabilities[0]==="meshopt"){$=i.l($,H);break}}}const U=i.aA(i.l({},$,v),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);U.tiles=l.canonicalizeTileset(U,v.url),S(null,U)}},I=(function(N,$,U){if(!N)return null;if(!$&&!U)return N;U=U||N.worldview_default;const H=Object.values(N.language||{});if(H.length===0)return null;const X=Object.values(N.worldview||{});if(X.length===0)return null;const q=H.every((de=>de===$)),ne=X.every((de=>de===U));return q&&ne?N:$ in(N.language_options||{})||U in(N.worldview_options||{})?null:N.language_options&&N.worldview_options?N:null})(v.data,d,y);return I?i.q.frame((()=>T(null,I))):v.url?i.n(l.transformRequest(l.normalizeSourceURL(v.url,null,d,y),i.R.Source),T):i.q.frame((()=>{const{data:N,...$}=v;T(null,$)}))}class _o{constructor(l,d,y){this.bounds=i.aB.convert(this.validateBounds(l)),this.minzoom=d||0,this.maxzoom=y||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const d=Math.pow(2,l.z),y=Math.floor(i.av(this.bounds.getWest())*d),S=Math.floor(i.aC(this.bounds.getNorth())*d),T=Math.ceil(i.av(this.bounds.getEast())*d),I=Math.ceil(i.aC(this.bounds.getSouth())*d);return l.x>=y&&l.x<T&&l.y>=S&&l.y<I}}class kf extends i.E{constructor(l,d,y,S){if(super(),this.id=l,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.l(this,i.aA(d,["url","scheme","tileSize","promoteId"])),this._options=i.l({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S),this._tileWorkers={},this._deduped=new i.aD}load(l){this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,y=this.map.getWorldview();this._tileJSONRequest=io(this._options,this.map._requestManager,d,y,((S,T)=>{if(this._tileJSONRequest=null,this._loaded=!0,S)d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),y&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${y}`),this.fire(new i.z(S));else if(T){if(i.l(this,T),this.hasWorldviews=!!T.worldview_options,T.worldview_default&&(this.worldviewDefault=T.worldview_default),T.vector_layers){this.vectorLayers=T.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const I of T.vector_layers)this.vectorLayerIds.push(I.id),T.worldview&&T.worldview[I.source]&&this.localizableLayerIds.add(I.id)}T.bounds&&(this.tileBounds=new _o(T.bounds,this.minzoom,this.maxzoom)),Ft(T.tiles,this.map._requestManager._customAccessToken),this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))}l&&l(S)}))}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=i.C(this.id,this.scope);this.load((()=>this.map.style.clearSource(l)))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}loadTile(l,d){const y=l.tileID.canonical.url(this.tiles,this.scheme),S=this.map._requestManager.normalizeTileURL(y),T=this.map._requestManager.transformRequest(S,i.R.Tile),I=this.map.style?this.map.style.getLut(this.scope):null,N=I?{image:I.image.clone()}:null,$={request:T,data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,lut:N,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:l.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&i.f(y)&&($.worldview=this.map.getWorldview()||this.worldviewDefault,$.localizableLayerIds=this.localizableLayerIds),$.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=d:l.request=l.actor.send("reloadTile",$,U.bind(this));else if(l.actor=this._tileWorkers[S]=this._tileWorkers[S]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",$,U.bind(this),void 0,!0);else{const H=i.aE.call({deduped:this._deduped},$,((X,q)=>{X||!q?U.call(this,X):($.data={cacheControl:q.cacheControl,expires:q.expires,rawData:q.rawData.slice(0)},l.actor&&l.actor.send("loadTile",$,U.bind(this),void 0,!0))}),!0);l.request={cancel:H}}function U(H,X){return delete l.request,l.aborted?d(null):H&&H.status!==404?d(H):(X&&X.resourceTiming&&(l.resourceTiming=X.resourceTiming),this.map._refreshExpiredTiles&&X&&l.setExpiryData(X),l.loadVectorData(X,this.map.painter),i.aF(this.dispatcher),d(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(l,d){l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope}),l.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ol extends i.E{constructor(l,d,y,S){super(),this.id=l,this.dispatcher=y,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.l({type:"raster"},d),i.l(this,i.aA(d,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"})),this._tileJSONRequest=io(this._options,this.map._requestManager,null,null,((d,y)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new i.z(d)):y&&(i.l(this,y),y.raster_layers&&(this.rasterLayers=y.raster_layers,this.rasterLayerIds=this.rasterLayers.map((S=>S.id))),y.bounds&&(this.tileBounds=new _o(y.bounds,this.minzoom,this.maxzoom)),Ft(y.tiles),this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))),l&&l(d)}))}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=i.C(this.id,this.scope);this.load((()=>this.map.style.clearSource(l)))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,d){const y=i.q.devicePixelRatio>=2,S=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);l.request=i.o(this.map._requestManager.transformRequest(S,i.R.Tile),((T,I,N,$)=>(delete l.request,l.aborted?(l.state="unloaded",d(null)):T?(l.state="errored",d(T)):I?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:N,expires:$}),l.setTexture(I,this.map.painter),l.state="loaded",i.aF(this.dispatcher),void d(null)):d(null))))}abortTile(l,d){l.request&&(l.request.cancel(),delete l.request),d&&d()}unloadTile(l,d){l.texture&&l.texture instanceof i.T?(l.destroy(!0),l.texture&&l.texture instanceof i.T&&this.map.painter.saveTileTexture(l.texture)):l.destroy(),d&&d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Pc extends Ol{constructor(l,d,y,S){super(l,d,y,S),this.type="raster-array",this.maxzoom=22,this.partial=!0,this._options=i.l({type:"raster-array"},d)}triggerRepaint(l){const d=this.map.painter._terrain,y=this.map.style.getSourceCache(this.id);d&&d.enabled&&y&&d._clearRenderCacheForTile(y.id,l.tileID),this.map.triggerRepaint()}loadTile(l,d){const y=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),S=this.map._requestManager.transformRequest(y,i.R.Tile),T={request:S,uid:l.uid,tileID:l.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};l.source=this.id,l.scope=this.scope,l.requestParams=S,l.actor||(l.actor=this.dispatcher.getActor());const I=(N,$,U,H)=>{if(delete l.request,l.aborted)return l.state="unloaded",d(null);if(N)return N.name==="AbortError"?void 0:(l.state="errored",d(N));if(this.map._refreshExpiredTiles&&$&&l.setExpiryData({cacheControl:U,expires:H}),this.partial)l.state="empty";else{if(!$)return d(null);l.state="loaded",l._isHeaderLoaded=!0,l._mrt=$}d(null)};l.request=this.partial?l.fetchHeader(void 0,I.bind(this)):l.actor.send("loadTile",T,I.bind(this),void 0,!0)}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(l,d){const y=l.texture;y&&y instanceof i.T?(l.destroy(!0),this.map.painter.saveTileTexture(y)):(l.destroy(),l.flushQueues(),l._isHeaderLoaded=!1,delete l._mrt,delete l.textureDescriptor),l.fbo&&(l.fbo.destroy(),delete l.fbo),delete l.request,delete l.requestParams,delete l.neighboringTiles,l.state="unloaded"}prepareTile(l,d,y){l._isHeaderLoaded&&(l.state!=="empty"&&(l.state="reloading"),l.fetchBand(d,y,((S,T)=>{if(S)return l.state="errored",this.fire(new i.z(S)),void this.triggerRepaint(l);T&&(l._isHeaderLoaded=!0,l.setTexture(T,this.map.painter),l.state="loaded",this.triggerRepaint(l))})))}getInitialBand(l){if(!this.rasterLayers)return 0;const d=this.rasterLayers.find((({id:T})=>T===l)),y=d&&d.fields,S=y&&y.bands&&y.bands;return S?S[0]:0}getTextureDescriptor(l,d,y){if(!l)return;const S=d.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!S)return;let T=null;d instanceof i.aI?T=d.paint.get("raster-array-band"):d instanceof i.aJ&&(T=d.paint.get("raster-particle-array-band"));const I=T||this.getInitialBand(S);if(I!=null)if(l.textureDescriptor){if(!l.updateNeeded(S,I)||y)return Object.assign({},l.textureDescriptor,{texture:l.texture})}else this.prepareTile(l,S,I)}getImages(l,d){const y=new Map;for(const S of l)for(const T of d){const[I,N]=T.split("/"),$=S.getLayer(I);if(!$||!$.hasBand(N)||!$.hasDataForBand(N))continue;const{bytes:U,tileSize:H,buffer:X}=$.getBandView(N),q=H+2*X,ne={data:new i.r({width:q,height:q},U),pixelRatio:2,sdf:!1,usvg:!1,version:0};y.set(T,ne)}return y}}const eb={vector:kf,raster:Ol,"raster-dem":class extends Ol{constructor(v,l,d,y){super(v,l,d,y),this.type="raster-dem",this.maxzoom=22,this._options=i.l({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(v,l){const d=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(S,T){S&&(v.state="errored",l(S)),T&&(v.dem=T,v.dem.onDeserialize(),v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0,v.state="loaded",l(null))}v.request=i.o(this.map._requestManager.transformRequest(d,i.R.Tile),(function(S,T,I,N){if(delete v.request,v.aborted)v.state="unloaded",l(null);else if(S)v.state="errored",l(S);else if(T){this.map._refreshExpiredTiles&&v.setExpiryData({cacheControl:I,expires:N});const $=ImageBitmap&&T instanceof ImageBitmap&&i.t(),U=1-(T.width-i.aG(T.width))/2;U<1||v.neighboringTiles||(v.neighboringTiles=this._getNeighboringTiles(v.tileID));const H=$?T:i.q.getImageData(T,U),X={uid:v.uid,tileID:v.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:H,encoding:this.encoding,padding:U};v.actor&&v.state!=="expired"||(v.actor=this.dispatcher.getActor(),v.actor.send("loadTile",X,y.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(v){const l=v.canonical,d=Math.pow(2,l.z),y=(l.x-1+d)%d,S=l.x===0?v.wrap-1:v.wrap,T=(l.x+1+d)%d,I=l.x+1===d?v.wrap+1:v.wrap,N={};return N[new i.aH(v.overscaledZ,S,l.z,y,l.y).key]={backfilled:!1},N[new i.aH(v.overscaledZ,I,l.z,T,l.y).key]={backfilled:!1},l.y>0&&(N[new i.aH(v.overscaledZ,S,l.z,y,l.y-1).key]={backfilled:!1},N[new i.aH(v.overscaledZ,v.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},N[new i.aH(v.overscaledZ,I,l.z,T,l.y-1).key]={backfilled:!1}),l.y+1<d&&(N[new i.aH(v.overscaledZ,S,l.z,y,l.y+1).key]={backfilled:!1},N[new i.aH(v.overscaledZ,v.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},N[new i.aH(v.overscaledZ,I,l.z,T,l.y+1).key]={backfilled:!1}),N}},"raster-array":Pc,geojson:class extends i.E{constructor(v,l,d,y){super(),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(y),this._data=l.data,this._options=i.l({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.minzoom!==void 0&&(this.minzoom=l.minzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const S=i.ai/this.tileSize;this.workerOptions=i.l({source:this.id,scope:this.scope,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*S,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*S,extent:i.ai,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:i.ai,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*S,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter,dynamic:l.dynamic},l.workerOptions)}onAdd(v){this.map=v,this.setData(this._data)}setData(v){return this._data=v,this._updateWorkerData(),this}updateData(v){if(!this._options.dynamic)return this.fire(new i.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof v!="string"&&(v.type==="Feature"&&(v={type:"FeatureCollection",features:[v]}),v.type!=="FeatureCollection"))return this.fire(new i.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof v!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const l=new Map;for(const d of this._data.features)l.set(d.id,d);for(const d of v.features)l.set(d.id,d);this._data.features=[...l.values()]}else this._data=v;return this._updateWorkerData(!0),this}getClusterExpansionZoom(v,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id,scope:this.scope},l),this}getClusterChildren(v,l){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id,scope:this.scope},l),this}getClusterLeaves(v,l,d,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:v,limit:l,offset:d},y),this}_updateWorkerData(v=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new i.A("dataloading",{dataType:"source"})),this._loaded=!1;const l=i.l({append:v},this.workerOptions);l.scope=this.scope;const d=this._data;typeof d=="string"?(l.request=this.map._requestManager.transformRequest(i.q.resolveURL(d),i.R.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,l,((y,S)=>{if(this._loaded=!0,this._pendingLoad=null,y)this.fire(new i.z(y));else{const T={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&S&&S.resourceTiming&&S.resourceTiming[this.id]&&(T.resourceTiming=S.resourceTiming[this.id]),v&&(this._partialReload=!0),this.fire(new i.A("data",T)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(v),this._coalesce=!1)}))}loaded(){return this._loaded}reload(){const v=i.C(this.id,this.scope);this.map.style.clearSource(v),this._updateWorkerData()}loadTile(v,l){const d=v.actor?"reloadTile":"loadTile";v.actor=this.actor;const y=this.map.style?this.map.style.getLut(this.scope):null,S=y?{image:y.image.clone()}:null,T=this._partialReload,I={type:this.type,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:S,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:T};v.request=this.actor.send(d,I,((N,$)=>T&&!$?(v.state="loaded",l(null)):(delete v.request,v.destroy(),v.aborted?l(null):N?l(N):(v.loadVectorData($,this.map.painter,d==="reloadTile"),l(null)))),void 0,d==="loadTile")}abortTile(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0}unloadTile(v,l){this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id,scope:this.scope}),v.destroy()}onRemove(v){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return i.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends i.aK{constructor(v,l,d,y){super(v,l,d,y),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const v=this.options;this.urls=[];for(const l of v.urls)this.urls.push(this.map._requestManager.transformRequest(l,i.R.Source).url);i.aL(this.urls,((l,d)=>{this._loaded=!0,l?this.fire(new i.z(l)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(v){if(this.video){const l=this.video.seekable;v<l.start(0)||v>l.end(0)?this.fire(new i.z(new i.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=v}}getVideo(){return this.video}onAdd(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const v=this.map.painter.context,l=v.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new i.T(v,this.video,l.RGBA8),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(v)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:i.aK,model:class extends i.E{constructor(v,l,d,y){super(),this.id=v,this.type="model",this.models=[],this._loaded=!1,this._options=l}load(){const v=[];for(const l in this._options.models){const d=this._options.models[l],y=i.aN(this.map._requestManager.transformRequest(d.uri,i.R.Model).url).then((S=>{if(!S)return;const T=i.aO(S),I=new i.aP(l,d.position,d.orientation,T);I.computeBoundsAndApplyParent(),this.models.push(I)})).catch((S=>{this.fire(new i.z(new Error(`Could not load model ${l} from ${d.uri}: ${S.message}`)))}));v.push(y)}return Promise.allSettled(v).then((()=>{this._loaded=!0,this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"}))})).catch((l=>{this.fire(new i.z(new Error(`Could not load models: ${l.message}`)))}))}onAdd(v){this.map=v,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(v,l){}serialize(){return{type:"model"}}},"batched-model":class extends i.E{constructor(v,l,d,y){super(),this.type="batched-model",this.id=v,this.tileSize=512,this._options=l,this.tiles=this._options.tiles,this.maxzoom=l.maxzoom||19,this.minzoom=l.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(y)}onAdd(v){this.map=v,this.load()}reload(){this.cancelTileJSONRequest();const v=i.C(this.id,this.scope);this.load((()=>this.map.style.clearSource(v)))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(v){this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map.getWorldview();this._tileJSONRequest=io(this._options,this.map._requestManager,l,d,((y,S)=>{this._tileJSONRequest=null,this._loaded=!0,y?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),d&&d.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new i.z(y))):S&&(i.l(this,S),S.bounds&&(this.tileBounds=new _o(S.bounds,this.minzoom,this.maxzoom)),Ft(S.tiles,this.map._requestManager._customAccessToken),this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))),v&&v(y)}))}hasTransition(){return!1}hasTile(v){return!this.tileBounds||this.tileBounds.contains(v.canonical)}loaded(){return this._loaded}loadTile(v,l){const d=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme)),y={request:this.map._requestManager.transformRequest(d,i.R.Tile),data:void 0,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,tileSize:this.tileSize*v.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:v.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:i.q.devicePixelRatio,promoteId:this.promoteId};if(v.actor&&v.state!=="expired")if(v.state==="loading")v.reloadCallback=l;else{if(v.buckets){const T=Object.values(v.buckets);for(const I of T)I.dirty=!0;return void(v.state="loaded")}v.request=v.actor.send("reloadTile",y,S.bind(this))}else v.actor=this.dispatcher.getActor(),v.request=v.actor.send("loadTile",y,S.bind(this),void 0,!0);function S(T,I){return v.aborted?l(null):T&&T.status!==404?l(T):(this.map._refreshExpiredTiles&&I&&v.setExpiryData(I),v.loadModelData(I,this.map.painter),v.state="loaded",void l(null))}}serialize(){return i.l({},this._options)}},canvas:class extends i.aK{constructor(v,l,d,y){super(v,l,d,y),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some((S=>!Array.isArray(S)||S.length!==2||S.some((T=>typeof T!="number"))))||this.fire(new i.z(new i.V(`sources.${v}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.z(new i.V(`sources.${v}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new i.z(new i.V(`sources.${v}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new i.z(new i.V(`sources.${v}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.z(new i.V(`sources.${v}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()}onRemove(v){this.pause()}prepare(){let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?!v&&!this._playing||this.texture instanceof i.aM||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.T(l,this.canvas,l.gl.RGBA8,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const v of[this.canvas.width,this.canvas.height])if(isNaN(v)||v<=0)return!0;return!1}},custom:class extends i.E{constructor(v,l,d,y){super(),this.id=v,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=l,this.setEventedParent(y),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new i.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new i.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new _o(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),i.l(this,i.aA(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return i.aA(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new i.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(v){this.map=v,this._loaded=!1,this.fire(new i.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(v),this.load()}onRemove(v){this._implementation.onRemove&&this._implementation.onRemove(v)}hasTile(v){if(this._implementation.hasTile){const{x:l,y:d,z:y}=v.canonical;return this._implementation.hasTile({x:l,y:d,z:y})}return!this.tileBounds||this.tileBounds.contains(v.canonical)}loadTile(v,l){const{x:d,y,z:S}=v.tileID.canonical,T=new AbortController;v.request=Promise.resolve(this._implementation.loadTile({x:d,y,z:S},{signal:T.signal})).then((function(I){return delete v.request,v.aborted?(v.state="unloaded",l(null)):I===void 0?(v.state="errored",l(null)):I===null?(this.loadTileData(v,{width:this.tileSize,height:this.tileSize,data:null}),v.state="loaded",l(null)):(function(N){return N instanceof ImageData||N instanceof HTMLCanvasElement||N instanceof ImageBitmap||N instanceof HTMLImageElement})(I)?(this.loadTileData(v,I),v.state="loaded",void l(null)):(v.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch((I=>{I.name!=="AbortError"&&(v.state="errored",l(I))})),v.request.cancel=()=>T.abort()}loadTileData(v,l){v.setTexture(l,this.map.painter)}unloadTile(v,l){if(v.texture&&v.texture instanceof i.T?(v.destroy(!0),v.texture&&v.texture instanceof i.T&&this.map.painter.saveTileTexture(v.texture)):v.destroy(),this._implementation.unloadTile){const{x:d,y,z:S}=v.tileID.canonical;this._implementation.unloadTile({x:d,y,z:S})}l&&l()}abortTile(v,l){v.request&&v.request.cancel&&(v.request.cancel(),delete v.request),l&&l()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((v=>({x:v.canonical.x,y:v.canonical.y,z:v.canonical.z})))}_clearTiles(){const v=i.C(this.id,this.scope);this.map.style.clearSource(v)}_update(){this.fire(new i.A("data",{dataType:"source",sourceDataType:"content"}))}}},Py=function(v,l,d,y){const S=new eb[l.type](v,l,d,y);if(S.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${S.id}`);return i.aQ(["load","abort","unload","serialize","prepare"],S),S};function lg(v,l,d=""){return`${d}:${l.id||""}:${l.layer.id}:${(function(y){if("layerId"in y)return`layer:${y.layerId}`;{const{featuresetId:S,importId:T}=y;return`featureset:${S}${T?`:import:${T}`:""}`}})(v.target)}`}function Lf(v,l,d,y=""){if(v.uniqueFeatureID){const S=lg(v,l,y);if(d.has(S))return!0;d.add(S)}return!1}function tb(v,l,d,y,S=!1){const T=l.sourceCache.transform,I=l.sourceCache.tilesIn(v,l.has3DLayers,S);I.sort(nb);const N=[];for(const $ of I){const U=$.tile.queryRenderedFeatures(l,$,d,y,T,S);Object.keys(U).length&&N.push({wrappedTileID:$.tile.tileID.wrapped().key,queryResults:U})}return N.length===0?{}:(function($){const U={},H={};for(const X of $){const q=X.queryResults,ne=X.wrappedTileID,de=H[ne]=H[ne]||{};for(const ae in q){const he=q[ae],me=de[ae]=de[ae]||{},Ie=U[ae]=U[ae]||[];for(const Le of he)me[Le.featureIndex]||(me[Le.featureIndex]=!0,Ie.push(Le))}}return U})(N)}function _E(v,l,d,y,S){const T={},I=y.queryRenderedSymbols(v),N=[];for(const $ of Object.keys(I).map(Number))N.push(S[$]);N.sort(nb);for(const $ of N){const U=$.featureIndex.lookupSymbolFeatures(I[$.bucketInstanceId],$.bucketIndex,$.sourceLayerIndex,l,d);for(const H in U){const X=T[H]=T[H]||[],q=U[H];q.sort(((ne,de)=>{const ae=$.featureSortOrder;if(ae){const he=ae.indexOf(ne.featureIndex);return ae.indexOf(de.featureIndex)-he}return de.featureIndex-ne.featureIndex}));for(const ne of q)X.push(ne)}}return T}function yE(v,l){const d=v.getRenderableIds().map((T=>v.getTileByID(T))),y=[],S={};for(let T=0;T<d.length;T++){const I=d[T],N=I.tileID.canonical.key;S[N]||(S[N]=!0,I.querySourceFeatures(y,l))}return y}function nb(v,l){const d=v.tileID,y=l.tileID;return d.overscaledZ-y.overscaledZ||d.canonical.y-y.canonical.y||d.wrap-y.wrap||d.canonical.x-y.canonical.x}function Nf(v,l){const d={};if(!l)return d;for(const y of v){const S=y.layerIds.map((T=>l.getLayer(T))).filter(Boolean);if(S.length!==0){y.layers=S,y.stateDependentLayerIds&&(y.stateDependentLayers=y.stateDependentLayerIds.map((T=>S.filter((I=>I.id===T))[0])));for(const T of S)d[T.fqid]=y}}return d}const Ja=32,ic=33,ud=new Uint16Array(8184);for(let v=0;v<2046;v++){let l=v+2,d=0,y=0,S=0,T=0,I=0,N=0;for(1&l?S=T=I=Ja:d=y=N=Ja;(l>>=1)>1;){const U=d+S>>1,H=y+T>>1;1&l?(S=d,T=y,d=I,y=N):(d=S,y=T,S=I,T=N),I=U,N=H}const $=4*v;ud[$+0]=d,ud[$+1]=y,ud[$+2]=S,ud[$+3]=T}const Qa=new Uint16Array(2178),Ca=new Uint8Array(1089),Ff=new Uint16Array(1089);function rb(v){return v===0?-.03125:v===32?.03125:0}const Oy={type:2,extent:i.ai,loadGeometry:()=>[[new i.P(0,0),new i.P(i.ai+1,0),new i.P(i.ai+1,i.ai+1),new i.P(0,i.ai+1),new i.P(0,0)]]};class sc{constructor(l,d,y,S,T){this.tileID=l,this.uid=i.aW(),this.uses=0,this.tileSize=d,this.tileZoom=y,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=T,S&&S.style&&(this._lastUpdatedBrightness=S.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",S&&S.transform&&(this.projection=S.transform.projection)}registerFadeDuration(l){const d=l+this.timeAdded;d<i.q.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=i.aR(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(l,d,y){if(this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=Nf(l.buckets,d.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const T=this.buckets[S];if(T instanceof i.aY){if(this.hasSymbolBuckets=!0,!y)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const T=this.buckets[S];if(T instanceof i.aY&&T.hasRTLText){this.hasRTLText=!0,i.aZ();break}}this.queryPadding=0;for(const S in this.buckets){const T=this.buckets[S],I=d.style.getOwnLayer(S);if(!I)continue;const N=I.queryRadius(T);this.queryPadding=Math.max(this.queryPadding,N)}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),l.lineAtlas&&(this.lineAtlas=l.lineAtlas),this._lastUpdatedBrightness=l.brightness}else this.collisionBoxArray=new i.aX}unloadVectorData(){if(this.hasData()){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(l,d,y){l&&(l.resourceTiming&&(this.resourceTiming=l.resourceTiming),this.buckets=Object.assign({},this.buckets,Nf(l.buckets,d.style)),l.featureIndex&&(this.latestFeatureIndex=l.featureIndex))}getBucket(l){return this.buckets[l.fqid]}upload(l){for(const S in this.buckets){const T=this.buckets[S];T.uploadPending()&&T.upload(l)}const d=l.gl,y=this.imageAtlas;y&&!y.uploaded&&(this.imageAtlasTexture=new i.T(l,y.image,d.RGBA8,{useMipmap:!!y.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new i.T(l,this.glyphAtlasImage,d.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new i.T(l,this.lineAtlas.image,d.R8),this.lineAtlas.uploaded=!0)}prepare(l,d,y){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture,y),!d||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const S=d.style.getBrightness();(this._lastUpdatedBrightness||S)&&(this._lastUpdatedBrightness&&S&&Math.abs(this._lastUpdatedBrightness-S)<.001||(this.updateBuckets(d,this._lastUpdatedBrightness!==S),this._lastUpdatedBrightness=S))}queryRenderedFeatures(l,d,y,S,T,I){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const N=(function($,U){const H=i.ad.mat4.fromScaling([],[.5*$.width,.5*-$.height,1]);return i.ad.mat4.translate(H,H,[1,-1,0]),i.ad.mat4.multiply(H,H,$.calculateProjMatrix(U.toUnwrapped())),Float32Array.from(H)})(T,this.tileID);return this.latestFeatureIndex.query(l,{tilespaceGeometry:d,pixelPosMatrix:N,transform:S,availableImages:y,tileTransform:this.tileTransform})}querySourceFeatures(l,d){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const S=y.loadVTLayers(),T=d?d.sourceLayer:"",I=S._geojsonTileLayer||S[T];if(!I)return;const N=i.a_(d&&d.filter),{z:$,x:U,y:H}=this.tileID.canonical,X={z:$,x:U,y:H};for(let q=0;q<I.length;q++){const ne=I.feature(q);if(N.needGeometry){const he=i.a$(ne,!0);if(!N.filter(new i.aa(this.tileID.overscaledZ),he,this.tileID.canonical))continue}else if(!N.filter(new i.aa(this.tileID.overscaledZ),ne))continue;const de=y.getId(ne,T),ae=new i.b0(ne,$,U,H,de);ae.tile=X,l.push(ae)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(l){const d=this.expirationTime;if(l.cacheControl){const y=i.b1(l.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const y=Date.now();let S=!1;if(this.expirationTime>y)S=!1;else if(d)if(this.expirationTime<d)S=!0;else{const T=this.expirationTime-d;T?this.expirationTime=y+Math.max(T,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(l){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&l&&this.updateBuckets(l)}updateBuckets(l,d){if(!this.latestFeatureIndex||!l.style)return;const y=this.latestFeatureIndex.loadVTLayers(),S=l.style.listImages(),T=l.style.getBrightness();for(const I in this.buckets){if(!l.style.hasLayer(I))continue;const N=this.buckets[I],$=N.layers[0],U=$.sourceLayer||"_geojsonTileLayer",H=y[U],X=l.style.getLayerSourceCache($);let q={};X&&(q=X._state.getState(U,void 0));const ne=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},de=Object.keys(q).length>0&&!d;de&&!N.stateDependentLayers.length&&!d||N.update(q,H,S,ne,de?N.stateDependentLayers:N.layers,d,T),(N instanceof i.b2||N instanceof i.b3)&&l._terrain&&l._terrain.enabled&&X&&N.uploadPending()&&l._terrain._clearRenderCacheForTile(X.id,this.tileID);const ae=l&&l.style&&l.style.getOwnLayer(I);ae&&(this.queryPadding=Math.max(this.queryPadding,ae.queryRadius(N)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<i.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=i.q.now()+l}setTexture(l,d){const y=d.context,S=y.gl;this.texture=this.texture||d.getTileTexture(l.width),this.texture&&this.texture instanceof i.T?this.texture.update(l):(this.texture=new i.T(y,l,S.RGBA8,{useMipmap:!0}),this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE))}setDependencies(l,d){const y={};for(const S of d)y[S]=!0;this.dependencies[l]=y}hasDependency(l,d){for(const y of l){const S=this.dependencies[y];if(S){for(const T of d)if(S[T])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(l,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const y=i.b4(Oy,this.tileID.canonical,this.tileTransform)[0],S=new i.b5,T=new i.b6;for(let I=0;I<y.length;I++){const{x:N,y:$}=y[I];S.emplaceBack(N,$),T.emplaceBack(I)}T.emplaceBack(0),this._tileDebugIndexBuffer=l.createIndexBuffer(T),this._tileDebugBuffer=l.createVertexBuffer(S,i.b7.members),this._tileDebugSegments=i.b8.simpleSegment(0,0,S.length,T.length)}_makeTileBoundsBuffers(l,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const y=i.b4(Oy,this.tileID.canonical,this.tileTransform)[0];let S,T;if(this.isRaster){const I=(function(N,$){const U=i.aR(N,$),H=Math.pow(2,N.z);for(let he=0;he<ic;he++)for(let me=0;me<ic;me++){const Ie=i.aS((N.x+(me+rb(me))/Ja)/H),Le=i.aT((N.y+(he+rb(he))/Ja)/H),De=$.project(Ie,Le),Ye=he*ic+me;Qa[2*Ye+0]=Math.round((De.x*U.scale-U.x)*i.ai),Qa[2*Ye+1]=Math.round((De.y*U.scale-U.y)*i.ai)}Ca.fill(0),Ff.fill(0);for(let he=2045;he>=0;he--){const me=4*he,Ie=ud[me+0],Le=ud[me+1],De=ud[me+2],Ye=ud[me+3],Ne=Ie+De>>1,Fe=Le+Ye>>1,Be=Ne+Fe-Le,Qe=Fe+Ie-Ne,tt=Le*ic+Ie,Ot=Ye*ic+De,bt=Fe*ic+Ne,Ht=Math.hypot((Qa[2*tt+0]+Qa[2*Ot+0])/2-Qa[2*bt+0],(Qa[2*tt+1]+Qa[2*Ot+1])/2-Qa[2*bt+1])>=16;Ca[bt]=Ca[bt]||(Ht?1:0),he<1022&&(Ca[bt]=Ca[bt]||Ca[(Le+Qe>>1)*ic+(Ie+Be>>1)]||Ca[(Ye+Qe>>1)*ic+(De+Be>>1)])}const X=new i.aU,q=new i.aV;let ne=0;function de(he,me){const Ie=me*ic+he;return Ff[Ie]===0&&(X.emplaceBack(Qa[2*Ie+0],Qa[2*Ie+1],he*i.ai/Ja,me*i.ai/Ja),Ff[Ie]=++ne),Ff[Ie]-1}function ae(he,me,Ie,Le,De,Ye){const Ne=he+Ie>>1,Fe=me+Le>>1;if(Math.abs(he-De)+Math.abs(me-Ye)>1&&Ca[Fe*ic+Ne])ae(De,Ye,he,me,Ne,Fe),ae(Ie,Le,De,Ye,Ne,Fe);else{const Be=de(he,me),Qe=de(Ie,Le),tt=de(De,Ye);q.emplaceBack(Be,Qe,tt)}}return ae(0,0,Ja,Ja,Ja,0),ae(Ja,Ja,0,0,0,Ja),{vertices:X,indices:q}})(this.tileID.canonical,d);S=I.vertices,T=I.indices}else{S=new i.aU,T=new i.aV;for(const{x:N,y:$}of y)S.emplaceBack(N,$,0,0);const I=i.b9(S.int16,void 0,4);for(let N=0;N<I.length;N+=3)T.emplaceBack(I[N],I[N+1],I[N+2])}this._tileBoundsBuffer=l.createVertexBuffer(S,i.ba.members),this._tileBoundsIndexBuffer=l.createIndexBuffer(T),this._tileBoundsSegments=i.b8.simpleSegment(0,0,S.length,T.length)}_makeGlobeTileDebugBuffers(l,d){const y=d.projection;if(!y||y.name!=="globe"||d.freezeTileCoverage)return;const S=this.tileID.canonical,T=i.bb(S,d),I=i.bc(T),N=i.ag(d.zoom);let $;N>0&&($=i.ad.mat4.invert(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(l,S,d,I,$,N),this._makeGlobeTileDebugTextBuffer(l,S,d,I,$,N)}_globePoint(l,d,y,S,T,I,N){let $=i.bd(l,d,y);if(I){const U=1<<y.z,H=i.av(S.center.lng),X=i.aC(S.center.lat),q=(y.x+.5)/U-H;let ne=0;q>.5?ne=-1:q<-.5&&(ne=1);let de=(l/i.ai+y.x)/U+ne,ae=(d/i.ai+y.y)/U;de=(de-H)*S._pixelsPerMercatorPixel+H,ae=(ae-X)*S._pixelsPerMercatorPixel+X;const he=[de*S.worldSize,ae*S.worldSize,0];i.ad.vec3.transformMat4(he,he,I),$=i.be($,he,N)}return i.ad.vec3.transformMat4($,$,T)}_makeGlobeTileDebugBorderBuffer(l,d,y,S,T,I){const N=new i.b5,$=new i.b6,U=new i.bf,H=(q,ne,de,ae,he)=>{const me=(de-q)/(he-1),Ie=(ae-ne)/(he-1),Le=N.length;for(let De=0;De<he;De++){const Ye=q+De*me,Ne=ne+De*Ie;N.emplaceBack(Ye,Ne);const Fe=this._globePoint(Ye,Ne,d,y,S,T,I);U.emplaceBack(Fe[0],Fe[1],Fe[2]),$.emplaceBack(Le+De)}},X=i.ai;H(0,0,X,0,16),H(X,0,X,X,16),H(X,X,0,X,16),H(0,X,0,0,16),this._tileDebugIndexBuffer=l.createIndexBuffer($),this._tileDebugBuffer=l.createVertexBuffer(N,i.b7.members),this._globeTileDebugBorderBuffer=l.createVertexBuffer(U,i.bg.members),this._tileDebugSegments=i.b8.simpleSegment(0,0,N.length,$.length)}_makeGlobeTileDebugTextBuffer(l,d,y,S,T,I){const N=i.ai/4,$=new i.b5,U=new i.aV,H=new i.bf,X=25;U.reserve(32),$.reserve(X),H.reserve(X);const q=(ne,de)=>X*ne+de;for(let ne=0;ne<X;ne++){const de=ne*N;for(let ae=0;ae<X;ae++){const he=ae*N;$.emplaceBack(he,de);const me=this._globePoint(he,de,d,y,S,T,I);H.emplaceBack(me[0],me[1],me[2])}}for(let ne=0;ne<4;ne++)for(let de=0;de<4;de++){const ae=q(ne,de),he=q(ne,de+1),me=q(ne+1,de),Ie=q(ne+1,de+1);U.emplaceBack(ae,he,me),U.emplaceBack(me,he,Ie)}this._tileDebugTextIndexBuffer=l.createIndexBuffer(U),this._tileDebugTextBuffer=l.createVertexBuffer($,i.b7.members),this._globeTileDebugTextBuffer=l.createVertexBuffer(H,i.bg.members),this._tileDebugTextSegments=i.b8.simpleSegment(0,0,X,32)}destroy(l=!1){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!l&&this.texture&&this.texture instanceof i.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}i.bh.setPbf(i.bi);class da extends sc{constructor(l,d,y,S,T){super(l,d,y,S,T),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(l){return this._mrt&&this._mrt.getLayer(l)}setTexture(l,d){const y=d.context,S=y.gl;this.texture=this.texture||d.getTileTexture(l.width),this.texture&&this.texture instanceof i.T?this.texture.update(l,{premultiply:!1}):this.texture=new i.T(y,l,S.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(l=16384,d){const y=this._mrt=new i.bh(30),S=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(l-1)}});return this.entireBuffer=null,this.request=i.bj(S,((T,I,N,$)=>{if(T)d(T);else try{const U=y.getHeaderLength(I);if(U>l)return void(this.request=this.fetchHeader(U,d));y.parseHeader(I),this._isHeaderLoaded=!0;let H=0;for(const X of Object.values(y.layers))H=Math.max(H,X.dataIndex[X.dataIndex.length-1].lastByte);I.byteLength>=H&&(this.entireBuffer=I),d(null,this.entireBuffer||I,N,$)}catch(U){d(U)}})),this.request}fetchBand(l,d,y){const S=this._mrt;if(!this._isHeaderLoaded||!S)return void y(new Error("Tile header is not ready"));const T=this.actor;if(!T)return void y(new Error("Can't fetch tile band without an actor"));let I;const N=(X,q)=>{I.complete(X,q),X?y(X):(this.updateTextureDescriptor(l,d),y(null,this.textureDescriptor&&this.textureDescriptor.img))},$=(X,q)=>{if(X)return y(X);const ne=T.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:q,task:I},N,void 0,!0);this._workQueue.push((()=>{ne&&ne.cancel(),I.cancel()}))},U=S.getLayer(l);if(!U)return void y(new Error(`Unknown sourceLayer "${l}"`));if(U.hasDataForBand(d))return this.updateTextureDescriptor(l,d),void y(null,this.textureDescriptor?this.textureDescriptor.img:null);const H=U.getDataRange([d]);if(I=S.createDecodingTask(H),!I||I.tasks.length)if(this.flushQueues(),this.entireBuffer)$(null,this.entireBuffer.slice(H.firstByte,H.lastByte+1));else{const X=Object.assign({},this.requestParams,{headers:{Range:`bytes=${H.firstByte}-${H.lastByte}`}}),q=i.bj(X,$);this._fetchQueue.push((()=>{q.cancel(),I.cancel()}))}else y(null)}updateNeeded(l,d){return(!this.textureDescriptor||this.textureDescriptor.band!==d||this.textureDescriptor.layer!==l)&&this.state!=="errored"}updateTextureDescriptor(l,d){if(!this._mrt)return;const y=this._mrt.getLayer(l);if(!y||!y.hasBand(d)||!y.hasDataForBand(d))return;const{bytes:S,tileSize:T,buffer:I,offset:N,scale:$}=y.getBandView(d),U=T+2*I,H=new i.r({width:U,height:U},S),X=this.texture;X&&X instanceof i.T&&X.update(H,{premultiply:!1}),this.textureDescriptor={layer:l,band:d,img:H,buffer:I,offset:N,tileSize:T,format:y.pixelFormat,mix:[$,256*$,65536*$,16777216*$]}}}class vE{constructor(l,d){this.max=l,this.onRemove=d,this.reset()}reset(){for(const l in this.data)for(const d of this.data[l])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(l,d,y){const S=l.wrapped().key;this.data[S]===void 0&&(this.data[S]=[]);const T={value:d,timeout:void 0};if(y!==void 0&&(T.timeout=setTimeout((()=>{this.remove(l,T)}),y)),this.data[S].push(T),this.order.push(S),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const d=this.data[l].shift();return d.timeout&&clearTimeout(d.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),d.value}getByKey(l){const d=this.data[l];return d?d[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,d){if(!this.has(l))return this;const y=l.wrapped().key,S=d===void 0?0:this.data[y].indexOf(d),T=this.data[y][S];return this.data[y].splice(S,1),T.timeout&&clearTimeout(T.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(T.value),this.order.splice(this.order.indexOf(y),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(l){const d=[];for(const y in this.data)for(const S of this.data[y])l(S.value)||d.push(S);for(const y of d)this.remove(y.value.tileID,y)}}class ib{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,d,y){const S=String(d);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][S]=this.stateChanges[l][S]||{},i.l(this.stateChanges[l][S],y),this.deletedStates[l]===null){this.deletedStates[l]={};for(const T in this.state[l])T!==S&&(this.deletedStates[l][T]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][S]===null){this.deletedStates[l][S]={};for(const T in this.state[l][S])y[T]||(this.deletedStates[l][S][T]=null)}else for(const T in y)this.deletedStates[l]&&this.deletedStates[l][S]&&this.deletedStates[l][S][T]===null&&delete this.deletedStates[l][S][T]}removeFeatureState(l,d,y){if(this.deletedStates[l]===null)return;const S=String(d);if(this.deletedStates[l]=this.deletedStates[l]||{},y&&d!==void 0)this.deletedStates[l][S]!==null&&(this.deletedStates[l][S]=this.deletedStates[l][S]||{},this.deletedStates[l][S][y]=null);else if(d!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][S])for(y in this.deletedStates[l][S]={},this.stateChanges[l][S])this.deletedStates[l][S][y]=null;else this.deletedStates[l][S]=null;else this.deletedStates[l]=null}getState(l,d){const y=this.state[l]||{},S=this.stateChanges[l]||{},T=this.deletedStates[l];if(T===null)return{};if(d!==void 0){const N=String(d),$=i.l({},y[N],S[N]);if(T){const U=T[d];if(U===null)return{};for(const H in U)delete $[H]}return $}const I=i.l({},y,S);if(T)for(const N in T)delete I[N];return I}initializeTileState(l,d){l.refreshFeatureState(d)}coalesceChanges(l,d){const y={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const T={};for(const I in this.stateChanges[S])this.state[S][I]||(this.state[S][I]={}),i.l(this.state[S][I],this.stateChanges[S][I]),T[I]=this.state[S][I];y[S]=T}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const T={};if(this.deletedStates[S]===null)for(const I in this.state[S])T[I]={},this.state[S][I]={};else for(const I in this.deletedStates[S]){if(this.deletedStates[S][I]===null)this.state[S][I]={};else if(this.state[S][I])for(const N of Object.keys(this.deletedStates[S][I]))delete this.state[S][I][N];T[I]=this.state[S][I]}y[S]=y[S]||{},i.l(y[S],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0)for(const S in l)l[S].refreshFeatureState(d)}}class Dl extends i.E{constructor(l,d,y){super(),this.id=l,this._onlySymbols=y,d.on("data",(S=>{S.dataType==="source"&&S.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&S.dataType==="source"&&S.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))})),d.on("error",(()=>{this._sourceErrored=!0})),this._source=d,this._tiles={},this._cache=new vE(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new ib,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(l){this.map=l,this._minTileCacheSize=this._minTileCacheSize===void 0&&l?l._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&l?l._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles)if(!this._tiles[l].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(l,d){return l.isSymbolTile=this._onlySymbols,l.isExtraShadowCaster=this._shadowCasterTiles[l.tileID.key],this._source.loadTile(l,d)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l)}_abortTile(l){if(this._source.abortTile)return this._source.abortTile(l)}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const y=this._tiles[d];y.upload(l),y.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map((l=>l.tileID)).sort(ii).map((l=>l.key))}getRenderableIds(l,d){const y=[];for(const S in this._tiles)this._isIdRenderable(+S,l,d)&&y.push(this._tiles[S]);return l?y.sort(((S,T)=>{const I=S.tileID,N=T.tileID,$=new i.P(I.canonical.x,I.canonical.y)._rotate(this.transform.angle),U=new i.P(N.canonical.x,N.canonical.y)._rotate(this.transform.angle);return I.overscaledZ-N.overscaledZ||U.y-$.y||U.x-$.x})).map((S=>S.tileID.key)):y.map((S=>S.tileID)).sort(ii).map((S=>S.key))}hasRenderableParent(l){const d=this.findLoadedParent(l,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(l,d,y){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(d||!this._tiles[l].holdingForFade())&&(y||!this._shadowCasterTiles[l])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(+l,"reloading")}}_reloadTile(l,d){const y=this._tiles[l];y&&(y.state!=="loading"&&(y.state=d),this._loadTile(y,this._tileLoaded.bind(this,y,l,d)))}_tileLoaded(l,d,y,S){if(S)if(l.state="errored",S.status!==404)this._source.fire(new i.z(S,{tile:l}));else{if(this._source.fire(new i.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:l})),!(l.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const T=this.map.painter.terrain;this.update(this.transform,T.getScaledDemTileSize(),!0),T.resetTileLookupCache(this.id)}else this.update(this.transform)}else l.timeAdded=i.q.now(),y==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(d,l),this._source.type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),this._source.fire(new i.A("data",{dataType:"source",tile:l,coord:l.tileID,sourceCacheId:this.id}))}_backfillDEM(l){const d=this.getRenderableIds();for(let S=0;S<d.length;S++){const T=d[S];if(l.neighboringTiles&&l.neighboringTiles[T]){const I=this.getTileByID(T);y(l,I),y(I,l)}}function y(S,T){if(!S.dem||S.dem.borderReady)return;S.needsHillshadePrepare=!0,S.needsDEMTextureUpload=!0;let I=T.tileID.canonical.x-S.tileID.canonical.x;const N=T.tileID.canonical.y-S.tileID.canonical.y,$=Math.pow(2,S.tileID.canonical.z),U=T.tileID.key;I===0&&N===0||Math.abs(N)>1||(Math.abs(I)>1&&(Math.abs(I+$)===1?I+=$:Math.abs(I-$)===1&&(I-=$)),T.dem&&S.dem&&(S.dem.backfillBorder(T.dem,I,N),S.neighboringTiles&&S.neighboringTiles[U]&&(S.neighboringTiles[U].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,d,y,S){for(const T in this._tiles){let I=this._tiles[T];if(S[T]||!I.hasData()||I.tileID.overscaledZ<=d||I.tileID.overscaledZ>y)continue;let N=I.tileID;for(;I&&I.tileID.overscaledZ>d+1;){const U=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[U.key],I&&I.hasData()&&(N=U)}let $=N;for(;$.overscaledZ>d;)if($=$.scaledTo($.overscaledZ-1),l[$.key]){S[N.key]=N;break}}}findLoadedParent(l,d){if(l.key in this._loadedParentTiles){const y=this._loadedParentTiles[l.key];return y&&y.tileID.overscaledZ>=d?y:null}for(let y=l.overscaledZ-1;y>=d;y--){const S=l.scaledTo(y),T=this._getLoadedTile(S);if(T)return T}}_getLoadedTile(l){const d=this._tiles[l.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?l.wrapped().key:l.canonical.key)}updateCacheSize(l,d){d=d||this._source.tileSize;const y=Math.ceil(l.width/d)+1,S=Math.ceil(l.height/d)+1,T=Math.floor(y*S*5),I=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,T):T,N=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,I):I;this._cache.setMaxSize(N)}handleWrapJump(l){const d=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,d){const y={};for(const S in this._tiles){const T=this._tiles[S];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+d),y[T.tileID.key]=T}this._tiles=y;for(const S in this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(const S in this._tiles)this._setTileReloadTimer(+S,this._tiles[S])}}update(l,d,y,S){if(this.transform=l,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!y)return;this.updateCacheSize(l,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const T=this._source.type==="batched-model";let I,N=this._source.maxzoom;const $=this.map&&this.map.painter?this.map.painter._terrain:null;if($&&$.sourceCache===this&&$.attenuationRange()){const X=$.attenuationRange()[0],q=Math.floor(X)-Math.log2($.getDemUpscale());N>q&&(N=q)}if(this.used||this.usedForTerrain){if(this._source.tileID)I=l.getVisibleUnwrappedCoordinates(this._source.tileID).map((X=>new i.aH(X.canonical.z,X.wrap,X.canonical.z,X.canonical.x,X.canonical.y)));else if(this.tileCoverLift!==0){const X=l.clone();X.tileCoverLift=this.tileCoverLift,I=X.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:N,roundZoom:this._source.roundZoom&&!y,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:T}),this._source.minzoom<=1&&l.projection.name==="globe"&&(I.push(new i.aH(1,0,1,0,0)),I.push(new i.aH(1,0,1,1,0)),I.push(new i.aH(1,0,1,0,1)),I.push(new i.aH(1,0,1,1,1)))}else if(I=l.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:N,roundZoom:this._source.roundZoom&&!y,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:T}),this._source.hasTile){const X=this._source.hasTile.bind(this._source);I=I.filter((q=>X(q)))}}else I=[];if(I.length>0&&this.castsShadows&&S&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!sb(this._source.type)){const X=l.coveringZoomLevel({tileSize:d||this._source.tileSize,roundZoom:this._source.roundZoom&&!y}),q=Math.min(X,this._source.maxzoom);if(T){const ne=l.extendTileCover(I,q);for(const de of ne)I.push(de)}else{const ne=l.extendTileCover(I,q,S);for(const de of ne)this._shadowCasterTiles[de.key]=!0,I.push(de)}}const U=this._updateRetainedTiles(I);if(sb(this._source.type)&&I.length!==0){const X={},q={},ne=Object.keys(U);for(const ae of ne){const he=U[ae],me=this._tiles[ae];if(!me||me.fadeEndTime&&me.fadeEndTime<=i.q.now())continue;const Ie=this.findLoadedParent(he,Math.max(he.overscaledZ-Dl.maxOverzooming,this._source.minzoom));Ie&&(this._addTile(Ie.tileID),X[Ie.tileID.key]=Ie.tileID),q[ae]=he}const de=I[I.length-1].overscaledZ;for(const ae in this._tiles){const he=this._tiles[ae];if(U[ae]||!he.hasData())continue;let me=he.tileID;for(;me.overscaledZ>de;){me=me.scaledTo(me.overscaledZ-1);const Ie=this._tiles[me.key];if(Ie&&Ie.hasData()&&q[me.key]){U[ae]=he.tileID;break}}}for(const ae in X)U[ae]||(this._coveredTiles[ae]=!0,U[ae]=X[ae])}for(const X in U)this._tiles[X].clearFadeHold();const H=i.bk(this._tiles,U);for(const X of H){const q=this._tiles[X];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(+X)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(+l)}_updateRetainedTiles(l){const d={};if(l.length===0)return d;const y={},S=l.reduce(((U,H)=>Math.min(U,H.overscaledZ)),1/0),T=l[0].overscaledZ,I=Math.max(T-Dl.maxOverzooming,this._source.minzoom),N=Math.max(T+Dl.maxUnderzooming,this._source.minzoom),$={};for(const U of l){const H=this._addTile(U);d[U.key]=U,H.hasData()||S<this._source.maxzoom&&($[U.key]=U)}this._retainLoadedChildren($,S,N,d);for(const U of l){let H=this._tiles[U.key];if(H.hasData())continue;if(U.canonical.z>=this._source.maxzoom){const q=U.children(this._source.maxzoom)[0],ne=this.getTile(q);if(ne&&ne.hasData()){d[q.key]=q;continue}}else{const q=U.children(this._source.maxzoom);if(d[q[0].key]&&d[q[1].key]&&d[q[2].key]&&d[q[3].key])continue}let X=H.wasRequested();for(let q=U.overscaledZ-1;q>=I;--q){const ne=U.scaledTo(q);if(y[ne.key]||(y[ne.key]=!0,H=this.getTile(ne),!H&&X&&(H=this._addTile(ne)),H&&(d[ne.key]=ne,X=H.wasRequested(),H.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const d=[];let y,S=this._tiles[l].tileID;for(;S.overscaledZ>0;){if(S.key in this._loadedParentTiles){y=this._loadedParentTiles[S.key];break}d.push(S.key);const T=S.scaledTo(S.overscaledZ-1);if(y=this._getLoadedTile(T),y)break;S=T}for(const T of d)this._loadedParentTiles[T]=y}}_addTile(l){let d=this._tiles[l.key];if(d)return d.isExtraShadowCaster!==!0||this._shadowCasterTiles[l.key]||this._reloadTile(l.key,"reloading"),d;d=this._cache.getAndRemove(l),d&&(this._setTileReloadTimer(l.key,d),d.tileID=l,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,d)));const y=!!d;if(!y){const S=this.map?this.map.painter:null,T=this._source.tileSize*l.overscaleFactor();d=this._source.type==="raster-array"?new da(l,T,this.transform.tileZoom,S,this._isRaster):new sc(l,T,this.transform.tileZoom,S,this._isRaster),this._loadTile(d,this._tileLoaded.bind(this,d,l.key,d.state))}return d?(d.uses++,this._tiles[l.key]=d,y||this._source.fire(new i.A("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null}_setTileReloadTimer(l,d){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const y=d.getExpiryTimeout();y&&(this._timers[l]=setTimeout((()=>{this._reloadTile(l,"expired"),delete this._timers[l]}),y))}_removeTile(l){const d=this._tiles[l];d&&(d.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),d.uses>0||(d.hasData()&&d.state!=="reloading"||d.state==="empty"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(+l);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(l,d,y){const S=[],T=this.transform;if(!T)return S;const I=T.projection.name==="globe",N=i.av(T.center.lng);for(const $ in this._tiles){const U=this._tiles[$];if(y&&U.clearQueryDebugViz(),U.holdingForFade())continue;let H;if(I){const X=U.tileID.canonical;if(X.z===0){const q=[Math.abs(i.ay(N,...jn(X,-1))-N),Math.abs(i.ay(N,...jn(X,1))-N)];H=[0,2*q.indexOf(Math.min(...q))-1]}else{const q=[Math.abs(i.ay(N,...jn(X,-1))-N),Math.abs(i.ay(N,...jn(X,0))-N),Math.abs(i.ay(N,...jn(X,1))-N)];H=[q.indexOf(Math.min(...q))-1]}}else H=[0];for(const X of H){const q=l.containsTile(U,T,d,X);q&&S.push(q)}}return S}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(l){return this._getRenderableCoordinates(l)}_getRenderableCoordinates(l,d){const y=this.getRenderableIds(l,d).map((T=>this._tiles[T].tileID)),S=this.transform.projection.name==="globe";for(const T of y)T.projMatrix=this.transform.calculateProjMatrix(T.toUnwrapped()),T.expandedProjMatrix=S?this.transform.calculateProjMatrix(T.toUnwrapped(),!1,!0):T.projMatrix;return y}sortCoordinatesByDistance(l){const d=l.slice(),y=this.transform._camera.position,S=this.transform._camera.forward(),T={};for(const I of d){const N=1/(1<<I.canonical.z);T[I.key]=((I.canonical.x+.5)*N+I.wrap-y[0])*S[0]+((I.canonical.y+.5)*N-y[1])*S[1]-y[2]*S[2]}return d.sort(((I,N)=>T[I.key]-T[N.key])),d}hasTransition(){if(this._source.hasTransition())return!0;if(sb(this._source.type))for(const l in this._tiles){const d=this._tiles[l];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=i.q.now())return!0}return!1}setFeatureState(l,d,y){this._state.updateState(l=l||"_geojsonTileLayer",d,y)}removeFeatureState(l,d,y){this._state.removeFeatureState(l=l||"_geojsonTileLayer",d,y)}getFeatureState(l,d){return this._state.getState(l=l||"_geojsonTileLayer",d)}setDependencies(l,d,y){const S=this._tiles[l];S&&S.setDependencies(d,y)}reloadTilesForDependencies(l,d){for(const y in this._tiles)this._tiles[y].hasDependency(l,d)&&this._reloadTile(+y,"reloading");this._cache.filter((y=>!y.hasDependency(l,d)))}_preloadTiles(l,d){if(!this._sourceLoaded){const $=()=>{this._sourceLoaded&&(this._source.off("data",$),this._preloadTiles(l,d))};return void this._source.on("data",$)}const y=new Map,S=Array.isArray(l)?l:[l],T=this.map.painter.terrain,I=this.usedForTerrain&&T?T.getScaledDemTileSize():this._source.tileSize;for(const $ of S){const U=$.coveringTiles({tileSize:I,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const H of U)y.set(H.key,H);this.usedForTerrain&&$.updateElevation(!1)}const N=Array.from(y.values());i.bl(N,(($,U)=>{const H=new sc($,this._source.tileSize*$.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(H,(X=>{this._source.type==="raster-dem"&&H.dem&&this._backfillDEM(H),U(X,H)}))}),d)}}function ii(v,l){const d=Math.abs(2*v.wrap)-+(v.wrap<0),y=Math.abs(2*l.wrap)-+(l.wrap<0);return v.overscaledZ-l.overscaledZ||y-d||l.canonical.y-v.canonical.y||l.canonical.x-v.canonical.x}function sb(v){return v==="raster"||v==="image"||v==="video"||v==="custom"}function jn(v,l){const d=1<<v.z;return[v.x/d+l,(v.x+1)/d+l]}Dl.maxOverzooming=10,Dl.maxUnderzooming=3;class bE{constructor(l){this.style=l,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const l=!1,d=!1;for(const y in this.style._mergedLayers){const S=this.style._mergedLayers[y];if(S.type==="fill-extrusion")this.layers.push({layer:S,visible:l,visibilityChanged:d});else if(S.type==="model"){const T=this.style.getLayerSource(S);T&&T.type==="batched-model"&&this.layers.push({layer:S,visible:l,visibilityChanged:d})}}}onNewFrame(l){this.layersGotHidden=!1;for(const d of this.layers){const y=d.layer;let S=!1;y.type==="fill-extrusion"?S=!y.isHidden(l)&&y.paint.get("fill-extrusion-opacity")>0:y.type==="model"&&(S=!y.isHidden(l)&&y.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!S&&d.visible,d.visible=S}}updateZOffset(l,d){this.currentBuildingBuckets=[];for(const S of this.layers){const T=S.layer,I=this.style.getLayerSourceCache(T);let N=1;T.type==="fill-extrusion"&&(N=S.visible?T.paint.get("fill-extrusion-vertical-scale"):0);let $=I?I.getTile(d):null;if(!$&&I&&d.canonical.z>I.getSource().minzoom){let U=d.scaledTo(Math.min(I.getSource().maxzoom,d.overscaledZ-1));for(;U.overscaledZ>=I.getSource().minzoom&&($=I.getTile(U),!$&&U.overscaledZ!==0);)U=U.scaledTo(U.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:$?$.getBucket(T):null,tileID:$?$.tileID:d,verticalScale:N})}l.hasAnyZOffset=!1;let y=!1;for(let S=0;S<l.symbolInstances.length;S++){const T=l.symbolInstances.get(S),I=T.zOffset,N=this._getHeightAtTileOffset(d,T.tileAnchorX,T.tileAnchorY);T.zOffset=N!==Number.NEGATIVE_INFINITY?N:I,y||I===T.zOffset||(y=!0),l.hasAnyZOffset||T.zOffset===0||(l.hasAnyZOffset=!0)}y&&(l.zOffsetBuffersNeedUpload=!0,l.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(l,d,y,S){let T=d,I=y;if(l.canonical.z!==S.canonical.z){const N=S.canonical,$=1/(1<<l.canonical.z-N.z);T=(d+l.canonical.x*i.ai)*$-N.x*i.ai|0,I=(y+l.canonical.y*i.ai)*$-N.y*i.ai|0}return{tileX:T,tileY:I}}_getHeightAtTileOffset(l,d,y){let S,T;for(let I=0;I<this.layers.length;++I){if(this.layers[I].layer.type!=="fill-extrusion")continue;const{bucket:N,tileID:$,verticalScale:U}=this.currentBuildingBuckets[I];if(!N)continue;const{tileX:H,tileY:X}=this._mapCoordToOverlappingTile(l,d,y,$),q=N.getHeightAtTileCoord(H,X);q&&q.height!==void 0&&(q.hidden?S=q.height:T=Math.max(q.height*U,T||0))}if(T!==void 0)return T;for(let I=0;I<this.layers.length;++I){const N=this.layers[I];if(N.layer.type!=="model"||!N.visible)continue;const{bucket:$,tileID:U}=this.currentBuildingBuckets[I];if(!$)continue;const{tileX:H,tileY:X}=this._mapCoordToOverlappingTile(l,d,y,U),q=$.getHeightAtTileCoord(H,X);if(q&&!q.hidden)return q.height===void 0&&S!==void 0?Math.min(q.maxHeight,S)*q.verticalScale:q.height?q.height*q.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function xE(v,l){const d={};for(const y in v)y!=="ref"&&(d[y]=v[y]);return i.bm.forEach((y=>{y in l&&(d[y]=l[y])})),d}function cg(v){v=v.slice();const l=Object.create(null);for(let d=0;d<v.length;d++)l[v[d].id]=v[d];for(let d=0;d<v.length;d++)"ref"in v[d]&&(v[d]=xE(v[d],l[v[d].ref]));return v}const Or={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport",addIconset:"addIconset",removeIconset:"removeIconset"};function Rl(v,l,d){d.push({command:Or.addSource,args:[v,l[v]]})}function Dy(v,l,d){l.push({command:Or.removeSource,args:[v]}),d[v]=!0}function zf(v,l,d,y){Dy(v,d,y),Rl(v,l,d)}function Ln(v,l,d){let y;for(y in v[d])if(v[d].hasOwnProperty(y)&&y!=="data"&&!i.bn(v[d][y],l[d][y]))return!1;for(y in l[d])if(l[d].hasOwnProperty(y)&&y!=="data"&&!i.bn(v[d][y],l[d][y]))return!1;return!0}function ti(v,l,d,y,S,T){let I;for(I in l=l||{},v=v||{})v.hasOwnProperty(I)&&(i.bn(v[I],l[I])||d.push({command:T,args:[y,I,l[I],S]}));for(I in l)l.hasOwnProperty(I)&&!v.hasOwnProperty(I)&&(i.bn(v[I],l[I])||d.push({command:T,args:[y,I,l[I],S]}))}function zr(v){return v.id}function jo(v,l){return v[l.id]=l,v}class Bf{constructor(l,d){this.reset(l,d)}reset(l,d){this.points=l||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=i.ay(l,0,1);let d=1,y=this._distances[d];const S=l*this.paddedLength+this.padding;for(;y<S&&d<this._distances.length;)y=this._distances[++d];const T=d-1,I=this._distances[T],N=y-I,$=N>0?(S-I)/N:0;return this.points[T].mult(1-$).add(this.points[d].mult($))}}class Wr{constructor(l,d,y){const S=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(l/y),this.yCellCount=Math.ceil(d/y);for(let I=0;I<this.xCellCount*this.yCellCount;I++)S.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=d,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,d,y,S,T){this._forEachCell(d,y,S,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(S),this.bboxes.push(T)}insertCircle(l,d,y,S){this._forEachCell(d-S,y-S,d+S,y+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(d),this.circles.push(y),this.circles.push(S)}_insertBoxCell(l,d,y,S,T,I){this.boxCells[T].push(I)}_insertCircleCell(l,d,y,S,T,I){this.circleCells[T].push(I)}_query(l,d,y,S,T,I){if(y<0||l>this.width||S<0||d>this.height)return!T&&[];const N=[];if(l<=0&&d<=0&&this.width<=y&&this.height<=S){if(T)return!0;for(let $=0;$<this.boxKeys.length;$++)N.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const U=this.circles[3*$],H=this.circles[3*$+1],X=this.circles[3*$+2];N.push({key:this.circleKeys[$],x1:U-X,y1:H-X,x2:U+X,y2:H+X})}return I?N.filter(I):N}return this._forEachCell(l,d,y,S,this._queryCell,N,{hitTest:T,seenUids:{box:{},circle:{}}},I),T?N.length>0:N}_queryCircle(l,d,y,S,T){const I=l-y,N=l+y,$=d-y,U=d+y;if(N<0||I>this.width||U<0||$>this.height)return!S&&[];const H=[];return this._forEachCell(I,$,N,U,this._queryCellCircle,H,{hitTest:S,circle:{x:l,y:d,radius:y},seenUids:{box:{},circle:{}}},T),S?H.length>0:H}query(l,d,y,S,T){return this._query(l,d,y,S,!1,T)}hitTest(l,d,y,S,T){return this._query(l,d,y,S,!0,T)}hitTestCircle(l,d,y,S){return this._queryCircle(l,d,y,!0,S)}_queryCell(l,d,y,S,T,I,N,$){const U=N.seenUids,H=this.boxCells[T];if(H!==null){const q=this.bboxes;for(const ne of H)if(!U.box[ne]){U.box[ne]=!0;const de=4*ne;if(l<=q[de+2]&&d<=q[de+3]&&y>=q[de+0]&&S>=q[de+1]&&(!$||$(this.boxKeys[ne]))){if(N.hitTest)return I.push(!0),!0;I.push({key:this.boxKeys[ne],x1:q[de],y1:q[de+1],x2:q[de+2],y2:q[de+3]})}}}const X=this.circleCells[T];if(X!==null){const q=this.circles;for(const ne of X)if(!U.circle[ne]){U.circle[ne]=!0;const de=3*ne;if(this._circleAndRectCollide(q[de],q[de+1],q[de+2],l,d,y,S)&&(!$||$(this.circleKeys[ne]))){if(N.hitTest)return I.push(!0),!0;{const ae=q[de],he=q[de+1],me=q[de+2];I.push({key:this.circleKeys[ne],x1:ae-me,y1:he-me,x2:ae+me,y2:he+me})}}}}}_queryCellCircle(l,d,y,S,T,I,N,$){const U=N.circle,H=N.seenUids,X=this.boxCells[T];if(X!==null){const ne=this.bboxes;for(const de of X)if(!H.box[de]){H.box[de]=!0;const ae=4*de;if(this._circleAndRectCollide(U.x,U.y,U.radius,ne[ae+0],ne[ae+1],ne[ae+2],ne[ae+3])&&(!$||$(this.boxKeys[de])))return I.push(!0),!0}}const q=this.circleCells[T];if(q!==null){const ne=this.circles;for(const de of q)if(!H.circle[de]){H.circle[de]=!0;const ae=3*de;if(this._circlesCollide(ne[ae],ne[ae+1],ne[ae+2],U.x,U.y,U.radius)&&(!$||$(this.circleKeys[de])))return I.push(!0),!0}}}_forEachCell(l,d,y,S,T,I,N,$){const U=this._convertToXCellCoord(l),H=this._convertToYCellCoord(d),X=this._convertToXCellCoord(y),q=this._convertToYCellCoord(S);for(let ne=U;ne<=X;ne++)for(let de=H;de<=q;de++)if(T.call(this,l,d,y,S,this.xCellCount*de+ne,I,N,$))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,d,y,S,T,I){const N=S-l,$=T-d,U=y+I;return U*U>N*N+$*$}_circleAndRectCollide(l,d,y,S,T,I,N){const $=(I-S)/2,U=Math.abs(l-(S+$));if(U>$+y)return!1;const H=(N-T)/2,X=Math.abs(d-(T+H));if(X>H+y)return!1;if(U<=$||X<=H)return!0;const q=U-$,ne=X-H;return q*q+ne*ne<=y*y}}const au={unknown:0,flipRequired:1,flipNotRequired:2},ug=Math.tan(85*Math.PI/180);function lu(v,l,d,y,S,T,I){const N=i.ad.mat4.create();if(d)if(T.name==="globe"){const $=i.bo(S,l);i.ad.mat4.multiply(N,N,$)}else{const $=i.ad.mat2.invert([],I);N[0]=$[0],N[1]=$[1],N[4]=$[2],N[5]=$[3],y||i.ad.mat4.rotateZ(N,N,S.angle)}else i.ad.mat4.multiply(N,S.labelPlaneMatrix,v);return N}function Io(v,l,d,y,S,T,I){const N=lu(v,l,d,y,S,T,I);return T.name==="globe"&&d||(N[2]=N[6]=N[10]=N[14]=0),N}function ds(v,l,d,y,S,T,I){if(d){if(T.name==="globe"){const N=lu(v,l,d,y,S,T,I);return i.ad.mat4.invert(N,N),i.ad.mat4.multiply(N,v,N),N}{const N=i.ad.mat4.clone(v),$=i.ad.mat4.identity([]);return $[0]=I[0],$[1]=I[1],$[4]=I[2],$[5]=I[3],i.ad.mat4.multiply(N,N,$),y||i.ad.mat4.rotateZ(N,N,-S.angle),N}}return S.glCoordMatrix}function oc(v,l,d,y){const S=[v,l,d,1];d?i.ad.vec4.transformMat4(S,S,y):Ps(S,S,y);const T=S[3];return S[0]/=T,S[1]/=T,S[2]/=T,S}function $f(v,l){return Math.min(.5+v/l*.5,1.5)}function ob(v,l){const d=v[0]/v[3],y=v[1]/v[3];return d>=-l[0]&&d<=l[0]&&y>=-l[1]&&y<=l[1]}function Vf(v,l,d,y,S,T,I,N,$,U){const H=d.transform,X=y?v.textSizeData:v.iconSizeData,q=i.bp(X,d.transform.zoom),ne=H.projection.name==="globe",de=[256/d.width*2+1,256/d.height*2+1],ae=y?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ae.clear();let he=null;ne&&(he=y?v.text.globeExtVertexArray:v.icon.globeExtVertexArray);const me=v.lineVertexArray,Ie=y?v.text.placedSymbolArray:v.icon.placedSymbolArray,Le=d.transform.width/d.transform.height;let De,Ye=!1;for(let Ne=0;Ne<Ie.length;Ne++){const Fe=Ie.get(Ne),{numGlyphs:Be,writingMode:Qe}=Fe;if(Qe!==i.bq.vertical||Ye||De===i.bq.horizontal||(Ye=!0),De=Qe,(Fe.hidden||Qe===i.bq.vertical)&&!Ye){ac(Be,ae);continue}Ye=!1;const tt=new i.P(Fe.tileAnchorX,Fe.tileAnchorY);let{x:Ot,y:bt,z:Ht}=H.projection.projectTilePoint(tt.x,tt.y,U.canonical);if($){const[yn,wn,Rn]=$(tt);Ot+=yn,bt+=wn,Ht+=Rn}const Wt=[Ot,bt,Ht,1];if(i.ad.vec4.transformMat4(Wt,Wt,l),!ob(Wt,de)){ac(Be,ae);continue}const sn=Wt[3],gt=$f(d.transform.getCameraToCenterDistance(H.projection),sn),Ut=i.br(X,q,Fe),ft=I?Ut/gt:Ut*gt,jt=oc(Ot,bt,Ht,S);if(jt[3]<=0){ac(Be,ae);continue}let Bt={};const Gt=i.ak(v.layers[0].layout.get("text-max-angle")),Dt=Math.cos(Gt),qt=I?null:$,_n=Uo(Fe,ft,!1,N,l,S,T,v.glyphOffsetArray,me,ae,he,jt,tt,Bt,Le,qt,H.projection,U,I,Dt);Ye=_n.useVertical,qt&&_n.needsFlipping&&(Bt={}),(_n.notEnoughRoom||Ye||_n.needsFlipping&&Uo(Fe,ft,!0,N,l,S,T,v.glyphOffsetArray,me,ae,he,jt,tt,Bt,Le,qt,H.projection,U,I,Dt).notEnoughRoom)&&ac(Be,ae)}y?(v.text.dynamicLayoutVertexBuffer.updateData(ae),he&&v.text.globeExtVertexBuffer&&v.text.globeExtVertexBuffer.updateData(he)):(v.icon.dynamicLayoutVertexBuffer.updateData(ae),he&&v.icon.globeExtVertexBuffer&&v.icon.globeExtVertexBuffer.updateData(he))}function Ry(v,l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae,he){const{lineStartIndex:me,glyphStartIndex:Ie,segment:Le}=N,De=Ie+N.numGlyphs,Ye=me+N.lineLength,Ne=l.getoffsetX(Ie),Fe=l.getoffsetX(De-1),Be=hg(v*Ne,d,y,S,T,I,Le,me,Ye,$,U,H,X,q,!0,ne,de,ae,he);if(!Be)return null;const Qe=hg(v*Fe,d,y,S,T,I,Le,me,Ye,$,U,H,X,q,!0,ne,de,ae,he);return Qe?{first:Be,last:Qe}:null}function dg(v,l,d,y){return v===i.bq.horizontal&&Math.abs(y)>Math.abs(d)?{useVertical:!0}:v===i.bq.vertical?y>0?{needsFlipping:!0}:null:l!==au.unknown&&(function(S,T){return S===0||Math.abs(T/S)>ug})(d,y)?l===au.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function Uo(v,l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae,he,me,Ie,Le){const De=l/24,Ye=v.lineOffsetX*De,Ne=v.lineOffsetY*De,{lineStartIndex:Fe,glyphStartIndex:Be,numGlyphs:Qe,segment:tt,writingMode:Ot,flipState:bt}=v,Ht=Fe+v.lineLength,Wt=sn=>{if(H){const[jt,Bt,Gt]=sn.up,Dt=U.length;i.bs(H,Dt+0,jt,Bt,Gt),i.bs(H,Dt+1,jt,Bt,Gt),i.bs(H,Dt+2,jt,Bt,Gt),i.bs(H,Dt+3,jt,Bt,Gt)}const[gt,Ut,ft]=sn.point;i.bt(U,gt,Ut,ft,sn.angle)};if(Qe>1){const sn=Ry(De,N,Ye,Ne,d,X,q,v,$,T,ne,ae,!1,he,me,Ie,Le);if(!sn)return{notEnoughRoom:!0};if(y&&!d){let[gt,Ut,ft]=sn.first.point,[jt,Bt,Gt]=sn.last.point;[gt,Ut]=oc(gt,Ut,ft,I),[jt,Bt]=oc(jt,Bt,Gt,I);const Dt=dg(Ot,bt,(jt-gt)*de,Bt-Ut);if(v.flipState=Dt&&Dt.needsFlipping?au.flipRequired:au.flipNotRequired,Dt)return Dt}Wt(sn.first);for(let gt=Be+1;gt<Be+Qe-1;gt++){const Ut=hg(De*N.getoffsetX(gt),Ye,Ne,d,X,q,tt,Fe,Ht,$,T,ne,ae,!1,!1,he,me,Ie,Le);if(!Ut)return U.length-=4*(gt-Be),{notEnoughRoom:!0};Wt(Ut)}Wt(sn.last)}else{if(y&&!d){const gt=oc(q.x,q.y,0,S),Ut=Fe+tt+1,ft=new i.P($.getx(Ut),$.gety(Ut)),jt=oc(ft.x,ft.y,0,S),Bt=jt[3]>0?jt:Ho(q,ft,gt,1,S,void 0,he,me.canonical),Gt=dg(Ot,bt,(Bt[0]-gt[0])*de,Bt[1]-gt[1]);if(v.flipState=Gt&&Gt.needsFlipping?au.flipRequired:au.flipNotRequired,Gt)return Gt}const sn=hg(De*N.getoffsetX(Be),Ye,Ne,d,X,q,tt,Fe,Ht,$,T,ne,ae,!1,!1,he,me,Ie,Le);if(!sn)return{notEnoughRoom:!0};Wt(sn)}return{}}function Oc(v,l,d,y,S){const{x:T,y:I,z:N}=y.projectTilePoint(v.x,v.y,l);if(!S)return oc(T,I,N,d);const[$,U,H]=S(v);return oc(T+$,I+U,N+H,d)}function Ho(v,l,d,y,S,T,I,N){const $=Oc(v.sub(l)._unit()._add(v),N,S,I,T);return i.ad.vec3.sub($,d,$),i.ad.vec3.normalize($,$),i.ad.vec3.scaleAndAdd($,d,$,y)}function hg(v,l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae,he,me,Ie){const Le=y?v-l:v+l;let De=Le>0?1:-1,Ye=0;y&&(De*=-1,Ye=Math.PI),De<0&&(Ye+=Math.PI);let Ne=N+I+(De>0?0:1)|0,Fe=S,Be=S,Qe=0,tt=0;const Ot=Math.abs(Le),bt=[],Ht=[];let Wt=T,sn=Wt,gt=i.ad.vec3.zero([]);const Ut=()=>Ho(sn,Wt,Be,Ot-Qe+1,H,q,ae,he.canonical);for(;Qe+tt<=Ot;){if(Ne+=De,Ne<N||Ne>=$)return null;if(Be=Fe,sn=Wt,bt.push(Be),ne&&Ht.push(sn),Wt=new i.P(U.getx(Ne),U.gety(Ne)),Fe=X[Ne],!Fe){const Rn=Oc(Wt,he.canonical,H,ae,q);Fe=Rn[3]>0?X[Ne]=Rn:Ut()}Qe+=tt;const yn=i.ad.vec3.sub([],Fe,Be),wn=i.ad.vec3.distance(Be,Fe);if(d&&wn>0&&tt>0&&i.ad.vec3.dot(gt,yn)/(tt*wn)<Ie)return null;tt=wn,gt=yn}de&&q&&(X[Ne]&&(Fe=Ut(),tt=i.ad.vec3.distance(Be,Fe),gt=i.ad.vec3.sub([],Fe,Be)),X[Ne]=Fe);const ft=(Ot-Qe)/tt,jt=Wt.sub(sn)._mult(ft)._add(sn),Bt=i.ad.vec3.scaleAndAdd([],Be,gt,ft);let Gt=[0,0,1],Dt=gt[0],qt=gt[1];if(me&&(Gt=ae.upVector(he.canonical,jt.x,jt.y),Gt[0]!==0||Gt[1]!==0||Gt[2]!==1)){const yn=[Gt[2],0,-Gt[0]],wn=i.ad.vec3.cross([],Gt,yn);i.ad.vec3.normalize(yn,yn),i.ad.vec3.normalize(wn,wn),Dt=i.ad.vec3.dot(gt,yn),qt=i.ad.vec3.dot(gt,wn)}if(d){const yn=i.ad.vec3.cross([],Gt,gt);i.ad.vec3.normalize(yn,yn),i.ad.vec3.scaleAndAdd(Bt,Bt,yn,d*De)}const _n=Ye+Math.atan2(qt,Dt);return bt.push(Bt),ne&&Ht.push(jt),{point:Bt,angle:_n,path:bt,tilePath:Ht,up:Gt}}function ac(v,l){const d=l.length,y=d+4*v;l.resize(y),l.float32.fill(-1/0,4*d,4*y)}function Ps(v,l,d){const y=l[0],S=l[1];return v[0]=d[0]*y+d[4]*S+d[12],v[1]=d[1]*y+d[5]*S+d[13],v[3]=d[3]*y+d[7]*S+d[15],v}const so=100;class cu{constructor(l,d,y=new Wr(l.width+200,l.height+200,25),S=new Wr(l.width+200,l.height+200,25)){this.transform=l,this.grid=y,this.ignoredGrid=S,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+so,this.screenBottomBoundary=l.height+so,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=d}placeCollisionBox(l,d,y,S,T,I,N,$){let U=y.projectedAnchorX,H=y.projectedAnchorY,X=y.projectedAnchorZ;const q=y.elevation,ne=y.tileID,de=l.getProjection();if(q&&ne){const[Ne,Fe,Be]=de.upVector(ne.canonical,y.tileAnchorX,y.tileAnchorY),Qe=de.upVectorScale(ne.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;U+=Ne*q*Qe,H+=Fe*q*Qe,X+=Be*q*Qe}const ae=this.projectAndGetPerspectiveRatio(N,U,H,X,y.tileID,de.name==="globe"||!!q||this.transform.pitch>0,de),he=I*ae.perspectiveRatio,me=(y.x1*d+S.x-y.padding)*he+ae.point.x,Ie=(y.y1*d+S.y-y.padding)*he+ae.point.y,Le=(y.x2*d+S.x+y.padding)*he+ae.point.x,De=(y.y2*d+S.y+y.padding)*he+ae.point.y,Ye=ae.perspectiveRatio<=.55||ae.occluded;return!this.isInsideGrid(me,Ie,Le,De)||!T&&this.grid.hitTest(me,Ie,Le,De,$)||Ye?{box:[],offscreen:!1,occluded:ae.occluded}:{box:[me,Ie,Le,De],offscreen:this.isOffscreen(me,Ie,Le,De),occluded:!1}}placeCollisionCircles(l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae){const he=[],me=this.transform.elevation,Ie=l.getProjection(),Le=me?me.getAtTileOffsetFunc(ae,this.transform.center.lat,this.transform.worldSize,Ie):null,De=new i.P(y.tileAnchorX,y.tileAnchorY);let{x:Ye,y:Ne,z:Fe}=Ie.projectTilePoint(De.x,De.y,ae.canonical);if(Le){const[Gt,Dt,qt]=Le(De);Ye+=Gt,Ne+=Dt,Fe+=qt}const Be=Ie.name==="globe",Qe=this.projectAndGetPerspectiveRatio(N,Ye,Ne,Fe,ae,Be||!!me||this.transform.pitch>0,Ie),{perspectiveRatio:tt}=Qe,Ot=(X?I/tt:I*tt)/i.bw,bt=oc(Ye,Ne,Fe,$),Ht=y.lineOffsetX*Ot,Wt=y.lineOffsetY*Ot,sn=i.ak(l.layers[0].layout.get("text-max-angle")),gt=Math.cos(sn),Ut=Qe.signedDistanceFromCamera>0?Ry(Ot,T,Ht,Wt,!1,bt,De,y,S,$,{},me&&!X?Le:null,X&&!!me,Ie,ae,X,gt):null;let ft=!1,jt=!1,Bt=!0;if(Ut&&!Qe.occluded){const Gt=.5*ne*tt+de,Dt=new i.P(-100,-100),qt=new i.P(this.screenRightBoundary,this.screenBottomBoundary),_n=new Bf,{first:yn,last:wn}=Ut,Rn=yn.path.length;let rr=[];for(let Zn=Rn-1;Zn>=1;Zn--)rr.push(yn.path[Zn]);for(let Zn=1;Zn<wn.path.length;Zn++)rr.push(wn.path[Zn]);const Vn=2.5*Gt;U&&(rr=rr.map((([Zn,Mr,qr],Si)=>(Le&&!Be&&(qr=Le(Si<Rn-1?yn.tilePath[Rn-1-Si]:wn.tilePath[Si-Rn+2])[2]),oc(Zn,Mr,qr,U)))),rr.some((Zn=>Zn[3]<=0))&&(rr=[]));let er=[];if(rr.length>0){let Zn=1/0,Mr=-1/0,qr=1/0,Si=-1/0;for(const vr of rr)Zn=Math.min(Zn,vr[0]),qr=Math.min(qr,vr[1]),Mr=Math.max(Mr,vr[0]),Si=Math.max(Si,vr[1]);Mr>=Dt.x&&Zn<=qt.x&&Si>=Dt.y&&qr<=qt.y&&(er=[rr.map((vr=>new i.P(vr[0],vr[1])))],(Zn<Dt.x||Mr>qt.x||qr<Dt.y||Si>qt.y)&&(er=i.bu(er,Dt.x,Dt.y,qt.x,qt.y)))}for(const Zn of er){_n.reset(Zn,.25*Gt);let Mr=0;Mr=_n.length<=.5*Gt?1:Math.ceil(_n.paddedLength/Vn)+1;for(let qr=0;qr<Mr;qr++){const Si=qr/Math.max(Mr-1,1),vr=_n.lerp(Si),$i=vr.x+so,ar=vr.y+so;he.push($i,ar,Gt,0);const kn=$i-Gt,Ir=ar-Gt,si=$i+Gt,Br=ar+Gt;if(Bt=Bt&&this.isOffscreen(kn,Ir,si,Br),jt=jt||this.isInsideGrid(kn,Ir,si,Br),!d&&this.grid.hitTestCircle($i,ar,Gt,q)&&(ft=!0,!H))return{circles:[],offscreen:!1,collisionDetected:ft,occluded:!1}}}}return{circles:!H&&ft||!jt?[]:he,offscreen:Bt,collisionDetected:ft,occluded:Qe.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let y=1/0,S=1/0,T=-1/0,I=-1/0;for(const H of l){const X=new i.P(H.x+so,H.y+so);y=Math.min(y,X.x),S=Math.min(S,X.y),T=Math.max(T,X.x),I=Math.max(I,X.y),d.push(X)}const N=this.grid.query(y,S,T,I).concat(this.ignoredGrid.query(y,S,T,I)),$={},U={};for(const H of N){const X=H.key;if($[X.bucketInstanceId]===void 0&&($[X.bucketInstanceId]={}),$[X.bucketInstanceId][X.featureIndex])continue;const q=[new i.P(H.x1,H.y1),new i.P(H.x2,H.y1),new i.P(H.x2,H.y2),new i.P(H.x1,H.y2)];i.bv(d,q)&&($[X.bucketInstanceId][X.featureIndex]=!0,U[X.bucketInstanceId]===void 0&&(U[X.bucketInstanceId]=[]),U[X.bucketInstanceId].push(X.featureIndex))}return U}insertCollisionBox(l,d,y,S,T){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:S,collisionGroupID:T},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,d,y,S,T){const I=d?this.ignoredGrid:this.grid,N={bucketInstanceId:y,featureIndex:S,collisionGroupID:T};for(let $=0;$<l.length;$+=4)I.insertCircle(N,l[$],l[$+1],l[$+2])}projectAndGetPerspectiveRatio(l,d,y,S,T,I,N){const $=[d,y,S,1];let U=!1;S||this.transform.pitch>0?(i.ad.vec4.transformMat4($,$,l),this.fogState&&T&&N.name!=="globe"&&(U=(function(q,ne,de,ae,he,me){const Ie=me.calculateFogTileMatrix(he),Le=[ne,de,ae];return i.ad.vec3.transformMat4(Le,Le,Ie),In(q,i.ad.vec3.length(Le),me.pitch,me._fov)})(this.fogState,d,y,S,T.toUnwrapped(),this.transform)>.9)):Ps($,$,l);const H=$[3];return{point:new i.P(($[0]/H+1)/2*this.transform.width+so,(-$[1]/H+1)/2*this.transform.height+so),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(N)/H*.5,1.5),signedDistanceFromCamera:H,occluded:I&&$[2]>H||U}}isOffscreen(l,d,y,S){return y<so||l>=this.screenRightBoundary||S<so||d>this.screenBottomBoundary}isInsideGrid(l,d,y,S){return y>=0&&l<this.gridRightBoundary&&S>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const l=i.ad.mat4.identity([]);return i.ad.mat4.translate(l,l,[-100,-100,0]),l}}function ps(v,l,d){const y=l.createTileMatrix(v,v.worldSize,d.toUnwrapped());return i.ad.mat4.multiply(new Float32Array(16),v.projMatrix,y)}function ab(v,l,d){if(l.projection.name===d.projection.name)return v.projMatrix;const y=d.clone();return y.setProjection(l.projection),ps(y,l.getProjection(),v)}function el(v,l,d){return l.name===d.projection.name?v.projMatrix:ps(d,l,v)}class jf{constructor(l,d,y,S){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?d:-d))):S&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class dd{constructor(l,d,y,S,T,I=!1){this.text=new jf(l?l.text:null,d,y,T),this.icon=new jf(l?l.icon:null,d,S,T),this.clipped=I}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class uu{constructor(l,d,y,S=!1){this.text=l,this.icon=d,this.skipFade=y,this.clipped=S}}class vO{constructor(){this.invProjMatrix=i.ad.mat4.create(),this.viewportMatrix=i.ad.mat4.create(),this.circles=[]}}class du{constructor(l,d,y,S,T){this.bucketInstanceId=l,this.featureIndex=d,this.sourceLayerIndex=y,this.bucketIndex=S,this.tileID=T}}class bO{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const d=++this.maxGroupID;this.collisionGroups[l]={ID:d,predicate:y=>y.collisionGroupID===d}}return this.collisionGroups[l]}}function ky(v,l,d,y,S){const{horizontalAlign:T,verticalAlign:I}=i.bD(v),N=-(T-.5)*l,$=-(I-.5)*d,U=i.bC(v,y);return new i.P(N+U[0]*S,$+U[1]*S)}function na(v,l,d,y,S){const T=new i.P(v,l);return d&&T._rotate(y?S:-S),T}class xO{constructor(l,d,y,S,T,I){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new cu(this.transform,T),this.buildingIndex=I,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new bO(y),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,d,y,S,T=1){const I=y.getBucket(d),N=y.latestFeatureIndex;if(!I||!N||d.fqid!==I.layerIds[0])return;const $=I.layers[0].layout,U=I.layers[0].paint,H=y.collisionBoxArray,X=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),q=y.tileSize/i.ai,ne=y.tileID.toUnwrapped();this.transform.setProjection(I.projection);const de=(ae=y.tileID,he=I.getProjection(),me=this.transform,he.name===this.projection?me.calculateProjMatrix(ae.toUnwrapped()):ps(me,he,ae));var ae,he,me;const Ie=$.get("text-pitch-alignment")==="map",Le=$.get("text-rotation-alignment")==="map";d.compileFilter(d.options);const De=d.dynamicFilter(),Ye=d.dynamicFilterNeedsFeature(),Ne=this.transform.calculatePixelsToTileUnitsMatrix(y),Fe=Io(de,y.tileID.canonical,Ie,Le,this.transform,I.getProjection(),Ne);let Be=null;if(Ie){const Ut=ds(de,y.tileID.canonical,Ie,Le,this.transform,I.getProjection(),Ne);Be=i.ad.mat4.multiply([],this.transform.labelPlaneMatrix,Ut)}let Qe=null;De&&y.latestFeatureIndex&&(Qe={unwrappedTileID:ne,dynamicFilter:De,dynamicFilterNeedsFeature:Ye}),this.retainedQueryData[I.bucketInstanceId]=new du(I.bucketInstanceId,N,I.sourceLayerIndex,I.index,y.tileID);const[tt,Ot]=I.layers[0].layout.get("text-size-scale-range"),bt=i.ay(T,tt,Ot),[Ht,Wt]=$.get("icon-size-scale-range"),sn=i.ay(T,Ht,Wt),gt={bucket:I,layout:$,paint:U,posMatrix:de,textLabelPlaneMatrix:Fe,labelToScreenMatrix:Be,clippingData:Qe,scale:X,textPixelRatio:q,holdingForFade:y.holdingForFade(),collisionBoxArray:H,partiallyEvaluatedTextSize:i.bp(I.textSizeData,this.transform.zoom,bt),partiallyEvaluatedIconSize:i.bp(I.iconSizeData,this.transform.zoom,sn),collisionGroup:this.collisionGroups.get(I.sourceID),latestFeatureIndex:y.latestFeatureIndex};if(S)for(const Ut of I.sortKeyRanges){const{sortKey:ft,symbolInstanceStart:jt,symbolInstanceEnd:Bt}=Ut;l.push({sortKey:ft,symbolInstanceStart:jt,symbolInstanceEnd:Bt,parameters:gt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:gt})}attemptAnchorPlacement(l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae,he,me,Ie){const{textOffset0:Le,textOffset1:De,crossTileID:Ye}=q,Ne=[Le,De],Fe=ky(l,y,S,Ne,T),Be=this.collisionIndex.placeCollisionBox(de,T,d,na(Fe.x,Fe.y,I,N,this.transform.angle),X,$,U,H.predicate);if(he){const Qe=de.getSymbolInstanceIconSize(Ie,this.transform.zoom,q.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(de,Qe,he,na(Fe.x,Fe.y,I,N,this.transform.angle),X,$,U,H.predicate).box.length===0)return}if(Be.box.length>0){let Qe;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ye]&&this.prevPlacement.placements[Ye]&&this.prevPlacement.placements[Ye].text&&(Qe=this.prevPlacement.variableOffsets[Ye].anchor),this.variableOffsets[Ye]={textOffset:Ne,width:y,height:S,anchor:l,textScale:T,prevAnchor:Qe},this.markUsedJustification(de,l,q,ae),de.allowVerticalPlacement&&(this.markUsedOrientation(de,ae,q),this.placedOrientations[Ye]=ae),{shift:Fe,placedGlyphBoxes:Be}}}placeLayerBucketPart(l,d,y,S,T=1){const{bucket:I,layout:N,paint:$,posMatrix:U,textLabelPlaneMatrix:H,labelToScreenMatrix:X,clippingData:q,textPixelRatio:ne,holdingForFade:de,collisionBoxArray:ae,partiallyEvaluatedTextSize:he,partiallyEvaluatedIconSize:me,collisionGroup:Ie,latestFeatureIndex:Le}=l.parameters,De=N.get("text-optional"),Ye=N.get("icon-optional"),Ne=N.get("text-allow-overlap"),Fe=N.get("icon-allow-overlap"),Be=N.get("text-rotation-alignment")==="map",Qe=N.get("text-pitch-alignment")==="map",tt=$.get("symbol-z-offset"),Ot=N.get("symbol-elevation-reference")==="sea",[bt,Ht]=N.get("text-size-scale-range"),[Wt,sn]=N.get("icon-size-scale-range"),gt=i.ay(T,bt,Ht),Ut=i.ay(T,Wt,sn);this.transform.setProjection(I.projection);let ft=Ne&&(Fe||!I.hasIconData()||Ye),jt=Fe&&(Ne||!I.hasTextData()||De);const Bt=!tt.isConstant();!I.collisionArrays&&ae&&I.deserializeCollisionBoxes(ae),y&&S&&I.updateCollisionDebugBuffers(this.transform.zoom,ae,gt,Ut);const Gt=(Dt,qt,_n)=>{const{crossTileID:yn,numVerticalGlyphVertices:wn}=Dt;let Rn=null;if(q&&q.dynamicFilterNeedsFeature||Bt){const Lr=this.retainedQueryData[I.bucketInstanceId];Rn=Le.loadFeature({featureIndex:Dt.featureIndex,bucketIndex:Lr.bucketIndex,sourceLayerIndex:Lr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(q&&!(0,q.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},Rn,this.retainedQueryData[I.bucketInstanceId].tileID.canonical,new i.P(Dt.tileAnchorX,Dt.tileAnchorY),this.transform.calculateDistanceTileData(q.unwrappedTileID)))return this.placements[yn]=new uu(!1,!1,!1,!0),void d.add(yn);const rr=tt.evaluate(Rn,{});if(d.has(yn))return;if(de)return void(this.placements[yn]=new uu(!1,!1,!1));let Vn=!1,er=!1,Zn=!0,Mr=!1,qr=!1,Si=null,vr={box:null,offscreen:null,occluded:null},$i={box:null},ar=null,kn=null,Ir=null,si=0,Br=0,ss=0;_n.textFeatureIndex?si=_n.textFeatureIndex:Dt.useRuntimeCollisionCircles&&(si=Dt.featureIndex),_n.verticalTextFeatureIndex&&(Br=_n.verticalTextFeatureIndex);const ws=Lr=>{Lr.tileID=this.retainedQueryData[I.bucketInstanceId].tileID;const Vi=this.transform.elevation;Lr.elevation=Ot?rr:rr+(Vi?Vi.getAtTileOffset(Lr.tileID,Lr.tileAnchorX,Lr.tileAnchorY):0),Lr.elevation+=Dt.zOffset},Bs=_n.textBox;if(Bs){ws(Bs);const Lr=Xr=>{let _i=i.bq.horizontal;if(I.allowVerticalPlacement&&!Xr&&this.prevPlacement){const bo=this.prevPlacement.placedOrientations[yn];bo&&(this.placedOrientations[yn]=bo,_i=bo,this.markUsedOrientation(I,_i,Dt))}return _i},Vi=(Xr,_i)=>{if(I.allowVerticalPlacement&&wn>0&&_n.verticalTextBox){for(const bo of I.writingModes)if(bo===i.bq.vertical?(vr=_i(),$i=vr):vr=Xr(),vr&&vr.box&&vr.box.length)break}else vr=Xr()};if(N.get("text-variable-anchor")){let Xr=N.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[yn]){const Li=this.prevPlacement.variableOffsets[yn];Xr.indexOf(Li.anchor)>0&&(Xr=Xr.filter(($s=>$s!==Li.anchor)),Xr.unshift(Li.anchor))}const _i=(Li,$s,Nc)=>{const Da=I.getSymbolInstanceTextSize(he,Dt,this.transform.zoom,qt),zl=(Li.x2-Li.x1)*Da+2*Li.padding,fa=(Li.y2-Li.y1)*Da+2*Li.padding,Bl=Dt.hasIconTextFit&&!Fe?$s:null;Bl&&ws(Bl);let Ra={box:[],offscreen:!1,occluded:!1};const xu=Ne?2*Xr.length:Xr.length;for(let Fc=0;Fc<xu;++Fc){const wu=this.attemptAnchorPlacement(Xr[Fc%Xr.length],Li,zl,fa,Da,Be,Qe,ne,U,Ie,Fc>=Xr.length,Dt,qt,I,Nc,Bl,he,me);if(wu&&(Ra=wu.placedGlyphBoxes,Ra&&Ra.box&&Ra.box.length)){Vn=!0,Si=wu.shift;break}}return Ra};Vi((()=>_i(Bs,_n.iconBox,i.bq.horizontal)),(()=>{const Li=_n.verticalTextBox;return Li&&ws(Li),I.allowVerticalPlacement&&!(vr&&vr.box&&vr.box.length)&&wn>0&&Li?_i(Li,_n.verticalIconBox,i.bq.vertical):{box:null,offscreen:null,occluded:null}})),vr&&(Vn=vr.box,Zn=vr.offscreen,Mr=vr.occluded);const bo=Lr(!(!vr||!vr.box));if(!Vn&&this.prevPlacement){const Li=this.prevPlacement.variableOffsets[yn];Li&&(this.variableOffsets[yn]=Li,this.markUsedJustification(I,Li.anchor,Dt,bo))}}else{const Xr=(_i,bo)=>{const Li=I.getSymbolInstanceTextSize(he,Dt,this.transform.zoom,qt,T),$s=this.collisionIndex.placeCollisionBox(I,Li,_i,new i.P(0,0),Ne,ne,U,Ie.predicate);return $s&&$s.box&&$s.box.length&&(this.markUsedOrientation(I,bo,Dt),this.placedOrientations[yn]=bo),$s};Vi((()=>Xr(Bs,i.bq.horizontal)),(()=>{const _i=_n.verticalTextBox;return I.allowVerticalPlacement&&wn>0&&_i?(ws(_i),Xr(_i,i.bq.vertical)):{box:null,offscreen:null,occluded:null}})),Lr(!!(vr&&vr.box&&vr.box.length))}}if(ar=vr,Vn=ar&&ar.box&&ar.box.length>0,Zn=ar&&ar.offscreen,Mr=ar&&ar.occluded,Dt.useRuntimeCollisionCircles){const Lr=I.text.placedSymbolArray.get(Dt.centerJustifiedTextSymbolIndex>=0?Dt.centerJustifiedTextSymbolIndex:Dt.verticalPlacedTextSymbolIndex),Vi=i.br(I.textSizeData,he,Lr),Xr=N.get("text-padding");kn=this.collisionIndex.placeCollisionCircles(I,Ne,Lr,I.lineVertexArray,I.glyphOffsetArray,Vi,U,H,X,y,Qe,Ie.predicate,Dt.collisionCircleDiameter*Vi/i.bw,Xr,this.retainedQueryData[I.bucketInstanceId].tileID),Vn=Ne||kn.circles.length>0&&!kn.collisionDetected,Zn=Zn&&kn.offscreen,Mr=kn.occluded}if(_n.iconFeatureIndex&&(ss=_n.iconFeatureIndex),_n.iconBox){const Lr=Vi=>{ws(Vi);const Xr=Dt.hasIconTextFit&&Si?na(Si.x,Si.y,Be,Qe,this.transform.angle):new i.P(0,0),_i=I.getSymbolInstanceIconSize(me,this.transform.zoom,Dt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(I,_i,Vi,Xr,Fe,ne,U,Ie.predicate)};$i&&$i.box&&$i.box.length&&_n.verticalIconBox?(Ir=Lr(_n.verticalIconBox),er=Ir.box.length>0):(Ir=Lr(_n.iconBox),er=Ir.box.length>0),Zn=Zn&&Ir.offscreen,qr=Ir.occluded}const Xs=De||Dt.numHorizontalGlyphVertices===0&&wn===0,sl=Ye||Dt.numIconVertices===0;if(Xs||sl?sl?Xs||(er=er&&Vn):Vn=er&&Vn:er=Vn=er&&Vn,Vn&&ar&&ar.box&&this.collisionIndex.insertCollisionBox(ar.box,N.get("text-ignore-placement"),I.bucketInstanceId,$i&&$i.box&&Br?Br:si,Ie.ID),er&&Ir&&this.collisionIndex.insertCollisionBox(Ir.box,N.get("icon-ignore-placement"),I.bucketInstanceId,ss,Ie.ID),kn&&(Vn&&this.collisionIndex.insertCollisionCircles(kn.circles,N.get("text-ignore-placement"),I.bucketInstanceId,si,Ie.ID),y)){const Lr=I.bucketInstanceId;let Vi=this.collisionCircleArrays[Lr];Vi===void 0&&(Vi=this.collisionCircleArrays[Lr]=new vO);for(let Xr=0;Xr<kn.circles.length;Xr+=4)Vi.circles.push(kn.circles[Xr+0]),Vi.circles.push(kn.circles[Xr+1]),Vi.circles.push(kn.circles[Xr+2]),Vi.circles.push(kn.collisionDetected?1:0)}const Wo=I.projection.name!=="globe";ft=ft&&(Wo||!Mr),jt=jt&&(Wo||!qr),this.placements[yn]=new uu(Vn||ft,er||jt,Zn||I.justReloaded),d.add(yn)};if(I.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(I,this.retainedQueryData[I.bucketInstanceId].tileID),I.elevationType==="road"&&I.updateRoadElevation(),I.updateZOffset(),I.sortFeaturesByY){const Dt=I.getSortedSymbolIndexes(this.transform.angle);for(let qt=Dt.length-1;qt>=0;--qt){const _n=Dt[qt];Gt(I.symbolInstances.get(_n),_n,I.collisionArrays[_n])}I.hasAnyZOffset&&i.w(`${I.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(I.hasAnyZOffset){const Dt=I.getSortedIndexesByZOffset();for(let qt=0;qt<Dt.length;++qt){const _n=Dt[qt];Gt(I.symbolInstances.get(_n),_n,I.collisionArrays[_n])}}else for(let Dt=l.symbolInstanceStart;Dt<l.symbolInstanceEnd;Dt++)Gt(I.symbolInstances.get(Dt),Dt,I.collisionArrays[Dt]);if(y&&I.bucketInstanceId in this.collisionCircleArrays){const Dt=this.collisionCircleArrays[I.bucketInstanceId];i.ad.mat4.invert(Dt.invProjMatrix,U),Dt.viewportMatrix=this.collisionIndex.getViewportMatrix()}I.justReloaded=!1}markUsedJustification(l,d,y,S){const{leftJustifiedTextSymbolIndex:T,centerJustifiedTextSymbolIndex:I,rightJustifiedTextSymbolIndex:N,verticalPlacedTextSymbolIndex:$,crossTileID:U}=y,H=i.bB(d),X=S===i.bq.vertical?$:H==="left"?T:H==="center"?I:H==="right"?N:-1;T>=0&&(l.text.placedSymbolArray.get(T).crossTileID=X>=0&&T!==X?0:U),I>=0&&(l.text.placedSymbolArray.get(I).crossTileID=X>=0&&I!==X?0:U),N>=0&&(l.text.placedSymbolArray.get(N).crossTileID=X>=0&&N!==X?0:U),$>=0&&(l.text.placedSymbolArray.get($).crossTileID=X>=0&&$!==X?0:U)}markUsedOrientation(l,d,y){const S=d===i.bq.horizontal||d===i.bq.horizontalOnly?d:0,T=d===i.bq.vertical?d:0,{leftJustifiedTextSymbolIndex:I,centerJustifiedTextSymbolIndex:N,rightJustifiedTextSymbolIndex:$,verticalPlacedTextSymbolIndex:U}=y,H=l.text.placedSymbolArray;I>=0&&(H.get(I).placedOrientation=S),N>=0&&(H.get(N).placedOrientation=S),$>=0&&(H.get($).placedOrientation=S),U>=0&&(H.get(U).placedOrientation=T)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let y=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const S=d?d.symbolFadeChange(l):1,T=d?d.opacities:{},I=d?d.variableOffsets:{},N=d?d.placedOrientations:{};for(const $ in this.placements){const U=this.placements[$],H=T[$];H?(this.opacities[$]=new dd(H,S,U.text,U.icon,null,U.clipped),y=y||U.text!==H.text.placed||U.icon!==H.icon.placed):(this.opacities[$]=new dd(null,S,U.text,U.icon,U.skipFade,U.clipped),y=y||U.text||U.icon)}for(const $ in T){const U=T[$];if(!this.opacities[$]){const H=new dd(U,S,!1,!1);H.isHidden()||(this.opacities[$]=H,y=y||U.text.placed||U.icon.placed)}}for(const $ in I)this.variableOffsets[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.variableOffsets[$]=I[$]);for(const $ in N)this.placedOrientations[$]||!this.opacities[$]||this.opacities[$].isHidden()||(this.placedOrientations[$]=N[$]);y?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:l)}updateLayerOpacities(l,d,y,S){const T=new Set;for(const I of d){const N=I.getBucket(l);N&&I.latestFeatureIndex&&l.fqid===N.layerIds[0]&&(this.updateBucketOpacities(N,T,I,I.collisionBoxArray,y,S,I.tileID,l.scope),N.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(N,I.tileID),N.elevationType==="road"&&N.updateRoadElevation(),N.updateZOffset())}}updateBucketOpacities(l,d,y,S,T,I,N,$){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const U=l.layers[0].layout,H=l.layers[0].paint,X=!!l.layers[0].dynamicFilter(),q=new dd(null,0,!1,!1,!0),ne=U.get("text-allow-overlap"),de=U.get("icon-allow-overlap"),ae=U.get("text-variable-anchor"),he=U.get("text-rotation-alignment")==="map",me=U.get("text-pitch-alignment")==="map",Ie=H.get("symbol-z-offset"),Le=U.get("symbol-elevation-reference")==="sea",De=!Ie.isConstant(),Ye=new dd(null,0,ne&&(de||!l.hasIconData()||U.get("icon-optional")),de&&(ne||!l.hasTextData()||U.get("text-optional")),!0);!l.collisionArrays&&S&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(S);const Ne=(Be,Qe,tt)=>{for(let Ot=0;Ot<Qe/4;Ot++)Be.opacityVertexArray.emplaceBack(tt)};let Fe=0;I&&l.updateReplacement(N,I);for(let Be=0;Be<l.symbolInstances.length;Be++){const Qe=l.symbolInstances.get(Be),{numHorizontalGlyphVertices:tt,numVerticalGlyphVertices:Ot,crossTileID:bt,numIconVertices:Ht,tileAnchorX:Wt,tileAnchorY:sn}=Qe;let gt=null;const Ut=this.retainedQueryData[l.bucketInstanceId];De&&Qe&&Ut&&(gt=y.latestFeatureIndex.loadFeature({featureIndex:Qe.featureIndex,bucketIndex:Ut.bucketIndex,sourceLayerIndex:Ut.sourceLayerIndex,layoutVertexArrayOffset:0}));const ft=Ie.evaluate(gt,{}),jt=d.has(bt);let Bt=this.opacities[bt];jt?Bt=q:Bt||(Bt=Ye,this.opacities[bt]=Bt),d.add(bt);const Gt=tt>0||Ot>0,Dt=Ht>0,qt=this.placedOrientations[bt],_n=qt===i.bq.vertical,yn=qt===i.bq.horizontal||qt===i.bq.horizontalOnly;!Gt&&!Dt||Bt.isHidden()||Fe++;let wn=!1;if((Gt||Dt)&&I)for(const Rn of l.activeReplacements){if(i.bx(Rn,T,i.by.Symbol,$)||Rn.min.x>Wt||Wt>Rn.max.x||Rn.min.y>sn||sn>Rn.max.y)continue;const rr=i.bz(Wt,sn,N.canonical,Rn.footprintTileId.canonical);if(wn=i.bA(rr,Rn.footprint),wn)break}if(Gt){const Rn=wn?ch:lh(Bt.text);Ne(l.text,tt,_n?ch:Rn),Ne(l.text,Ot,yn?ch:Rn);const rr=Bt.text.isHidden(),{leftJustifiedTextSymbolIndex:Vn,centerJustifiedTextSymbolIndex:er,rightJustifiedTextSymbolIndex:Zn,verticalPlacedTextSymbolIndex:Mr}=Qe,qr=l.text.placedSymbolArray,Si=rr||_n?1:0;Vn>=0&&(qr.get(Vn).hidden=Si),er>=0&&(qr.get(er).hidden=Si),Zn>=0&&(qr.get(Zn).hidden=Si),Mr>=0&&(qr.get(Mr).hidden=rr||yn?1:0);const vr=this.variableOffsets[bt];vr&&this.markUsedJustification(l,vr.anchor,Qe,qt);const $i=this.placedOrientations[bt];$i&&(this.markUsedJustification(l,"left",Qe,$i),this.markUsedOrientation(l,$i,Qe))}if(Dt){const Rn=wn?ch:lh(Bt.icon),{placedIconSymbolIndex:rr,verticalPlacedIconSymbolIndex:Vn}=Qe,er=l.icon.placedSymbolArray,Zn=Bt.icon.isHidden()?1:0;rr>=0&&(Ne(l.icon,Ht,_n?ch:Rn),er.get(rr).hidden=Zn),Vn>=0&&(Ne(l.icon,Qe.numVerticalIconVertices,yn?ch:Rn),er.get(Vn).hidden=Zn)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Rn=l.collisionArrays[Be];if(Rn){let rr=new i.P(0,0),Vn=!0;if(Rn.textBox||Rn.verticalTextBox){if(ae){const Zn=this.variableOffsets[bt];Zn?(rr=ky(Zn.anchor,Zn.width,Zn.height,Zn.textOffset,Zn.textScale),he&&rr._rotate(me?this.transform.angle:-this.transform.angle)):Vn=!1}X&&(Vn=!Bt.clipped),Rn.textBox&&ah(l.textCollisionBox.collisionVertexArray,Bt.text.placed,!Vn||_n,ft,Le,rr.x,rr.y),Rn.verticalTextBox&&ah(l.textCollisionBox.collisionVertexArray,Bt.text.placed,!Vn||yn,ft,Le,rr.x,rr.y)}const er=Vn&&!!(!yn&&Rn.verticalIconBox);Rn.iconBox&&ah(l.iconCollisionBox.collisionVertexArray,Bt.icon.placed,er,ft,Le,Qe.hasIconTextFit?rr.x:0,Qe.hasIconTextFit?rr.y:0),Rn.verticalIconBox&&ah(l.iconCollisionBox.collisionVertexArray,Bt.icon.placed,!er,ft,Le,Qe.hasIconTextFit?rr.x:0,Qe.hasIconTextFit?rr.y:0)}}}if(l.fullyClipped=Fe===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const Be=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=Be.invProjMatrix,l.placementViewportMatrix=Be.viewportMatrix,l.collisionCircleArray=Be.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,d){const y=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*y>l}setStale(){this.stale=!0}}function ah(v,l,d,y,S,T,I){v.emplaceBack(l?1:0,d?1:0,T||0,I||0,y,S?1:0),v.emplaceBack(l?1:0,d?1:0,T||0,I||0,y,S?1:0),v.emplaceBack(l?1:0,d?1:0,T||0,I||0,y,S?1:0),v.emplaceBack(l?1:0,d?1:0,T||0,I||0,y,S?1:0)}const wE=Math.pow(2,25),fg=Math.pow(2,24),wO=Math.pow(2,17),SO=Math.pow(2,16),pg=Math.pow(2,9),mg=Math.pow(2,8),EO=Math.pow(2,1);function lh(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const l=v.placed?1:0,d=Math.floor(127*v.opacity);return d*wE+l*fg+d*wO+l*SO+d*pg+l*mg+d*EO+l}const ch=0;class Ly{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,d,y,S,T,I){const N=this._bucketParts;for(;this._currentTileIndex<l.length;)if(d.getBucketParts(N,S,l[this._currentTileIndex],this._sortAcrossTiles,I),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort((($,U)=>$.sortKey-U.sortKey)));this._currentPartIndex<N.length;){const $=N[this._currentPartIndex];if(d.placeLayerBucketPart($,this._seenCrossTileIDs,y,$.symbolInstanceStart===0,I),this._currentPartIndex++,T())return!0}return!1}}class hd{constructor(l,d,y,S,T,I,N,$,U){this.placement=new xO(l,T,I,N,$,U),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(l,d,y,S,T){const I=i.q.now(),N=()=>{const $=i.q.now()-I;return!this._forceFullPlacement&&$>2};for(;this._currentPlacementIndex>=0;){const $=d[l[this._currentPlacementIndex]],U=this.placement.collisionIndex.transform.zoom;if($.type==="symbol"&&(!$.minzoom||$.minzoom<=U)&&(!$.maxzoom||$.maxzoom>U)){const H=$,X=H.layout.get("symbol-z-elevate"),q=H.layout.get("symbol-sort-key").constantOr(1)!==void 0,ne=H.layout.get("symbol-z-order"),de=ne==="viewport-y"||ne==="auto"&&!(ne!=="viewport-y"&&q),ae=H.layout.get("text-allow-overlap")||H.layout.get("icon-allow-overlap")||H.layout.get("text-ignore-placement")||H.layout.get("icon-ignore-placement"),he=de&&ae,me=this._inProgressLayer=this._inProgressLayer||new Ly(H),Ie=i.C($.source,$.scope);if(me.continuePlacement(X||he?S[Ie]:y[Ie],this.placement,this._showCollisionBoxes,$,N,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const lb=512/i.ai/2;class TO{constructor(l,d,y){this.tileID=l,this.bucketInstanceId=y,this.index=new i.bE(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const S=l.canonical.x*i.ai,T=l.canonical.y*i.ai;for(let I=0;I<d.length;I++){const{key:N,crossTileID:$,tileAnchorX:U,tileAnchorY:H}=d.get(I),X=Math.floor((S+U)*lb),q=Math.floor((T+H)*lb);this.index.add(X,q),this.keys.push(N),this.crossTileIDs.push($)}this.index.finish()}findMatches(l,d,y){const S=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),T=lb/Math.pow(2,d.canonical.z-this.tileID.canonical.z),I=d.canonical.x*i.ai,N=d.canonical.y*i.ai;for(let $=0;$<l.length;$++){const U=l.get($);if(U.crossTileID)continue;const{key:H,tileAnchorX:X,tileAnchorY:q}=U,ne=Math.floor((I+X)*T),de=Math.floor((N+q)*T),ae=this.index.range(ne-S,de-S,ne+S,de+S);for(const he of ae){const me=this.crossTileIDs[he];if(this.keys[he]===H&&!y.has(me)){y.add(me),U.crossTileID=me;break}}}}}class MO{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class SE{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const d=Math.round((l-this.lng)/360);if(d!==0)for(const y in this.indexes){const S=this.indexes[y],T={};for(const I in S){const N=S[I];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+d),T[N.tileID.key]=N}this.indexes[y]=T}this.lng=l}addBucket(l,d,y){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let T=0;T<d.symbolInstances.length;T++)d.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const S=this.usedCrossTileIDs[l.overscaledZ];for(const T in this.indexes){const I=this.indexes[T];if(Number(T)>l.overscaledZ)for(const N in I){const $=I[N];$.tileID.isChildOf(l)&&$.findMatches(d.symbolInstances,l,S)}else{const N=I[l.scaledTo(Number(T)).key];N&&N.findMatches(d.symbolInstances,l,S)}}for(let T=0;T<d.symbolInstances.length;T++){const I=d.symbolInstances.get(T);I.crossTileID||(I.crossTileID=y.generate(),S.add(I.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new TO(l,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(l,d){for(const y of d.crossTileIDs)this.usedCrossTileIDs[l].delete(y)}removeStaleBuckets(l){let d=!1;for(const y in this.indexes){const S=this.indexes[y];for(const T in S)l[S[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,S[T]),delete S[T],d=!0)}return d}}class AO{constructor(){this.layerIndexes={},this.crossTileIDs=new MO,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,d,y,S){let T=this.layerIndexes[l.fqid];T===void 0&&(T=this.layerIndexes[l.fqid]=new SE);let I=!1;const N={};S.name!=="globe"&&T.handleWrapJump(y);for(const $ of d){const U=$.getBucket(l);U&&l.fqid===U.layerIds[0]&&(U.bucketInstanceId||(U.bucketInstanceId=++this.maxBucketInstanceId),T.addBucket($.tileID,U,this.crossTileIDs)&&(I=!0),N[U.bucketInstanceId]=!0)}return T.removeStaleBuckets(N)&&(I=!0),I}pruneUnusedLayers(l){const d={};l.forEach((y=>{d[y]=!0}));for(const y in this.layerIndexes)d[y]||delete this.layerIndexes[y]}}const fd=771;class br{constructor(l,d,y,S){this.blendFunction=l,this.blendColor=d,this.mask=y,this.blendEquation=S}}br.Replace=[1,0,1,0],br.disabled=new br(br.Replace,i.al.transparent,[!1,!1,!1,!1]),br.unblended=new br(br.Replace,i.al.transparent,[!0,!0,!0,!0]),br.alphaBlended=new br([1,fd,1,fd],i.al.transparent,[!0,!0,!0,!0]),br.alphaBlendedNonPremultiplied=new br([770,fd,770,fd],i.al.transparent,[!0,!0,!0,!0]),br.multiply=new br([774,0,774,0],i.al.transparent,[!0,!0,!0,!0]);class zn{constructor(l,d,y){this.func=l,this.mask=d,this.range=y}}zn.ReadOnly=!1,zn.ReadWrite=!0,zn.disabled=new zn(519,zn.ReadOnly,[0,1]);const Ny=7680;class or{constructor(l,d,y,S,T,I){this.test=l,this.ref=d,this.mask=y,this.fail=S,this.depthFail=T,this.pass=I}}or.disabled=new or({func:519,mask:0},0,0,Ny,Ny,Ny);const hu=1029,Uf=2305;class nr{constructor(l,d,y){this.enable=l,this.mode=d,this.frontFace=y}}function cb(v,l){const d=i.bG(v,3);i.ad.mat4.fromQuat(v,l),i.bI(v,3,d)}function uh(v,l){const d=i.ad.quat.identity([]);return i.ad.quat.rotateZ(d,d,-l),i.ad.quat.rotateX(d,d,-v),d}function Hf(v,l){const d=[v[0],v[1],0],y=[l[0],l[1],0];if(i.ad.vec3.length(d)>=1e-15){const I=i.ad.vec3.normalize([],d);i.ad.vec3.scale(y,I,i.ad.vec3.dot(y,I)),l[0]=y[0],l[1]=y[1]}const S=i.ad.vec3.cross([],l,v);if(i.ad.vec3.len(S)<1e-15)return null;const T=Math.atan2(-S[1],S[0]);return uh(Math.atan2(Math.sqrt(v[0]*v[0]+v[1]*v[1]),-v[2]),T)}nr.disabled=new nr(!1,hu,Uf),nr.backCCW=new nr(!0,hu,Uf),nr.backCW=new nr(!0,hu,2304),nr.frontCW=new nr(!0,1028,2304),nr.frontCCW=new nr(!0,1028,Uf);class ub{constructor(l,d){this.position=l,this.orientation=d}get position(){return this._position}set position(l){if(l){const d=l instanceof i.ac?l:new i.ac(l[0],l[1],l[2]);this._renderWorldCopies&&(d.x=i.bF(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(l,d){if(this.orientation=null,!this.position)return;const y=this.position,S=this._elevation?this._elevation.getAtPointOrZero(i.ac.fromLngLat(l)):0,T=i.ac.fromLngLat(l,S),I=[T.x-y.x,T.y-y.y,T.z-y.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=Hf(I,d)}setPitchBearing(l,d){this.orientation=uh(i.ak(l),i.ak(-d))}}class Wf{constructor(l,d){this._transform=i.ad.mat4.identity([]),this.orientation=d,this.position=l}get mercatorPosition(){const l=this.position;return new i.ac(l[0],l[1],l[2])}get position(){const l=i.bG(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var d;l&&i.bI(this._transform,3,[(d=l)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||i.ad.quat.identity([]),l&&cb(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,d){this._orientation=uh(l,d),cb(this._transform,this._orientation)}forward(){const l=i.bG(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=i.bG(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=i.bG(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,d){const y=new Float64Array(16);return i.ad.mat4.invert(y,this.getWorldToCamera(l,d)),y}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(l,d,y){const S=this.position;i.ad.vec3.scale(S,S,-l);const T=new Float64Array(16);return i.ad.mat4.fromScaling(T,[y,y,y]),i.ad.mat4.translate(T,T,S),T[10]*=d,T}getWorldToCamera(l,d){const y=new Float64Array(16),S=new Float64Array(4),T=this.position;return i.ad.quat.conjugate(S,this._orientation),i.ad.vec3.scale(T,T,-l),i.ad.mat4.fromQuat(y,S),i.ad.mat4.translate(y,y,T),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=d,y[9]*=d,y[10]*=d,y[11]*=d,y}getCameraToClipPerspective(l,d,y,S){const T=new Float64Array(16);return i.ad.mat4.perspective(T,l,d,y,S),T}getCameraToClipOrthographic(l,d,y,S,T,I){const N=new Float64Array(16);return i.ad.mat4.ortho(N,l,d,y,S,T,I),N}getDistanceToElevation(l,d=!1){const y=l===0?0:i.bH(l,d?i.aT(this.position[1]):this.position[1]),S=this.forward();return(y-this.position[2])/S[2]}clone(){return new Wf([...this.position],[...this.orientation])}}const ls={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class gg{constructor(l=0,d=0,y=0,S=0){if(isNaN(l)||l<0||isNaN(d)||d<0||isNaN(y)||y<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=d,this.left=y,this.right=S}interpolate(l,d,y){return d.top!=null&&l.top!=null&&(this.top=i.ah(l.top,d.top,y)),d.bottom!=null&&l.bottom!=null&&(this.bottom=i.ah(l.bottom,d.bottom,y)),d.left!=null&&l.left!=null&&(this.left=i.ah(l.left,d.left,y)),d.right!=null&&l.right!=null&&(this.right=i.ah(l.right,d.right,y)),this}getCenter(l,d){const y=i.ay((this.left+l-this.right)/2,0,l),S=i.ay((this.top+d-this.bottom)/2,0,d);return new i.P(y,S)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new gg(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const gn=15;class Fy{constructor(l,d,y,S,T,I,N){this.tileSize=512,this._renderWorldCopies=T===void 0||T,this._minZoom=l||0,this._maxZoom=d||22,this._minPitch=y??0,this._maxPitch=S??60,this.setProjection(I),this.setMaxBounds(N),this.width=0,this.height=0,this._center=new i.bO(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new gg,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Wf,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const l=new Fy(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l._allowWorldUnderZoom=this._allowWorldUnderZoom,l}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<gn}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(l,d=!1){const y=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||y)&&this._updateCameraOnTerrain(),(l||y)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return i.aA(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=i.bP(this.projectionOptions);const y=this.getProjection(),S=!i.bn(d,y);return S&&this._calcMatrices(),this.mercatorFromTransition=!1,S}setOrthographicProjectionAtLowPitch(l){return this._orthographicProjectionAtLowPitch!==l&&(this._orthographicProjectionAtLowPitch=l,this._calcMatrices(),!0)}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=i.bP({name:"mercator"});const d=l!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return i.bH(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this.width,this.height)}get bearing(){return i.bF(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const d=-l*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=i.ad.mat2.create(),i.ad.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const d=i.ay(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=i.ak(l),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const d=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(l){this._tileCoverLift!==l&&(this._tileCoverLift=l)}_updateCameraOnTerrain(){const l=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&l===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||l===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const y=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&y.exaggeration()&&this._centerAltitudeValidForExaggeration!==y.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*y.exaggeration(),this._centerAltitudeValidForExaggeration=y.exaggeration()):(this._centerAltitude=l||0,this._centerAltitudeValidForExaggeration=y.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let S=0,T=0;for(let I=0;I<d.length;I++){const N=new i.P(d[I][0]*this.width,y+d[I][1]*(this.height-y)),$=l.pointCoordinate(N);if(!$)continue;const U=1/Math.hypot($[0]-this._camera.position[0],$[1]-this._camera.position[1]);S+=$[3]*U,T+=U}return T===0?NaN:S/T}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),y=this.pixelsPerMeter/this.worldSize*d,S=this._mercatorZfromZoom(l),T=this._mercatorZfromZoom(this._maxZoom),I=Math.max(S-y,T);this._setZoom(this._zoomFromMercatorZ(I))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let y;y=l.z<this._camera.position[2]?[d.x,d.y,d.z]:[l.x,l.y,l.z];const S=i.ad.vec3.length(i.ad.vec3.sub([],this._camera.position,y));return i.ay(this._zoomFromMercatorZ(S),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let d=!1;if(l.orientation&&!i.ad.quat.exactEquals(l.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(l.orientation)),l.position){const y=[l.position.x,l.position.y,l.position.z];i.ad.vec3.exactEquals(y,this._camera.position)||(this._setCameraPosition(y),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,d=new ub;return d.position=new i.ac(l[0],l[1],l[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(l){if(!i.ad.quat.length(l))return!1;i.ad.quat.normalize(l,l);const d=i.ad.vec3.transformQuat([],[0,0,-1],l),y=i.ad.vec3.transformQuat([],[0,-1,0],l);if(y[2]<0)return!1;const S=Hf(d,y);return!!S&&(this._camera.orientation=S,!0)}_setCameraPosition(l){const d=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,S=this.cameraToCenterDistance;l[2]=i.ay(l[2],S/y,S/d),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,d,y){this._unmodified=!1,this._edgeInsets.interpolate(l,d,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const d=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(l){const d=[new i.bQ(0,l)];if(this.renderWorldCopies){const y=this.pointCoordinate(new i.P(0,0)),S=this.pointCoordinate(new i.P(this.width,0)),T=this.pointCoordinate(new i.P(this.width,this.height)),I=this.pointCoordinate(new i.P(0,this.height)),N=Math.floor(Math.min(y.x,S.x,T.x,I.x)),$=Math.floor(Math.max(y.x,S.x,T.x,I.x)),U=1;for(let H=N-U;H<=$+U;H++)H!==0&&d.push(new i.bQ(H,l))}return d}isLODDisabled(l){return(!l||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(l,d,y){let S=[];const T=y!==void 0,I=!T;if(I&&this.zoom<d||T&&y[0]===0&&y[1]===0)return S;const N=new Set,$=(H,X,q,ne,de)=>{const ae=i.c5(X,H,q,ne,de);N.has(ae)||(S.push(new i.aH(H,X,q,ne,de)),N.add(ae))};for(let H=0;H<l.length;H++){const X=l[H];if(I&&X.canonical.z!==d)continue;const q=X.canonical,ne=X.overscaledZ,de=X.wrap,ae=1<<q.z,he=q.x+1<ae,me=q.x>0,Ie=q.y+1<ae,Le=q.y>0,De=X.wrap-(me?0:1),Ye=X.wrap+(he?0:1),Ne=me?q.x-1:ae-1,Fe=he?q.x+1:0;if(T)y[0]<0?($(ne,Ye,q.z,Fe,q.y),y[1]<0&&Ie&&($(ne,de,q.z,q.x,q.y+1),$(ne,Ye,q.z,Fe,q.y+1)),y[1]>0&&Le&&($(ne,de,q.z,q.x,q.y-1),$(ne,Ye,q.z,Fe,q.y-1))):y[0]>0?($(ne,De,q.z,Ne,q.y),y[1]<0&&Ie&&($(ne,de,q.z,q.x,q.y+1),$(ne,De,q.z,Ne,q.y+1)),y[1]>0&&Le&&($(ne,de,q.z,q.x,q.y-1),$(ne,De,q.z,Ne,q.y-1))):y[1]<0&&Ie?$(ne,de,q.z,q.x,q.y+1):Le&&$(ne,de,q.z,q.x,q.y-1);else{const Be=X.visibleQuadrants;1&Be&&($(ne,De,q.z,Ne,q.y),Le&&($(ne,de,q.z,q.x,q.y-1),$(ne,De,q.z,Ne,q.y-1))),2&Be&&($(ne,Ye,q.z,Fe,q.y),Le&&($(ne,de,q.z,q.x,q.y-1),$(ne,Ye,q.z,Fe,q.y-1))),4&Be&&($(ne,De,q.z,Ne,q.y),Ie&&($(ne,de,q.z,q.x,q.y+1),$(ne,De,q.z,Ne,q.y+1))),8&Be&&($(ne,Ye,q.z,Fe,q.y),Ie&&($(ne,de,q.z,q.x,q.y+1),$(ne,Ye,q.z,Fe,q.y+1)))}}const U=[];for(const H of S)S.some((X=>H.isChildOf(X)))||U.push(H);if(S=U.filter((H=>!l.some((X=>!!(H.overscaledZ<d&&X.isChildOf(H))||H.equals(X)||H.isChildOf(X))))),I){const H=1<<d,X=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),q=[H*X.x,H*X.y],ne=4,de=ne*ne;S=S.filter((ae=>{const he=ae.canonical.x+.5-q[0],me=ae.canonical.y+.5-q[1];return he*he+me*me<de}))}return S}coveringTiles(l){let d=this.coveringZoomLevel(l);const y=d,S=this.elevation&&this.elevation.exaggeration(),T=S&&!l.isTerrainDEM,I=this.projection.name==="mercator";if(l.minzoom!==void 0&&d<l.minzoom)return[];l.maxzoom!==void 0&&d>l.maxzoom&&(d=l.maxzoom);const N=this.locationCoordinate(this.center),$=this.center.lat,U=1<<d,H=[U*N.x,U*N.y,0],X=this.projection.name==="globe",q=!X,ne=i.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,q),de=X?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ae=U*i.bH(1,this.center.lat),he=this._camera.position[2]/i.bH(1,this.center.lat),me=[U*de.x,U*de.y,he*(q?1:ae)],Ie=X||S,Le=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),De=this.isLODDisabled(!0)?d:0;let Ye;if(this._elevation&&l.isTerrainDEM)Ye=1e4*this._elevation.exaggeration();else if(this._elevation){const ft=this._elevation.getMinMaxForVisibleTiles();Ye=ft?ft.max:this._centerAltitude}else Ye=this._centerAltitude;const Ne=l.isTerrainDEM?-Ye:this._elevation?this._elevation.getMinElevationBelowMSL():0,Fe=this.projection.isReprojectedInTileSpace?i.bS(this):1,Be=ft=>{const Bt=new i.ac(ft.x+25e-6,ft.y,ft.z),Gt=new i.ac(ft.x,ft.y+25e-6,ft.z),Dt=ft.toLngLat(),qt=Bt.toLngLat(),_n=Gt.toLngLat(),yn=this.locationCoordinate(Dt),wn=this.locationCoordinate(qt),Rn=this.locationCoordinate(_n),rr=Math.hypot(wn.x-yn.x,wn.y-yn.y),Vn=Math.hypot(Rn.x-yn.x,Rn.y-yn.y);return Math.sqrt(rr*Vn)*Fe/25e-6},Qe=ft=>{const jt=Ye,Bt=Ne;return{aabb:i.bV(this,U,0,0,0,ft,Bt,jt,this.projection),zoom:0,x:0,y:0,minZ:Bt,maxZ:jt,wrap:ft,fullyVisible:!1}},tt=[];let Ot=[];const bt=d,Ht=l.reparseOverscaled?y:d,Wt=(he-this._centerAltitude)*ae,sn=ft=>{if(!this._elevation||!ft.tileID||!I)return;const jt=this._elevation.getMinMaxForTile(ft.tileID),Bt=ft.aabb;jt?(Bt.min[2]=jt.min,Bt.max[2]=jt.max,Bt.center[2]=(Bt.min[2]+Bt.max[2])/2):(ft.shouldSplit=Ut(ft),ft.shouldSplit||(Bt.min[2]=Bt.max[2]=Bt.center[2]=this._centerAltitude))},gt=(ft,jt)=>{if(.707*jt<ft)return 1;const Bt=jt/ft;return Bt/(1.4144271570014144+(Math.pow(1.1,Bt-1.4144271570014144+1)-1)/(1.1-1)-1)},Ut=ft=>{if(ft.zoom<De)return!0;if(ft.zoom===bt)return!1;if(ft.shouldSplit!=null)return ft.shouldSplit;const jt=ft.aabb.distanceX(me),Bt=ft.aabb.distanceY(me);let Gt=Wt,Dt=1;if(X){Gt=ft.aabb.distanceZ(me);const Vn=Math.pow(2,ft.zoom),er=i.aT((ft.y+1)/Vn),Zn=i.aT(ft.y/Vn),Mr=Math.min(Math.max($,er),Zn),qr=i.ca(Mr)/i.ca($);if(Dt=Mr===$?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,qr/this._mercatorScaleRatio),this.zoom<=i.c6&&ft.zoom===bt-1&&qr>=.9)return!0}else if(T&&(Gt=ft.aabb.distanceZ(me)*ae),this.projection.isReprojectedInTileSpace&&y<=5){const Vn=Math.pow(2,ft.zoom),er=Be(new i.ac((ft.x+.5)/Vn,(ft.y+.5)/Vn));Dt=er>.85?1:er}if(!I){const Vn=Math.sqrt(jt*jt+Bt*Bt+Gt*Gt);let er=(1<<bt-ft.zoom)*Le*Dt;return er*=gt(Math.max(Gt,Wt),Vn),Vn<er}let qt=Number.MAX_VALUE,_n=0;const yn=ft.aabb.getCorners(),wn=[];for(const Vn of yn){i.ad.vec3.sub(wn,Vn,me),X||(T?wn[2]*=ae:wn[2]=Wt);const er=i.ad.vec3.dot(wn,this._camera.forward());er<qt&&(qt=er,_n=Math.abs(wn[2]))}let Rn=(1<<bt-ft.zoom)*Le*Dt;if(Rn*=gt(Math.max(_n,Wt),qt),qt<Rn)return!0;const rr=ft.aabb.closestPoint(H);return rr[0]===H[0]&&rr[1]===H[1]};if(this.renderWorldCopies)for(let ft=1;ft<=3;ft++)tt.push(Qe(-ft)),tt.push(Qe(ft));for(tt.push(Qe(0));tt.length>0;){const ft=tt.pop(),jt=ft.x,Bt=ft.y;let Gt=ft.fullyVisible;const Dt=()=>this.projection.name==="globe"&&(ft.y===0||ft.y===(1<<ft.zoom)-1);if(!Gt){let qt=Ie?ft.aabb.intersects(ne):ft.aabb.intersectsFlat(ne);if(qt===0&&Dt()){const _n=new i.bT(ft.zoom,jt,Bt);qt=i.bU(this,U,_n,!0).intersects(ne)}if(qt===0)continue;Gt=qt===2}if(ft.zoom!==bt&&Ut(ft))for(let qt=0;qt<4;qt++){const _n=(jt<<1)+qt%2,yn=(Bt<<1)+(qt>>1),wn={aabb:I?ft.aabb.quadrant(qt):i.bV(this,U,ft.zoom+1,_n,yn,ft.wrap,ft.minZ,ft.maxZ,this.projection),zoom:ft.zoom+1,x:_n,y:yn,wrap:ft.wrap,fullyVisible:Gt,tileID:void 0,shouldSplit:void 0,minZ:ft.minZ,maxZ:ft.maxZ};T&&!X&&(wn.tileID=new i.aH(ft.zoom+1===bt?Ht:ft.zoom+1,ft.wrap,ft.zoom+1,_n,yn),sn(wn)),tt.push(wn)}else{const qt=ft.zoom===bt?Ht:ft.zoom;if(l.minzoom&&l.minzoom>qt)continue;let _n=0;if(!Gt){let rr=Ie?ft.aabb.intersectsPrecise(ne):ft.aabb.intersectsPreciseFlat(ne);if(rr===0&&Dt()){const Vn=new i.bT(ft.zoom,jt,Bt);rr=i.bU(this,U,Vn,!0).intersectsPrecise(ne)}if(rr===0)continue;if(l.calculateQuadrantVisibility)if(ne.containsPoint(ft.aabb.center))_n=15;else for(let Vn=0;Vn<4;Vn++)ft.aabb.quadrant(Vn).intersects(ne)!==0&&(_n|=1<<Vn)}const yn=H[0]-(.5+jt+(ft.wrap<<ft.zoom))*(1<<d-ft.zoom),wn=H[1]-.5-Bt,Rn=ft.tileID?ft.tileID:new i.aH(qt,ft.wrap,ft.zoom,jt,Bt);l.calculateQuadrantVisibility&&(Rn.visibleQuadrants=_n),Ot.push({tileID:Rn,distanceSq:yn*yn+wn*wn})}}if(this.fogCullDistSq){const ft=this.fogCullDistSq,jt=this.horizonLineFromTop();Ot=Ot.filter((Bt=>{const Gt=[0,0,0,1],Dt=[i.ai,i.ai,0,1],qt=this.calculateFogTileMatrix(Bt.tileID.toUnwrapped());i.ad.vec4.transformMat4(Gt,Gt,qt),i.ad.vec4.transformMat4(Dt,Dt,qt);const _n=i.ad.vec4.min([],Gt,Dt),yn=i.ad.vec4.max([],Gt,Dt),wn=i.bW(_n,yn);if(wn===0)return!0;let Rn=!1;const rr=this._elevation;if(rr&&wn>ft&&jt!==0){const Vn=this.calculateProjMatrix(Bt.tileID.toUnwrapped());let er;l.isTerrainDEM||(er=rr.getMinMaxForTile(Bt.tileID)),er||(er={min:Ne,max:Ye});const Zn=i.c7(this.rotation),Mr=[Zn[0]*i.ai,Zn[1]*i.ai,er.max];i.ad.vec3.transformMat4(Mr,Mr,Vn),Rn=(1-Mr[1])*this.height*.5<jt}return wn<ft||Rn}))}return Ot.sort(((ft,jt)=>ft.distanceSq-jt.distanceSq)).map((ft=>ft.tileID))}resize(l,d){this.width=l,this.height=d,this.pixelsToGLUnits=[2/l,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const d=i.ay(l.lat,-i.bX,i.bX),y=this.projection.project(l.lng,d);return new i.P(y.x*this.worldSize,y.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/i.bH(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,d){let y,S;const T=this.centerPoint;if(this.projection.name==="globe"){const N=this.worldSize;y=(d.x-T.x)/N,S=(d.y-T.y)/N}else{const N=this.pointCoordinate(d),$=this.pointCoordinate(T);y=N.x-$.x,S=N.y-$.y}const I=this.locationCoordinate(l);this.setLocation(new i.ac(I.x-y,I.y-S))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l,d){return this.projection.locationPoint(this,l,d)}locationPoint3D(l,d){return this.projection.locationPoint(this,l,d,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l,d){return this.coordinateLocation(this.pointCoordinate3D(l,d))}locationCoordinate(l,d){const y=d?i.bH(d,l.lat):void 0,S=this.projection.project(l.lng,l.lat);return new i.ac(S.x,S.y,y)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,d){const y=d??this._centerAltitude,S=[l.x,l.y,0,1],T=[l.x,l.y,1,1];i.ad.vec4.transformMat4(S,S,this.pixelMatrixInverse),i.ad.vec4.transformMat4(T,T,this.pixelMatrixInverse);const I=T[3];i.ad.vec4.scale(S,S,1/S[3]),i.ad.vec4.scale(T,T,1/I);const N=S[2],$=T[2];return{p0:S,p1:T,t:N===$?0:(y-N)/($-N)}}screenPointToMercatorRay(l){const d=[l.x,l.y,0,1],y=[l.x,l.y,1,1];return i.ad.vec4.transformMat4(d,d,this.pixelMatrixInverse),i.ad.vec4.transformMat4(y,y,this.pixelMatrixInverse),i.ad.vec4.scale(d,d,1/d[3]),i.ad.vec4.scale(y,y,1/y[3]),d[2]=i.bH(d[2],this._center.lat)*this.worldSize,y[2]=i.bH(y[2],this._center.lat)*this.worldSize,i.ad.vec4.scale(d,d,1/this.worldSize),i.ad.vec4.scale(y,y,1/this.worldSize),new i.as([d[0],d[1],d[2]],i.ad.vec3.normalize([],i.ad.vec3.sub([],y,d)))}rayIntersectionCoordinate(l){const{p0:d,p1:y,t:S}=l,T=i.bH(d[2],this._center.lat),I=i.bH(y[2],this._center.lat);return new i.ac(i.ah(d[0],y[0],S)/this.worldSize,i.ah(d[1],y[1],S)/this.worldSize,i.ah(T,I,S))}pointCoordinate(l,d=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,d)}pointCoordinate3D(l,d){if(!this.elevation)return this.pointCoordinate(l,d);let y=this.projection.pointCoordinate3D(this,l.x,l.y);if(y)return new i.ac(y[0],y[1],y[2]);let S=0,T=this.horizonLineFromTop();if(l.y>T)return this.pointCoordinate(l,d);const I=.02*T,N=l.clone();for(let $=0;$<10&&T-S>I;$++){N.y=i.ah(S,T,.66);const U=this.projection.pointCoordinate3D(this,N.x,N.y);U?(T=N.y,y=U):S=N.y}return y?new i.ac(y[0],y[1],y[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=i.bY)return!this.isPointAboveHorizon(l);const d=this.pointCoordinate(l);return d.y>=0&&d.y<=1}_coordinatePoint(l,d){const y=d&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,S=[l.x*this.worldSize,l.y*this.worldSize,y+l.toAltitude(),1];return i.ad.vec4.transformMat4(S,S,this.pixelMatrix),S[3]>0?new i.P(S[0]/S[3],S[1]/S[3]):new i.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:d}=this._edgeInsets,y=this.height-this._edgeInsets.bottom,S=this.width-this._edgeInsets.right,T=this.pointLocation3D(new i.P(d,l)),I=this.pointLocation3D(new i.P(S,l)),N=this.pointLocation3D(new i.P(S,y)),$=this.pointLocation3D(new i.P(d,y));let U=Math.min(T.lng,I.lng,N.lng,$.lng),H=Math.max(T.lng,I.lng,N.lng,$.lng),X=Math.min(T.lat,I.lat,N.lat,$.lat),q=Math.max(T.lat,I.lat,N.lat,$.lat);const ne=Math.pow(2,-this.zoom)/16*270,de=this.projection.name==="globe"?1:4,ae=(he,me,Ie,Le,De)=>{const Ye=(he+Ie)/2,Ne=(me+Le)/2,Fe=new i.P(Ye,Ne),{lng:Be,lat:Qe}=this.pointLocation3D(Fe),tt=Math.max(0,U-Be,X-Qe,Be-H,Qe-q);U=Math.min(U,Be),H=Math.max(H,Be),X=Math.min(X,Qe),q=Math.max(q,Qe),(De<de||tt>ne)&&(ae(he,me,Ye,Ne,De+1),ae(Ye,Ne,Ie,Le,De+1))};if(ae(d,l,S,l,1),ae(S,l,S,y,1),ae(S,y,d,y,1),ae(d,y,d,l,1),this.projection.name==="globe"){const[he,me]=i.bZ(this);he?(q=90,H=180,U=-180):me&&(X=-90,H=180,U=-180)}return new i.aB(new i.bO(U,X),new i.bO(H,q))}_getBoundsRectangular(l,d){const{top:y,left:S}=this._edgeInsets,T=this.height-this._edgeInsets.bottom,I=this.width-this._edgeInsets.right,N=new i.P(S,y),$=new i.P(I,y),U=new i.P(I,T),H=new i.P(S,T);let X=this.pointCoordinate(N,l),q=this.pointCoordinate($,l);const ne=this.pointCoordinate(U,d),de=this.pointCoordinate(H,d),ae=(he,me)=>(me.y-he.y)/(me.x-he.x);return X.y>1&&q.y>=0?X=new i.ac((1-de.y)/ae(de,X)+de.x,1):X.y<0&&q.y<=1&&(X=new i.ac(-de.y/ae(de,X)+de.x,0)),q.y>1&&X.y>=0?q=new i.ac((1-ne.y)/ae(ne,q)+ne.x,1):q.y<0&&X.y<=1&&(q=new i.ac(-ne.y/ae(ne,q)+ne.x,0)),new i.aB().extend(this.coordinateLocation(X)).extend(this.coordinateLocation(q)).extend(this.coordinateLocation(de)).extend(this.coordinateLocation(ne))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=l.visibleDemTiles.reduce(((y,S)=>{if(S.dem){const T=S.dem.tree;y.min=Math.min(y.min,T.minimums[0]),y.max=Math.max(y.max,T.maximums[0])}return y}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*l.exaggeration(),d.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,y=this.height/2-d*(1-this._horizonShift);return l?Math.max(0,y):y}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-i.bX,this.maxLat=i.bX,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=i.av(this.minLng)*this.tileSize,this.worldMaxX=i.av(this.maxLng)*this.tileSize,this.worldMinY=i.aC(this.maxLat)*this.tileSize,this.worldMaxY=i.aC(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,d){return this.projection.createTileMatrix(this,d,l)}calculateDistanceTileData(l){const d=l.key,y=this._distanceTileDataCache;if(y[d])return y[d];const S=l.canonical,T=1/this.height,I=this.cameraWorldSize,N=I/this.zoomScale(S.z),$=(S.x+Math.pow(2,S.z)*l.wrap)*N,U=S.y*N,H=this.point;H.x*=I/this.worldSize,H.y*=I/this.worldSize;const X=this.angle,q=Math.sin(-X),ne=-Math.cos(-X);return y[d]={bearing:[q,ne],center:[(H.x-$)*T,(H.y-U)*T],scale:N/i.ai*T},y[d]}calculateFogTileMatrix(l){const d=l.key,y=this._fogTileMatrixCache;if(y[d])return y[d];const S=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return i.ad.mat4.multiply(S,this.worldToFogMatrix,S),y[d]=new Float32Array(S),y[d]}calculateProjMatrix(l,d=!1,y=!1){const S=l.key;let T;if(T=y?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,T[S])return T[S];const I=this.calculatePosMatrix(l,this.worldSize);let N;return N=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:y?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,i.ad.mat4.multiply(I,N,I),T[S]=new Float32Array(I),T[S]}calculatePixelsToTileUnitsMatrix(l){const d=l.tileID.key,y=this._pixelsToTileUnitsCache;if(y[d])return y[d];const S=i.b_(l,this);return y[d]=S,y[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,d=i.ad.mat4.fromScaling([],[l,l,l]);return i.ad.mat4.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const d=i.bH(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(d),S=this._camera.forward(),T=i.bH(1,this._center.lat);y[2]/=T,S[2]/=T,i.ad.vec3.normalize(S,S);const I=l.raycast(y,S,l.exaggeration());if(I){const N=i.ad.vec3.scaleAndAdd([],y,S,I),$=new i.ac(N[0],N[1],i.bH(N[2],i.aT(N[1]))),U=($.z+i.ad.vec3.length([$.x-y[0],$.y-y[1],$.z-y[2]*T]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(U),this._centerAltitude=$.toAltitude(),this._center=this.coordinateLocation($),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const d=this._elevation,y=i.bH(1,this._center.lat)*this.worldSize,S=this._computeCameraPosition(y),T=d.getAtPointOrZero(new i.ac(...S)),I=this.pixelsPerMeter/this.worldSize*T,N=this._minimumHeightOverTerrain(),$=S[2]-I;if($<=N)if($<0||l){const U=this.locationCoordinate(this._center,this._centerAltitude),H=[S[0],S[1],U.z-S[2]],X=i.ad.vec3.length(H);H[2]-=(N-$)/this._pixelsPerMercatorPixel;const q=i.ad.vec3.length(H);if(q===0)return;i.ad.vec3.scale(H,H,X/q*this._pixelsPerMercatorPixel),this._camera.position=[S[0],S[1],U.z*this._pixelsPerMercatorPixel-H[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const q=this.center;return q.lat=i.ay(q.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(q.lng=i.ay(q.lng,this.minLng,this.maxLng)),this.center=q,void(this._constraining=!1)}const d=this._unmodified,{x:y,y:S}=this.point;let T=0,I=y,N=S;const $=this.width/2,U=this.height/2,H=this.worldMinY*this.scale,X=this.worldMaxY*this.scale;if(S-U<H&&(N=H+U),S+U>X&&(N=X-U),X-H<this.height&&(T=Math.max(T,this.height/(X-H)),N=(X+H)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const q=this.worldMinX*this.scale,ne=this.worldMaxX*this.scale,de=this.worldSize/2-(q+ne)/2;I=(y+de+this.worldSize)%this.worldSize-de,I-$<q&&(I=q+$),I+$>ne&&(I=ne-$),ne-q<this.width&&(T=Math.max(T,this.width/(ne-q)),I=(ne+q)/2)}I===y&&N===S||this._allowWorldUnderZoom||(this.center=this.unproject(new i.P(I,N))),T&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(T)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,d=this.projection.name==="globe",y=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=i.bH(1,this.center.lat)/i.bH(1,i.c8));const S=i.b$(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,S),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const T=this.projection.zAxisUnit==="meters"?y:1,I=this._camera.getWorldToCamera(this.worldSize,T);let N;const $=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if($[8]=2*-l.x/this.width,$[9]=2*l.y/this.height,this.isOrthographic){let Qe=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),tt=Qe*this.aspect,Ot=-tt,bt=-Qe;tt-=l.x,Ot-=l.x,Qe+=l.y,bt+=l.y,N=this._camera.getCameraToClipOrthographic(Ot,tt,bt,Qe,this._nearZ,this._farZ),((Ht,Wt,sn,gt)=>{for(let Ut=0;Ut<16;Ut++)Ht[Ut]=i.ah(Wt[Ut],sn[Ut],gt)})(N,N,$,i.c9(this.pitch>=gn?1:this.pitch/gn))}else N=$;const U=i.ad.mat4.mul([],$,I);let H=i.ad.mat4.mul([],N,I);if(this.projection.isReprojectedInTileSpace){const Qe=this.locationCoordinate(this.center),tt=i.ad.mat4.identity([]);i.ad.mat4.translate(tt,tt,[Qe.x*this.worldSize,Qe.y*this.worldSize,0]),i.ad.mat4.multiply(tt,tt,i.c0(this)),i.ad.mat4.translate(tt,tt,[-Qe.x*this.worldSize,-Qe.y*this.worldSize,0]),i.ad.mat4.multiply(H,H,tt),i.ad.mat4.multiply(U,U,tt),this.inverseAdjustmentMatrix=i.c1(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=i.ad.mat4.scale([],H,[this.worldSize,this.worldSize,this.worldSize/T,1]),this.projMatrix=H,this.invProjMatrix=i.ad.mat4.invert(new Float64Array(16),this.projMatrix),d){const Qe=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Qe[8]=2*-l.x/this.width,Qe[9]=2*l.y/this.height,this.expandedFarZProjMatrix=i.ad.mat4.mul([],Qe,I)}else this.expandedFarZProjMatrix=this.projMatrix;const X=i.ad.mat4.invert([],N);this.frustumCorners=i.c2.fromInvProjectionMatrix(X,this.horizonLineFromTop(),this.height),this.cameraFrustum=i.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const q=new Float32Array(16);i.ad.mat4.identity(q),i.ad.mat4.scale(q,q,[1,-1,1]),i.ad.mat4.rotateX(q,q,this._pitch),i.ad.mat4.rotateZ(q,q,this.angle);const ne=i.ad.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=i.ad.mat4.clone(ne);const de=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;ne[8]=2*-l.x/this.width,ne[9]=2*(l.y+de)/this.height,this.skyboxMatrix=i.ad.mat4.multiply(q,ne,q);const ae=this.point,he=ae.x,me=ae.y,Ie=this.width%2/2,Le=this.height%2/2,De=Math.cos(this.angle),Ye=Math.sin(this.angle),Ne=he-Math.round(he)+De*Ie+Ye*Le,Fe=me-Math.round(me)+De*Le+Ye*Ie,Be=new Float64Array(H);if(i.ad.mat4.translate(Be,Be,[Ne>.5?Ne-1:Ne,Fe>.5?Fe-1:Fe,0]),this.alignedProjMatrix=Be,H=i.ad.mat4.create(),i.ad.mat4.scale(H,H,[this.width/2,-this.height/2,1]),i.ad.mat4.translate(H,H,[1,-1,0]),this.labelPlaneMatrix=H,H=i.ad.mat4.create(),i.ad.mat4.scale(H,H,[1,-1,1]),i.ad.mat4.translate(H,H,[-1,-1,0]),i.ad.mat4.scale(H,H,[2/this.width,2/this.height,1]),this.glCoordMatrix=H,this.pixelMatrix=i.ad.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,U),this._calcFogMatrices(),this._distanceTileDataCache={},H=i.ad.mat4.invert(new Float64Array(16),this.pixelMatrix),!H)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=H,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=i.c3(this);const Qe=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=i.ad.vec3.transformMat4(Qe,Qe,I),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=H;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,y=this._camera.position,S=1/this.height/this._pixelsPerMercatorPixel,T=[l,l,d];i.ad.vec3.scale(T,T,S),i.ad.vec3.scale(y,y,-1),i.ad.vec3.multiply(y,y,T);const I=i.ad.mat4.create();i.ad.mat4.translate(I,I,y),i.ad.mat4.scale(I,I,T),this.mercatorFogMatrix=I,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,d,S)}_computeCameraPosition(l){const d=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,y=this._camera.forward(),S=this.point,T=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-l/this.worldSize*this._centerAltitude;return[S.x/this.worldSize-y[0]*T,S.y/this.worldSize-y[1]*T,l/this.worldSize*this._centerAltitude-y[2]*T]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=this._camera.position[2],S=l[2];let T=1;this.projection.wrap&&(this.center=this.center.wrap()),S>0&&(T=Math.min((d-y)/S,1)),this._camera.position=i.ad.vec3.scaleAndAdd([],this._camera.position,l,T),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,d=this._camera.forward(),{pitch:y,bearing:S}=this._camera.getPitchBearing(),T=i.bH(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,I=this._mercatorZfromZoom(this._maxZoom)*Math.cos(i.ak(this._maxPitch)),N=Math.max((l[2]-T)/Math.cos(y),I),$=this._zoomFromMercatorZ(N);i.ad.vec3.scaleAndAdd(l,l,d,N),this._pitch=i.ay(y,i.ak(this.minPitch),i.ak(this.maxPitch)),this.angle=i.bF(S,-Math.PI,Math.PI),this._setZoom(i.ay($,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new i.ac(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let d=0,y=i.bY,S=0,T=1/0;for(;y-d>1e-6&&y>d;){const I=d+.5*(y-d),N=this.tileSize*Math.pow(2,I),$=this.getCameraToCenterDistance(this.projection,I,N),U=this.scaleZoom($/(l*this.tileSize)),H=Math.abs(I-U);H<T&&(T=H,S=I),I<U?d=I:y=I}return S}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(i.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,d){const y=Math.min(l.x,d.x),S=Math.max(l.x,d.x),T=Math.min(l.y,d.y),I=Math.max(l.y,d.y);if(T<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const N=[new i.P(y,T),new i.P(S,I),new i.P(y,I),new i.P(S,T)],$=this.renderWorldCopies?-3:0,U=this.renderWorldCopies?4:1;for(const H of N){const X=this.pointRayIntersection(H);if(X.t<0)return!0;const q=this.rayIntersectionCoordinate(X);if(q.x<$||q.y<0||q.x>U||q.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+i.c4(this.fovAboveCenter)>88||this.anyCornerOffEdge(new i.P(0,0),new i.P(this.width,this.height))}zoomDeltaToMovement(l,d){const y=i.ad.vec3.length(i.ad.vec3.sub([],this._camera.position,l)),S=this._zoomFromMercatorZ(y)+d;return y-this._mercatorZfromZoom(S)}getCameraPoint(){if(this.projection.name==="globe"){const l=(function([d,y,S],T){const I=[d,y,S,1];i.ad.vec4.transformMat4(I,I,T);const N=I[3]=Math.max(I[3],1e-6);return I[0]/=N,I[1]/=N,I[2]/=N,I})([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new i.P(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(0,l))}}getCameraToCenterDistance(l,d=this.zoom,y=this.worldSize){const S=i.b$(l,d,this.width,this.height,1024),T=l.pixelSpaceConversion(this.center.lat,y,S);let I=.5/Math.tan(.5*this._fov)*this.height*T;return this.isOrthographic&&(I=i.ah(1,I,i.c9(this.pitch>=gn?1:this.pitch/gn))),I}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&i.ad.mat4.multiply(l,l,this.globeMatrix),l}getFrustum(l){return i.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,this.projection.zAxisUnit==="meters")}}const fu=(v,l)=>{if(l>0&&v.terrain&&i.w("Cutoff is currently disabled on terrain"),l<=0||v.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=v.transform,y=Math.max(Math.abs(d._zoom-(v.minCutoffZoom-1)),1),S=d.isLODDisabled(!1)?i.ae(60,45,d.pitch):i.ae(30,15,d.pitch),T=d._farZ-d._nearZ,I=l*d.height,N=((1-($=S))*d.cameraToCenterDistance+$*(d._farZ+I))*y;var $;return{shouldRenderCutoff:S<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(N-d._nearZ)/T,(N-I-d._nearZ)/T]}}},Po={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class EE{constructor(l,d){this.aabb=l,this.lastCascade=d}}class zy{add(l,d){const y=this.receivers[l.key];y!==void 0?(y.aabb.min[0]=Math.min(y.aabb.min[0],d.min[0]),y.aabb.min[1]=Math.min(y.aabb.min[1],d.min[1]),y.aabb.min[2]=Math.min(y.aabb.min[2],d.min[2]),y.aabb.max[0]=Math.max(y.aabb.max[0],d.max[0]),y.aabb.max[1]=Math.max(y.aabb.max[1],d.max[1]),y.aabb.max[2]=Math.max(y.aabb.max[2],d.max[2])):this.receivers[l.key]=new EE(d,null)}clear(){this.receivers={}}get(l){return this.receivers[l.key]}computeRequiredCascades(l,d,y){const S=i.ce.fromPoints(l.points);let T=0;for(const I in this.receivers){const N=this.receivers[I];if(!N||!S.intersectsAabb(N.aabb))continue;N.aabb.min=S.closestPoint(N.aabb.min),N.aabb.max=S.closestPoint(N.aabb.max);const $=N.aabb.getCorners();for(let U=0;U<y.length;U++){let H=!0;for(const X of $){const q=[X[0]*d,X[1]*d,X[2]];if(i.ad.vec3.transformMat4(q,q,y[U].matrix),q[0]<-1||q[0]>1||q[1]<-1||q[1]>1){H=!1;break}}if(N.lastCascade=U,T=Math.max(T,U),H)break}}return T+1}}class pu{constructor(l){this.painter=l,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new zy,this._depthMode=new zn(l.context.gl.LEQUAL,zn.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,l.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},(()=>{this.painter.style.map.triggerRepaint()})),l.tp.registerParameter(Po,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),l.tp.registerParameter(Po,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),l.tp.registerParameter(Po,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),l.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const l of this._cascades)l.texture.destroy(),l.framebuffer.destroy();this._cascades=[]}updateShadowParameters(l,d){const y=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!d||!d.properties)return;const S=d.properties.get("shadow-intensity");if(!d.shadowsEnabled()||S<=0||(this._shadowLayerCount=y.style.order.reduce(((de,ae)=>{const he=y.style._mergedLayers[ae];return de+(he.hasShadowPass()&&!he.isHidden(l.zoom)?1:0)}),0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const T=y.context,I=Po.shadowMapResolution,N=Po.shadowMapResolution;if(this._cascades.length===0||Po.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let de=0;de<Po.cascadeCount;++de){const ae=y._shadowMapDebug,he=T.gl,me=T.createFramebuffer(I,N,ae,"texture"),Ie=new i.T(T,{width:I,height:N,data:null},he.DEPTH_COMPONENT16);if(me.depthAttachment.set(Ie.texture),ae){const Le=new i.T(T,{width:I,height:N,data:null},he.RGBA8);me.colorAttachment.set(Le.texture)}this._cascades.push({framebuffer:me,texture:Ie,matrix:[],far:0,boundingSphereRadius:0,frustum:new i.bR,scale:0})}}this.shadowDirection=pd(d);let $=0;if(l.elevation){const de=l.elevation,ae=[1e4,-1e4];de.visibleDemTiles.filter((he=>he.dem)).forEach((he=>{const me=he.dem.tree;ae[0]=Math.min(ae[0],me.minimums[0]),ae[1]=Math.max(ae[1],me.maximums[0])})),ae[0]!==1e4&&($=(ae[1]-ae[0])*de.exaggeration())}const U=1.5*l.cameraToCenterDistance,H=3*U,X=new Float64Array(16);for(let de=0;de<this._cascades.length;++de){const ae=this._cascades[de];let he=l.height/50,me=1;Po.cascadeCount===1?me=H:de===0?me=U:(he=U,me=H);const[Ie,Le]=qf(l,this.shadowDirection,he,me,Po.shadowMapResolution,$);ae.scale=l.scale,ae.matrix=Ie,ae.boundingSphereRadius=Le,i.ad.mat4.invert(X,ae.matrix),ae.frustum=i.bR.fromInvProjectionMatrix(X,1,0,!0),ae.far=me}const q=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[q].far,this._cascades[q].far],this._uniformValues.u_shadow_intensity=S,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Po.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Po.shadowMapResolution,this._uniformValues.u_shadowmap_0=ls.ShadowMap0,this._uniformValues.u_shadowmap_1=ls.ShadowMap0+1,this._groundShadowTiles=y.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const ne=y.transform.elevation;for(const de of this._groundShadowTiles){let ae={min:0,max:0};if(ne){const he=ne.getMinMaxForTile(de);he&&(ae=he)}this.addShadowReceiver(de.toUnwrapped(),ae.min,ae.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(l){this._enabled=l}drawShadowPass(l,d){if(!this.enabled)return;const y=this.painter,S=y.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(y.transform.getFrustum(0),y.transform.worldSize,this._cascades),S.viewport.set([0,0,Po.shadowMapResolution,Po.shadowMapResolution]);for(let T=0;T<this._numCascadesToRender;++T){y.currentShadowCascade=T,S.bindFramebuffer.set(this._cascades[T].framebuffer.framebuffer),S.clear({color:i.al.white,depth:1});for(const I of l.order){const N=l._mergedLayers[I];if(!N.hasShadowPass()||N.isHidden(y.transform.zoom))continue;const $=l.getLayerSourceCache(N),U=$?d[$.id]:void 0;(N.type==="model"||U&&U.length)&&y.renderLayer(y,$,N,U)}}y.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const l=this.painter,d=l.style,y=l.context,S=d.directionalLight,T=d.ambientLight;if(!S||!T)return;const I=[],N=fu(l,l.longestCutoffRange);N.shouldRenderCutoff&&I.push("RENDER_CUTOFF"),I.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&I.push("NORMAL_OFFSET");const $=Yf(d,S,T),U=new zn(y.gl.LEQUAL,zn.ReadOnly,l.depthRangeFor3D);for(const H of this._groundShadowTiles){const X=H.toUnwrapped(),q=l.isTileAffectedByFog(H),ne=l.getOrCreateProgram("groundShadow",{defines:I,overrideFog:q});this.setupShadows(X,ne),l.uploadCommonUniforms(y,ne,X,null,N);const de={u_matrix:l.transform.calculateProjMatrix(X),u_ground_shadow_factor:$};ne.draw(l,y.gl.TRIANGLES,U,or.disabled,br.multiply,nr.disabled,de,"ground_shadow",l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments,null,l.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?br.unblended:br.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(l){const d=this.painter.transform,y=d.calculatePosMatrix(l,d.worldSize);return i.ad.mat4.multiply(y,this._cascades[this.painter.currentShadowCascade].matrix,y),Float32Array.from(y)}calculateShadowPassMatrixFromMatrix(l){return i.ad.mat4.multiply(l,this._cascades[this.painter.currentShadowCascade].matrix,l),Float32Array.from(l)}setupShadows(l,d,y,S=0){if(!this.enabled)return;const T=this.painter.transform,I=this.painter.context,N=I.gl,$=this._uniformValues,U=new Float64Array(16),H=T.calculatePosMatrix(l,T.worldSize);for(let X=0;X<this._cascades.length;X++)i.ad.mat4.multiply(U,this._cascades[X].matrix,H),$[X===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(U),I.activeTexture.set(N.TEXTURE0+ls.ShadowMap0+X),this._cascades[X].texture.bind(N.NEAREST,N.CLAMP_TO_EDGE);if(this.useNormalOffset=!!y,this.useNormalOffset){const X=i.cd(l.canonical),q=2/T.tileSize*i.ai/Po.shadowMapResolution,ne=q*this._cascades[0].boundingSphereRadius,de=q*this._cascades[this._cascades.length-1].boundingSphereRadius,ae=(y==="vector-tile"?1:3)/Math.pow(2,S-l.canonical.z-(1-T.zoom+Math.floor(T.zoom)));$.u_shadow_normal_offset=[X,ne*ae,de*ae],$.u_shadow_bias=[6e-5,.0012,.012]}else $.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(I,$)}setupShadowsFromMatrix(l,d,y=!1){if(!this.enabled)return;const S=this.painter.context,T=S.gl,I=this._uniformValues,N=new Float64Array(16);for(let $=0;$<Po.cascadeCount;$++)i.ad.mat4.multiply(N,this._cascades[$].matrix,l),I[$===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(N),S.activeTexture.set(T.TEXTURE0+ls.ShadowMap0+$),this._cascades[$].texture.bind(T.NEAREST,T.CLAMP_TO_EDGE);if(this.useNormalOffset=y,y){const $=Po.normalOffset;I.u_shadow_normal_offset=[1,$,$],I.u_shadow_bias=[6e-5,.0012,.012]}else I.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(S,I)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(l,d,y,S){if(S[2]>=0)return{};const T=(function($,U,H){const X=H/(1<<$.canonical.z);return new i.ce([$.canonical.x*X+$.wrap*H,$.canonical.y*X+$.wrap*H,0],[($.canonical.x+1)*X+$.wrap*H,($.canonical.y+1)*X+$.wrap*H,U])})(l,d,y).getCorners(),I=d/-S[2];S[0]<0?(i.ad.vec3.add(T[0],T[0],[S[0]*I,0,0]),i.ad.vec3.add(T[3],T[3],[S[0]*I,0,0])):S[0]>0&&(i.ad.vec3.add(T[1],T[1],[S[0]*I,0,0]),i.ad.vec3.add(T[2],T[2],[S[0]*I,0,0])),S[1]<0?(i.ad.vec3.add(T[0],T[0],[0,S[1]*I,0]),i.ad.vec3.add(T[1],T[1],[0,S[1]*I,0])):S[1]>0&&(i.ad.vec3.add(T[2],T[2],[0,S[1]*I,0]),i.ad.vec3.add(T[3],T[3],[0,S[1]*I,0]));const N={};return N.vertices=T,N.planes=[Gf(T[1],T[0],T[4]),Gf(T[2],T[1],T[5]),Gf(T[3],T[2],T[6]),Gf(T[0],T[3],T[7])],N}addShadowReceiver(l,d,y){this._receivers.add(l,i.ce.fromTileIdAndHeight(l,d,y))}getMaxCascadeForTile(l){const d=this._receivers.get(l);return d&&d.lastCascade?d.lastCascade:0}}function Gf(v,l,d){const y=i.ad.vec3.sub([],d,l),S=i.ad.vec3.sub([],v,l),T=i.ad.vec3.cross([],y,S),I=i.ad.vec3.length(T);return I===0?[0,0,1,0]:(i.ad.vec3.scale(T,T,1/I),[T[0],T[1],T[2],-i.ad.vec3.dot(T,l)])}function pd(v){const l=v.properties.get("direction"),d=i.cc(l.x,l.y,l.z);d[2]=i.ay(d[2],0,75);const y=i.cf([d[0],d[1],d[2]]);return i.ad.vec3.fromValues(y.x,y.y,y.z)}function Yf(v,l,d){const y=l.properties.get("color-use-theme")==="none",S=l.properties.get("color"),T=l.properties.get("intensity"),I=l.properties.get("direction"),N=[I.x,I.y,I.z],$=d.properties.get("color-use-theme")==="none",U=d.properties.get("color"),H=d.properties.get("intensity"),X=Math.max(i.ad.vec3.dot([0,0,1],N),0),q=[0,0,0];i.ad.vec3.scale(q,U.toRenderColor($?null:v.getLut(l.scope)).toArray01Linear().slice(0,3),H);const ne=[0,0,0];return i.ad.vec3.scale(ne,S.toRenderColor(y?null:v.getLut(d.scope)).toArray01Linear().slice(0,3),X*T),i.cg([q[0]>0?q[0]/(q[0]+ne[0]):0,q[1]>0?q[1]/(q[1]+ne[1]):0,q[2]>0?q[2]/(q[2]+ne[2]):0])}function qf(v,l,d,y,S,T){const I=v.zoom,N=v.scale,$=v.worldSize,U=1/$,H=v.aspect,X=Math.sqrt(1+H*H)*Math.tan(.5*v.fovX),q=X*X,ne=y-d,de=y+d;let ae,he;q>ne/de?(ae=y,he=y*X):(ae=.5*de*(1+q),he=.5*Math.sqrt(ne*ne+2*(y*y+d*d)*q+de*de*q*q));const me=v.projection.pixelsPerMeter(v.center.lat,$),Ie=v._camera.getCameraToWorldMercator(),Le=[0,0,-ae*U];i.ad.vec3.transformMat4(Le,Le,Ie);let De=he*U;const Ye=v._edgeInsets;if(!(Ye.left===0&&Ye.top===0&&Ye.right===0&&Ye.bottom===0||Ye.left===Ye.right&&Ye.top===Ye.bottom)){const Gt=v._camera.getWorldToCamera(v.worldSize,v.projection.zAxisUnit==="meters"?me:1),Dt=v._camera.getCameraToClipPerspective(v._fov,v.width/v.height,d,y);Dt[8]=2*-v.centerOffset.x/v.width,Dt[9]=2*v.centerOffset.y/v.height;const qt=new Float64Array(16);i.ad.mat4.mul(qt,Dt,Gt);const _n=new Float64Array(16);i.ad.mat4.invert(_n,qt);const yn=i.bR.fromInvProjectionMatrix(_n,$,I,!0);for(const wn of yn.points){const Rn=((Ne=wn)[0]/=N,Ne[1]/=N,Ne[2]=i.bH(Ne[2],v._center.lat),Ne);De=Math.max(De,i.ad.vec3.len(i.ad.vec3.subtract([],Le,Rn)))}}var Ne;De*=S/(S-1);const Fe=Math.acos(l[2]),Be=Math.atan2(-l[0],-l[1]),Qe=new Wf;Qe.position=Le,Qe.setPitchBearing(Fe,Be);const tt=Qe.getWorldToCamera($,me),Ot=De*$,bt=Math.min(v._mercatorZfromZoom(17)*$*-2,-2*Ot),Ht=Qe.getCameraToClipOrthographic(-Ot,Ot,-Ot,Ot,bt,(Ot+T*me)/l[2]),Wt=new Float64Array(16);i.ad.mat4.multiply(Wt,Ht,tt);const sn=i.ad.vec3.fromValues(Math.floor(1e6*Le[0])/1e6*$,Math.floor(1e6*Le[1])/1e6*$,0),gt=.5*S,Ut=[0,0,0];i.ad.vec3.transformMat4(Ut,sn,Wt),i.ad.vec3.scale(Ut,Ut,gt);const ft=[Math.floor(Ut[0]),Math.floor(Ut[1]),Math.floor(Ut[2])],jt=[0,0,0];i.ad.vec3.sub(jt,Ut,ft),i.ad.vec3.scale(jt,jt,-1/gt);const Bt=new Float64Array(16);return i.ad.mat4.identity(Bt),i.ad.mat4.translate(Bt,Bt,jt),i.ad.mat4.multiply(Wt,Bt,Wt),[Wt,Ot]}class CO extends i.E{constructor(l){super(),this.requestManager=l,this.models={"":{}},this.modelUris={"":{}},this.numModelsLoading={}}loadModel(l,d){return i.aN(this.requestManager.transformRequest(d,i.R.Model).url).then((y=>{if(!y)return;const S=i.aO(y),T=new i.aP(l,void 0,void 0,S);return T.computeBoundsAndApplyParent(),T})).catch((y=>{if(y&&y.status===404)return null;this.fire(new i.z(new Error(`Could not load model ${l} from ${d}: ${y.message}`)))}))}load(l,d,y={keepNumReferences:!1}){this.models[d]||(this.models[d]={});const S=Object.keys(l);this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+S.length;const T=[];for(const I of S)T.push(this.loadModel(I,l[I]));Promise.allSettled(T).then((I=>{for(let N=0;N<I.length;N++){const{status:$,value:U}=I[N];if($==="fulfilled"&&U){const H=this.models[d][S[N]];this.models[d][S[N]]={model:U,numReferences:y.keepNumReferences&&H?H.numReferences:1}}}this.numModelsLoading[d]-=S.length,this.fire(new i.A("data",{dataType:"style"}))})).catch((I=>{this.fire(new i.z(new Error(`Could not load models: ${I.message}`)))}))}isLoaded(){for(const l in this.numModelsLoading)if(this.numModelsLoading[l]>0)return!1;return!0}hasModel(l,d){return!!this.getModel(l,d)}getModel(l,d){return this.models[d]||(this.models[d]={}),this.models[d][l]?this.models[d][l].model:void 0}addModel(l,d,y){this.models[y]||(this.models[y]={}),this.modelUris[y]||(this.modelUris[y]={}),this.hasModel(l,y)&&this.models[y][l].numReferences++,this.modelUris[y][l]=this.requestManager.normalizeModelURL(d),this.load({[l]:this.modelUris[y][l]},y)}addModels(l,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const y=this.modelUris[d];for(const S in l)this.models[d][S]={},y[S]=this.requestManager.normalizeModelURL(l[S]);this.load(y,d,{keepNumReferences:!0})}reloadModels(l){this.load(this.modelUris[l],l)}addModelsFromBucket(l,d){this.models[d]||(this.models[d]={}),this.modelUris[d]||(this.modelUris[d]={});const y={};for(const S of l)this.hasModel(S,d)?this.models[d][S].numReferences++:(this.modelUris[d][S]=this.requestManager.normalizeModelURL(S),y[S]=this.modelUris[d][S]);this.load(y,d)}removeModel(l,d){if(this.models[d]&&this.models[d][l]&&(this.models[d][l].numReferences--,this.models[d][l].numReferences===0)){const y=this.models[d][l].model;delete this.models[d][l],delete this.modelUris[d][l],y.destroy()}}listModels(l){return this.models[l]||(this.models[l]={}),Object.keys(this.models[l])}upload(l,d){this.models[d]||(this.models[d]={});for(const y in this.models[d])this.models[d][y].model&&this.models[d][y].model.upload(l.context)}}const IO=new i.a7({data:new i.a8(i.a5.colorTheme.data)}),db={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function TE(v){return v=v||{},Object.assign(v,db)}class ME extends i.E{constructor(l){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},i.aQ(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=l,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle((l=>{l.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new i.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=l.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=l.stylesheet.indoor.buildingFeaturesetId,this._scope=l.scope))})),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:l=>(l.feature&&l.feature.properties.floorplan&&this.selectFloorplan(l.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(l){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!(function(I,N){const[$,U]=I,{center:H,radius:X}=N,[q,ne]=H,de=Math.abs($-q);return Math.sqrt((de>180?360-de:de)**2+(U-ne)**2)<=X})([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new i.A("floorplangone")));const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},y=new i.P(this._map.transform.width/2,this._map.transform.height/2),S=[new i.P(0,0),new i.P(this._map.transform.width,this._map.transform.height)],T=this._map.queryRenderedFeatures(l?S:y,d);T.length>0&&(this._selectedFloorplan&&T[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=T[0],this._floorplanSelected(!1)))}_floorplanSelected(l){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=(function(T){const[[I,N],[$,U]]=T,H=($-I+360)%360,X=H>180?360-H:H;return{center:[(I+X/2+360)%360,(N+U)/2],radius:Math.sqrt(X**2+(U-N)**2)/2}})(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const d=this._floorplanStates[this._indoorData.id].selectedBuilding,y=this._floorplanStates[this._indoorData.id].selectedLevel;let S;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const T of this._indoorData.levels)T.id===this._selectedLevel.id&&(S=T.id);if(this.fire(new i.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:S})),d){const T=this._indoorData.buildings.find((I=>I.id===d));this._buildingSelected(T,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(y){const T=this._indoorData.levels.find((I=>I.id===y));this._updateLevels(T,l)}else l&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(l,d){d&&l&&l.extent&&this._map.fitBounds(l.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=l?l.id:void 0;const y=this._indoorData.levels.filter((S=>l.levels.includes(S.id)));this.fire(new i.A("buildingselected",{buildingId:l.id,levels:y}))}_levelSelected(l){if(l==="overview")this._updateLevels(void 0,!0);else{const d=this._indoorData.levels.find((y=>y.id===l));this._updateLevels(d,!0)}this.fire(new i.A("levelselected",{levelId:l==="overview"?void 0:l}))}_updateLevels(l,d){if(!l)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(d&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function y(U){const H=U.indexOf("/floor/");if(H===-1)return U;const X=H+7,q=U.indexOf("/",X);return q===-1?U.slice(X):U.slice(X,q)}this._selectedLevel=l,this._floorplanStates[this._indoorData.id].selectedLevel=l?l.id:void 0;const S=[],T={},I={},N={},$={};for(const U of this._indoorData.levels)if(S.push(U.id),T[U.id]=U.height,I[U.id]=U.base,l){if(this.mergeFloors){const H=y(l.id),X=y(U.id);N[U.id]=X===H?"true":"false"}else N[U.id]=U.id===l.id?"true":"false";$[U.id]=U.base<l.base?"true":"false"}else $[U.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",S]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",T]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",I]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",N]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",$]),l&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!l.isUnderground),d&&l.extent)){const U=this._map.cameraForBounds(l.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),H=this._map.getZoom(),X=U.zoom?Math.abs(H-U.zoom):0;this._map.fitBounds(l.extent,X>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:H})}}selectFloorplan(l){const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},y=[new i.P(0,0),new i.P(this._map.transform.width,this._map.transform.height)],S=this._map.queryRenderedFeatures(y,d);if(S.length>0){for(const T of S)if(JSON.parse(T.properties["indoor-data"]).floorplanIDs.includes(l)){this._selectedFloorplan=T,this._floorplanSelected(!0);break}}}selectBuilding(l){const d=this._indoorData.buildings.find((y=>y.id===l));this._buildingSelected(d,!0)}selectLevel(l){this._levelSelected(l)}}function AE(v){if(!v.metadata||!v.metadata.content_area)return;const l=i.q.devicePixelRatio,{left:d,top:y,width:S,height:T}=v.metadata.content_area,I=d*l,N=y*l;return[I,N,I+S*l,N+T*l]}function By(v){if(v)return v.map((([l,d])=>[l*i.q.devicePixelRatio,d*i.q.devicePixelRatio]))}class PO{constructor(l,d,y){this.id=l,this.scope=d,this.sourceCache=y,this.pendingRequests=new Set,this.missingRequests=new Set}addPendingRequest(l){this.missingRequests.has(l.name)||this.pendingRequests.has(l.name)||this.pendingRequests.add(l.name)}hasPendingRequests(){return this.pendingRequests.size>0}resolvePendingRequests(){const l=new Map;if(!this.sourceCache.loaded())return l;const d=this.sourceCache.getVisibleCoordinates();if(d.length===0)return l;const y=this.sourceCache.getSource();if(!(y instanceof Pc))return l;const S=d.map((I=>this.sourceCache.getTile(I))),T=y.getImages(S,Array.from(this.pendingRequests));for(const[I,N]of T)l.set(i.I.from({name:I,iconsetId:this.id}),N),this.pendingRequests.delete(I);for(const I of this.pendingRequests)this.missingRequests.add(I);return this.pendingRequests.clear(),l}}const dh=(v,l)=>vt(v,l&&l.filter((d=>d.identifier!=="source.canvas"))),OO=i.aA(Or,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport","addIconset","removeIconset"]),DO=i.aA(Or,["setCenter","setZoom","setBearing","setPitch"]),$y=new Set(["background","sky","slot","custom"]),CE={version:8,layers:[],sources:{}},_g={duration:300,delay:0};class lc extends i.E{constructor(l,d={}){super(),this.map=l,this.scope=d.scope||"",this.globalId=null,this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=i.l({},_g),this._buildingIndex=new bE(this),this.crossTileSymbolIndex=new AO,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=d.styleChanges||new je,this.dispatcher=d.dispatcher?d.dispatcher:new i.D(i.cj(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new nt(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.addScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new i.ck(l._requestManager,d.localFontFamily?i.cl.all:d.localIdeographFontFamily?i.cl.ideographs:i.cl.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new CO(l._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._config=d.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:d.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=d.initialConfig,this.dispatcher.broadcast("setReferrer",i.cm());const y=this;this._rtlTextPluginCallback=lc.registerForPluginStateChange((S=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},((T,I)=>{if(i.cn(T),I&&I.every((N=>N)))for(const N in y._sourceCaches){const $=y._sourceCaches[N],U=$.getSource().type;U!=="vector"&&U!=="geojson"||$.reload()}}))})),this.on("data",(S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const T=this.getOwnSource(S.sourceId);if(T&&T.vectorLayerIds)for(const I in this._layers){const N=this._layers[I];N.source===T.id&&this._validateLayer(N)}}))}load(l){return l?(typeof l=="string"?this.loadURL(l):this.loadJSON(l),this):this}_getGlobalId(l){if(!l)return null;if(typeof l=="string"){if(i.f(l))return l;const d=i.co(l);if(!d.startsWith("http"))try{return new URL(d,location.href).toString()}catch{return d}return d}return`json://${i.cp(JSON.stringify(l))}`}_diffStyle(l,d,y){this.globalId=this._getGlobalId(l);const S=(T,I)=>{try{I(null,this.setState(T,y))}catch(N){I(N,!1)}};if(typeof l=="string"){const T=this.map._requestManager.normalizeStyleURL(l),I=this.map._requestManager.transformRequest(T,i.R.Style);i.n(I,((N,$)=>{N?this.fire(new i.z(N)):$&&S($,d)}))}else typeof l=="object"&&S(l,d)}loadURL(l,d={}){this.fire(new i.A("dataloading",{dataType:"style"}));const y=typeof d.validate=="boolean"?d.validate:!i.f(l);this.globalId=this._getGlobalId(l),l=this.map._requestManager.normalizeStyleURL(l,d.accessToken),this.resolvedImports.add(l);const S=this.importsCache.get(l);if(S)return this._load(S,y);const T=this.map._requestManager.transformRequest(l,i.R.Style);this._request=i.n(T,((I,N)=>{if(this._request=null,I)this.fire(new i.z(I));else if(N)return this.importsCache.set(l,N),this._load(N,y)}))}loadJSON(l,d={}){this.fire(new i.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(l),this._request=i.q.frame((()=>{this._request=null,this._load(l,d.validate!==!1)}))}loadEmpty(){this.fire(new i.A("dataloading",{dataType:"style"})),this._load(CE,!1)}_loadImports(l,d,y){if(this.importDepth>=4)return i.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const S=[];for(const T of l){const I=this._createFragmentStyle(T),N=new Promise((H=>{I.once("style.import.load",H),I.once("error",H)})).then((()=>this.mergeAll()));if(S.push(N),this.resolvedImports.has(T.url)){I.loadEmpty();continue}const $=T.data||this.importsCache.get(T.url);$?(I.loadJSON($,{validate:d}),this._isInternalStyle($)&&(I.globalId=null)):T.url?I.loadURL(T.url,{validate:d}):I.loadEmpty();const U={style:I,id:T.id,config:T.config};if(y){const H=this.fragments.findIndex((({id:X})=>X===y));this.fragments=this.fragments.slice(0,H).concat(U).concat(this.fragments.slice(H))}else this.fragments.push(U)}return Promise.allSettled(S)}getImportGlobalIds(l=this,d=new Set){for(const y of l.fragments)y.style.globalId&&d.add(y.style.globalId),this.getImportGlobalIds(y.style,d);return[...d.values()]}_createFragmentStyle(l){const d=this.scope?i.C(l.id,this.scope):l.id;let y;const S=this._initialConfig&&this._initialConfig[d];(l.config||S)&&(y=i.l({},l.config,S));const T=new lc(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:y,configOptions:this.options,colorThemeOverride:l["color-theme"],configDependentLayers:this._configDependentLayers});return T.setEventedParent(this.map,{style:T}),T}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(l){return this.isRootStyle()&&(l.fragment||!!l.schema&&l.fragment!==!1)}_load(l,d){const y=l.indoor?TE(l.schema):l.schema;if(this._isInternalStyle(l)){const I=i.l({},CE,{imports:[{id:"basemap",data:l,url:""}]});return void this._load(I,d)}if(this.updateConfig(this._config,y),d&&dh(this,At(l)))return;this._loaded=!0,this.stylesheet=i.cq(l);const S=()=>{for(const U in l.sources)this.addSource(U,l.sources[U],{validate:!1,isInitialLoad:!0});if(l.iconsets)for(const U in l.iconsets)this.addIconset(U,l.iconsets[U]);l.sprite?this._loadIconset(l.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(l.glyphs);const I=cg(this.stylesheet.layers);if(this._order=I.map((U=>U.id)),this.stylesheet.light&&i.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const U=this.stylesheet.lights[0];this.light=new kt(U.properties,U.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new kt(this.stylesheet.light)),this._layers={};for(const U of I){const H=i.cv(U,this.scope,this._styleColorTheme.lut,this.options);H.configDependencies.size!==0&&this._configDependentLayers.add(H.fqid),H.setEventedParent(this,{layer:{id:H.id}}),this._layers[H.id]=H;const X=this.getOwnLayerSourceCache(H),q=!!this.directionalLight&&this.directionalLight.shadowsEnabled();X&&H.canCastShadows()&&q&&(X.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const N=this.stylesheet.terrain;N&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(N,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new i.A("data",{dataType:"style"}));const $=this.isRootStyle();l.imports?this._loadImports(l.imports,d).then((()=>{this._reloadImports(),this.fire(new i.A($?"style.load":"style.import.load"))})):(this._reloadImports(),this.fire(new i.A($?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const T=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(T){const I=this._evaluateColorThemeData(T);this._loadColorTheme(I).then((()=>{S()})).catch((N=>{i.w(`Couldn't load color theme from the stylesheet: ${N}`),S()}))}else this._styleColorTheme.lut=null,S()}isRootStyle(){return this.importDepth===0}mergeAll(){let l,d,y,S,T,I,N,$,U,H;const X={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle((q=>{if(q.stylesheet){if(q.light!=null&&(l=q.light),q.stylesheet.lights)for(const ne of q.stylesheet.lights)ne.type==="ambient"&&q.ambientLight!=null&&(d=q.ambientLight),ne.type==="directional"&&q.directionalLight!=null&&(y=q.directionalLight);S=this._prioritizeTerrain(S,q.terrain,q.stylesheet.terrain),q.stylesheet.fog&&q.fog!=null&&(T=q.fog),q.stylesheet.snow&&q.snow!=null&&(I=q.snow),q.stylesheet.rain&&q.rain!=null&&(N=q.rain),q.stylesheet.camera!=null&&(H=q.stylesheet.camera),q.stylesheet.projection!=null&&($=q.stylesheet.projection),q.stylesheet.transition!=null&&(U=q.stylesheet.transition),X[q.scope]=q._styleColorTheme}})),this.light=l,this.ambientLight=d,this.directionalLight=y,this.fog=T,this.snow=I,this.rain=N,this._styleColorThemeForScope=X,S===null?delete this.terrain:this.terrain=S,this.camera=H||{"camera-projection":"perspective"},this.projection=$||{name:"mercator"},this.transition=i.l({},_g,U),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(l){const d=y=>{for(const S of y.fragments)d(S.style);l(y)};d(this)}_prioritizeTerrain(l,d,y){const S=l&&l.drapeRenderMode===0;return y===null?d&&d.drapeRenderMode===0?d:S?l:null:d!=null&&(!l||S||d&&d.drapeRenderMode===1)?d:l}mergeTerrain(){let l;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle((d=>{l=this._prioritizeTerrain(l,d.terrain,d.stylesheet.terrain)})),l===null?delete this.terrain:this.terrain=l}mergeProjection(){let l;this.forEachFragmentStyle((d=>{d.stylesheet.projection!=null&&(l=d.stylesheet.projection)})),this.projection=l||{name:"mercator"}}mergeSources(){const l={},d={},y={};this.forEachFragmentStyle((S=>{for(const T in S._sourceCaches){const I=i.C(T,S.scope);l[I]=S._sourceCaches[T]}for(const T in S._otherSourceCaches){const I=i.C(T,S.scope);d[I]=S._otherSourceCaches[T]}for(const T in S._symbolSourceCaches){const I=i.C(T,S.scope);y[I]=S._symbolSourceCaches[T]}})),this._mergedSourceCaches=l,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=y}mergeLayers(){const l={},d=[],y={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle((T=>{for(const I of T._order){const N=T._layers[I];if(N.type==="slot"){const $=i.cr(I);if(l[$])continue;l[$]=[]}N.slot&&l[N.slot]?l[N.slot].push(N):d.push(N)}})),this._mergedOrder=[];const S=(T=[])=>{for(const I of T)if(I.type==="slot"){const N=i.cr(I.id);l[N]&&S(l[N]),this._mergedSlots.push(N)}else{const N=i.C(I.id,I.scope);this._mergedOrder.push(N),y[N]=I,I.is3D(!!this.terrain)&&(this._has3DLayers=!0),I.type==="circle"&&(this._hasCircleLayers=!0),I.type==="symbol"&&(this._hasSymbolLayers=!0),I.type==="clip"&&(this._clipLayerPresent=!0)}};S(d),this._mergedOrder.sort(((T,I)=>{const N=y[T],$=y[I];return N.hasInitialOcclusionOpacityProperties?$.is3D(!!this.terrain)?1:0:N.is3D(!!this.terrain)&&$.hasInitialOcclusionOpacityProperties?-1:0})),this._mergedLayers=y,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(l){return this.stylesheet.camera=i.l({},this.stylesheet.camera,l),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(l){return l.data?(function(d,y,S){const T=i.l({},y);for(const N of Object.keys(i.a5.colorTheme))T[N]===void 0&&(T[N]=i.a5.colorTheme[N].default);const I=new i.a6(IO,d,new Map(S));return I.setTransitionOrValue(T,S),I.untransitioned().possiblyEvaluate(new i.aa(0))})(this.scope,l,this.options).get("data"):null}_loadColorTheme(l){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const d=this._styleColorTheme.lutLoadingCorrelationID;return new Promise(((y,S)=>{const T="data:image/png;base64,";if(!l||l.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void y();let I=l;I.startsWith(T)||(I=T+I);const N=i.I.from("mapbox-reserved-lut"),$=new Image;$.src=I,$.onerror=()=>{this._styleColorTheme.lutLoading=!1,S(new Error("Failed to load image data"))},$.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==d)return void y();this._styleColorTheme.lutLoading=!1;const{width:U,height:H,data:X}=i.q.getImageData($);if(H>32)return void S(new Error("The height of the image must be less than or equal to 32 pixels."));if(U!==H*H)return void S(new Error("The width of the image must be equal to the height squared."));this.getImage(N,this.scope)&&this.removeImage(N,this.scope),this.addImage(N,this.scope,{data:new i.r({width:U,height:H},X),pixelRatio:1,sdf:!1,usvg:!1,version:0});const q=this.imageManager.getImage(N,this.scope);q?(this._styleColorTheme.lut={image:q.data,data:l},y()):S(new Error("Missing LUT image."))}}))}getLut(l){const d=this._styleColorThemeForScope[l];return d?d.lut:null}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(l){this._spriteRequest=(function(d,y,S){let T,I,N;const $=i.q.devicePixelRatio>1?"@2x":"";let U=i.n(y.transformRequest(y.normalizeSpriteURL(d,$,".json"),i.R.SpriteJSON),((q,ne)=>{U=null,N||(N=q,T=ne,X())})),H=i.o(y.transformRequest(y.normalizeSpriteURL(d,$,".png"),i.R.SpriteImage),((q,ne)=>{H=null,N||(N=q,I=ne,X())}));function X(){if(N)S(N);else if(T&&I){const q=i.q.getImageData(I),ne={};for(const de in T){const{width:ae,height:he,x:me,y:Ie,sdf:Le,pixelRatio:De,stretchX:Ye,stretchY:Ne,content:Fe}=T[de],Be=new i.r({width:ae,height:he});i.r.copy(q,Be,{x:me,y:Ie},{x:0,y:0},{width:ae,height:he},null),ne[de]={data:Be,pixelRatio:De,sdf:Le,stretchX:Ye,stretchY:Ne,content:Fe,usvg:!1}}S(null,ne)}}return{cancel(){U&&(U.cancel(),U=null),H&&(H.cancel(),H=null)}}})(l,this.map._requestManager,((d,y)=>{if(this._spriteRequest=null,d)this.fire(new i.z(d));else if(y){const S=new Map;for(const T in y)S.set(i.I.from(T),y[T]);this.addImages(S,this.scope)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.A("data",{dataType:"style"}))}))}addIconset(l,d){if(d.type==="sprite")return void this._loadSprite(d.url);const y=this.getOwnSourceCache(d.source);if(!y)return void this.fire(new i.z(new Error(`Source "${d.source}" as specified by iconset "${l}" does not exist and cannot be used as an iconset source`)));const S=y.getSource();if(S.type!=="raster-array")return void this.fire(new i.z(new Error(`Source "${d.source}" as specified by iconset "${l}" is not a "raster-array" source and cannot be used as an iconset source`)));S.partial=!1;const T=new PO(l,this.scope,y);this.imageManager.addImageProvider(T,this.scope)}removeIconset(l){this.imageManager.removeImageProvider(l,this.scope)}_loadIconset(l){if(!i.f(l)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(l);const d=this.map._spriteFormat==="auto";var y,S;this._spriteRequest=(S=(T,I)=>{if(this._spriteRequest=null,T)d?this._loadSprite(l):this.fire(new i.z(T));else if(I){const N=new Map;for(const $ in I)N.set(i.I.from($),I[$]);this.addImages(N,this.scope)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.A("data",{dataType:"style"}))},i.bj((y=this.map._requestManager).transformRequest(y.normalizeIconsetURL(l),i.R.Iconset),((T,I)=>{if(T)return void S(T);const N={},$=i.ch(new i.bi(I));for(const U of $.icons){const H={version:1,pixelRatio:i.q.devicePixelRatio,content:AE(U),stretchX:U.metadata?By(U.metadata.stretch_x_areas):void 0,stretchY:U.metadata?By(U.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:U};N[U.name]=H}S(null,N)})))}_validateLayer(l){const d=this.getOwnSource(l.source);if(!d)return;const y=l.sourceLayer;y&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(y)===-1)&&this.fire(new i.z(new Error(`Source layer "${y}" does not exist on source "${d.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:l}of this.fragments)if(!l.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map(((l,d)=>{const y=this.fragments[d];return y&&y.style&&(l.data=y.style.serialize()),l}))}_serializeSources(){const l={};for(const d in this._sourceCaches){const y=this._sourceCaches[d].getSource();l[y.id]||(l[y.id]=y.serialize())}return l}_serializeLayers(l){const d=[];for(const y of l){const S=this._layers[y];S&&S.type!=="custom"&&d.push(S.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(l){return l?this.order:this._mergedOrder}isLayerDraped(l){return!!this.terrain&&l.isDraped(this.getLayerSourceCache(l))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(l){const d=this.getOwnLayer(l);if(d)return d;this.fire(new i.z(new Error(`The layer '${l}' does not exist in the map's style.`)))}_checkSource(l){const d=this.getOwnSource(l);if(d)return d;this.fire(new i.z(new Error(`The source '${l}' does not exist in the map's style.`)))}precompilePrograms(l,d){const y=this.map.painter;if(y)for(let S=l.minzoom||0;S<(l.maxzoom||25.5);S++){const T=l.getProgramIds();if(T)for(const I of T){const N=l.getDefaultProgramParams(I,d.zoom,this._styleColorTheme.lut);N&&(y.style=this,this.fog&&(y._fogVisible=!0,N.overrideFog=!0,y.getOrCreateProgram(I,N)),y._fogVisible=!1,N.overrideFog=!1,y.getOrCreateProgram(I,N),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(N.overrideRtt=!0,y.getOrCreateProgram(I,N)))}}}update(l){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(l),this.directionalLight&&this.directionalLight.recalculate(l);const d=this.calculateLightsBrightness();l.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d));const y=this._changes.isDirty();let S=!1;if(this._changes.isDirty()){const N=this._changes.getLayerUpdatesByScope();for(const $ in N){const{updatedIds:U,removedIds:H}=N[$];(U||H)&&(this._updateWorkerLayers($,U,H),S=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(l),this.light&&this.light.updateTransitions(l),this.ambientLight&&this.ambientLight.updateTransitions(l),this.directionalLight&&this.directionalLight.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this.snow&&this.snow.updateTransitions(l),this.rain&&this.rain.updateTransitions(l),this._changes.reset()}const T={};for(const N in this._mergedSourceCaches){const $=this._mergedSourceCaches[N];T[N]=$.used,$.used=!1,$.tileCoverLift=0}for(const N of this._mergedOrder){const $=this._mergedLayers[N];if($.recalculate(l,this._availableImages),!$.isHidden(l.zoom)){const U=this.getLayerSourceCache($);U&&(U.used=!0,U.tileCoverLift=Math.max(U.tileCoverLift,$.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback((()=>{this.precompilePrograms($,l)})):this.precompilePrograms($,l))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&S&&this.mergeLayers();const I=this.imageManager.getPendingImageProviders();for(const N of I)N.sourceCache.used=!0;for(const N in T){const $=this._mergedSourceCaches[N];T[N]!==$.used&&$.getSource().fire(new i.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:$.getSource().id}))}this.light&&this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.snow&&this.snow.recalculate(l),this.rain&&this.rain.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),y&&this.fire(new i.A("data",{dataType:"style"}))}updateImageProviders(){const l=this.imageManager.getPendingImageProviders();for(const d of l){const y=d.resolvePendingRequests();this.addImages(y,d.scope)}}_updateTilesForChangedImages(){const l={};for(const d in this._mergedSourceCaches){const y=this._mergedSourceCaches[d].getSource().scope;l[y]=l[y]||this._changes.getUpdatedImages(y),l[y].length!==0&&this._mergedSourceCaches[d].reloadTilesForDependencies(["icons","patterns"],l[y])}for(const d in l)this._changes.resetUpdatedImages(d)}_updateWorkerLayers(l,d,y){const S=this.getFragmentStyle(l);S&&this.dispatcher.broadcast("updateLayers",{layers:d?S._serializeLayers(d):[],scope:l,removedIds:y||[],options:S.options})}setState(l,d){if(this._checkLoaded(),dh(this,At(l)))return!1;(l=i.cq(l)).layers=cg(l.layers);const y=(function(I,N){if(!I)return[{command:Or.setStyle,args:[N]}];let $=[];try{if(!i.bn(I.version,N.version))return[{command:Or.setStyle,args:[N]}];if(i.bn(I.center,N.center)||$.push({command:Or.setCenter,args:[N.center]}),i.bn(I.zoom,N.zoom)||$.push({command:Or.setZoom,args:[N.zoom]}),i.bn(I.bearing,N.bearing)||$.push({command:Or.setBearing,args:[N.bearing]}),i.bn(I.pitch,N.pitch)||$.push({command:Or.setPitch,args:[N.pitch]}),i.bn(I.sprite,N.sprite)||$.push({command:Or.setSprite,args:[N.sprite]}),i.bn(I.glyphs,N.glyphs)||$.push({command:Or.setGlyphs,args:[N.glyphs]}),i.bn(I.imports,N.imports)||(function(ne=[],de=[],ae){de=de||[];const he=(ne=ne||[]).map(zr),me=de.map(zr),Ie=ne.reduce(jo,{}),Le=de.reduce(jo,{}),De=he.slice();let Ye,Ne,Fe,Be;for(Ye=0,Ne=0;Ye<he.length;Ye++)Fe=he[Ye],Le.hasOwnProperty(Fe)?Ne++:(ae.push({command:Or.removeImport,args:[Fe]}),De.splice(De.indexOf(Fe,Ne),1));for(Ye=0,Ne=0;Ye<me.length;Ye++)Fe=me[me.length-1-Ye],De[De.length-1-Ye]!==Fe&&(Ie.hasOwnProperty(Fe)?(ae.push({command:Or.removeImport,args:[Fe]}),De.splice(De.lastIndexOf(Fe,De.length-Ne),1)):Ne++,Be=De[De.length-Ye],ae.push({command:Or.addImport,args:[Le[Fe],Be]}),De.splice(De.length-Ye,0,Fe));for(const Qe of de){const tt=Ie[Qe.id];tt&&!i.bn(tt,Qe)&&ae.push({command:Or.updateImport,args:[Qe.id,Qe]})}})(I.imports,N.imports,$),i.bn(I.transition,N.transition)||$.push({command:Or.setTransition,args:[N.transition]}),i.bn(I.light,N.light)||$.push({command:Or.setLight,args:[N.light]}),i.bn(I.fog,N.fog)||$.push({command:Or.setFog,args:[N.fog]}),i.bn(I.snow,N.snow)||$.push({command:Or.setSnow,args:[N.snow]}),i.bn(I.rain,N.rain)||$.push({command:Or.setRain,args:[N.rain]}),i.bn(I.projection,N.projection)||$.push({command:Or.setProjection,args:[N.projection]}),i.bn(I.lights,N.lights)||$.push({command:Or.setLights,args:[N.lights]}),i.bn(I.camera,N.camera)||$.push({command:Or.setCamera,args:[N.camera]}),i.bn(I.iconsets,N.iconsets)||(function(ne,de,ae){let he;for(he in de=de||{},ne=ne||{})ne.hasOwnProperty(he)&&(de.hasOwnProperty(he)||ae.push({command:Or.removeIconset,args:[he]}));for(he in de){if(!de.hasOwnProperty(he))continue;const me=de[he];ne.hasOwnProperty(he)?i.bn(ne[he],me)||(ae.push({command:Or.removeIconset,args:[he]}),ae.push({command:Or.addIconset,args:[he,me]})):ae.push({command:Or.addIconset,args:[he,me]})}})(I.iconsets,N.iconsets,$),!i.bn(I["color-theme"],N["color-theme"]))return[{command:Or.setStyle,args:[N]}];const U={},H=[];(function(ne,de,ae,he){let me;for(me in de=de||{},ne=ne||{})ne.hasOwnProperty(me)&&(de.hasOwnProperty(me)||Dy(me,ae,he));for(me in de){if(!de.hasOwnProperty(me))continue;const Ie=de[me];ne.hasOwnProperty(me)?i.bn(ne[me],Ie)||(ne[me].type==="geojson"&&Ie.type==="geojson"&&Ln(ne,de,me)?ae.push({command:Or.setGeoJSONSourceData,args:[me,Ie.data]}):zf(me,de,ae,he)):Rl(me,de,ae)}})(I.sources,N.sources,H,U);const X=[];I.layers&&I.layers.forEach((ne=>{ne.source&&U[ne.source]?$.push({command:Or.removeLayer,args:[ne.id]}):X.push(ne)}));let q=I.terrain;q&&U[q.source]&&($.push({command:Or.setTerrain,args:[void 0]}),q=void 0),$=$.concat(H),i.bn(q,N.terrain)||$.push({command:Or.setTerrain,args:[N.terrain]}),(function(ne,de,ae){de=de||[];const he=(ne=ne||[]).map(zr),me=de.map(zr),Ie=ne.reduce(jo,{}),Le=de.reduce(jo,{}),De=he.slice(),Ye=Object.create(null);let Ne,Fe,Be,Qe,tt,Ot,bt;for(Ne=0,Fe=0;Ne<he.length;Ne++)Be=he[Ne],Le.hasOwnProperty(Be)?Fe++:(ae.push({command:Or.removeLayer,args:[Be]}),De.splice(De.indexOf(Be,Fe),1));for(Ne=0,Fe=0;Ne<me.length;Ne++)Be=me[me.length-1-Ne],De[De.length-1-Ne]!==Be&&(Ie.hasOwnProperty(Be)?(ae.push({command:Or.removeLayer,args:[Be]}),De.splice(De.lastIndexOf(Be,De.length-Fe),1)):Fe++,Ot=De[De.length-Ne],ae.push({command:Or.addLayer,args:[Le[Be],Ot]}),De.splice(De.length-Ne,0,Be),Ye[Be]=!0);for(Ne=0;Ne<me.length;Ne++)if(Be=me[Ne],Qe=Ie[Be],tt=Le[Be],!Ye[Be]&&!i.bn(Qe,tt))if(i.bn(Qe.source,tt.source)&&i.bn(Qe["source-layer"],tt["source-layer"])&&i.bn(Qe.type,tt.type)){for(bt in ti(Qe.layout,tt.layout,ae,Be,null,Or.setLayoutProperty),ti(Qe.paint,tt.paint,ae,Be,null,Or.setPaintProperty),i.bn(Qe.slot,tt.slot)||ae.push({command:Or.setSlot,args:[Be,tt.slot]}),i.bn(Qe.filter,tt.filter)||ae.push({command:Or.setFilter,args:[Be,tt.filter]}),i.bn(Qe.minzoom,tt.minzoom)&&i.bn(Qe.maxzoom,tt.maxzoom)||ae.push({command:Or.setLayerZoomRange,args:[Be,tt.minzoom,tt.maxzoom]}),Qe)Qe.hasOwnProperty(bt)&&bt!=="layout"&&bt!=="paint"&&bt!=="filter"&&bt!=="metadata"&&bt!=="minzoom"&&bt!=="maxzoom"&&bt!=="slot"&&(bt.indexOf("paint.")===0?ti(Qe[bt],tt[bt],ae,Be,bt.slice(6),Or.setPaintProperty):i.bn(Qe[bt],tt[bt])||ae.push({command:Or.setLayerProperty,args:[Be,bt,tt[bt]]}));for(bt in tt)tt.hasOwnProperty(bt)&&!Qe.hasOwnProperty(bt)&&bt!=="layout"&&bt!=="paint"&&bt!=="filter"&&bt!=="metadata"&&bt!=="minzoom"&&bt!=="maxzoom"&&bt!=="slot"&&(bt.indexOf("paint.")===0?ti(Qe[bt],tt[bt],ae,Be,bt.slice(6),Or.setPaintProperty):i.bn(Qe[bt],tt[bt])||ae.push({command:Or.setLayerProperty,args:[Be,bt,tt[bt]]}))}else ae.push({command:Or.removeLayer,args:[Be]}),Ot=De[De.lastIndexOf(Be)+1],ae.push({command:Or.addLayer,args:[tt,Ot]})})(X,N.layers,$)}catch(U){console.warn("Unable to compute style diff:",U),$=[{command:Or.setStyle,args:[N]}]}return $})(this.serialize(),l).filter((I=>!(I.command in DO)));if(y.length===0)return!1;const S=y.filter((I=>!(I.command in OO)));if(S.length>0)throw new Error(`Unimplemented: ${S.map((I=>I.command)).join(", ")}.`);const T=[];return y.forEach((I=>{T.push(this[I.command].apply(this,I.args))})),d&&Promise.all(T).then(d),this.stylesheet=l,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(l){const d=this.getFragmentStyle(l);d&&(d._availableImages=d.imageManager.listImages(l),d.dispatcher.broadcast("setImages",{scope:l,images:d._availableImages}))}addImages(l,d){for(const[y,S]of l.entries()){if(this.getImage(y,d))return this.fire(new i.z(new Error(`An image with the name "${y.name}" already exists.`)));this.imageManager.addImage(y,d,S),this._changes.updateImage(y,d)}return this._updateWorkerImages(d),this.fire(new i.A("data",{dataType:"style"})),this}addImage(l,d,y){return this.getImage(l,d)?this.fire(new i.z(new Error(`An image with the name "${l.name}" already exists.`))):(this.imageManager.addImage(l,d,y),this._changes.updateImage(l,d),this._updateWorkerImages(d),this.fire(new i.A("data",{dataType:"style"})),this)}updateImage(l,d,y,S=!1){this.imageManager.updateImage(l,d,y),S&&(this._changes.updateImage(l,d),this._updateWorkerImages(d),this.fire(new i.A("data",{dataType:"style"})))}getImage(l,d){return this.imageManager.getImage(l,d)}removeImage(l,d){return this.getImage(l,d)?(this.imageManager.removeImage(l,d),this._changes.updateImage(l,d),this._updateWorkerImages(d),this.fire(new i.A("data",{dataType:"style"})),this):this.fire(new i.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(l,d,y={}){return this._checkLoaded(),this._validate(Ue,`models.${l}`,d,null,y)||(this.modelManager.addModel(l,d,this.scope),this._changes.setDirty()),this}hasModel(l){return this.modelManager.hasModel(l,this.scope)}removeModel(l){return this.hasModel(l)?(this.modelManager.removeModel(l,this.scope),this):this.fire(new i.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(l,d,y={}){if(this._checkLoaded(),this.getOwnSource(l)!==void 0)throw new Error(`There is already a source with ID "${l}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(Vt,`sources.${l}`,d,null,y))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const S=Py(l,d,this.dispatcher,this);S.scope=this.scope,S.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(S.id),source:S.serialize(),sourceId:S.id})));const T=I=>{const N=(I?"symbol:":"other:")+S.id,$=i.C(N,this.scope),U=this._sourceCaches[N]=new Dl($,S,I);(I?this._symbolSourceCaches:this._otherSourceCaches)[S.id]=U,U.onAdd(this.map)};T(!1),d.type!=="vector"&&d.type!=="geojson"||T(!0),S.onAdd&&S.onAdd(this.map),y.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(l){this._checkLoaded();const d=this.getOwnSource(l);if(!d)throw new Error("There is no source with this ID");for(const S in this._layers)if(this._layers[S].source===l)return this.fire(new i.z(new Error(`Source "${l}" cannot be removed while layer "${S}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===l)return this.fire(new i.z(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));if(this.stylesheet.iconsets){const S=Object.entries(this.stylesheet.iconsets).find((([T,I])=>I.type==="source"&&I.source===l));if(S)return this.fire(new i.z(new Error(`Source "${l}" cannot be removed while iconset "${S[0]}" is using it.`)))}const y=this.getOwnSourceCaches(l);for(const S of y){const T=i.cr(S.id);delete this._sourceCaches[T],this._changes.discardSourceCacheUpdate(S.id),S.fire(new i.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:S.getSource().id})),S.setEventedParent(null),S.clearTiles()}return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(l,d){this._checkLoaded(),this.getOwnSource(l).setData(d),this._changes.setDirty()}getOwnSource(l){const d=this.getOwnSourceCache(l);return d&&d.getSource()}getOwnSources(){const l=[];for(const d in this._otherSourceCaches){const y=this.getOwnSourceCache(d);y&&l.push(y.getSource())}return l}areTilesLoaded(){const l=this._mergedSourceCaches;for(const d in l){const y=l[d]._tiles;for(const S in y){const T=y[S];if(T.state!=="loaded"&&T.state!=="errored")return!1}}return!0}setLights(l){if(this._checkLoaded(),!l)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const S of l){if(this._validate(xn,"lights",S))return;switch(S.type){case"ambient":if(this.ambientLight){const T=this.ambientLight;T.set(S),T.updateTransitions(d)}else this.ambientLight=new us(S,Sr||(Sr=new i.a7({color:new i.a8(i.a5.properties_light_ambient.color),"color-use-theme":new i.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new i.a8(i.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const T=this.directionalLight;T.set(S),T.updateTransitions(d)}else this.directionalLight=new us(S,ni||(ni=new i.a7({direction:new i.am(i.a5.properties_light_directional.direction),color:new i.a8(i.a5.properties_light_directional.color),"color-use-theme":new i.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new i.a8(i.a5.properties_light_directional.intensity),"cast-shadows":new i.a8(i.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new i.a8(i.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new i.a8(i.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const y=new i.aa(this.z||0,d);this.ambientLight&&this.ambientLight.recalculate(y),this.directionalLight&&this.directionalLight.recalculate(y),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const l=this.directionalLight,d=this.ambientLight;if(!l||!d)return;const y=q=>.2126*(q[0]<=.03928?q[0]/12.92:Math.pow((q[0]+.055)/1.055,2.4))+.7152*(q[1]<=.03928?q[1]/12.92:Math.pow((q[1]+.055)/1.055,2.4))+.0722*(q[2]<=.03928?q[2]/12.92:Math.pow((q[2]+.055)/1.055,2.4)),S=l.properties.get("color").toRenderColor(null).toArray01(),T=l.properties.get("intensity"),I=l.properties.get("direction"),N=1-i.cc(I.x,I.y,I.z)[2]/90,$=y(S)*T*N,U=d.properties.get("color").toRenderColor(null).toArray01(),H=d.properties.get("intensity"),X=y(U)*H;return Number((($+X)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const l=[];return this.directionalLight&&l.push(this.directionalLight.get()),this.ambientLight&&l.push(this.ambientLight.get()),l}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(l){if(!l)return this;if(i.cs(l)){const d=i.ct(l),y=this.fragments.find((({id:T})=>T===d));if(!y)throw new Error(`Style import '${l}' not found`);const S=i.cr(l);return y.style.getFragmentStyle(S)}{const d=this.fragments.find((({id:y})=>y===l));return d?d.style:void 0}}setFeaturesetSelectors(l){if(!l)return;const d={},y=(S,T="")=>`${S}::${T}`;this._featuresetSelectors={};for(const S in l){const T=this._featuresetSelectors[S]=[];for(const I of l[S].selectors){if(I.featureNamespace){const $=this.getOwnLayer(I.layer);if(!$){i.w(`Layer is undefined for selector: ${I.layer}`);continue}const U=y($.source,$.sourceLayer);if(U in d&&d[U]!==I.featureNamespace){i.w(`"featureNamespace ${I.featureNamespace} of featureset ${S}'s selector is not associated to the same source, skip this selector`);continue}d[U]=I.featureNamespace}let N;if(I.properties)for(const $ in I.properties){const U=i.X(I.properties[$]);U.result==="success"&&(N=N||{},N[$]=U.value)}T.push({layerId:I.layer,namespace:I.featureNamespace,properties:N,uniqueFeatureID:I._uniqueFeatureID})}}}getFeaturesetDescriptors(l){const d=this.getFragmentStyle(l);if(!d||!d.stylesheet.featuresets)return[];const y=[];for(const S in d.stylesheet.featuresets)y.push({featuresetId:S,importId:d.scope?d.scope:void 0});return y}getFeaturesetLayers(l,d){const y=this.getFragmentStyle(d),S=y.stylesheet.featuresets;if(!S||!S[l])return this.fire(new i.z(new Error(`The featureset '${l}' does not exist in the map's style and cannot be queried.`))),[];const T=[];for(const I of S[l].selectors){const N=y.getOwnLayer(I.layer);N&&T.push(N)}return T}getConfigProperty(l,d){const y=this.getFragmentStyle(l);if(!y)return null;const S=i.C(d,y.scope),T=y.options.get(S),I=T?T.value||T.default:null;return I?I.serialize():null}setConfigProperty(l,d,y){const S=this.getFragmentStyle(l);if(!S)return;const T=S.stylesheet.indoor?TE(S.stylesheet.schema):S.stylesheet.schema;if(!T||!T[d])return;const I=i.X(y);if(I.result!=="success")return void dh(this,I.value);const N=I.value.expression,$=i.C(d,S.scope),U=S.options.get($);if(!U)return;let H;const{minValue:X,maxValue:q,stepValue:ne,type:de,values:ae}=T[d],he=i.X(T[d].default);he.result==="success"&&(H=he.value.expression),H?(this.options.set($,Object.assign({},U,{value:N,default:H,minValue:X,maxValue:q,stepValue:ne,type:de,values:ae})),this.updateConfigDependencies(d)):this.fire(new i.z(new Error(`No schema defined for the config option "${d}" in the "${l}" fragment.`)))}getConfig(l){const d=this.getFragmentStyle(l);if(!d)return null;const y=d.stylesheet.schema;if(!y)return null;const S={};for(const T in y){const I=i.C(T,d.scope),N=d.options.get(I),$=N?N.value||N.default:null;S[T]=$?$.serialize():null}return S}setConfig(l,d){const y=this.getFragmentStyle(l);y&&(y.updateConfig(d,y.stylesheet.schema),this.updateConfigDependencies())}getSchema(l){const d=this.getFragmentStyle(l);return d?d.stylesheet.schema:null}setSchema(l,d){const y=this.getFragmentStyle(l);y&&(y.stylesheet.schema=d,y.updateConfig(y._config,d),this.updateConfigDependencies())}updateConfig(l,d){if(this._config=l,l||d)if(d)for(const y in d){let S,T;const I=i.X(d[y].default);if(I.result==="success"&&(S=I.value.expression),l&&l[y]!==void 0){const q=i.X(l[y]);q.result==="success"&&(T=q.value.expression)}const{minValue:N,maxValue:$,stepValue:U,type:H,values:X}=d[y];if(S){const q=i.C(y,this.scope);this.options.set(q,{default:S,value:T,minValue:N,maxValue:$,stepValue:U,type:H,values:X})}else this.fire(new i.z(new Error(`No schema defined for config option "${y}".`)))}else this.fire(new i.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(l){for(const d of this._configDependentLayers){const y=this.getLayer(d);if(y){if(l&&!y.configDependencies.has(l))continue;y.possiblyEvaluateVisibility(),this._updateLayer(y)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle((d=>{const y=d._styleColorTheme.colorThemeOverride?d._styleColorTheme.colorThemeOverride:d._styleColorTheme.colorTheme;if(y){const S=d._evaluateColorThemeData(y);(!d._styleColorTheme.lut&&S!==""||d._styleColorTheme.lut&&S!==d._styleColorTheme.lut.data)&&d.setColorTheme(y)}})),this._changes.setDirty()}addLayer(l,d,y={}){this._checkLoaded();const S=l.id;if(this._layers[S])return void this.fire(new i.z(new Error(`Layer with id "${S}" already exists on this map`)));let T;if(l.type==="custom"){if(dh(this,i.cu(l)))return;T=i.cv(l,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof l.source=="object"&&(this.addSource(S,l.source),l=i.cq(l),l=i.l(l,{source:S})),this._validate(ue,`layers.${S}`,l,{arrayIndex:-1},y))return;T=i.cv(l,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(T),T.setEventedParent(this,{layer:{id:S}})}T.configDependencies.size!==0&&this._configDependentLayers.add(T.fqid);let I=this._order.length;if(d){const H=this._order.indexOf(d);if(H===-1)return void this.fire(new i.z(new Error(`Layer with id "${d}" does not exist on this map.`)));T.slot===this._layers[d].slot?I=H:i.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(I,0,S),this._layerOrderChanged=!0,this._layers[S]=T;const N=this.getOwnLayerSourceCache(T),$=!!this.directionalLight&&this.directionalLight.shadowsEnabled();N&&T.canCastShadows()&&$&&(N.castsShadows=!0);const U=this._changes.getRemovedLayer(T);if(U&&T.source&&N&&T.type!=="custom"){this._changes.discardLayerRemoval(T);const H=i.C(T.source,T.scope);U.type!==T.type?this._changes.updateSourceCache(H,"clear"):(this._changes.updateSourceCache(H,"reload"),N.pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map),T.scope=this.scope,this.mergeLayers()}moveLayer(l,d){this._checkLoaded();const y=this._checkLayer(l);if(!y||l===d)return;const S=this._order.indexOf(l);this._order.splice(S,1);let T=this._order.length;if(d){const I=this._order.indexOf(d);if(I===-1)return void this.fire(new i.z(new Error(`Layer with id "${d}" does not exist on this map.`)));y.slot===this._layers[d].slot?T=I:i.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(T,0,l),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(l){this._checkLoaded();const d=this._checkLayer(l);if(!d)return;d.setEventedParent(null);const y=this._order.indexOf(l);this._order.splice(y,1),delete this._layers[l],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const S=this.getOwnLayerSourceCache(d);if(S&&S.castsShadows){let T=!1;for(const I in this._layers)if(this._layers[I].source===d.source&&this._layers[I].canCastShadows()){T=!0;break}S.castsShadows=T}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(l){return this._layers[l]}hasLayer(l){return l in this._mergedLayers}hasLayerType(l){for(const d in this._layers)if(this._layers[d].type===l)return!0;return!1}setLayerZoomRange(l,d,y){this._checkLoaded();const S=this._checkLayer(l);S&&(S.minzoom===d&&S.maxzoom===y||(d!=null&&(S.minzoom=d),y!=null&&(S.maxzoom=y),this._updateLayer(S)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(l,d){this._checkLoaded();const y=this._checkLayer(l);y&&y.slot!==d&&(y.slot=d,this._updateLayer(y))}setFilter(l,d,y={}){this._checkLoaded();const S=this._checkLayer(l);if(S&&!i.bn(S.filter,d))return d==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(we,`layers.${S.id}.filter`,d,{layerType:S.type},y)||(S.filter=i.cq(d),this._updateLayer(S)))}getFilter(l){const d=this._checkLayer(l);if(d)return i.cq(d.filter)}setLayoutProperty(l,d,y,S={}){this._checkLoaded();const T=this._checkLayer(l);if(T&&!i.bn(T.getLayoutProperty(d),y)){if(y!=null&&(!S||S.validate!==!1)&&dh(T,Xe.call(At,{key:`layers.${l}.layout.${d}`,layerType:T.type,objectKey:d,value:y,styleSpec:i.a5,style:{glyphs:!0,sprite:!0}})))return;T.setLayoutProperty(d,y),T.configDependencies.size!==0&&this._configDependentLayers.add(T.fqid),this._updateLayer(T)}}getLayoutProperty(l,d){const y=this._checkLayer(l);if(y)return y.getLayoutProperty(d)}setPaintProperty(l,d,y,S={}){this._checkLoaded();const T=this._checkLayer(l);if(!T||i.bn(T.getPaintProperty(d),y)||y!=null&&(!S||S.validate!==!1)&&dh(T,Re.call(At,{key:`layers.${l}.paint.${d}`,layerType:T.type,objectKey:d,value:y,styleSpec:i.a5})))return;const I=T.setPaintProperty(d,y);T.configDependencies.size!==0&&this._configDependentLayers.add(T.fqid),I&&this._updateLayer(T),this._changes.updatePaintProperties(T)}getPaintProperty(l,d){const y=this._checkLayer(l);if(y)return y.getPaintProperty(d)}setFeatureState(l,d){if(this._checkLoaded(),"target"in l){if("featuresetId"in l.target){const{featuresetId:$,importId:U}=l.target,H=this.getFragmentStyle(U),X=H.getFeaturesetLayers($);for(const{source:q,sourceLayer:ne}of X)H.setFeatureState({id:l.id,source:q,sourceLayer:ne},d)}else if("layerId"in l.target){const{layerId:$}=l.target,U=this.getLayer($);this.setFeatureState({id:l.id,source:U.source,sourceLayer:U.sourceLayer},d)}return}const y=l.source,S=l.sourceLayer,T=this._checkSource(y);if(!T)return;const I=T.type;if(I==="geojson"&&S)return void this.fire(new i.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(I==="vector"&&!S)return void this.fire(new i.z(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new i.z(new Error("The feature id parameter must be provided.")));const N=this.getOwnSourceCaches(y);for(const $ of N)$.setFeatureState(S,l.id,d)}removeFeatureState(l,d){if(this._checkLoaded(),"target"in l){if("featuresetId"in l.target){const{featuresetId:$,importId:U}=l.target,H=this.getFragmentStyle(U),X=H.getFeaturesetLayers($);for(const{source:q,sourceLayer:ne}of X)H.removeFeatureState({id:l.id,source:q,sourceLayer:ne},d)}else if("layerId"in l.target){const{layerId:$}=l.target,U=this.getLayer($);this.removeFeatureState({id:l.id,source:U.source,sourceLayer:U.sourceLayer},d)}return}const y=l.source,S=this._checkSource(y);if(!S)return;const T=S.type,I=T==="vector"?l.sourceLayer:void 0;if(T==="vector"&&!I)return void this.fire(new i.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new i.z(new Error("A feature id is required to remove its specific state property.")));const N=this.getOwnSourceCaches(y);for(const $ of N)$.removeFeatureState(I,l.id,d)}getFeatureState(l){if(this._checkLoaded(),"target"in l){let T;if("featuresetId"in l.target){const{featuresetId:I,importId:N}=l.target,$=this.getFragmentStyle(N),U=$.getFeaturesetLayers(I);for(const{source:H,sourceLayer:X}of U){const q=$.getFeatureState({id:l.id,source:H,sourceLayer:X});if(q&&!T)T=q;else if(!i.bn(T,q))return void this.fire(new i.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in l.target){const{layerId:I}=l.target,N=this.getLayer(I);T=this.getFeatureState({id:l.id,source:N.source,sourceLayer:N.sourceLayer})}return T}const d=l.source,y=l.sourceLayer,S=this._checkSource(d);if(S){if(S.type!=="vector"||y)return l.id===void 0&&this.fire(new i.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(y,l.id);this.fire(new i.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(l){return this.stylesheet.transition=i.l({},this.stylesheet.transition,l),this.transition=this.stylesheet.transition,this}getTransition(){return i.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const l=this.getTerrain(),d=l&&this.terrain&&this.terrain.scope===this.scope?l:this.stylesheet.terrain;return i.cw({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},(y=>y!==void 0))}_updateFilteredLayers(l){for(const d of Object.values(this._mergedLayers))l(d)&&this._updateLayer(d)}_updateLayer(l){this._changes.updateLayer(l);const d=this.getLayerSourceCache(l),y=i.C(l.source,l.scope),S=this._changes.getUpdatedSourceCaches();l.source&&!S[y]&&d&&d.getSource().type!=="raster"&&(this._changes.updateSourceCache(y,"reload"),d.pause()),l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const d=N=>this._mergedLayers[N].is3D(!!this.terrain),y=this.order,S={},T=[];for(let N=y.length-1;N>=0;N--){const $=y[N];if(d($)){S[$]=N;for(const U of l){const H=U[$];if(H)for(const X of H)T.push(X)}}}T.sort(((N,$)=>$.intersectionZ-N.intersectionZ));const I=[];for(let N=y.length-1;N>=0;N--){const $=y[N];if(d($))for(let U=T.length-1;U>=0;U--){const H=T[U].feature;if(H.layer&&S[H.layer.id]<N)break;I.push(H),T.pop()}else for(const U of l){const H=U[$];if(H)for(const X of H)I.push(X.feature)}}return I}queryRenderedFeatures(l,d,y){let S;d&&!Array.isArray(d)&&d.filter&&(this._validate(we,"queryRenderedFeatures.filter",d.filter,null,d),S=i.a_(d.filter));const T={},I=H=>{if($y.has(H.type))return;const X=this.getOwnLayerSourceCache(H),q=T[X.id]=T[X.id]||{sourceCache:X,layers:{},has3DLayers:!1};H.is3D(!!this.terrain)&&(q.has3DLayers=!0),q.layers[H.fqid]=q.layers[H.fqid]||{styleLayer:H,targets:[]},q.layers[H.fqid].targets.push({filter:S})};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new i.z(new Error("parameters.layers must be an Array."))),[];for(const H of d.layers){const X=this._layers[H];if(!X)return this.fire(new i.z(new Error(`The layer '${H}' does not exist in the map's style and cannot be queried for features.`))),[];I(X)}}else for(const H in this._layers)I(this._layers[H]);const N=this._queryRenderedFeatures(l,T,y),$=this._flattenAndSortRenderedFeatures(N),U=[];for(const H of $)i.ct(H.layer.id)===this.scope&&U.push(H);return U}queryRenderedFeatureset(l,d,y){let S;d&&!Array.isArray(d)&&d.filter&&(this._validate(we,"queryRenderedFeatures.filter",d.filter,null,d),S=i.a_(d.filter));const T="mock",I=[];if(d&&d.target)I.push(Object.assign({},d,{targetId:T,filter:S}));else{const H=this.getFeaturesetDescriptors();for(const X of H)I.push({targetId:T,filter:S,target:X});for(const{style:X}of this.fragments){const q=X.getFeaturesetDescriptors();for(const ne of q)I.push({targetId:T,filter:S,target:ne})}}const N=this.queryRenderedTargets(l,I,y),$=[],U=new Set;for(const H of N)for(const X of H.variants[T])Lf(X,H,U)||$.push(new i.cx(H,X));return $}queryRenderedTargets(l,d,y){const S={},T=(N,$,U,H)=>{const X=S[$.id]=S[$.id]||{sourceCache:$,layers:{},has3DLayers:!1};if(X.layers[N.fqid]=X.layers[N.fqid]||{styleLayer:N,targets:[]},N.is3D(!!this.terrain)&&(X.has3DLayers=!0),!H)return U.uniqueFeatureID=!1,void X.layers[N.fqid].targets.push(U);X.layers[N.fqid].targets.push(Object.assign({},U,{namespace:H.namespace,properties:H.properties,uniqueFeatureID:H.uniqueFeatureID}))};for(const N of d)if("featuresetId"in N.target){const{featuresetId:$,importId:U}=N.target,H=this.getFragmentStyle(U);if(!H||!H._featuresetSelectors)continue;const X=H._featuresetSelectors[$];if(!X){this.fire(new i.z(new Error(`The featureset '${$}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const q of X){const ne=H.getOwnLayer(q.layerId);ne&&!$y.has(ne.type)&&T(ne,H.getOwnLayerSourceCache(ne),N,q)}}else if("layerId"in N.target){const{layerId:$}=N.target,U=this.getLayer($);if(!U||$y.has(U.type))continue;T(U,this.getLayerSourceCache(U),N)}const I=this._queryRenderedFeatures(l,S,y);return this._flattenAndSortRenderedFeatures(I)}_queryRenderedFeatures(l,d,y){const S=[],T=!!this.map._showQueryGeometry,I=ro.createFromScreenPoints(l,y);for(const N in d){const $=tb(I,d[N],this._availableImages,y,T);Object.keys($).length&&S.push($)}if(this.placement)for(const N in d){if(!d[N].sourceCache._onlySymbols)continue;const $=_E(I.screenGeometry,d[N],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys($).length&&S.push($)}return S}querySourceFeatures(l,d){const y=d&&d.filter;y&&this._validate(we,"querySourceFeatures.filter",y,null,d);let S=[];const T=this.getOwnSourceCaches(l);for(const I of T)S=S.concat(yE(I,d));return S}addSourceType(l,d,y){return lc.getSourceType(l)?y(new Error(`A source type called "${l}" already exists.`)):(lc.setSourceType(l,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:d.workerSourceURL},y):y(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(l,d,y={}){this._checkLoaded();const S=this.light.getLight();let T=!1;for(const N in l)if(!i.bn(l[N],S[N])){T=!0;break}if(!T)return;const I=this._getTransitionParameters();this.light.setLight(l,d,y),this.light.updateTransitions(I)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=i.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&i.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(l,d=1){if(this._checkLoaded(),!l)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),d===0&&delete this.terrain,l===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let y=l;const S=l.source==null;if(d===1){if(this.disableElevatedTerrain)return;if(typeof y.source=="object"){const N="terrain-dem-src";this.addSource(N,y.source),y=i.cq(y),y=i.l(y,{source:N})}const T=i.l({},y),I={};if(this.terrain&&S){T.source=this.terrain.get().source;const N=this.terrain?this.getFragmentStyle(this.terrain.scope):null;N&&(I.style=N.serialize())}if(this._validate(Hn,"terrain",T,I))return}if(!this.terrain||this.terrain.scope!==this.scope&&!S||this.terrain&&d!==this.terrain.drapeRenderMode){if(!y)return;this._createTerrain(y,d),this.fire(new i.A("data",{dataType:"style"}))}else{const T=this.terrain,I=T.get();for(const N of Object.keys(i.a5.terrain))!y.hasOwnProperty(N)&&i.a5.terrain[N].default&&(y[N]=i.a5.terrain[N].default);for(const N in l)if(!i.bn(l[N],I[N])){T.set(l,this.options),this.stylesheet.terrain=l;const $=this._getTransitionParameters({duration:0});T.updateTransitions($),this.fire(new i.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const d=this.fog=new gr(l,this.map.transform,this.scope,this.options);this.stylesheet.fog=d.get();const y=this._getTransitionParameters({duration:0});d.updateTransitions(y)}_createSnow(l){const d=this.snow=new ri(l,this.map.transform,this.scope,this.options);this.stylesheet.snow=d.get();const y=this._getTransitionParameters({duration:0});d.updateTransitions(y)}_createRain(l){const d=this.rain=new li(l,this.map.transform,this.scope,this.options);this.stylesheet.rain=d.get();const y=this._getTransitionParameters({duration:0});d.updateTransitions(y)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask((()=>{for(const l of this.map._markers)l._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!i.bn(d.get(),l)){d.set(l,this.options),this.stylesheet.fog=d.get();const y=this._getTransitionParameters({duration:0});d.updateTransitions(y)}}else this._createFog(l);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(l){if(this._checkLoaded(),!l)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const d=this.snow;if(!i.bn(d.get(),l)){d.set(l,this.options),this.stylesheet.snow=d.get();const y=this._getTransitionParameters({duration:0});d.updateTransitions(y)}}else this._createSnow(l);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(l){if(this._checkLoaded(),!l)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const d=this.rain;if(!i.bn(d.get(),l)){d.set(l,this.options),this.stylesheet.rain=d.get();const y=this._getTransitionParameters({duration:0});d.updateTransitions(y)}}else this._createRain(l);this._markersNeedUpdate=!0}_reloadColorTheme(){const l=()=>{for(const S in this._layers)this._layers[S].lut=this._styleColorTheme.lut;for(const S in this._sourceCaches)this._sourceCaches[S].clearTiles()},d=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!d)return this._styleColorTheme.lut=null,void l();const y=this._evaluateColorThemeData(d);this._loadColorTheme(y).then((()=>{this.fire(new i.A("colorthemeset")),l()})).catch((S=>{i.w(`Couldn't set color theme: ${S}`)}))}setColorTheme(l){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&i.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=l,this._reloadColorTheme()}setImportColorTheme(l,d){const y=this.getFragmentStyle(l);y&&(y._styleColorTheme.colorThemeOverride=d,y._reloadColorTheme())}_getTransitionParameters(l){return{now:i.q.now(),transition:i.l(this.transition,l)}}updateDrapeFirstLayers(){if(!this.terrain)return;const l=[],d=[];for(const y of this._mergedOrder)this.isLayerDraped(this._mergedLayers[y])?l.push(y):d.push(y);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...d)}_createTerrain(l,d){const y=this.terrain=new zt(l,d,this.scope,this.options);d===1&&(this.stylesheet.terrain=l),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const S=this._getTransitionParameters({duration:0});y.updateTransitions(S)}_force3DLayerUpdate(){for(const l in this._layers){const d=this._layers[l];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const d=this._layers[l];d.type==="symbol"&&this._updateLayer(d)}}_validate(l,d,y,S,T={}){if(T&&T.validate===!1)return!1;const I=i.l({},this.serialize());return dh(this,l.call(At,i.l({key:d,style:I,value:y,styleSpec:i.a5},S)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.cy.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._mergedLayers)this._mergedLayers[l].setEventedParent(null);for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles(),this._mergedSourceCaches[l].setEventedParent(null);this.imageManager.removeScope(this.scope),this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(l){const d=this.getSourceCaches(l);for(const y of d)y.clearTiles()}clearSources(){for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles()}reloadSource(l){const d=this.getSourceCaches(l);for(const y of d)y.resume(),y.reload()}reloadSources(){for(const l of this.getSources())l.reload&&l.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle((l=>{l.modelManager.reloadModels(l.scope)}))}updateSources(l){let d;this.directionalLight&&(d=pd(this.directionalLight));for(const y in this._mergedSourceCaches)this._mergedSourceCaches[y].update(l,void 0,void 0,d)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const d=this._sourceCaches[l];d.resume(),d.reload()}}_updatePlacement(l,d,y,S,T,I,N=!1){let $=!1,U=!1;const H={},X={};for(const q of this._mergedOrder){const ne=this._mergedLayers[q];if(ne.type!=="symbol")continue;const de=i.C(ne.source,ne.scope);let ae=H[de];if(!ae){const me=this.getLayerSourceCache(ne);if(!me)continue;const Ie=me.getRenderableIds(!0).map((Le=>me.getTileByID(Le)));X[de]=Ie.slice(),ae=H[de]=Ie.sort(((Le,De)=>De.tileID.overscaledZ-Le.tileID.overscaledZ||(Le.tileID.isLessThan(De.tileID)?-1:1)))}const he=this.crossTileSymbolIndex.addLayer(ne,ae,d.center.lng,d.projection);$=$||he}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),N=N||this._layerOrderChanged||S===0,this._layerOrderChanged&&this.fire(new i.A("neworder")),(N||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.q.now(),d.zoom))&&(this.pauseablePlacement=new hd(d,this._mergedOrder,N,y,S,T,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,H,X,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.q.now()),U=!0),$&&this.pauseablePlacement.placement.setStale()),U||$){this._buildingIndex.onNewFrame(d.zoom);for(let q=0;q<this._mergedOrder.length;q++){const ne=this._mergedLayers[this._mergedOrder[q]];if(ne.type!=="symbol")continue;const de=this.isLayerClipped(ne);this.placement.updateLayerOpacities(ne,H[i.C(ne.source,ne.scope)],q,de?I:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.q.now())}}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}addImport(l,d){this._checkLoaded();const y=this.stylesheet.imports=this.stylesheet.imports||[];if(y.findIndex((({id:T})=>T===l.id))!==-1)return void this.fire(new i.z(new Error(`Import with id '${l.id}' already exists in the map's style.`)));if(!d)return y.push(l),this._loadImports([l],!0);const S=y.findIndex((({id:T})=>T===d));return S===-1&&this.fire(new i.z(new Error(`Import with id "${d}" does not exist on this map.`))),this.stylesheet.imports=y.slice(0,S).concat(l).concat(y.slice(S)),this._loadImports([l],!0,d)}updateImport(l,d){this._checkLoaded();const y=this.stylesheet.imports||[],S=this.getImportIndex(l);return S===-1?this:typeof d=="string"?(this.setImportUrl(l,d),this):(d.url&&d.url!==y[S].url&&this.setImportUrl(l,d.url),i.bn(d.config,y[S].config)||this.setImportConfig(l,d.config,d.data.schema),i.bn(d.data,y[S].data)||this.setImportData(l,d.data),this)}moveImport(l,d){this._checkLoaded();let y=this.stylesheet.imports||[];const S=this.getImportIndex(l);if(S===-1)return this;const T=this.getImportIndex(d);if(T===-1)return this;const I=y[S],N=this.fragments[S];return y=y.filter((({id:$})=>$!==l)),this.fragments=this.fragments.filter((({id:$})=>$!==l)),this.stylesheet.imports=y.slice(0,T).concat(I).concat(y.slice(T)),this.fragments=this.fragments.slice(0,T).concat(N).concat(this.fragments.slice(T)),this.mergeLayers(),this}setImportUrl(l,d){this._checkLoaded();const y=this.stylesheet.imports||[],S=this.getImportIndex(l);if(S===-1)return this;y[S].url=d;const T=this.fragments[S];return T.style=this._createFragmentStyle(y[S]),T.style.on("style.import.load",(()=>this.mergeAll())),T.style.loadURL(d),this}setImportData(l,d){this._checkLoaded();const y=this.getImportIndex(l),S=this.stylesheet.imports||[];return y===-1?this:d?(this.fragments[y].style.setState(d),this._reloadImports(),this):(delete S[y].data,this.setImportUrl(l,S[y].url))}setImportConfig(l,d,y){this._checkLoaded();const S=this.getImportIndex(l),T=this.stylesheet.imports||[];if(S===-1)return this;d?T[S].config=d:delete T[S].config;const I=this.fragments[S];y&&I.style.stylesheet&&(I.style.stylesheet.schema=y);const N=I.style.stylesheet&&I.style.stylesheet.schema;return I.config=d,I.style.updateConfig(d,N),this.updateConfigDependencies(),this}removeImport(l){this._checkLoaded();const d=this.stylesheet.imports||[],y=this.getImportIndex(l);y!==-1&&(d.splice(y,1),this.fragments[y].style._remove(),this.fragments.splice(y,1),this._reloadImports())}getImportIndex(l){const d=(this.stylesheet.imports||[]).findIndex((y=>y.id===l));return d===-1&&this.fire(new i.z(new Error(`Import '${l}' does not exist in the map's style and cannot be updated.`))),d}getLayer(l){return this._mergedLayers[l]}getSources(){const l=[];for(const d in this._mergedOtherSourceCaches){const y=this._mergedOtherSourceCaches[d];y&&l.push(y.getSource())}return l}getSource(l,d){const y=this.getSourceCache(l,d);return y&&y.getSource()}getLayerSource(l){const d=this.getLayerSourceCache(l);return d&&d.getSource()}getSourceCache(l,d){const y=i.C(l,d);return this._mergedOtherSourceCaches[y]}getLayerSourceCache(l){const d=i.C(l.source,l.scope);return l.type==="symbol"?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(l){if(l==null)return Object.values(this._mergedSourceCaches);const d=[];return this._mergedOtherSourceCaches[l]&&d.push(this._mergedOtherSourceCaches[l]),this._mergedSymbolSourceCaches[l]&&d.push(this._mergedSymbolSourceCaches[l]),d}updateSourceCaches(){const l=this._changes.getUpdatedSourceCaches();for(const d in l){const y=l[d];y==="reload"?this.reloadSource(d):y==="clear"&&this.clearSource(d)}}updateLayers(l){const d=this._changes.getUpdatedPaintProperties();for(const y of d){const S=this.getLayer(y);S&&S.updateTransitions(l)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(l){this.stylesheet.glyphs=l,this.glyphManager.setURL(l,this.scope)}getImages(l,d,y){this.imageManager.getImages(d.images,d.scope,y),this._updateTilesForChangedImages();const S=I=>{if(I){const N=d.images.map(($=>i.I.toString($)));I.setDependencies(d.tileID.key,d.type,N)}},T=i.C(d.source,d.scope);S(this._mergedOtherSourceCaches[T]),S(this._mergedSymbolSourceCaches[T])}rasterizeImages(l,d,y){this.imageManager.rasterizeImages(d,y)}getGlyphs(l,d,y){this.glyphManager.getGlyphs(d.stacks,d.scope,y)}getResource(l,d,y){return i.cz(d,y)}getOwnSourceCache(l){return this._otherSourceCaches[l]}getOwnLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}getOwnSourceCaches(l){const d=[];return this._otherSourceCaches[l]&&d.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&d.push(this._symbolSourceCaches[l]),d}_isSourceCacheLoaded(l){const d=this.getOwnSourceCaches(l);return d.length===0?(this.fire(new i.z(new Error(`There is no source with ID '${l}'`))),!1):d.every((y=>y.loaded()))}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(l,d){if(!this._clipLayerPresent&&l.type!=="fill-extrusion")return!1;const y=l.type==="fill-extrusion"&&l.sourceLayer==="building";if(l.is3D(!!this.terrain)){if(y||d&&d.type==="batched-model"||l.type==="model")return!0}else if(l.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach((l=>{l.style._remove()})),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}lc.getSourceType=function(v){return eb[v]},lc.setSourceType=function(v,l){eb[v]=l},lc.registerForPluginStateChange=i.ci;var hb=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Vy=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,yg=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,jy="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",md=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Uy=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,fb=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,hh=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Xf=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,vg=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,bg=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return clamp(mix(lerpx.x,lerpx.y,f.y),0.0,1.0);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const mu=[];Dc(hb,mu),Dc(yg,mu),Dc(Vy,mu);const fh={"_prelude_fog.vertex.glsl":Uy,"_prelude_terrain.vertex.glsl":md,"_prelude_shadow.vertex.glsl":vg,"_prelude_fog.fragment.glsl":fb,"_prelude_shadow.fragment.glsl":bg,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":hh,"_prelude_raster_particle.glsl":Xf},Zf={};Cr("",md),Cr(fb,Uy),Cr(bg,vg),Cr(hh,""),Cr(Xf,"");const pb=Cr(Vy,yg),Hy=hb;var xg={background:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Cr("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Cr(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Cr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Cr("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Cr("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Cr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:Cr(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:Cr(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
void main() {vec3 color=vec3(241.0/255.0,236.0/255.0,225.0/255.0);
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,normal);
#endif
if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(v_normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:Cr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Cr(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Cr(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Cr(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),0.001);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:Cr("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:Cr("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:Cr(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:Cr(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#endif
}`),terrainRaster:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:Cr("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Cr(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,jy),skyboxGradient:Cr(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,jy),skyboxCapture:Cr(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Cr(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Cr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Cr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Cr(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:Cr("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:Cr("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:Cr("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:Cr("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Dc(v,l){const d=v.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let y of d)if(y=y.trim(),y[0]==="#"&&y.includes("if")&&!y.includes("endif")){y=y.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const S=y.split(" ");for(const T of S)l.includes(T)||l.push(T)}}function Cr(v,l){const d=/#include\s+"([^"]+)"/g,y=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let S=l.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);S&&(S=S.map((U=>{const H=U.split(" ");return H[H.length-1]})),S=[...new Set(S)]);const T={},I=[],N=[];if(v=v.replace(d,((U,H)=>(N.push(H),""))),(l=l.replace(d,((U,H)=>(I.push(H),"")))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let $=[...mu];Dc(v,$),Dc(l,$);for(const U of[...I,...N])fh[U]||console.error(`Undefined include: ${U}`),Zf[U]||(Zf[U]=[],Dc(fh[U],Zf[U])),$=[...$,...Zf[U]];return{fragmentSource:v=v.replace(y,((U,H,X,q,ne)=>(T[ne]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
in ${X} ${q} ${ne};
#else
uniform ${X} ${q} u_${ne};
#endif
`:H==="initialize"?`
#ifdef HAS_UNIFORM_u_${ne}
    ${X} ${q} ${ne} = u_${ne};
#endif
`:H==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ne}
    in ${X} ${q} ${ne};
#endif
`:H==="initialize-attribute"?"":void 0))),vertexSource:l=l.replace(y,((U,H,X,q,ne)=>{const de=q==="float"?"vec2":q,ae=ne.match(/color/)?"color":de;return H==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${ne}
in ${X} ${q} a_${ne};
#endif
`:T[ne]?H==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
in ${X} ${de} a_${ne};
out ${X} ${q} ${ne};
#else
uniform ${X} ${q} u_${ne};
#endif
`:H==="initialize"?ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = a_${ne};
#else
    ${X} ${q} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = unpack_mix_${ae}(a_${ne}, u_${ne}_t);
#else
    ${X} ${q} ${ne} = u_${ne};
#endif
`:H==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ne}
    in ${X} ${q} a_${ne};
    out ${X} ${q} ${ne};
#endif
`:H==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ne}
    ${ne} = a_${ne};
#endif
`:void 0:H==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
in ${X} ${de} a_${ne};
#else
uniform ${X} ${q} u_${ne};
#endif
`:H==="define-instanced"?ae==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${ne}0;
in vec4 a_${ne}1;
in vec4 a_${ne}2;
in vec4 a_${ne}3;
#else
uniform ${X} ${q} u_${ne};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${X} ${de} a_${ne};
#else
uniform ${X} ${q} u_${ne};
#endif
`:H==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${ne}
    ${X} ${q} ${ne} = a_${ne};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${X} ${q} ${ne} = a_${ne};
#else
    ${X} ${q} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${X} ${q} ${ne} = unpack_mix_${ae}(a_${ne}, u_${ne}_t);
#else
    ${X} ${q} ${ne} = u_${ne};
#endif
`})),staticAttributes:S,usedDefines:$,vertexIncludes:I,fragmentIncludes:N}}class IE{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,d,y,S,T,I,N,$){this.context=l;let U=this.boundPaintVertexBuffers.length!==S.length;for(let X=0;!U&&X<S.length;X++)this.boundPaintVertexBuffers[X]!==S[X]&&(U=!0);let H=this.boundDynamicVertexBuffers.length!==N.length;for(let X=0;!H&&X<N.length;X++)this.boundDynamicVertexBuffers[X]!==N[X]&&(H=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==y||U||H||this.boundIndexBuffer!==T||this.boundVertexOffset!==I)this.freshBind(d,y,S,T,I,N,$);else{l.bindVertexArrayOES.set(this.vao);for(const X of N)X&&(X.bind(),$&&X.instanceCount&&X.setVertexAttribDivisor(l.gl,d,$));T&&T.dynamicDraw&&T.bind()}}freshBind(l,d,y,S,T,I,N){const $=l.numAttributes,U=this.context,H=U.gl;this.vao&&this.destroy(),this.vao=U.gl.createVertexArray(),U.bindVertexArrayOES.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=S,this.boundVertexOffset=T,this.boundDynamicVertexBuffers=I,d.enableAttributes(H,l),d.bind(),d.setVertexAttribPointers(H,l,T);for(const X of y)X.enableAttributes(H,l),X.bind(),X.setVertexAttribPointers(H,l,T);for(const X of I)X&&(X.enableAttributes(H,l),X.bind(),X.setVertexAttribPointers(H,l,T),N&&X.instanceCount&&X.setVertexAttribDivisor(H,l,N));S&&S.bind(),U.currentNumAttributes=$}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function PE(v,l){const d=Math.pow(2,l.canonical.z),y=l.canonical.y;return[new i.ac(0,y/d).toLngLat().lat,new i.ac(0,(y+1)/d).toLngLat().lat]}function Kf(v,l,d,y,S,T,I){const N=v.context,$=N.gl,U=d.hillshadeFBO;if(!U)return;v.prepareDrawTile();const H=v.isTileAffectedByFog(l),X=v.getOrCreateProgram("hillshade",{overrideFog:H});N.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,U.colorAttachment.get());const q=((he,me,Ie,Le)=>{const De=Ie.paint.get("hillshade-shadow-color"),Ye=Ie.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",Ne=Ie.paint.get("hillshade-highlight-color"),Fe=Ie.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",Be=Ie.paint.get("hillshade-accent-color"),Qe=Ie.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",tt=Ie.paint.get("hillshade-emissive-strength");let Ot=i.ak(Ie.paint.get("hillshade-illumination-direction"));if(Ie.paint.get("hillshade-illumination-anchor")==="viewport")Ot-=he.transform.angle;else if(he.style&&he.style.enable3dLights()&&he.style.directionalLight){const Ht=he.style.directionalLight.properties.get("direction"),Wt=i.cc(Ht.x,Ht.y,Ht.z);Ot=i.ak(Wt[1])}const bt=!he.options.moving;return{u_matrix:Le||he.transform.calculateProjMatrix(me.tileID.toUnwrapped(),bt),u_image:0,u_latrange:PE(0,me.tileID),u_light:[Ie.paint.get("hillshade-exaggeration"),Ot],u_shadow:De.toRenderColor(Ye?null:Ie.lut),u_highlight:Ne.toRenderColor(Fe?null:Ie.lut),u_emissive_strength:tt,u_accent:Be.toRenderColor(Qe?null:Ie.lut)}})(v,d,y,v.terrain?l.projMatrix:null);v.uploadCommonUniforms(N,X,l.toUnwrapped());const{tileBoundsBuffer:ne,tileBoundsIndexBuffer:de,tileBoundsSegments:ae}=v.getTileBoundsBuffers(d);X.draw(v,$.TRIANGLES,S,T,I,nr.disabled,q,y.id,ne,de,ae)}function mb(v,l,d){if(!l.needsDEMTextureUpload)return;const y=v.context,S=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||v.getTileTexture(d.stride);const T=d.getPixels();l.demTexture?l.demTexture.update(T,{premultiply:!1}):l.demTexture=new i.T(y,T,S.R32F,{premultiply:!1}),l.needsDEMTextureUpload=!1}function RO(v,l,d){const y=v.context,S=y.gl;if(!l.dem)return;const T=l.dem;if(y.activeTexture.set(S.TEXTURE1),mb(v,l,T),!l.demTexture)return;l.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);const I=T.dim;y.activeTexture.set(S.TEXTURE0);let N=l.hillshadeFBO;if(!N){const q=new i.T(y,{width:I,height:I,data:null},S.RGBA8);q.bind(S.LINEAR,S.CLAMP_TO_EDGE),N=l.hillshadeFBO=y.createFramebuffer(I,I,!0,"renderbuffer"),N.colorAttachment.set(q.texture)}y.bindFramebuffer.set(N.framebuffer),y.viewport.set([0,0,I,I]);const{tileBoundsBuffer:$,tileBoundsIndexBuffer:U,tileBoundsSegments:H}=v.getMercatorTileBoundsBuffers(),X=[];v.linearFloatFilteringSupported()&&X.push("TERRAIN_DEM_FLOAT_FORMAT"),v.getOrCreateProgram("hillshadePrepare",{defines:X}).draw(v,S.TRIANGLES,zn.disabled,or.disabled,br.unblended,nr.disabled,((q,ne)=>{const de=ne.stride,ae=i.ad.mat4.create();return i.ad.mat4.ortho(ae,0,i.ai,-i.ai,0,0,1),i.ad.mat4.translate(ae,ae,[0,-i.ai,0]),{u_matrix:ae,u_image:1,u_dimension:[de,de],u_zoom:q.overscaledZ}})(l.tileID,T),d.id,$,U,H),l.needsHillshadePrepare=!1}class zi{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class kO extends zi{getDefault(){return i.al.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class gb extends zi{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class _b extends zi{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class yb extends zi{getDefault(){return[!0,!0,!0,!0]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class vb extends zi{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class OE extends zi{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class DE extends zi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const d=this.current;(l.func!==d.func||l.ref!==d.ref||l.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class LO extends zi{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class wg extends zi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=l,this.dirty=!1}}class Sg extends zi{getDefault(){return[0,1]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class RE extends zi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=l,this.dirty=!1}}class tl extends zi{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class bb extends zi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.BLEND):d.disable(d.BLEND),this.current=l,this.dirty=!1}}class Wy extends zi{getDefault(){const l=this.gl;return[l.ONE,l.ZERO,l.ONE,l.ZERO]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Gy extends zi{getDefault(){return i.al.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class xb extends zi{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(l,l),this.current=l,this.dirty=!1)}}class wb extends zi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=l,this.dirty=!1}}class Sb extends zi{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Yy extends zi{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let Eb=class extends zi{getDefault(){return null}set(v){(v!==this.current||this.dirty)&&(this.gl.useProgram(v),this.current=v,this.dirty=!1)}};class Tb extends zi{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class qy extends zi{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class kE extends zi{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class LE extends zi{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Jf extends zi{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class NO extends zi{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class FO extends zi{getDefault(){return null}set(l){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class zO extends zi{getDefault(){return null}set(l){this.gl&&(l!==this.current||this.dirty)&&(this.gl.bindVertexArray(l),this.current=l,this.dirty=!1)}}class BO extends zi{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class $O extends zi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class VO extends zi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Eg extends zi{constructor(l,d){super(l),this.context=l,this.parent=d}getDefault(){return null}}class Mb extends Eg{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ab extends Eg{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Qf extends Eg{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class NE extends Ab{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const FE=(v,l,d)=>({u_matrix:v,u_image0:0,u_skirt_height:l,u_ground_shadow_factor:d}),Cb=(v,l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae)=>({u_proj_matrix:Float32Array.from(v),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(y),u_merc_matrix:d,u_zoom_transition:S,u_merc_center:T,u_image0:0,u_frustum_tl:I,u_frustum_tr:N,u_frustum_br:$,u_frustum_bl:U,u_globe_pos:H,u_globe_radius:X,u_viewport:q,u_grid_matrix:ae?Float32Array.from(ae):new Float32Array(9),u_skirt_height:ne,u_far_z_cutoff:de});function Xy(v,l){return v!=null&&l!=null&&!(!v.hasData()||!l.hasData())&&v.demTexture!=null&&l.demTexture!=null&&v.tileID.key!==l.tileID.key}const kl=new class{constructor(){this.operations={}}newMorphing(v,l,d,y,S){if(v in this.operations){const T=this.operations[v];T.to.tileID.key!==d.tileID.key&&(T.queued=d)}else this.operations[v]={startTime:y,phase:0,duration:S,from:l,to:d,queued:null}}getMorphValuesForProxy(v){if(!(v in this.operations))return null;const l=this.operations[v];return{from:l.from,to:l.to,phase:l.phase}}update(v){for(const l in this.operations){const d=this.operations[l];for(d.phase=(v-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,v)){delete this.operations[l];break}}}_nextOp(v,l){return!!v.queued&&(v.from=v.to,v.to=v.queued,v.queued=null,v.phase=0,v.startTime=l,!0)}_validOp(v){return v.from.hasData()&&v.to.hasData()}},Ib={0:null,1:"TERRAIN_VERTEX_MORPHING"};function gu(v,l,d){if(l===0)return 0;const y=l<1&&d===514?.25/l:1;return 6*Math.pow(1.5,22-v)*Math.max(l,1)*y}function Pb(v,l){const d=1<<v.z;return!l&&(v.x===0||v.x===d-1)||v.y===0||v.y===d-1}const ep=v=>({u_matrix:v});function Zy(v,l,d,y,S){if(S>0){const T=i.q.now(),I=(T-v.timeAdded)/S,N=l?(T-l.timeAdded)/S:-1,$=d.getSource(),U=y.coveringZoomLevel({tileSize:$.tileSize,roundZoom:$.roundZoom}),H=!l||Math.abs(l.tileID.overscaledZ-U)>Math.abs(v.tileID.overscaledZ-U),X=H&&v.refreshedUponExpiration?1:i.ay(H?I:1-N,0,1);return v.refreshedUponExpiration&&I>=1&&(v.refreshedUponExpiration=!1),l?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}class zE extends Dl{constructor(l){const d={type:"raster-dem",maxzoom:l.transform.maxZoom},y=new i.D(i.cj(),null),S=Py("mock-dem",d,y,l.style);super("mock-dem",S,!1),S.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,d){l.state="loaded",d(null)}}class Ob extends Dl{constructor(l){const d=Py("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new i.D(i.cj(),null),l.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,d,y){if(l.freezeTileCoverage)return;this.transform=l;const S=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((T,I)=>{if(T[I.key]="",!this._tiles[I.key]){const N=new sc(I,this._source.tileSize*I.overscaleFactor(),l.tileZoom);N.state="loaded",this._tiles[I.key]=N}return T}),{});for(const T in this._tiles)T in S||(this.freeFBO(T),this._tiles[T].unloadVectorData(),delete this._tiles[T])}freeFBO(l){const d=this.proxyCachedFBO[l];if(d!==void 0){const y=Object.values(d);this.renderCachePool.push(...y),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach((l=>l.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ky extends i.aH{constructor(l,d,y){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=d,this.projMatrix=y}}class BE extends i.cK{constructor(l,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},l.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},(()=>{this._style.map.triggerRepaint()})),l.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},(()=>{this._style.map.triggerRepaint()})),l.tp.registerButton(["Terrain"],"Invalidate Render Cache",(()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()})),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,S,T]=(function($){const U=new i.b5,H=new i.aV,X=131;U.reserve(17161),H.reserve(33800);const q=i.ai/128,ne=i.ai+q/2,de=ne+q;for(let he=-q;he<de;he+=q)for(let me=-q;me<de;me+=q){const Ie=me<0||me>ne||he<0||he>ne?24575:0,Le=i.ay(Math.round(me),0,i.ai),De=i.ay(Math.round(he),0,i.ai);U.emplaceBack(Le+Ie,De)}const ae=(he,me)=>{const Ie=me*X+he;H.emplaceBack(Ie+1,Ie,Ie+X),H.emplaceBack(Ie+X,Ie+X+1,Ie+1)};for(let he=1;he<129;he++)for(let me=1;me<129;me++)ae(me,he);return[0,129].forEach((he=>{for(let me=0;me<130;me++)ae(me,he),ae(he,me)})),[U,H,32768]})(),I=l.context;this.gridBuffer=I.createVertexBuffer(y,i.b7.members),this.gridIndexBuffer=I.createIndexBuffer(S),this.gridSegments=i.b8.simpleSegment(0,0,y.length,S.length),this.gridNoSkirtSegments=i.b8.simpleSegment(0,0,y.length,T),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ob(d.map),this.orthoMatrix=i.ad.mat4.create(),i.ad.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,i.ai,0,i.ai,0,1);const N=I.gl;this._overlapStencilMode=new or({func:N.GEQUAL,mask:255},0,255,N.KEEP,N.KEEP,N.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new zE(d.map),this._pendingGroundEffectLayers=[]}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),this._style=l,this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(l,d,y){if(l&&l.terrain){this._style!==l&&(this.style=l,this._evaluationZoom=void 0);const S=l.terrain.properties,T=l.terrain.drapeRenderMode===0,I=l.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=i.q.now();const N=l.terrain&&l.terrain.scope,$=S.get("source"),U=T?this._mockSourceCache:l.getSourceCache($,N);if(!U)return void i.w(`Couldn't find terrain source "${$}".`);if(this.sourceCache=U,this._attenuationRange=l.terrain.getAttenuationRange(),this._exaggeration=I?this.calculateExaggeration(d):S.get("exaggeration"),!d.projection.requiresDraping&&I&&this._exaggeration===0)return void this._disable();this.enabled=!0;const H=()=>{this.sourceCache.used&&i.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const X=this.getScaledDemTileSize();this.sourceCache.update(d,X,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,H(),this._initializing=!0),H(),d.updateElevation(!0,y),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(l){if(this._attenuationRange&&l.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(l.zoom);const d=this._previousCameraAltitude,y=l.getFreeCameraOptions().position.z/l.pixelsPerMeter*l.worldSize;this._previousCameraAltitude=y;const S=d!=null?y-d:Number.MAX_VALUE;if(Math.abs(S)<2)return this._exaggeration;const T=l.zoom,I=this._style.terrain;if(!this._previousUpdateTimestamp)return I.getExaggeration(T);let N=T-this._previousZoom;const $=this._previousUpdateTimestamp;let U=T;this._evaluationZoom!=null&&(U=this._evaluationZoom,Math.abs(T-U)>.5&&(N=.5*(T-U+N)),N*S<0&&(U+=N)),this._evaluationZoom=U;const H=I.getExaggeration(U),X=H===I.getExaggeration(Math.max(0,U-.1));if(X&&Math.abs(H-this._exaggeration)<.01)return H;let q=Math.min(.1,.00375*(this._updateTimestamp-$));return(X||H<.1||Math.abs(N)<1e-4)&&(q=Math.min(.2,4*q)),i.ah(this._exaggeration,H,q)}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._mergedSourceCaches)this._style._mergedSourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach((l=>l.fb.destroy())),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=y._centerAltitude===0&&this.getAtPointOrZero(i.ac.fromLngLat(y.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const S=this.proxyCoords=d.getIds().map(($=>{const U=d.getTileByID($).tileID;return U.projMatrix=y.calculateProjMatrix(U.toUnwrapped()),U}));(function($,U){const H=U.transform.pointCoordinate(U.transform.getCameraPoint()),X=new i.P(H.x,H.y);$.sort(((q,ne)=>{if(ne.overscaledZ-q.overscaledZ)return ne.overscaledZ-q.overscaledZ;const de=new i.P(q.canonical.x+(1<<q.canonical.z)*q.wrap,q.canonical.y),ae=new i.P(ne.canonical.x+(1<<ne.canonical.z)*ne.wrap,ne.canonical.y),he=X.mult(1<<q.canonical.z);return he.x-=.5,he.y-=.5,he.distSqr(de)-he.distSqr(ae)}))})(S,this.painter);const T=this.proxyToSource||{};this.proxyToSource={},S.forEach(($=>{this.proxyToSource[$.key]={}})),this.terrainTileForTile={};const I=this._style._mergedSourceCaches;for(const $ in I){const U=I[$];if(!U.used||(U!==this.sourceCache&&this.resetTileLookupCache(U.id),this._setupProxiedCoordsForOrtho(U,l[$],T),U.usedForTerrain))continue;const H=l[$];U.getSource().reparseOverscaled&&this._assignTerrainTiles(H)}this.proxiedCoords[d.id]=S.map(($=>new Ky($,$.key,this.orthoMatrix))),this._assignTerrainTiles(S),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(T),this.renderingToTexture=!1;const N={};this._visibleDemTiles=[];for(const $ of this.proxyCoords){const U=this.terrainTileForTile[$.key];if(!U)continue;const H=U.tileID.key;H in N||(this._visibleDemTiles.push(U),N[H]=H)}}_assignTerrainTiles(l){this._initializing||l.forEach((d=>{if(this.terrainTileForTile[d.key])return;const y=this._findTileCoveringTileID(d,this.sourceCache);y&&(this.terrainTileForTile[d.key]=y)}))}_prepareDEMTextures(){const l=this.painter.context,d=l.gl;for(const y in this.terrainTileForTile){const S=this.terrainTileForTile[y],T=S.dem;!T||S.demTexture&&!S.needsDEMTextureUpload||(l.activeTexture.set(d.TEXTURE1),mb(this.painter,S,T))}}_prepareDemTileUniforms(l,d,y,S){if(!d||d.demTexture==null)return!1;const T=l.tileID.canonical,I=Math.pow(2,d.tileID.canonical.z-T.z),N=S||"";return y[`u_dem_tl${N}`]=[T.x*I%1,T.y*I%1],y[`u_dem_scale${N}`]=I,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let l=0;const d=this._visibleDemTiles.reduce(((y,S)=>{if(!S.dem)return y;const T=S.dem.tree.minimums[0];return T>0&&l++,y+T}),0);return l?d/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,d=l.gl;l.activeTexture.set(d.TEXTURE2);const y=this._getLoadedAreaMinimum(),S=new i.cL({width:1,height:1},new Float32Array([y]));this._emptyDEMTextureDirty=!1;let T=this._emptyDEMTexture;return T?T.update(S,{premultiply:!1}):T=this._emptyDEMTexture=new i.T(l,S,d.R32F,{premultiply:!1}),T}setupElevationDraw(l,d,y){const S=this.painter.context,T=S.gl,I={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};I.u_exaggeration=this.exaggeration();let N=null,$=null,U=1;if(y&&y.morphing&&this._useVertexMorphing){const ne=y.morphing.srcDemTile,de=y.morphing.dstDemTile;U=y.morphing.phase,ne&&de&&(this._prepareDemTileUniforms(l,ne,I,"_prev")&&($=ne),this._prepareDemTileUniforms(l,de,I)&&(N=de))}const H=ne=>ne&&ne.demTexture&&this.painter.linearFloatFilteringSupported()?T.LINEAR:T.NEAREST;let X=null;var q;if(this.enabled?$&&N?(X=N.demTexture,S.activeTexture.set(T.TEXTURE4),$.demTexture.bind(H($),T.CLAMP_TO_EDGE),I.u_dem_lerp=U):(N=this.terrainTileForTile[l.tileID.key],X=this._prepareDemTileUniforms(l,N,I)?N.demTexture:this.emptyDEMTexture):X=this.emptyDEMTexture,S.activeTexture.set(T.TEXTURE2),X&&(I.u_dem_size=(q=X).size[0]===1?1:q.size[0]-2,X.bind(H(N),T.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(y&&y.useDepthForOcclusion,d,I),y&&y.useMeterToDem&&N){const ne=(1<<N.tileID.canonical.z)*i.bH(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;I.u_meter_to_dem=ne}if(y&&y.labelPlaneMatrixInv&&(I.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),d.setTerrainUniformValues(S,I),this.painter.transform.projection.name==="globe"){const ne=this.globeUniformValues(this.painter.transform,l.tileID.canonical,y&&y.useDenormalizedUpVectorScale);d.setGlobeUniformValues(S,ne)}}globeUniformValues(l,d,y){const S=l.projection;return{u_tile_tl_up:S.upVector(d,0,0),u_tile_tr_up:S.upVector(d,i.ai,0),u_tile_br_up:S.upVector(d,i.ai,i.ai),u_tile_bl_up:S.upVector(d,0,i.ai),u_tile_up_scale:y?i.cM(1):S.upVectorScale(d,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const d=this.painter,y=this.painter.context;l.length!==0&&(y.bindFramebuffer.set(null),y.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,(function(S,T,I,N,$){if(S.transform.projection.name==="globe")(function(U,H,X,q,ne){const de=U.context,ae=de.gl;let he,me;const Ie=U.transform,Le=i.cD(U,de,Ie),De=(Ht,Wt)=>{if(me===Wt)return;const sn=[Ib[Wt],"PROJECTION_GLOBE_VIEW"];Le&&sn.push("CUSTOM_ANTIALIASING");const gt=U.isTileAffectedByFog(Ht);he=U.getOrCreateProgram("globeRaster",{defines:sn,overrideFog:gt}),me=Wt},Ye=U.colorModeForRenderPass(),Ne=new zn(ae.LEQUAL,zn.ReadWrite,U.depthRangeFor3D);kl.update(ne);const Fe=i.cE(Ie),Be=[i.av(Ie.center.lng),i.aC(Ie.center.lat)],Qe=U.globeSharedBuffers,tt=[Ie.width*i.q.devicePixelRatio,Ie.height*i.q.devicePixelRatio],Ot=Float32Array.from(Ie.globeMatrix),bt={useDenormalizedUpVectorScale:!0};{const Ht=U.transform,Wt=gu(Ht.zoom,H.exaggeration(),H.sourceCache._source.tileSize);me=-1;const sn=ae.TRIANGLES;for(const gt of q){const Ut=X.getTile(gt),ft=or.disabled,jt=H.prevTerrainTileForTile[gt.key],Bt=H.terrainTileForTile[gt.key];Xy(jt,Bt)&&kl.newMorphing(gt.key,jt,Bt,ne,250),de.activeTexture.set(ae.TEXTURE0),Ut.texture&&Ut.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const Gt=kl.getMorphValuesForProxy(gt.key),Dt=Gt?1:0;Gt&&i.L(bt,{morphing:{srcDemTile:Gt.from,dstDemTile:Gt.to,phase:i.cC(Gt.phase)}});const qt=i.cF(gt.canonical),_n=i.cG(qt.getCenter().lat),yn=i.cH(gt.canonical,qt,_n,Ht.worldSize/Ht._pixelsPerMercatorPixel),wn=i.bc(i.cI(gt.canonical)),Rn=Cb(Ht.expandedFarZProjMatrix,Ot,Fe,wn,i.ag(Ht.zoom),Be,Ht.frustumCorners.TL,Ht.frustumCorners.TR,Ht.frustumCorners.BR,Ht.frustumCorners.BL,Ht.globeCenterInViewSpace,Ht.globeRadius,tt,Wt,Ht._farZ,yn);if(De(gt,Dt),he&&(H.setupElevationDraw(Ut,he,bt),U.uploadCommonUniforms(de,he,gt.toUnwrapped()),Qe)){const[rr,Vn,er]=Qe.getGridBuffers(_n,Wt!==0);he.draw(U,sn,Ne,ft,Ye,nr.backCCW,Rn,"globe_raster",rr,Vn,er)}}}if(Qe&&(U.renderDefaultNorthPole||U.renderDefaultSouthPole)){const Ht=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Le&&Ht.push("CUSTOM_ANTIALIASING"),he=U.getOrCreateProgram("globeRaster",{defines:Ht});for(const Wt of q){const{x:sn,y:gt,z:Ut}=Wt.canonical,ft=gt===0,jt=gt===(1<<Ut)-1,[Bt,Gt,Dt,qt]=Qe.getPoleBuffers(Ut,!1);if(qt&&(ft||jt)){const _n=X.getTile(Wt);de.activeTexture.set(ae.TEXTURE0),_n.texture&&_n.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);let yn=i.cJ(Ut,sn,Ie);const wn=i.bc(i.cI(Wt.canonical)),Rn=(rr,Vn)=>rr.draw(U,ae.TRIANGLES,Ne,or.disabled,Ye,nr.disabled,Cb(Ie.expandedFarZProjMatrix,yn,yn,wn,0,Be,Ie.frustumCorners.TL,Ie.frustumCorners.TR,Ie.frustumCorners.BR,Ie.frustumCorners.BL,Ie.globeCenterInViewSpace,Ie.globeRadius,tt,0,Ie._farZ),"globe_pole_raster",Vn,Dt,qt);H.setupElevationDraw(_n,he,bt),U.uploadCommonUniforms(de,he,Wt.toUnwrapped()),ft&&U.renderDefaultNorthPole&&Rn(he,Bt),jt&&U.renderDefaultSouthPole&&(yn=i.ad.mat4.scale(i.ad.mat4.create(),yn,[1,-1,1]),Rn(he,Gt))}}}})(S,T,I,N,$);else{const U=S.context,H=U.gl;let X,q;const ne=S.shadowRenderer,de=fu(S,S.longestCutoffRange),ae=Ye=>{if(q===Ye)return;const Ne=[];Ne.push(Ib[Ye]),de.shouldRenderCutoff&&Ne.push("RENDER_CUTOFF"),ne&&(Ne.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ne.useNormalOffset&&Ne.push("NORMAL_OFFSET")),X=S.getOrCreateProgram("terrainRaster",{defines:Ne}),q=Ye},he=S.colorModeForRenderPass(),me=new zn(H.LEQUAL,zn.ReadWrite,S.depthRangeFor3D);kl.update($);const Ie=S.transform,Le=gu(Ie.zoom,T.exaggeration(),T.sourceCache._source.tileSize);let De=[0,0,0];if(ne){const Ye=S.style.directionalLight,Ne=S.style.ambientLight;Ye&&Ne&&(De=Yf(S.style,Ye,Ne))}{q=-1;const Ye=H.TRIANGLES,[Ne,Fe]=[T.gridIndexBuffer,T.gridSegments];for(const Be of N){const Qe=I.getTile(Be),tt=or.disabled,Ot=T.prevTerrainTileForTile[Be.key],bt=T.terrainTileForTile[Be.key];Xy(Ot,bt)&&kl.newMorphing(Be.key,Ot,bt,$,250),U.activeTexture.set(H.TEXTURE0),Qe.texture&&Qe.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE);const Ht=kl.getMorphValuesForProxy(Be.key),Wt=Ht?1:0;let sn;Ht&&(sn={morphing:{srcDemTile:Ht.from,dstDemTile:Ht.to,phase:i.cC(Ht.phase)}});const gt=FE(Be.projMatrix,Pb(Be.canonical,Ie.renderWorldCopies)?Le/10:Le,De);if(ae(Wt),!X)continue;T.setupElevationDraw(Qe,X,sn);const Ut=Be.toUnwrapped();ne&&ne.setupShadows(Ut,X),S.uploadCommonUniforms(U,X,Ut,null,de),X.draw(S,Ye,me,tt,he,nr.backCCW,gt,"terrain_raster",T.gridBuffer,Ne,Fe)}}}})(d,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const d=this.painter,y=this.painter.context,S=this.proxySourceCache,T=this.proxiedCoords[S.id],I=this._drapedRenderBatches.shift(),N=d.style.order,$=[];let U=0;for(const H of T){const X=S.getTileByID(H.proxyTileKey),q=S.proxyCachedFBO[H.key]?S.proxyCachedFBO[H.key][l]:void 0,ne=q!==void 0?S.renderCache[q]:this.pool[U++],de=q!==void 0;if(X.texture=ne.tex,de&&!ne.dirty){$.push(X.tileID);continue}let ae;y.bindFramebuffer.set(ne.fb.framebuffer),this.renderedToTile=!1,ne.dirty&&(y.clear({color:i.al.transparent,stencil:0}),ne.dirty=!1);for(let he=I.start;he<=I.end;++he){const me=d.style._mergedLayers[N[he]];if(me.isHidden(d.transform.zoom))continue;const Ie=d.style.getLayerSourceCache(me),Le=Ie?this.proxyToSource[H.key][Ie.id]:[H];if(!Le)continue;const De=Le;y.viewport.set([0,0,ne.fb.width,ne.fb.height]),ae!==(Ie?Ie.id:null)&&(this._setupStencil(ne,Le,me,Ie),ae=Ie?Ie.id:null),d.renderLayer(d,Ie,me,De)}if(this._drapedRenderBatches.length===0)for(const he of this._pendingGroundEffectLayers){const me=d.style._mergedLayers[N[he]];if(me.isHidden(d.transform.zoom))continue;const Ie=d.style.getLayerSourceCache(me),Le=Ie?this.proxyToSource[H.key][Ie.id]:[H];if(!Le)continue;const De=Le;y.viewport.set([0,0,ne.fb.width,ne.fb.height]),ae!==(Ie?Ie.id:null)&&(this._setupStencil(ne,Le,me,Ie),ae=Ie?Ie.id:null),d.renderLayer(d,Ie,me,De)}this.renderedToTile?(ne.dirty=!0,$.push(X.tileID)):de||--U,U===5&&(U=0,this.renderToBackBuffer($))}return this.renderToBackBuffer($),this.renderingToTexture=!1,y.bindFramebuffer.set(null),y.viewport.set([0,0,d.width,d.height]),I.end+1}postRender(){}isLayerOrderingCorrect(l){const d=l.order.length;let y=-1,S=d;for(let T=0;T<d;++T)this._style.isLayerDraped(l._mergedLayers[l.order[T]])?y=Math.max(y,T):S=Math.min(S,T);return S>y}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter((d=>d.dem)).forEach((d=>{l=Math.min(l,d.dem.tree.minimums[0])})),l===0?l:(l-30)*this._exaggeration}raycast(l,d,y){if(!this._visibleDemTiles)return null;const S=this._visibleDemTiles.filter((T=>T.dem)).map((T=>{const I=T.tileID,N=1<<I.overscaledZ,{x:$,y:U}=I.canonical,H=$/N,X=($+1)/N,q=U/N,ne=(U+1)/N;return{minx:H,miny:q,maxx:X,maxy:ne,t:T.dem.tree.raycastRoot(H,q,X,ne,l,d,y),tile:T}}));S.sort(((T,I)=>(T.t!==null?T.t:Number.MAX_VALUE)-(I.t!==null?I.t:Number.MAX_VALUE)));for(const T of S){if(T.t==null)return null;const I=T.tile.dem.tree.raycast(T.minx,T.miny,T.maxx,T.maxy,l,d,y);if(I!=null)return I}return null}_createFBO(){const l=this.painter.context,d=l.gl,y=this.drapeBufferSize;l.activeTexture.set(d.TEXTURE0);const S=new i.T(l,{width:y[0],height:y[1],data:null},d.RGBA8);S.bind(d.LINEAR,d.CLAMP_TO_EDGE);const T=l.createFramebuffer(y[0],y[1],!0,null);return T.colorAttachment.set(S.texture),T.depthAttachment=new NE(l,T.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,T.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):T.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:T,tex:S,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const l in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[l].hasTransition())return!0;return this._style.order.some((l=>{const d=this._style._mergedLayers[l],y=d.isHidden(this.painter.transform.zoom);return d.type==="hillshade"||d.type==="custom"?!y&&d.shouldRedrape():!y&&d.hasTransition()}))}_clearLineLayersFromRenderCache(){let l=!1;for(const y of this._style.getSources())if(y instanceof kf){l=!0;break}if(!l)return;const d={};for(let y=0;y<this._style.order.length;++y){const S=this._style._mergedLayers[this._style.order[y]],T=this._style.getLayerSourceCache(S);if(T&&!d[T.id]&&!S.isHidden(this.painter.transform.zoom)&&S.type==="line"&&S.widthExpression()instanceof i.ab){d[T.id]=!0;for(const I of this.proxyCoords){const N=this.proxyToSource[I.key][T.id];if(N)for(const $ of N)this._clearRenderCacheForTile(T.id,$)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const y in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[y]._source instanceof Ol){l=!0;break}if(!l)return;const d={};for(let y=0;y<this._style.order.length;++y){const S=this._style._mergedLayers[this._style.order[y]],T=this._style.getLayerSourceCache(S);if(!T||d[T.id]||S.isHidden(this.painter.transform.zoom)||S.type!=="raster")continue;const I=S.paint.get("raster-fade-duration");for(const N of this.proxyCoords){const $=this.proxyToSource[N.key][T.id];if($)for(const U of $){const H=Zy(T.getTile(U),T.findLoadedParent(U,0),T,this.painter.transform,I);(H.opacity!==1||H.mix!==0)&&this._clearRenderCacheForTile(T.id,U)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const l=this._style.order,d=l.length;if(d===0)return;const y=[];this._pendingGroundEffectLayers=[];let S,T=0,I=this._style._mergedLayers[l[T]];for(;!this._style.isLayerDraped(I)&&I.isHidden(this.painter.transform.zoom)&&++T<d;)I=this._style._mergedLayers[l[T]];for(;T<d;++T){const N=this._style._mergedLayers[l[T]];N.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(N)?S===void 0&&(S=T):(N.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(T),S!==void 0&&(y.push({start:S,end:T-1}),S=void 0)))}if(S!==void 0&&y.push({start:S,end:T-1}),y.length!==0){const N=y[y.length-1];this._pendingGroundEffectLayers.every(($=>$>N.end))||i.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=y}_setupRenderCache(l){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const I=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let N=0;N<I.length;++N){const $=Object.values(I[N]);d.renderCachePool.push(...$)}}return}this._clearRasterLayersFromRenderCache();const y=this.proxyCoords,S=this._tilesDirty;for(let I=y.length-1;I>=0;I--){const N=y[I];if(d.getTileByID(N.key),d.proxyCachedFBO[N.key]!==void 0){const $=l[N.key],U=this.proxyToSource[N.key];let H=0;for(const X in U){const q=U[X],ne=$[X];if(!ne||ne.length!==q.length||q.some(((de,ae)=>de!==ne[ae]||S[X]&&S[X].hasOwnProperty(de.key)))){H=-1;break}++H}for(const X in d.proxyCachedFBO[N.key])d.renderCache[d.proxyCachedFBO[N.key][X]].dirty=H<0||H!==Object.values($).length}}const T=[...this._drapedRenderBatches];T.sort(((I,N)=>N.end-N.start-(I.end-I.start)));for(const I of T)for(const N of y){if(d.proxyCachedFBO[N.key])continue;let $=d.renderCachePool.pop();$===void 0&&d.renderCache.length<50&&($=d.renderCache.length,d.renderCache.push(this._createFBO())),$!==void 0&&(d.proxyCachedFBO[N.key]={},d.proxyCachedFBO[N.key][I.start]=$,d.renderCache[$].dirty=!0)}this._tilesDirty={}}_setupStencil(l,d,y,S){if(!S||!this._sourceTilesOverlap[S.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const T=this.painter.context,I=T.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let N;if(y.isTileClipped())N=d.length,this._overlapStencilMode.test={func:I.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);N=1,this._overlapStencilMode.test={func:I.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+N>255&&(T.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=N,this._overlapStencilMode.ref=this._stencilRef,y.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):or.disabled}_renderTileClippingMasks(l,d){const y=this.painter,S=this.painter.context,T=S.gl;y._tileClippingMaskIDs={},S.setColorMode(br.disabled),S.setDepthMode(zn.disabled);const I=y.getOrCreateProgram("clippingMask");for(const N of l){const $=y._tileClippingMaskIDs[N.key]=--d;I.draw(y,T.TRIANGLES,zn.disabled,new or({func:T.ALWAYS,mask:0},$,255,T.KEEP,T.KEEP,T.REPLACE),br.disabled,nr.disabled,ep(N.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(l){const d=this.painter.transform;if(l.x<0||l.x>d.width||l.y<0||l.y>d.height)return null;const y=[l.x,l.y,1,1];i.ad.vec4.transformMat4(y,y,d.pixelMatrixInverse),i.ad.vec4.scale(y,y,1/y[3]),y[0]/=d.worldSize,y[1]/=d.worldSize;const S=d._camera.position,T=i.bH(1,d.center.lat),I=[S[0],S[1],S[2]/T,0],N=i.ad.vec3.subtract([],y.slice(0,3),I);i.ad.vec3.normalize(N,N);const $=this.raycast(I,N,this._exaggeration);return $!==null&&$?(i.ad.vec3.scaleAndAdd(I,I,N,$),I[3]=I[2],I[2]*=T,I):null}_setupProxiedCoordsForOrtho(l,d,y){if(l.getSource()instanceof i.aK)return this._setupProxiedCoordsForImageSource(l,d,y);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const S=this.proxiedCoords[l.id]=[],T=this.proxyCoords;for(let $=0;$<T.length;$++){const U=T[$],H=this._findTileCoveringTileID(U,l);if(H){const X=this._createProxiedId(U,H,y[U.key]&&y[U.key][l.id]);S.push(X),this.proxyToSource[U.key][l.id]=[X]}}let I=!1;const N=new Set;for(let $=0;$<d.length;$++){const U=l.getTile(d[$]);if(!U||!U.hasData())continue;const H=this._findTileCoveringTileID(U.tileID,this.proxySourceCache);if(H&&H.tileID.canonical.z!==U.tileID.canonical.z){const X=this.proxyToSource[H.tileID.key][l.id],q=this._createProxiedId(H.tileID,U,y[H.tileID.key]&&y[H.tileID.key][l.id]);X?X.splice(X.length-1,0,q):this.proxyToSource[H.tileID.key][l.id]=[q];const ne=this.proxyToSource[H.tileID.key][l.id];N.has(ne)||N.add(ne),S.push(q),I=!0}}if(this._sourceTilesOverlap[l.id]=I,I&&this._debugParams.sortTilesHiZFirst)for(const $ of N)$.sort(((U,H)=>H.overscaledZ-U.overscaledZ))}_setupProxiedCoordsForImageSource(l,d,y){if(!l.getSource().loaded())return;const S=this.proxiedCoords[l.id]=[],T=this.proxyCoords,I=l.getSource(),N=I.tileID;if(!N)return;const $=new i.P(N.x,N.y)._div(1<<N.z),U=I.coordinates.map(i.ac.fromLngLat).reduce(((X,q)=>(X.min.x=Math.min(X.min.x,q.x-$.x),X.min.y=Math.min(X.min.y,q.y-$.y),X.max.x=Math.max(X.max.x,q.x-$.x),X.max.y=Math.max(X.max.y,q.y-$.y),X)),{min:new i.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),H=(X,q)=>{const ne=X.wrap+X.canonical.x/(1<<X.canonical.z),de=X.canonical.y/(1<<X.canonical.z),ae=i.ai/(1<<X.canonical.z),he=q.wrap+q.canonical.x/(1<<q.canonical.z),me=q.canonical.y/(1<<q.canonical.z);return ne+ae<he+U.min.x||ne>he+U.max.x||de+ae<me+U.min.y||de>me+U.max.y};for(let X=0;X<T.length;X++){const q=T[X];for(let ne=0;ne<d.length;ne++){const de=l.getTile(d[ne]);if(!de||!de.hasData()||H(q,de.tileID))continue;const ae=this._createProxiedId(q,de,y[q.key]&&y[q.key][l.id]),he=this.proxyToSource[q.key][l.id];he?he.push(ae):this.proxyToSource[q.key][l.id]=[ae],S.push(ae)}}}_createProxiedId(l,d,y){let S=this.orthoMatrix;if(y){const T=y.find((I=>I.key===d.tileID.key));if(T)return T}if(d.tileID.key!==l.key){const T=l.canonical.z-d.tileID.canonical.z;let I,N,$;S=i.ad.mat4.create();const U=d.tileID.wrap-l.wrap<<l.overscaledZ;T>0?(I=i.ai>>T,N=I*((d.tileID.canonical.x<<T)-l.canonical.x+U),$=I*((d.tileID.canonical.y<<T)-l.canonical.y)):(I=i.ai<<-T,N=i.ai*(d.tileID.canonical.x-(l.canonical.x+U<<-T)),$=i.ai*(d.tileID.canonical.y-(l.canonical.y<<-T))),i.ad.mat4.ortho(S,0,I,0,I,0,1),i.ad.mat4.translate(S,S,[N,$,0])}return new Ky(d.tileID,l.key,S)}_findTileCoveringTileID(l,d){let y=d.getTile(l);if(y&&y.hasData())return y;const S=this._findCoveringTileCache[d.id],T=S[l.key];if(y=T?d.getTileByID(T):null,y&&y.hasData()||T===null)return y;let I=y?y.tileID:l,N=I.overscaledZ;const $=d.getSource().minzoom,U=[];if(!T){const X=d.getSource().maxzoom;if(l.canonical.z>=X){const q=l.canonical.z-X;d.getSource().reparseOverscaled?(N=Math.max(l.canonical.z+2,d.transform.tileZoom),I=new i.aH(N,l.wrap,X,l.canonical.x>>q,l.canonical.y>>q)):q!==0&&(N=X,I=new i.aH(N,l.wrap,X,l.canonical.x>>q,l.canonical.y>>q))}I.key!==l.key&&(U.push(I.key),y=d.getTile(I))}const H=X=>{U.forEach((q=>{S[q]=X})),U.length=0};for(N-=1;N>=$&&(!y||!y.hasData());N--){y&&H(y.tileID.key);const X=I.calculateScaledKey(N);if(y=d.getTileByID(X),y&&y.hasData())break;const q=S[X];if(q===null)break;q===void 0?U.push(X):y=d.getTileByID(q)}return H(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,d){let y=this._tilesDirty[l];y||(y=this._tilesDirty[l]={}),y[d.key]=!0}}function $E(v,l,d){const y=(function(N,$,U){const H=i.ad.vec3.dot($,N),X=i.ad.vec3.dot(U,[.2126,.7152,.0722]),q=(de,ae,he)=>(1-he)*de+he*ae,ne=q(1-.3*Math.min(X,1),1,Math.min(H+1,1));return q(.92,1,Math.asin(i.ay($[2],-1,1))/Math.PI+.5)*ne})(v,[0,0,1],l),S=[0,0,0];i.ad.vec3.scale(S,d.slice(0,3),y);const T=[0,0,0];i.ad.vec3.scale(T,l.slice(0,3),v[2]);const I=[0,0,0];return i.ad.vec3.add(I,S,T),i.cg(I)}const Tg=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],jO=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class VE{static cacheKey(l,d,y,S){let T=`${d}${S?S.cacheKey:""}`;for(const I of y)l.usedDefines.includes(I)&&(T+=`/${I}`);return T}constructor(l,d,y,S,T,I){const N=l.gl;this.program=N.createProgram(),this.configuration=S,this.name=d,this.fixedDefines=[...I];const $=S?S.getBinderAttributes():[],U=(y.staticAttributes||[]).concat($);let H=S?S.defines():[];H=H.concat(I.map((he=>`#define ${he}`)));const X=`#version 300 es
`;let q=X+H.concat("precision mediump float;",Hy,pb.fragmentSource).join(`
`);for(const he of y.fragmentIncludes)q+=`
${fh[he]}`;q+=`
${y.fragmentSource}`;let ne=X+H.concat("precision highp float;",Hy,pb.vertexSource).join(`
`);for(const he of y.vertexIncludes)ne+=`
${fh[he]}`;this.forceManualRenderingForInstanceIDShaders=l.forceManualRenderingForInstanceIDShaders&&y.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(ne+=`
uniform int u_instanceID;
`),ne+=`
${y.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(ne=ne.replaceAll("gl_InstanceID","u_instanceID"));const de=N.createShader(N.FRAGMENT_SHADER);if(N.isContextLost())return void(this.failedToCreate=!0);N.shaderSource(de,q),N.compileShader(de),N.attachShader(this.program,de);const ae=N.createShader(N.VERTEX_SHADER);if(N.isContextLost())this.failedToCreate=!0;else{N.shaderSource(ae,ne),N.compileShader(ae),N.attachShader(this.program,ae),this.attributes={},this.numAttributes=U.length;for(let he=0;he<this.numAttributes;he++)if(U[he]){const me=U[he].startsWith("a_")?U[he]:`a_${U[he]}`;N.bindAttribLocation(this.program,he,me),this.attributes[me]=he}N.linkProgram(this.program),N.deleteShader(ae),N.deleteShader(de),this.fixedUniforms=T(l),this.binderUniforms=S?S.getUniforms(l):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(he=>({u_instanceID:new i.bN(he)}))(l)),(I.includes("TERRAIN")||d.indexOf("symbol")!==-1||d.indexOf("circle")!==-1)&&(this.terrainUniforms=(he=>({u_dem:new i.bN(he),u_dem_prev:new i.bN(he),u_dem_tl:new i.bK(he),u_dem_scale:new i.bM(he),u_dem_tl_prev:new i.bK(he),u_dem_scale_prev:new i.bM(he),u_dem_size:new i.bM(he),u_dem_lerp:new i.bM(he),u_exaggeration:new i.bM(he),u_depth:new i.bN(he),u_depth_size_inv:new i.bK(he),u_depth_range_unpack:new i.bK(he),u_occluder_half_size:new i.bM(he),u_occlusion_depth_offset:new i.bM(he),u_meter_to_dem:new i.bM(he),u_label_plane_matrix_inv:new i.bJ(he)}))(l)),I.includes("GLOBE")&&(this.globeUniforms=(he=>({u_tile_tl_up:new i.bL(he),u_tile_tr_up:new i.bL(he),u_tile_br_up:new i.bL(he),u_tile_bl_up:new i.bL(he),u_tile_up_scale:new i.bM(he)}))(l)),I.includes("FOG")&&(this.fogUniforms=(he=>({u_fog_matrix:new i.bJ(he),u_fog_range:new i.bK(he),u_fog_color:new i.cb(he),u_fog_horizon_blend:new i.bM(he),u_fog_vertical_limit:new i.bK(he),u_fog_temporal_offset:new i.bM(he),u_frustum_tl:new i.bL(he),u_frustum_tr:new i.bL(he),u_frustum_br:new i.bL(he),u_frustum_bl:new i.bL(he),u_globe_pos:new i.bL(he),u_globe_radius:new i.bM(he),u_globe_transition:new i.bM(he),u_is_globe:new i.bN(he),u_viewport:new i.bK(he)}))(l)),I.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(he=>({u_cutoff_params:new i.cb(he)}))(l)),I.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(he=>({u_lighting_ambient_color:new i.bL(he),u_lighting_directional_dir:new i.bL(he),u_lighting_directional_color:new i.bL(he),u_ground_radiance:new i.bL(he)}))(l)),I.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(he=>({u_light_matrix_0:new i.bJ(he),u_light_matrix_1:new i.bJ(he),u_fade_range:new i.bK(he),u_shadow_normal_offset:new i.bL(he),u_shadow_intensity:new i.bM(he),u_shadow_texel_size:new i.bM(he),u_shadow_map_resolution:new i.bM(he),u_shadow_direction:new i.bL(he),u_shadow_bias:new i.bL(he),u_shadowmap_0:new i.bN(he),u_shadowmap_1:new i.bN(he)}))(l))}}setTerrainUniformValues(l,d){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const S in d)y[S]&&y[S].set(this.program,S,d[S])}}setGlobeUniformValues(l,d){if(!this.globeUniforms)return;const y=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const S in d)y[S]&&y[S].set(this.program,S,d[S])}}setFogUniformValues(l,d){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const S in d)y[S].set(this.program,S,d[S])}}setCutoffUniformValues(l,d){if(!this.cutoffUniforms)return;const y=this.cutoffUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const S in d)y[S].set(this.program,S,d[S])}}setLightsUniformValues(l,d){if(!this.lightsUniforms)return;const y=this.lightsUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const S in d)y[S].set(this.program,S,d[S])}}setShadowUniformValues(l,d){if(this.failedToCreate||!this.shadowUniforms)return;const y=this.shadowUniforms;l.program.set(this.program);for(const S in d)y[S].set(this.program,S,d[S])}_drawDebugWireframe(l,d,y,S,T,I,N,$,U,H){const X=l.options.wireframe;if(X.terrain===!1&&X.layers2D===!1&&X.layers3D===!1)return;const q=l.context;if(!(!(!X.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!X.layers2D||l._terrain&&l._terrain.renderingToTexture||!Tg.includes(this.name))||!(!X.layers3D||!jO.includes(this.name))))return;const ne=q.gl,de=l.wireframeDebugCache.getLinesFromTrianglesBuffer(l.frameCounter,T,q);if(!de)return;const ae=[...this.fixedDefines];ae.push("DEBUG_WIREFRAME");const he=l.getOrCreateProgram(this.name,{config:this.configuration,defines:ae});q.program.set(he.program);const me=(De,Ye,Ne)=>{if(Ye[De]&&Ne[De])for(const Fe in Ye[De])Ne[De][Fe]&&Ne[De][Fe].set(Ne.program,Fe,Ye[De][Fe].current)};U&&U.setUniforms(he.program,q,he.binderUniforms,N,{zoom:$}),me("fixedUniforms",this,he),me("terrainUniforms",this,he),me("globeUniforms",this,he),me("fogUniforms",this,he),me("lightsUniforms",this,he),me("shadowUniforms",this,he),de.bind(),q.setColorMode(new br([ne.ONE,ne.ONE_MINUS_SRC_ALPHA,ne.ZERO,ne.ONE],i.al.transparent,[!0,!0,!0,!1])),q.setDepthMode(new zn(d.func===ne.LESS?ne.LEQUAL:d.func,zn.ReadOnly,d.range)),q.setStencilMode(or.disabled);const Ie=3*I.primitiveLength*2,Le=3*I.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const De=H||1;for(let Ye=0;Ye<De;++Ye)he.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Ye),ne.drawElements(ne.LINES,Ie,ne.UNSIGNED_SHORT,Le)}else H&&H>1?ne.drawElementsInstanced(ne.LINES,Ie,ne.UNSIGNED_SHORT,Le,H):ne.drawElements(ne.LINES,Ie,ne.UNSIGNED_SHORT,Le);T.bind(),q.program.set(this.program),q.setDepthMode(d),q.setStencilMode(y),q.setColorMode(S)}checkUniforms(l,d,y){if(this.fixedDefines.includes(d)){for(const S of Object.keys(y))if(!y[S].initialized)throw new Error(`Program '${this.name}', from draw '${l}': uniform ${S} not set but required by ${d} being defined`)}}draw(l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae,he){const me=l.context,Ie=me.gl;if(this.failedToCreate)return;me.program.set(this.program),me.setDepthMode(y),me.setStencilMode(S),me.setColorMode(T),me.setCullFace(I);for(const Ye of Object.keys(this.fixedUniforms))this.fixedUniforms[Ye].set(this.program,Ye,N[Ye]);de&&de.setUniforms(this.program,me,this.binderUniforms,q,{zoom:ne});const Le={[Ie.POINTS]:1,[Ie.LINES]:2,[Ie.TRIANGLES]:3,[Ie.LINE_STRIP]:1}[d];this.checkUniforms($,"RENDER_SHADOWS",this.shadowUniforms);const De=he&&he>0?1:void 0;for(const Ye of X.get()){const Ne=Ye.vaos||(Ye.vaos={});if((Ne[$]||(Ne[$]=new IE)).bind(me,this,U,de?de.getPaintVertexBuffers():[],H,Ye.vertexOffset,ae||[],De),this.forceManualRenderingForInstanceIDShaders){const Fe=he||1;for(let Be=0;Be<Fe;++Be)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Be),H?Ie.drawElements(d,Ye.primitiveLength*Le,Ie.UNSIGNED_SHORT,Ye.primitiveOffset*Le*2):Ie.drawArrays(d,Ye.vertexOffset,Ye.vertexLength)}else he&&he>1?Ie.drawElementsInstanced(d,Ye.primitiveLength*Le,Ie.UNSIGNED_SHORT,Ye.primitiveOffset*Le*2,he):H?Ie.drawElements(d,Ye.primitiveLength*Le,Ie.UNSIGNED_SHORT,Ye.primitiveOffset*Le*2):Ie.drawArrays(d,Ye.vertexOffset,Ye.vertexLength);d===Ie.TRIANGLES&&H&&this._drawDebugWireframe(l,y,S,T,H,Ye,q,ne,de,he)}}}function Db(v,l){const d=Math.pow(2,l.tileID.overscaledZ),y=l.tileSize*Math.pow(2,v.transform.tileZoom)/d,S=y*(l.tileID.canonical.x+l.tileID.wrap*d),T=y*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture?l.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/i.at(l,1,v.transform.tileZoom),u_pixel_coord_upper:[S>>16,T>>16],u_pixel_coord_lower:[65535&S,65535&T]}}const Jy={terrain:0,flat:1},Rb=i.ad.mat4.create(),Qy=(v,l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae,he,me)=>{const Ie=l.style.light,Le=Ie.properties.get("position"),De=[Le.x,Le.y,Le.z],Ye=i.ad.mat3.create();Ie.properties.get("anchor")==="viewport"&&(i.ad.mat3.fromRotation(Ye,-l.transform.angle),i.ad.vec3.transformMat3(De,De,Ye));const Ne=Ie.properties.get("color"),Fe=l.transform,Be={u_matrix:v,u_lightpos:De,u_lightintensity:Ie.properties.get("intensity"),u_lightcolor:[Ne.r,Ne.g,Ne.b],u_vertical_gradient:+d,u_opacity:y,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Rb,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:Jy[U],u_base_type:Jy[H],u_ao:S,u_edge_radius:T,u_width_scale:I,u_flood_light_color:de,u_vertical_scale:ae,u_flood_light_intensity:he,u_ground_shadow_factor:me};return Fe.projection.name==="globe"&&(Be.u_tile_id=[N.canonical.x,N.canonical.y,1<<N.canonical.z],Be.u_zoom_transition=X,Be.u_inv_rot_matrix=ne,Be.u_merc_center=q,Be.u_up_dir=Fe.projection.upVector(new i.bT(0,0,0),q[0]*i.ai,q[1]*i.ai),Be.u_height_lift=$),Be},tp=(v,l,d,y,S,T)=>({u_matrix:v,u_edge_radius:l,u_width_scale:d,u_vertical_scale:y,u_height_type:Jy[S],u_base_type:Jy[T]}),kb=(v,l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae,he)=>{const me=Qy(v,l,d,y,S,T,I,N,U,H,X,q,ne,de,ae,he,1,[0,0,0]),Ie={u_height_factor:-Math.pow(2,N.overscaledZ)/$.tileSize/8};return i.l(me,Db(l,$),Ie)},np=(v,l)=>({u_matrix:v,u_emissive_strength:l}),Lb=(v,l,d,y)=>i.l(np(v,l),Db(d,y)),ev=(v,l,d)=>({u_matrix:v,u_world:d,u_emissive_strength:l}),tv=(v,l,d,y,S)=>i.l(Lb(v,l,d,y),{u_world:S}),Mg=(v,l,d,y,S)=>({u_matrix:v,u_camera_pos:[l[0],l[1],l[2]],u_depth_bias:d,u_height_scale:y,u_reset_depth:S}),jE=(v,l,d,y)=>{const S=i.ai/d.tileSize;return{u_matrix:v,u_camera_to_center_distance:l.getCameraToCenterDistance(y),u_extrude_scale:[l.pixelsToGLUnits[0]/S,l.pixelsToGLUnits[1]/S]}},UE=(v,l,d=1)=>({u_matrix:v,u_color:l.toRenderColor(null),u_overlay:0,u_overlay_scale:d}),rp=i.ad.mat4.create(),nv=(v,l,d,y,S,T,I)=>{const N=v.transform,$=N.projection.name==="globe",U=$?i.cO(N.zoom,l.canonical)*N._pixelsPerMercatorPixel:i.at(d,1,T),H={u_matrix:l.projMatrix,u_extrude_scale:U,u_intensity:I,u_inv_rot_matrix:rp,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if($){H.u_inv_rot_matrix=y,H.u_merc_center=S,H.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],H.u_zoom_transition=i.ag(N.zoom);const X=S[0]*i.ai,q=S[1]*i.ai;H.u_up_dir=N.projection.upVector(new i.bT(0,0,0),X,q)}return H};function An(v,[l,d,y,S],[T,I]){if(T===I)return[0,0,0,0];const N=255*(v-1)/(v*(I-T));return[l*N,d*N,y*N,S*N]}function Nb(v,l,[d,y]){return d===y?0:.5/v+(l-d)*(v-1)/(v*(y-d))}const Fb=(v,l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae,he,me,Ie,Le,De)=>({u_matrix:v,u_normalize_matrix:l,u_globe_matrix:d,u_merc_matrix:y,u_grid_matrix:S,u_tl_parent:T,u_scale_parent:U,u_fade_t:H.mix,u_opacity:H.opacity*X.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:X.paint.get("raster-brightness-min"),u_brightness_high:X.paint.get("raster-brightness-max"),u_saturation_factor:i.cP(X.paint.get("raster-saturation")),u_contrast_factor:i.cQ(X.paint.get("raster-contrast")),u_spin_weights:gd(X.paint.get("raster-hue-rotate")),u_perspective_transform:q,u_raster_elevation:ne,u_zoom_transition:I,u_merc_center:N,u_cutoff_params:$,u_colorization_mix:An(i.cR,ae,me),u_colorization_offset:Nb(i.cR,he,me),u_color_ramp:de,u_texture_offset:[Le/(Ie+2*Le),Ie/(Ie+2*Le)],u_texture_res:[Ie+2*Le,Ie+2*Le],u_emissive_strength:De});function gd(v){v*=Math.PI/180;const l=Math.sin(v),d=Math.cos(v);return[(2*d+1)/3,(-Math.sqrt(3)*l-d+1)/3,(Math.sqrt(3)*l-d+1)/3]}const nl=.05,Bn=(v,l,d,y,S,T,I,N,$,U,H,X)=>({u_matrix:v,u_normalize_matrix:l,u_globe_matrix:d,u_merc_matrix:y,u_grid_matrix:S,u_tl_parent:T,u_scale_parent:U,u_fade_t:H.mix,u_opacity:H.opacity,u_image0:0,u_image1:1,u_raster_elevation:X,u_zoom_transition:I,u_merc_center:N,u_cutoff_params:$}),zb=(v,l,d,y,S,T,I,N,$,U)=>({u_particle_texture:v,u_particle_texture_side_len:l,u_tile_offset:d,u_velocity:y,u_color_ramp:T,u_velocity_res:S,u_max_speed:I,u_uv_offset:N,u_data_scale:[255*$[0],255*$[1]],u_data_offset:U,u_particle_pos_scale:1.1,u_particle_pos_offset:[nl,nl]}),UO=(v,l,d,y,S,T,I,N,$,U)=>({u_particle_texture:v,u_particle_texture_side_len:l,u_velocity:d,u_velocity_res:y,u_max_speed:S,u_speed_factor:T,u_reset_rate:I,u_rand_seed:Math.random(),u_uv_offset:N,u_data_scale:[255*$[0],255*$[1]],u_data_offset:U,u_particle_pos_scale:1.1,u_particle_pos_offset:[nl,nl]}),HE=i.ad.mat4.create(),rv=(v,l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae,he,me,Ie,Le,De,Ye)=>{const Ne=S.transform,Fe={u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Ne.getCameraToCenterDistance(Ie),u_rotate_symbol:+d,u_aspect_ratio:Ne.width/Ne.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:I,u_coord_matrix:N,u_is_text:+U,u_elevation_from_sea:$?1:0,u_pitch_with_map:+y,u_texsize:H,u_texsize_icon:X,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:HE,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:HE,u_up_vector:[0,-1,0],u_color_adj_mat:Le,u_icon_transition:De||0,u_gamma_scale:y?S.transform.getCameraToCenterDistance(Ie)*Math.cos(S.terrain?0:S.transform._pitch):1,u_device_pixel_ratio:i.q.devicePixelRatio,u_is_halo:1,u_scale_factor:Ye||1};return Ie.name==="globe"&&(Fe.u_tile_id=[ne.canonical.x,ne.canonical.y,1<<ne.canonical.z],Fe.u_zoom_transition=de,Fe.u_inv_rot_matrix=he,Fe.u_merc_center=ae,Fe.u_camera_forward=Ne._camera.forward(),Fe.u_ecef_origin=i.cS(Ne.globeMatrix,ne.toUnwrapped()),Fe.u_tile_matrix=Float32Array.from(Ne.globeMatrix),Fe.u_up_vector=me),Fe},Bb=(v,l,d,y)=>({u_matrix:v,u_emissive_strength:l,u_opacity:d,u_color:y}),WE=(v,l,d,y,S,T,I,N,$)=>i.l((function(U,H,X,q,ne,de){const{width:ae,height:he}=q.imageManager.getPixelSize(H),me=Math.pow(2,de.tileID.overscaledZ),Ie=de.tileSize*Math.pow(2,q.transform.tileZoom)/me,Le=Ie*(de.tileID.canonical.x+de.tileID.wrap*me),De=Ie*de.tileID.canonical.y;return{u_image:0,u_pattern_tl:X.tl,u_pattern_br:X.br,u_texsize:[ae,he],u_pattern_size:X.displaySize,u_pattern_units_to_pixels:ne?[q.transform.width,-1*q.transform.height]:[1/i.at(de,1,q.transform.tileZoom),1/i.at(de,1,q.transform.tileZoom)],u_pixel_coord_upper:[Le>>16,De>>16],u_pixel_coord_lower:[65535&Le,65535&De]}})(0,T,I,y,N,$),{u_matrix:v,u_emissive_strength:l,u_opacity:d}),iv=new Float32Array(i.ad.mat4.identity([])),$b=(v,l,d,y,S,T,I,N,$,U,H,X,q,ne=[0,0,0],de)=>{const ae=S.style.light,he=ae.properties.get("position"),me=[-he.x,-he.y,he.z],Ie=i.ad.mat3.create();ae.properties.get("anchor")==="viewport"&&(i.ad.mat3.fromRotation(Ie,-S.transform.angle),i.ad.vec3.transformMat3(me,me,Ie));const Le=H.alphaMode==="MASK",De=ae.properties.get("color").toRenderColor(null),Ye=q.paint.get("model-ambient-occlusion-intensity"),Ne=q.paint.get("model-color").constantOr(i.al.white).toRenderColor(null),Fe=q.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:v,u_lighting_matrix:l,u_normal_matrix:d,u_node_matrix:y||iv,u_lightpos:me,u_lightintensity:ae.properties.get("intensity"),u_lightcolor:[De.r,De.g,De.b],u_camera_pos:ne,u_opacity:T,u_baseTextureIsAlpha:0,u_alphaMask:+Le,u_alphaCutoff:H.alphaCutoff,u_baseColorFactor:[I.r,I.g,I.b,I.a],u_emissiveFactor:[N[0],N[1],N[2],1],u_metallicFactor:$,u_roughnessFactor:U,u_baseColorTexture:ls.BaseColor,u_metallicRoughnessTexture:ls.MetallicRoughness,u_normalTexture:ls.Normal,u_occlusionTexture:ls.Occlusion,u_emissionTexture:ls.Emission,u_lutTexture:ls.LUT,u_color_mix:[Ne.r,Ne.g,Ne.b,Fe],u_aoIntensity:Ye,u_emissive_strength:X,u_occlusionTextureTransform:de||[0,0,0,0]}},GE=(v,l=iv,d=iv)=>({u_matrix:v,u_instance:l,u_node_matrix:d}),Vb={fillExtrusion:v=>({u_matrix:new i.bJ(v),u_lightpos:new i.bL(v),u_lightintensity:new i.bM(v),u_lightcolor:new i.bL(v),u_vertical_gradient:new i.bM(v),u_opacity:new i.bM(v),u_edge_radius:new i.bM(v),u_width_scale:new i.bM(v),u_ao:new i.bK(v),u_height_type:new i.bN(v),u_base_type:new i.bN(v),u_tile_id:new i.bL(v),u_zoom_transition:new i.bM(v),u_inv_rot_matrix:new i.bJ(v),u_merc_center:new i.bK(v),u_up_dir:new i.bL(v),u_height_lift:new i.bM(v),u_flood_light_color:new i.bL(v),u_vertical_scale:new i.bM(v),u_flood_light_intensity:new i.bM(v),u_ground_shadow_factor:new i.bL(v)}),fillExtrusionDepth:v=>({u_matrix:new i.bJ(v),u_edge_radius:new i.bM(v),u_width_scale:new i.bM(v),u_vertical_scale:new i.bM(v),u_height_type:new i.bN(v),u_base_type:new i.bN(v)}),fillExtrusionPattern:v=>({u_matrix:new i.bJ(v),u_lightpos:new i.bL(v),u_lightintensity:new i.bM(v),u_lightcolor:new i.bL(v),u_vertical_gradient:new i.bM(v),u_height_factor:new i.bM(v),u_edge_radius:new i.bM(v),u_width_scale:new i.bM(v),u_ao:new i.bK(v),u_height_type:new i.bN(v),u_base_type:new i.bN(v),u_tile_id:new i.bL(v),u_zoom_transition:new i.bM(v),u_inv_rot_matrix:new i.bJ(v),u_merc_center:new i.bK(v),u_up_dir:new i.bL(v),u_height_lift:new i.bM(v),u_image:new i.bN(v),u_texsize:new i.bK(v),u_pixel_coord_upper:new i.bK(v),u_pixel_coord_lower:new i.bK(v),u_tile_units_to_pixels:new i.bM(v),u_opacity:new i.bM(v)}),fillExtrusionGroundEffect:v=>({u_matrix:new i.bJ(v),u_opacity:new i.bM(v),u_ao_pass:new i.bM(v),u_meter_to_tile:new i.bM(v),u_ao:new i.bK(v),u_flood_light_intensity:new i.bM(v),u_flood_light_color:new i.bL(v),u_attenuation:new i.bM(v),u_edge_radius:new i.bM(v),u_fb:new i.bN(v),u_fb_size:new i.bM(v),u_dynamic_offset:new i.bM(v)}),fill:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v)}),fillPattern:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v),u_image:new i.bN(v),u_texsize:new i.bK(v),u_pixel_coord_upper:new i.bK(v),u_pixel_coord_lower:new i.bK(v),u_tile_units_to_pixels:new i.bM(v)}),fillOutline:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v),u_world:new i.bK(v)}),fillOutlinePattern:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v),u_world:new i.bK(v),u_image:new i.bN(v),u_texsize:new i.bK(v),u_pixel_coord_upper:new i.bK(v),u_pixel_coord_lower:new i.bK(v),u_tile_units_to_pixels:new i.bM(v)}),elevatedStructures:v=>({u_matrix:new i.bJ(v)}),elevatedStructuresDepthReconstruct:v=>({u_matrix:new i.bJ(v),u_camera_pos:new i.bL(v),u_depth_bias:new i.bM(v),u_height_scale:new i.bM(v),u_reset_depth:new i.bM(v)}),circle:i.cT,collisionBox:v=>({u_matrix:new i.bJ(v),u_camera_to_center_distance:new i.bM(v),u_extrude_scale:new i.bK(v)}),collisionCircle:v=>({u_matrix:new i.bJ(v),u_inv_matrix:new i.bJ(v),u_camera_to_center_distance:new i.bM(v),u_viewport_size:new i.bK(v)}),debug:v=>({u_color:new i.cA(v),u_matrix:new i.bJ(v),u_overlay:new i.bN(v),u_overlay_scale:new i.bM(v)}),clippingMask:v=>({u_matrix:new i.bJ(v)}),heatmap:v=>({u_extrude_scale:new i.bM(v),u_intensity:new i.bM(v),u_matrix:new i.bJ(v),u_inv_rot_matrix:new i.bJ(v),u_merc_center:new i.bK(v),u_tile_id:new i.bL(v),u_zoom_transition:new i.bM(v),u_up_dir:new i.bL(v)}),heatmapTexture:v=>({u_image:new i.bN(v),u_color_ramp:new i.bN(v),u_opacity:new i.bM(v)}),hillshade:v=>({u_matrix:new i.bJ(v),u_image:new i.bN(v),u_latrange:new i.bK(v),u_light:new i.bK(v),u_shadow:new i.cA(v),u_highlight:new i.cA(v),u_emissive_strength:new i.bM(v),u_accent:new i.cA(v)}),hillshadePrepare:v=>({u_matrix:new i.bJ(v),u_image:new i.bN(v),u_dimension:new i.bK(v),u_zoom:new i.bM(v)}),line:i.cU,linePattern:i.cV,raster:v=>({u_matrix:new i.bJ(v),u_normalize_matrix:new i.bJ(v),u_globe_matrix:new i.bJ(v),u_merc_matrix:new i.bJ(v),u_grid_matrix:new i.cB(v),u_tl_parent:new i.bK(v),u_scale_parent:new i.bM(v),u_fade_t:new i.bM(v),u_opacity:new i.bM(v),u_image0:new i.bN(v),u_image1:new i.bN(v),u_brightness_low:new i.bM(v),u_brightness_high:new i.bM(v),u_saturation_factor:new i.bM(v),u_contrast_factor:new i.bM(v),u_spin_weights:new i.bL(v),u_perspective_transform:new i.bK(v),u_raster_elevation:new i.bM(v),u_zoom_transition:new i.bM(v),u_merc_center:new i.bK(v),u_cutoff_params:new i.cb(v),u_colorization_mix:new i.cb(v),u_colorization_offset:new i.bM(v),u_color_ramp:new i.bN(v),u_texture_offset:new i.bK(v),u_texture_res:new i.bK(v),u_emissive_strength:new i.bM(v)}),rasterParticle:v=>({u_matrix:new i.bJ(v),u_normalize_matrix:new i.bJ(v),u_globe_matrix:new i.bJ(v),u_merc_matrix:new i.bJ(v),u_grid_matrix:new i.cB(v),u_tl_parent:new i.bK(v),u_scale_parent:new i.bM(v),u_fade_t:new i.bM(v),u_opacity:new i.bM(v),u_image0:new i.bN(v),u_image1:new i.bN(v),u_raster_elevation:new i.bM(v),u_zoom_transition:new i.bM(v),u_merc_center:new i.bK(v),u_cutoff_params:new i.cb(v)}),rasterParticleTexture:v=>({u_texture:new i.bN(v),u_opacity:new i.bM(v)}),rasterParticleDraw:v=>({u_particle_texture:new i.bN(v),u_particle_texture_side_len:new i.bM(v),u_tile_offset:new i.bK(v),u_velocity:new i.bN(v),u_color_ramp:new i.bN(v),u_velocity_res:new i.bK(v),u_max_speed:new i.bM(v),u_uv_offset:new i.bK(v),u_data_scale:new i.bK(v),u_data_offset:new i.bM(v),u_particle_pos_scale:new i.bM(v),u_particle_pos_offset:new i.bK(v)}),rasterParticleUpdate:v=>({u_particle_texture:new i.bN(v),u_particle_texture_side_len:new i.bM(v),u_velocity:new i.bN(v),u_velocity_res:new i.bK(v),u_max_speed:new i.bM(v),u_speed_factor:new i.bM(v),u_reset_rate:new i.bM(v),u_rand_seed:new i.bM(v),u_uv_offset:new i.bK(v),u_data_scale:new i.bK(v),u_data_offset:new i.bM(v),u_particle_pos_scale:new i.bM(v),u_particle_pos_offset:new i.bK(v)}),symbol:v=>({u_is_size_zoom_constant:new i.bN(v),u_is_size_feature_constant:new i.bN(v),u_size_t:new i.bM(v),u_size:new i.bM(v),u_camera_to_center_distance:new i.bM(v),u_rotate_symbol:new i.bN(v),u_aspect_ratio:new i.bM(v),u_fade_change:new i.bM(v),u_matrix:new i.bJ(v),u_label_plane_matrix:new i.bJ(v),u_coord_matrix:new i.bJ(v),u_is_text:new i.bN(v),u_elevation_from_sea:new i.bN(v),u_pitch_with_map:new i.bN(v),u_texsize:new i.bK(v),u_texsize_icon:new i.bK(v),u_texture:new i.bN(v),u_texture_icon:new i.bN(v),u_gamma_scale:new i.bM(v),u_device_pixel_ratio:new i.bM(v),u_tile_id:new i.bL(v),u_zoom_transition:new i.bM(v),u_inv_rot_matrix:new i.bJ(v),u_merc_center:new i.bK(v),u_camera_forward:new i.bL(v),u_tile_matrix:new i.bJ(v),u_up_vector:new i.bL(v),u_ecef_origin:new i.bL(v),u_is_halo:new i.bN(v),u_icon_transition:new i.bM(v),u_color_adj_mat:new i.bJ(v),u_scale_factor:new i.bM(v)}),background:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v),u_opacity:new i.bM(v),u_color:new i.cA(v)}),backgroundPattern:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v),u_opacity:new i.bM(v),u_image:new i.bN(v),u_pattern_tl:new i.bK(v),u_pattern_br:new i.bK(v),u_texsize:new i.bK(v),u_pattern_size:new i.bK(v),u_pixel_coord_upper:new i.bK(v),u_pixel_coord_lower:new i.bK(v),u_pattern_units_to_pixels:new i.bK(v)}),terrainRaster:v=>({u_matrix:new i.bJ(v),u_image0:new i.bN(v),u_skirt_height:new i.bM(v),u_ground_shadow_factor:new i.bL(v)}),skybox:v=>({u_matrix:new i.bJ(v),u_sun_direction:new i.bL(v),u_cubemap:new i.bN(v),u_opacity:new i.bM(v),u_temporal_offset:new i.bM(v)}),skyboxGradient:v=>({u_matrix:new i.bJ(v),u_color_ramp:new i.bN(v),u_center_direction:new i.bL(v),u_radius:new i.bM(v),u_opacity:new i.bM(v),u_temporal_offset:new i.bM(v)}),skyboxCapture:v=>({u_matrix_3f:new i.cB(v),u_sun_direction:new i.bL(v),u_sun_intensity:new i.bM(v),u_color_tint_r:new i.cb(v),u_color_tint_m:new i.cb(v),u_luminance:new i.bM(v)}),globeRaster:v=>({u_proj_matrix:new i.bJ(v),u_globe_matrix:new i.bJ(v),u_normalize_matrix:new i.bJ(v),u_merc_matrix:new i.bJ(v),u_zoom_transition:new i.bM(v),u_merc_center:new i.bK(v),u_image0:new i.bN(v),u_grid_matrix:new i.cB(v),u_skirt_height:new i.bM(v),u_far_z_cutoff:new i.bM(v),u_frustum_tl:new i.bL(v),u_frustum_tr:new i.bL(v),u_frustum_br:new i.bL(v),u_frustum_bl:new i.bL(v),u_globe_pos:new i.bL(v),u_globe_radius:new i.bM(v),u_viewport:new i.bK(v)}),globeAtmosphere:v=>({u_frustum_tl:new i.bL(v),u_frustum_tr:new i.bL(v),u_frustum_br:new i.bL(v),u_frustum_bl:new i.bL(v),u_horizon:new i.bM(v),u_transition:new i.bM(v),u_fadeout_range:new i.bM(v),u_color:new i.cb(v),u_high_color:new i.cb(v),u_space_color:new i.cb(v),u_temporal_offset:new i.bM(v),u_horizon_angle:new i.bM(v)}),model:v=>({u_matrix:new i.bJ(v),u_lighting_matrix:new i.bJ(v),u_normal_matrix:new i.bJ(v),u_node_matrix:new i.bJ(v),u_lightpos:new i.bL(v),u_lightintensity:new i.bM(v),u_lightcolor:new i.bL(v),u_camera_pos:new i.bL(v),u_opacity:new i.bM(v),u_baseColorFactor:new i.cb(v),u_emissiveFactor:new i.cb(v),u_metallicFactor:new i.bM(v),u_roughnessFactor:new i.bM(v),u_baseTextureIsAlpha:new i.bN(v),u_alphaMask:new i.bN(v),u_alphaCutoff:new i.bM(v),u_baseColorTexture:new i.bN(v),u_metallicRoughnessTexture:new i.bN(v),u_normalTexture:new i.bN(v),u_occlusionTexture:new i.bN(v),u_emissionTexture:new i.bN(v),u_lutTexture:new i.bN(v),u_color_mix:new i.cb(v),u_aoIntensity:new i.bM(v),u_emissive_strength:new i.bM(v),u_occlusionTextureTransform:new i.cb(v)}),modelDepth:v=>({u_matrix:new i.bJ(v),u_instance:new i.bJ(v),u_node_matrix:new i.bJ(v)}),groundShadow:v=>({u_matrix:new i.bJ(v),u_ground_shadow_factor:new i.bL(v)}),stars:v=>({u_matrix:new i.bJ(v),u_up:new i.bL(v),u_right:new i.bL(v),u_intensity_multiplier:new i.bM(v)}),snowParticle:v=>({u_modelview:new i.bJ(v),u_projection:new i.bJ(v),u_time:new i.bM(v),u_cam_pos:new i.bL(v),u_velocityConeAperture:new i.bM(v),u_velocity:new i.bM(v),u_horizontalOscillationRadius:new i.bM(v),u_horizontalOscillationRate:new i.bM(v),u_boxSize:new i.bM(v),u_billboardSize:new i.bM(v),u_simpleShapeParameters:new i.bK(v),u_screenSize:new i.bK(v),u_thinningCenterPos:new i.bK(v),u_thinningShape:new i.bL(v),u_thinningAffectedRatio:new i.bM(v),u_thinningParticleOffset:new i.bM(v),u_particleColor:new i.cb(v),u_direction:new i.bL(v)}),rainParticle:v=>({u_modelview:new i.bJ(v),u_projection:new i.bJ(v),u_time:new i.bM(v),u_cam_pos:new i.bL(v),u_texScreen:new i.bN(v),u_velocityConeAperture:new i.bM(v),u_velocity:new i.bM(v),u_boxSize:new i.bM(v),u_rainDropletSize:new i.bK(v),u_distortionStrength:new i.bM(v),u_rainDirection:new i.bL(v),u_color:new i.cb(v),u_screenSize:new i.bK(v),u_thinningCenterPos:new i.bK(v),u_thinningShape:new i.bL(v),u_thinningAffectedRatio:new i.bM(v),u_thinningParticleOffset:new i.bM(v),u_shapeDirectionalPower:new i.bM(v),u_shapeNormalPower:new i.bM(v),u_mode:new i.bM(v)}),vignette:v=>({u_vignetteShape:new i.bL(v),u_vignetteColor:new i.cb(v)}),occlusion:v=>({u_matrix:new i.bJ(v),u_anchorPos:new i.bL(v),u_screenSizePx:new i.bK(v),u_occluderSizePx:new i.bK(v),u_color:new i.cb(v)})};class Rc{constructor(l,d,y,S){this.id=Rc.uniqueIdxCounter,Rc.uniqueIdxCounter++,this.context=l;const T=l.gl;this.buffer=T.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),T.bufferData(T.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||S||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){this.id=Rc.uniqueIdxCounter,Rc.uniqueIdxCounter++;const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Rc.uniqueIdxCounter=0;const jb={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ub{constructor(l,d,y,S,T,I){this.length=d.length,this.attributes=y,this.itemSize=d.bytesPerElement,this.dynamicDraw=S,this.instanceCount=I,this.context=l;const N=l.gl;this.buffer=N.createBuffer(),l.bindVertexBuffer.set(this.buffer),N.bufferData(N.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?N.DYNAMIC_DRAW:N.STATIC_DRAW),this.dynamicDraw||T||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,d){for(let y=0;y<this.attributes.length;y++){const S=d.attributes[this.attributes[y].name];S!==void 0&&l.enableVertexAttribArray(S)}}setVertexAttribPointers(l,d,y){for(let S=0;S<this.attributes.length;S++){const T=this.attributes[S],I=d.attributes[T.name];I!==void 0&&l.vertexAttribPointer(I,T.components,l[jb[T.type]],!1,this.itemSize,T.offset+this.itemSize*(y||0))}}setVertexAttribDivisor(l,d,y){for(let S=0;S<this.attributes.length;S++){const T=d.attributes[this.attributes[S].name];T!==void 0&&this.instanceCount&&this.instanceCount>0&&l.vertexAttribDivisor(T,y)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ha{constructor(l,d,y,S,T){this.context=l,this.width=d,this.height=y;const I=this.framebuffer=l.gl.createFramebuffer();S&&(this.colorAttachment=new Mb(l,I)),T&&(this.depthAttachmentType=T,this.depthAttachment=T==="renderbuffer"?new Ab(l,I):new Qf(l,I))}destroy(){const l=this.context.gl;if(this.colorAttachment){const d=this.colorAttachment.get();d&&l.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const d=this.depthAttachment.get();d&&l.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&l.deleteTexture(d)}l.deleteFramebuffer(this.framebuffer)}}class _d{constructor(l,d){this.gl=l,this.clearColor=new kO(this),this.clearDepth=new gb(this),this.clearStencil=new _b(this),this.colorMask=new yb(this),this.depthMask=new vb(this),this.stencilMask=new OE(this),this.stencilFunc=new DE(this),this.stencilOp=new LO(this),this.stencilTest=new wg(this),this.depthRange=new Sg(this),this.depthTest=new RE(this),this.depthFunc=new tl(this),this.blend=new bb(this),this.blendFunc=new Wy(this),this.blendColor=new Gy(this),this.blendEquation=new xb(this),this.cullFace=new wb(this),this.cullFaceSide=new Sb(this),this.frontFace=new Yy(this),this.program=new Eb(this),this.activeTexture=new Tb(this),this.viewport=new qy(this),this.bindFramebuffer=new kE(this),this.bindRenderbuffer=new LE(this),this.bindTexture=new Jf(this),this.bindVertexBuffer=new NO(this),this.bindElementBuffer=new FO(this),this.bindVertexArrayOES=new zO(this),this.pixelStoreUnpack=new BO(this),this.pixelStoreUnpackPremultiplyAlpha=new $O(this),this.pixelStoreUnpackFlipY=new VO(this),this.options=d?Object.assign({},d):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=d&&!!d.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=l.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),this.maxPointSize=l.getParameter(l.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,d,y){return new Rc(this,l,d,y)}createVertexBuffer(l,d,y,S,T){return new Ub(this,l,d,y,S,T)}createRenderbuffer(l,d,y){const S=this.gl,T=S.createRenderbuffer();return this.bindRenderbuffer.set(T),S.renderbufferStorage(S.RENDERBUFFER,l,d,y),this.bindRenderbuffer.set(null),T}createFramebuffer(l,d,y,S){return new ha(this,l,d,y,S)}clear({color:l,depth:d,stencil:y,colorMask:S}){const T=this.gl;let I=0;l&&(I|=T.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set(S||[!0,!0,!0,!0])),d!==void 0&&(I|=T.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),y!==void 0&&(I|=T.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),T.clear(I)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){i.bn(l.blendFunction,br.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor),l.blendEquation?this.blendEquation.set(l.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(l.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let Ag;function sv(v,l,d,y,S,T,I){const N=v.context,$=N.gl,U=v.transform,H=v.getOrCreateProgram("collisionBox"),X=[];let q=0,ne=0;for(let De=0;De<y.length;De++){const Ye=y[De],Ne=l.getTile(Ye),Fe=Ne.getBucket(d);if(!Fe)continue;const Be=ab(Ye,Fe,U);let Qe=Be;S[0]===0&&S[1]===0||(Qe=v.translatePosMatrix(Be,Ne,S,T));const tt=I?Fe.textCollisionBox:Fe.iconCollisionBox,Ot=Fe.collisionCircleArray;if(Ot.length>0){const bt=i.ad.mat4.create(),Ht=Qe;i.ad.mat4.mul(bt,Fe.placementInvProjMatrix,U.glCoordMatrix),i.ad.mat4.mul(bt,bt,Fe.placementViewportMatrix),X.push({circleArray:Ot,circleOffset:ne,transform:Ht,invTransform:bt,projection:Fe.getProjection()}),q+=Ot.length/4,ne=q}tt&&(v.terrain&&v.terrain.setupElevationDraw(Ne,H),H.draw(v,$.LINES,zn.disabled,or.disabled,v.colorModeForRenderPass(),nr.disabled,jE(Qe,U,Ne,Fe.getProjection()),d.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,null,U.zoom,null,[tt.collisionVertexBuffer,tt.collisionVertexBufferExt]))}if(!I||!X.length)return;const de=v.getOrCreateProgram("collisionCircle"),ae=new i.cW;ae.resize(4*q),ae._trim();let he=0;for(const De of X)for(let Ye=0;Ye<De.circleArray.length/4;Ye++){const Ne=4*Ye,Fe=De.circleArray[Ne+0],Be=De.circleArray[Ne+1],Qe=De.circleArray[Ne+2],tt=De.circleArray[Ne+3];ae.emplace(he++,Fe,Be,Qe,tt,0),ae.emplace(he++,Fe,Be,Qe,tt,1),ae.emplace(he++,Fe,Be,Qe,tt,2),ae.emplace(he++,Fe,Be,Qe,tt,3)}(!Ag||Ag.length<2*q)&&(Ag=(function(De){const Ye=2*De,Ne=new i.aV;Ne.resize(Ye),Ne._trim();for(let Fe=0;Fe<Ye;Fe++){const Be=6*Fe;Ne.uint16[Be+0]=4*Fe+0,Ne.uint16[Be+1]=4*Fe+1,Ne.uint16[Be+2]=4*Fe+2,Ne.uint16[Be+3]=4*Fe+2,Ne.uint16[Be+4]=4*Fe+3,Ne.uint16[Be+5]=4*Fe+0}return Ne})(q));const me=N.createIndexBuffer(Ag,!0),Ie=N.createVertexBuffer(ae,i.cX.members,!0);for(const De of X){const Ye={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(Le=U).getCameraToCenterDistance(De.projection),u_viewport_size:[Le.width,Le.height]};de.draw(v,$.TRIANGLES,zn.disabled,or.disabled,v.colorModeForRenderPass(),nr.disabled,Ye,d.id,Ie,me,i.b8.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,U.zoom)}var Le;Ie.destroy(),me.destroy()}const ip=i.ad.mat4.create();function ov(v){const l=v._camera.getWorldToCamera(v.worldSize,1),d=i.ad.mat4.multiply([],l,v.globeMatrix);i.ad.mat4.invert(d,d);const y=[0,0,0],S=[0,1,0,0];return i.ad.vec4.transformMat4(S,S,d),y[0]=S[0],y[1]=S[1],y[2]=S[2],i.ad.vec3.normalize(y,y),y}function YE({width:v,height:l,anchor:d,textOffset:y,textScale:S},T){const{horizontalAlign:I,verticalAlign:N}=i.bD(d),$=-(I-.5)*v,U=-(N-.5)*l,H=i.bC(d,y);return new i.P(($/S+H[0])*T,(U/S+H[1])*T)}function Ll(v,l,d,y,S,T,I,N,$,U,H){const X=v.text.placedSymbolArray,q=v.text.dynamicLayoutVertexArray,ne=v.icon.dynamicLayoutVertexArray,de={},ae=v.getProjection(),he=el(N,ae,T),me=T.elevation,Ie=ae.upVectorScale(N.canonical,T.center.lat,T.worldSize).metersToTile;q.clear();for(let Le=0;Le<X.length;Le++){const De=X.get(Le),{tileAnchorX:Ye,tileAnchorY:Ne,numGlyphs:Fe}=De,Be=De.hidden||!De.crossTileID||v.allowVerticalPlacement&&!De.placedOrientation?null:y[De.crossTileID];if(Be){let Qe=0,tt=0,Ot=0;if(me){const Bt=me?me.getAtTileOffset(N,Ye,Ne):0,[Gt,Dt,qt]=ae.upVector(N.canonical,Ye,Ne);Qe=Bt*Gt*Ie,tt=Bt*Dt*Ie,Ot=Bt*qt*Ie}let[bt,Ht,Wt,sn]=oc(De.projectedAnchorX+Qe,De.projectedAnchorY+tt,De.projectedAnchorZ+Ot,d?he:I);const gt=$f(T.getCameraToCenterDistance(ae),sn);let Ut=S.evaluateSizeForFeature(v.textSizeData,U,De)*gt/i.bw;d&&(Ut*=v.tilePixelRatio/$);const ft=YE(Be,Ut);d?({x:bt,y:Ht,z:Wt}=ae.projectTilePoint(Ye+ft.x,Ne+ft.y,N.canonical),[bt,Ht,Wt]=oc(bt+Qe,Ht+tt,Wt+Ot,I)):(l&&ft._rotate(-T.angle),bt+=ft.x,Ht+=ft.y,Wt=0);const jt=v.allowVerticalPlacement&&De.placedOrientation===i.bq.vertical?Math.PI/2:0;for(let Bt=0;Bt<Fe;Bt++)i.bt(q,bt,Ht,Wt,jt);H&&De.associatedIconIndex>=0&&(de[De.associatedIconIndex]={x:bt,y:Ht,z:Wt,angle:jt})}else ac(Fe,q)}if(H){ne.clear();const Le=v.icon.placedSymbolArray;for(let De=0;De<Le.length;De++){const Ye=Le.get(De),{numGlyphs:Ne}=Ye,Fe=de[De];if(Ye.hidden||!Fe)ac(Ne,ne);else{const{x:Be,y:Qe,z:tt,angle:Ot}=Fe;for(let bt=0;bt<Ne;bt++)i.bt(ne,Be,Qe,tt,Ot)}}v.icon.dynamicLayoutVertexBuffer.updateData(ne)}v.text.dynamicLayoutVertexBuffer.updateData(q)}function vi(v,l,d,y,S,T,I={}){const N=d.paint.get("icon-translate"),$=d.paint.get("text-translate"),U=d.paint.get("icon-translate-anchor"),H=d.paint.get("text-translate-anchor"),X=d.layout.get("icon-rotation-alignment"),q=d.layout.get("text-rotation-alignment"),ne=d.layout.get("icon-pitch-alignment"),de=d.layout.get("text-pitch-alignment"),ae=d.layout.get("icon-keep-upright"),he=d.layout.get("text-keep-upright"),me=d.paint.get("icon-color-saturation"),Ie=d.paint.get("icon-color-contrast"),Le=d.paint.get("icon-color-brightness-min"),De=d.paint.get("icon-color-brightness-max"),Ye=d.layout.get("symbol-elevation-reference")==="sea",Ne=v.context,Fe=Ne.gl,Be=v.transform,Qe=X==="map",tt=q==="map",Ot=ne==="map",bt=de==="map",Ht=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Wt=!1;const sn=v.depthModeForSublayer(0,zn.ReadOnly),gt=[i.av(Be.center.lng),i.aC(Be.center.lat)],Ut=d.layout.get("text-variable-anchor"),ft=Be.projection.name==="globe",jt=[],Bt=[0,-1,0];for(const Gt of y){const Dt=l.getTile(Gt),qt=Dt.getBucket(d);if(!qt||qt.projection.name==="mercator"&&ft||qt.fullyClipped)continue;const _n=qt.projection.name==="globe",yn=_n?i.ag(Be.zoom):0,wn=el(Gt,qt.getProjection(),Be),Rn=Be.calculatePixelsToTileUnitsMatrix(Dt),rr=Ut&&qt.hasTextData(),Vn=qt.hasIconTextFit()&&rr&&qt.hasIconData(),er=qt.getProjection().createInversionMatrix(Be,Gt.canonical),Zn=si=>{Be.depthOcclusionForSymbolsAndCircles&&(d.hasInitialOcclusionOpacityProperties||v.terrain)&&(si.push("DEPTH_D24"),si.push("DEPTH_OCCLUSION"))},Mr=()=>{const si=Qe&&d.layout.get("symbol-placement")!=="point",Br=[];Zn(Br);const ss=si||Vn,ws=d.paint.get("icon-image-cross-fade").constantOr(0);v.terrainRenderModeElevated()&&Ot&&Br.push("PITCH_WITH_MAP_TERRAIN"),_n&&(Br.push("PROJECTION_GLOBE_VIEW"),ss&&Br.push("PROJECTED_POS_ON_VIEWPORT")),ws>0&&Br.push("ICON_TRANSITION"),qt.icon.zOffsetVertexBuffer&&Br.push("Z_OFFSET"),me===0&&Ie===0&&Le===0&&De===1||Br.push("COLOR_ADJUSTMENT"),qt.sdfIcons&&Br.push("RENDER_SDF");const Bs=qt.icon.programConfigurations.get(d.id),Xs=v.getOrCreateProgram("symbol",{config:Bs,defines:Br}),sl=Dt.imageAtlasTexture?Dt.imageAtlasTexture.size:[0,0],Wo=qt.iconSizeData,Lr=i.bp(Wo,Be.zoom),Vi=Ot||Be.pitch!==0,Xr=lu(wn,Dt.tileID.canonical,Ot,Qe,Be,qt.getProjection(),Rn),_i=ds(wn,Dt.tileID.canonical,Ot,Qe,Be,qt.getProjection(),Rn),bo=v.translatePosMatrix(_i,Dt,N,U,!0),Li=v.translatePosMatrix(wn,Dt,N,U),$s=ss?ip:Xr,Nc=Qe&&!Ot&&!si;let Da=Bt;!ft&&!Be.mercatorFromTransition||Qe||(Da=ov(Be));const zl=_n?Da:Bt,fa=d.getColorAdjustmentMatrix(me,Ie,Le,De),Bl=rv(Wo.kind,Lr,Nc,Ot,v,Li,$s,bo,Ye,!1,sl,[0,0],!0,Gt,yn,gt,er,zl,qt.getProjection(),fa,ws),Ra=Dt.imageAtlasTexture?Dt.imageAtlasTexture:null,xu=d.layout.get("icon-size").constantOr(0)!==1||qt.iconsNeedLinear,Fc=qt.sdfIcons||v.options.rotating||v.options.zooming||xu||Vi?Fe.LINEAR:Fe.NEAREST,wu=qt.sdfIcons&&d.paint.get("icon-halo-width").constantOr(1)!==0,mx=v.terrain&&Ot&&si?i.ad.mat4.invert(i.ad.mat4.create(),Xr):ip;if(si&&qt.icon){const yp=Be.elevation,Ev=yp?yp.getAtTileOffsetFunc(Gt,Be.center.lat,Be.worldSize,qt.getProjection()):null,gx=Io(wn,Dt.tileID.canonical,Ot,Qe,Be,qt.getProjection(),Rn);Vf(qt,wn,v,!1,gx,_i,Ot,ae,Ev,Gt)}return{program:Xs,buffers:qt.icon,uniformValues:Bl,atlasTexture:Ra,atlasTextureIcon:null,atlasInterpolation:Fc,atlasInterpolationIcon:null,isSDF:qt.sdfIcons,hasHalo:wu,tile:Dt,labelPlaneMatrixInv:mx}},qr=()=>{const si=tt&&d.layout.get("symbol-placement")!=="point",Br=[],ss=si||Ut||Vn;v.terrainRenderModeElevated()&&bt&&Br.push("PITCH_WITH_MAP_TERRAIN"),_n&&(Br.push("PROJECTION_GLOBE_VIEW"),ss&&Br.push("PROJECTED_POS_ON_VIEWPORT")),qt.text.zOffsetVertexBuffer&&Br.push("Z_OFFSET"),qt.iconsInText&&Br.push("RENDER_TEXT_AND_SYMBOL"),Br.push("RENDER_SDF"),Zn(Br);const ws=qt.text.programConfigurations.get(d.id),Bs=v.getOrCreateProgram("symbol",{config:ws,defines:Br});let Xs,sl=[0,0],Wo=null;const Lr=qt.textSizeData;qt.iconsInText&&(sl=Dt.imageAtlasTexture?Dt.imageAtlasTexture.size:[0,0],Wo=Dt.imageAtlasTexture?Dt.imageAtlasTexture:null,Xs=bt||Be.pitch!==0||v.options.rotating||v.options.zooming||Lr.kind==="composite"||Lr.kind==="camera"?Fe.LINEAR:Fe.NEAREST);const Vi=Dt.glyphAtlasTexture?Dt.glyphAtlasTexture.size:[0,0],Xr=d.layout.get("text-size-scale-range"),_i=i.ay(v.scaleFactor,Xr[0],Xr[1]),bo=i.bp(Lr,Be.zoom,_i),Li=lu(wn,Dt.tileID.canonical,bt,tt,Be,qt.getProjection(),Rn),$s=ds(wn,Dt.tileID.canonical,bt,tt,Be,qt.getProjection(),Rn),Nc=v.translatePosMatrix($s,Dt,$,H,!0),Da=v.translatePosMatrix(wn,Dt,$,H),zl=ss?ip:Li,fa=tt&&!bt&&!si;let Bl=Bt;!ft&&!Be.mercatorFromTransition||tt||(Bl=ov(Be));const Ra=rv(Lr.kind,bo,fa,bt,v,Da,zl,Nc,Ye,!0,Vi,sl,!0,Gt,yn,gt,er,_n?Bl:Bt,qt.getProjection(),null,null,_i),xu=Dt.glyphAtlasTexture?Dt.glyphAtlasTexture:null,Fc=Fe.LINEAR,wu=d.paint.get("text-halo-width").constantOr(1)!==0,mx=v.terrain&&bt&&si?i.ad.mat4.invert(i.ad.mat4.create(),Li):ip;if(si&&qt.text){const yp=Be.elevation,Ev=yp?yp.getAtTileOffsetFunc(Gt,Be.center.lat,Be.worldSize,qt.getProjection()):null,gx=Io(wn,Dt.tileID.canonical,bt,tt,Be,qt.getProjection(),Rn);Vf(qt,wn,v,!0,gx,$s,bt,he,Ev,Gt)}return{program:Bs,buffers:qt.text,uniformValues:Ra,atlasTexture:xu,atlasTextureIcon:Wo,atlasInterpolation:Fc,atlasInterpolationIcon:Xs,isSDF:!0,hasHalo:wu,tile:Dt,labelPlaneMatrixInv:mx}},Si=qt.icon.segments.get().length,vr=qt.text.segments.get().length,$i=Si&&!I.onlyText?Mr():null,ar=vr&&!I.onlyIcons?qr():null,kn=d.paint.get("icon-opacity").constantOr(1),Ir=d.paint.get("text-opacity").constantOr(1);if(Ht&&qt.canOverlap){Wt=!0;const si=kn&&!I.onlyText?qt.icon.segments.get():[],Br=Ir&&!I.onlyIcons?qt.text.segments.get():[];for(const ss of si)jt.push({segments:new i.b8([ss]),sortKey:ss.sortKey,state:$i});for(const ss of Br)jt.push({segments:new i.b8([ss]),sortKey:ss.sortKey,state:ar})}else I.onlyText||jt.push({segments:kn?qt.icon.segments:new i.b8([]),sortKey:0,state:$i}),I.onlyIcons||jt.push({segments:Ir?qt.text.segments:new i.b8([]),sortKey:0,state:ar})}Wt&&jt.sort(((Gt,Dt)=>Gt.sortKey-Dt.sortKey));for(const Gt of jt){const Dt=Gt.state;if(Dt)if(v.terrain?v.terrain.setupElevationDraw(Dt.tile,Dt.program,{useDepthForOcclusion:Be.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Dt.labelPlaneMatrixInv}):v.setupDepthForOcclusion(Be.depthOcclusionForSymbolsAndCircles,Dt.program),Ne.activeTexture.set(Fe.TEXTURE0),Dt.atlasTexture&&Dt.atlasTexture.bind(Dt.atlasInterpolation,Fe.CLAMP_TO_EDGE,!0),Dt.atlasTextureIcon&&(Ne.activeTexture.set(Fe.TEXTURE1),Dt.atlasTextureIcon&&Dt.atlasTextureIcon.bind(Dt.atlasInterpolationIcon,Fe.CLAMP_TO_EDGE,!0)),v.uploadCommonLightUniforms(v.context,Dt.program),Dt.hasHalo){const qt=Dt.uniformValues;qt.u_is_halo=1,sp(Dt.buffers,Gt.segments,d,v,Dt.program,sn,S,T,qt,2),qt.u_is_halo=0}else{if(Dt.isSDF){const qt=Dt.uniformValues;Dt.hasHalo&&(qt.u_is_halo=1,sp(Dt.buffers,Gt.segments,d,v,Dt.program,sn,S,T,qt,1)),qt.u_is_halo=0}sp(Dt.buffers,Gt.segments,d,v,Dt.program,sn,S,T,Dt.uniformValues,1)}}}function sp(v,l,d,y,S,T,I,N,$,U){const H=[v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer,v.iconTransitioningVertexBuffer,v.globeExtVertexBuffer,v.zOffsetVertexBuffer];S.draw(y,y.context.gl.TRIANGLES,T,I,N,nr.disabled,$,d.id,v.layoutVertexBuffer,v.indexBuffer,l,d.paint,y.transform.zoom,v.programConfigurations.get(d.id),H,U)}function Hb(v,l){const d=1<<v.canonical.z,y=(l.x*d-v.canonical.x-v.wrap*d)*i.ai,S=(l.y*d-v.canonical.y)*i.ai,T=i.d5(l.z,l.y);return i.ad.vec3.fromValues(y,S,T)}function Wb(v,l,d,y,S){if(!d.layout||d.layout.get("fill-elevation-reference")==="none")return;const T=v.context.gl,I=new zn(v.context.gl.LEQUAL,zn.ReadWrite,v.depthRangeFor3D),N=new zn(v.context.gl.GREATER,zn.ReadWrite,v.depthRangeFor3D),$=(function(ne){const de=i.c4(ne.pitch);let ae=.01;return ne.isOrthographic&&(ae=i.ah(1e-4,ae,i.c9(de>=gn?1:de/gn))),2*ae})(v.transform),U=v.transform.getFreeCameraOptions().position,H="elevatedStructuresDepthReconstruct",X=v.getOrCreateProgram(H,{defines:["DEPTH_RECONSTRUCTION"]}),q=v.getOrCreateProgram(H);for(const ne of y){const de=l.getTile(ne),ae=de.getBucket(d);if(!ae)continue;const he=ae.elevatedStructures;if(!he)continue;const me=ae.elevationBufferData.heightRange,Ie=Hb(ne.toUnwrapped(),U),Le=v.translatePosMatrix(ne.projMatrix,de,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));let De,Ye,Ne,Fe;if(S==="initialize"){if(!me||me.min>=1||he.depthSegments.segments[0].primitiveLength===0)continue;De=Mg(Le,Ie,$,1,0),Ye=I,Ne=he.depthSegments,Fe=X}else if(S==="reset"){if(!me||me.min>=0||he.maskSegments.segments[0].primitiveLength===0)continue;De=Mg(Le,Ie,0,0,1),Ye=N,Ne=he.maskSegments,Fe=X}else if(S==="geometry"){if(he.depthSegments.segments[0].primitiveLength===0)continue;De=Mg(Le,Ie,$,1,0),Ye=I,Ne=he.depthSegments,Fe=q}Fe.draw(v,T.TRIANGLES,Ye,or.disabled,br.disabled,nr.disabled,De,d.id,he.vertexBuffer,he.indexBuffer,Ne,d.paint,v.transform.zoom)}}function av(v,l,d){const{painter:y,sourceCache:S,layer:T,coords:I,colorMode:N,elevationType:$,terrainEnabled:U,pass:H}=v,X=y.context.gl,q=T.paint.get("fill-pattern");let ne=$;$!=="road"||l&&!U||(ne="none");const de=ne==="road",ae=new zn(y.context.gl.LEQUAL,zn.ReadWrite,y.depthRangeFor3D),he=q&&q.constantOr(1),me=(Ie,Le)=>{let De,Ye,Ne,Fe,Be;Le?(Ye=he&&!T.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",De=X.LINES):(Ye=he?"fillPattern":"fill",De=X.TRIANGLES);for(const Qe of I){const tt=S.getTile(Qe);if(he&&!tt.patternsLoaded())continue;const Ot=tt.getBucket(T);if(!Ot)continue;const bt=l?Ot.elevationBufferData:Ot.bufferData;if(bt.isEmpty())continue;y.prepareDrawTile();const Ht=bt.programConfigurations.get(T.id),Wt=y.isTileAffectedByFog(Qe),sn=[],gt=[];de&&(sn.push("ELEVATED_ROADS"),gt.push(bt.elevatedLayoutVertexBuffer));const Ut=y.getOrCreateProgram(Ye,{config:Ht,overrideFog:Wt,defines:sn});he&&(y.context.activeTexture.set(X.TEXTURE0),tt.imageAtlasTexture&&tt.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Ht.updatePaintBuffers());const ft=q.constantOr(null);if(ft&&tt.imageAtlas){const Gt=tt.imageAtlas,Dt=i.d0.from(ft).getPrimary().scaleSelf(i.q.devicePixelRatio).toString(),qt=Gt.patternPositions.get(Dt);qt&&Ht.setConstantPatternPositions(qt)}const jt=y.translatePosMatrix(Qe.projMatrix,tt,T.paint.get("fill-translate"),T.paint.get("fill-translate-anchor")),Bt=T.paint.get("fill-emissive-strength");if(Le){Fe=bt.lineIndexBuffer,Be=bt.lineSegments;const Gt=y.terrain&&y.terrain.renderingToTexture?y.terrain.drapeBufferSize:[X.drawingBufferWidth,X.drawingBufferHeight];Ne=Ye==="fillOutlinePattern"&&he?tv(jt,Bt,y,tt,Gt):ev(jt,Bt,Gt)}else Fe=bt.indexBuffer,Be=bt.triangleSegments,Ne=he?Lb(jt,Bt,y,tt):np(jt,Bt);y.uploadCommonUniforms(y.context,Ut,Qe.toUnwrapped()),Ut.draw(y,De,ne!=="none"?ae:Ie,d||y.stencilModeForClipping(Qe),N,nr.disabled,Ne,T.id,bt.layoutVertexBuffer,Fe,Be,T.paint,y.transform.zoom,Ht,gt)}};y.renderPass===H&&me(y.depthModeForSublayer(1,y.renderPass==="opaque"?zn.ReadWrite:zn.ReadOnly),!1),ne==="none"&&y.renderPass==="translucent"&&T.paint.get("fill-antialias")&&me(y.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,zn.ReadOnly),!0)}function Cg(v,l,d,y,S,T,I,N){d.resetLayerRenderingStats(v);const $=v.context,U=$.gl,H=v.transform,X=d.paint.get("fill-extrusion-pattern"),q=X.constantOr(1),ne=d.paint.get("fill-extrusion-opacity"),de=v.style.enable3dLights(),ae=d.paint.get(de&&!q?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),he=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),ae],me=d.layout.get("fill-extrusion-edge-radius"),Ie=me>0&&!d.paint.get("fill-extrusion-rounded-roof"),Le=Ie?0:me,De=H.projection.name==="globe"?i.d6():0,Ye=H.projection.name==="globe",Ne=Ye?i.ag(H.zoom):0,Fe=[i.av(H.center.lng),i.aC(H.center.lat)],Be=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Qe=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(Be?null:d.lut).toArray01().slice(0,3),tt=d.paint.get("fill-extrusion-flood-light-intensity"),Ot=d.paint.get("fill-extrusion-vertical-scale"),bt=d.paint.get("fill-extrusion-line-width").constantOr(1)!==0,Ht=d.paint.get("fill-extrusion-height-alignment"),Wt=d.paint.get("fill-extrusion-base-alignment"),sn=fu(v,d.paint.get("fill-extrusion-cutoff-fade-range")),gt=[];let Ut;Ye&&gt.push("PROJECTION_GLOBE_VIEW"),he[0]>0&&gt.push("FAUX_AO"),Ie&&gt.push("ZERO_ROOF_RADIUS"),N&&gt.push("HAS_CENTROID"),tt>0&&gt.push("FLOOD_LIGHT"),sn.shouldRenderCutoff&&gt.push("RENDER_CUTOFF"),bt&&gt.push("RENDER_WALL_MODE");const ft=v.renderPass==="shadow",jt=v.shadowRenderer,Bt=ft&&!!jt;v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!0);let Gt=[0,0,0];if(jt){const _n=v.style.directionalLight,yn=v.style.ambientLight;_n&&yn&&(Gt=Yf(v.style,_n,yn)),ft||(gt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),jt.useNormalOffset&&gt.push("NORMAL_OFFSET")),Ut=gt.concat(["SHADOWS_SINGLE_CASCADE"])}const Dt=Bt?"fillExtrusionDepth":q?"fillExtrusionPattern":"fillExtrusion",qt=d.getLayerRenderingStats();for(const _n of y){const yn=l.getTile(_n),wn=yn.getBucket(d);if(!wn||wn.projection.name!==H.projection.name)continue;let Rn=!1;jt&&(Rn=jt.getMaxCascadeForTile(_n.toUnwrapped())===0);const rr=v.isTileAffectedByFog(_n),Vn=wn.programConfigurations.get(d.id),er=v.getOrCreateProgram(Dt,{config:Vn,defines:Rn?Ut:gt,overrideFog:rr});if(v.terrain&&v.terrain.setupElevationDraw(yn,er,{useMeterToDem:!0}),!wn.centroidVertexBuffer){const ar=er.attributes.a_centroid_pos;ar!==void 0&&U.vertexAttrib2f(ar,0,0)}!ft&&jt&&jt.setupShadows(yn.tileID.toUnwrapped(),er,"vector-tile",yn.tileID.overscaledZ),q&&(v.context.activeTexture.set(U.TEXTURE0),yn.imageAtlasTexture&&yn.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),Vn.updatePaintBuffers());const Zn=X.constantOr(null);if(Zn&&yn.imageAtlas){const ar=yn.imageAtlas,kn=i.d0.from(Zn).getPrimary().scaleSelf(i.q.devicePixelRatio),Ir=ar.patternPositions.get(kn.toString());Ir&&Vn.setConstantPatternPositions(Ir)}const Mr=d.paint.get("fill-extrusion-vertical-gradient"),qr=1/wn.tileToMeter;let Si;if(ft&&jt){if(cp(yn.tileID,wn,v))continue;const ar=jt.calculateShadowPassMatrixFromTile(yn.tileID.toUnwrapped());Si=tp(ar,Le,qr,Ot,Ht,Wt)}else{const ar=v.translatePosMatrix(_n.expandedProjMatrix,yn,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),kn=H.projection.createInversionMatrix(H,_n.canonical);Si=q?kb(ar,v,Mr,ne,he,Le,qr,_n,yn,De,Ht,Wt,Ne,Fe,kn,Qe,Ot):Qy(ar,v,Mr,ne,he,Le,qr,_n,De,Ht,Wt,Ne,Fe,kn,Qe,Ot,tt,Gt)}v.uploadCommonUniforms($,er,_n.toUnwrapped(),null,sn);let vr=wn.segments;if(H.projection.name==="mercator"&&!ft&&(vr=wn.getVisibleSegments(yn.tileID,v.terrain,v.transform.getFrustum(0)),!vr.get().length))continue;if(qt)if(ft)for(const ar of vr.get())qt.numRenderedVerticesInShadowPass+=ar.primitiveLength;else for(const ar of vr.get())qt.numRenderedVerticesInTransparentPass+=ar.primitiveLength;const $i=[];(v.terrain||N)&&$i.push(wn.centroidVertexBuffer),Ye&&$i.push(wn.layoutVertexExtBuffer),bt&&$i.push(wn.wallVertexBuffer),er.draw(v,$.gl.TRIANGLES,S,T,I,nr.backCCW,Si,d.id,wn.layoutVertexBuffer,wn.indexBuffer,vr,d.paint,v.transform.zoom,Vn,$i)}v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!1)}function op(v,l,d,y,S,T,I,N,$,U,H,X,q,ne,de,ae,he,me,Ie){const Le=v.context,De=Le.gl,Ye=v.transform,Ne=v.transform.zoom,Fe=[],Be=fu(v,d.paint.get("fill-extrusion-cutoff-fade-range"));U==="clear"?(Fe.push("CLEAR_SUBPASS"),Ie&&(Fe.push("CLEAR_FROM_TEXTURE"),Le.activeTexture.set(De.TEXTURE0),Ie.bind(De.LINEAR,De.CLAMP_TO_EDGE))):U==="sdf"&&Fe.push("SDF_SUBPASS"),he&&Fe.push("HAS_CENTROID"),Be.shouldRenderCutoff&&Fe.push("RENDER_CUTOFF");const Qe=d.layout.get("fill-extrusion-edge-radius"),tt=(Ot,bt,Ht,Wt,sn)=>{const gt=bt.programConfigurations.get(d.id),Ut=v.isTileAffectedByFog(Ot),ft=v.getOrCreateProgram("fillExtrusionGroundEffect",{config:gt,defines:Fe,overrideFog:Ut}),jt=((Gt,Dt,qt,_n,yn,wn,Rn,rr,Vn,er,Zn)=>({u_matrix:Dt,u_opacity:qt,u_ao_pass:_n?1:0,u_meter_to_tile:yn,u_ao:wn,u_flood_light_intensity:Rn,u_flood_light_color:rr,u_attenuation:Vn,u_edge_radius:er,u_fb:0,u_fb_size:Zn,u_dynamic_offset:1}))(0,Wt,H,$,sn,[X,q*sn],ne,de,ae,Ne>=17?0:Qe*sn,Ie?Ie.size[0]:0),Bt=[];he&&Bt.push(bt.hiddenByLandmarkVertexBuffer),v.uploadCommonUniforms(Le,ft,Ot.toUnwrapped(),null,Be),ft.draw(v,Le.gl.TRIANGLES,S,T,I,N,jt,d.id,bt.vertexBuffer,bt.indexBuffer,Ht,d.paint,Ne,gt,Bt)};for(const Ot of y){const bt=l.getTile(Ot),Ht=bt.getBucket(d);if(!Ht||Ht.projection.name!==Ye.projection.name||!Ht.groundEffect||Ht.groundEffect&&!Ht.groundEffect.hasData())continue;const Wt=Ht.groundEffect,sn=1/Ht.tileToMeter;{const gt=v.translatePosMatrix(Ot.projMatrix,bt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Ut=Wt.getDefaultSegment();tt(Ot,Wt,Ut,gt,sn)}if(me)for(let gt=0;gt<4;gt++){const Ut=i.d7[gt](Ot),ft=l.getTile(Ut);if(!ft)continue;const jt=ft.getBucket(d);if(!jt||jt.projection.name!==Ye.projection.name||!jt.groundEffect||jt.groundEffect&&!jt.groundEffect.hasData())continue;const Bt=jt.groundEffect;let Gt,Dt;gt===0?(Gt=[-i.ai,0,0],Dt=1):gt===1?(Gt=[i.ai,0,0],Dt=0):gt===2?(Gt=[0,-i.ai,0],Dt=3):(Gt=[0,i.ai,0],Dt=2);const qt=Bt.regionSegments[Dt];if(!qt)continue;const _n=new Float32Array(16);i.ad.mat4.translate(_n,Ot.projMatrix,Gt),tt(Ot,Bt,qt,v.translatePosMatrix(_n,bt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),sn)}}}function ap(v,l,d,y,S,T,I){y.centroidVertexArray.length===0&&y.createCentroidsBuffer();const N=T?T.findDEMTileFor(d):null;if(!(N&&N.dem||I))return;T&&N&&N.dem&&y.selfDEMTileTimestamp!==N.dem._timestamp&&(y.borderDoneWithNeighborZ=[-1,-1,-1,-1],y.selfDEMTileTimestamp=N.dem._timestamp);const $=me=>new i.P(Math.ceil((me+i.da)*i.db),0),U=me=>{const Ie=l.getSource().minzoom,Le=Ye=>{const Ne=l.getTileByID(Ye);if(Ne&&Ne.hasData())return Ne.getBucket(S)},De=[0,-1,1];for(const Ye of De){if(me.overscaledZ+Ye<Ie)continue;const Ne=Le(me.calculateScaledKey(me.overscaledZ+Ye));if(Ne)return Ne}},H=[0,0,0],X=(me,Ie)=>(H[0]=Math.min(me.min.y,Ie.min.y),H[1]=Math.max(me.max.y,Ie.max.y),H[2]=i.ai-Ie.min.x>me.max.x?Ie.min.x-i.ai:me.max.x,H),q=(me,Ie)=>(H[0]=Math.min(me.min.x,Ie.min.x),H[1]=Math.max(me.max.x,Ie.max.x),H[2]=i.ai-Ie.min.y>me.max.y?Ie.min.y-i.ai:me.max.y,H),ne=[(me,Ie)=>X(me,Ie),(me,Ie)=>X(Ie,me),(me,Ie)=>q(me,Ie),(me,Ie)=>q(Ie,me)],de=(me,Ie,Le,De,Ye,Ne,Fe)=>{if(!T)return 0;const Be=[[Ne?Le:me,Ne?me:Le,0],[Ne?Le:Ie,Ne?Ie:Le,0]],Qe=Fe<0?i.ai+Fe:Fe,tt=[Ne?Qe:(me+Ie)/2,Ne?(me+Ie)/2:Qe,0];return Le===0&&Fe<0||Le!==0&&Fe>0?T.getForTilePoints(Ye,[tt],!0,De):Be.push(tt),T.getForTilePoints(d,Be,!0,N),Math.max(Be[0][2],Be[1][2],tt[2])/T.exaggeration()};for(let me=0;me<4;me++){const Ie=y.borderFeatureIndices[me];if(Ie.length===0)continue;const Le=i.d7[me](d),De=U(Le);if(!(De&&De instanceof i.d8))continue;const Ye=T?T.findDEMTileFor(Le):null;if(!(Ye&&Ye.dem||I)||(T&&Ye&&Ye.dem&&y.borderDEMTileTimestamp[me]!==Ye.dem._timestamp&&(y.borderDoneWithNeighborZ[me]=-1,y.borderDEMTileTimestamp[me]=Ye.dem._timestamp),y.borderDoneWithNeighborZ[me]===De.canonical.z))continue;De.centroidVertexArray.length===0&&De.createCentroidsBuffer();const Ne=(me<2?1:5)-me,Fe=De.borderDoneWithNeighborZ[Ne]!==y.canonical.z,Be=De.borderFeatureIndices[Ne];let Qe=0;if(y.canonical.z!==De.canonical.z){for(const tt of Ie)y.showCentroid(y.featuresOnBorder[tt]);if(Fe)for(const tt of Be)De.showCentroid(De.featuresOnBorder[tt]);y.borderDoneWithNeighborZ[me]=De.canonical.z,De.borderDoneWithNeighborZ[Ne]=y.canonical.z}for(const tt of Ie){const Ot=y.featuresOnBorder[tt],bt=y.centroidData[Ot.centroidDataIndex],Ht=Ot.borders[me];let Wt;for(;Qe<Be.length;){Wt=De.featuresOnBorder[Be[Qe]];const sn=Wt.borders[Ne];if(sn[1]>Ht[0]+3||sn[0]>Ht[0]-3)break;De.showCentroid(Wt),Qe++}if(Wt&&Qe<Be.length){const sn=Qe;let gt=0;for(;!(Wt.borders[Ne][0]>Ht[1]-3)&&(gt++,++Qe!==Be.length);)Wt=De.featuresOnBorder[Be[Qe]];Wt=De.featuresOnBorder[Be[sn]];let Ut=!1;if(gt>=1){const Bt=Wt.borders[Ne];Math.abs(Ht[0]-Bt[0])<3&&Math.abs(Ht[1]-Bt[1])<3&&(gt=1,Ut=!0,Qe=sn+1)}else if(gt===0){y.showCentroid(Ot);continue}const ft=De.centroidData[Wt.centroidDataIndex];I&&Ut&&(((ae=bt).flags|(he=ft).flags)&i.d9?(ae.flags|=i.d9,he.flags|=i.d9):(ae.flags&=~i.d9,he.flags&=~i.d9));const jt=Ot.intersectsCount()>1||Wt.intersectsCount()>1;if(gt>1)Qe=sn,bt.centroidXY=ft.centroidXY=new i.P(0,0);else if(Ye&&Ye.dem&&!jt){const Bt=ne[me](bt,ft),Gt=me%2?i.ai-1:0,Dt=de(Bt[0],Math.min(i.ai-1,Bt[1]),Gt,Ye,Le,me<2,Bt[2]);bt.centroidXY=ft.centroidXY=$(Dt)}else jt?bt.centroidXY=ft.centroidXY=new i.P(0,0):(bt.centroidXY=y.encodeBorderCentroid(Ot),ft.centroidXY=De.encodeBorderCentroid(Wt));y.writeCentroidToBuffer(bt),De.writeCentroidToBuffer(ft)}else y.showCentroid(Ot)}y.borderDoneWithNeighborZ[me]=De.canonical.z,De.borderDoneWithNeighborZ[Ne]=y.canonical.z}var ae,he;(y.needsCentroidUpdate||!y.centroidVertexBuffer&&y.centroidVertexArray.length!==0)&&y.uploadCentroid(v)}const lp=[1,0,0],hn=[0,1,0],Mn=[0,0,1];function cp(v,l,d){const y=d.transform,S=d.shadowRenderer;if(!S)return!0;const T=v.toUnwrapped(),I=y.tileSize*S._cascades[d.currentShadowCascade].scale;let N=l.maxHeight;if(y.elevation){const ae=y.elevation.getMinMaxForTile(v);ae&&(N+=ae.max)}const $=[...S.shadowDirection];$[2]=-$[2];const U=S.computeSimplifiedTileShadowVolume(T,N,I,$);if(!U)return!1;const H=[lp,hn,Mn,$,[$[0],0,$[2]],[0,$[1],$[2]]],X=y.projection.name==="globe",q=y.scaleZoom(I),ne=i.bR.fromInvProjectionMatrix(y.invProjMatrix,y.worldSize,q,!X),de=S.getCurrentCascadeFrustum();return ne.intersectsPrecise(U.vertices,U.planes,H)===0||de.intersectsPrecise(U.vertices,U.planes,H)===0}function Xi(v){return[v[0]*i.dc,v[1]*i.dc,v[2]*i.dc,0]}function Tt(v,l,d,y,S,T,I,N,$){const U=y.getSource(),H=d.globeSharedBuffers;if(!H)return;let X,q,ne;if(l&&(X=y.getTile(l)),U instanceof i.aK?(q=U.texture,ne=i.cJ(0,0,d.transform)):X&&l&&(q=X.texture,ne=i.cJ(l.canonical.z,l.canonical.x,d.transform)),!q||!ne)return;v||(ne=i.ad.mat4.scale(i.ad.mat4.create(),ne,[1,-1,1]));const de=d.context,ae=de.gl,he=S.paint.get("raster-resampling")==="nearest"?ae.NEAREST:ae.LINEAR,me=d.colorModeForDrapableLayerRenderPass(T),Ie=I.defines;Ie.push("GLOBE_POLES");const Le=new zn(ae.LEQUAL,zn.ReadWrite,d.depthRangeFor3D),De=Float32Array.from(d.transform.expandedFarZProjMatrix),Ye=Float32Array.from(i.bc(i.cI(new i.bT(0,0,0))));d.terrain&&d.terrain.prepareDrawTile(),de.activeTexture.set(ae.TEXTURE0),q.bind(he,ae.CLAMP_TO_EDGE),de.activeTexture.set(ae.TEXTURE1),q.bind(he,ae.CLAMP_TO_EDGE),"useMipmap"in q&&de.extTextureFilterAnisotropic&&d.transform.pitch>20&&ae.texParameterf(ae.TEXTURE_2D,de.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,de.extTextureFilterAnisotropicMax);const[Ne,Fe,Be,Qe]=l?H.getPoleBuffers(l.canonical.z,!1):H.getPoleBuffers(0,!0),tt=S.paint.get("raster-elevation");let Ot;v?(Ot=Ne,d.renderDefaultNorthPole=tt!==0):(Ot=Fe,d.renderDefaultSouthPole=tt!==0);const bt=Xi(I.mix),Ht=((sn,gt,Ut,ft,jt,Bt,Gt,Dt,qt,_n,yn,wn,Rn)=>Fb(sn,gt,Ut,new Float32Array(16),new Float32Array(9),[0,0],ft,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Bt,[0,0],Dt,2,_n,yn,wn,1,0,Rn))(De,Ye,ne,i.ag(d.transform.zoom),0,S,0,tt,0,bt,I.offset,I.range,T),Wt=d.getOrCreateProgram("raster",{defines:Ie});d.uploadCommonUniforms(de,Wt,null),Wt.draw(d,ae.TRIANGLES,Le,$,me,N,Ht,S.id,Ot,Be,Qe)}function qE(v){const l=v._nearZ,d=v.projection.farthestPixelDistance(v),y=d-l,S=.2*v.height,T=l+S;return[l,d,(T-S-l)/y,(T-l)/y]}function lv(v,l,d,y){if(v)return l instanceof Pc&&v instanceof da?l.getTextureDescriptor(v,d,!0):{texture:v.texture,mix:Xi(y.mix),offset:y.offset,buffer:0,tileSize:1}}var Gb=i.dd([{name:"a_index",type:"Int16",components:1}]);class Yb{constructor(l,d,y,S){const T={width:y[0],height:y[1],data:null},I=l.gl;this.targetColorTexture=new i.T(l,T,I.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new i.T(l,T,I.RGBA8,{useMipmap:!1}),this.context=l,this.updateParticleTexture(d,S),this.lastInvalidatedAt=0}updateParticleTexture(l,d){if(this.particleTextureDimension===d.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const y=this.context.gl,S=d.width*d.height;this.particleTexture0=new i.T(this.context,d,y.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new i.T(this.context,d,y.RGBA8,{premultiply:!1,useMipmap:!1});const T=new i.de;T.reserve(S);for(let I=0;I<S;I++)T.emplaceBack(I);this.particleIndexBuffer=this.context.createVertexBuffer(T,Gb.members,!0),this.particleSegment=i.b8.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=d.width}update(l){return!(this.lastInvalidatedAt<l&&(this.lastInvalidatedAt=i.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function XE(v,l,d){if(!v)return null;const y=l.getTextureDescriptor(v,d,!0);if(!y)return null;let{texture:S,mix:T,offset:I,tileSize:N,buffer:$,format:U}=y;if(!S||!U)return null;let H=!1;return U==="uint32"&&(H=!0,T[3]=0,T=An(i.df,T,[0,d.paint.get("raster-particle-max-speed")]),I=Nb(i.df,I,[0,d.paint.get("raster-particle-max-speed")])),{texture:S,textureOffset:[$/(N+2*$),N/(N+2*$)],tileSize:N,scalarData:H,scale:T,offset:I,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[U]]}}function ZE(v){const l=v._nearZ,d=v.projection.farthestPixelDistance(v),y=d-l,S=.2*v.height,T=l+S;return[l,d,(T-S-l)/y,(T-l)/y]}const up=new i.al(1,0,0,1),HO=new i.al(0,1,0,1),WO=new i.al(0,0,1,1),KE=new i.al(1,0,1,1),cv=new i.al(0,1,1,1);function yd(v,l,d,y,S,T,I){const N=v.context,$=v.transform,U=N.gl,H=$.projection.name==="globe",X=H?["PROJECTION_GLOBE_VIEW"]:[];let q=i.ad.mat4.clone(d.projMatrix);if(H&&i.ag($.zoom)>0){const bt=i.bb(d.canonical,$),Ht=i.dg(bt);q=i.ad.mat4.multiply(new Float32Array(16),$.globeMatrix,Ht),i.ad.mat4.multiply(q,$.projMatrix,q)}const ne=i.ad.mat4.create();ne[12]+=2*S/(i.q.devicePixelRatio*$.width),ne[13]+=2*T/(i.q.devicePixelRatio*$.height),i.ad.mat4.multiply(q,ne,q);const de=v.getOrCreateProgram("debug",{defines:X}),ae=l.getTileByID(d.key);v.terrain&&v.terrain.setupElevationDraw(ae,de);const he=zn.disabled,me=or.disabled,Ie=v.colorModeForRenderPass(),Le="$debug";N.activeTexture.set(U.TEXTURE0),v.emptyTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),H?ae._makeGlobeTileDebugBuffers(v.context,$):ae._makeDebugTileBoundsBuffers(v.context,$.projection);const De=ae._tileDebugBuffer||v.debugBuffer,Ye=ae._tileDebugIndexBuffer||v.debugIndexBuffer,Ne=ae._tileDebugSegments||v.debugSegments;if(de.draw(v,U.LINE_STRIP,he,me,Ie,nr.disabled,UE(q,y),Le,De,Ye,Ne,null,null,null,[ae._globeTileDebugBorderBuffer]),I){const bt=ae.latestRawTileData,Ht=Math.floor((bt&&bt.byteLength||0)/1024);let Wt=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(Wt+=` => ${d.overscaledZ}`),Wt+=` ${ae.state}`,Wt+=` ${Ht}kb`,(function(sn,gt){sn.initDebugOverlayCanvas();const Ut=sn.debugOverlayCanvas,ft=sn.context.gl,jt=sn.debugOverlayCanvas.getContext("2d");jt.clearRect(0,0,Ut.width,Ut.height),jt.shadowColor="white",jt.shadowBlur=2,jt.lineWidth=1.5,jt.strokeStyle="white",jt.textBaseline="top",jt.font="bold 36px Open Sans, sans-serif",jt.fillText(gt,5,5),jt.strokeText(gt,5,5),sn.debugOverlayTexture.update(Ut),sn.debugOverlayTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE)})(v,Wt)}const Fe=l.getTile(d).tileSize,Be=512/Math.min(Fe,512)*(d.overscaledZ/$.zoom)*.5,Qe=ae._tileDebugTextBuffer||v.debugBuffer,tt=ae._tileDebugTextIndexBuffer||v.quadTriangleIndexBuffer,Ot=ae._tileDebugTextSegments||v.debugSegments;de.draw(v,U.TRIANGLES,he,me,br.alphaBlended,nr.disabled,UE(q,i.al.transparent,Be),Le,Qe,tt,Ot,null,null,null,[ae._globeTileDebugTextBuffer])}function qb(v,l,d,y){ph(v,0,l+d/2,v.transform.width,d,y)}function Xb(v,l,d,y){ph(v,l-d/2,0,d,v.transform.height,y)}function ph(v,l,d,y,S,T){const I=v.context,N=I.gl;N.enable(N.SCISSOR_TEST),N.scissor(l*i.q.devicePixelRatio,d*i.q.devicePixelRatio,y*i.q.devicePixelRatio,S*i.q.devicePixelRatio),I.clear({color:T}),N.disable(N.SCISSOR_TEST)}const uv=i.dd([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:dp}=uv;function _u(v,l,d,y){v.emplaceBack(l,d,y)}class JE{constructor(l){this.vertexArray=new i.dh,this.indices=new i.aV,_u(this.vertexArray,-1,-1,1),_u(this.vertexArray,1,-1,1),_u(this.vertexArray,-1,1,1),_u(this.vertexArray,1,1,1),_u(this.vertexArray,-1,-1,-1),_u(this.vertexArray,1,-1,-1),_u(this.vertexArray,-1,1,-1),_u(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,dp),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=i.b8.simpleSegment(0,0,36,12)}}function oo(v,l,d,y,S,T){const I=v.context.gl,N=l.paint.get("sky-atmosphere-color"),$=l.paint.get("sky-atmosphere-halo-color"),U=l.paint.get("sky-atmosphere-sun-intensity"),H=((X,q,ne,de,ae)=>({u_matrix_3f:X,u_sun_direction:q,u_sun_intensity:ne,u_color_tint_r:[de.r,de.g,de.b,de.a],u_color_tint_m:[ae.r,ae.g,ae.b,ae.a],u_luminance:5e-5}))(i.ad.mat3.fromMat4(i.ad.mat3.create(),y),S,U,N,$);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_CUBE_MAP_POSITIVE_X+T,l.skyboxTexture,0),d.draw(v,I.TRIANGLES,zn.disabled,or.disabled,br.unblended,nr.frontCW,H,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const GO=i.dd([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ig{constructor(l){const d=new i.di;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const y=new i.aV;y.emplaceBack(0,1,2),y.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(d,GO.members),this.indexBuffer=l.createIndexBuffer(y),this.segments=i.b8.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ci=i.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Gr{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class QE{constructor(l){this.colorModeAlphaBlendedWriteRGB=new br([1,fd,1,fd],i.al.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new br([1,0,1,0],i.al.transparent,[!1,!1,!1,!0]),this.params=new Gr,this.updateNeeded=!0,l.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},(()=>{this.updateNeeded=!0})),l.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),l.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},(()=>{this.updateNeeded=!0})),l.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},(()=>{this.updateNeeded=!0}))}update(l){const d=l.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Ig(d);const y=this.params.sizeRange,S=this.params.intensityRange,T=(function(H){const X=i.dl(30),q=[];for(let ne=0;ne<H;++ne){const de=2*Math.PI*X(),ae=Math.acos(1-2*X())-.5*Math.PI;q.push(i.ad.vec3.fromValues(Math.cos(ae)*Math.cos(de),Math.cos(ae)*Math.sin(de),Math.sin(ae)))}return q})(this.params.starsCount),I=i.dl(300),N=new i.dj,$=new i.aV;let U=0;for(let H=0;H<T.length;++H){const X=i.ad.vec3.scale([],T[H],200),q=Math.max(0,1+.01*y*(1*I()-.5)),ne=Math.max(0,1+.01*S*(1*I()-.5));N.emplaceBack(X[0],X[1],X[2],-1,-1,q,ne),N.emplaceBack(X[0],X[1],X[2],1,-1,q,ne),N.emplaceBack(X[0],X[1],X[2],1,1,q,ne),N.emplaceBack(X[0],X[1],X[2],-1,1,q,ne),$.emplaceBack(U+0,U+1,U+2),$.emplaceBack(U+0,U+2,U+3),U+=4}this.starsVx=d.createVertexBuffer(N,Ci.members),this.starsIdx=d.createIndexBuffer($),this.starsSegments=i.b8.simpleSegment(0,0,N.length,$.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(l,d){const y=l.context,S=y.gl,T=l.transform,I=new zn(S.LEQUAL,zn.ReadOnly,[0,1]),N=i.ag(T.zoom),$=l.style.getLut(d.scope),U=d.properties.get("color-use-theme")==="none",H=d.properties.get("color").toRenderColor(U?null:$).toArray01(),X=d.properties.get("high-color-use-theme")==="none",q=d.properties.get("high-color").toRenderColor(X?null:$).toArray01(),ne=d.properties.get("space-color-use-theme")==="none",de=d.properties.get("space-color").toRenderColor(ne?null:$).toArray01PremultipliedAlpha(),ae=5e-4,he=i.dk(d.properties.get("horizon-blend"),0,1,ae,.25),me=i.cD(l,y,T)&&he===ae?T.worldSize/(2*Math.PI*1.025)-1:T.globeRadius,Ie=l.frameCounter/1e3%1,Le=i.ad.vec3.length(T.globeCenterInViewSpace),De=Math.sqrt(Math.pow(Le,2)-Math.pow(me,2)),Ye=Math.acos(De/Le),Ne=Fe=>{const Be=T.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Fe&&Be.push("ALPHA_PASS");const Qe=l.getOrCreateProgram("globeAtmosphere",{defines:Be}),tt=((bt,Ht,Wt,sn,gt,Ut,ft,jt,Bt,Gt,Dt,qt)=>({u_frustum_tl:bt,u_frustum_tr:Ht,u_frustum_br:Wt,u_frustum_bl:sn,u_horizon:gt,u_transition:Ut,u_fadeout_range:ft,u_color:jt,u_high_color:Bt,u_space_color:Gt,u_temporal_offset:Dt,u_horizon_angle:qt}))(T.frustumCorners.TL,T.frustumCorners.TR,T.frustumCorners.BR,T.frustumCorners.BL,T.frustumCorners.horizon,N,he,H,q,de,Ie,Ye);l.uploadCommonUniforms(y,Qe);const Ot=this.atmosphereBuffer;Ot&&Qe.draw(l,S.TRIANGLES,I,or.disabled,Fe?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,nr.backCW,tt,Fe?"atmosphere_glow_alpha":"atmosphere_glow",Ot.vertexBuffer,Ot.indexBuffer,Ot.segments)};Ne(!1),Ne(!0)}drawStars(l,d){const y=i.ay(d.properties.get("star-intensity"),0,1);if(y===0)return;const S=l.context,T=S.gl,I=l.transform,N=l.getOrCreateProgram("stars"),$=i.ad.quat.identity([]);i.ad.quat.rotateX($,$,-I._pitch),i.ad.quat.rotateZ($,$,-I.angle),i.ad.quat.rotateX($,$,i.ak(I._center.lat)),i.ad.quat.rotateY($,$,-i.ak(I._center.lng));const U=i.ad.mat4.fromQuat(new Float32Array(16),$),H=i.ad.mat4.multiply([],I.starsProjMatrix,U),X=i.ad.mat3.fromMat4([],U),q=i.ad.mat3.invert([],X),ne=[0,1,0];i.ad.vec3.transformMat3(ne,ne,q),i.ad.vec3.scale(ne,ne,this.params.sizeMultiplier);const de=[1,0,0];i.ad.vec3.transformMat3(de,de,q),i.ad.vec3.scale(de,de,this.params.sizeMultiplier);const ae=(he=ne,me=de,Ie=y,{u_matrix:Float32Array.from(H),u_up:he,u_right:me,u_intensity_multiplier:Ie});var he,me,Ie;l.uploadCommonUniforms(S,N),this.starsVx&&this.starsIdx&&N.draw(l,T.TRIANGLES,zn.disabled,or.disabled,this.colorModeAlphaBlendedWriteRGB,nr.disabled,ae,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function yu(v,l){const d=[...v],y=l.cameraWorldSizeForFog/l.worldSize,S=i.ad.mat4.identity([]);return i.ad.mat4.scale(S,S,[y,y,1]),i.ad.mat4.multiply(d,S,d),i.ad.mat4.multiply(d,l.worldToFogMatrix,d),d}function hp(v,l,d,y,S){const T=d.material,I=y.context,{baseColorTexture:N,metallicRoughnessTexture:$}=T.pbrMetallicRoughness,{normalTexture:U,occlusionTexture:H,emissionTexture:X}=T;function q(de,ae,he){if(de&&(v.push(ae),I.activeTexture.set(I.gl.TEXTURE0+he),de.gfxTexture)){const{minFilter:me,magFilter:Ie,wrapS:Le,wrapT:De}=de.sampler;de.gfxTexture.bindExtraParam(me,Ie,Le,De)}}q(N,"HAS_TEXTURE_u_baseColorTexture",ls.BaseColor),q($,"HAS_TEXTURE_u_metallicRoughnessTexture",ls.MetallicRoughness),q(U,"HAS_TEXTURE_u_normalTexture",ls.Normal),q(H,"HAS_TEXTURE_u_occlusionTexture",ls.Occlusion),q(X,"HAS_TEXTURE_u_emissionTexture",ls.Emission),S&&(S.texture||(S.texture=new i.dn(y.context,S.image,[S.image.height,S.image.height,S.image.height],I.gl.RGBA8)),I.activeTexture.set(I.gl.TEXTURE0+ls.LUT),S.texture&&S.texture.bind(I.gl.LINEAR,I.gl.CLAMP_TO_EDGE),v.push("APPLY_LUT_ON_GPU")),d.texcoordBuffer&&(v.push("HAS_ATTRIBUTE_a_uv_2f"),l.push(d.texcoordBuffer)),d.colorBuffer&&(v.push(d.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),l.push(d.colorBuffer)),d.normalBuffer&&(v.push("HAS_ATTRIBUTE_a_normal_3f"),l.push(d.normalBuffer)),d.pbrBuffer&&(v.push("HAS_ATTRIBUTE_a_pbr"),v.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),l.push(d.pbrBuffer)),T.alphaMode!=="OPAQUE"&&T.alphaMode!=="MASK"||v.push("UNPREMULT_TEXTURE_IN_SHADER"),T.defined||v.push("DIFFUSE_SHADED");const ne=y.shadowRenderer;ne&&(v.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ne.useNormalOffset&&v.push("NORMAL_OFFSET"))}function vu(v,l,d,y,S,T){const I=d.paint.get("model-opacity").constantOr(1),N=l.context,$=new zn(l.context.gl.LEQUAL,zn.ReadWrite,l.depthRangeFor3D),U=l.transform,H=v.mesh,X=H.material,q=X.pbrMetallicRoughness,ne=l.style.fog;let de;de=l.transform.projection.zAxisUnit==="pixels"?[...v.nodeModelMatrix]:i.ad.mat4.multiply([],y.zScaleMatrix,v.nodeModelMatrix),i.ad.mat4.multiply(de,y.negCameraPosMatrix,de);const ae=i.ad.mat4.invert([],de);i.ad.mat4.transpose(ae,ae);const he=d.paint.get("model-color-use-theme").constantOr("default")==="none",me=d.paint.get("model-emissive-strength").constantOr(0),Ie=$b(new Float32Array(v.worldViewProjection),new Float32Array(de),new Float32Array(ae),null,l,I,q.baseColorFactor.toRenderColor(null),X.emissiveFactor,q.metallicFactor,q.roughnessFactor,X,me,d),Le={defines:[]},De=[],Ye=l.shadowRenderer;Ye&&(Ye.useNormalOffset=!1),hp(Le.defines,De,H,l,he?null:d.lut);let Ne=null;if(ne){const Qe=yu(v.nodeModelMatrix,l.transform);if(Ne=new Float32Array(Qe),U.projection.name!=="globe"){const tt=H.aabb.min,Ot=H.aabb.max,[bt,Ht]=ne.getOpacityForBounds(Qe,tt[0],tt[1],Ot[0],Ot[1]);Le.overrideFog=bt>=Tn||Ht>=Tn}}const Fe=fu(l,d.paint.get("model-cutoff-fade-range"));Fe.shouldRenderCutoff&&Le.defines.push("RENDER_CUTOFF");const Be=l.getOrCreateProgram("model",Le);l.uploadCommonUniforms(N,Be,null,Ne,Fe),l.renderPass!=="shadow"&&Ye&&Ye.setupShadowsFromMatrix(v.nodeModelMatrix,Be),Be.draw(l,N.gl.TRIANGLES,$,S,T,H.material.doubleSided?nr.disabled:nr.backCCW,Ie,d.id,H.vertexBuffer,H.indexBuffer,H.segments,d.paint,l.transform.zoom,void 0,De)}function mh(v,l,d,y,S,T,I){let N;N=v.projection.name==="globe"?i.dp(d,v):[...d],i.ad.mat4.multiply(N,N,l.matrix);const $=i.ad.mat4.multiply([],y,N);if(l.meshes)for(const U of l.meshes){if(U.material.alphaMode!=="BLEND"){I.push({mesh:U,depth:0,modelIndex:S,worldViewProjection:$,nodeModelMatrix:N});continue}const H=i.ad.vec3.transformMat4([],U.centroid,$);!v.isOrthographic&&H[2]<=0||T.push({mesh:U,depth:H[2],modelIndex:S,worldViewProjection:$,nodeModelMatrix:N})}if(l.children)for(const U of l.children)mh(v,U,d,y,S,T,I)}function Pg(v,l,d,y){const S=d.shadowRenderer;if(!S)return;const T=S.getShadowPassDepthMode(),I=S.getShadowPassColorMode(),N=S.calculateShadowPassMatrixFromMatrix(l),$=GE(N);d.getOrCreateProgram("modelDepth",{defines:d._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,T,or.disabled,I,nr.backCCW,$,y.id,v.vertexBuffer,v.indexBuffer,v.segments,y.paint,d.transform.zoom,void 0,void 0)}function Zb(v,l,d){const y=l.updateZoomBasedPaintProperties(),S=(function(T,I,N){let $,U,H,X=T.terrain?T.terrain.exaggeration():0;if(T.terrain&&X>0){const q=T.terrain,ne=q.findDEMTileFor(N);ne&&ne.dem?$=i.dr.create(q,N,ne):X=0}if(X===0&&(I.terrainElevationMin=0,I.terrainElevationMax=0),X===I.validForExaggeration&&(X===0||$&&$._demTile&&$._demTile.tileID===I.validForDEMTile.id&&$._dem._timestamp===I.validForDEMTile.timestamp))return!1;for(const q in I.instancesPerModel){const ne=I.instancesPerModel[q];for(let de=0;de<ne.instancedDataArray.length;++de){const ae=($?X*$.getElevationAt(0|ne.instancedDataArray.float32[16*de],0|ne.instancedDataArray.float32[16*de+1],!0,!0):0)+ne.instancesEvaluatedElevation[de];ne.instancedDataArray.float32[16*de+6]=ae,U=U?Math.min(I.terrainElevationMin,ae):ae,H=H?Math.max(I.terrainElevationMax,ae):ae}}return I.terrainElevationMin=U||0,I.terrainElevationMax=H||0,I.validForExaggeration=X,I.validForDEMTile=$&&$._demTile?{id:$._demTile.tileID,timestamp:$._dem._timestamp}:{id:void 0,timestamp:0},!0})(v,l,d);(y||S)&&(l.uploaded=!1,l.upload(v.context))}const Nl={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new i.ce([0,0,0],[i.ai,i.ai,0])};function Kb(v,l){const d=1<<v.canonical.z,y=l.getFreeCameraOptions().position,S=l.elevation,T=v.canonical.x/d,I=(v.canonical.x+1)/d,N=v.canonical.y/d,$=(v.canonical.y+1)/d;let U=l._centerAltitude;if(S){const ne=S.getMinMaxForTile(v);ne&&ne.max>U&&(U=ne.max)}const H=i.ay(y.x,T,I)-y.x,X=i.ay(y.y,N,$)-y.y,q=i.bH(U,l.center.lat)-y.z;return l._zoomFromMercatorZ(Math.sqrt(H*H+X*X+q*q))}function cc(v,l,d,y,S,T,I){const N=v.context,$=v.renderPass==="shadow",U=v.shadowRenderer,H=$&&U?U.getShadowPassDepthMode():new zn(N.gl.LEQUAL,zn.ReadWrite,v.depthRangeFor3D),X=v.isTileAffectedByFog(T);if(d.meshes)for(const q of d.meshes){const ne=["MODEL_POSITION_ON_GPU"],de=[];let ae,he,me;y.instancedDataArray.length>20&&ne.push("INSTANCED_ARRAYS");const Ie=fu(v,l.paint.get("model-cutoff-fade-range"));if(Ie.shouldRenderCutoff&&ne.push("RENDER_CUTOFF"),$&&U)ae=v.getOrCreateProgram("modelDepth",{defines:ne}),he=GE(I.shadowTileMatrix,I.shadowTileMatrix,Float32Array.from(d.matrix)),me=U.getShadowPassColorMode();else{hp(ne,de,q,v,l.paint.get("model-color-use-theme").constantOr("default")==="none"?null:l.lut),ae=v.getOrCreateProgram("model",{defines:ne,overrideFog:X});const De=q.material,Ye=De.pbrMetallicRoughness,Ne=l.paint.get("model-opacity").constantOr(1),Fe=l.paint.get("model-emissive-strength").constantOr(0);he=$b(T.expandedProjMatrix,Float32Array.from(d.matrix),new Float32Array(16),null,v,Ne,Ye.baseColorFactor.toRenderColor(null),De.emissiveFactor,Ye.metallicFactor,Ye.roughnessFactor,De,Fe,l,S),U&&(I.shadowUniformsInitialized?ae.setShadowUniformValues(N,U.getShadowUniformValues()):(U.setupShadows(T.toUnwrapped(),ae,"model-tile",T.overscaledZ),I.shadowUniformsInitialized=!0)),me=Ie.shouldRenderCutoff||Ne<1||De.alphaMode!=="OPAQUE"?br.alphaBlended:br.unblended}v.uploadCommonUniforms(N,ae,T.toUnwrapped(),null,Ie);const Le=q.material.doubleSided?nr.disabled:nr.backCCW;if(y.instancedDataArray.length>20)de.push(y.instancedDataBuffer),ae.draw(v,N.gl.TRIANGLES,H,or.disabled,me,Le,he,l.id,q.vertexBuffer,q.indexBuffer,q.segments,l.paint,v.transform.zoom,void 0,de,y.instancedDataArray.length);else{const De=$?"u_instance":"u_normal_matrix";for(let Ye=0;Ye<y.instancedDataArray.length;++Ye)he[De]=new Float32Array(y.instancedDataArray.arrayBuffer,64*Ye,16),ae.draw(v,N.gl.TRIANGLES,H,or.disabled,me,Le,he,l.id,q.vertexBuffer,q.indexBuffer,q.segments,l.paint,v.transform.zoom,void 0,de)}}if(d.children)for(const q of d.children)cc(v,l,q,y,S,T,I)}const vd=[1,-1,1];function dv(v,l,d,y){if(!d.modelManager)return!0;const S=d.modelManager;if(!d.shadowRenderer)return!0;const T=d.shadowRenderer,I=l.aabb;let N=!0,$=v.maxHeight;if($===0){let H=0;for(const X in v.instancesPerModel){const q=S.getModel(X,y);q?H=Math.max(H,Math.max(Math.max(q.aabb.max[0],q.aabb.max[1]),q.aabb.max[2])):N=!1}$=v.maxScale*H*1.41+v.maxVerticalOffset,N&&(v.maxHeight=$)}I.max[2]=$,I.min[2]+=v.terrainElevationMin,I.max[2]+=v.terrainElevationMax,i.ad.vec3.transformMat4(I.min,I.min,l.tileMatrix),i.ad.vec3.transformMat4(I.max,I.max,l.tileMatrix);const U=I.intersects(T.getCurrentCascadeFrustum());return d.currentShadowCascade===0&&(v.isInsideFirstShadowMapFrustum=U===2),U===0}function hv(v,l){const d=v.uniformValues.u_cutoff_params[0],y=v.uniformValues.u_cutoff_params[1],S=v.uniformValues.u_cutoff_params[2],T=v.uniformValues.u_cutoff_params[3];return y===d||T===S?1:i.ay(((l-d)/(y-d)-S)/(T-S),0,1)}function Jb(v,l,d,y){if(l.pitch<20)return 1;const S=l.getWorldToCameraMatrix();i.ad.mat4.multiply(S,S,v);const T=i.ad.vec4.fromValues(d.min[0],d.min[1],d.min[2],1);let I=i.ad.vec4.transformMat4(i.ad.vec4.create(),T,S),N=I,$=I;T[1]=d.max[1],I=i.ad.vec4.transformMat4(i.ad.vec4.create(),T,S),N=I[1]<N[1]?I:N,$=I[1]>$[1]?I:$,T[0]=d.max[0],I=i.ad.vec4.transformMat4(i.ad.vec4.create(),T,S),N=I[1]<N[1]?I:N,$=I[1]>$[1]?I:$,T[1]=d.min[1],I=i.ad.vec4.transformMat4(i.ad.vec4.create(),T,S),N=I[1]<N[1]?I:N,$=I[1]>$[1]?I:$;const U=i.ay(y[0],0,1),H=100*l.pixelsPerMeter*i.ay(y[1],0,1),X=i.ay(y[2],0,1),q=i.ad.vec4.lerp(i.ad.vec4.create(),N,$,U),ne=Math.tan(.5*l.fovX),de=-q[2]*ne;if(H===0)return q[1]<-Math.abs(de)?X:1;const ae=(-Math.abs(de)-q[1])/H,he=(Ie,Le,De)=>(1-De)*Ie+De*Le,me=i.ay(he(1,X,ae),X,1);return he(1,me,i.ay((l.pitch-20)/20,0,1))}class Qb{}class gh{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(l,d,y){{const X=this._storage.get(d.id);if(X)return X.lastUsedFrameIdx=l,X.buf}const S=y.gl,T=S.getBufferParameter(S.ELEMENT_ARRAY_BUFFER,S.BUFFER_SIZE),I=new ArrayBuffer(T),N=new Int16Array(I);S.getBufferSubData(S.ELEMENT_ARRAY_BUFFER,0,new Int16Array(I));const $=new i.dt;for(let X=0;X<T/2;X+=3){const q=N[X],ne=N[X+1],de=N[X+2];$.emplaceBack(q,ne),$.emplaceBack(ne,de),$.emplaceBack(de,q)}const U=y.bindVertexArrayOES.current,H=new Qb;return H.buf=new Rc(y,$),H.lastUsedFrameIdx=l,this._storage.set(d.id,H),y.bindVertexArrayOES.set(U),H.buf}update(l){for(const[d,y]of this._storage)l-y.lastUsedFrameIdx>30&&(y.buf.destroy(),this._storage.delete(d))}destroy(){for(const[l,d]of this._storage)d.buf.destroy(),this._storage.delete(l)}}class ex{constructor(l){this.occluderSize=30,this.depthOffset=-1e-4,l.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),l.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const bd=i.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class tx{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class Og{constructor(l,d){this.revealStart=11,this.revealRange=2,l.registerParameter(this,[...d,"Reveal"],"revealStart",{min:0,max:17,step:.05}),l.registerParameter(this,[...d,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const nx=i.dd([{type:"Float32",name:"a_pos_2f",components:2}]);class rx{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(l,d){const y=l.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const I=new i.du,N=new i.aV;I.emplaceBack(-1,-1),I.emplaceBack(1,-1),I.emplaceBack(1,1),I.emplaceBack(-1,1),N.emplaceBack(0,1,2),N.emplaceBack(0,2,3),this.vignetteVx=l.context.createVertexBuffer(I,nx.members),this.vignetteIdx=l.context.createIndexBuffer(N)}const S=i.b8.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){l.uploadCommonUniforms(l.context,y);const I={u_vignetteShape:(T={vignetteShape:[d.start,d.range,Math.pow(10,d.fadePower)],vignetteColor:[d.color.r,d.color.g,d.color.b,d.color.a*d.strength]}).vignetteShape,u_vignetteColor:T.vignetteColor};y.draw(l,l.context.gl.TRIANGLES,zn.disabled,or.disabled,br.alphaBlended,nr.disabled,I,"vignette",this.vignetteVx,this.vignetteIdx,S)}var T}}class yo{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(l,d){const y=l.getFreeCameraOptions().position,S=y.toAltitude(),T=y.toLngLat(),I=i.ak(T.lng),N=i.ak(T.lat),$=l.pixelsPerMeter/d,U=I*i.dv,H=i.dv*Math.log(Math.tan(Math.PI/4+N/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const X=-this._offsetYPrev+H,q=-this._elevationPrev+S;this._accumulatedOffsetX+=(-this._offsetXPrev+U)*$,this._accumulatedOffsetY+=X*$,this._accumulatedElevation+=q*$,this._offsetXPrev=U,this._offsetYPrev=H,this._elevationPrev=S}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function fv(v,l){return[-(v[0]-Math.floor(v[0]/l)*l),-(v[1]-Math.floor(v[1]/l)*l),-(v[2]-Math.floor(v[2]/l)*l)]}function pv(v){const l=i.dl(1323123451230),d=[];for(let y=0;y<v;++y){const S=2*l()-1,T=2*l()-1,I=2*l()-1;d.push(i.ad.vec3.fromValues(S,T,I))}return d}function Ia(v,l,d,y,S){const T=i.ay((S-d)/(y-d),0,1);return(1-T)*v+T*l}class mv{constructor(l){this._movement=new yo,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new rx,this._ppmScaleFactor=l}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(l,d){const y=l.transform;this._movement.update(y,this._ppmScaleFactor);const S=y.starsProjMatrix,T=i.ad.quat.identity([]);i.ad.quat.rotateX(T,T,i.ak(90)-y._pitch),i.ad.quat.rotateZ(T,T,-y.angle);const I=i.ad.mat4.fromQuat(new Float32Array(16),T),N=i.ad.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),$=i.ad.mat4.transpose([],N),U=i.ad.mat4.multiply([],$,I),H=Date.now()/1e3;return this._accumulatedTimeFromStart+=(H-this._prevTime)*d,this._prevTime=H,{projectionMatrix:S,modelviewMatrix:U}}}class ix extends mv{constructor(l){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new Og(l.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(l){const d=l.context;if(!this.particlesVx){const y=pv(this.particlesCount),S=new i.dw,T=new i.aV;let I=0;const N=i.dl(1323123451230);for(let $=0;$<y.length;++$){const U=y[$],H=[2*N()-1,N(),N(),N()];S.emplaceBack(U[0],U[1],U[2],-1,-1,...H),S.emplaceBack(U[0],U[1],U[2],1,-1,...H),S.emplaceBack(U[0],U[1],U[2],1,1,...H),S.emplaceBack(U[0],U[1],U[2],-1,1,...H),T.emplaceBack(I+0,I+1,I+2),T.emplaceBack(I+0,I+2,I+3),I+=4}this.particlesVx=d.createVertexBuffer(S,bd.members),this.particlesIdx=d.createIndexBuffer(T)}}draw(l){if(!this._params.overrideStyleParameters&&!l.style.rain)return;const d=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},y=l.transform.zoom;if(d.revealStart>y)return;const S=Ia(0,1,d.revealStart,d.revealStart+d.revealRange,y);if(!this.particlesVx||!this.particlesIdx)return;const T=structuredClone(this._params);let I=[-T.direction.x,T.direction.y,-100];i.ad.vec3.normalize(I,I);const N=structuredClone(this._vignetteParams);N.strength*=S,T.overrideStyleParameters||(T.intensity=l.style.rain.state.density,T.timeFactor=l.style.rain.state.intensity,T.color=structuredClone(l.style.rain.state.color),I=structuredClone(l.style.rain.state.direction),T.screenThinning.intensity=l.style.rain.state.centerThinning,T.dropletSizeX=l.style.rain.state.dropletSize[0],T.dropletSizeYScale=l.style.rain.state.dropletSize[1]/l.style.rain.state.dropletSize[0],T.distortionStrength=100*l.style.rain.state.distortionStrength,N.strength=1,N.color=structuredClone(l.style.rain.state.vignetteColor));const $=this.updateOnRender(l,T.timeFactor),U=l.context,H=U.gl,X=l.transform;this.screenTexture&&this.screenTexture.size[0]===l.width&&this.screenTexture.size[1]===l.height||(this.screenTexture=new i.T(U,{width:l.width,height:l.height,data:null},H.RGBA8)),T.distortionStrength>0&&(U.activeTexture.set(H.TEXTURE0),this.screenTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),H.copyTexSubImage2D(H.TEXTURE_2D,0,0,0,0,0,l.width,l.height));const q=l.getOrCreateProgram("rainParticle");l.uploadCommonUniforms(U,q),U.activeTexture.set(H.TEXTURE0),this.screenTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE);const ne=[T.color.r,T.color.g,T.color.b,T.color.a],de=(ae,he)=>{const me=fv(this._movement.getPosition(),ae),Ie=T.dropletSizeX,Le=T.dropletSizeX*T.dropletSizeYScale,De=l.width/2,Ye=l.height/2,Ne=Ia(0,T.screenThinning.start,0,1,T.screenThinning.intensity),Fe=Ia(.001,T.screenThinning.range,0,1,T.screenThinning.intensity),Be=Ia(0,T.screenThinning.particleOffset,0,1,T.screenThinning.intensity),Qe=(tt={modelview:$.modelviewMatrix,projection:$.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:me,velocityConeAperture:T.velocityConeAperture,velocity:T.velocity,boxSize:ae,rainDropletSize:[Ie,Le],distortionStrength:T.distortionStrength,rainDirection:I,color:ne,screenSize:[X.width,X.height],thinningCenterPos:[De,Ye],thinningShape:[Ne,Fe,Math.pow(10,T.screenThinning.fadePower)],thinningAffectedRatio:T.screenThinning.affectedRatio,thinningParticleOffset:Be,shapeDirectionalPower:T.shapeDirPower,shapeNormalPower:T.shapeNormalPower,mode:he?0:1},{u_modelview:Float32Array.from(tt.modelview),u_projection:Float32Array.from(tt.projection),u_time:tt.time,u_cam_pos:tt.camPos,u_texScreen:0,u_velocityConeAperture:tt.velocityConeAperture,u_velocity:tt.velocity,u_boxSize:tt.boxSize,u_rainDropletSize:tt.rainDropletSize,u_distortionStrength:tt.distortionStrength,u_rainDirection:tt.rainDirection,u_color:tt.color,u_screenSize:tt.screenSize,u_thinningCenterPos:tt.thinningCenterPos,u_thinningShape:tt.thinningShape,u_thinningAffectedRatio:tt.thinningAffectedRatio,u_thinningParticleOffset:tt.thinningParticleOffset,u_shapeDirectionalPower:tt.shapeDirectionalPower,u_shapeNormalPower:tt.shapeNormalPower,u_mode:tt.mode});var tt;const Ot=Math.round(T.intensity*this.particlesCount),bt=i.b8.simpleSegment(0,0,4*Ot,2*Ot);q.draw(l,H.TRIANGLES,zn.disabled,or.disabled,br.alphaBlended,nr.disabled,Qe,"rain_particles",this.particlesVx,this.particlesIdx,bt)};T.distortionStrength>0&&de(T.boxSize,!0),de(T.boxSize,!1),this._vignette.draw(l,N)}}const sx=i.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class fp extends mv{constructor(l){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new Og(l.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(l){const d=l.context;if(!this.particlesVx){const y=pv(this.particlesCount),S=new i.dx,T=new i.aV;let I=0;const N=i.dl(1323123451230);for(let $=0;$<y.length;++$){const U=y[$],H=N(),X=N(),q=N(),ne=[$/y.length,H,X,q],de=[N(),N()];S.emplaceBack(U[0],U[1],U[2],-1,-1,...ne,...de),S.emplaceBack(U[0],U[1],U[2],1,-1,...ne,...de),S.emplaceBack(U[0],U[1],U[2],1,1,...ne,...de),S.emplaceBack(U[0],U[1],U[2],-1,1,...ne,...de),T.emplaceBack(I+0,I+1,I+2),T.emplaceBack(I+0,I+2,I+3),I+=4}this.particlesVx=d.createVertexBuffer(S,sx.members),this.particlesIdx=d.createIndexBuffer(T)}}draw(l){if(!this._params.overrideStyleParameters&&!l.style.snow)return;const d=structuredClone(this._params);let y=[-d.direction.x,d.direction.y,-100];i.ad.vec3.normalize(y,y);const S=structuredClone(this._vignetteParams),T=d.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},I=l.transform.zoom;if(T.revealStart>I)return;const N=Ia(0,1,T.revealStart,T.revealStart+T.revealRange,I);S.strength*=N,d.overrideStyleParameters||(d.intensity=l.style.snow.state.density,d.timeFactor=l.style.snow.state.intensity,d.color=structuredClone(l.style.snow.state.color),y=structuredClone(l.style.snow.state.direction),d.screenThinning.intensity=l.style.snow.state.centerThinning,d.billboardSize=2.79*l.style.snow.state.flakeSize,S.strength=1,S.color=structuredClone(l.style.snow.state.vignetteColor));const $=this.updateOnRender(l,d.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const U=l.context,H=U.gl,X=l.transform,q=l.getOrCreateProgram("snowParticle");l.uploadCommonUniforms(U,q),((ne,de,ae)=>{const he=fv(this._movement.getPosition(),ne),me=X.width/2,Ie=X.height/2,Le=Ia(0,ae.screenThinning.start,0,1,ae.screenThinning.intensity),De=Ia(.001,ae.screenThinning.range,0,1,ae.screenThinning.intensity),Ye=Ia(0,ae.screenThinning.particleOffset,0,1,ae.screenThinning.intensity),Ne=(Fe={modelview:$.modelviewMatrix,projection:$.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:he,velocityConeAperture:ae.velocityConeAperture,velocity:ae.velocity,horizontalOscillationRadius:ae.horizontalOscillationRadius,horizontalOscillationRate:ae.horizontalOscillationRate,boxSize:ne,billboardSize:1*ae.billboardSize,simpleShapeParameters:[ae.shapeFadeStart,ae.shapeFadePower],screenSize:[X.width,X.height],thinningCenterPos:[me,Ie],thinningShape:[Le,De,Math.pow(10,ae.screenThinning.fadePower)],thinningAffectedRatio:ae.screenThinning.affectedRatio,thinningParticleOffset:Ye,color:[ae.color.r,ae.color.g,ae.color.b,ae.color.a],direction:y},{u_modelview:Float32Array.from(Fe.modelview),u_projection:Float32Array.from(Fe.projection),u_time:Fe.time,u_cam_pos:Fe.camPos,u_velocityConeAperture:Fe.velocityConeAperture,u_velocity:Fe.velocity,u_horizontalOscillationRadius:Fe.horizontalOscillationRadius,u_horizontalOscillationRate:Fe.horizontalOscillationRate,u_boxSize:Fe.boxSize,u_billboardSize:Fe.billboardSize,u_simpleShapeParameters:Fe.simpleShapeParameters,u_screenSize:Fe.screenSize,u_thinningCenterPos:Fe.thinningCenterPos,u_thinningShape:Fe.thinningShape,u_thinningAffectedRatio:Fe.thinningAffectedRatio,u_thinningParticleOffset:Fe.thinningParticleOffset,u_particleColor:Fe.color,u_direction:Fe.direction});var Fe;const Be=Math.round(ae.intensity*this.particlesCount),Qe=i.b8.simpleSegment(0,0,4*Be,2*Be);this.particlesVx&&this.particlesIdx&&q.draw(l,H.TRIANGLES,zn.disabled,or.disabled,br.alphaBlended,nr.disabled,Ne,"snow_particles",this.particlesVx,this.particlesIdx,Qe)})(d.boxSize,0,d),this._vignette.draw(l,S)}}const Dg={symbol:function(v,l,d,y,S){if(v.renderPass!=="translucent")return;const T=or.disabled,I=v.colorModeForRenderPass(),N=d.layout.get("text-variable-anchor"),$=d.layout.get("text-size-scale-range"),U=i.ay(v.scaleFactor,$[0],$[1]);N&&(function(q,ne,de,ae,he,me,Ie,Le){const De=ne.transform,Ye=he==="map",Ne=me==="map";for(const Fe of q){const Be=ae.getTile(Fe),Qe=Be.getBucket(de);if(!Qe||!Qe.text||!Qe.text.segments.get().length)continue;const tt=i.bp(Qe.textSizeData,De.zoom,Le),Ot=el(Fe,Qe.getProjection(),De),bt=De.calculatePixelsToTileUnitsMatrix(Be),Ht=lu(Ot,Be.tileID.canonical,Ne,Ye,De,Qe.getProjection(),bt),Wt=Qe.hasIconTextFit()&&Qe.hasIconData();if(tt){const sn=Math.pow(2,De.zoom-Be.tileID.overscaledZ);Ll(Qe,Ye,Ne,Ie,i.cY,De,Ht,Fe,sn,tt,Wt)}}})(y,v,d,l,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),S,U);const H=d.paint.get("icon-opacity").constantOr(1)!==0,X=d.paint.get("text-opacity").constantOr(1)!==0;d.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(H||X)?vi(v,l,d,y,T,I):(H&&vi(v,l,d,y,T,I,{onlyIcons:!0}),X&&vi(v,l,d,y,T,I,{onlyText:!0})),l.map.showCollisionBoxes&&(sv(v,l,d,y,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),sv(v,l,d,y,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(v,l,d,y){if(v.renderPass!=="translucent")return;const S=d.paint.get("circle-opacity"),T=d.paint.get("circle-stroke-width"),I=d.paint.get("circle-stroke-opacity"),N=d.layout.get("circle-sort-key").constantOr(1)!==void 0,$=d.paint.get("circle-emissive-strength");if(S.constantOr(1)===0&&(T.constantOr(1)===0||I.constantOr(1)===0))return;const U=v.context,H=U.gl,X=v.transform,q=v.depthModeForSublayer(0,zn.ReadOnly),ne=or.disabled,de=v.colorModeForDrapableLayerRenderPass($),ae=X.projection.name==="globe",he=[i.av(X.center.lng),i.aC(X.center.lat)],me=[];for(let Le=0;Le<y.length;Le++){const De=y[Le],Ye=l.getTile(De),Ne=Ye.getBucket(d);if(!Ne||Ne.projection.name!==X.projection.name)continue;const Fe=Ne.programConfigurations.get(d.id),Be=i.cZ(d),Qe=v.isTileAffectedByFog(De);ae&&Be.push("PROJECTION_GLOBE_VIEW"),Be.push("DEPTH_D24"),v.terrain&&X.depthOcclusionForSymbolsAndCircles&&Be.push("DEPTH_OCCLUSION");const tt=v.getOrCreateProgram("circle",{config:Fe,defines:Be,overrideFog:Qe}),Ot=Ne.layoutVertexBuffer,bt=Ne.globeExtVertexBuffer,Ht=Ne.indexBuffer,Wt=X.projection.createInversionMatrix(X,De.canonical),sn={programConfiguration:Fe,program:tt,layoutVertexBuffer:Ot,globeExtVertexBuffer:bt,indexBuffer:Ht,uniformValues:i.c_(v,De,Ye,Wt,he,d),tile:Ye};if(N){const gt=Ne.segments.get();for(const Ut of gt)me.push({segments:new i.b8([Ut]),sortKey:Ut.sortKey,state:sn})}else me.push({segments:Ne.segments,sortKey:0,state:sn})}N&&me.sort(((Le,De)=>Le.sortKey-De.sortKey));const Ie={useDepthForOcclusion:X.depthOcclusionForSymbolsAndCircles};for(const Le of me){const{programConfiguration:De,program:Ye,layoutVertexBuffer:Ne,globeExtVertexBuffer:Fe,indexBuffer:Be,uniformValues:Qe,tile:tt}=Le.state,Ot=Le.segments;v.terrain&&v.terrain.setupElevationDraw(tt,Ye,Ie),v.uploadCommonUniforms(U,Ye,tt.tileID.toUnwrapped()),Ye.draw(v,H.TRIANGLES,q,ne,de,nr.disabled,Qe,d.id,Ne,Be,Ot,d.paint,X.zoom,De,[Fe])}},heatmap:function(v,l,d,y){if(d.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const S=v.context,T=S.gl,I=or.disabled,N=new br([T.ONE,T.ONE,T.ONE,T.ONE],i.al.transparent,[!0,!0,!0,!0]);(function(ne,de,ae,he){const me=ne.gl,Ie=de.width*he,Le=de.height*he;ne.activeTexture.set(me.TEXTURE1),ne.viewport.set([0,0,Ie,Le]);let De=ae.heatmapFbo;if(!De||De&&(De.width!==Ie||De.height!==Le)){De&&De.destroy();const Ye=me.createTexture();me.bindTexture(me.TEXTURE_2D,Ye),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_S,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_T,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MIN_FILTER,me.LINEAR),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MAG_FILTER,me.LINEAR),De=ae.heatmapFbo=ne.createFramebuffer(Ie,Le,!0,null),(function(Ne,Fe,Be,Qe,tt,Ot){const bt=Ne.gl;bt.texImage2D(bt.TEXTURE_2D,0,Ne.extRenderToTextureHalfFloat?bt.RGBA16F:bt.RGBA,tt,Ot,0,bt.RGBA,Ne.extRenderToTextureHalfFloat?bt.HALF_FLOAT:bt.UNSIGNED_BYTE,null),Qe.colorAttachment.set(Be)})(ne,0,Ye,De,Ie,Le)}else me.bindTexture(me.TEXTURE_2D,De.colorAttachment.get()),ne.bindFramebuffer.set(De.framebuffer)})(S,v,d,v.transform.projection.name==="globe"?.5:.25),S.clear({color:i.al.transparent});const $=v.transform,U=$.projection.name==="globe",H=U?["PROJECTION_GLOBE_VIEW"]:[],X=U?nr.frontCCW:nr.disabled,q=[i.av($.center.lng),i.aC($.center.lat)];for(let ne=0;ne<y.length;ne++){const de=y[ne];if(l.hasRenderableParent(de))continue;const ae=l.getTile(de),he=ae.getBucket(d);if(!he||he.projection.name!==$.projection.name)continue;const me=v.isTileAffectedByFog(de),Ie=he.programConfigurations.get(d.id),Le=v.getOrCreateProgram("heatmap",{config:Ie,defines:H,overrideFog:me}),{zoom:De}=v.transform;v.terrain&&v.terrain.setupElevationDraw(ae,Le),v.uploadCommonUniforms(S,Le,de.toUnwrapped());const Ye=$.projection.createInversionMatrix($,de.canonical);Le.draw(v,T.TRIANGLES,zn.disabled,I,N,X,nv(v,de,ae,Ye,q,De,d.paint.get("heatmap-intensity")),d.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,d.paint,v.transform.zoom,Ie,U?[he.globeExtVertexBuffer]:null)}S.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),(function(S,T){const I=S.context,N=I.gl,$=T.heatmapFbo;if(!$)return;I.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,$.colorAttachment.get()),I.activeTexture.set(N.TEXTURE1);let U=T.colorRampTexture;U||(U=T.colorRampTexture=new i.T(I,T.colorRamp,N.RGBA8)),U.bind(N.LINEAR,N.CLAMP_TO_EDGE),S.getOrCreateProgram("heatmapTexture").draw(S,N.TRIANGLES,zn.disabled,or.disabled,S.colorModeForRenderPass(),nr.disabled,((H,X,q,ne)=>({u_image:0,u_color_ramp:1,u_opacity:X.paint.get("heatmap-opacity")}))(0,T),T.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,T.paint,S.transform.zoom)})(v,d))},line:function(v,l,d,y){if(v.renderPass!=="translucent")return;const S=d.paint.get("line-opacity"),T=d.paint.get("line-width");if(S.constantOr(1)===0||T.constantOr(1)===0)return;const I=d.paint.get("line-emissive-strength"),N=d.paint.get("line-occlusion-opacity"),$=d.layout.get("line-elevation-reference"),U=d.layout.get("line-width-unit")==="meters",H=$==="sea",X=v.context,q=X.gl;if(d.hasElevatedBuckets&&v.transform.projection.name==="globe")return;const ne=d.layout.get("line-cross-slope"),de=ne!==void 0,ae=ne<1,he=v.colorModeForDrapableLayerRenderPass(I),me=v.terrain&&v.terrain.renderingToTexture,Ie=me?1:i.q.devicePixelRatio,Le=d.paint.get("line-dasharray"),De=Le.constantOr(1),Ye=d.layout.get("line-cap"),Ne=Le.constantOr(null),Fe=Ye.constantOr(null),Be=d.paint.get("line-pattern"),Qe=Be.constantOr(1),tt=Be.constantOr(null),Ot=d.paint.get("line-opacity").constantOr(1);let bt=!Qe&&Ot!==1||v.depthOcclusion&&N>0&&N<1;const Ht=d.paint.get("line-gradient"),Wt=Qe?"linePattern":"line",sn=i.c$(d);let gt;if(me&&v.terrain&&v.terrain.clipOrMaskOverlapStencilType()&&(bt=!1),N!==0&&v.depthOcclusion){const ft=d.paint._values["line-opacity"];ft&&ft.value&&ft.value.kind==="constant"?gt=ft.value:i.w(`Occlusion opacity for layer ${d.id} is supported only when line-opacity isn't data-driven.`)}T.value.kind!=="constant"&&T.value.isLineProgressConstant===!1&&sn.push("VARIABLE_LINE_WIDTH");const Ut=(ft,jt,Bt,Gt,Dt,qt)=>{for(const _n of ft){const yn=l.getTile(_n);if(Qe&&!yn.patternsLoaded())continue;const wn=yn.getBucket(d);if(!wn||wn.hasZOffset&&!Dt||!wn.hasZOffset&&Dt)continue;v.prepareDrawTile();const Rn=wn.programConfigurations.get(d.id),rr=v.isTileAffectedByFog(_n),Vn=v.getOrCreateProgram(Wt,{config:Rn,defines:jt,overrideFog:rr,overrideRtt:!Dt&&void 0});if(tt&&yn.imageAtlas){const ar=i.d0.from(tt).getPrimary().scaleSelf(Ie).toString(),kn=yn.imageAtlas.patternPositions.get(ar);kn&&Rn.setConstantPatternPositions(kn)}if(!Qe&&Ne&&Fe&&yn.lineAtlas){const ar=yn.lineAtlas.getDash(Ne,Fe);ar&&Rn.setConstantPatternPositions(ar)}let[er,Zn]=d.paint.get("line-trim-offset");(Fe==="round"||Fe==="square")&&er!==Zn&&(er===0&&(er-=1),Zn===1&&(Zn+=1));const Mr=me?_n.projMatrix:null,qr=U?1/wn.tileToMeter/i.at(yn,1,v.transform.zoom):1,Si=U?1/wn.tileToMeter/i.at(yn,1,Math.floor(v.transform.zoom)):1,vr=Qe?i.d1(v,yn,d,Mr,Ie,qr,Si,[er,Zn]):i.d2(v,yn,d,Mr,wn.lineClipsArray.length,Ie,qr,Si,[er,Zn]);if(Ht){const ar=wn.gradients[d.id];let kn=ar.texture;if(d.gradientVersion!==ar.version){let Ir=256;if(d.stepInterpolant){const si=l.getSource().maxzoom,Br=_n.canonical.z===si?Math.ceil(1<<v.transform.maxZoom-_n.canonical.z):1;Ir=i.ay(i.d3(wn.maxLineLength/i.ai*1024*Br),256,X.maxTextureSize)}ar.gradient=i.d4({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:Ir,image:ar.gradient||void 0,clips:wn.lineClipsArray}),ar.texture?ar.texture.update(ar.gradient):ar.texture=new i.T(X,ar.gradient,q.RGBA8),ar.version=d.gradientVersion,kn=ar.texture}X.activeTexture.set(q.TEXTURE1),kn.bind(d.stepInterpolant?q.NEAREST:q.LINEAR,q.CLAMP_TO_EDGE)}De&&(X.activeTexture.set(q.TEXTURE0),yn.lineAtlasTexture&&yn.lineAtlasTexture.bind(q.LINEAR,q.REPEAT),Rn.updatePaintBuffers()),Qe&&(X.activeTexture.set(q.TEXTURE0),yn.imageAtlasTexture&&yn.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Rn.updatePaintBuffers()),Dt&&!H&&v.terrain.setupElevationDraw(yn,Vn),v.uploadCommonUniforms(X,Vn,_n.toUnwrapped());const $i=ar=>{gt!=null&&(gt.value=Ot*N),Vn.draw(v,q.TRIANGLES,Bt,ar,he,nr.disabled,vr,d.id,wn.layoutVertexBuffer,wn.indexBuffer,wn.segments,d.paint,v.transform.zoom,Rn,[wn.layoutVertexBuffer2,wn.patternVertexBuffer,wn.zOffsetVertexBuffer]),gt!=null&&(gt.value=Ot)};if(bt&&!Dt){const ar=v.stencilModeForClipping(_n).ref;ar===0&&me&&X.clear({stencil:0});const kn={func:q.EQUAL,mask:255};vr.u_alpha_discard_threshold=.8,$i(new or(kn,ar,255,q.KEEP,q.KEEP,q.INVERT)),vr.u_alpha_discard_threshold=0,$i(new or(kn,ar,255,q.KEEP,q.KEEP,q.KEEP))}else vr.u_alpha_discard_threshold=bt&&Dt&&qt?.8:0,$i(Dt?Gt:v.stencilModeForClipping(_n))}};if(d.hasNonElevatedBuckets){const ft=!me&&v.terrain;N!==0&&ft?i.w(`Occlusion opacity for layer ${d.id} is supported on terrain only if the layer has line-z-offset enabled.`):ft?i.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${d.id}.`):Ut(y,sn,v.depthModeForSublayer(0,zn.ReadOnly),or.disabled,!1,!0)}if(d.hasElevatedBuckets){sn.push("ELEVATED"),de&&sn.push(ae?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),H&&sn.push("ELEVATION_REFERENCE_SEA");const ft=bt?v.stencilModeFor3D():or.disabled,jt=new zn(v.depthOcclusion?q.GREATER:q.LEQUAL,zn.ReadOnly,v.depthRangeFor3D);v.forceTerrainMode=!0,Ut(y,sn,jt,ft,!0,!0),bt&&Ut(y,sn,jt,ft,!0,!1),v.forceTerrainMode=!1}bt&&(v.resetStencilClippingMasks(),me&&X.clear({stencil:0})),N===0||v.depthOcclusion||me||v.layersWithOcclusionOpacity.push(v.currentLayer)},fill:function(v,l,d,y){const S=d.paint.get("fill-color"),T=d.paint.get("fill-opacity");if(T.constantOr(1)===0)return;const I=d.paint.get("fill-emissive-strength"),N=v.colorModeForDrapableLayerRenderPass(I),$=d.paint.get("fill-pattern"),U=v.opaquePassEnabledForLayer()&&!$.constantOr(1)&&S.constantOr(i.al.transparent).a===1&&T.constantOr(0)===1?"opaque":"translucent";let H="none";d.layout.get("fill-elevation-reference")!=="none"?H="road":d.paint.get("fill-z-offset").constantOr(1)!==0&&(H="offset");const X=!(!v.terrain||!v.terrain.enabled),q={painter:v,sourceCache:l,layer:d,coords:y,colorMode:N,elevationType:H,terrainEnabled:X,pass:U};if(H!=="offset"){if(av(q,!1),H==="road"){const ne=!X&&v.renderPass==="translucent";ne&&Wb(v,l,d,y,"geometry"),av(q,!0,or.disabled),ne&&(function(de){const{painter:ae,sourceCache:he,layer:me,coords:Ie,colorMode:Le}=de,De=ae.context.gl,Ye=new zn(ae.context.gl.LEQUAL,zn.ReadOnly,ae.depthRangeFor3D);for(const Ne of Ie){const Fe=he.getTile(Ne),Be=Fe.getBucket(me);if(!Be)continue;const Qe=Be.elevatedStructures;if(!Qe||!Qe.renderableSegments||Qe.renderableSegments.segments[0].primitiveLength===0)continue;ae.prepareDrawTile();const tt=Be.bufferData.programConfigurations.get(me.id),Ot=ae.isTileAffectedByFog(Ne),bt=ae.getOrCreateProgram("elevatedStructures",{config:tt,overrideFog:Ot,defines:["NORMAL_OFFSET"]}),Ht={u_matrix:ae.translatePosMatrix(Ne.projMatrix,Fe,me.paint.get("fill-translate"),me.paint.get("fill-translate-anchor"))};ae.uploadCommonUniforms(ae.context,bt,Ne.toUnwrapped()),bt.draw(ae,De.TRIANGLES,Ye,or.disabled,Le,nr.backCCW,Ht,me.id,Qe.vertexBuffer,Qe.indexBuffer,Qe.renderableSegments,me.paint,ae.transform.zoom,tt,[Qe.vertexBufferNormal])}})(q)}}else av(q,!1,v.stencilModeFor3D())},"fill-extrusion":function(v,l,d,y){const S=d.paint.get("fill-extrusion-opacity"),T=v.context,I=T.gl,N=v.terrain,$=N&&N.renderingToTexture;if(S===0)return;const U=v.conflationActive&&v.style.isLayerClipped(d,l.getSource()),H=v.style.order.indexOf(d.fqid);if(U&&(function(X,q,ne,de,ae){for(const he of de){const me=q.getTile(he).getBucket(ne);me&&(me.updateReplacement(he,X.replacementSource,ae),me.uploadCentroid(X.context))}})(v,l,d,y,H),N||U)for(const X of y){const q=l.getTile(X).getBucket(d);q&&ap(v.context,l,X,q,d,N,U)}if(v.renderPass==="shadow"&&v.shadowRenderer){const X=v.shadowRenderer;if(N&&S<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof i.ab)return;const q=X.getShadowPassDepthMode(),ne=X.getShadowPassColorMode();Cg(v,l,d,y,q,or.disabled,ne,U)}else if(v.renderPass==="translucent"){const X=!d.paint.get("fill-extrusion-pattern").constantOr(1),q=d.paint.get("fill-extrusion-color").constantOr(i.al.white);if(!$&&q.a!==0){const ne=new zn(v.context.gl.LEQUAL,zn.ReadWrite,v.depthRangeFor3D);S===1&&X?Cg(v,l,d,y,ne,or.disabled,br.unblended,U):(Cg(v,l,d,y,ne,or.disabled,br.disabled,U),Cg(v,l,d,y,ne,v.stencilModeFor3D(),v.colorModeForRenderPass(),U),v.resetStencilClippingMasks())}if(v.style.enable3dLights()&&X&&(!N&&v.transform.projection.name!=="globe"||$)){const ne=d.paint.get("fill-extrusion-opacity"),de=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),ae=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),he=d.paint.get("fill-extrusion-flood-light-intensity"),me=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Ie=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(me?null:d.lut).toArray01().slice(0,3),Le=de>0&&ae>0,De=he>0,Ye=(Fe,Be,Qe)=>(1-Qe)*Fe+Qe*Be,Ne=Fe=>{const Be=v.depthModeForSublayer(1,zn.ReadOnly,I.LEQUAL,!0),Qe=d.paint.get(Fe?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),tt=Ye(.1,3,Qe),Ot=v._showOverdrawInspector;if(!Ot){const bt=new or({func:I.ALWAYS,mask:255},255,255,I.KEEP,I.KEEP,I.REPLACE),Ht=new br([I.ONE,I.ONE,I.ONE,I.ONE],i.al.transparent,[!1,!1,!1,!0],I.MIN);op(v,l,d,y,Be,bt,Ht,nr.disabled,Fe,"sdf",ne,de,ae,he,Ie,tt,U,!1)}{const bt=Ot?or.disabled:new or({func:I.EQUAL,mask:255},255,255,I.KEEP,I.DECR,I.DECR),Ht=Ot?v.colorModeForRenderPass():new br([I.ONE_MINUS_DST_ALPHA,I.DST_ALPHA,I.ONE,I.ONE],i.al.transparent,[!0,!0,!0,!0]);op(v,l,d,y,Be,bt,Ht,nr.disabled,Fe,"color",ne,de,ae,he,Ie,tt,U,!1)}};if($){const Fe=(Be,Qe,tt)=>{const Ot=v.depthModeForSublayer(1,zn.ReadOnly,I.LEQUAL,!1),bt=d.paint.get(Be?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ht=Ye(.1,3,bt);{const Wt=new br([I.ONE,I.ONE,I.ONE,I.ONE],i.al.transparent,[!1,!1,!1,!0]);op(v,l,d,y,Ot,or.disabled,Wt,nr.disabled,Be,"clear",ne,de,ae,he,Ie,Ht,U,Qe)}{const Wt=new or({func:I.ALWAYS,mask:255},255,255,I.KEEP,I.KEEP,I.REPLACE),sn=new br([I.ONE,I.ONE,I.ONE,I.ONE],i.al.transparent,[!1,!1,!1,!0],I.MIN);op(v,l,d,y,Ot,Wt,sn,nr.disabled,Be,"sdf",ne,de,ae,he,Ie,Ht,U,Qe)}{const Wt=Be?I.ZERO:I.ONE_MINUS_DST_ALPHA,sn=new or({func:I.EQUAL,mask:255},255,255,I.KEEP,I.DECR,I.DECR),gt=new br([Wt,I.DST_ALPHA,I.ONE_MINUS_DST_ALPHA,I.ZERO],i.al.transparent,[!0,!0,!0,!0]);op(v,l,d,y,Ot,sn,gt,nr.disabled,Be,"color",ne,de,ae,he,Ie,Ht,U,Qe)}{const Wt=new br([I.ONE,I.ONE,I.ONE,Be?I.ZERO:I.ONE],i.al.transparent,[!1,!1,!1,!0],Be?I.FUNC_ADD:I.MAX);op(v,l,d,y,Ot,or.disabled,Wt,nr.disabled,Be,"clear",ne,de,ae,he,Ie,Ht,U,Qe,tt)}};if(Le||De){let Be;if(v.prepareDrawTile(),N){const Qe=N.drapeBufferSize[0],tt=N.drapeBufferSize[1];Be=N.framebufferCopyTexture,Be&&(!Be||Be.size[0]===Qe&&Be.size[1]===tt)||(Be&&Be.destroy(),Be=N.framebufferCopyTexture=new i.T(T,new i.r({width:Qe,height:tt}),I.RGBA8)),Be.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.copyTexSubImage2D(I.TEXTURE_2D,0,0,0,0,0,Qe,tt)}Le&&Fe(!0,!1,Be),De&&Fe(!1,!0,Be)}}else Le&&Ne(!0),De&&Ne(!1),(Le||De)&&v.resetStencilClippingMasks()}}},hillshade:function(v,l,d,y){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent"||v.style.disableElevatedTerrain)return;const S=v.context,T=v.terrain&&v.terrain.renderingToTexture,[I,N]=v.renderPass!=="translucent"||T?[{},y]:v.stencilConfigForOverlap(y);for(const $ of N){const U=l.getTile($);if(U.needsHillshadePrepare&&v.renderPass==="offscreen")RO(v,U,d);else if(v.renderPass==="translucent"){const H=v.depthModeForSublayer(0,zn.ReadOnly),X=d.paint.get("hillshade-emissive-strength"),q=v.colorModeForDrapableLayerRenderPass(X),ne=T&&v.terrain?v.terrain.stencilModeForRTTOverlap($):I[$.overscaledZ];Kf(v,$,U,d,H,ne,q)}}S.viewport.set([0,0,v.width,v.height]),v.resetStencilClippingMasks()},raster:function(v,l,d,y,S,T){if(v.renderPass!=="translucent"||d.paint.get("raster-opacity")===0)return;const I=v.transform.projection.name==="globe",N=d.paint.get("raster-elevation")!==0,$=N&&I;if(v.renderElevatedRasterBackface&&!$)return;const U=v.context,H=U.gl,X=l.getSource(),q=(function(Ne,Fe,Be,Qe){const tt=Fe.paint.get("raster-color"),Ot=Ne.type==="raster-array",bt=[],Ht=Fe.paint.get("raster-resampling"),Wt=Fe.paint.get("raster-color-mix");let sn=Fe.paint.get("raster-color-range");const gt=[Wt[0],Wt[1],Wt[2],0],Ut=Wt[3];let ft=Ht==="nearest"?Qe.NEAREST:Qe.LINEAR;if(Ot&&(bt.push("RASTER_ARRAY"),tt||bt.push("RASTER_COLOR"),Ht==="linear"&&bt.push("RASTER_ARRAY_LINEAR"),ft=Qe.NEAREST,!sn&&Ne.rasterLayers)){const jt=Ne.rasterLayers.find((({id:Bt})=>Bt===Fe.sourceLayer));jt&&jt.fields&&jt.fields.range&&(sn=jt.fields.range)}if(sn=sn||[0,1],tt){bt.push("RASTER_COLOR"),Be.activeTexture.set(Qe.TEXTURE2),Fe.updateColorRamp(sn);let jt=Fe.colorRampTexture;jt||(jt=Fe.colorRampTexture=new i.T(Be,Fe.colorRamp,Qe.RGBA8)),jt.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE)}return{mix:gt,range:sn,offset:Ut,defines:bt,resampling:ft}})(X,d,U,H);if(X instanceof i.aK&&!y.length&&!I)return;const ne=d.paint.get("raster-emissive-strength"),de=v.colorModeForDrapableLayerRenderPass(ne),ae=v.terrain&&v.terrain.renderingToTexture,he=!v.options.moving,me=d.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;if(X instanceof i.aK&&!y.length&&(X.onNorthPole||X.onSouthPole)){const Ne=N?v.stencilModeFor3D():or.disabled;return void Tt(!!X.onNorthPole,null,v,l,d,ne,q,nr.disabled,Ne)}if(!y.length)return;const[Ie,Le]=X instanceof i.aK||ae?[{},y]:v.stencilConfigForOverlap(y),De=Le[Le.length-1].overscaledZ;$&&q.defines.push("PROJECTION_GLOBE_VIEW"),N&&q.defines.push("RENDER_CUTOFF");const Ye=(Ne,Fe,Be)=>{for(const Qe of Ne){const tt=Qe.toUnwrapped(),Ot=l.getTile(Qe);if(ae&&(!Ot||!Ot.hasData()))continue;U.activeTexture.set(H.TEXTURE0);const bt=lv(Ot,X,d,q);if(!bt||!bt.texture)continue;const{texture:Ht,mix:Wt,offset:sn,tileSize:gt,buffer:Ut}=bt;let ft,jt;ae?(ft=zn.disabled,jt=Qe.projMatrix):N?(ft=new zn(H.LEQUAL,zn.ReadWrite,v.depthRangeFor3D),jt=I?Float32Array.from(v.transform.expandedFarZProjMatrix):v.transform.calculateProjMatrix(tt,he)):(ft=v.depthModeForSublayer(Qe.overscaledZ-De,d.paint.get("raster-opacity")===1?zn.ReadWrite:zn.ReadOnly,H.LESS),jt=v.transform.calculateProjMatrix(tt,he));const Bt=v.terrain&&ae?v.terrain.stencilModeForRTTOverlap(Qe):Ie[Qe.overscaledZ],Gt=T?0:d.paint.get("raster-fade-duration");Ot.registerFadeDuration(Gt);const Dt=l.findLoadedParent(Qe,0),qt=Zy(Ot,Dt,l,v.transform,Gt);let _n,yn;v.terrain&&v.terrain.prepareDrawTile(),U.activeTexture.set(H.TEXTURE0),Ht.bind(me,H.CLAMP_TO_EDGE),U.activeTexture.set(H.TEXTURE1),Dt?(Dt.texture&&Dt.texture.bind(me,H.CLAMP_TO_EDGE),_n=Math.pow(2,Dt.tileID.overscaledZ-Ot.tileID.overscaledZ),yn=[Ot.tileID.canonical.x*_n%1,Ot.tileID.canonical.y*_n%1]):Ht.bind(me,H.CLAMP_TO_EDGE),"useMipmap"in Ht&&U.extTextureFilterAnisotropic&&v.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,U.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,U.extTextureFilterAnisotropicMax);const wn=v.transform;let Rn;const rr=N?qE(wn):[0,0,0,0];let Vn,er,Zn,Mr,qr,Si=0;if($&&X instanceof i.aK&&X.coordinates.length>3)Vn=Float32Array.from(i.bc(i.cI(new i.bT(0,0,0)))),er=Float32Array.from(wn.globeMatrix),Zn=Float32Array.from(i.cE(wn)),Mr=[i.av(wn.center.lng),i.aC(wn.center.lat)],Rn=X.elevatedGlobePerspectiveTransform,qr=X.elevatedGlobeGridMatrix||new Float32Array(9);else if($){const kn=i.cF(Qe.canonical);Si=i.cG(kn.getCenter().lat),Vn=Float32Array.from(i.bc(i.cI(Qe.canonical))),er=Float32Array.from(wn.globeMatrix),Zn=Float32Array.from(i.cE(wn)),Mr=[i.av(wn.center.lng),i.aC(wn.center.lat)],Rn=[0,0],qr=Float32Array.from(i.cH(Qe.canonical,kn,Si,wn.worldSize/wn._pixelsPerMercatorPixel))}else Rn=X instanceof i.aK?X.perspectiveTransform:[0,0],Vn=new Float32Array(16),er=new Float32Array(9),Zn=new Float32Array(16),Mr=[0,0],qr=new Float32Array(9);const vr=Fb(jt,Vn,er,Zn,qr,yn||[0,0],i.ag(v.transform.zoom),Mr,rr,_n||1,qt,d,Rn,N?d.paint.get("raster-elevation"):0,2,Wt,sn,q.range,gt,Ut,ne),$i=v.isTileAffectedByFog(Qe),ar=v.getOrCreateProgram("raster",{defines:q.defines,overrideFog:$i});if(v.uploadCommonUniforms(U,ar,tt),X instanceof i.aK){const kn=X.elevatedGlobeVertexBuffer,Ir=X.elevatedGlobeIndexBuffer;if(ae||!I)X.boundsBuffer&&X.boundsSegments&&ar.draw(v,H.TRIANGLES,ft,or.disabled,de,nr.disabled,vr,d.id,X.boundsBuffer,v.quadTriangleIndexBuffer,X.boundsSegments);else if(kn&&Ir){const si=wn.zoom<=i.c6?X.elevatedGlobeSegments:X.getSegmentsForLongitude(wn.center.lng);si&&ar.draw(v,H.TRIANGLES,ft,or.disabled,de,Fe,vr,d.id,kn,Ir,si)}}else if($){ft=new zn(H.LEQUAL,zn.ReadOnly,v.depthRangeFor3D);const kn=v.globeSharedBuffers;if(kn){const[Ir,si,Br]=kn.getGridBuffers(Si,!1);ar.draw(v,H.TRIANGLES,ft,Be||Bt,v.colorModeForRenderPass(),Fe,vr,d.id,Ir,si,Br)}}else{const{tileBoundsBuffer:kn,tileBoundsIndexBuffer:Ir,tileBoundsSegments:si}=v.getTileBoundsBuffers(Ot);ar.draw(v,H.TRIANGLES,ft,Bt,de,nr.disabled,vr,d.id,kn,Ir,si)}}if(!(X instanceof i.aK)&&$)for(const Qe of Ne){const tt=Qe.canonical.y===(1<<Qe.canonical.z)-1;Qe.canonical.y===0&&Tt(!0,Qe,v,l,d,ne,q,Fe,Be||or.disabled),tt&&Tt(!1,Qe,v,l,d,ne,q,Fe===nr.frontCW?nr.backCW:nr.frontCW,Be||or.disabled)}};$?Ye(Le,v.renderElevatedRasterBackface?nr.backCW:nr.frontCW,v.stencilModeFor3D()):Ye(Le,nr.disabled,void 0),v.resetStencilClippingMasks()},"raster-particle":function(v,l,d,y,S,T){v.renderPass==="offscreen"&&(function(I,N,$,U){if(!U.length)return;const H=I.context,X=H.gl,q=N.getSource();if(!(q instanceof Pc))return;const ne=Math.ceil(Math.sqrt($.paint.get("raster-particle-count")));let de=$.particlePositionRGBAImage;if(!de||de.width!==ne){const Le=(function(De){const Ye=De*De,Ne=new Uint8Array(4*Ye),Fe=function(Qe){return Qe|=0,Qe=Math.imul(2747636419^Qe,2654435769),Qe=Math.imul(Qe^Qe>>>16,2654435769),((Qe=Math.imul(Qe^Qe>>>16,2654435769))>>>0)/4294967296},Be=1/1.1;for(let Qe=0;Qe<Ye;Qe++){const tt=Be*(Fe(2*Qe+0)+nl),Ot=Be*(Fe(2*Qe+1)+nl),bt=255*tt%1,Ht=255*Ot%1,Wt=bt,sn=Ot-Ht/255,gt=Ht;Ne[4*Qe+0]=255*(tt-bt/255),Ne[4*Qe+1]=255*Wt,Ne[4*Qe+2]=255*sn,Ne[4*Qe+3]=255*gt}return Ne})(ne);de=$.particlePositionRGBAImage=new i.r({width:ne,height:ne},Le)}let ae=$.particleFramebuffer;ae?ae.width!==ne&&(ae.destroy(),ae=$.particleFramebuffer=H.createFramebuffer(ne,ne,!0,null)):ae=$.particleFramebuffer=H.createFramebuffer(ne,ne,!0,null);const he=[];for(const Le of U){const De=N.getTile(Le);if(!(De instanceof da))continue;const Ye=XE(De,q,$);if(!Ye)continue;const Ne=[De.tileSize,De.tileSize];let Fe=$.tileFramebuffer;Fe||(Fe=$.tileFramebuffer=H.createFramebuffer(Ne[0],Ne[1],!0,null));let Be=De.rasterParticleState;Be||(Be=De.rasterParticleState=new Yb(H,Le,Ne,de));const Qe=Be.update($.lastInvalidatedAt);Be.particleTextureDimension!==ne&&Be.updateParticleTexture(Le,de);const tt=Be.targetColorTexture;Be.targetColorTexture=Be.backgroundColorTexture,Be.backgroundColorTexture=tt;const Ot=Be.particleTexture0;Be.particleTexture0=Be.particleTexture1,Be.particleTexture1=Ot,he.push([Le,Ye,Be,Qe])}if(he.length===0)return;const me=i.q.now(),Ie=$.previousDrawTimestamp?.001*(me-$.previousDrawTimestamp):.0167;if($.previousDrawTimestamp=me,$.hasColorMap()){H.activeTexture.set(X.TEXTURE0+2);let Le=$.colorRampTexture;Le||(Le=$.colorRampTexture=new i.T(H,$.colorRamp,X.RGBA8)),Le.bind(X.LINEAR,X.CLAMP_TO_EDGE)}H.bindFramebuffer.set($.tileFramebuffer.framebuffer),(function(Le,De,Ye){const Ne=Le.context,Fe=Ne.gl,Be=De.tileFramebuffer;Ne.activeTexture.set(Fe.TEXTURE0);const Qe={u_texture:0,u_opacity:1.05*(Ot=De.paint.get("raster-particle-fade-opacity-factor"))/(Ot+.05)},tt=Le.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Ot;for(const bt of Ye){const[,,Ht,Wt]=bt;Be.colorAttachment.set(Ht.targetColorTexture.texture),Ne.viewport.set([0,0,Be.width,Be.height]),Ne.clear({color:i.al.transparent}),Wt&&(Ht.backgroundColorTexture.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE),tt.draw(Le,Fe.TRIANGLES,zn.disabled,or.disabled,br.alphaBlended,nr.disabled,Qe,De.id,Le.viewportBuffer,Le.quadTriangleIndexBuffer,Le.viewportSegments))}})(I,$,he),(function(Le,De,Ye,Ne){const Fe=Le.context,Be=Fe.gl,Qe=Ye.tileFramebuffer,tt=Le.transform.projection.name==="globe",Ot=Ye.paint.get("raster-particle-max-speed");for(const bt of Ne){const[Ht,Wt,sn]=bt;Fe.activeTexture.set(Be.TEXTURE0+0),Wt.texture.bind(Be.LINEAR,Be.CLAMP_TO_EDGE),Qe.colorAttachment.set(sn.targetColorTexture.texture);const gt=Le.getOrCreateProgram("rasterParticleDraw",{defines:Wt.defines,overrideFog:!1});Fe.activeTexture.set(Be.TEXTURE0+1);const Ut=Wt.scalarData?[]:[0,1,2,3].map((Bt=>i.d7[Bt](Ht)));Ut.push(Ht);const ft=Ht.canonical.x,jt=Ht.canonical.y;for(const Bt of Ut){const Gt=De.getTile(tt?Bt.wrapped():Bt);if(!Gt)continue;const Dt=Gt.rasterParticleState;if(!Dt)continue;const qt=Bt.canonical.x+(1<<Bt.canonical.z)*(Bt.wrap-Ht.wrap),_n=Bt.canonical.y;Dt.particleTexture0.bind(Be.NEAREST,Be.CLAMP_TO_EDGE);const yn=zb(1,Dt.particleTexture0.size[0],[qt-ft,_n-jt],0,Wt.texture.size,2,Ot,Wt.textureOffset,Wt.scale,Wt.offset);gt.draw(Le,Be.POINTS,zn.disabled,or.disabled,br.alphaBlended,nr.disabled,yn,Ye.id,Dt.particleIndexBuffer,void 0,Dt.particleSegment)}}})(I,N,$,he),H.bindFramebuffer.set($.particleFramebuffer.framebuffer),(function(Le,De,Ye,Ne){const Fe=Le.context,Be=Fe.gl,Qe=De.paint.get("raster-particle-max-speed"),tt=Ne*De.paint.get("raster-particle-speed-factor")*.15,Ot=(function(Ht){return Math.pow(Ht,6)})(.01+1*De.paint.get("raster-particle-reset-rate-factor")),bt=De.particleFramebuffer;Fe.viewport.set([0,0,bt.width,bt.height]);for(const Ht of Ye){const[,Wt,sn]=Ht;Fe.activeTexture.set(Be.TEXTURE0+0),Wt.texture.bind(Be.LINEAR,Be.CLAMP_TO_EDGE),Fe.activeTexture.set(Be.TEXTURE0+1);const gt=sn.particleTexture0;gt.bind(Be.NEAREST,Be.CLAMP_TO_EDGE);const Ut=UO(1,gt.size[0],0,Wt.texture.size,Qe,tt,Ot,Wt.textureOffset,Wt.scale,Wt.offset);bt.colorAttachment.set(sn.particleTexture1.texture),Fe.clear({color:i.al.transparent}),Le.getOrCreateProgram("rasterParticleUpdate",{defines:Wt.defines}).draw(Le,Be.TRIANGLES,zn.disabled,or.disabled,br.unblended,nr.disabled,Ut,De.id,Le.viewportBuffer,Le.quadTriangleIndexBuffer,Le.viewportSegments)}})(I,$,he,Ie)})(v,l,d,y),v.renderPass==="translucent"&&((function(I,N,$,U,H){const X=I.context,q=X.gl,ne=N.getSource().tileSize,de=5*(1-i.ae(i.bY,i.bY+1,I.transform.zoom))*ne+$.paint.get("raster-particle-elevation"),ae=!I.options.moving,he=I.transform.projection.name==="globe";if(!U.length)return;const[me,Ie]=I.stencilConfigForOverlap(U),Le=[];he&&Le.push("PROJECTION_GLOBE_VIEW");const De=I.stencilModeFor3D();for(const Ye of Ie){const Ne=Ye.toUnwrapped(),Fe=N.getTile(Ye);if(!Fe.rasterParticleState)continue;const Be=Fe.rasterParticleState,Qe=100;Fe.registerFadeDuration(Qe);const tt=N.findLoadedParent(Ye,0),Ot=Zy(Fe,tt,N,I.transform,Qe);let bt,Ht;I.terrain&&I.terrain.prepareDrawTile(),X.activeTexture.set(q.TEXTURE0),Be.targetColorTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),X.activeTexture.set(q.TEXTURE1),tt&&tt.rasterParticleState?(tt.rasterParticleState.targetColorTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),bt=Math.pow(2,tt.tileID.overscaledZ-Fe.tileID.overscaledZ),Ht=[Fe.tileID.canonical.x*bt%1,Fe.tileID.canonical.y*bt%1]):Be.targetColorTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE);const Wt=he?Float32Array.from(I.transform.expandedFarZProjMatrix):I.transform.calculateProjMatrix(Ne,ae),sn=I.transform,gt=ZE(sn),Ut=i.cF(Ye.canonical),ft=i.cG(Ut.getCenter().lat);let jt,Bt,Gt,Dt,qt;he?(jt=Float32Array.from(i.bc(i.cI(Ye.canonical))),Bt=Float32Array.from(sn.globeMatrix),Gt=Float32Array.from(i.cE(sn)),Dt=[i.av(sn.center.lng),i.aC(sn.center.lat)],qt=Float32Array.from(i.cH(Ye.canonical,Ut,ft,sn.worldSize/sn._pixelsPerMercatorPixel))):(jt=new Float32Array(16),Bt=new Float32Array(9),Gt=new Float32Array(16),Dt=[0,0],qt=new Float32Array(9));const _n=Bn(Wt,jt,Bt,Gt,qt,Ht||[0,0],i.ag(I.transform.zoom),Dt,gt,bt||1,Ot,de),yn=I.isTileAffectedByFog(Ye),wn=I.getOrCreateProgram("rasterParticle",{defines:Le,overrideFog:yn});if(I.uploadCommonUniforms(X,wn,Ne),he){const Rn=new zn(q.LEQUAL,zn.ReadOnly,I.depthRangeFor3D),rr=0,Vn=I.globeSharedBuffers;if(Vn){const[er,Zn,Mr]=Vn.getGridBuffers(ft,rr!==0);wn.draw(I,q.TRIANGLES,Rn,De,br.alphaBlended,I.renderElevatedRasterBackface?nr.frontCCW:nr.backCCW,_n,$.id,er,Zn,Mr)}}else{const Rn=I.depthModeForSublayer(0,zn.ReadOnly),rr=me[Ye.overscaledZ],{tileBoundsBuffer:Vn,tileBoundsIndexBuffer:er,tileBoundsSegments:Zn}=I.getTileBoundsBuffers(Fe);wn.draw(I,q.TRIANGLES,Rn,rr,br.alphaBlended,nr.disabled,_n,$.id,Vn,er,Zn)}}I.resetStencilClippingMasks()})(v,l,d,y),v.style.map.triggerRepaint())},background:function(v,l,d,y){const S=d.paint.get("background-color"),T=d.paint.get("background-color-use-theme").constantOr("default")==="none",I=d.paint.get("background-opacity"),N=d.paint.get("background-emissive-strength"),$=d.paint.get("background-pitch-alignment")==="viewport";if(I===0)return;const U=v.context,H=U.gl,X=v.transform,q=X.tileSize,ne=d.paint.get("background-pattern");let de;if(ne!==void 0&&(ne===null||(de=v.imageManager.getPattern(i.I.from(ne.toString()),d.scope,v.style.getLut(d.scope)),!de)))return;const ae=!ne&&S.a===1&&I===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==ae)return;const he=or.disabled,me=v.depthModeForSublayer(0,ae==="opaque"?zn.ReadWrite:zn.ReadOnly),Ie=v.colorModeForDrapableLayerRenderPass(N),Le=ne?"backgroundPattern":"background";let De,Ye=y;if(Ye||(De=v.getBackgroundTiles(),Ye=Object.values(De).map((Ne=>Ne.tileID))),ne&&(U.activeTexture.set(H.TEXTURE0),v.imageManager.bind(v.context,d.scope)),$){const Ne=v.getOrCreateProgram(Le,{overrideFog:!1,overrideRtt:!0}),Fe=new Float32Array(i.ad.mat4.identity([])),Be=new i.aH(0,0,0,0,0),Qe=ne?WE(Fe,N,I,v,0,d.scope,de,$,{tileID:Be,tileSize:q}):Bb(Fe,N,I,S.toRenderColor(T?null:d.lut));Ne.draw(v,H.TRIANGLES,me,he,Ie,nr.disabled,Qe,d.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments)}else for(const Ne of Ye){const Fe=v.isTileAffectedByFog(Ne),Be=v.getOrCreateProgram(Le,{overrideFog:Fe}),Qe=Ne.toUnwrapped(),tt=y?Ne.projMatrix:v.transform.calculateProjMatrix(Qe);v.prepareDrawTile();const Ot=l?l.getTile(Ne):De?De[Ne.key]:new sc(Ne,q,X.zoom,v),bt=ne?WE(tt,N,I,v,0,d.scope,de,$,{tileID:Ne,tileSize:q}):Bb(tt,N,I,S.toRenderColor(T?null:d.lut));v.uploadCommonUniforms(U,Be,Qe);const{tileBoundsBuffer:Ht,tileBoundsIndexBuffer:Wt,tileBoundsSegments:sn}=v.getTileBoundsBuffers(Ot);Be.draw(v,H.TRIANGLES,me,he,Ie,nr.disabled,bt,d.id,Ht,Wt,sn)}},sky:function(v,l,d){const y=v._atmosphere?i.ag(v.transform.zoom):1,S=d.paint.get("sky-opacity")*y;if(S===0)return;const T=v.context,I=d.paint.get("sky-type"),N=new zn(T.gl.LEQUAL,zn.ReadOnly,[0,1]),$=v.frameCounter/1e3%1;I==="atmosphere"?v.renderPass==="offscreen"?d.needsSkyboxCapture(v)&&((function(U,H,X,q){const ne=U.context,de=ne.gl;let ae=H.skyboxFbo;if(!ae){ae=H.skyboxFbo=ne.createFramebuffer(32,32,!0,null),H.skyboxGeometry=new JE(ne),H.skyboxTexture=ne.gl.createTexture(),de.bindTexture(de.TEXTURE_CUBE_MAP,H.skyboxTexture),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_WRAP_S,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_WRAP_T,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_MAG_FILTER,de.LINEAR);for(let Le=0;Le<6;++Le)de.texImage2D(de.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,de.RGBA,32,32,0,de.RGBA,de.UNSIGNED_BYTE,null)}ne.bindFramebuffer.set(ae.framebuffer),ne.viewport.set([0,0,32,32]);const he=H.getCenter(U,!0),me=U.getOrCreateProgram("skyboxCapture"),Ie=new Float64Array(16);i.ad.mat4.identity(Ie),i.ad.mat4.rotateY(Ie,Ie,.5*-Math.PI),oo(U,H,me,Ie,he,0),i.ad.mat4.identity(Ie),i.ad.mat4.rotateY(Ie,Ie,.5*Math.PI),oo(U,H,me,Ie,he,1),i.ad.mat4.identity(Ie),i.ad.mat4.rotateX(Ie,Ie,.5*-Math.PI),oo(U,H,me,Ie,he,2),i.ad.mat4.identity(Ie),i.ad.mat4.rotateX(Ie,Ie,.5*Math.PI),oo(U,H,me,Ie,he,3),i.ad.mat4.identity(Ie),oo(U,H,me,Ie,he,4),i.ad.mat4.identity(Ie),i.ad.mat4.rotateY(Ie,Ie,Math.PI),oo(U,H,me,Ie,he,5),ne.viewport.set([0,0,U.width,U.height])})(v,d),d.markSkyboxValid(v)):v.renderPass==="sky"&&(function(U,H,X,q,ne){const de=U.context,ae=de.gl,he=U.transform,me=U.getOrCreateProgram("skybox");de.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_CUBE_MAP,H.skyboxTexture);const Ie=((Le,De,Ye,Ne,Fe)=>({u_matrix:Le,u_sun_direction:De,u_cubemap:0,u_opacity:Ne,u_temporal_offset:Fe}))(he.skyboxMatrix,H.getCenter(U,!1),0,q,ne);U.uploadCommonUniforms(de,me),me.draw(U,ae.TRIANGLES,X,or.disabled,U.colorModeForRenderPass(),nr.backCW,Ie,"skybox",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)})(v,d,N,S,$):I==="gradient"&&v.renderPass==="sky"&&(function(U,H,X,q,ne){const de=U.context,ae=de.gl,he=U.transform,me=U.getOrCreateProgram("skyboxGradient");H.skyboxGeometry||(H.skyboxGeometry=new JE(de)),de.activeTexture.set(ae.TEXTURE0);let Ie=H.colorRampTexture;Ie||(Ie=H.colorRampTexture=new i.T(de,H.colorRamp,ae.RGBA8)),Ie.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const Le=((De,Ye,Ne,Fe,Be)=>({u_matrix:De,u_color_ramp:0,u_center_direction:Ye,u_radius:i.ak(Ne),u_opacity:Fe,u_temporal_offset:Be}))(he.skyboxMatrix,H.getCenter(U,!1),H.paint.get("sky-gradient-radius"),q,ne);U.uploadCommonUniforms(de,me),me.draw(U,ae.TRIANGLES,X,or.disabled,U.colorModeForRenderPass(),nr.backCW,Le,"skyboxGradient",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)})(v,d,N,S,$)},debug:function(v,l,d,y,S,T){for(let I=0;I<d.length;I++)if(S){const U=new i.al(y.r*.8,y.g*.8,y.b*.8,1);yd(v,l,d[I],y,-1,-1,T),yd(v,l,d[I],y,-1,1,T),yd(v,l,d[I],y,1,1,T),yd(v,l,d[I],y,1,-1,T),yd(v,l,d[I],U,0,0,T)}else yd(v,l,d[I],y,0,0,T)},custom:function(v,l,d,y){const S=v.context,T=d.implementation;if(!v.transform.projection.unsupportedLayers||!v.transform.projection.unsupportedLayers.includes("custom")||v.terrain&&(v.terrain.renderingToTexture||v.renderPass==="offscreen")&&d.isDraped(l)){if(v.renderPass==="offscreen"){const I=T.prerender;if(I){if(v.setCustomLayerDefaults(),S.setColorMode(v.colorModeForRenderPass()),v.transform.projection.name==="globe"){const N=v.transform.pointMerc;I.call(T,S.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),i.ag(v.transform.zoom),[N.x,N.y],v.transform.pixelsPerMeterRatio)}else I.call(T,S.gl,v.transform.customLayerMatrix());S.setDirty(),v.setBaseState()}}else if(v.renderPass==="translucent"){if(v.terrain&&v.terrain.renderingToTexture){const N=T.renderToTile;if(N){const $=y[0].canonical,U=new i.ac($.x+y[0].wrap*(1<<$.z),$.y,$.z);S.setDepthMode(zn.disabled),S.setStencilMode(or.disabled),S.setColorMode(v.colorModeForRenderPass()),v.setCustomLayerDefaults(),N.call(T,S.gl,U),S.setDirty(),v.setBaseState()}return}v.setCustomLayerDefaults(),S.setColorMode(v.colorModeForRenderPass()),S.setStencilMode(or.disabled);const I=T.renderingMode==="3d"?new zn(v.context.gl.LEQUAL,zn.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,zn.ReadOnly);if(S.setDepthMode(I),v.transform.projection.name==="globe"){const N=v.transform.pointMerc;T.render(S.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),i.ag(v.transform.zoom),[N.x,N.y],v.transform.pixelsPerMeterRatio)}else T.render(S.gl,v.transform.customLayerMatrix());S.setDirty(),v.setBaseState(),S.bindFramebuffer.set(null)}}else i.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(v,l,d,y){if(v.renderPass==="opaque")return;const S=d.paint.get("model-opacity").constantOr(1);if(S===0)return;const T=d.paint.get("model-cast-shadows");if(v.renderPass==="shadow"&&(!T||v.terrain&&S<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof i.ab))return;const I=v.shadowRenderer,N=d.paint.get("model-receive-shadows");I&&(I.useNormalOffset=!0,N||(I.enabled=!1));const $=()=>{I&&(I.useNormalOffset=!0,N||(I.enabled=!0))},U=l.getSource();if(v.renderPass==="light-beam"&&U.type!=="batched-model")return;if(U.type==="vector"||U.type==="geojson")return(function(me,Ie,Le,De,Ye){const Ne=me.transform;if(Ne.projection.name!=="mercator")return void i.w(`Drawing 3D models for ${Ne.projection.name} projection is not yet implemented`);const Fe=Ne.getFreeCameraOptions().position;if(!me.modelManager)return;const Be=me.modelManager;Le.modelManager=Be;const Qe=me.shadowRenderer;if(!Le._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const tt=Le._unevaluatedLayout._values["model-id"],Ot=Object.assign({},Le.layout.get("model-id").parameters),bt=me.style.order.indexOf(Le.fqid);for(const Ht of De){const Wt=Ie.getTile(Ht).getBucket(Le);if(!Wt||Wt.projection.name!==Ne.projection.name)continue;const sn=Wt.getModelUris();sn&&!Wt.modelsRequested&&(Be.addModelsFromBucket(sn,Ye),Wt.modelsRequested=!0);const gt=Kb(Ht,Ne);Ot.zoom=gt;const Ut=tt.possiblyEvaluate(Ot);if(Zb(me,Wt,Ht),Nl.shadowUniformsInitialized=!1,Nl.useSingleShadowCascade=!!Qe&&Qe.getMaxCascadeForTile(Ht.toUnwrapped())===0,me.renderPass==="shadow"&&Qe){if(me.currentShadowCascade===1&&Wt.isInsideFirstShadowMapFrustum)continue;const Bt=Ne.calculatePosMatrix(Ht.toUnwrapped(),Ne.worldSize);if(Nl.tileMatrix.set(Bt),Nl.shadowTileMatrix=Float32Array.from(Qe.calculateShadowPassMatrixFromMatrix(Bt)),Nl.aabb.min.fill(0),Nl.aabb.max[0]=Nl.aabb.max[1]=i.ai,Nl.aabb.max[2]=0,dv(Wt,Nl,me,Le.scope))continue}const ft=1<<Ht.canonical.z,jt=[((Fe.x-Ht.wrap)*ft-Ht.canonical.x)*i.ai,(Fe.y*ft-Ht.canonical.y)*i.ai,Fe.z*ft*i.ai];me.conflationActive&&Object.keys(Wt.instancesPerModel).length>0&&me.style.isLayerClipped(Le,Ie.getSource())&&Wt.updateReplacement(Ht,me.replacementSource,bt,Ye)&&(Wt.uploaded=!1,Wt.upload(me.context));for(let Bt in Wt.instancesPerModel){const Gt=Wt.instancesPerModel[Bt];Gt.features.length>0&&(Bt=Ut.evaluate(Gt.features[0].feature,{}));const Dt=Be.getModel(Bt,Ye);if(Dt&&Dt.uploaded)for(const qt of Dt.nodes)cc(me,Le,qt,Gt,jt,Ht,Nl)}}})(v,l,d,y,U.type==="vector"?d.scope:""),void $();if(!U.loaded())return;if(U.type==="batched-model")return(function(me,Ie,Le,De){Le.resetLayerRenderingStats(me);const Ye=me.context,Ne=me.transform,Fe=me.style.fog,Be=me.shadowRenderer;if(Ne.projection.name!=="mercator")return void i.w(`Drawing 3D landmark models for ${Ne.projection.name} projection is not yet implemented`);const Qe=me.transform.getFreeCameraOptions().position,tt=i.ad.vec3.scale([],[Qe.x,Qe.y,Qe.z],me.transform.worldSize),Ot=i.ad.vec3.negate([],tt),bt=i.ad.mat4.identity([]),Ht=i.dm(Ne.center.lat,Ne.zoom),Wt=i.ad.mat4.fromScaling([],[1,1,1/Ht]);i.ad.mat4.translate(bt,bt,Ot);const sn=Le.paint.get("model-opacity").constantOr(1),gt=new zn(Ye.gl.LEQUAL,zn.ReadWrite,me.depthRangeFor3D),Ut=new zn(Ye.gl.LEQUAL,zn.ReadOnly,me.depthRangeFor3D),ft=new i.ce([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),jt=me.renderPass==="shadow",Bt=jt&&Be?Be.getCurrentCascadeFrustum():Ne.getFrustum(Ne.scaleZoom(Ne.worldSize)),Gt=Le.paint.get("model-front-cutoff"),Dt=Gt[2]<1,qt=fu(me,Le.paint.get("model-cutoff-fade-range")),_n=Le.getLayerRenderingStats();(function(yn,wn,Rn,rr){const Vn=yn.terrain?yn.terrain.exaggeration():0,er=yn.transform.zoom;for(const Zn of rr){const Mr=wn.getTile(Zn).getBucket(Rn);Mr&&(Mr.setFilter(Rn.filter),yn.conflationActive&&Mr.updateReplacement(Zn,yn.replacementSource),Mr.evaluateScale(yn,Rn),yn.terrain&&Vn>0&&Mr.elevationUpdate(yn.terrain,Vn,Zn,Rn.source),Mr.needsReEvaluation(yn,er,Rn)&&Mr.evaluate(Rn))}})(me,Ie,Le,De),(function(){let yn,wn,Rn;Dt?(yn=De.length-1,wn=-1,Rn=-1):(yn=0,wn=De.length,Rn=1);const rr=new Float64Array(16),Vn=i.ad.vec3.create(),er=new i.P(0,0);for(let Zn=yn;Zn!==wn;Zn+=Rn){const Mr=De[Zn],qr=Ie.getTile(Mr).getBucket(Le);if(!qr||!qr.uploaded)continue;let Si=!1;Be&&(Si=Be.getMaxCascadeForTile(Mr.toUnwrapped())===0);const vr=Ne.calculatePosMatrix(Mr.toUnwrapped(),Ne.worldSize),$i=qr.modelTraits;!jt&&Dt&&(i.ad.mat4.invert(rr,vr),i.ad.vec3.transformMat4(Vn,tt,rr),er.x=Vn[0],er.y=Vn[1]);const ar=[];qr.setFilter(Le.filter);for(const kn of qr.getNodesInfo()){if(kn.hiddenByReplacement||!kn.node.meshes)continue;const Ir=kn.node;let si=0;me.terrain&&Ir.elevation&&(si=Ir.elevation*me.terrain.exaggeration());const Br=(()=>{const _i=kn.aabb;return ft.min=[..._i.min],ft.max=[..._i.max],ft.min[2]+=si,ft.max[2]+=si,i.ad.vec3.transformMat4(ft.min,ft.min,vr),i.ad.vec3.transformMat4(ft.max,ft.max,vr),ft})(),ss=kn.evaluatedScale;if(ss[0]<=1&&ss[1]<=1&&ss[2]<=1&&Br.intersects(Bt)===0)continue;if(!jt&&Dt){const _i=.16666666666666666;kn.cameraCollisionOpacity=tt[0]>Br.min[0]&&tt[0]<Br.max[0]&&tt[1]>Br.min[1]&&tt[1]<Br.max[1]&&tt[2]*Ht<Br.max[2]&&Ir.footprint&&i.bA(er,Ir.footprint)?Math.max(kn.cameraCollisionOpacity-_i,0):Math.min(1,kn.cameraCollisionOpacity+_i)}const ws=[...vr],Bs=Ir.anchor?Ir.anchor[0]:0,Xs=Ir.anchor?Ir.anchor[1]:0;i.ad.mat4.translate(ws,ws,[Bs*(ss[0]-1),Xs*(ss[1]-1),si]),i.ad.vec3.exactEquals(ss,i.dq)||i.ad.mat4.scale(ws,ws,ss);const sl=i.ad.mat4.multiply([],ws,Ir.matrix),Wo=i.ad.mat4.multiply([],Ne.expandedFarZProjMatrix,sl),Lr=i.ad.mat4.multiply([],Ne.expandedFarZProjMatrix,ws),Vi=i.ad.vec4.transformMat4([],[Bs,Xs,si,1],Wo)[2];Ir.hidden=!1;let Xr=sn;jt||(Dt&&(Xr*=kn.cameraCollisionOpacity,Xr*=Jb(ws,Ne,kn.aabb,Gt)),Xr*=hv(qt,Vi)),Xr!==0?ar.push({nodeInfo:kn,depth:Vi,opacity:Xr,wvpForNode:Wo,wvpForTile:Lr,nodeModelMatrix:sl,tileModelMatrix:ws}):Ir.hidden=!0}jt||ar.sort(((kn,Ir)=>!Dt||kn.opacity===1&&Ir.opacity===1?kn.depth<Ir.depth?-1:1:kn.opacity===1?-1:Ir.opacity===1?1:kn.depth>Ir.depth?-1:1));for(const kn of ar){const Ir=kn.nodeInfo,si=Ir.node;let Br=i.ad.mat4.multiply([],Wt,kn.tileModelMatrix);i.ad.mat4.multiply(Br,bt,Br);const ss=i.ad.mat4.invert([],Br);i.ad.mat4.transpose(ss,ss),i.ad.mat4.scale(ss,ss,vd),Br=i.ad.mat4.multiply(Br,Br,si.matrix);const ws=me.renderPass==="light-beam",Bs=Le.paint.get("model-color-use-theme").constantOr("default")==="none",Xs=$i&i.ds.HasMapboxMeshFeatures,sl=Xs?0:Ir.evaluatedRMEA[0][2];for(let Wo=0;Wo<si.meshes.length;++Wo){const Lr=si.meshes[Wo],Vi=Wo===si.lightMeshIndex;let Xr=kn.wvpForNode;if(Vi){if(!ws&&!me.terrain&&me.shadowRenderer){me.currentLayer<me.firstLightBeamLayer&&(me.firstLightBeamLayer=me.currentLayer);continue}Xr=kn.wvpForTile}else if(ws)continue;const _i={defines:[]},bo=[];if(!jt&&Be&&(Be.useNormalOffset=!!Lr.normalBuffer),hp(_i.defines,bo,Lr,me,Bs?null:Le.lut),Xs||_i.defines.push("DIFFUSE_SHADED"),Si&&_i.defines.push("SHADOWS_SINGLE_CASCADE"),_n&&(jt?_n.numRenderedVerticesInShadowPass+=Lr.vertexArray.length:_n.numRenderedVerticesInTransparentPass+=Lr.vertexArray.length),jt){Pg(Lr,kn.nodeModelMatrix,me,Le);continue}let Li=null;if(Fe){const Bl=yu(kn.nodeModelMatrix,me.transform);if(Li=new Float32Array(Bl),Ne.projection.name!=="globe"){const Ra=Lr.aabb.min,xu=Lr.aabb.max,[Fc,wu]=Fe.getOpacityForBounds(Bl,Ra[0],Ra[1],xu[0],xu[1]);_i.overrideFog=Fc>=Tn||wu>=Tn}}const $s=Lr.material;let Nc;$s.occlusionTexture&&$s.occlusionTexture.offsetScale&&(Nc=$s.occlusionTexture.offsetScale,_i.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Da=me.getOrCreateProgram("model",_i);!jt&&Be&&Be.setupShadowsFromMatrix(kn.tileModelMatrix,Da,Be.useNormalOffset),me.uploadCommonUniforms(Ye,Da,null,Li);const zl=$s.pbrMetallicRoughness;zl.metallicFactor=.9,zl.roughnessFactor=.5;const fa=$b(new Float32Array(Xr),new Float32Array(Br),new Float32Array(ss),new Float32Array(si.matrix),me,kn.opacity,zl.baseColorFactor.toRenderColor(null),$s.emissiveFactor,zl.metallicFactor,zl.roughnessFactor,$s,sl,Le,[0,0,0],Nc);!Vi&&(Ir.hasTranslucentParts||kn.opacity<1)&&Da.draw(me,Ye.gl.TRIANGLES,gt,or.disabled,br.disabled,nr.backCCW,fa,Le.id,Lr.vertexBuffer,Lr.indexBuffer,Lr.segments,Le.paint,me.transform.zoom,void 0,bo),Da.draw(me,Ye.gl.TRIANGLES,Vi?Ut:gt,or.disabled,Vi||kn.opacity<1||Ir.hasTranslucentParts?br.alphaBlended:br.unblended,nr.backCCW,fa,Le.id,Lr.vertexBuffer,Lr.indexBuffer,Lr.segments,Le.paint,me.transform.zoom,void 0,bo)}}}})()})(v,l,d,y),void $();if(U.type!=="model")return;const H=U.getModels(),X=[],q=v.transform.getFreeCameraOptions().position,ne=i.ad.vec3.scale([],[q.x,q.y,q.z],v.transform.worldSize);i.ad.vec3.negate(ne,ne);const de=[],ae=[];let he=0;for(const me of H){const Ie=d.paint.get("model-rotation").constantOr(null),Le=d.paint.get("model-scale").constantOr(null),De=d.paint.get("model-translation").constantOr(null);me.computeModelMatrix(v,Ie,Le,De,!0,!0,!1);const Ye=i.ad.mat4.identity([]),Ne=i.dm(me.position.lat,v.transform.zoom),Fe=i.ad.mat4.fromScaling([],[1,1,1/Ne]);i.ad.mat4.translate(Ye,Ye,ne),X.push({zScaleMatrix:Fe,negCameraPosMatrix:Ye});for(const Be of me.nodes)mh(v.transform,Be,me.matrix,v.transform.expandedFarZProjMatrix,he,de,ae);he++}if(de.sort(((me,Ie)=>Ie.depth-me.depth)),v.renderPass!=="shadow"){if(S===1)for(const me of ae)vu(me,v,d,X[me.modelIndex],or.disabled,v.colorModeForRenderPass());else{for(const me of ae)vu(me,v,d,X[me.modelIndex],or.disabled,br.disabled);for(const me of ae)vu(me,v,d,X[me.modelIndex],v.stencilModeFor3D(),v.colorModeForRenderPass());v.resetStencilClippingMasks()}for(const me of de)vu(me,v,d,X[me.modelIndex],or.disabled,v.colorModeForRenderPass());$()}else{for(const me of ae)Pg(me.mesh,me.nodeModelMatrix,v,d);for(const me of de)Pg(me.mesh,me.nodeModelMatrix,v,d);$()}}},gv={line:function(v,l,d){if(v.hasElevatedBuckets=!1,v.hasNonElevatedBuckets=!1,v._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||v._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(l){const y=l.getVisibleCoordinates();for(const S of y){const T=l.getTile(S).getBucket(v);if(T&&(T.hasZOffset?v.hasElevatedBuckets=!0:v.hasNonElevatedBuckets=!0,v.hasElevatedBuckets&&v.hasNonElevatedBuckets))break}}}else v.hasNonElevatedBuckets=!0},model:function(v,l,d){const y=l.getSource();if(!y.loaded())return;if(y.type==="vector"||y.type==="geojson")return void(d.modelManager&&d.modelManager.upload(d,y.type==="vector"?v.scope:""));if(y.type==="batched-model"||y.type!=="model")return;const S=y.getModels();for(const T of S)T.upload(d.context)},raster:function(v,l,d){const y=l.getSource();if(!(y instanceof Pc&&y.loaded()))return;const S=v.sourceLayer||y.rasterLayerIds&&y.rasterLayerIds[0];if(!S)return;const T=v.paint.get("raster-array-band")||y.getInitialBand(S);if(T==null)return;const I=l.getIds().map((N=>l.getTileByID(N)));for(const N of I)N.updateNeeded(S,T)&&y.prepareTile(N,S,T)},"raster-particle":function(v,l,d){const y=l.getSource();if(!(y instanceof Pc&&y.loaded()))return;const S=v.sourceLayer||y.rasterLayerIds&&y.rasterLayerIds[0];if(!S)return;const T=v.paint.get("raster-particle-array-band")||y.getInitialBand(S);if(T==null)return;const I=l.getIds().map((N=>l.getTileByID(N)));for(const N of I)N.updateNeeded(S,T)&&y.prepareTile(N,S,T)}},_v={fill:Wb};class yv{constructor(l,d,y,S,T){this.context=new _d(l,d),this.transform=y,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=T,this._timeStamp=i.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const I=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const $ of I)this._debugParams.enabledLayers[$]=!0;T.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},(()=>{this.style.map.triggerRepaint()})),T.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),T.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),T.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),T.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),T.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const $ of I)T.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],$);this.occlusionParams=new ex(T),this.setup(),this.numSublayers=Dl.maxUnderzooming+Dl.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new i.dy,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new pu(this),this._wireframeDebugCache=new gh,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const N=new i.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new i.T(this.context,N,l.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=S}updateTerrain(l,d){const y=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new BE(this,l));const S=this._terrain;this.transform.elevation=y?S:null,S.update(l,this.transform,d),this.transform.elevation&&!S.enabled&&(this.transform.elevation=null)}_updateFog(l){const d=l.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,S]=d.getFovAdjustedRange(this.transform._fov);if(y>S)return void(this.transform.fogCullDistSq=null);const T=y+.78*(S-y);this.transform.fogCullDistSq=T*T}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(l){l&&!this._terrain&&(this._terrain=new BE(this,this.style)),this._forceTerrainMode=l}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(l,d){if(this.width=l*i.q.devicePixelRatio,this.height=d*i.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._mergedLayers[y].resize()}setup(){const l=this.context,d=new i.b5;d.emplaceBack(0,0),d.emplaceBack(i.ai,0),d.emplaceBack(0,i.ai),d.emplaceBack(i.ai,i.ai),this.tileExtentBuffer=l.createVertexBuffer(d,i.b7.members),this.tileExtentSegments=i.b8.simpleSegment(0,0,4,2);const y=new i.b5;y.emplaceBack(0,0),y.emplaceBack(i.ai,0),y.emplaceBack(0,i.ai),y.emplaceBack(i.ai,i.ai),this.debugBuffer=l.createVertexBuffer(y,i.b7.members),this.debugSegments=i.b8.simpleSegment(0,0,4,5);const S=new i.b5;S.emplaceBack(-1,-1),S.emplaceBack(1,-1),S.emplaceBack(-1,1),S.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(S,i.b7.members),this.viewportSegments=i.b8.simpleSegment(0,0,4,2);const T=new i.aU;T.emplaceBack(0,0,0,0),T.emplaceBack(i.ai,0,i.ai,0),T.emplaceBack(0,i.ai,0,i.ai),T.emplaceBack(i.ai,i.ai,i.ai,i.ai),this.mercatorBoundsBuffer=l.createVertexBuffer(T,i.ba.members),this.mercatorBoundsSegments=i.b8.simpleSegment(0,0,4,2);const I=new i.aV;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(I);const N=new i.b6;for(const U of[0,1,3,2,0])N.emplaceBack(U);this.debugIndexBuffer=l.createIndexBuffer(N),this.emptyTexture=new i.T(l,new i.r({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA8),this.identityMat=i.ad.mat4.create();const $=this.context.gl;this.stencilClearMode=new or({func:$.ALWAYS,mask:0},0,255,$.ZERO,$.ZERO,$.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,l.TRIANGLES,zn.disabled,this.stencilClearMode,br.disabled,nr.disabled,ep(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,d,y){if(!d||this.currentStencilSource===d.id||!l.isTileClipped()||!y||y.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let N=!1;for(const $ of y)if(this._tileClippingMaskIDs[$.key]===void 0){N=!0;break}if(!N)return}this.currentStencilSource=d.id;const S=this.context,T=S.gl;this.nextStencilID+y.length>256&&this.clearStencil(),S.setColorMode(br.disabled),S.setDepthMode(zn.disabled);const I=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const N of y){const $=d.getTile(N),U=this._tileClippingMaskIDs[N.key]=this.nextStencilID++,{tileBoundsBuffer:H,tileBoundsIndexBuffer:X,tileBoundsSegments:q}=this.getTileBoundsBuffers($);I.draw(this,T.TRIANGLES,zn.disabled,new or({func:T.ALWAYS,mask:0},U,255,T.KEEP,T.KEEP,T.REPLACE),br.disabled,nr.disabled,ep(N.projMatrix),"$clipping",H,X,q)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,d=this.context.gl;return new or({func:d.NOTEQUAL,mask:255},l,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const d=this.context.gl;return new or({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(l){const d=this.context.gl,y=l.sort(((I,N)=>N.overscaledZ-I.overscaledZ)),S=y[y.length-1].overscaledZ,T=y[0].overscaledZ-S+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const I={};for(let N=0;N<T;N++)I[N+S]=new or({func:d.GEQUAL,mask:255},N+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=T,[I,y]}return[{[S]:or.disabled},y]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new br([l.CONSTANT_COLOR,l.ONE,l.CONSTANT_COLOR,l.ONE],new i.al(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?br.unblended:br.alphaBlended}colorModeForDrapableLayerRenderPass(l){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new br([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new i.al(0,0,0,l===void 0?0:l),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(l,d,y,S=!1){if(this.depthOcclusion)return new zn(this.context.gl.GREATER,zn.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!S)return zn.disabled;const T=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new zn(y||this.context.gl.LEQUAL,d,[T,T])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const l=this.context.gl,d=Math.ceil(this.width),y=Math.ceil(this.height),S=this.context.bindFramebuffer.get(),T=l.getParameter(l.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===d&&this.depthFBO.height===y||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),d!==0&&y!==0&&(this.depthFBO=new ha(this.context,d,y,!1,"texture"),this.depthTexture=new i.T(this.context,{width:d,height:y,data:null},l.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(S),l.bindTexture(l.TEXTURE_2D,T),this.depthFBO&&(l.bindFramebuffer(l.READ_FRAMEBUFFER,null),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),l.blitFramebuffer(0,0,d,y,0,0,d,y,l.DEPTH_BUFFER_BIT,l.NEAREST),l.bindFramebuffer(l.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce(((l,d)=>l+d/this._fpsHistory.length),0))}render(l,d){const y=i.q.now();this._dt=y-this._timeStamp,this._timeStamp=y,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=l.map.repaint,this.style=l,this.options=d;const S=this.style._mergedLayers,T=!(!this.terrain||!this.terrain.enabled),I=()=>this.style._getOrder(T).filter((gt=>{const Ut=S[gt];return!(Ut.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[Ut.type]}));let N=I(),$=!1,U=!1;for(const gt of N){const Ut=S[gt];Ut.type==="circle"&&($=!0),Ut.type==="symbol"&&(Ut.hasInitialOcclusionOpacityProperties?U=!0:$=!0)}let H=N.map((gt=>S[gt]));const X=this.style._mergedSourceCaches;this.imageManager=l.imageManager,this.modelManager=l.modelManager,this.symbolFadeChange=l.placement.symbolFadeChange(i.q.now()),this.imageManager.beginFrame();let q=0,ne=!1;for(const gt in X){const Ut=X[gt];Ut.used&&(Ut.prepare(this.context),Ut.getSource().usedInConflation&&++q)}let de=!1;for(const gt of H)gt.isHidden(this.transform.zoom)||(gt.type==="clip"&&(de=!0),this.prepareLayer(gt));const ae={},he={},me={},Ie={},Le={};for(const gt in X){const Ut=X[gt];ae[gt]=Ut.getVisibleCoordinates(),he[gt]=ae[gt].slice().reverse(),me[gt]=Ut.getVisibleCoordinates(!0).reverse(),Ie[gt]=Ut.getShadowCasterCoordinates(),Le[gt]=Ut.sortCoordinatesByDistance(ae[gt])}const De=gt=>{const Ut=this.style.getLayerSourceCache(gt);return Ut&&Ut.used?Ut.getSource():null};if(q||de||this._clippingActiveLastFrame){const gt=[],Ut=[];let ft=0;for(const jt of H)this.isSourceForClippingOrConflation(jt,De(jt))&&(gt.push(jt),Ut.push(ft)),ft++;if(gt&&(de||gt.length>1)||this._clippingActiveLastFrame){de=!1;const jt=[];for(let Bt=0;Bt<gt.length;Bt++){const Gt=gt[Bt],Dt=Ut[Bt],qt=this.style.getLayerSourceCache(Gt);if(!qt||!qt.used||!qt.getSource().usedInConflation&&Gt.type!=="clip")continue;let _n=i.dA,yn=i.by.None;const wn=[];let Rn=!0;if(Gt.type==="clip"){_n=Dt;for(const rr of Gt.layout.get("clip-layer-types"))yn|=rr==="model"?i.by.Model:rr==="symbol"?i.by.Symbol:i.by.FillExtrusion;for(const rr of Gt.layout.get("clip-layer-scope"))wn.push(rr);Gt.isHidden(this.transform.zoom)?Rn=!1:de=!0}Rn&&jt.push({layer:Gt.fqid,cache:qt,order:_n,clipMask:yn,clipScope:wn})}this.replacementSource.setSources(jt),ne=!0}}this._clippingActiveLastFrame=de,ne||this.replacementSource.clear(),this.conflationActive=ne,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let gt=0;gt<H.length;gt++){const Ut=H[gt],ft=Ut.cutoffRange();if(this.longestCutoffRange=Math.max(ft,this.longestCutoffRange),ft>0){const jt=De(Ut);jt&&(this.minCutoffZoom=Math.max(jt.minzoom,this.minCutoffZoom)),Ut.minzoom&&(this.minCutoffZoom=Math.max(Ut.minzoom,this.minCutoffZoom))}Ut.is3D(T)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=gt),this._lastOcclusionLayer=gt)}const Ye=this.style&&this.style.fog;Ye?(this._fogVisible=Ye.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Ye.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(me),this.opaquePassCutoff=0,N=I(),H=N.map((gt=>S[gt])));const Ne=this._shadowRenderer;if(Ne){Ne.updateShadowParameters(this.transform,this.style.directionalLight);for(const gt in X)for(const Ut of ae[gt]){let ft={min:0,max:0};this.terrain&&(ft=this.terrain.getMinMaxForTile(Ut)||ft),Ne.addShadowReceiver(Ut.toUnwrapped(),ft.min,ft.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new i.dz(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new QE(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const Fe=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),Be=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(Fe&&!this._snow&&(this._snow=new fp(this)),!Fe&&this._snow&&(this._snow.destroy(),delete this._snow),Be&&!this._rain&&(this._rain=new ix(this)),!Be&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!bn.has(this.context.gl))return;this.renderPass="offscreen";for(const gt of H){const Ut=l.getLayerSourceCache(gt);if(!gt.hasOffscreenPass()||gt.isHidden(this.transform.zoom))continue;const ft=Ut?he[Ut.id]:void 0;(gt.type==="custom"||gt.type==="raster"||gt.type==="raster-particle"||gt.isSky()||ft&&ft.length)&&this.renderLayer(this,Ut,gt,ft)}this.depthRangeFor3D=[0,1-(H.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Ie)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Qe=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),tt=(()=>{if(d.showOverdrawInspector)return i.al.black;const gt=this.style.fog;if(gt&&this.transform.projection.supportsFog){const Ut=this.style.getLut(gt.scope);if(!Qe){const ft=gt.properties.get("color-use-theme")==="none",jt=gt.properties.get("color").toRenderColor(ft?null:Ut).toArray01();return new i.al(...jt)}if(Qe){const ft=gt.properties.get("space-color-use-theme")==="none",jt=gt.properties.get("space-color").toRenderColor(ft?null:Ut).toArray01();return new i.al(...jt)}}return i.al.transparent})();if(this.context.clear({color:tt,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Qe&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=N.length-1;this.currentLayer>=0;this.currentLayer--){const gt=H[this.currentLayer],Ut=l.getLayerSourceCache(gt);if(gt.isSky())continue;const ft=Ut?(gt.is3D(T)?Le:he)[Ut.id]:void 0;this._renderTileClippingMasks(gt,Ut,ft),this.renderLayer(this,Ut,gt,ft)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Qe&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||i.ag(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<N.length;this.currentLayer++){const gt=H[this.currentLayer],Ut=l.getLayerSourceCache(gt);gt.isSky()&&this.renderLayer(this,Ut,gt,Ut?he[Ut.id]:void 0)}function Ot(gt,Ut){let ft;return Ut&&(ft=(gt.type==="symbol"?me:gt.is3D(T)?Le:he)[Ut.id]),ft}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<N.length;){const gt=H[this.currentLayer];if(gt.type==="raster"||gt.type==="raster-particle"){const Ut=l.getLayerSourceCache(gt);this.renderLayer(this,Ut,gt,Ot(gt,Ut))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let bt=0;Ne&&(bt=Ne.getShadowCastingLayerCount());let Ht=!1,Wt=-1;for(let gt=0;gt<N.length;++gt){const Ut=H[gt];Ut.isHidden(this.transform.zoom)||Ut.is3D(T)&&(Wt=gt)}U&&Wt===-1&&($=!0);let sn=!1;for(;this.currentLayer<N.length;){const gt=H[this.currentLayer],Ut=l.getLayerSourceCache(gt);if(gt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(gt)){if(gt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!sn&&gt.is3D(T)&&!T){const ft=this.currentLayer,jt=Bt=>{for(this.currentLayer=0;this.currentLayer<H.length;this.currentLayer++){const Gt=H[this.currentLayer];if(_v[Gt.type]){const Dt=this.style.getLayerSourceCache(Gt);_v[Gt.type](this,Dt,Gt,Ot(Gt,Dt),Bt)}}};jt("initialize"),jt("reset"),this.currentLayer=ft,sn=!0}if($&&!Ht&&this.terrain&&!this.transform.isOrthographic&&(Ht=!0,this.blitDepth()),U&&Wt!==-1&&this.currentLayer===Wt+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(gt,Ut,Ut?ae[Ut.id]:void 0),this.renderLayer(this,Ut,gt,Ot(gt,Ut)),!this.terrain&&Ne&&bt>0&&gt.hasShadowPass()&&--bt==0&&(Ne.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const ft=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=ft;this.currentLayer++){const jt=H[this.currentLayer];if(!jt.hasLightBeamPass())continue;const Bt=l.getLayerSourceCache(jt);this.renderLayer(this,Bt,jt,Bt?he[Bt.id]:void 0)}this.currentLayer=ft,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const ft=this.currentLayer;this.depthOcclusion=!0;for(const jt of this.layersWithOcclusionOpacity){this.currentLayer=jt;const Bt=H[this.currentLayer],Gt=l.getLayerSourceCache(Bt),Dt=Gt?he[Gt.id]:void 0;this.terrain||this._renderTileClippingMasks(Bt,Gt,Gt?ae[Gt.id]:void 0),this.renderLayer(this,Gt,Bt,Dt)}this.depthOcclusion=!1,this.currentLayer=ft,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let gt=null;H.forEach((Ut=>{const ft=l.getLayerSourceCache(Ut);ft&&!Ut.isHidden(this.transform.zoom)&&ft.getVisibleCoordinates().length&&(!gt||gt.getSource().maxzoom<ft.getSource().maxzoom)&&(gt=ft)})),gt&&this.options.showTileBoundaries&&Dg.debug(this,gt,gt.getVisibleCoordinates(),i.al.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Dg.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new i.al(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&(function(gt){const Ut=gt.transform.padding;qb(gt,gt.transform.height-(Ut.top||0),3,up),qb(gt,Ut.bottom||0,3,HO),Xb(gt,Ut.left||0,3,WO),Xb(gt,gt.transform.width-(Ut.right||0),3,KE);const ft=gt.transform.centerPoint;(function(jt,Bt,Gt,Dt){ph(jt,Bt-1,Gt-10,2,20,Dt),ph(jt,Bt-10,Gt-1,20,2,Dt)})(gt,ft.x,gt.transform.height-ft.y,cv)})(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),ne||(this.conflationActive=!1)}prepareLayer(l){this.gpuTimingStart(l);const{unsupportedLayers:d}=this.transform.projection,y=!d||!d.includes(l.type);if(gv[l.type]&&(y||this.terrain&&l.type==="custom")){const S=this.style.getLayerSourceCache(l);gv[l.type](l,S,this)}this.gpuTimingEnd()}renderLayer(l,d,y,S){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="sky"||y.type==="custom"||y.type==="model"||y.type==="raster"||y.type==="raster-particle"||S&&S.length)&&(this.id=y.id,this.gpuTimingStart(y),l.transform.projection.unsupportedLayers&&l.transform.projection.unsupportedLayers.includes(y.type)&&(!l.terrain||y.type!=="custom")||y.type==="clip"||Dg[y.type](l,d,y,S,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,y=this.context.gl;let S=this.gpuTimers[l.id];S||(S=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:y.createQuery()}),S.calls++,y.beginQuery(d.TIME_ELAPSED_EXT,S.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,d=this.context.gl,y=d.createQuery();this.deferredRenderGpuTimeQueries.push(y),d.beginQuery(l.TIME_ELAPSED_EXT,y)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const d={};for(const y in l){const S=l[y],T=this.context.extTimerQuery,I=T.getQueryParameter(S.query,this.context.gl.QUERY_RESULT)/1e6;T.deleteQueryEXT(S.query),d[y]=I}return d}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.gl;let y=0;for(const S of l)y+=d.getQueryParameter(S,d.QUERY_RESULT)/1e6,d.deleteQuery(S);return y}translatePosMatrix(l,d,y,S,T){if(!y[0]&&!y[1])return l;const I=T?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(I){const U=Math.sin(I),H=Math.cos(I);y=[y[0]*H-y[1]*U,y[0]*U+y[1]*H]}const N=[T?y[0]:i.at(d,y[0],this.transform.zoom),T?y[1]:i.at(d,y[1],this.transform.zoom),0],$=new Float32Array(16);return i.ad.mat4.translate($,l,N),$}saveTileTexture(l){const d=l.size[0],y=this._tileTextures[d];y?y.push(l):this._tileTextures[d]=[l]}getTileTexture(l){const d=this._tileTextures[l];return d&&d.length>0?d.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(l,d,y){const S=y===void 0?this.terrain&&this.terrain.renderingToTexture:y,T=[];return this.style&&this.style.enable3dLights()&&(l==="globeRaster"||l==="terrainRaster"?(T.push("LIGHTING_3D_MODE"),T.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):S||T.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||T.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(T.push("TERRAIN"),this.linearFloatFilteringSupported()&&T.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&T.push("GLOBE"),!this._fogVisible||S||d!==void 0&&!d||T.push("FOG","FOG_DITHERING"),S&&T.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&T.push("OVERDRAW_INSPECTOR"),T}getOrCreateProgram(l,d){this.cache=this.cache||{};const y=d&&d.defines||[],S=d&&d.config,T=this.currentGlobalDefines(l,d&&d.overrideFog,d&&d.overrideRtt).concat(y),I=VE.cacheKey(xg[l],l,T,S);return this.cache[I]||(this.cache[I]=new VE(this.context,l,xg[l],S,Vb[l],T)),this.cache[I]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(l,d){if(this.style.enable3dLights()){const y=this.style.directionalLight,S=this.style.ambientLight;if(y&&S){const T=((I,N,$)=>{const U=I.properties.get("direction"),H=I.properties.get("color-use-theme")==="none",X=I.properties.get("color").toRenderColor(H?null:$.getLut(I.scope)).toArray01(),q=I.properties.get("intensity"),ne=N.properties.get("color-use-theme")==="none",de=N.properties.get("color").toRenderColor(ne?null:$.getLut(N.scope)).toArray01(),ae=N.properties.get("intensity"),he=[U.x,U.y,U.z],me=i.cN(de,ae),Ie=i.cN(X,q);return{u_lighting_ambient_color:me,u_lighting_directional_dir:he,u_lighting_directional_color:Ie,u_ground_radiance:$E(he,Ie,me)}})(y,S,this.style);d.setLightsUniformValues(l,T)}}}uploadCommonUniforms(l,d,y,S,T){if(this.uploadCommonLightUniforms(l,d),this.terrain&&this.terrain.renderingToTexture)return;const I=this.style.fog;if(I){const N=I.getOpacity(this.transform.pitch),$=((U,H,X,q,ne,de,ae,he,me,Ie,Le,De)=>{const Ye=U.transform,Ne=H.properties.get("color-use-theme")==="none",Fe=H.properties.get("color").toRenderColor(Ne?null:U.style.getLut(H.scope)).toArray01();Fe[3]=q;const Be=U.frameCounter/1e3%1,[Qe,tt]=H.properties.get("vertical-range");return{u_fog_matrix:X?Ye.calculateFogTileMatrix(X):De||U.identityMat,u_fog_range:H.getFovAdjustedRange(Ye._fov),u_fog_color:Fe,u_fog_horizon_blend:H.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Qe,tt),tt],u_fog_temporal_offset:Be,u_frustum_tl:ne,u_frustum_tr:de,u_frustum_br:ae,u_frustum_bl:he,u_globe_pos:me,u_globe_radius:Ie,u_viewport:Le,u_globe_transition:i.ag(Ye.zoom),u_is_globe:+(Ye.projection.name==="globe")}})(this,I,y,N,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*i.q.devicePixelRatio,this.transform.height*i.q.devicePixelRatio],S);d.setFogUniformValues(l,$)}T&&d.setCutoffUniformValues(l,T.uniformValues)}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,d=l.createTexture();return l.bindTexture(l.TEXTURE_2D,d),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,d=this._backgroundTiles={},y=this.transform.coveringTiles({tileSize:512});for(const S of y)d[S.key]=l[S.key]||new sc(S,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(l,d){return!(!l.is3D(!(!this.terrain||!this.terrain.enabled))||l.type!=="clip"&&(l.minzoom&&l.minzoom>this.transform.zoom||(this.style._clipLayerPresent||l.sourceLayer!=="building")&&(!d||d.type!=="batched-model")))}isTileAffectedByFog(l){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let d=this._cachedTileFogOpacities[l.key];return d||(this._cachedTileFogOpacities[l.key]=d=this.style.fog.getOpacityForTile(l)),d[0]>=Tn||d[1]>=Tn}setupDepthForOcclusion(l,d,y){const S=this.context,T=S.gl,I=!!y;var N;y||(y={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),S.activeTexture.set(T.TEXTURE3),l&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE),y.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],y.u_depth_range_unpack=[2/((N=this.depthRangeFor3D)[1]-N[0]),-1-2*N[0]/(N[1]-N[0])],y.u_occluder_half_size=.5*this.occlusionParams.occluderSize,y.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE),S.activeTexture.set(T.TEXTURE0),I||d.setTerrainUniformValues(S,y)}}function vv(v,l){let d=!1,y=null;const S=()=>{y=null,d&&(v(),y=setTimeout(S,l),d=!1)};return()=>(d=!0,y||S(),y)}class ox{constructor(l){this._hashName=l&&encodeURIComponent(l),i.aQ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=vv(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const d=ax(l);if(this._hashName){const y=this._hashName;let S=!1;const T=location.hash.slice(1).split("&").map((I=>{const N=I.split("=")[0];return N===y?(S=!0,`${N}=${d}`):I})).filter((I=>I));return S||T.push(`${y}=${d}`),`#${T.join("&")}`}return`#${d}`}_getCurrentHash(){const l=location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(d=y)})),(d&&d[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some((y=>isNaN(y)))){const y=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(d[3]||0):l.getBearing();return l.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:y,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function ax(v,l){const d=v.getCenter(),y=Math.round(100*v.getZoom())/100,S=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,S),I=Math.round(d.lng*T)/T,N=Math.round(d.lat*T)/T,$=v.getBearing(),U=v.getPitch();let H=l?`/${I}/${N}/${y}`:`${y}/${N}/${I}`;return($||U)&&(H+="/"+Math.round(10*$)/10),U&&(H+=`/${Math.round(U)}`),H}const Rg={linearity:.3,easing:i.dB(0,0,.3,1)},eT=i.l({deceleration:2500,maxSpeed:1400},Rg),tT=i.l({deceleration:20,maxSpeed:1400},Rg),nT=i.l({deceleration:1e3,maxSpeed:360},Rg),rT=i.l({deceleration:1e3,maxSpeed:90},Rg);class iT{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.q.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,d=i.q.now();for(;l.length>0&&d-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)d.zoom+=T.zoomDelta||0,d.bearing+=T.bearingDelta||0,d.pitch+=T.pitchDelta||0,T.panDelta&&d.pan._add(T.panDelta),T.around&&(d.around=T.around),T.pinchAround&&(d.pinchAround=T.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(d.pan.mag()){const T=Lg(d.pan.mag(),y,i.l({},eT,l||{}));S.offset=d.pan.mult(T.amount/d.pan.mag()),S.center=this._map.transform.center,kg(S,T)}if(d.zoom){const T=Lg(d.zoom,y,tT);S.zoom=this._map.transform.zoom+T.amount,kg(S,T)}if(d.bearing){const T=Lg(d.bearing,y,nT);S.bearing=this._map.transform.bearing+i.ay(T.amount,-179,179),kg(S,T)}if(d.pitch){const T=Lg(d.pitch,y,rT);S.pitch=this._map.transform.pitch+T.amount,kg(S,T)}if(S.zoom||S.bearing){const T=d.pinchAround===void 0?d.around:d.pinchAround;S.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),S.noMoveStart=!0,S}}function kg(v,l){(!v.duration||v.duration<l.duration)&&(v.duration=l.duration,v.easing=l.easing)}function Lg(v,l,d){const{maxSpeed:y,linearity:S,deceleration:T}=d,I=i.ay(v*S/(l/1e3),-y,y),N=Math.abs(I)/(T*S);return{easing:d.easing,duration:1e3*N,amount:I*(N/2)}}class Pa extends i.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,y,S={}){const T=ve(d.getCanvasContainer(),y),I=d.unproject(T);super(l,i.l({point:T,lngLat:I,originalEvent:y},S)),this._defaultPrevented=!1,this.target=d}}class Ng extends i.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,y){const S=l==="touchend"?y.changedTouches:y.touches,T=se(d.getCanvasContainer(),S),I=T.map(($=>d.unproject($))),N=T.reduce((($,U,H,X)=>$.add(U.div(X.length))),new i.P(0,0));super(l,{points:T,point:N,lngLats:I,lngLat:d.unproject(N),originalEvent:y}),this._defaultPrevented=!1}}class sT extends i.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d){super("wheel",{originalEvent:d}),this._defaultPrevented=!1}}class oT{constructor(l,d){this._map=l,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new sT(this._map,l))}mousedown(l,d){return this._mousedownPos=d,this._firePreventable(new Pa(l.type,this._map,l))}mouseup(l){this._map.fire(new Pa(l.type,this._map,l))}preclick(l){const d=i.l({},l);d.type="preclick",this._map.fire(new Pa(d.type,this._map,d))}click(l,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(l),this._map.fire(new Pa(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new Pa(l.type,this._map,l))}mouseover(l){this._map.fire(new Pa(l.type,this._map,l))}mouseout(l){this._map.fire(new Pa(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Ng(l.type,this._map,l))}touchmove(l){this._map.fire(new Ng(l.type,this._map,l))}touchend(l){this._map.fire(new Ng(l.type,this._map,l))}touchcancel(l){this._map.fire(new Ng(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class YO{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new Pa(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Pa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new Pa(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qO{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,d){this.isEnabled()&&l.shiftKey&&l.button===0&&(J(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(l,d){if(!this._active)return;const y=d,S=this._startPos,T=this._lastPos;if(!S||!T||T.equals(y)||!this._box&&y.dist(S)<this._clickTolerance)return;this._lastPos=y,this._box||(this._box=z("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const I=Math.min(S.x,y.x),N=Math.max(S.x,y.x),$=Math.min(S.y,y.y),U=Math.max(S.y,y.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${I}px,${$}px)`,this._box.style.width=N-I+"px",this._box.style.height=U-$+"px")}))}mouseupWindow(l,d){if(!this._active)return;const y=this._startPos,S=d;if(y&&l.button===0){if(this.reset(),oe(),y.x!==S.x||y.y!==S.y)return this._map.fire(new i.A("boxzoomend",{originalEvent:l})),{cameraAnimation:T=>T.fitScreenCoordinates(y,S,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ee(),delete this._startPos,delete this._lastPos}_fireEvent(l,d){return this._map.fire(new i.A(l,{originalEvent:d}))}}function Bi(v,l){const d={};for(let y=0;y<v.length;y++)d[v[y].identifier]=l[y];return d}class aT{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,d,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),y.length===this.numTouches&&(this.centroid=(function(S){const T=new i.P(0,0);for(const I of S)T._add(I);return T.div(S.length)})(d),this.touches=Bi(y,d)))}touchmove(l,d,y){if(this.aborted||!this.centroid)return;const S=Bi(y,d);for(const T in this.touches){const I=S[T];(!I||I.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(l,d,y){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class lx{constructor(l){this.singleTap=new aT(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,d,y){this.singleTap.touchstart(l,d,y)}touchmove(l,d,y){this.singleTap.touchmove(l,d,y)}touchend(l,d,y){const S=this.singleTap.touchend(l,d,y);if(S){const T=l.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(S)<30;if(T&&I||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class XO{constructor(){this._zoomIn=new lx({numTouches:1,numTaps:2}),this._zoomOut=new lx({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,d,y){this._zoomIn.touchstart(l,d,y),this._zoomOut.touchstart(l,d,y)}touchmove(l,d,y){this._zoomIn.touchmove(l,d,y),this._zoomOut.touchmove(l,d,y)}touchend(l,d,y){const S=this._zoomIn.touchend(l,d,y),T=this._zoomOut.touchend(l,d,y);return S?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()+1,around:I.unproject(S)},{originalEvent:l})}):T?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:I.getZoom()-1,around:I.unproject(T)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Fg={0:1,2:2},cx={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class zg{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,d){return!1}_move(l,d){return{}}mousedown(l,d){if(this._lastPoint)return;const y=ie(l);this._correctButton(l,y)&&(this._lastPoint=d,this._eventButton=y)}mousemoveWindow(l,d){const y=this._lastPoint;if(y){if(l.preventDefault(),this._eventButton!=null&&(function(S,T){const I=Fg[T];return S.buttons===void 0||(S.buttons&I)!==I})(l,this._eventButton))this.reset();else if(this._moved||!(d.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(y,d)}}mouseupWindow(l){this._lastPoint&&ie(l)===this._eventButton&&(this._moved&&oe(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bv extends zg{mousedown(l,d){super.mousedown(l,d),this._lastPoint&&(this._active=!0)}_correctButton(l,d){return d===0&&!l.ctrlKey}_move(l,d){return{around:d,panDelta:d.sub(l)}}}class kc extends zg{constructor(l){super(l),this._pitchRotateKey=l.pitchRotateKey?cx[l.pitchRotateKey]:void 0}_correctButton(l,d){return this._pitchRotateKey?d===0&&l[this._pitchRotateKey]:d===0&&l.ctrlKey||d===2}_move(l,d){const y=.8*(d.x-l.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(l){this._pitchRotateKey||l.preventDefault()}}class Bg extends zg{constructor(l){super(l),this._pitchRotateKey=l.pitchRotateKey?cx[l.pitchRotateKey]:void 0}_correctButton(l,d){return this._pitchRotateKey?d===0&&l[this._pitchRotateKey]:d===0&&l.ctrlKey||d===2}_move(l,d){const y=-.5*(d.y-l.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(l){this._pitchRotateKey||l.preventDefault()}}class ms{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),i.aQ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}touchstart(l,d,y){return this._calculateTransform(l,d,y)}touchmove(l,d,y){if(this._active&&!(y.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(y.length===1&&!i.dC())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,d,y)}}touchend(l,d,y){this._calculateTransform(l,d,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,d,y){y.length>0&&(this._active=!0);const S=Bi(y,d),T=new i.P(0,0),I=new i.P(0,0);let N=0;for(const U in S){const H=S[U],X=this._touches[U];X&&(T._add(H),I._add(H.sub(X)),N++,S[U]=H)}if(this._touches=S,N<this._minTouches||!I.mag())return;const $=I.div(N);return this._sum._add($),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(N),panDelta:$}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=z("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")}),500)}}class Fl{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,d,y){return{}}touchstart(l,d,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([d[0],d[1]]))}touchmove(l,d,y){const S=this._firstTwoTouches;if(!S)return;l.preventDefault();const[T,I]=S,N=pp(y,d,T),$=pp(y,d,I);if(!N||!$)return;const U=this._aroundCenter?null:N.add($).div(2);return this._move([N,$],U,l)}touchend(l,d,y){if(!this._firstTwoTouches)return;const[S,T]=this._firstTwoTouches,I=pp(y,d,S),N=pp(y,d,T);I&&N||(this._active&&oe(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function pp(v,l,d){for(let y=0;y<v.length;y++)if(v[y].identifier===d)return l[y]}function $g(v,l){return Math.log(v/l)/Math.LN2}class lT extends Fl{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,d){const y=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs($g(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:$g(this._distance,y),pinchAround:d}}}function cT(v,l){return 180*v.angleWith(l)/Math.PI}class Vg extends Fl{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,d){const y=this._vector;if(this._vector=l[0].sub(l[1]),y&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:cT(this._vector,y),pinchAround:d}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const d=25/(Math.PI*this._minDiameter)*360,y=this._startVector;if(!y)return!1;const S=cT(l,y);return Math.abs(S)<d}}function ux(v){return Math.abs(v.y)>Math.abs(v.x)}class ZO extends Fl{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,ux(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,d,y){const S=this._lastPoints;if(!S)return;const T=l[0].sub(S[0]),I=l[1].sub(S[1]);return this._map._cooperativeGestures&&!i.dC()&&y.touches.length<3||(this._valid=this.gestureBeginsVertically(T,I,y.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(T.y+I.y)/2*-.5})}gestureBeginsVertically(l,d,y){if(this._valid!==void 0)return this._valid;const S=l.mag()>=2,T=d.mag()>=2;if(!S&&!T)return;if(!S||!T)return this._firstMove==null&&(this._firstMove=y),y-this._firstMove<100&&void 0;const I=l.y>0==d.y>0;return ux(l)&&ux(d)&&I}}const dx={panStep:100,bearingStep:15,pitchStep:10};class hx{constructor(){const l=dx;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let d=0,y=0,S=0,T=0,I=0;switch(l.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:l.shiftKey?y=-1:(l.preventDefault(),T=-1);break;case 39:l.shiftKey?y=1:(l.preventDefault(),T=1);break;case 38:l.shiftKey?S=1:(l.preventDefault(),I=-1);break;case 40:l.shiftKey?S=-1:(l.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(y=0,S=0),{cameraAnimation:N=>{const $=N.getZoom();N.easeTo({duration:300,easeId:"keyboardHandler",easing:jg,zoom:d?Math.round($)+d*(l.shiftKey?2:1):$,bearing:N.getBearing()+y*this._bearingStep,pitch:N.getPitch()+S*this._pitchStep,offset:[-T*this._panStep,-I*this._panStep],center:N.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function jg(v){return v*(2-v)}const _h=4.000244140625,bu=1/450;class uc{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=bu,i.aQ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||i.dC()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const y=i.q.now(),S=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,d!==0&&d%_h==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=d,this._timeout=window.setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(S*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),l.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=l,this._delta-=d,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=ve(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const U=this._type==="wheel"&&Math.abs(this._delta)>_h?this._wheelZoomRate:this._defaultZoomRate;let H=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&H!==0&&(H=1/H);const X=d(),q=Math.pow(2,X),ne=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):q;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(ne*H))),this._type==="wheel"&&(this._startZoom=X,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:d(),S=this._startZoom,T=this._easing;let I,N=!1;if(this._type==="wheel"&&S&&T){const U=Math.min((i.q.now()-this._lastWheelEventTime)/200,1),H=T(U);I=i.ah(S,y,H),U<1?this._frameId||(this._frameId=!0):N=!0}else I=y,N=!0;this._active=!0,N&&(this._active=!1,this._finishTimeout=window.setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200));let $=I-d();return $*this._lastDelta<0&&($=0),{noInertia:!0,needsRenderFrame:!N,zoomDelta:$,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let d=i.dD;if(this._prevEase){const y=this._prevEase,S=(i.q.now()-y.start)/y.duration,T=y.easing(S+.01)-y.easing(S),I=.27/Math.sqrt(T*T+1e-4)*.01,N=Math.sqrt(.0729-I*I);d=i.dB(I,N,.25,1)}return this._prevEase={start:i.q.now(),duration:l,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=z("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")}),200)}}class xd{constructor(l,d){this._clickZoom=l,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class yh{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,d){return l.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(l.shiftKey?-1:1),around:y.unproject(d)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wd{constructor(){this._tap=new lx({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,d,y){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=d[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(l,d,y))}touchmove(l,d,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const S=d[0],T=S.y-this._swipePoint.y;return this._swipePoint=S,l.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(l,d,y)}touchend(l,d,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(l,d,y)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class KO{constructor(l,d,y){this._el=l,this._mousePan=d,this._touchPan=y}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class JO{constructor(l,d,y){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=d,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class QO{constructor(l,d,y,S){this._el=l,this._touchZoom=d,this._touchRotate=y,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const xv=v=>v.zoom||v.drag||v.pitch||v.rotate;class uT extends i.A{}class ra{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,d){const y=i.ad.vec3.sub([],d,l);this.radius=i.ad.vec3.length(y[2]<0?i.ad.vec3.div([],y,this.constants):[y[0],y[1],0])}projectRay(l){i.ad.vec3.div(l,l,this.constants),i.ad.vec3.normalize(l,l),i.ad.vec3.mul(l,l,this.constants);const d=i.ad.vec3.scale([],l,this.radius);if(d[2]>0){const y=i.ad.vec3.scale([],[0,0,1],i.ad.vec3.dot(d,[0,0,1])),S=i.ad.vec3.scale([],i.ad.vec3.normalize([],[d[0],d[1],0]),this.radius),T=i.ad.vec3.add([],d,i.ad.vec3.scale([],i.ad.vec3.sub([],i.ad.vec3.add([],S,y),d),2));d[0]=T[0],d[1]=T[1]}return d}}function mp(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class dT{constructor(l,d){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new iT(l),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ra,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),i.aQ(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,T,I]of this._listeners){const N=S===document?this.handleWindowEvent:this.handleEvent;S.addEventListener(T,N,I)}}destroy(){for(const[l,d,y]of this._listeners){const S=l===document?this.handleWindowEvent:this.handleEvent;l.removeEventListener(d,S,y)}}_addDefaultHandlers(l){const d=this._map,y=d.getCanvasContainer();this._add("mapEvent",new oT(d,l));const S=d.boxZoom=new qO(d,l);this._add("boxZoom",S);const T=new XO,I=new yh;d.doubleClickZoom=new xd(I,T),this._add("tapZoom",T),this._add("clickZoom",I);const N=new wd;this._add("tapDragZoom",N);const $=d.touchPitch=new ZO(d);this._add("touchPitch",$);const U=new kc(l),H=new Bg(l);d.dragRotate=new JO(l,U,H),this._add("mouseRotate",U,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]);const X=new bv(l),q=new ms(d,l);d.dragPan=new KO(y,X,q),this._add("mousePan",X),this._add("touchPan",q,["touchZoom","touchRotate"]);const ne=new Vg,de=new lT;d.touchZoomRotate=new QO(y,de,ne,N),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]),this._add("blockableMapEvent",new YO(d));const ae=d.scrollZoom=new uc(d,this);this._add("scrollZoom",ae,["mousePan"]);const he=d.keyboard=new hx;this._add("keyboard",he);for(const me of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[me]&&d[me].enable(l[me])}_add(l,d,y){this._handlers.push({handlerName:l,handler:d,allowed:y}),this._handlersById[l]=d}stop(l){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!xv(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,d,y){for(const S in l)if(S!==y&&(!d||d.indexOf(S)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const d=[];for(const y of l)this._el.contains(y.target)&&d.push(y);return d}handleEvent(l,d){this._updatingCamera=!0;const y=l.type==="renderFrame",S=y?void 0:l,T={needsRenderFrame:!1},I={},N={},$=l.touches?this._getMapTouches(l.touches):void 0,U=$?se(this._el,$):y?void 0:ve(this._el,l);for(const{handlerName:q,handler:ne,allowed:de}of this._handlers){if(!ne.isEnabled())continue;let ae;this._blockedByActive(N,de,q)?ne.reset():ne[d||l.type]&&(ae=ne[d||l.type](l,U,$),this.mergeHandlerResult(T,I,ae,q,S),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||ne.isActive())&&(N[q]=ne)}const H={};for(const q in this._previousActiveHandlers)N[q]||(H[q]=S);this._previousActiveHandlers=N,(Object.keys(H).length||mp(T))&&(this._changes.push([T,I,H]),this._triggerRenderFrame()),(Object.keys(N).length||mp(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:X}=T;X&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],X(this._map))}mergeHandlerResult(l,d,y,S,T){if(!y)return;i.l(l,y);const I={handlerName:S,originalEvent:y.originalEvent||T};y.zoomDelta!==void 0&&(d.zoom=I),y.panDelta!==void 0&&(d.drag=I),y.pitchDelta!==void 0&&(d.pitch=I),y.bearingDelta!==void 0&&(d.rotate=I)}_applyChanges(){const l={},d={},y={};for(const[S,T,I]of this._changes)S.panDelta&&(l.panDelta=(l.panDelta||new i.P(0,0))._add(S.panDelta)),S.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(l.around=S.around),S.aroundCoord!==void 0&&(l.aroundCoord=S.aroundCoord),S.pinchAround!==void 0&&(l.pinchAround=S.pinchAround),S.noInertia&&(l.noInertia=S.noInertia),i.l(d,T),i.l(y,I);this._updateMapTransform(l,d,y),this._changes=[]}_updateMapTransform(l,d,y){const S=this._map,T=S.transform,I=Ie=>[Ie.x,Ie.y,Ie.z];if((Ie=>{const Le=this._eventsInProgress.drag;return Le&&!this._handlersById[Le.handlerName].isActive()})()&&!mp(l)){const Ie=T.zoom;T.cameraElevationReference="sea",this._originalZoom!=null&&T._orthographicProjectionAtLowPitch&&T.projection.name!=="globe"&&T.pitch===0?(T.cameraElevationReference="ground",T.zoom=this._originalZoom):(T.recenterOnTerrain(),T.cameraElevationReference="ground"),Ie!==T.zoom&&this._map._update(!0)}if(T._isCameraConstrained&&S._stop(!0),!mp(l))return void this._fireEvents(d,y,!0);let{panDelta:N,zoomDelta:$,bearingDelta:U,pitchDelta:H,around:X,aroundCoord:q,pinchAround:ne}=l;T._isCameraConstrained&&($>0&&($=0),T._isCameraConstrained=!1),ne!==void 0&&(X=ne),($||(Ie=>d[Ie]&&!this._eventsInProgress[Ie])("drag"))&&X&&(this._dragOrigin=I(T.pointCoordinate3D(X)),this._originalZoom=T.zoom,this._trackingEllipsoid.setup(T._camera.position,this._dragOrigin)),T.cameraElevationReference="sea",S._stop(!0),X=X||S.transform.centerPoint,U&&(T.bearing+=U),H&&(T.pitch+=H),T._updateCameraState();const de=[0,0,0];if(N)if(T.projection.name==="mercator"){const Ie=this._trackingEllipsoid.projectRay(T.screenPointToMercatorRay(X).dir),Le=this._trackingEllipsoid.projectRay(T.screenPointToMercatorRay(X.sub(N)).dir);de[0]=Le[0]-Ie[0],de[1]=Le[1]-Ie[1]}else{const Ie=T.pointCoordinate(X);if(T.projection.name==="globe"){N=N.rotate(-T.angle);const Le=T._pixelsPerMercatorPixel/T.worldSize;de[0]=-N.x*i.dE(i.aT(Ie.y))*Le,de[1]=-N.y*i.dE(T.center.lat)*Le}else{const Le=T.pointCoordinate(X.sub(N));Ie&&Le&&(de[0]=Le.x-Ie.x,de[1]=Le.y-Ie.y)}}const ae=T.zoom,he=[0,0,0];if($){const Ie=I(q||T.pointCoordinate3D(X)),Le={dir:i.ad.vec3.normalize([],i.ad.vec3.sub([],Ie,T._camera.position))};if(Le.dir[2]<0){const De=T.zoomDeltaToMovement(Ie,$);i.ad.vec3.scale(he,Le.dir,De)}}const me=i.ad.vec3.add(de,de,he);T._translateCameraConstrained(me),$&&Math.abs(T.zoom-ae)>1e-4&&T.recenterOnTerrain(),T.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(d,y,!0)}_fireEvents(l,d,y){const S=xv(this._eventsInProgress),T=xv(l),I={};for(const H in l){const{originalEvent:X}=l[H];this._eventsInProgress[H]||(I[`${H}start`]=X),this._eventsInProgress[H]=l[H]}!S&&T&&this._fireEvent("movestart",T.originalEvent);for(const H in I)this._fireEvent(H,I[H]);T&&this._fireEvent("move",T.originalEvent);for(const H in l){const{originalEvent:X}=l[H];this._fireEvent(H,X)}const N={};let $;for(const H in this._eventsInProgress){const{handlerName:X,originalEvent:q}=this._eventsInProgress[H];this._handlersById[X].isActive()||(delete this._eventsInProgress[H],$=d[X]||q,N[`${H}end`]=$)}for(const H in N)this._fireEvent(H,N[H]);const U=xv(this._eventsInProgress);if(y&&(S||T)&&!U){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=q=>q!==0&&-this._bearingSnap<q&&q<this._bearingSnap;H?(X(H.bearing||this._map.getBearing())&&(H.bearing=0),this._map.easeTo(H,{originalEvent:$})):(this._map.fire(new i.A("moveend",{originalEvent:$})),X(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,d){this._map.fire(new i.A(l,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((l=>{this._frameId=void 0,this.handleEvent(new uT("renderFrame",{timeStamp:l})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const hT="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class gp extends i.E{constructor(l,d){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,i.aQ(["_renderFrameCallback"],this)}getCenter(){return new i.bO(this.transform.center.lng,this.transform.center.lat)}setCenter(l,d){return this.jumpTo({center:l},d)}panBy(l,d,y){return l=i.P.convert(l).mult(-1),this.panTo(this.transform.center,i.l({offset:l},d),y)}panTo(l,d,y){return this.easeTo(i.l({center:l},d),y)}getZoom(){return this.transform.zoom}setZoom(l,d){return this.jumpTo({zoom:l},d),this}zoomTo(l,d,y){return this.easeTo(i.l({zoom:l},d),y)}zoomIn(l,d){return this.zoomTo(this.getZoom()+1,l,d),this}zoomOut(l,d){return this.zoomTo(this.getZoom()-1,l,d),this}getBearing(){return this.transform.bearing}setBearing(l,d){return this.jumpTo({bearing:l},d),this}getPadding(){return this.transform.padding}setPadding(l,d){return this.jumpTo({padding:l},d),this}rotateTo(l,d,y){return this.easeTo(i.l({bearing:l},d),y)}resetNorth(l,d){return this.rotateTo(0,i.l({duration:1e3},l),d),this}resetNorthPitch(l,d){return this.easeTo(i.l({bearing:0,pitch:0,duration:1e3},l),d),this}snapToNorth(l,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,d):this}getPitch(){return this.transform.pitch}setPitch(l,d){return this.jumpTo({pitch:l},d),this}cameraForBounds(l,d){l=i.aB.convert(l);const y=d&&d.bearing||0,S=d&&d.pitch||0,T=l.getNorthWest(),I=l.getSouthEast();return this._cameraForBounds(this.transform,T,I,y,S,d)}_extendPadding(l){const d={top:0,right:0,bottom:0,left:0};return l==null?i.l({},d,this.transform.padding):typeof l=="number"?{top:l,bottom:l,right:l,left:l}:i.l({},d,l)}_extendCameraOptions(l){return(l=i.l({offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=this._extendPadding(l.padding),l}_minimumAABBFrustumDistance(l,d){const y=d.max[0]-d.min[0],S=d.max[1]-d.min[1];return y/S>l.aspect?y/(2*Math.tan(.5*l.fovX)*l.aspect):S/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,d,y,S,T,I){const N=l.clone(),$=this._extendCameraOptions(I);N.bearing=S,N.pitch=T;const U=i.bO.convert(d),H=i.bO.convert(y),X=.5*(U.lat+H.lat),q=.5*(U.lng+H.lng),ne=i.dF(X,q),de=i.ad.vec3.normalize([],ne),ae=i.ad.vec3.normalize([],i.ad.vec3.cross([],de,[0,1,0])),he=i.ad.vec3.cross([],ae,de),me=[ae[0],ae[1],ae[2],0,he[0],he[1],he[2],0,de[0],de[1],de[2],0,0,0,0,1],Ie=[ne,i.dF(U.lat,U.lng),i.dF(H.lat,U.lng),i.dF(H.lat,H.lng),i.dF(U.lat,H.lng),i.dF(X,U.lng),i.dF(X,H.lng),i.dF(U.lat,q),i.dF(H.lat,q)];let Le=i.ce.fromPoints(Ie.map((Bt=>[i.ad.vec3.dot(ae,Bt),i.ad.vec3.dot(he,Bt),i.ad.vec3.dot(de,Bt)])));const De=i.ad.vec3.transformMat4([],Le.center,me);i.ad.vec3.squaredLength(De)===0&&i.ad.vec3.set(De,0,0,1),i.ad.vec3.normalize(De,De),i.ad.vec3.scale(De,De,i.az),N.center=i.dG(De);const Ye=N.getWorldToCameraMatrix(),Ne=i.ad.mat4.invert(new Float64Array(16),Ye);Le=i.ce.applyTransform(Le,i.ad.mat4.multiply([],Ye,me));const Fe=this._extendAABB(Le,N,$,S);if(!Fe)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Le=Fe,i.ad.vec3.transformMat4(De,De,Ye);const Be=.5*(Le.max[2]-Le.min[2]),Qe=this._minimumAABBFrustumDistance(N,Le),tt=i.ad.vec3.scale([],[0,0,1],Be),Ot=i.ad.vec3.add(tt,De,tt),bt=Qe+(N.pitch===0?0:i.ad.vec3.distance(De,Ot)),Ht=N.globeCenterInViewSpace,Wt=i.ad.vec3.sub([],De,[Ht[0],Ht[1],Ht[2]]);i.ad.vec3.normalize(Wt,Wt),i.ad.vec3.scale(Wt,Wt,bt);const sn=i.ad.vec3.add([],De,Wt);i.ad.vec3.transformMat4(sn,sn,Ne);const gt=i.dv/i.az,Ut=i.ad.vec3.length(sn),ft=i.bH(Math.max(Ut*gt-i.dv,Number.EPSILON),0),jt=Math.min(N.zoomFromMercatorZAdjusted(ft),$.maxZoom);return jt>.5*(i.c6+i.bY)?(N.setProjection({name:"mercator"}),N.zoom=jt,this._cameraForBounds(N,d,y,S,T,I)):{center:N.center,zoom:jt,bearing:S,pitch:T}}_extendAABB(l,d,y,S){const T=.5*((y.padding.left||0)+(y.padding.right||0)),I=.5*((y.padding.top||0)+(y.padding.bottom||0)),N=I,$=T,U=T,H=I,X=d.width-($+U),q=d.height-(N+H),ne=i.ad.vec3.sub([],l.max,l.min),de=Math.min(X/ne[0],q/ne[1]),ae=Math.min(d.scaleZoom(d.scale*de),y.maxZoom);if(isNaN(ae))return null;const he=d.scale/d.zoomScale(ae),me=new i.ce([l.min[0]-$*he,l.min[1]-H*he,l.min[2]],[l.max[0]+U*he,l.max[1]+N*he,l.max[2]]),Ie=(typeof y.offset.x=="number"&&typeof y.offset.y=="number"?new i.P(y.offset.x,y.offset.y):i.P.convert(y.offset)).rotate(-i.ak(S));return me.center[0]-=Ie.x*he,me.center[1]+=Ie.y*he,me}queryTerrainElevation(l,d){const y=this.transform.elevation;return y?(d=i.l({},{exaggerated:!0},d),y.getAtPoint(i.ac.fromLngLat(l),null,d.exaggerated)):null}_cameraForBounds(l,d,y,S,T,I){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,d,y,S,T,I);const N=l.clone(),$=this._extendCameraOptions(I);N.bearing=S,N.pitch=T;const U=i.bO.convert(d),H=i.bO.convert(y),X=new i.bO(U.lng,H.lat),q=new i.bO(H.lng,U.lat),ne=N.project(U),de=N.project(H),ae=this.queryTerrainElevation(U),he=this.queryTerrainElevation(H),me=this.queryTerrainElevation(X),Ie=this.queryTerrainElevation(q),Le=[[ne.x,ne.y,Math.min(ae||0,he||0,me||0,Ie||0)],[de.x,de.y,Math.max(ae||0,he||0,me||0,Ie||0)]];let De=i.ce.fromPoints(Le);const Ye=N.getWorldToCameraMatrix(),Ne=i.ad.mat4.invert(new Float64Array(16),Ye);De=i.ce.applyTransform(De,Ye);const Fe=this._extendAABB(De,N,$,S);if(!Fe)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");De=Fe;const Be=.5*i.ad.vec3.sub([],De.max,De.min)[2],Qe=this._minimumAABBFrustumDistance(N,De),tt=[0,0,1,0];i.ad.vec4.transformMat4(tt,tt,Ye),i.ad.vec4.normalize(tt,tt);const Ot=i.ad.vec3.scale([],tt,Qe+Be),bt=i.ad.vec3.add([],De.center,Ot);i.ad.vec3.transformMat4(De.center,De.center,Ne),i.ad.vec3.transformMat4(bt,bt,Ne);const Ht=N.unproject(new i.P(De.center[0],De.center[1])),Wt=i.dH(N.projection,Ht),sn=Math.pow(2,Wt),gt=Math.min(N._zoomFromMercatorZ(bt[2]*N.pixelsPerMeter*sn/N.worldSize),$.maxZoom);return N.mercatorFromTransition&&gt<.5*(i.c6+i.bY)?(N.setProjection({name:"globe"}),N.zoom=gt,this._cameraForBounds(N,d,y,S,T,I)):{center:Ht,zoom:gt,bearing:S,pitch:T}}fitBounds(l,d,y){const S=this.cameraForBounds(l,d);return this._fitInternal(S,d,y)}fitScreenCoordinates(l,d,y,S,T){const I=i.P.convert(l),N=i.P.convert(d),$=new i.P(Math.min(I.x,N.x),Math.min(I.y,N.y)),U=new i.P(Math.max(I.x,N.x),Math.max(I.y,N.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(I,N))return this;const H=this.transform.pointLocation3D($),X=this.transform.pointLocation3D(U),q=this.transform.pointLocation3D(new i.P($.x,U.y)),ne=this.transform.pointLocation3D(new i.P(U.x,$.y)),de=[Math.min(H.lng,X.lng,q.lng,ne.lng),Math.min(H.lat,X.lat,q.lat,ne.lat)],ae=[Math.max(H.lng,X.lng,q.lng,ne.lng),Math.max(H.lat,X.lat,q.lat,ne.lat)],he=S&&S.pitch?S.pitch:this.getPitch(),me=this._cameraForBounds(this.transform,de,ae,y,he,S);return this._fitInternal(me,S,T)}_fitInternal(l,d,y){return l?(d=i.l(l,d)).linear?this.easeTo(d,y):this.flyTo(d,y):this}jumpTo(l,d){this.stop();const y=l.preloadOnly?this.transform.clone():this.transform;let S=!1,T=!1,I=!1;"zoom"in l&&y.zoom!==+l.zoom&&(S=!0,y.zoom=+l.zoom),l.center!==void 0&&(y.center=i.bO.convert(l.center)),"bearing"in l&&y.bearing!==+l.bearing&&(T=!0,y.bearing=+l.bearing),"pitch"in l&&y.pitch!==+l.pitch&&(I=!0,y.pitch=+l.pitch);const N=typeof l.padding=="number"?this._extendPadding(l.padding):l.padding;if(l.padding!=null&&!y.isPaddingEqual(N))if(l.retainPadding===!1){const $=y.clone();$.padding=N,y.setLocationAtPoint(y.center,$.centerPoint)}else y.padding=N;return l.preloadOnly?(this._preloadTiles(y),this):(this.fire(new i.A("movestart",d)).fire(new i.A("move",d)),S&&this.fire(new i.A("zoomstart",d)).fire(new i.A("zoom",d)).fire(new i.A("zoomend",d)),T&&this.fire(new i.A("rotatestart",d)).fire(new i.A("rotate",d)).fire(new i.A("rotateend",d)),I&&this.fire(new i.A("pitchstart",d)).fire(new i.A("pitch",d)).fire(new i.A("pitchend",d)),this.fire(new i.A("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||i.w(hT),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,d){const y=this.transform;if(!y.projection.supportsFreeCamera)return i.w(hT),this;this.stop();const S=y.zoom,T=y.pitch,I=y.bearing;y.setFreeCameraOptions(l);const N=S!==y.zoom,$=T!==y.pitch,U=I!==y.bearing;return this.fire(new i.A("movestart",d)).fire(new i.A("move",d)),N&&this.fire(new i.A("zoomstart",d)).fire(new i.A("zoom",d)).fire(new i.A("zoomend",d)),U&&this.fire(new i.A("rotatestart",d)).fire(new i.A("rotate",d)).fire(new i.A("rotateend",d)),$&&this.fire(new i.A("pitchstart",d)).fire(new i.A("pitch",d)).fire(new i.A("pitchend",d)),this.fire(new i.A("moveend",d)),this}easeTo(l,d){this._stop(!1,l.easeId),((l=i.l({offset:[0,0],duration:500,easing:i.dD},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const y=this.transform,S=this.getZoom(),T=this.getBearing(),I=this.getPitch(),N=this.getPadding(),$="zoom"in l?+l.zoom:S,U="bearing"in l?this._normalizeBearing(l.bearing,T):T,H="pitch"in l?+l.pitch:I,X=this._extendPadding(l.padding),q=i.P.convert(l.offset);let ne,de,ae;if(y.projection.name==="globe"){const tt=i.ac.fromLngLat(y.center),Ot=q.rotate(-y.angle);tt.x+=Ot.x/y.worldSize,tt.y+=Ot.y/y.worldSize;const bt=tt.toLngLat(),Ht=i.bO.convert(l.center||bt);this._normalizeCenter(Ht),ne=y.centerPoint.add(Ot),de=new i.P(tt.x,tt.y).mult(y.worldSize),ae=new i.P(i.av(Ht.lng),i.aC(Ht.lat)).mult(y.worldSize).sub(de)}else{ne=y.centerPoint.add(q);const tt=y.pointLocation(ne),Ot=i.bO.convert(l.center||tt);this._normalizeCenter(Ot),de=y.project(tt),ae=y.project(Ot).sub(de)}const he=y.zoomScale($-S);let me,Ie;l.around&&(me=i.bO.convert(l.around),Ie=y.locationPoint(me));const Le=this._zooming||$!==S,De=this._rotating||T!==U,Ye=this._pitching||H!==I,Ne=!y.isPaddingEqual(X),Fe=l.retainPadding===!1?y.clone():y,Be=tt=>Ot=>{if(Le&&(tt.zoom=i.ah(S,$,Ot)),De&&(tt.bearing=i.ah(T,U,Ot)),Ye&&(tt.pitch=i.ah(I,H,Ot)),Ne&&(Fe.interpolatePadding(N,X,Ot),ne=Fe.centerPoint.add(q)),me)tt.setLocationAtPoint(me,Ie);else{const bt=tt.zoomScale(tt.zoom-S),Ht=$>S?Math.min(2,he):Math.max(.5,he),Wt=Math.pow(Ht,1-Ot),sn=tt.unproject(de.add(ae.mult(Ot*Wt)).mult(bt));tt.setLocationAtPoint(tt.renderWorldCopies?sn.wrap():sn,ne)}return l.preloadOnly||this._fireMoveEvents(d),tt};if(l.preloadOnly){const tt=this._emulate(Be,l.duration,y);return this._preloadTiles(tt),this}const Qe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Le,this._rotating=De,this._pitching=Ye,this._padding=Ne,this._easeId=l.easeId,this._prepareEase(d,l.noMoveStart,Qe),this._ease(Be(y),(tt=>{y.cameraElevationReference==="sea"&&y.recenterOnTerrain(),this._afterEase(d,tt)}),l),this}_prepareEase(l,d,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),d||y.moving||this.fire(new i.A("movestart",l)),this._zooming&&!y.zooming&&this.fire(new i.A("zoomstart",l)),this._rotating&&!y.rotating&&this.fire(new i.A("rotatestart",l)),this._pitching&&!y.pitching&&this.fire(new i.A("pitchstart",l))}_fireMoveEvents(l){this.fire(new i.A("move",l)),this._zooming&&this.fire(new i.A("zoom",l)),this._rotating&&this.fire(new i.A("rotate",l)),this._pitching&&this.fire(new i.A("pitch",l))}_afterEase(l,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const y=this._zooming,S=this._rotating,T=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new i.A("zoomend",l)),S&&this.fire(new i.A("rotateend",l)),T&&this.fire(new i.A("pitchend",l)),this.fire(new i.A("moveend",l))}flyTo(l,d){if(this._prefersReducedMotion(l)){const Bt=i.aA(l,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(Bt,d)}this.stop(),l=i.l({offset:[0,0],speed:1.2,curve:1.42,easing:i.dD},l);const y=this.transform,S=this.getZoom(),T=this.getBearing(),I=this.getPitch(),N=this.getPadding(),$="zoom"in l?i.ay(+l.zoom,y.minZoom,y.maxZoom):S,U="bearing"in l?this._normalizeBearing(l.bearing,T):T,H="pitch"in l?+l.pitch:I,X=this._extendPadding(l.padding),q=y.zoomScale($-S),ne=i.P.convert(l.offset);let de=y.centerPoint.add(ne);const ae=y.pointLocation(de),he=i.bO.convert(l.center||ae);this._normalizeCenter(he);const me=y.project(ae),Ie=y.project(he).sub(me);let Le=l.curve;const De=Math.max(y.width,y.height),Ye=De/q,Ne=Ie.mag();if("minZoom"in l){const Bt=i.ay(Math.min(l.minZoom,S,$),y.minZoom,y.maxZoom),Gt=De/y.zoomScale(Bt-S);Le=Math.sqrt(Gt/Ne*2)}const Fe=Le*Le;function Be(Bt){const Gt=(Ye*Ye-De*De+(Bt?-1:1)*Fe*Fe*Ne*Ne)/(2*(Bt?Ye:De)*Fe*Ne);return Math.log(Math.sqrt(Gt*Gt+1)-Gt)}function Qe(Bt){return(Math.exp(Bt)-Math.exp(-Bt))/2}function tt(Bt){return(Math.exp(Bt)+Math.exp(-Bt))/2}const Ot=Be(0);let bt=function(Bt){return tt(Ot)/tt(Ot+Le*Bt)},Ht=function(Bt){return De*((tt(Ot)*(Qe(Gt=Ot+Le*Bt)/tt(Gt))-Qe(Ot))/Fe)/Ne;var Gt},Wt=(Be(1)-Ot)/Le;if(Math.abs(Ne)<1e-6||!isFinite(Wt)){if(Math.abs(De-Ye)<1e-6)return this.easeTo(l,d);const Bt=Ye<De?-1:1;Wt=Math.abs(Math.log(Ye/De))/Le,Ht=function(){return 0},bt=function(Gt){return Math.exp(Bt*Le*Gt)}}l.duration="duration"in l?+l.duration:1e3*Wt/("screenSpeed"in l?+l.screenSpeed/Le:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const sn=T!==U,gt=H!==I,Ut=!y.isPaddingEqual(X),ft=l.retainPadding===!1?y.clone():y,jt=Bt=>Gt=>{const Dt=Gt*Wt,qt=1/bt(Dt);Bt.zoom=Gt===1?$:S+Bt.scaleZoom(qt),sn&&(Bt.bearing=i.ah(T,U,Gt)),gt&&(Bt.pitch=i.ah(I,H,Gt)),Ut&&(ft.interpolatePadding(N,X,Gt),de=ft.centerPoint.add(ne));const _n=Gt===1?he:Bt.unproject(me.add(Ie.mult(Ht(Dt))).mult(qt));return Bt.setLocationAtPoint(Bt.renderWorldCopies?_n.wrap():_n,de),Bt._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(d),Bt};if(l.preloadOnly){const Bt=this._emulate(jt,l.duration,y);return this._preloadTiles(Bt),this}return this._zooming=!0,this._rotating=sn,this._pitching=gt,this._padding=Ut,this._prepareEase(d,!1),this._ease(jt(y),(()=>this._afterEase(d)),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(l){}_cancelRenderFrame(l){}_stop(l,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const y=this._onEaseEnd;this._onEaseEnd=void 0,y.call(this,d)}if(!l){const y=this.handlers;y&&y.stop(!1)}return this}_ease(l,d,y){y.animate===!1||y.duration===0?(l(1),d()):(this._easeStart=i.q.now(),this._easeOptions=y,this._onEaseFrame=l,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((i.q.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,d){l=i.bF(l,-180,180);const y=Math.abs(l-d);return Math.abs(l-360-d)<y&&(l-=360),Math.abs(l+360-d)<y&&(l+=360),l}_normalizeCenter(l){const d=this.transform;if(d.maxBounds||d.projection.name!=="globe"&&!d.renderWorldCopies)return;const y=l.lng-d.center.lng;l.lng+=y>180?-360:y<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&i.q.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,d,y){const S=Math.ceil(15*d/1e3),T=[],I=l(y.clone());for(let N=0;N<=S;N++){const $=I(N/S);T.push($.clone())}return T}_preloadTiles(l,d){}}class wv{constructor(l={}){this.options=l,i.aQ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const d=this.options&&this.options.compact,y=l._getUIString("AttributionControl.ToggleAttribution");this._map=l,this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=z("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",y);const S=z("span","mapboxgl-ctrl-icon",this._compactButton);return S.setAttribute("aria-hidden","true"),S.setAttribute("title",y),this._innerContainer=z("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.e.ACCESS_TOKEN}];if(l){const y=d.reduce(((S,T,I)=>(T.value&&(S+=`${T.key}=${T.value}${I<d.length-1?"&":""}`),S)),"?");l.href=`${i.e.FEEDBACK_URL}/${y}#${ax(this._map,!0)}`,l.rel="noopener nofollow"}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const d=this._map.style._mergedSourceCaches;for(const S in d){const T=d[S];if(T.used){const I=T.getSource();I.attribution&&l.indexOf(I.attribution)<0&&l.push(I.attribution)}}l.sort(((S,T)=>S.length-T.length)),l=l.filter(((S,T)=>{for(let I=T+1;I<l.length;I++)if(l[I].indexOf(S)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const y=l.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,l.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class rl{constructor(){i.aQ(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=z("div","mapboxgl-ctrl");const d=z("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const d in l){const y=l[d].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class il{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const d=++this._id;return this._queue.push({callback:l,id:d,cancelled:!1}),d}remove(l){const d=this._currentlyRunning,y=d?this._queue.concat(d):this._queue;for(const S of y)if(S.id===l)return void(S.cancelled=!0)}run(l=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const y of d)if(!y.cancelled&&(y.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class _p{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const d=i.cC((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,d,y){this._start=this.getValue(d),this._end=l,this._startTime=d,this._endTime=d+y}}const vh={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class bh extends i.A{constructor(l,d,y,S){const{point:T,lngLat:I,originalEvent:N,target:$}=l;super(l.type,{point:T,lngLat:I,originalEvent:N,target:$}),this.preventDefault=()=>{l.preventDefault()},this.id=d,this.interaction=y,this.feature=S}}class fx{constructor(l){this.map=l,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(l,d){if(this.typeById.has(l))throw new Error(`Interaction id "${l}" already exists.`);const y=d.filter;let S=d.type;y&&this.filters.set(l,i.a_(y)),S==="mouseover"&&(S="mouseenter"),S==="mouseout"&&(S="mouseleave");const T=this.interactionsByType.get(S)||new Map;S==="mouseenter"||S==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(l,d)):T.size===0&&this.map.on(S,this.handleType),T.size===0&&this.interactionsByType.set(S,T),T.set(l,d),this.typeById.set(l,S)}get(l){const d=this.typeById.get(l);if(!d)return;const y=this.interactionsByType.get(d);return y?y.get(l):void 0}remove(l){const d=this.typeById.get(l);if(!d)return;this.typeById.delete(l),this.filters.delete(l);const y=this.interactionsByType.get(d);y&&(y.delete(l),d==="mouseenter"||d==="mouseleave"?(this.delegatedInteractions.delete(l),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):y.size===0&&this.map.off(d,this.handleType))}queryTargets(l,d){const y=[];for(const[S,T]of d)T.target&&y.push({targetId:S,target:T.target,filter:this.filters.get(S)});return this.map.style.queryRenderedTargets(l,y,this.map.transform)}handleMove(l){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const d=this.queryTargets(l.point,Array.from(this.delegatedInteractions).reverse());d.length&&(l.type="mouseenter",this.handleType(l,d));const y=new Map;for(const[S,{feature:T}]of this.prevHoveredFeatures)this.hoveredFeatures.has(S)||y.set(T.id,T);y.size&&(l.type="mouseleave",this.handleType(l,Array.from(y.values())))}handleOut(l){const d=Array.from(this.hoveredFeatures.values()).map((({feature:y})=>y));d.length&&(l.type="mouseleave",this.handleType(l,d)),this.hoveredFeatures.clear()}handleType(l,d){const y=Array.from(this.interactionsByType.get(l.type)).reverse(),S=!!d;d=d||this.queryTargets(l.point,y);const T=l.type==="mouseenter";let I=!1;const N=new Set;for(const $ of d){for(const[U,H]of y){if(!H.target)continue;const X=$.variants?$.variants[U]:null;if(X){for(const q of X){if(Lf(q,$,N,U))continue;const ne=new i.cx($,q),de=lg(q,$,U);S&&(ne.state=this.map.getFeatureState(ne));const ae=T?this.prevHoveredFeatures.get(de):null,he=new bh(l,U,H,ne),me=ae?ae.stop:H.handler(he);if(T&&this.hoveredFeatures.set(de,{feature:$,stop:me}),me!==!1){I=!0;break}}if(I)break}}if(I)break}if(!I)for(const[$,U]of y){const{handler:H,target:X}=U;if(!X&&H(new bh(l,$,U,null))!==!1)break}}}function Yr(v,l){if(Array.isArray(v)&&Array.isArray(l)){const d=new Set(v),y=new Set(l);return d.size===y.size&&v.every((S=>y.has(S)))}return i.bn(v,l)}const Sd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},e4={showCompass:!0,showZoom:!0,visualizePitch:!1};class t4{constructor(l,d,y=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new kc({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,y&&(this.mousePitch=new Bg({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),i.aQ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(l,d){this.mouseRotate.mousedown(l,d),this.mousePitch&&this.mousePitch.mousedown(l,d),J()}move(l,d){const y=this.map,S=this.mouseRotate.mousemoveWindow(l,d),T=S&&S.bearingDelta;if(T&&y.setBearing(y.getBearing()+T),this.mousePitch){const I=this.mousePitch.mousemoveWindow(l,d),N=I&&I.pitchDelta;N&&y.setPitch(y.getPitch()+N)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ee(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(i.l({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),ve(this.element,l)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,ve(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=se(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=se(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Sv(v,l,d){if(v=new i.bO(v.lng,v.lat),l){const y=new i.bO(v.lng-360,v.lat),S=new i.bO(v.lng+360,v.lat),T=360*Math.ceil(Math.abs(v.lng-d.center.lng)/360),I=d.locationPoint3D(v).distSqr(l),N=l.x<0||l.y<0||l.x>d.width||l.y>d.height;d.locationPoint3D(y).distSqr(l)<I&&(N||Math.abs(y.lng-d.center.lng)<T)?v=y:d.locationPoint3D(S).distSqr(l)<I&&(N||Math.abs(S.lng-d.center.lng)<T)&&(v=S)}for(;Math.abs(v.lng-d.center.lng)>180;){const y=d.locationPoint3D(v);if(y.x>=0&&y.y>=0&&y.x<=d.width&&y.y<=d.height)break;v.lng>d.center.lng?v.lng-=360:v.lng+=360}return v}const Lc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Oo={rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Do extends i.E{constructor(l,d){super(),(l instanceof HTMLElement||d)&&(l=i.l({element:l},d)),i.aQ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this);const{anchor:y="center",color:S="#3FB1CE",scale:T=1,draggable:I=!1,clickTolerance:N=0,rotation:$=Oo.rotation,rotationAlignment:U=Oo.rotationAlignment,pitchAlignment:H=Oo.pitchAlignment,occludedOpacity:X=Oo.occludedOpacity,altitude:q=Oo.altitude}=l||{};this._anchor=y,this._color=S,this._scale=T,this._draggable=I,this._clickTolerance=N,this._rotation=$,this._rotationAlignment=U,this._pitchAlignment=H,this._occludedOpacity=X,this._altitude=q,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),l&&l.element?(this._element=l.element,this._offset=i.P.convert(l&&l.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=i.P.convert(l&&l.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(ae=>{ae.preventDefault()})),this._element.addEventListener("mousedown",(ae=>{ae.preventDefault()}));const ne=this._element.classList;for(const ae in Lc)ne.remove(`mapboxgl-marker-anchor-${ae}`);ne.add(`mapboxgl-marker-anchor-${this._anchor}`);const de=l&&l.className?l.className.trim().split(/\s+/):[];ne.add(...de),this._popup=null}_createDefaultMarker(){const l=z("div"),d=j("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},l);if(this._altitude===0){const y=j("radialGradient",{id:"shadowGradient"},j("defs",{},d));j("stop",{offset:"10%","stop-opacity":.4},y),j("stop",{offset:"100%","stop-opacity":.05},y),j("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},d)}return j("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},d),j("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},d),j("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},d),l}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=i.bO.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(l){return l===this._altitude||(this._defaultMarker&&(this._altitude===0&&l!==0||this._altitude!==0&&l===0)&&(this._element=this._createDefaultMarker()),this._altitude=l||Oo.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const S=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,l._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const d=l.code,y=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(l){const d=l.originalEvent.target,y=this._element;this._popup&&(d===y||y.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,d=this._pos;if(!l||!d)return!1;const y=l.unproject(d,this._altitude),S=l.getFreeCameraOptions();if(!S.position)return!1;const T=S.position.toLngLat();return T.distanceTo(y)<.9*T.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const d=this._pos;if(!d||d.x<0||d.x>l.transform.width||d.y<0||d.y>l.transform.height)return void this._clearFadeTimer();const y=l.unproject(d,this._altitude);let S;l._showingGlobe()&&i.dK(l.transform,this._lngLat)?S=0:(S=1-l._queryFogOpacity(y),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(S*=this._occludedOpacity)),this._element.style.opacity=`${S}`,this._element.style.pointerEvents=S>0?"auto":"none",this._popup&&this._popup._setOpacity(S),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${Lc[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const l=this._pos,d=this._map,y=this.getPitchAlignment();if(!d||!l||y!=="map")return"";if(!d._showingGlobe()){const $=d.getPitch();return $?`rotateX(${$}deg)`:""}const S=i.c4(i.dL(d.transform,this._lngLat)),T=l.sub(i.dM(d.transform)),I=Math.abs(T.x)+Math.abs(T.y);if(I===0)return"";const N=S/I;return`rotateX(${-T.y*N}deg) rotateY(${T.x*N}deg)`}_calculateZTransform(){const l=this._pos,d=this._map;if(!d||!l)return"";let y=0;const S=this.getRotationAlignment();if(S==="map")if(d._showingGlobe()){const T=d.project(new i.bO(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),I=d.project(new i.bO(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(T);y=i.c4(Math.atan2(I.y,I.x))-90}else y=-d.getBearing();else if(S==="horizon"){const T=i.ae(4,6,d.getZoom()),I=i.dM(d.transform);I.y+=T*d.transform.height;const N=l.sub(I),$=i.c4(Math.atan2(N.y,N.x));y=($>90?$-270:$+90)*(1-T)}return y+=this._rotation,y?`rotateZ(${y}deg)`:""}_update(l){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Sv(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat,this._altitude),l===!0?this._updateFrameId=requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),d._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(l){return this._offset=i.P.convert(l),this._update(),this}addClassName(l){return this._element.classList.add(l),this}removeClassName(l){return this._element.classList.remove(l),this}toggleClassName(l){return this._element.classList.toggle(l)}_onMove(l){const d=this._map;if(!d)return;const y=this._pointerdownPos,S=this._positionDelta;if(y&&S){if(!this._isDragging){const T=this._clickTolerance||d._clickTolerance;if(l.point.dist(y)<T)return;this._isDragging=!0}this._pos=l.point.sub(S),this._lngLat=d.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.A("dragstart"))),this.fire(new i.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new i.A("dragend")),this._state="inactive"}_addDragHandler(l){const d=this._map,y=this._pos;d&&y&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(y),this._pointerdownPos=l.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const d=this._map;return d&&(l?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||Oo.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||Oo.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||Oo.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||Oo.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Oa={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},vo={maxWidth:100,unit:"metric"},px={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},hs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},fT=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ed(v=new i.P(0,0),l="bottom"){if(typeof v=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(v,2)));switch(l){case"top":return new i.P(0,v);case"top-left":return new i.P(d,d);case"top-right":return new i.P(-d,d);case"bottom":return new i.P(0,-v);case"bottom-left":return new i.P(d,-d);case"bottom-right":return new i.P(-d,-d);case"left":return new i.P(v,0);case"right":return new i.P(-v,0)}return new i.P(0,0)}return v instanceof i.P||Array.isArray(v)?i.P.convert(v):i.P.convert(v[l]||[0,0])}return{version:f,supported:F.supported,setRTLTextPlugin:i.dN,getRTLTextPluginStatus:i.dO,Map:class extends gp{constructor(v){x.mark(g.create);const l=v;if((v=i.l({},Sd,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(v.antialias&&i.dI(window)&&(v.antialias=!1,i.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Fy(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies,null,null),v),this._repaint=!!v.repaint,this._interactive=v.interactive,this._minTileCacheSize=v.minTileCacheSize,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=v.crossSourceCollisions,this._collectResourceTiming=v.collectResourceTiming,this._language=this._parseLanguage(v.language),this._worldview=v.worldview,this._renderTaskQueue=new il,this._domRenderTaskQueue=new il,this._controls=[],this._markers=[],this._popups=[],this._mapId=i.aW(),this._locale=i.l({},vh,v.locale),this._clickTolerance=v.clickTolerance,this._cooperativeGestures=v.cooperativeGestures,this._performanceMetricsCollection=v.performanceMetricsCollection,this._tessellationStep=v.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=v.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new _p(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=v.scaleFactor,this._requestManager=new Ce(v.transformRequest,v.accessToken,v.testMode),this._silenceAuthErrors=!!v.testMode,this._contextCreateOptions=v.contextCreateOptions?Object.assign({},v.contextCreateOptions):{},typeof v.container=="string"){const d=document.getElementById(v.container);if(!d)throw new Error(`Container '${v.container.toString()}' not found.`);this._container=d}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(this._container.childNodes.length>0&&i.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),v.maxBounds&&this.setMaxBounds(v.maxBounds),this._spriteFormat=v.spriteFormat,i.aQ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new tx),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},(()=>{this._update()})),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},(()=>{this.setScaleFactor(this._scaleFactor)})),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new dT(this,v),this._localFontFamily=v.localFontFamily,this._localIdeographFontFamily=v.localIdeographFontFamily,(v.style||!v.testMode)&&this.setStyle(v.style||i.e.DEFAULT_STYLE,{config:v.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),v.projection&&this.setProjection(v.projection),this.indoor=new ME(this),v.hash&&(this._hash=new ox(typeof v.hash=="string"&&v.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){l.center==null&&l.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch});const d=v.bounds;d&&(this.resize(),this.fitBounds(d,i.l({},v.fitBoundsOptions,{duration:0})))}this.resize(),v.attributionControl&&this.addControl(new wv({customAttribution:v.customAttribution})),this._logoControl=new rl,this.addControl(this._logoControl,v.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()})),this.on("data",(d=>{this._update(d.dataType==="style"),this.fire(new i.A(`${d.dataType}data`,d))})),this.on("dataloading",(d=>{this.fire(new i.A(`${d.dataType}dataloading`,d))})),this._interactions=new fx(this)}_getMapId(){return this._mapId}addControl(v,l){if(l===void 0&&(l=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new i.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=v.onAdd(this);this._controls.push(v);const y=this._controlPositions[l];return l.indexOf("bottom")!==-1?y.insertBefore(d,y.firstChild):y.appendChild(d),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new i.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(v);return l>-1&&this._controls.splice(l,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(v){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new i.A("movestart",v)).fire(new i.A("move",v)),this.fire(new i.A("resize",v)),l&&this.fire(new i.A("moveend",v)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(v){return this.transform.setMaxBounds(i.aB.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v?this.setZoom(v):this.fire(new i.A("zoomstart")).fire(new i.A("zoom")).fire(new i.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v?this.setZoom(v):this.fire(new i.A("zoomstart")).fire(new i.A("zoom")).fire(new i.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v?this.setPitch(v):this.fire(new i.A("pitchstart")).fire(new i.A("pitch")).fire(new i.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v?this.setPitch(v):this.fire(new i.A("pitchstart")).fire(new i.A("pitch")).fire(new i.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(v){return this._scaleFactor=v,this.painter.scaleFactor=v,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers((l=>l.type==="symbol")),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(v){return v==="auto"?navigator.language:Array.isArray(v)?v.length===0?void 0:v.map((l=>l==="auto"?navigator.language:l)):v}setLanguage(v){const l=this._parseLanguage(v);if(!this.style||l===this._language)return this;this._language=l,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(v){return this.style&&v!==this._worldview?(this._worldview=v,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(v){return this._lazyInitEmptyStyle(),v?typeof v=="string"&&(v={name:v}):v=null,this._useExplicitProjection=!!v,this._prioritizeAndUpdateProjection(v,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const v=this.transform,l=v.projection.name;let d;l==="globe"&&v.zoom>=i.bY?(v.setMercatorFromTransition(),d=!0):l==="mercator"&&v.zoom<i.bY&&(v.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(v,l){return this._updateProjection(v||l||{name:"mercator"})}_updateProjection(v){let l;return l=v.name==="globe"&&this.transform.zoom>=i.bY?this.transform.setMercatorFromTransition():this.transform.setProjection(v),this.style.applyProjectionUpdate(),l&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(v,l){return this.transform.locationPoint3D(i.bO.convert(v),l)}unproject(v,l){return this.transform.pointLocation3D(i.P.convert(v),l)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(v,l,d){const y=S=>{let T=[];if(Array.isArray(l)){const I=l.filter((N=>this.getLayer(N)));T=I.length?this.queryRenderedFeatures(S,{layers:I}):[]}else T=this.queryRenderedFeatures(S,{target:l});return T};if(v==="mouseenter"||v==="mouseover"){let S=!1;return{listener:d,targets:l,delegates:{mousemove:I=>{const N=y(I.point);N.length?S||(S=!0,d.call(this,new Pa(v,this,I.originalEvent,{features:N}))):S=!1},mouseout:()=>{S=!1}}}}if(v==="mouseleave"||v==="mouseout"){let S=!1;return{listener:d,targets:l,delegates:{mousemove:N=>{y(N.point).length?S=!0:S&&(S=!1,d.call(this,new Pa(v,this,N.originalEvent)))},mouseout:N=>{S&&(S=!1,d.call(this,new Pa(v,this,N.originalEvent)))}}}}{const S=T=>{const I=y(T.point);I.length&&(T.features=I,d.call(this,T),delete T.features)};return{listener:d,targets:l,delegates:{[v]:S}}}}on(v,l,d){if(typeof l=="function"||d===void 0)return super.on(v,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const y=this._createDelegatedListener(v,l,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(y);for(const S in y.delegates)this.on(S,y.delegates[S]);return this}once(v,l,d){if(typeof l=="function"||d===void 0)return super.once(v,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const y=this._createDelegatedListener(v,l,d);for(const S in y.delegates)this.once(S,y.delegates[S]);return this}off(v,l,d){if(typeof l=="function"||d===void 0)return super.off(v,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const y=this._delegatedListeners?this._delegatedListeners[v]:void 0;return y&&(S=>{for(let T=0;T<S.length;T++){const I=S[T];if(I.listener===d&&Yr(I.targets,l)){for(const N in I.delegates)this.off(N,I.delegates[N]);return S.splice(T,1),this}}})(y),this}queryRenderedFeatures(v,l){if(!this.style)return[];if(v===void 0||v instanceof i.P||Array.isArray(v)||l!==void 0||(l=v,v=void 0),v=v||[[0,0],[this.transform.width,this.transform.height]],!l){const T=this.style.queryRenderedFeatures(v,void 0,this.transform),I=this.style.queryRenderedFeatureset(v,void 0,this.transform);return T.concat(I)}let d=!0;if(l.target&&(d=this._isTargetValid(l.target),d&&!l.layers))return this.style.queryRenderedFeatureset(v,l,this.transform);let y=!0;if(l.layers&&Array.isArray(l.layers)){for(const T of l.layers)if(!this._isValidId(T)){y=!1;break}if(y&&!l.target)return this.style.queryRenderedFeatures(v,l,this.transform)}let S=[];return y&&(S=S.concat(this.style.queryRenderedFeatures(v,l,this.transform))),d&&(S=S.concat(this.style.queryRenderedFeatureset(v,l,this.transform))),S}querySourceFeatures(v,l){return!v||typeof v=="string"&&!this._isValidId(v)?[]:this.style.querySourceFeatures(v,l)}isPointOnSurface(v){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&i.w(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(i.P.convert(v))}addInteraction(v,l){return this._interactions.add(v,l),this}removeInteraction(v){return this._interactions.remove(v),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(v){return this._cooperativeGestures=v,this}setStyle(v,l){return l=i.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l),this.style&&v&&l.diff!==!1&&l.localFontFamily===this._localFontFamily&&l.localIdeographFontFamily===this._localIdeographFontFamily&&!l.config?(this.style._diffStyle(v,((d,y)=>{d?(i.w(`Unable to perform style diff: ${String(d.message||d.error||d)}. Rebuilding the style from scratch.`),this._updateStyle(v,l)):y&&this._update(!0)}),(()=>{this._postStyleLoadEvent()})),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(v,l))}_getUIString(v){const l=this._locale[v];if(l==null)throw new Error(`Missing UI string '${v}'`);return l}_updateStyle(v,l){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),v){const d=i.l({},l);l&&l.config&&(d.initialConfig=l.config,delete d.config),this.style=new lc(this,d).load(v),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new lc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(i.w("There is no style added to the map."),!1)}_isValidId(v){return v==null?(this.fire(new i.z(new Error("IDs can't be empty."))),!1):!i.cs(v)||(this.fire(new i.z(new Error(`IDs can't contain special symbols: "${v}".`))),!1)}_isTargetValid(v){return"featuresetId"in v?this._isValidId("importId"in v?v.importId:v.featuresetId):"layerId"in v&&this._isValidId(v.layerId)}_areTargetsValid(v){if(Array.isArray(v)){for(const l of v)if(!this._isValidId(l))return!1;return!0}return this._isTargetValid(v)}addSource(v,l){return this._isValidId(v)?(this._lazyInitEmptyStyle(),this.style.addSource(v,l),this._update(!0)):this}isSourceLoaded(v){return!!this._isValidId(v)&&!!this.style&&this.style._isSourceCacheLoaded(v)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(v,l,d){this._lazyInitEmptyStyle(),this.style.addSourceType(v,l,d)}removeSource(v){return this._isValidId(v)?(this.style.removeSource(v),this._updateTerrain(),this._update(!0)):this}getSource(v){return this._isValidId(v)?this.style.getOwnSource(v):null}addImage(v,l,{pixelRatio:d=1,sdf:y=!1,stretchX:S,stretchY:T,content:I}={}){this._lazyInitEmptyStyle();const N=i.I.from(v);if(l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap){const{width:$,height:U,data:H}=i.q.getImageData(l);this.style.addImage(N,this.style.scope,{data:new i.r({width:$,height:U},H),pixelRatio:d,stretchX:S,stretchY:T,content:I,sdf:y,version:0,usvg:!1})}else if(l.width===void 0||l.height===void 0)this.fire(new i.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:$,height:U}=l,H=l;this.style.addImage(N,this.style.scope,{data:new i.r({width:$,height:U},new Uint8Array(H.data)),pixelRatio:d,stretchX:S,stretchY:T,content:I,sdf:y,usvg:!1,version:0,userImage:H}),H.onAdd&&H.onAdd(this,v)}}updateImage(v,l){this._lazyInitEmptyStyle();const d=i.I.from(v),y=this.style.getImage(d,this.style.scope);if(!y)return void this.fire(new i.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const S=l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap?i.q.getImageData(l):l,{width:T,height:I,data:N}=S;if(T===void 0||I===void 0)return void this.fire(new i.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(T!==(y.usvg?y.icon.usvg_tree.width:y.data.width)||I!==(y.usvg?y.icon.usvg_tree.height:y.data.height))return void this.fire(new i.z(new Error(`The width and height of the updated image (${T}, ${I})
                must be that same as the previous version of the image
                (${y.data.width}, ${y.data.height})`)));const $=!(l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap);let U=!1;y.usvg?(y.data=new i.r({width:T,height:I},new Uint8Array(N)),y.usvg=!1,y.icon=void 0,U=!0):y.data.replace(N,$),this.style.updateImage(d,this.style.scope,y,U)}hasImage(v){return v?!!this.style&&!!this.style.getImage(i.I.from(v),this.style.scope):(this.fire(new i.z(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(i.I.from(v),this.style.scope)}loadImage(v,l){i.o(this._requestManager.transformRequest(v,i.R.Image),((d,y)=>{l(d,y instanceof HTMLImageElement?i.q.getImageData(y):y)}))}listImages(){return this.style.listImages().map((v=>v.name))}addModel(v,l){this._lazyInitEmptyStyle(),this.style.addModel(v,l)}hasModel(v){return v?this.style.hasModel(v):(this.fire(new i.z(new Error("Missing required model id"))),!1)}removeModel(v){this.style.removeModel(v)}listModels(){return this.style.listModels()}addLayer(v,l){return this._isValidId(v.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(v,l),this._update(!0)):this}getSlot(v){const l=this.getLayer(v);return l&&l.slot||null}setSlot(v,l){return this.style.setSlot(v,l),this.style.mergeLayers(),this._update(!0)}addImport(v,l){return this.style.addImport(v,l),this}updateImport(v,l){return typeof l!="string"&&l.id!==v?(this.removeImport(v),this.addImport(l)):(this.style.updateImport(v,l),this._update(!0))}removeImport(v){return this.style.removeImport(v),this}moveImport(v,l){return this.style.moveImport(v,l),this._update(!0)}moveLayer(v,l){return this._isValidId(v)?(this.style.moveLayer(v,l),this._update(!0)):this}removeLayer(v){return this._isValidId(v)?(this.style.removeLayer(v),this._update(!0)):this}getLayer(v){if(!this._isValidId(v))return null;const l=this.style.getOwnLayer(v);return l?l.type==="custom"?l.implementation:l.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(v,l,d){return this._isValidId(v)?(this.style.setLayerZoomRange(v,l,d),this._update(!0)):this}setFilter(v,l,d={}){return this._isValidId(v)?(this.style.setFilter(v,l,d),this._update(!0)):this}getFilter(v){return this._isValidId(v)?this.style.getFilter(v):null}setPaintProperty(v,l,d,y={}){return this._isValidId(v)?(this.style.setPaintProperty(v,l,d,y),this._update(!0)):this}getPaintProperty(v,l){return this._isValidId(v)?this.style.getPaintProperty(v,l):null}setLayoutProperty(v,l,d,y={}){return this._isValidId(v)?(this.style.setLayoutProperty(v,l,d,y),this._update(!0)):this}getLayoutProperty(v,l){return this._isValidId(v)?this.style.getLayoutProperty(v,l):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(v){return this.style.setGlyphsUrl(v),this._update(!0)}getSchema(v){return this.style.getSchema(v)}setSchema(v,l){return this.style.setSchema(v,l),this._update(!0)}getConfig(v){return this.style.getConfig(v)}setConfig(v,l){return this.style.setConfig(v,l),this._update(!0)}getConfigProperty(v,l){return this.style.getConfigProperty(v,l)}setConfigProperty(v,l,d){return this.style.setConfigProperty(v,l,d),this._update(!0)}getFeaturesetDescriptors(v){return this.style.getFeaturesetDescriptors(v)}setLights(v){if(this._lazyInitEmptyStyle(),v&&v.length===1&&v[0].type==="flat"){const l=v[0];l.properties?this.style.setFlatLight(l.properties,l.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(v),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const v=this.style.getLights()||[];return v.length===0&&v.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),v}setLight(v,l={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:v}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(v){return this._lazyInitEmptyStyle(),!v&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(v),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(v){return this._lazyInitEmptyStyle(),this.style.setFog(v),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(v){return this._lazyInitEmptyStyle(),this.style.setSnow(v),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(v){return this._lazyInitEmptyStyle(),this.style.setRain(v),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(v){return this._lazyInitEmptyStyle(),this.style.setColorTheme(v),this._update(!0)}setImportColorTheme(v,l){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(v,l),this._update(!0)}setCamera(v){return this.style.setCamera(v),this._triggerCameraUpdate(v)}_triggerCameraUpdate(v){return this._update(this.transform.setOrthographicProjectionAtLowPitch(v["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(v){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(i.bO.convert(v),this.transform):0}setFeatureState(v,l){return v.source&&!this._isValidId(v.source)?this:(this.style.setFeatureState(v,l),this._update())}removeFeatureState(v,l){return v.source&&!this._isValidId(v.source)?this:(this.style.removeFeatureState(v,l),this._update())}getFeatureState(v){return v.source&&!this._isValidId(v.source)?null:this.style.getFeatureState(v)}_updateContainerDimensions(){if(!this._container)return;const v=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let d,y,S,T=this._container;for(;T&&(!y||!S);){const I=window.getComputedStyle(T).transform;I&&I!=="none"&&(d=I.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(y=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(S=d[3])),T=T.parentElement}this._containerWidth=y?Math.abs(v/y):v,this._containerHeight=S?Math.abs(l/S):l}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&i.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=z("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=z("div","mapboxgl-canvas-container",v);this._canvas=z("canvas","mapboxgl-canvas",l),this._interactive&&(l.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=z("div","mapboxgl-control-container",v),y=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach((S=>{y[S]=z("div",`mapboxgl-ctrl-${S}`,d)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,l){const d=i.q.devicePixelRatio||1;this._canvas.width=d*Math.ceil(v),this._canvas.height=d*Math.ceil(l),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${l}px`}_addMarker(v){this._markers.push(v)}_removeMarker(v){const l=this._markers.indexOf(v);l!==-1&&this._markers.splice(l,1)}_addPopup(v){this._popups.push(v)}_removePopup(v){const l=this._popups.indexOf(v);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const v=i.l({},F.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl2",v);l?(On(l,!0),this.painter=new yv(l,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",(d=>{d.dataType==="source"&&this.painter.setTileLoadedFlag(!0)})),i.m.testSupport(l)):this.fire(new i.z(new Error("Failed to initialize WebGL")))}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.A("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style.reloadModels(),this.style.clearSources(),this._update(),this.fire(new i.A("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_requestDomTask(v){!this.loaded()||this.loaded()&&!this.isMoving()?v():this._domRenderTaskQueue.add(v)}_render(v){let l;this.fire(new i.A("renderstart")),++this._frameId;const d=this.painter.context.extTimerQuery,y=i.q.now(),S=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(l=S.createQuery(),S.beginQuery(d.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(v),this._domRenderTaskQueue.run(v),this._removed)return;this._updateProjectionTransition();const T=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const U=this.transform.zoom,H=this.transform.pitch,X=i.q.now(),q=new i.aa(U,{now:X,fadeDuration:T,pitch:H,transition:this.style.transition});this.style.update(q)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let I=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),I=this._updateAverageElevation(y),this.style.updateSources(this.transform),this.style.updateImageProviders(),this.isMoving()||this._forceMarkerAndPopupUpdate()):I=this._updateAverageElevation(y);const N=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,T,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),N&&(this._placementDirty=N.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new i.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,x.mark(g.load),this.fire(new i.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const U=i.q.now()-y;S.endQuery(d.TIME_ELAPSED_EXT),setTimeout((()=>{const H=S.getQueryParameter(l,S.QUERY_RESULT)/1e6;S.deleteQuery(l),this.fire(new i.A("gpu-timing-frame",{cpuTime:U,gpuTime:H}))}),50)}if(this.listens("gpu-timing-layer")){const U=this.painter.collectGpuTimers();setTimeout((()=>{const H=this.painter.queryGpuTimers(U);this.fire(new i.A("gpu-timing-layer",{layerTimes:H}))}),50)}if(this.listens("gpu-timing-deferred-render")){const U=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const H=this.painter.queryGpuTimeDeferredRender(U);this.fire(new i.A("gpu-timing-deferred-render",{gpuTime:H}))}),50)}const $=this._sourcesDirty||this._styleDirty||this._placementDirty||I;if($||this._repaint)this.triggerRepaint();else{const U=this.idle();if(U&&(I=this._updateAverageElevation(y,!0)),I)this.triggerRepaint();else if(this._triggerFrame(!1),U&&(this.fire(new i.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const H=this._calculateSpeedIndex();this.fire(new i.A("speedindexcompleted",{speedIndex:H})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||$||(this._fullyLoaded=!0,x.mark(g.fullLoad),this._performanceMetricsCollection&&Jt(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(v){for(const l of this._markers)v&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!v||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(v,l=!1){const d=S=>(this.transform.averageElevation=S,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);const y=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(y||(l||v-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(v)){const S=this.transform.averageElevation;let T=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(T)?T=0:this._averageElevationLastSampledAt=v;const I=Math.abs(S-T);if(I>1){if(this._isInitialLoad||y)return this._averageElevation.jumpTo(T),d(T);this._averageElevation.easeTo(T,v,300)}else if(I>1e-4)return this._averageElevation.jumpTo(T),d(T)}return!!this._averageElevation.isEasing(v)&&d(this._averageElevation.getValue(v))}_authenticate(){_e(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(v=>{if(v&&(v.message===Se||v.status===401)){const l=this.painter.context.gl;On(l,!1),this._logoControl instanceof rl&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new i.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),nn(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_postStyleLoadEvent(){this.style.globalId&&Xt(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const v=this._isDragging();this.painter.updateTerrain(this.style,v)}_calculateSpeedIndex(){const v=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const d=this.painter.context.gl,y=d.createFramebuffer();function S(T){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,T,0);const I=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,I),I}return d.bindFramebuffer(d.FRAMEBUFFER,y),this._canvasPixelComparison(S(v),l.canvasCopies.map(S),l.timeStamps)}_canvasPixelComparison(v,l,d){let y=d[1]-d[0];const S=v.length/4;for(let T=0;T<l.length;T++){const I=l[T];let N=0;for(let $=0;$<I.length;$+=4)I[$]===v[$]&&I[$+1]===v[$+1]&&I[$+2]===v[$+2]&&I[$+3]===v[$+3]&&(N+=1);y+=(d[T+2]-d[T+1])*(1-N/S)}return y}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),bn.delete(this.painter.context.gl),Kt.remove(),Lt.remove(),this._removed=!0,this.fire(new i.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(v){this._renderNextFrame=this._renderNextFrame||v,this.style&&!this._frame&&(this._frame=i.q.frame((l=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(l)})))}_preloadTiles(v){const l=this.style?this.style.getSourceCaches():[];return i.bl(l,((d,y)=>d._preloadTiles(v,y)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(v){this._trackResize&&this.resize({originalEvent:v})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(v){this._showParseStatus!==v&&(this._showParseStatus=v,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(v){this._showTerrainWireframe!==v&&(this._showTerrainWireframe=v,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(v){this._showLayers2DWireframe!==v&&(this._showLayers2DWireframe=v,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(v){this._showLayers3DWireframe!==v&&(this._showLayers3DWireframe=v,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(v){this._speedIndexTiming!==v&&(this._speedIndexTiming=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,this._tp.refreshUI(),v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(v){this._showTileAABBs!==v&&(this._showTileAABBs=v,this._tp.refreshUI(),v&&this._update())}_setCacheLimits(v,l){i.dJ(v,l)}get version(){return f}},NavigationControl:class{constructor(v={}){this.options=i.l({},e4,v),this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this.options.showZoom&&(i.aQ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(l=>{this._map&&this._map.zoomIn({},{originalEvent:l})})),z("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(l=>{this._map&&this._map.zoomOut({},{originalEvent:l})})),z("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(i.aQ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(l=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:l}):d.resetNorth({},{originalEvent:l}))})),this._compassIcon=z("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map;if(!v)return;const l=v.getZoom(),d=l===v.getMaxZoom(),y=l===v.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const v=this._map;if(!v)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(v.transform.pitch*(Math.PI/180)),.5)}) rotateX(${v.transform.pitch}deg) rotateZ(${v.transform.angle*(180/Math.PI)}deg)`:`rotate(${v.transform.angle*(180/Math.PI)}deg)`;v._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=l)}))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),v.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&v.on("pitch",this._rotateCompassArrow),v.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new t4(v,this._compass,this.options.visualizePitch)),this._container}onRemove(){const v=this._map;v&&(this._container.remove(),this.options.showZoom&&v.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&v.off("pitch",this._rotateCompassArrow),v.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(v,l){const d=z("button",v,this._container);return d.type="button",d.addEventListener("click",l),d}_setButtonTitle(v,l){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${l}`);v.setAttribute("aria-label",d),v.firstElementChild&&v.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends i.E{constructor(v={}){super();const l=navigator.geolocation;this.options=i.l({geolocation:l},Oa,v),i.aQ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=vv(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(v){return this._map=v,this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(v){const l=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,v(d)};this._supportsGeolocation!==void 0?v(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then((d=>l(d.state!=="denied"))).catch((()=>l())):l()}_isOutOfMapMaxBounds(v){const l=this._map.getMaxBounds(),d=v.coords;return!!l&&(d.longitude<l.getWest()||d.longitude>l.getEast()||d.latitude<l.getSouth()||d.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new i.A("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(v),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(v),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.A("geolocate",v)),this._finish()}}_updateCamera(v){const l=new i.bO(v.coords.longitude,v.coords.latitude),d=v.coords.accuracy,y=this._map.getBearing(),S=i.l({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(d),S,{geolocateSource:!0})}_updateMarker(v){if(v){const l=new i.bO(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.transform,l=i.bH(1,v._center.lat)*v.worldSize,d=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(v){if(this._map){if(this.options.trackUserLocation)if(v.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(v.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.A("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this._geolocateButton=z("button","mapboxgl-ctrl-geolocate",this._container),z("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",v===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=z("div","mapboxgl-user-location"),this._dotElement.appendChild(z("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(z("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Do({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=z("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Do({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new i.A("trackuserlocationend")))}))}}_onDeviceOrientation(v){this._userLocationDotMarker&&(v.webkitCompassHeading?this._heading=v.webkitCompassHeading:v.absolute===!0&&(this._heading=-1*v.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(v={maximumAge:6e5,timeout:0},this._noTimeout=!0):(v=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,v),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const v=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then((l=>{l==="granted"&&v()})).catch(console.error):v()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:wv,ScaleControl:class{constructor(v={}){this.options=i.l({},vo,v),this._isNumberFormatSupported=(function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}})(),i.aQ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const v=this.options.maxWidth||100,l=this._map,d=l._containerHeight/2,y=l._containerWidth/2-v/2,S=l.unproject([y,d]),T=l.unproject([y+v,d]),I=S.distanceTo(T);if(this.options.unit==="imperial"){const N=3.2808*I;N>5280?this._setScale(v,N/5280,"mile"):this._setScale(v,N,"foot")}else this.options.unit==="nautical"?this._setScale(v,I/1852,"nautical-mile"):I>=1e3?this._setScale(v,I/1e3,"kilometer"):this._setScale(v,I,"meter")}_setScale(v,l,d){this._map._requestDomTask((()=>{const y=(function(T){const I=Math.pow(10,`${Math.floor(T)}`.length-1);let N=T/I;return N=N>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:(function($){const U=Math.pow(10,Math.ceil(-Math.log($)/Math.LN10));return Math.round($*U)/U})(N),I*N})(l),S=y/l;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(y):`${y}&nbsp;${px[d]}`,this._container.style.width=v*S+"px"}))}onAdd(v){return this._map=v,this._language=v.getLanguage(),this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-scale",v.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(v){this._language=v,this._update()}setUnit(v){this.options.unit=v,this._update()}},FullscreenControl:class{constructor(v={}){this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:i.w("Full screen control 'container' must be a DOM element.")),i.aQ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const v=this._fullscreenButton=z("button","mapboxgl-ctrl-fullscreen",this._controlContainer);z("span","mapboxgl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",v)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends i.E{constructor(v){super(),this.options=i.l(Object.create(hs),v),this._altitude=this.options.altitude,i.aQ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(v&&v.className?v.className.trim().split(/\s+/):[])}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&v.on("preclick",this._onClose),this.options.closeOnMove&&v.on("move",this._onClose),v.on("remove",this.remove),this._update(),v._addPopup(this),this._focusFirstElement(),this._trackPointer?(v.on("mousemove",this._onMouseEvent),v.on("mouseup",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")):v.on("move",this._update),this.fire(new i.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const v=this._map;return v&&(v.off("move",this._update),v.off("move",this._onClose),v.off("preclick",this._onClose),v.off("click",this._onClose),v.off("remove",this.remove),v.off("mousemove",this._onMouseEvent),v.off("mouseup",this._onMouseEvent),v.off("drag",this._onMouseEvent),v._canvasContainer&&v._canvasContainer.classList.remove("mapboxgl-track-pointer"),v._removePopup(this),this._map=void 0),this.fire(new i.A("close")),this}getLngLat(){return this._lngLat}setLngLat(v){this._lngLat=i.bO.convert(v),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(v){return this._altitude=v,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const v=this._map;return v&&(v.off("move",this._update),v.on("mousemove",this._onMouseEvent),v.on("drag",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const l=document.createDocumentFragment(),d=document.createElement("body");let y;for(d.innerHTML=v;y=d.firstChild,y;)l.appendChild(y);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=z("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(v),this.options.closeButton){const d=this._closeButton=z("button","mapboxgl-popup-close-button",l);d.type="button",d.setAttribute("aria-label","Close popup"),d.innerHTML='<span aria-hidden="true">&#215;</span>',d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(v){return this._classList.add(v),this._updateClassList(),this}removeClassName(v){return this._classList.delete(v),this._updateClassList(),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){let l;return this._classList.delete(v)?l=!1:(this._classList.add(v),l=!0),this._updateClassList(),l}_onMouseEvent(v){this._update(v.point)}_getAnchor(v){if(this.options.anchor)return this.options.anchor;const l=this._map,d=this._container,y=this._pos;if(!l||!d||!y)return"bottom";const S=d.offsetWidth,T=d.offsetHeight,I=y.x<S/2,N=y.x>l.transform.width-S/2;if(y.y+v<T)return I?"top-left":N?"top-right":"top";if(y.y>l.transform.height-T){if(I)return"bottom-left";if(N)return"bottom-right"}return I?"left":N?"right":"bottom"}_updateClassList(){const v=this._container;if(!v)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),v.className=l.join(" ")}_update(v){const l=this._map,d=this._content;if(!l||!this._lngLat&&!this._trackPointer||!d)return;let y=this._container;if(y||(y=this._container=z("div","mapboxgl-popup",l.getContainer()),this._tip=z("div","mapboxgl-popup-tip",y),y.appendChild(d)),this.options.maxWidth&&y.style.maxWidth!==this.options.maxWidth&&(y.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Sv(this._lngLat,this._pos,l.transform)),!this._trackPointer||v){const S=this._pos=this._trackPointer&&v instanceof i.P?v:l.project(this._lngLat,this._altitude),T=Ed(this.options.offset),I=this._anchor=this._getAnchor(T.y),N=Ed(this.options.offset,I),$=S.add(N).round();l._requestDomTask((()=>{this._container&&I&&(this._container.style.transform=`${Lc[I]} translate(${$.x}px,${$.y}px)`)}))}if(!this._marker&&l._showingGlobe()){const S=i.dK(l.transform,this._lngLat)?0:1;this._setOpacity(S)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(fT);v&&v.focus()}_onClose(){this.remove()}_setOpacity(v){this._container&&(this._container.style.opacity=`${v}`),this._content&&(this._content.style.pointerEvents=v?"auto":"none")}},Marker:Do,Style:lc,LngLat:i.bO,LngLatBounds:i.aB,Point:i.P,MercatorCoordinate:i.ac,FreeCameraOptions:ub,Evented:i.E,config:i.e,prewarm:i.dP,clearPrewarmedResources:i.dQ,get accessToken(){return i.e.ACCESS_TOKEN},set accessToken(v){i.e.ACCESS_TOKEN=v},get baseApiUrl(){return i.e.API_URL},set baseApiUrl(v){i.e.API_URL=v},get workerCount(){return i.dR.workerCount},set workerCount(v){i.dR.workerCount=v},get maxParallelImageRequests(){return i.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){i.e.MAX_PARALLEL_IMAGE_REQUESTS=v},clearStorage(v){i.dS(v)},get workerUrl(){return i.dT.workerUrl},set workerUrl(v){i.dT.workerUrl=v},get workerClass(){return i.dT.workerClass},set workerClass(v){i.dT.workerClass=v},get workerParams(){return i.dT.workerParams},set workerParams(v){i.dT.workerParams=v},get dracoUrl(){return i.dU()},set dracoUrl(v){i.dV(v)},get meshoptUrl(){return i.dW()},set meshoptUrl(v){i.dX(v)},setNow:i.q.setNow,restoreNow:i.q.restoreNow}}));var c=s;return c}))})(_C)),_C.exports}var Pze=Ize();const fA=ih(Pze),Oze=xs(()=>{const e=no().public;let t,n;return{provide:{mapService:{getMap(s={}){if(fA.accessToken=e.mapboxAccessToken,!s.getNewMapInstance){if(t||(t=document.getElementById("mapContainer")),!t)throw new Error("Unable to find map container!");t.classList.remove("tw-hidden"),s?.container&&s.container.appendChild(t)}let o=!1;const{bearing:c=0,bounds:i=null,center:f,dragRotate:g=!1,logoPosition:x="top-left",maxPitch:w=0,pitch:A=0,projection:C="mercator",style:F,zoom:z}=s;if(!fA.supported())return{map:null,willLoad:!1};const j={attributionControl:!1,bearing:c,bounds:i,center:f,container:t,dragRotate:g,fadeDuration:150,keyboard:!1,logoPosition:x,maxPitch:w,pitch:A,projection:C,style:F,touchPitch:!1,zoom:z};if(s.getNewMapInstance)return{map:new fA.Map({...j,container:s.container}),willLoad:!0};if(!n)n=new fA.Map(j),o=!0;else{if(typeof c=="number"&&n.setBearing(c),typeof g=="boolean"&&(g?n.dragRotate.enable():n.dragRotate.disable()),typeof w=="number"&&n.setMaxPitch(w),C&&n.setProjection(C),F&&n.setStyle(F),i){const V=n.cameraForBounds(i,{pitch:A,bearing:c});n.jumpTo(V)}else typeof A=="number"&&n.setPitch(A),z&&n.setZoom(z),f&&n.setCenter(f);n.resize()}return{map:n,willLoad:o}},returnMap(){t.classList.add("tw-hidden"),document.getElementById("root").appendChild(t)}}}}});var tc="top",tu="bottom",nu="right",nc="left",cz="auto",nE=[tc,tu,nu,nc],p1="start",pS="end",Dze="clippingParents",Dse="viewport",vw="popper",Rze="reference",JG=nE.reduce(function(e,t){return e.concat([t+"-"+p1,t+"-"+pS])},[]),Rse=[].concat(nE,[cz]).reduce(function(e,t){return e.concat([t,t+"-"+p1,t+"-"+pS])},[]),kze="beforeRead",Lze="read",Nze="afterRead",Fze="beforeMain",zze="main",Bze="afterMain",$ze="beforeWrite",Vze="write",jze="afterWrite",Uze=[kze,Lze,Nze,Fze,zze,Bze,$ze,Vze,jze];function nh(e){return e?(e.nodeName||"").toLowerCase():null}function Ac(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function sy(e){var t=Ac(e).Element;return e instanceof t||e instanceof Element}function Kc(e){var t=Ac(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function uz(e){if(typeof ShadowRoot>"u")return!1;var t=Ac(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Hze(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},s=t.attributes[n]||{},o=t.elements[n];!Kc(o)||!nh(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(c){var i=s[c];i===!1?o.removeAttribute(c):o.setAttribute(c,i===!0?"":i)}))})}function Wze(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],o=t.attributes[r]||{},c=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),i=c.reduce(function(f,g){return f[g]="",f},{});!Kc(s)||!nh(s)||(Object.assign(s.style,i),Object.keys(o).forEach(function(f){s.removeAttribute(f)}))})}}const Gze={name:"applyStyles",enabled:!0,phase:"write",fn:Hze,effect:Wze,requires:["computeStyles"]};function qd(e){return e.split("-")[0]}var H_=Math.max,HI=Math.min,m1=Math.round;function A5(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function kse(){return!/^((?!chrome|android).)*safari/i.test(A5())}function g1(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),s=1,o=1;t&&Kc(e)&&(s=e.offsetWidth>0&&m1(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&m1(r.height)/e.offsetHeight||1);var c=sy(e)?Ac(e):window,i=c.visualViewport,f=!kse()&&n,g=(r.left+(f&&i?i.offsetLeft:0))/s,x=(r.top+(f&&i?i.offsetTop:0))/o,w=r.width/s,A=r.height/o;return{width:w,height:A,top:x,right:g+w,bottom:x+A,left:g,x:g,y:x}}function dz(e){var t=g1(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Lse(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&uz(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function bf(e){return Ac(e).getComputedStyle(e)}function Yze(e){return["table","td","th"].indexOf(nh(e))>=0}function og(e){return((sy(e)?e.ownerDocument:e.document)||window.document).documentElement}function $P(e){return nh(e)==="html"?e:e.assignedSlot||e.parentNode||(uz(e)?e.host:null)||og(e)}function QG(e){return!Kc(e)||bf(e).position==="fixed"?null:e.offsetParent}function qze(e){var t=/firefox/i.test(A5()),n=/Trident/i.test(A5());if(n&&Kc(e)){var r=bf(e);if(r.position==="fixed")return null}var s=$P(e);for(uz(s)&&(s=s.host);Kc(s)&&["html","body"].indexOf(nh(s))<0;){var o=bf(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function rE(e){for(var t=Ac(e),n=QG(e);n&&Yze(n)&&bf(n).position==="static";)n=QG(n);return n&&(nh(n)==="html"||nh(n)==="body"&&bf(n).position==="static")?t:n||qze(e)||t}function hz(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function _2(e,t,n){return H_(e,HI(t,n))}function Xze(e,t,n){var r=_2(e,t,n);return r>n?n:r}function Nse(){return{top:0,right:0,bottom:0,left:0}}function Fse(e){return Object.assign({},Nse(),e)}function zse(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var Zze=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Fse(typeof t!="number"?t:zse(t,nE))};function Kze(e){var t,n=e.state,r=e.name,s=e.options,o=n.elements.arrow,c=n.modifiersData.popperOffsets,i=qd(n.placement),f=hz(i),g=[nc,nu].indexOf(i)>=0,x=g?"height":"width";if(!(!o||!c)){var w=Zze(s.padding,n),A=dz(o),C=f==="y"?tc:nc,F=f==="y"?tu:nu,z=n.rects.reference[x]+n.rects.reference[f]-c[f]-n.rects.popper[x],j=c[f]-n.rects.reference[f],V=rE(o),Y=V?f==="y"?V.clientHeight||0:V.clientWidth||0:0,te=z/2-j/2,J=w[C],ee=Y-A[x]-w[F],le=Y/2-A[x]/2+te,oe=_2(J,le,ee),ve=f;n.modifiersData[r]=(t={},t[ve]=oe,t.centerOffset=oe-le,t)}}function Jze(e){var t=e.state,n=e.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||Lse(t.elements.popper,s)&&(t.elements.arrow=s))}const Qze={name:"arrow",enabled:!0,phase:"main",fn:Kze,effect:Jze,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function _1(e){return e.split("-")[1]}var eBe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tBe(e,t){var n=e.x,r=e.y,s=t.devicePixelRatio||1;return{x:m1(n*s)/s||0,y:m1(r*s)/s||0}}function eY(e){var t,n=e.popper,r=e.popperRect,s=e.placement,o=e.variation,c=e.offsets,i=e.position,f=e.gpuAcceleration,g=e.adaptive,x=e.roundOffsets,w=e.isFixed,A=c.x,C=A===void 0?0:A,F=c.y,z=F===void 0?0:F,j=typeof x=="function"?x({x:C,y:z}):{x:C,y:z};C=j.x,z=j.y;var V=c.hasOwnProperty("x"),Y=c.hasOwnProperty("y"),te=nc,J=tc,ee=window;if(g){var le=rE(n),oe="clientHeight",ve="clientWidth";if(le===Ac(n)&&(le=og(n),bf(le).position!=="static"&&i==="absolute"&&(oe="scrollHeight",ve="scrollWidth")),le=le,s===tc||(s===nc||s===nu)&&o===pS){J=tu;var se=w&&le===ee&&ee.visualViewport?ee.visualViewport.height:le[oe];z-=se-r.height,z*=f?1:-1}if(s===nc||(s===tc||s===tu)&&o===pS){te=nu;var ie=w&&le===ee&&ee.visualViewport?ee.visualViewport.width:le[ve];C-=ie-r.width,C*=f?1:-1}}var pe=Object.assign({position:i},g&&eBe),be=x===!0?tBe({x:C,y:z},Ac(n)):{x:C,y:z};if(C=be.x,z=be.y,f){var Se;return Object.assign({},pe,(Se={},Se[J]=Y?"0":"",Se[te]=V?"0":"",Se.transform=(ee.devicePixelRatio||1)<=1?"translate("+C+"px, "+z+"px)":"translate3d("+C+"px, "+z+"px, 0)",Se))}return Object.assign({},pe,(t={},t[J]=Y?z+"px":"",t[te]=V?C+"px":"",t.transform="",t))}function nBe(e){var t=e.state,n=e.options,r=n.gpuAcceleration,s=r===void 0?!0:r,o=n.adaptive,c=o===void 0?!0:o,i=n.roundOffsets,f=i===void 0?!0:i,g={placement:qd(t.placement),variation:_1(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,eY(Object.assign({},g,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:c,roundOffsets:f})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,eY(Object.assign({},g,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const rBe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:nBe,data:{}};var pA={passive:!0};function iBe(e){var t=e.state,n=e.instance,r=e.options,s=r.scroll,o=s===void 0?!0:s,c=r.resize,i=c===void 0?!0:c,f=Ac(t.elements.popper),g=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&g.forEach(function(x){x.addEventListener("scroll",n.update,pA)}),i&&f.addEventListener("resize",n.update,pA),function(){o&&g.forEach(function(x){x.removeEventListener("scroll",n.update,pA)}),i&&f.removeEventListener("resize",n.update,pA)}}const sBe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:iBe,data:{}};var oBe={left:"right",right:"left",bottom:"top",top:"bottom"};function yC(e){return e.replace(/left|right|bottom|top/g,function(t){return oBe[t]})}var aBe={start:"end",end:"start"};function tY(e){return e.replace(/start|end/g,function(t){return aBe[t]})}function fz(e){var t=Ac(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function pz(e){return g1(og(e)).left+fz(e).scrollLeft}function lBe(e,t){var n=Ac(e),r=og(e),s=n.visualViewport,o=r.clientWidth,c=r.clientHeight,i=0,f=0;if(s){o=s.width,c=s.height;var g=kse();(g||!g&&t==="fixed")&&(i=s.offsetLeft,f=s.offsetTop)}return{width:o,height:c,x:i+pz(e),y:f}}function cBe(e){var t,n=og(e),r=fz(e),s=(t=e.ownerDocument)==null?void 0:t.body,o=H_(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),c=H_(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),i=-r.scrollLeft+pz(e),f=-r.scrollTop;return bf(s||n).direction==="rtl"&&(i+=H_(n.clientWidth,s?s.clientWidth:0)-o),{width:o,height:c,x:i,y:f}}function mz(e){var t=bf(e),n=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function Bse(e){return["html","body","#document"].indexOf(nh(e))>=0?e.ownerDocument.body:Kc(e)&&mz(e)?e:Bse($P(e))}function y2(e,t){var n;t===void 0&&(t=[]);var r=Bse(e),s=r===((n=e.ownerDocument)==null?void 0:n.body),o=Ac(r),c=s?[o].concat(o.visualViewport||[],mz(r)?r:[]):r,i=t.concat(c);return s?i:i.concat(y2($P(c)))}function C5(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function uBe(e,t){var n=g1(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function nY(e,t,n){return t===Dse?C5(lBe(e,n)):sy(t)?uBe(t,n):C5(cBe(og(e)))}function dBe(e){var t=y2($P(e)),n=["absolute","fixed"].indexOf(bf(e).position)>=0,r=n&&Kc(e)?rE(e):e;return sy(r)?t.filter(function(s){return sy(s)&&Lse(s,r)&&nh(s)!=="body"}):[]}function hBe(e,t,n,r){var s=t==="clippingParents"?dBe(e):[].concat(t),o=[].concat(s,[n]),c=o[0],i=o.reduce(function(f,g){var x=nY(e,g,r);return f.top=H_(x.top,f.top),f.right=HI(x.right,f.right),f.bottom=HI(x.bottom,f.bottom),f.left=H_(x.left,f.left),f},nY(e,c,r));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function $se(e){var t=e.reference,n=e.element,r=e.placement,s=r?qd(r):null,o=r?_1(r):null,c=t.x+t.width/2-n.width/2,i=t.y+t.height/2-n.height/2,f;switch(s){case tc:f={x:c,y:t.y-n.height};break;case tu:f={x:c,y:t.y+t.height};break;case nu:f={x:t.x+t.width,y:i};break;case nc:f={x:t.x-n.width,y:i};break;default:f={x:t.x,y:t.y}}var g=s?hz(s):null;if(g!=null){var x=g==="y"?"height":"width";switch(o){case p1:f[g]=f[g]-(t[x]/2-n[x]/2);break;case pS:f[g]=f[g]+(t[x]/2-n[x]/2);break}}return f}function mS(e,t){t===void 0&&(t={});var n=t,r=n.placement,s=r===void 0?e.placement:r,o=n.strategy,c=o===void 0?e.strategy:o,i=n.boundary,f=i===void 0?Dze:i,g=n.rootBoundary,x=g===void 0?Dse:g,w=n.elementContext,A=w===void 0?vw:w,C=n.altBoundary,F=C===void 0?!1:C,z=n.padding,j=z===void 0?0:z,V=Fse(typeof j!="number"?j:zse(j,nE)),Y=A===vw?Rze:vw,te=e.rects.popper,J=e.elements[F?Y:A],ee=hBe(sy(J)?J:J.contextElement||og(e.elements.popper),f,x,c),le=g1(e.elements.reference),oe=$se({reference:le,element:te,placement:s}),ve=C5(Object.assign({},te,oe)),se=A===vw?ve:le,ie={top:ee.top-se.top+V.top,bottom:se.bottom-ee.bottom+V.bottom,left:ee.left-se.left+V.left,right:se.right-ee.right+V.right},pe=e.modifiersData.offset;if(A===vw&&pe){var be=pe[s];Object.keys(ie).forEach(function(Se){var Ce=[nu,tu].indexOf(Se)>=0?1:-1,Ee=[tc,tu].indexOf(Se)>=0?"y":"x";ie[Se]+=be[Ee]*Ce})}return ie}function fBe(e,t){t===void 0&&(t={});var n=t,r=n.placement,s=n.boundary,o=n.rootBoundary,c=n.padding,i=n.flipVariations,f=n.allowedAutoPlacements,g=f===void 0?Rse:f,x=_1(r),w=x?i?JG:JG.filter(function(F){return _1(F)===x}):nE,A=w.filter(function(F){return g.indexOf(F)>=0});A.length===0&&(A=w);var C=A.reduce(function(F,z){return F[z]=mS(e,{placement:z,boundary:s,rootBoundary:o,padding:c})[qd(z)],F},{});return Object.keys(C).sort(function(F,z){return C[F]-C[z]})}function pBe(e){if(qd(e)===cz)return[];var t=yC(e);return[tY(e),t,tY(t)]}function mBe(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=n.mainAxis,o=s===void 0?!0:s,c=n.altAxis,i=c===void 0?!0:c,f=n.fallbackPlacements,g=n.padding,x=n.boundary,w=n.rootBoundary,A=n.altBoundary,C=n.flipVariations,F=C===void 0?!0:C,z=n.allowedAutoPlacements,j=t.options.placement,V=qd(j),Y=V===j,te=f||(Y||!F?[yC(j)]:pBe(j)),J=[j].concat(te).reduce(function(nn,mn){return nn.concat(qd(mn)===cz?fBe(t,{placement:mn,boundary:x,rootBoundary:w,padding:g,flipVariations:F,allowedAutoPlacements:z}):mn)},[]),ee=t.rects.reference,le=t.rects.popper,oe=new Map,ve=!0,se=J[0],ie=0;ie<J.length;ie++){var pe=J[ie],be=qd(pe),Se=_1(pe)===p1,Ce=[tc,tu].indexOf(be)>=0,Ee=Ce?"width":"height",xe=mS(t,{placement:pe,boundary:x,rootBoundary:w,altBoundary:A,padding:g}),ke=Ce?Se?nu:nc:Se?tu:tc;ee[Ee]>le[Ee]&&(ke=yC(ke));var He=yC(ke),Ke=[];if(o&&Ke.push(xe[be]<=0),i&&Ke.push(xe[ke]<=0,xe[He]<=0),Ke.every(function(nn){return nn})){se=pe,ve=!1;break}oe.set(pe,Ke)}if(ve)for(var Ge=F?3:1,$t=function(mn){var Xt=J.find(function(mt){var Jt=oe.get(mt);if(Jt)return Jt.slice(0,mn).every(function(Kt){return Kt})});if(Xt)return se=Xt,"break"},Ft=Ge;Ft>0;Ft--){var Lt=$t(Ft);if(Lt==="break")break}t.placement!==se&&(t.modifiersData[r]._skip=!0,t.placement=se,t.reset=!0)}}const gBe={name:"flip",enabled:!0,phase:"main",fn:mBe,requiresIfExists:["offset"],data:{_skip:!1}};function rY(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function iY(e){return[tc,nu,tu,nc].some(function(t){return e[t]>=0})}function _Be(e){var t=e.state,n=e.name,r=t.rects.reference,s=t.rects.popper,o=t.modifiersData.preventOverflow,c=mS(t,{elementContext:"reference"}),i=mS(t,{altBoundary:!0}),f=rY(c,r),g=rY(i,s,o),x=iY(f),w=iY(g);t.modifiersData[n]={referenceClippingOffsets:f,popperEscapeOffsets:g,isReferenceHidden:x,hasPopperEscaped:w},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":x,"data-popper-escaped":w})}const yBe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_Be};function vBe(e,t,n){var r=qd(e),s=[nc,tc].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,c=o[0],i=o[1];return c=c||0,i=(i||0)*s,[nc,nu].indexOf(r)>=0?{x:i,y:c}:{x:c,y:i}}function bBe(e){var t=e.state,n=e.options,r=e.name,s=n.offset,o=s===void 0?[0,0]:s,c=Rse.reduce(function(x,w){return x[w]=vBe(w,t.rects,o),x},{}),i=c[t.placement],f=i.x,g=i.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=f,t.modifiersData.popperOffsets.y+=g),t.modifiersData[r]=c}const xBe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:bBe};function wBe(e){var t=e.state,n=e.name;t.modifiersData[n]=$se({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const SBe={name:"popperOffsets",enabled:!0,phase:"read",fn:wBe,data:{}};function EBe(e){return e==="x"?"y":"x"}function TBe(e){var t=e.state,n=e.options,r=e.name,s=n.mainAxis,o=s===void 0?!0:s,c=n.altAxis,i=c===void 0?!1:c,f=n.boundary,g=n.rootBoundary,x=n.altBoundary,w=n.padding,A=n.tether,C=A===void 0?!0:A,F=n.tetherOffset,z=F===void 0?0:F,j=mS(t,{boundary:f,rootBoundary:g,padding:w,altBoundary:x}),V=qd(t.placement),Y=_1(t.placement),te=!Y,J=hz(V),ee=EBe(J),le=t.modifiersData.popperOffsets,oe=t.rects.reference,ve=t.rects.popper,se=typeof z=="function"?z(Object.assign({},t.rects,{placement:t.placement})):z,ie=typeof se=="number"?{mainAxis:se,altAxis:se}:Object.assign({mainAxis:0,altAxis:0},se),pe=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,be={x:0,y:0};if(le){if(o){var Se,Ce=J==="y"?tc:nc,Ee=J==="y"?tu:nu,xe=J==="y"?"height":"width",ke=le[J],He=ke+j[Ce],Ke=ke-j[Ee],Ge=C?-ve[xe]/2:0,$t=Y===p1?oe[xe]:ve[xe],Ft=Y===p1?-ve[xe]:-oe[xe],Lt=t.elements.arrow,nn=C&&Lt?dz(Lt):{width:0,height:0},mn=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Nse(),Xt=mn[Ce],mt=mn[Ee],Jt=_2(0,oe[xe],nn[xe]),Kt=te?oe[xe]/2-Ge-Jt-Xt-ie.mainAxis:$t-Jt-Xt-ie.mainAxis,_e=te?-oe[xe]/2+Ge+Jt+mt+ie.mainAxis:Ft+Jt+mt+ie.mainAxis,bn=t.elements.arrow&&rE(t.elements.arrow),On=bn?J==="y"?bn.clientTop||0:bn.clientLeft||0:0,je=(Se=pe?.[J])!=null?Se:0,ge=ke+Kt-je-On,nt=ke+_e-je,It=_2(C?HI(He,ge):He,ke,C?H_(Ke,nt):Ke);le[J]=It,be[J]=It-ke}if(i){var ht,ut=J==="x"?tc:nc,Rt=J==="x"?tu:nu,ze=le[ee],lt=ee==="y"?"height":"width",at=ze+j[ut],Et=ze-j[Rt],$e=[tc,nc].indexOf(V)!==-1,Mt=(ht=pe?.[ee])!=null?ht:0,tn=$e?at:ze-oe[lt]-ve[lt]-Mt+ie.altAxis,on=$e?ze+oe[lt]+ve[lt]-Mt-ie.altAxis:Et,vn=C&&$e?Xze(tn,ze,on):_2(C?tn:at,ze,C?on:Et);le[ee]=vn,be[ee]=vn-ze}t.modifiersData[r]=be}}const MBe={name:"preventOverflow",enabled:!0,phase:"main",fn:TBe,requiresIfExists:["offset"]};function ABe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function CBe(e){return e===Ac(e)||!Kc(e)?fz(e):ABe(e)}function IBe(e){var t=e.getBoundingClientRect(),n=m1(t.width)/e.offsetWidth||1,r=m1(t.height)/e.offsetHeight||1;return n!==1||r!==1}function PBe(e,t,n){n===void 0&&(n=!1);var r=Kc(t),s=Kc(t)&&IBe(t),o=og(t),c=g1(e,s,n),i={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(r||!r&&!n)&&((nh(t)!=="body"||mz(o))&&(i=CBe(t)),Kc(t)?(f=g1(t,!0),f.x+=t.clientLeft,f.y+=t.clientTop):o&&(f.x=pz(o))),{x:c.left+i.scrollLeft-f.x,y:c.top+i.scrollTop-f.y,width:c.width,height:c.height}}function OBe(e){var t=new Map,n=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function s(o){n.add(o.name);var c=[].concat(o.requires||[],o.requiresIfExists||[]);c.forEach(function(i){if(!n.has(i)){var f=t.get(i);f&&s(f)}}),r.push(o)}return e.forEach(function(o){n.has(o.name)||s(o)}),r}function DBe(e){var t=OBe(e);return Uze.reduce(function(n,r){return n.concat(t.filter(function(s){return s.phase===r}))},[])}function RBe(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function kBe(e){var t=e.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var sY={placement:"bottom",modifiers:[],strategy:"absolute"};function oY(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function LBe(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,s=t.defaultOptions,o=s===void 0?sY:s;return function(i,f,g){g===void 0&&(g=o);var x={placement:"bottom",orderedModifiers:[],options:Object.assign({},sY,o),modifiersData:{},elements:{reference:i,popper:f},attributes:{},styles:{}},w=[],A=!1,C={state:x,setOptions:function(V){var Y=typeof V=="function"?V(x.options):V;z(),x.options=Object.assign({},o,x.options,Y),x.scrollParents={reference:sy(i)?y2(i):i.contextElement?y2(i.contextElement):[],popper:y2(f)};var te=DBe(kBe([].concat(r,x.options.modifiers)));return x.orderedModifiers=te.filter(function(J){return J.enabled}),F(),C.update()},forceUpdate:function(){if(!A){var V=x.elements,Y=V.reference,te=V.popper;if(oY(Y,te)){x.rects={reference:PBe(Y,rE(te),x.options.strategy==="fixed"),popper:dz(te)},x.reset=!1,x.placement=x.options.placement,x.orderedModifiers.forEach(function(ie){return x.modifiersData[ie.name]=Object.assign({},ie.data)});for(var J=0;J<x.orderedModifiers.length;J++){if(x.reset===!0){x.reset=!1,J=-1;continue}var ee=x.orderedModifiers[J],le=ee.fn,oe=ee.options,ve=oe===void 0?{}:oe,se=ee.name;typeof le=="function"&&(x=le({state:x,options:ve,name:se,instance:C})||x)}}}},update:RBe(function(){return new Promise(function(j){C.forceUpdate(),j(x)})}),destroy:function(){z(),A=!0}};if(!oY(i,f))return C;C.setOptions(g).then(function(j){!A&&g.onFirstUpdate&&g.onFirstUpdate(j)});function F(){x.orderedModifiers.forEach(function(j){var V=j.name,Y=j.options,te=Y===void 0?{}:Y,J=j.effect;if(typeof J=="function"){var ee=J({state:x,name:V,instance:C,options:te}),le=function(){};w.push(ee||le)}})}function z(){w.forEach(function(j){return j()}),w=[]}return C}}var NBe=[sBe,SBe,rBe,Gze,xBe,gBe,MBe,Qze,yBe],FBe=LBe({defaultModifiers:NBe}),zBe=Object.defineProperty,BBe=(e,t,n)=>t in e?zBe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ar=(e,t,n)=>(BBe(e,typeof t!="symbol"?t+"":t,n),n),mA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vse(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $Be=Object.prototype,VBe=$Be.hasOwnProperty;function jBe(e,t){return e!=null&&VBe.call(e,t)}var UBe=jBe,HBe=Array.isArray,ld=HBe,WBe=typeof mA=="object"&&mA&&mA.Object===Object&&mA,jse=WBe,GBe=jse,YBe=typeof self=="object"&&self&&self.Object===Object&&self,qBe=GBe||YBe||Function("return this")(),sh=qBe,XBe=sh,ZBe=XBe.Symbol,VP=ZBe,aY=VP,Use=Object.prototype,KBe=Use.hasOwnProperty,JBe=Use.toString,bw=aY?aY.toStringTag:void 0;function QBe(e){var t=KBe.call(e,bw),n=e[bw];try{e[bw]=void 0;var r=!0}catch{}var s=JBe.call(e);return r&&(t?e[bw]=n:delete e[bw]),s}var e8e=QBe,t8e=Object.prototype,n8e=t8e.toString;function r8e(e){return n8e.call(e)}var i8e=r8e,lY=VP,s8e=e8e,o8e=i8e,a8e="[object Null]",l8e="[object Undefined]",cY=lY?lY.toStringTag:void 0;function c8e(e){return e==null?e===void 0?l8e:a8e:cY&&cY in Object(e)?s8e(e):o8e(e)}var oh=c8e;function u8e(e){return e!=null&&typeof e=="object"}var cd=u8e,d8e=oh,h8e=cd,f8e="[object Symbol]";function p8e(e){return typeof e=="symbol"||h8e(e)&&d8e(e)==f8e}var gz=p8e,m8e=ld,g8e=gz,_8e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,y8e=/^\w*$/;function v8e(e,t){if(m8e(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||g8e(e)?!0:y8e.test(e)||!_8e.test(e)||t!=null&&e in Object(t)}var _z=v8e;function b8e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Pf=b8e,x8e=oh,w8e=Pf,S8e="[object AsyncFunction]",E8e="[object Function]",T8e="[object GeneratorFunction]",M8e="[object Proxy]";function A8e(e){if(!w8e(e))return!1;var t=x8e(e);return t==E8e||t==T8e||t==S8e||t==M8e}var Ay=A8e,C8e=sh,I8e=C8e["__core-js_shared__"],P8e=I8e,NR=P8e,uY=(function(){var e=/[^.]+$/.exec(NR&&NR.keys&&NR.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function O8e(e){return!!uY&&uY in e}var D8e=O8e,R8e=Function.prototype,k8e=R8e.toString;function L8e(e){if(e!=null){try{return k8e.call(e)}catch{}try{return e+""}catch{}}return""}var Hse=L8e,N8e=Ay,F8e=D8e,z8e=Pf,B8e=Hse,$8e=/[\\^$.*+?()[\]{}|]/g,V8e=/^\[object .+?Constructor\]$/,j8e=Function.prototype,U8e=Object.prototype,H8e=j8e.toString,W8e=U8e.hasOwnProperty,G8e=RegExp("^"+H8e.call(W8e).replace($8e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Y8e(e){if(!z8e(e)||F8e(e))return!1;var t=N8e(e)?G8e:V8e;return t.test(B8e(e))}var q8e=Y8e;function X8e(e,t){return e?.[t]}var Z8e=X8e,K8e=q8e,J8e=Z8e;function Q8e(e,t){var n=J8e(e,t);return K8e(n)?n:void 0}var Cy=Q8e,e$e=Cy,t$e=e$e(Object,"create"),jP=t$e,dY=jP;function n$e(){this.__data__=dY?dY(null):{},this.size=0}var r$e=n$e;function i$e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var s$e=i$e,o$e=jP,a$e="__lodash_hash_undefined__",l$e=Object.prototype,c$e=l$e.hasOwnProperty;function u$e(e){var t=this.__data__;if(o$e){var n=t[e];return n===a$e?void 0:n}return c$e.call(t,e)?t[e]:void 0}var d$e=u$e,h$e=jP,f$e=Object.prototype,p$e=f$e.hasOwnProperty;function m$e(e){var t=this.__data__;return h$e?t[e]!==void 0:p$e.call(t,e)}var g$e=m$e,_$e=jP,y$e="__lodash_hash_undefined__";function v$e(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=_$e&&t===void 0?y$e:t,this}var b$e=v$e,x$e=r$e,w$e=s$e,S$e=d$e,E$e=g$e,T$e=b$e;function U1(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}U1.prototype.clear=x$e;U1.prototype.delete=w$e;U1.prototype.get=S$e;U1.prototype.has=E$e;U1.prototype.set=T$e;var M$e=U1;function A$e(){this.__data__=[],this.size=0}var C$e=A$e;function I$e(e,t){return e===t||e!==e&&t!==t}var H1=I$e,P$e=H1;function O$e(e,t){for(var n=e.length;n--;)if(P$e(e[n][0],t))return n;return-1}var UP=O$e,D$e=UP,R$e=Array.prototype,k$e=R$e.splice;function L$e(e){var t=this.__data__,n=D$e(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():k$e.call(t,n,1),--this.size,!0}var N$e=L$e,F$e=UP;function z$e(e){var t=this.__data__,n=F$e(t,e);return n<0?void 0:t[n][1]}var B$e=z$e,$$e=UP;function V$e(e){return $$e(this.__data__,e)>-1}var j$e=V$e,U$e=UP;function H$e(e,t){var n=this.__data__,r=U$e(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var W$e=H$e,G$e=C$e,Y$e=N$e,q$e=B$e,X$e=j$e,Z$e=W$e;function W1(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}W1.prototype.clear=G$e;W1.prototype.delete=Y$e;W1.prototype.get=q$e;W1.prototype.has=X$e;W1.prototype.set=Z$e;var HP=W1,K$e=Cy,J$e=sh,Q$e=K$e(J$e,"Map"),yz=Q$e,hY=M$e,e7e=HP,t7e=yz;function n7e(){this.size=0,this.__data__={hash:new hY,map:new(t7e||e7e),string:new hY}}var r7e=n7e;function i7e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var s7e=i7e,o7e=s7e;function a7e(e,t){var n=e.__data__;return o7e(t)?n[typeof t=="string"?"string":"hash"]:n.map}var WP=a7e,l7e=WP;function c7e(e){var t=l7e(this,e).delete(e);return this.size-=t?1:0,t}var u7e=c7e,d7e=WP;function h7e(e){return d7e(this,e).get(e)}var f7e=h7e,p7e=WP;function m7e(e){return p7e(this,e).has(e)}var g7e=m7e,_7e=WP;function y7e(e,t){var n=_7e(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var v7e=y7e,b7e=r7e,x7e=u7e,w7e=f7e,S7e=g7e,E7e=v7e;function G1(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}G1.prototype.clear=b7e;G1.prototype.delete=x7e;G1.prototype.get=w7e;G1.prototype.has=S7e;G1.prototype.set=E7e;var vz=G1,Wse=vz,T7e="Expected a function";function bz(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(T7e);var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=n.cache;if(o.has(s))return o.get(s);var c=e.apply(this,r);return n.cache=o.set(s,c)||o,c};return n.cache=new(bz.Cache||Wse),n}bz.Cache=Wse;var M7e=bz,A7e=M7e,C7e=500;function I7e(e){var t=A7e(e,function(r){return n.size===C7e&&n.clear(),r}),n=t.cache;return t}var P7e=I7e,O7e=P7e,D7e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R7e=/\\(\\)?/g,k7e=O7e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(D7e,function(n,r,s,o){t.push(s?o.replace(R7e,"$1"):r||n)}),t}),L7e=k7e;function N7e(e,t){for(var n=-1,r=e==null?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}var F7e=N7e,fY=VP,z7e=F7e,B7e=ld,$7e=gz,pY=fY?fY.prototype:void 0,mY=pY?pY.toString:void 0;function Gse(e){if(typeof e=="string")return e;if(B7e(e))return z7e(e,Gse)+"";if($7e(e))return mY?mY.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var V7e=Gse,j7e=V7e;function U7e(e){return e==null?"":j7e(e)}var H7e=U7e,W7e=ld,G7e=_z,Y7e=L7e,q7e=H7e;function X7e(e,t){return W7e(e)?e:G7e(e,t)?[e]:Y7e(q7e(e))}var Yse=X7e,Z7e=oh,K7e=cd,J7e="[object Arguments]";function Q7e(e){return K7e(e)&&Z7e(e)==J7e}var eVe=Q7e,gY=eVe,tVe=cd,qse=Object.prototype,nVe=qse.hasOwnProperty,rVe=qse.propertyIsEnumerable,iVe=gY((function(){return arguments})())?gY:function(e){return tVe(e)&&nVe.call(e,"callee")&&!rVe.call(e,"callee")},xz=iVe,sVe=9007199254740991,oVe=/^(?:0|[1-9]\d*)$/;function aVe(e,t){var n=typeof e;return t=t??sVe,!!t&&(n=="number"||n!="symbol"&&oVe.test(e))&&e>-1&&e%1==0&&e<t}var wz=aVe,lVe=9007199254740991;function cVe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=lVe}var Sz=cVe,uVe=gz;function dVe(e){if(typeof e=="string"||uVe(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var GP=dVe,hVe=Yse,fVe=xz,pVe=ld,mVe=wz,gVe=Sz,_Ve=GP;function yVe(e,t,n){t=hVe(t,e);for(var r=-1,s=t.length,o=!1;++r<s;){var c=_Ve(t[r]);if(!(o=e!=null&&n(e,c)))break;e=e[c]}return o||++r!=s?o:(s=e==null?0:e.length,!!s&&gVe(s)&&mVe(c,s)&&(pVe(e)||fVe(e)))}var Xse=yVe,vVe=UBe,bVe=Xse;function xVe(e,t){return e!=null&&bVe(e,t,vVe)}var Zse=xVe,wVe=oh,SVe=cd,EVe="[object Date]";function TVe(e){return SVe(e)&&wVe(e)==EVe}var MVe=TVe;function AVe(e){return function(t){return e(t)}}var Kse=AVe,gS={},CVe={get exports(){return gS},set exports(e){gS=e}};(function(e,t){var n=jse,r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===r,c=o&&n.process,i=(function(){try{var f=s&&s.require&&s.require("util").types;return f||c&&c.binding&&c.binding("util")}catch{}})();e.exports=i})(CVe,gS);var IVe=MVe,PVe=Kse,_Y=gS,yY=_Y&&_Y.isDate,OVe=yY?PVe(yY):IVe,DVe=OVe,RVe=oh,kVe=ld,LVe=cd,NVe="[object String]";function FVe(e){return typeof e=="string"||!kVe(e)&&LVe(e)&&RVe(e)==NVe}var Vd=FVe;function zVe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Jse=zVe,BVe=HP;function $Ve(){this.__data__=new BVe,this.size=0}var VVe=$Ve;function jVe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var UVe=jVe;function HVe(e){return this.__data__.get(e)}var WVe=HVe;function GVe(e){return this.__data__.has(e)}var YVe=GVe,qVe=HP,XVe=yz,ZVe=vz,KVe=200;function JVe(e,t){var n=this.__data__;if(n instanceof qVe){var r=n.__data__;if(!XVe||r.length<KVe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ZVe(r)}return n.set(e,t),this.size=n.size,this}var QVe=JVe,eje=HP,tje=VVe,nje=UVe,rje=WVe,ije=YVe,sje=QVe;function Y1(e){var t=this.__data__=new eje(e);this.size=t.size}Y1.prototype.clear=tje;Y1.prototype.delete=nje;Y1.prototype.get=rje;Y1.prototype.has=ije;Y1.prototype.set=sje;var Ez=Y1,oje="__lodash_hash_undefined__";function aje(e){return this.__data__.set(e,oje),this}var lje=aje;function cje(e){return this.__data__.has(e)}var uje=cje,dje=vz,hje=lje,fje=uje;function WI(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new dje;++t<n;)this.add(e[t])}WI.prototype.add=WI.prototype.push=hje;WI.prototype.has=fje;var pje=WI;function mje(e,t){return e.has(t)}var gje=mje,_je=pje,yje=Jse,vje=gje,bje=1,xje=2;function wje(e,t,n,r,s,o){var c=n&bje,i=e.length,f=t.length;if(i!=f&&!(c&&f>i))return!1;var g=o.get(e),x=o.get(t);if(g&&x)return g==t&&x==e;var w=-1,A=!0,C=n&xje?new _je:void 0;for(o.set(e,t),o.set(t,e);++w<i;){var F=e[w],z=t[w];if(r)var j=c?r(z,F,w,t,e,o):r(F,z,w,e,t,o);if(j!==void 0){if(j)continue;A=!1;break}if(C){if(!yje(t,function(V,Y){if(!vje(C,Y)&&(F===V||s(F,V,n,r,o)))return C.push(Y)})){A=!1;break}}else if(!(F===z||s(F,z,n,r,o))){A=!1;break}}return o.delete(e),o.delete(t),A}var Qse=wje,Sje=sh,Eje=Sje.Uint8Array,eoe=Eje;function Tje(e){var t=-1,n=Array(e.size);return e.forEach(function(r,s){n[++t]=[s,r]}),n}var Mje=Tje;function Aje(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Cje=Aje,vY=VP,bY=eoe,Ije=H1,Pje=Qse,Oje=Mje,Dje=Cje,Rje=1,kje=2,Lje="[object Boolean]",Nje="[object Date]",Fje="[object Error]",zje="[object Map]",Bje="[object Number]",$je="[object RegExp]",Vje="[object Set]",jje="[object String]",Uje="[object Symbol]",Hje="[object ArrayBuffer]",Wje="[object DataView]",xY=vY?vY.prototype:void 0,FR=xY?xY.valueOf:void 0;function Gje(e,t,n,r,s,o,c){switch(n){case Wje:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Hje:return!(e.byteLength!=t.byteLength||!o(new bY(e),new bY(t)));case Lje:case Nje:case Bje:return Ije(+e,+t);case Fje:return e.name==t.name&&e.message==t.message;case $je:case jje:return e==t+"";case zje:var i=Oje;case Vje:var f=r&Rje;if(i||(i=Dje),e.size!=t.size&&!f)return!1;var g=c.get(e);if(g)return g==t;r|=kje,c.set(e,t);var x=Pje(i(e),i(t),r,s,o,c);return c.delete(e),x;case Uje:if(FR)return FR.call(e)==FR.call(t)}return!1}var Yje=Gje;function qje(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}var Xje=qje,Zje=Xje,Kje=ld;function Jje(e,t,n){var r=t(e);return Kje(e)?r:Zje(r,n(e))}var Qje=Jje;function eUe(e,t){for(var n=-1,r=e==null?0:e.length,s=0,o=[];++n<r;){var c=e[n];t(c,n,e)&&(o[s++]=c)}return o}var tUe=eUe;function nUe(){return[]}var rUe=nUe,iUe=tUe,sUe=rUe,oUe=Object.prototype,aUe=oUe.propertyIsEnumerable,wY=Object.getOwnPropertySymbols,lUe=wY?function(e){return e==null?[]:(e=Object(e),iUe(wY(e),function(t){return aUe.call(e,t)}))}:sUe,cUe=lUe;function uUe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var dUe=uUe,y1={},hUe={get exports(){return y1},set exports(e){y1=e}};function fUe(){return!1}var pUe=fUe;(function(e,t){var n=sh,r=pUe,s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,c=o&&o.exports===s,i=c?n.Buffer:void 0,f=i?i.isBuffer:void 0,g=f||r;e.exports=g})(hUe,y1);var mUe=oh,gUe=Sz,_Ue=cd,yUe="[object Arguments]",vUe="[object Array]",bUe="[object Boolean]",xUe="[object Date]",wUe="[object Error]",SUe="[object Function]",EUe="[object Map]",TUe="[object Number]",MUe="[object Object]",AUe="[object RegExp]",CUe="[object Set]",IUe="[object String]",PUe="[object WeakMap]",OUe="[object ArrayBuffer]",DUe="[object DataView]",RUe="[object Float32Array]",kUe="[object Float64Array]",LUe="[object Int8Array]",NUe="[object Int16Array]",FUe="[object Int32Array]",zUe="[object Uint8Array]",BUe="[object Uint8ClampedArray]",$Ue="[object Uint16Array]",VUe="[object Uint32Array]",Ls={};Ls[RUe]=Ls[kUe]=Ls[LUe]=Ls[NUe]=Ls[FUe]=Ls[zUe]=Ls[BUe]=Ls[$Ue]=Ls[VUe]=!0;Ls[yUe]=Ls[vUe]=Ls[OUe]=Ls[bUe]=Ls[DUe]=Ls[xUe]=Ls[wUe]=Ls[SUe]=Ls[EUe]=Ls[TUe]=Ls[MUe]=Ls[AUe]=Ls[CUe]=Ls[IUe]=Ls[PUe]=!1;function jUe(e){return _Ue(e)&&gUe(e.length)&&!!Ls[mUe(e)]}var UUe=jUe,HUe=UUe,WUe=Kse,SY=gS,EY=SY&&SY.isTypedArray,GUe=EY?WUe(EY):HUe,Tz=GUe,YUe=dUe,qUe=xz,XUe=ld,ZUe=y1,KUe=wz,JUe=Tz,QUe=Object.prototype,e9e=QUe.hasOwnProperty;function t9e(e,t){var n=XUe(e),r=!n&&qUe(e),s=!n&&!r&&ZUe(e),o=!n&&!r&&!s&&JUe(e),c=n||r||s||o,i=c?YUe(e.length,String):[],f=i.length;for(var g in e)(t||e9e.call(e,g))&&!(c&&(g=="length"||s&&(g=="offset"||g=="parent")||o&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||KUe(g,f)))&&i.push(g);return i}var toe=t9e,n9e=Object.prototype;function r9e(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||n9e;return e===n}var Mz=r9e;function i9e(e,t){return function(n){return e(t(n))}}var noe=i9e,s9e=noe,o9e=s9e(Object.keys,Object),a9e=o9e,l9e=Mz,c9e=a9e,u9e=Object.prototype,d9e=u9e.hasOwnProperty;function h9e(e){if(!l9e(e))return c9e(e);var t=[];for(var n in Object(e))d9e.call(e,n)&&n!="constructor"&&t.push(n);return t}var f9e=h9e,p9e=Ay,m9e=Sz;function g9e(e){return e!=null&&m9e(e.length)&&!p9e(e)}var iE=g9e,_9e=toe,y9e=f9e,v9e=iE;function b9e(e){return v9e(e)?_9e(e):y9e(e)}var Az=b9e,x9e=Qje,w9e=cUe,S9e=Az;function E9e(e){return x9e(e,S9e,w9e)}var T9e=E9e,TY=T9e,M9e=1,A9e=Object.prototype,C9e=A9e.hasOwnProperty;function I9e(e,t,n,r,s,o){var c=n&M9e,i=TY(e),f=i.length,g=TY(t),x=g.length;if(f!=x&&!c)return!1;for(var w=f;w--;){var A=i[w];if(!(c?A in t:C9e.call(t,A)))return!1}var C=o.get(e),F=o.get(t);if(C&&F)return C==t&&F==e;var z=!0;o.set(e,t),o.set(t,e);for(var j=c;++w<f;){A=i[w];var V=e[A],Y=t[A];if(r)var te=c?r(Y,V,A,t,e,o):r(V,Y,A,e,t,o);if(!(te===void 0?V===Y||s(V,Y,n,r,o):te)){z=!1;break}j||(j=A=="constructor")}if(z&&!j){var J=e.constructor,ee=t.constructor;J!=ee&&"constructor"in e&&"constructor"in t&&!(typeof J=="function"&&J instanceof J&&typeof ee=="function"&&ee instanceof ee)&&(z=!1)}return o.delete(e),o.delete(t),z}var P9e=I9e,O9e=Cy,D9e=sh,R9e=O9e(D9e,"DataView"),k9e=R9e,L9e=Cy,N9e=sh,F9e=L9e(N9e,"Promise"),z9e=F9e,B9e=Cy,$9e=sh,V9e=B9e($9e,"Set"),j9e=V9e,U9e=Cy,H9e=sh,W9e=U9e(H9e,"WeakMap"),G9e=W9e,I5=k9e,P5=yz,O5=z9e,D5=j9e,R5=G9e,roe=oh,q1=Hse,MY="[object Map]",Y9e="[object Object]",AY="[object Promise]",CY="[object Set]",IY="[object WeakMap]",PY="[object DataView]",q9e=q1(I5),X9e=q1(P5),Z9e=q1(O5),K9e=q1(D5),J9e=q1(R5),p_=roe;(I5&&p_(new I5(new ArrayBuffer(1)))!=PY||P5&&p_(new P5)!=MY||O5&&p_(O5.resolve())!=AY||D5&&p_(new D5)!=CY||R5&&p_(new R5)!=IY)&&(p_=function(e){var t=roe(e),n=t==Y9e?e.constructor:void 0,r=n?q1(n):"";if(r)switch(r){case q9e:return PY;case X9e:return MY;case Z9e:return AY;case K9e:return CY;case J9e:return IY}return t});var Q9e=p_,zR=Ez,eHe=Qse,tHe=Yje,nHe=P9e,OY=Q9e,DY=ld,RY=y1,rHe=Tz,iHe=1,kY="[object Arguments]",LY="[object Array]",gA="[object Object]",sHe=Object.prototype,NY=sHe.hasOwnProperty;function oHe(e,t,n,r,s,o){var c=DY(e),i=DY(t),f=c?LY:OY(e),g=i?LY:OY(t);f=f==kY?gA:f,g=g==kY?gA:g;var x=f==gA,w=g==gA,A=f==g;if(A&&RY(e)){if(!RY(t))return!1;c=!0,x=!1}if(A&&!x)return o||(o=new zR),c||rHe(e)?eHe(e,t,n,r,s,o):tHe(e,t,f,n,r,s,o);if(!(n&iHe)){var C=x&&NY.call(e,"__wrapped__"),F=w&&NY.call(t,"__wrapped__");if(C||F){var z=C?e.value():e,j=F?t.value():t;return o||(o=new zR),s(z,j,n,r,o)}}return A?(o||(o=new zR),nHe(e,t,n,r,s,o)):!1}var aHe=oHe,lHe=aHe,FY=cd;function ioe(e,t,n,r,s){return e===t?!0:e==null||t==null||!FY(e)&&!FY(t)?e!==e&&t!==t:lHe(e,t,n,r,ioe,s)}var soe=ioe,cHe=Ez,uHe=soe,dHe=1,hHe=2;function fHe(e,t,n,r){var s=n.length,o=s,c=!r;if(e==null)return!o;for(e=Object(e);s--;){var i=n[s];if(c&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++s<o;){i=n[s];var f=i[0],g=e[f],x=i[1];if(c&&i[2]){if(g===void 0&&!(f in e))return!1}else{var w=new cHe;if(r)var A=r(g,x,f,e,t,w);if(!(A===void 0?uHe(x,g,dHe|hHe,r,w):A))return!1}}return!0}var pHe=fHe,mHe=Pf;function gHe(e){return e===e&&!mHe(e)}var ooe=gHe,_He=ooe,yHe=Az;function vHe(e){for(var t=yHe(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,_He(s)]}return t}var bHe=vHe;function xHe(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var aoe=xHe,wHe=pHe,SHe=bHe,EHe=aoe;function THe(e){var t=SHe(e);return t.length==1&&t[0][2]?EHe(t[0][0],t[0][1]):function(n){return n===e||wHe(n,e,t)}}var MHe=THe,AHe=Yse,CHe=GP;function IHe(e,t){t=AHe(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[CHe(t[n++])];return n&&n==r?e:void 0}var loe=IHe,PHe=loe;function OHe(e,t,n){var r=e==null?void 0:PHe(e,t);return r===void 0?n:r}var T_=OHe;function DHe(e,t){return e!=null&&t in Object(e)}var RHe=DHe,kHe=RHe,LHe=Xse;function NHe(e,t){return e!=null&&LHe(e,t,kHe)}var FHe=NHe,zHe=soe,BHe=T_,$He=FHe,VHe=_z,jHe=ooe,UHe=aoe,HHe=GP,WHe=1,GHe=2;function YHe(e,t){return VHe(e)&&jHe(t)?UHe(HHe(e),t):function(n){var r=BHe(n,e);return r===void 0&&r===t?$He(n,e):zHe(t,r,WHe|GHe)}}var qHe=YHe;function XHe(e){return e}var Cz=XHe;function ZHe(e){return function(t){return t?.[e]}}var KHe=ZHe,JHe=loe;function QHe(e){return function(t){return JHe(t,e)}}var eWe=QHe,tWe=KHe,nWe=eWe,rWe=_z,iWe=GP;function sWe(e){return rWe(e)?tWe(iWe(e)):nWe(e)}var oWe=sWe,aWe=MHe,lWe=qHe,cWe=Cz,uWe=ld,dWe=oWe;function hWe(e){return typeof e=="function"?e:e==null?cWe:typeof e=="object"?uWe(e)?lWe(e[0],e[1]):aWe(e):dWe(e)}var coe=hWe;function fWe(e){return function(t,n,r){for(var s=-1,o=Object(t),c=r(t),i=c.length;i--;){var f=c[e?i:++s];if(n(o[f],f,o)===!1)break}return t}}var pWe=fWe,mWe=pWe,gWe=mWe(),uoe=gWe,_We=uoe,yWe=Az;function vWe(e,t){return e&&_We(e,t,yWe)}var doe=vWe,bWe=iE;function xWe(e,t){return function(n,r){if(n==null)return n;if(!bWe(n))return e(n,r);for(var s=n.length,o=t?s:-1,c=Object(n);(t?o--:++o<s)&&r(c[o],o,c)!==!1;);return n}}var wWe=xWe,SWe=doe,EWe=wWe,TWe=EWe(SWe),MWe=TWe,AWe=MWe;function CWe(e,t){var n;return AWe(e,function(r,s,o){return n=t(r,s,o),!n}),!!n}var IWe=CWe,PWe=H1,OWe=iE,DWe=wz,RWe=Pf;function kWe(e,t,n){if(!RWe(n))return!1;var r=typeof t;return(r=="number"?OWe(n)&&DWe(t,n.length):r=="string"&&t in n)?PWe(n[t],e):!1}var Iz=kWe,LWe=Jse,NWe=coe,FWe=IWe,zWe=ld,BWe=Iz;function $We(e,t,n){var r=zWe(e)?LWe:FWe;return n&&BWe(e,t,n)&&(t=void 0),r(e,NWe(t))}var VWe=$We,jWe=oh,UWe=cd,HWe="[object Boolean]";function WWe(e){return e===!0||e===!1||UWe(e)&&jWe(e)==HWe}var GWe=WWe,YWe=oh,qWe=cd,XWe="[object Number]";function ZWe(e){return typeof e=="number"||qWe(e)&&YWe(e)==XWe}var ad=ZWe,KWe=Cy,JWe=(function(){try{var e=KWe(Object,"defineProperty");return e({},"",{}),e}catch{}})(),hoe=JWe,zY=hoe;function QWe(e,t,n){t=="__proto__"&&zY?zY(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var YP=QWe,eGe=YP,tGe=H1,nGe=Object.prototype,rGe=nGe.hasOwnProperty;function iGe(e,t,n){var r=e[t];(!(rGe.call(e,t)&&tGe(r,n))||n===void 0&&!(t in e))&&eGe(e,t,n)}var sGe=iGe,oGe=YP,aGe=doe,lGe=coe;function cGe(e,t){var n={};return t=lGe(t),aGe(e,function(r,s,o){oGe(n,s,t(r,s,o))}),n}var uGe=cGe;function dGe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var foe=dGe,hGe=foe,BY=Math.max;function fGe(e,t,n){return t=BY(t===void 0?e.length-1:t,0),function(){for(var r=arguments,s=-1,o=BY(r.length-t,0),c=Array(o);++s<o;)c[s]=r[t+s];s=-1;for(var i=Array(t+1);++s<t;)i[s]=r[s];return i[t]=n(c),hGe(e,this,i)}}var pGe=fGe;function mGe(e){return function(){return e}}var gGe=mGe,_Ge=gGe,$Y=hoe,yGe=Cz,vGe=$Y?function(e,t){return $Y(e,"toString",{configurable:!0,enumerable:!1,value:_Ge(t),writable:!0})}:yGe,bGe=vGe,xGe=800,wGe=16,SGe=Date.now;function EGe(e){var t=0,n=0;return function(){var r=SGe(),s=wGe-(r-n);if(n=r,s>0){if(++t>=xGe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var TGe=EGe,MGe=bGe,AGe=TGe,CGe=AGe(MGe),IGe=CGe,PGe=Cz,OGe=pGe,DGe=IGe;function RGe(e,t){return DGe(OGe(e,t,PGe),e+"")}var Pz=RGe;function kGe(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var LGe=kGe,NGe=Pf,FGe=Mz,zGe=LGe,BGe=Object.prototype,$Ge=BGe.hasOwnProperty;function VGe(e){if(!NGe(e))return zGe(e);var t=FGe(e),n=[];for(var r in e)r=="constructor"&&(t||!$Ge.call(e,r))||n.push(r);return n}var jGe=VGe,UGe=toe,HGe=jGe,WGe=iE;function GGe(e){return WGe(e)?UGe(e,!0):HGe(e)}var Oz=GGe,YGe=Pz,qGe=H1,XGe=Iz,ZGe=Oz,poe=Object.prototype,KGe=poe.hasOwnProperty,JGe=YGe(function(e,t){e=Object(e);var n=-1,r=t.length,s=r>2?t[2]:void 0;for(s&&XGe(t[0],t[1],s)&&(r=1);++n<r;)for(var o=t[n],c=ZGe(o),i=-1,f=c.length;++i<f;){var g=c[i],x=e[g];(x===void 0||qGe(x,poe[g])&&!KGe.call(e,g))&&(e[g]=o[g])}return e}),VY=JGe,QGe=YP,eYe=H1;function tYe(e,t,n){(n!==void 0&&!eYe(e[t],n)||n===void 0&&!(t in e))&&QGe(e,t,n)}var moe=tYe,GI={},nYe={get exports(){return GI},set exports(e){GI=e}};(function(e,t){var n=sh,r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===r,c=o?n.Buffer:void 0,i=c?c.allocUnsafe:void 0;function f(g,x){if(x)return g.slice();var w=g.length,A=i?i(w):new g.constructor(w);return g.copy(A),A}e.exports=f})(nYe,GI);var jY=eoe;function rYe(e){var t=new e.constructor(e.byteLength);return new jY(t).set(new jY(e)),t}var iYe=rYe,sYe=iYe;function oYe(e,t){var n=t?sYe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var aYe=oYe;function lYe(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var cYe=lYe,uYe=Pf,UY=Object.create,dYe=(function(){function e(){}return function(t){if(!uYe(t))return{};if(UY)return UY(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}})(),hYe=dYe,fYe=noe,pYe=fYe(Object.getPrototypeOf,Object),goe=pYe,mYe=hYe,gYe=goe,_Ye=Mz;function yYe(e){return typeof e.constructor=="function"&&!_Ye(e)?mYe(gYe(e)):{}}var vYe=yYe,bYe=iE,xYe=cd;function wYe(e){return xYe(e)&&bYe(e)}var SYe=wYe,EYe=oh,TYe=goe,MYe=cd,AYe="[object Object]",CYe=Function.prototype,IYe=Object.prototype,_oe=CYe.toString,PYe=IYe.hasOwnProperty,OYe=_oe.call(Object);function DYe(e){if(!MYe(e)||EYe(e)!=AYe)return!1;var t=TYe(e);if(t===null)return!0;var n=PYe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&_oe.call(n)==OYe}var RYe=DYe;function kYe(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var yoe=kYe,LYe=sGe,NYe=YP;function FYe(e,t,n,r){var s=!n;n||(n={});for(var o=-1,c=t.length;++o<c;){var i=t[o],f=r?r(n[i],e[i],i,n,e):void 0;f===void 0&&(f=e[i]),s?NYe(n,i,f):LYe(n,i,f)}return n}var zYe=FYe,BYe=zYe,$Ye=Oz;function VYe(e){return BYe(e,$Ye(e))}var jYe=VYe,HY=moe,UYe=GI,HYe=aYe,WYe=cYe,GYe=vYe,WY=xz,GY=ld,YYe=SYe,qYe=y1,XYe=Ay,ZYe=Pf,KYe=RYe,JYe=Tz,YY=yoe,QYe=jYe;function eqe(e,t,n,r,s,o,c){var i=YY(e,n),f=YY(t,n),g=c.get(f);if(g){HY(e,n,g);return}var x=o?o(i,f,n+"",e,t,c):void 0,w=x===void 0;if(w){var A=GY(f),C=!A&&qYe(f),F=!A&&!C&&JYe(f);x=f,A||C||F?GY(i)?x=i:YYe(i)?x=WYe(i):C?(w=!1,x=UYe(f,!0)):F?(w=!1,x=HYe(f,!0)):x=[]:KYe(f)||WY(f)?(x=i,WY(i)?x=QYe(i):(!ZYe(i)||XYe(i))&&(x=GYe(f))):w=!1}w&&(c.set(f,x),s(x,f,r,o,c),c.delete(f)),HY(e,n,x)}var tqe=eqe,nqe=Ez,rqe=moe,iqe=uoe,sqe=tqe,oqe=Pf,aqe=Oz,lqe=yoe;function voe(e,t,n,r,s){e!==t&&iqe(t,function(o,c){if(s||(s=new nqe),oqe(o))sqe(e,t,c,n,voe,r,s);else{var i=r?r(lqe(e,c),o,c+"",e,t,s):void 0;i===void 0&&(i=o),rqe(e,c,i)}},aqe)}var boe=voe,cqe=boe,qY=Pf;function xoe(e,t,n,r,s,o){return qY(e)&&qY(t)&&(o.set(t,e),cqe(e,t,void 0,xoe,o),o.delete(t)),e}var uqe=xoe,dqe=Pz,hqe=Iz;function fqe(e){return dqe(function(t,n){var r=-1,s=n.length,o=s>1?n[s-1]:void 0,c=s>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(s--,o):void 0,c&&hqe(n[0],n[1],c)&&(o=s<3?void 0:o,s=1),t=Object(t);++r<s;){var i=n[r];i&&e(t,i,r,o)}return t})}var pqe=fqe,mqe=boe,gqe=pqe,_qe=gqe(function(e,t,n,r){mqe(e,t,n,r)}),yqe=_qe,vqe=foe,bqe=Pz,xqe=uqe,wqe=yqe,Sqe=bqe(function(e){return e.push(void 0,xqe),vqe(wqe,void 0,e)}),v1=Sqe;function Eqe(e){return e&&e.length?e[0]:void 0}var woe=Eqe;function Tqe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var g0=Tqe;const Mqe=e=>Object.prototype.toString.call(e).slice(8,-1),D0=e=>DVe(e)&&!isNaN(e.getTime()),xf=e=>Mqe(e)==="Object",Soe=Zse,XY=(e,t)=>VWe(t,n=>Zse(e,n)),fs=(e,t,n="0")=>{for(e=e!=null?String(e):"",t=t||2;e.length<t;)e=`${n}${e}`;return e},Jc=e=>Array.isArray(e),Yh=e=>Jc(e)&&e.length>0,YI=e=>e==null?null:document&&Vd(e)?document.querySelector(e):e.$el??e,om=(e,t,n,r=void 0)=>{e.removeEventListener(t,n,r)},am=(e,t,n,r=void 0)=>(e.addEventListener(t,n,r),()=>om(e,t,n,r)),vC=(e,t)=>!!e&&!!t&&(e===t||e.contains(t)),_A=(e,t)=>{(e.key===" "||e.key==="Enter")&&(t(e),e.preventDefault())},Eoe=(e,...t)=>{const n={};let r;for(r in e)t.includes(r)||(n[r]=e[r]);return n},Toe=(e,t)=>{const n={};return t.forEach(r=>{r in e&&(n[r]=e[r])}),n};function Aqe(e,t,n){return Math.min(Math.max(e,t),n)}var qI={},Cqe={get exports(){return qI},set exports(e){qI=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var s=Number(r);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default})(Cqe,qI);const Iqe=Vse(qI);var XI={},Pqe={get exports(){return XI},set exports(e){XI=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){var s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),r.getTime()-s.getTime()}e.exports=t.default})(Pqe,XI);const ZY=Vse(XI);function Oqe(e,t){var n=Lqe(t);return n.formatToParts?Rqe(n,e):kqe(n,e)}var Dqe={year:0,month:1,day:2,hour:3,minute:4,second:5};function Rqe(e,t){try{for(var n=e.formatToParts(t),r=[],s=0;s<n.length;s++){var o=Dqe[n[s].type];o>=0&&(r[o]=parseInt(n[s].value,10))}return r}catch(c){if(c instanceof RangeError)return[NaN];throw c}}function kqe(e,t){var n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var BR={};function Lqe(e){if(!BR[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";BR[e]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return BR[e]}function Moe(e,t,n,r,s,o,c){var i=new Date(0);return i.setUTCFullYear(e,t,n),i.setUTCHours(r,s,o,c),i}var KY=36e5,Nqe=6e4,$R={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Fqe(e,t,n){var r,s;if(!e||(r=$R.timezoneZ.exec(e),r))return 0;var o;if(r=$R.timezoneHH.exec(e),r)return o=parseInt(r[1],10),JY(o)?-(o*KY):NaN;if(r=$R.timezoneHHMM.exec(e),r){o=parseInt(r[1],10);var c=parseInt(r[2],10);return JY(o,c)?(s=Math.abs(o)*KY+c*Nqe,o>0?-s:s):NaN}if($qe(e)){t=new Date(t||Date.now());var i=zqe(t),f=k5(i,e),g=Bqe(t,f,e);return-g}return NaN}function zqe(e){return Moe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function k5(e,t){var n=Oqe(e,t),r=Moe(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),s=e.getTime(),o=s%1e3;return s-=o>=0?o:1e3+o,r-s}function Bqe(e,t,n){var r=e.getTime(),s=r-t,o=k5(new Date(s),n);if(t===o)return t;s-=o-t;var c=k5(new Date(s),n);return o===c?o:Math.max(o,c)}function JY(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var QY={};function $qe(e){if(QY[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),QY[e]=!0,!0}catch{return!1}}var Vqe=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;const jqe=Vqe;var VR=36e5,eq=6e4,Uqe=2,xl={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:jqe};function Hqe(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n=t||{},r=n.additionalDigits==null?Uqe:Iqe(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=Wqe(e),o=Gqe(s.date,r),c=o.year,i=o.restDateString,f=Yqe(i,c);if(isNaN(f))return new Date(NaN);if(f){var g=f.getTime(),x=0,w;if(s.time&&(x=qqe(s.time),isNaN(x)))return new Date(NaN);if(s.timeZone||n.timeZone){if(w=Fqe(s.timeZone||n.timeZone,new Date(g+x)),isNaN(w))return new Date(NaN)}else w=ZY(new Date(g+x)),w=ZY(new Date(g+x+w));return new Date(g+x+w)}else return new Date(NaN)}function Wqe(e){var t={},n=xl.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=xl.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){var s=xl.timeZone.exec(r);s?(t.time=r.replace(s[1],""),t.timeZone=s[1].trim()):t.time=r}return t}function Gqe(e,t){var n=xl.YYY[t],r=xl.YYYYY[t],s;if(s=xl.YYYY.exec(e)||r.exec(e),s){var o=s[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(s=xl.YY.exec(e)||n.exec(e),s){var c=s[1];return{year:parseInt(c,10)*100,restDateString:e.slice(c.length)}}return{year:null}}function Yqe(e,t){if(t===null)return null;var n,r,s,o;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(n=xl.MM.exec(e),n)return r=new Date(0),s=parseInt(n[1],10)-1,nq(t,s)?(r.setUTCFullYear(t,s),r):new Date(NaN);if(n=xl.DDD.exec(e),n){r=new Date(0);var c=parseInt(n[1],10);return Kqe(t,c)?(r.setUTCFullYear(t,0,c),r):new Date(NaN)}if(n=xl.MMDD.exec(e),n){r=new Date(0),s=parseInt(n[1],10)-1;var i=parseInt(n[2],10);return nq(t,s,i)?(r.setUTCFullYear(t,s,i),r):new Date(NaN)}if(n=xl.Www.exec(e),n)return o=parseInt(n[1],10)-1,rq(t,o)?tq(t,o):new Date(NaN);if(n=xl.WwwD.exec(e),n){o=parseInt(n[1],10)-1;var f=parseInt(n[2],10)-1;return rq(t,o,f)?tq(t,o,f):new Date(NaN)}return null}function qqe(e){var t,n,r;if(t=xl.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),jR(n)?n%24*VR:NaN;if(t=xl.HHMM.exec(e),t)return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),jR(n,r)?n%24*VR+r*eq:NaN;if(t=xl.HHMMSS.exec(e),t){n=parseInt(t[1],10),r=parseInt(t[2],10);var s=parseFloat(t[3].replace(",","."));return jR(n,r,s)?n%24*VR+r*eq+s*1e3:NaN}return null}function tq(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,o=t*7+n+1-s;return r.setUTCDate(r.getUTCDate()+o),r}var Xqe=[31,28,31,30,31,30,31,31,30,31,30,31],Zqe=[31,29,31,30,31,30,31,31,30,31,30,31];function Aoe(e){return e%400===0||e%4===0&&e%100!==0}function nq(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var r=Aoe(e);if(r&&n>Zqe[t]||!r&&n>Xqe[t])return!1}return!0}function Kqe(e,t){if(t<1)return!1;var n=Aoe(e);return!(n&&t>366||!n&&t>365)}function rq(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function jR(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function Ka(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function bC(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bC=function(n){return typeof n}:bC=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bC(e)}function Of(e){Ka(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||bC(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function X1(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var Jqe={};function Dz(){return Jqe}function oy(e,t){var n,r,s,o,c,i,f,g;Ka(1,arguments);var x=Dz(),w=X1((n=(r=(s=(o=t?.weekStartsOn)!==null&&o!==void 0?o:t==null||(c=t.locale)===null||c===void 0||(i=c.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&s!==void 0?s:x.weekStartsOn)!==null&&r!==void 0?r:(f=x.locale)===null||f===void 0||(g=f.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&n!==void 0?n:0);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var A=Of(e),C=A.getDay(),F=(C<w?7:0)+C-w;return A.setDate(A.getDate()-F),A.setHours(0,0,0,0),A}function iq(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var Qqe=6048e5;function eXe(e,t,n){Ka(2,arguments);var r=oy(e,n),s=oy(t,n),o=r.getTime()-iq(r),c=s.getTime()-iq(s);return Math.round((o-c)/Qqe)}function tXe(e){Ka(1,arguments);var t=Of(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function nXe(e){Ka(1,arguments);var t=Of(e);return t.setDate(1),t.setHours(0,0,0,0),t}function rXe(e,t){return Ka(1,arguments),eXe(tXe(e),nXe(e),t)+1}function iXe(e,t){var n,r,s,o,c,i,f,g;Ka(1,arguments);var x=Of(e),w=x.getFullYear(),A=Dz(),C=X1((n=(r=(s=(o=t?.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(c=t.locale)===null||c===void 0||(i=c.options)===null||i===void 0?void 0:i.firstWeekContainsDate)!==null&&s!==void 0?s:A.firstWeekContainsDate)!==null&&r!==void 0?r:(f=A.locale)===null||f===void 0||(g=f.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var F=new Date(0);F.setFullYear(w+1,0,C),F.setHours(0,0,0,0);var z=oy(F,t),j=new Date(0);j.setFullYear(w,0,C),j.setHours(0,0,0,0);var V=oy(j,t);return x.getTime()>=z.getTime()?w+1:x.getTime()>=V.getTime()?w:w-1}function sXe(e,t){var n,r,s,o,c,i,f,g;Ka(1,arguments);var x=Dz(),w=X1((n=(r=(s=(o=t?.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(c=t.locale)===null||c===void 0||(i=c.options)===null||i===void 0?void 0:i.firstWeekContainsDate)!==null&&s!==void 0?s:x.firstWeekContainsDate)!==null&&r!==void 0?r:(f=x.locale)===null||f===void 0||(g=f.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&n!==void 0?n:1),A=iXe(e,t),C=new Date(0);C.setFullYear(A,0,w),C.setHours(0,0,0,0);var F=oy(C,t);return F}var oXe=6048e5;function aXe(e,t){Ka(1,arguments);var n=Of(e),r=oy(n,t).getTime()-sXe(n,t).getTime();return Math.round(r/oXe)+1}function ZI(e){return Ka(1,arguments),oy(e,{weekStartsOn:1})}function lXe(e){Ka(1,arguments);var t=Of(e),n=t.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var s=ZI(r),o=new Date(0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);var c=ZI(o);return t.getTime()>=s.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}function cXe(e){Ka(1,arguments);var t=lXe(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var r=ZI(n);return r}var uXe=6048e5;function dXe(e){Ka(1,arguments);var t=Of(e),n=ZI(t).getTime()-cXe(t).getTime();return Math.round(n/uXe)+1}function _l(e,t){Ka(2,arguments);var n=Of(e),r=X1(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function KI(e,t){Ka(2,arguments);var n=Of(e),r=X1(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+r+1,0);var c=o.getDate();return s>=c?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)}function sq(e,t){Ka(2,arguments);var n=X1(t);return KI(e,n*12)}const hXe={daily:["year","month","day"],weekly:["year","month","week"],monthly:["year","month"]};function fXe({monthComps:e,prevMonthComps:t,nextMonthComps:n},r){const s=[],{firstDayOfWeek:o,firstWeekday:c,isoWeeknumbers:i,weeknumbers:f,numDays:g,numWeeks:x}=e,w=c+(c<o?Na:0)-o;let A=!0,C=!1,F=!1,z=0;const j=new Intl.DateTimeFormat(r.id,{weekday:"long",year:"numeric",month:"short",day:"numeric"});let V=t.numDays-w+1,Y=t.numDays-V+1,te=Math.floor((V-1)/Na+1),J=1,ee=t.numWeeks,le=1,oe=t.month,ve=t.year;const se=new Date,ie=se.getDate(),pe=se.getMonth()+1,be=se.getFullYear();for(let Se=1;Se<=oZe;Se++){for(let Ce=1,Ee=o;Ce<=Na;Ce++,Ee+=Ee===Na?1-Na:1){A&&Ee===c&&(V=1,Y=e.numDays,te=Math.floor((V-1)/Na+1),J=Math.floor((g-V)/Na+1),ee=1,le=x,oe=e.month,ve=e.year,A=!1,C=!0);const xe=r.getDateFromParams(ve,oe,V,0,0,0,0),ke=r.getDateFromParams(ve,oe,V,12,0,0,0),He=r.getDateFromParams(ve,oe,V,23,59,59,999),Ke=xe,Ge=`${fs(ve,4)}-${fs(oe,2)}-${fs(V,2)}`,$t=Ce,Ft=Na-Ce,Lt=f[Se-1],nn=i[Se-1],mn=V===ie&&oe===pe&&ve===be,Xt=C&&V===1,mt=C&&V===g,Jt=Se===1,Kt=Se===x,_e=Ce===1,bn=Ce===Na,On=Boe(ve,oe,V);s.push({locale:r,id:Ge,position:++z,label:V.toString(),ariaLabel:j.format(new Date(ve,oe-1,V)),day:V,dayFromEnd:Y,weekday:Ee,weekdayPosition:$t,weekdayPositionFromEnd:Ft,weekdayOrdinal:te,weekdayOrdinalFromEnd:J,week:ee,weekFromEnd:le,weekPosition:Se,weeknumber:Lt,isoWeeknumber:nn,month:oe,year:ve,date:Ke,startDate:xe,endDate:He,noonDate:ke,dayIndex:On,isToday:mn,isFirstDay:Xt,isLastDay:mt,isDisabled:!C,isFocusable:!C,isFocused:!1,inMonth:C,inPrevMonth:A,inNextMonth:F,onTop:Jt,onBottom:Kt,onLeft:_e,onRight:bn,classes:[`id-${Ge}`,`day-${V}`,`day-from-end-${Y}`,`weekday-${Ee}`,`weekday-position-${$t}`,`weekday-ordinal-${te}`,`weekday-ordinal-from-end-${J}`,`week-${ee}`,`week-from-end-${le}`,{"is-today":mn,"is-first-day":Xt,"is-last-day":mt,"in-month":C,"in-prev-month":A,"in-next-month":F,"on-top":Jt,"on-bottom":Kt,"on-left":_e,"on-right":bn}]}),C&&mt?(C=!1,F=!0,V=1,Y=g,te=1,J=Math.floor((g-V)/Na+1),ee=1,le=n.numWeeks,oe=n.month,ve=n.year):(V++,Y--,te=Math.floor((V-1)/Na+1),J=Math.floor((g-V)/Na+1))}ee++,le--}return s}function pXe(e,t,n,r){const s=e.reduce((o,c,i)=>{const f=Math.floor(i/7);let g=o[f];return g||(g={id:`week-${f+1}`,title:"",week:c.week,weekPosition:c.weekPosition,weeknumber:c.weeknumber,isoWeeknumber:c.isoWeeknumber,weeknumberDisplay:t?c.weeknumber:n?c.isoWeeknumber:void 0,days:[]},o[f]=g),g.days.push(c),o},Array(e.length/Na));return s.forEach(o=>{const c=o.days[0],i=o.days[o.days.length-1];c.month===i.month?o.title=`${r.formatDate(c.date,"MMMM YYYY")}`:c.year===i.year?o.title=`${r.formatDate(c.date,"MMM")} - ${r.formatDate(i.date,"MMM YYYY")}`:o.title=`${r.formatDate(c.date,"MMM YYYY")} - ${r.formatDate(i.date,"MMM YYYY")}`}),s}function mXe(e,t){return e.days.map(n=>({label:t.formatDate(n.date,t.masks.weekdays),weekday:n.weekday}))}function gXe(e,t){return`${t}.${fs(e,2)}`}function Coe(e,t,n){return Toe(n.getDateParts(n.toDate(e)),hXe[t])}function Ioe({day:e,week:t,month:n,year:r},s,o,c){if(o==="daily"&&e){const i=new Date(r,n-1,e),f=_l(i,s);return{day:f.getDate(),month:f.getMonth()+1,year:f.getFullYear()}}else if(o==="weekly"&&t){const f=c.getMonthParts(n,r).firstDayOfMonth,g=_l(f,(t-1+s)*7),x=c.getDateParts(g);return{week:x.week,month:x.month,year:x.year}}else{const i=new Date(r,n-1,1),f=KI(i,s);return{month:f.getMonth()+1,year:f.getFullYear()}}}function jd(e){return e!=null&&e.month!=null&&e.year!=null}function L5(e,t){return!jd(e)||!jd(t)?!1:(e=e,t=t,e.year!==t.year?e.year<t.year:e.month&&t.month&&e.month!==t.month?e.month<t.month:e.week&&t.week&&e.week!==t.week?e.week<t.week:e.day&&t.day&&e.day!==t.day?e.day<t.day:!1)}function JI(e,t){return!jd(e)||!jd(t)?!1:(e=e,t=t,e.year!==t.year?e.year>t.year:e.month&&t.month&&e.month!==t.month?e.month>t.month:e.week&&t.week&&e.week!==t.week?e.week>t.week:e.day&&t.day&&e.day!==t.day?e.day>t.day:!1)}function _Xe(e,t,n){return(e||!1)&&!L5(e,t)&&!JI(e,n)}function yXe(e,t){return!e&&t||e&&!t?!1:!e&&!t?!0:(e=e,t=t,e.year===t.year&&e.month===t.month&&e.week===t.week&&e.day===t.day)}function vXe(e,t,n,r){if(!jd(e)||!jd(t))return[];const s=[];for(;!JI(e,t);)s.push(e),e=Ioe(e,1,n,r);return s}function Poe(e){const{day:t,week:n,month:r,year:s}=e;let o=`${s}-${fs(r,2)}`;return n&&(o=`${o}-w${n}`),t&&(o=`${o}-${fs(t,2)}`),o}function bXe(e,t){const{month:n,year:r,showWeeknumbers:s,showIsoWeeknumbers:o}=e,c=new Date(r,n-1,15),i=t.getMonthParts(n,r),f=t.getPrevMonthParts(n,r),g=t.getNextMonthParts(n,r),x=fXe({monthComps:i,prevMonthComps:f,nextMonthComps:g},t),w=pXe(x,s,o,t),A=mXe(w[0],t);return{id:Poe(e),month:n,year:r,monthTitle:t.formatDate(c,t.masks.title),shortMonthLabel:t.formatDate(c,"MMM"),monthLabel:t.formatDate(c,"MMMM"),shortYearLabel:r.toString().substring(2),yearLabel:r.toString(),monthComps:i,prevMonthComps:f,nextMonthComps:g,days:x,weeks:w,weekdays:A}}function xXe(e,t){const{day:n,week:r,view:s,trimWeeks:o}=e,c={...t,...e,title:"",viewDays:[],viewWeeks:[]};switch(s){case"daily":{let i=c.days.find(g=>g.inMonth);n?i=c.days.find(g=>g.day===n&&g.inMonth)||i:r&&(i=c.days.find(g=>g.week===r&&g.inMonth));const f=c.weeks[i.week-1];c.viewWeeks=[f],c.viewDays=[i],c.week=i.week,c.weekTitle=f.title,c.day=i.day,c.dayTitle=i.ariaLabel,c.title=c.dayTitle;break}case"weekly":{c.week=r||1;const i=c.weeks[c.week-1];c.viewWeeks=[i],c.viewDays=i.days,c.weekTitle=i.title,c.title=c.weekTitle;break}default:{c.title=c.monthTitle,c.viewWeeks=c.weeks.slice(0,o?c.monthComps.numWeeks:void 0),c.viewDays=c.days;break}}return c}class oq{constructor(t,n,r){Ar(this,"keys",[]),Ar(this,"store",{}),this.size=t,this.createKey=n,this.createItem=r}get(...t){const n=this.createKey(...t);return this.store[n]}getOrSet(...t){const n=this.createKey(...t);if(this.store[n])return this.store[n];const r=this.createItem(...t);if(this.keys.length>=this.size){const s=this.keys.shift();s!=null&&delete this.store[s]}return this.keys.push(n),this.store[n]=r,r}}class R0{constructor(t,n=new QI){Ar(this,"order"),Ar(this,"locale"),Ar(this,"start",null),Ar(this,"end",null),Ar(this,"repeat",null);var r;this.locale=n;const{start:s,end:o,span:c,order:i,repeat:f}=t;D0(s)&&(this.start=n.getDateParts(s)),D0(o)?this.end=n.getDateParts(o):this.start!=null&&c&&(this.end=n.getDateParts(_l(this.start.date,c-1))),this.order=i??0,f&&(this.repeat=new e3({from:(r=this.start)==null?void 0:r.date,...f},{locale:this.locale}))}static fromMany(t,n){return(Jc(t)?t:[t]).filter(r=>r).map(r=>R0.from(r,n))}static from(t,n){if(t instanceof R0)return t;const r={start:null,end:null};return t!=null&&(Jc(t)?(r.start=t[0]??null,r.end=t[1]??null):xf(t)?Object.assign(r,t):(r.start=t,r.end=t)),r.start!=null&&(r.start=new Date(r.start)),r.end!=null&&(r.end=new Date(r.end)),new R0(r,n)}get opts(){const{order:t,locale:n}=this;return{order:t,locale:n}}get hasRepeat(){return!!this.repeat}get isSingleDay(){const{start:t,end:n}=this;return t&&n&&t.year===n.year&&t.month===n.month&&t.day===n.day}get isMultiDay(){return!this.isSingleDay}get daySpan(){return this.start==null||this.end==null?this.hasRepeat?1:1/0:this.end.dayIndex-this.start.dayIndex}startsOnDay(t){var n,r;return((n=this.start)==null?void 0:n.dayIndex)===t.dayIndex||!!((r=this.repeat)!=null&&r.passes(t))}intersectsDay(t){return this.intersectsDayRange(t,t)}intersectsRange(t){var n,r;return this.intersectsDayRange(((n=t.start)==null?void 0:n.dayIndex)??-1/0,((r=t.end)==null?void 0:r.dayIndex)??1/0)}intersectsDayRange(t,n){return!(this.start&&this.start.dayIndex>n||this.end&&this.end.dayIndex<t)}}class wXe{constructor(){Ar(this,"records",{})}render(t,n,r){var s,o,c,i;let f=null;const g=r[0].dayIndex,x=r[r.length-1].dayIndex;return n.hasRepeat?r.forEach(w=>{var A,C;if(n.startsOnDay(w)){const F=n.daySpan<1/0?n.daySpan:1;f={startDay:w.dayIndex,startTime:((A=n.start)==null?void 0:A.time)??0,endDay:w.dayIndex+F-1,endTime:((C=n.end)==null?void 0:C.time)??xC},this.getRangeRecords(t).push(f)}}):n.intersectsDayRange(g,x)&&(f={startDay:((s=n.start)==null?void 0:s.dayIndex)??-1/0,startTime:((o=n.start)==null?void 0:o.time)??-1/0,endDay:((c=n.end)==null?void 0:c.dayIndex)??1/0,endTime:((i=n.end)==null?void 0:i.time)??1/0},this.getRangeRecords(t).push(f)),f}getRangeRecords(t){let n=this.records[t.key];return n||(n={ranges:[],data:t},this.records[t.key]=n),n.ranges}getCell(t,n){return this.getCells(n).find(o=>o.data.key===t)}cellExists(t,n){const r=this.records[t];return r==null?!1:r.ranges.some(s=>s.startDay<=n&&s.endDay>=n)}getCells(t){const n=Object.values(this.records),r=[],{dayIndex:s}=t;return n.forEach(({data:o,ranges:c})=>{c.filter(i=>i.startDay<=s&&i.endDay>=s).forEach(i=>{const f=s===i.startDay,g=s===i.endDay,x=f?i.startTime:0,w=new Date(t.startDate.getTime()+x),A=g?i.endTime:xC,C=new Date(t.endDate.getTime()+A),F=x===0&&A===xC,z=o.order||0;r.push({...i,data:o,onStart:f,onEnd:g,startTime:x,startDate:w,endTime:A,endDate:C,allDay:F,order:z})})}),r.sort((o,c)=>o.order-c.order),r}}const wf={ar:{dow:7,L:"D/M/YYYY"},bg:{dow:2,L:"D.MM.YYYY"},ca:{dow:2,L:"DD/MM/YYYY"},"zh-CN":{dow:2,L:"YYYY/MM/DD"},"zh-TW":{dow:1,L:"YYYY/MM/DD"},hr:{dow:2,L:"DD.MM.YYYY"},cs:{dow:2,L:"DD.MM.YYYY"},da:{dow:2,L:"DD.MM.YYYY"},nl:{dow:2,L:"DD-MM-YYYY"},"en-US":{dow:1,L:"MM/DD/YYYY"},"en-AU":{dow:2,L:"DD/MM/YYYY"},"en-CA":{dow:1,L:"YYYY-MM-DD"},"en-GB":{dow:2,L:"DD/MM/YYYY"},"en-IE":{dow:2,L:"DD-MM-YYYY"},"en-NZ":{dow:2,L:"DD/MM/YYYY"},"en-ZA":{dow:1,L:"YYYY/MM/DD"},eo:{dow:2,L:"YYYY-MM-DD"},et:{dow:2,L:"DD.MM.YYYY"},fi:{dow:2,L:"DD.MM.YYYY"},fr:{dow:2,L:"DD/MM/YYYY"},"fr-CA":{dow:1,L:"YYYY-MM-DD"},"fr-CH":{dow:2,L:"DD.MM.YYYY"},de:{dow:2,L:"DD.MM.YYYY"},he:{dow:1,L:"DD.MM.YYYY"},id:{dow:2,L:"DD/MM/YYYY"},it:{dow:2,L:"DD/MM/YYYY"},ja:{dow:1,L:"YYYYMD"},ko:{dow:1,L:"YYYY.MM.DD"},lv:{dow:2,L:"DD.MM.YYYY"},lt:{dow:2,L:"DD.MM.YYYY"},mk:{dow:2,L:"D.MM.YYYY"},nb:{dow:2,L:"D. MMMM YYYY"},nn:{dow:2,L:"D. MMMM YYYY"},pl:{dow:2,L:"DD.MM.YYYY"},pt:{dow:2,L:"DD/MM/YYYY"},ro:{dow:2,L:"DD.MM.YYYY"},ru:{dow:2,L:"DD.MM.YYYY"},sk:{dow:2,L:"DD.MM.YYYY"},"es-ES":{dow:2,L:"DD/MM/YYYY"},"es-MX":{dow:2,L:"DD/MM/YYYY"},sv:{dow:2,L:"YYYY-MM-DD"},th:{dow:1,L:"DD/MM/YYYY"},tr:{dow:2,L:"DD.MM.YYYY"},uk:{dow:2,L:"DD.MM.YYYY"},vi:{dow:2,L:"DD/MM/YYYY"}};wf.en=wf["en-US"];wf.es=wf["es-ES"];wf.no=wf.nb;wf.zh=wf["zh-CN"];const SXe=Object.entries(wf).reduce((e,[t,{dow:n,L:r}])=>(e[t]={id:t,firstDayOfWeek:n,masks:{L:r}},e),{}),EXe="MMMM YYYY",TXe="W",MXe="MMM",AXe="h A",CXe=["L","YYYY-MM-DD","YYYY/MM/DD"],IXe=["L h:mm A","YYYY-MM-DD h:mm A","YYYY/MM/DD h:mm A"],PXe=["L HH:mm","YYYY-MM-DD HH:mm","YYYY/MM/DD HH:mm"],OXe=["h:mm A"],DXe=["HH:mm"],RXe="WWW, MMM D, YYYY",kXe=["L","YYYY-MM-DD","YYYY/MM/DD"],LXe="iso",NXe="YYYY-MM-DDTHH:mm:ss.SSSZ",FXe={title:EXe,weekdays:TXe,navMonths:MXe,hours:AXe,input:CXe,inputDateTime:IXe,inputDateTime24hr:PXe,inputTime:OXe,inputTime24hr:DXe,dayPopover:RXe,data:kXe,model:LXe,iso:NXe},zXe=300,BXe=60,$Xe=80,VXe={maxSwipeTime:zXe,minHorizontalSwipeDistance:BXe,maxVerticalSwipeDistance:$Xe},jXe={componentPrefix:"V",color:"blue",isDark:!1,navVisibility:"click",titlePosition:"center",transition:"slide-h",touch:VXe,masks:FXe,locales:SXe,datePicker:{updateOnInput:!0,inputDebounce:1e3,popover:{visibility:"hover-focus",placement:"bottom-start",isInteractive:!0}}},k0=Bo(jXe),UXe=Ct(()=>uGe(k0.locales,e=>(e.masks=v1(e.masks,k0.masks),e))),jm=e=>typeof window<"u"&&Soe(window.__vcalendar__,e)?T_(window.__vcalendar__,e):T_(k0,e),HXe=(e,t)=>(e.config.globalProperties.$VCalendar=k0,Object.assign(k0,v1(t,k0))),WXe=12,GXe=5;function YXe(e,t){const n=new Intl.DateTimeFormat().resolvedOptions().locale;let r;Vd(e)?r=e:Soe(e,"id")&&(r=e.id),r=(r||n).toLowerCase();const s=Object.keys(t),o=f=>s.find(g=>g.toLowerCase()===f);r=o(r)||o(r.substring(0,2))||n;const c={...t["en-IE"],...t[r],id:r,monthCacheSize:WXe,pageCacheSize:GXe};return xf(e)?v1(e,c):c}class QI{constructor(t=void 0,n){Ar(this,"id"),Ar(this,"daysInWeek"),Ar(this,"firstDayOfWeek"),Ar(this,"masks"),Ar(this,"timezone"),Ar(this,"hourLabels"),Ar(this,"dayNames"),Ar(this,"dayNamesShort"),Ar(this,"dayNamesShorter"),Ar(this,"dayNamesNarrow"),Ar(this,"monthNames"),Ar(this,"monthNamesShort"),Ar(this,"relativeTimeNames"),Ar(this,"amPm",["am","pm"]),Ar(this,"monthCache"),Ar(this,"pageCache");const{id:r,firstDayOfWeek:s,masks:o,monthCacheSize:c,pageCacheSize:i}=YXe(t,UXe.value);this.monthCache=new oq(c,mZe,gZe),this.pageCache=new oq(i,Poe,bXe),this.id=r,this.daysInWeek=Na,this.firstDayOfWeek=Aqe(s,1,Na),this.masks=o,this.timezone=n||void 0,this.hourLabels=this.getHourLabels(),this.dayNames=UR("long",this.id),this.dayNamesShort=UR("short",this.id),this.dayNamesShorter=this.dayNamesShort.map(f=>f.substring(0,2)),this.dayNamesNarrow=UR("narrow",this.id),this.monthNames=hq("long",this.id),this.monthNamesShort=hq("short",this.id),this.relativeTimeNames=vZe(this.id)}formatDate(t,n){return EZe(t,n,this)}parseDate(t,n){return fq(t,n,this)}toDate(t,n={}){const r=new Date(NaN);let s=r;const{fillDate:o,mask:c,patch:i,rules:f}=n;if(ad(t)?(n.type="number",s=new Date(+t)):Vd(t)?(n.type="string",s=t?fq(t,c||"iso",this):r):D0(t)?(n.type="date",s=new Date(t.getTime())):Rz(t)&&(n.type="object",s=this.getDateFromParts(t)),s&&(i||f)){let g=this.getDateParts(s);if(i&&o!=null){const x=this.getDateParts(this.toDate(o));g=this.getDateParts(this.toDate({...x,...Toe(g,sZe[i])}))}f&&(g=SZe(g,f)),s=this.getDateFromParts(g)}return s||r}toDateOrNull(t,n={}){const r=this.toDate(t,n);return isNaN(r.getTime())?null:r}fromDate(t,{type:n,mask:r}={}){switch(n){case"number":return t?t.getTime():NaN;case"string":return t?this.formatDate(t,r||"iso"):"";case"object":return t?this.getDateParts(t):null;default:return t?new Date(t):null}}range(t){return R0.from(t,this)}ranges(t){return R0.fromMany(t,this)}getDateParts(t){return pZe(t,this)}getDateFromParts(t){return Voe(t,this.timezone)}getDateFromParams(t,n,r,s,o,c,i){return this.getDateFromParts({year:t,month:n,day:r,hours:s,minutes:o,seconds:c,milliseconds:i})}getPage(t){const n=this.pageCache.getOrSet(t,this);return xXe(t,n)}getMonthParts(t,n){const{firstDayOfWeek:r}=this;return this.monthCache.getOrSet(t,n,r)}getThisMonthParts(){const t=new Date;return this.getMonthParts(t.getMonth()+1,t.getFullYear())}getPrevMonthParts(t,n){return t===1?this.getMonthParts(12,n-1):this.getMonthParts(t-1,n)}getNextMonthParts(t,n){return t===12?this.getMonthParts(1,n+1):this.getMonthParts(t+1,n)}getHourLabels(){return yZe().map(t=>this.formatDate(t,this.masks.hours))}getDayId(t){return this.formatDate(t,"YYYY-MM-DD")}}var i0=(e=>(e.Any="any",e.All="all",e))(i0||{}),Ooe=(e=>(e.Days="days",e.Weeks="weeks",e.Months="months",e.Years="years",e))(Ooe||{}),Doe=(e=>(e.Days="days",e.Weekdays="weekdays",e.Weeks="weeks",e.Months="months",e.Years="years",e))(Doe||{}),Roe=(e=>(e.OrdinalWeekdays="ordinalWeekdays",e))(Roe||{});class qXe{constructor(t,n,r){Ar(this,"validated",!0),this.type=t,this.interval=n,this.from=r,this.from||(console.error('A valid "from" date is required for date interval rule. This rule will be skipped.'),this.validated=!1)}passes(t){if(!this.validated)return!0;const{date:n}=t;switch(this.type){case"days":return kz(this.from.date,n)%this.interval===0;case"weeks":return hZe(this.from.date,n)%this.interval===0;case"months":return fZe(this.from.date,n)%this.interval===0;case"years":return $oe(this.from.date,n)%this.interval===0;default:return!1}}}class Z1{constructor(t,n,r,s){Ar(this,"components",[]),this.type=t,this.validator=r,this.getter=s,this.components=this.normalizeComponents(n)}static create(t,n){switch(t){case"days":return new XXe(n);case"weekdays":return new ZXe(n);case"weeks":return new KXe(n);case"months":return new JXe(n);case"years":return new QXe(n)}}normalizeComponents(t){if(this.validator(t))return[t];if(!Jc(t))return[];const n=[];return t.forEach(r=>{if(!this.validator(r)){console.error(`Component value ${r} in invalid for "${this.type}" rule. This rule will be skipped.`);return}n.push(r)}),n}passes(t){return this.getter(t).some(s=>this.components.includes(s))}}class XXe extends Z1{constructor(t){super("days",t,nZe,({day:n,dayFromEnd:r})=>[n,-r])}}class ZXe extends Z1{constructor(t){super("weekdays",t,N5,({weekday:n})=>[n])}}class KXe extends Z1{constructor(t){super("weeks",t,rZe,({week:n,weekFromEnd:r})=>[n,-r])}}class JXe extends Z1{constructor(t){super("months",t,iZe,({month:n})=>[n])}}class QXe extends Z1{constructor(t){super("years",t,ad,({year:n})=>[n])}}class eZe{constructor(t,n){Ar(this,"components"),this.type=t,this.components=this.normalizeComponents(n)}normalizeArrayConfig(t){const n=[];return t.forEach((r,s)=>{if(ad(r)){if(s===0)return;if(!aq(t[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!N5(r)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([t[0],r])}else Jc(r)&&n.push(...this.normalizeArrayConfig(r))}),n}normalizeComponents(t){const n=[];return t.forEach((r,s)=>{if(ad(r)){if(s===0)return;if(!aq(t[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!N5(r)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([t[0],r])}else Jc(r)&&n.push(...this.normalizeArrayConfig(r))}),n}passes(t){const{weekday:n,weekdayOrdinal:r,weekdayOrdinalFromEnd:s}=t;return this.components.some(([o,c])=>(o===r||o===-s)&&n===c)}}class tZe{constructor(t){Ar(this,"type","function"),Ar(this,"validated",!0),this.fn=t,Ay(t)||(console.error("The function rule requires a valid function. This rule will be skipped."),this.validated=!1)}passes(t){return this.validated?this.fn(t):!0}}class e3{constructor(t,n={},r){Ar(this,"validated",!0),Ar(this,"config"),Ar(this,"type",i0.Any),Ar(this,"from"),Ar(this,"until"),Ar(this,"rules",[]),Ar(this,"locale",new QI),this.parent=r,n.locale&&(this.locale=n.locale),this.config=t,Ay(t)?(this.type=i0.All,this.rules=[new tZe(t)]):Jc(t)?(this.type=i0.Any,this.rules=t.map(s=>new e3(s,n,this))):xf(t)?(this.type=i0.All,this.from=t.from?this.locale.getDateParts(t.from):r?.from,this.until=t.until?this.locale.getDateParts(t.until):r?.until,this.rules=this.getObjectRules(t)):(console.error("Rule group configuration must be an object or an array."),this.validated=!1)}getObjectRules(t){const n=[];if(t.every&&(Vd(t.every)&&(t.every=[1,`${t.every}s`]),Jc(t.every))){const[r=1,s=Ooe.Days]=t.every;n.push(new qXe(s,r,this.from))}return Object.values(Doe).forEach(r=>{r in t&&n.push(Z1.create(r,t[r]))}),Object.values(Roe).forEach(r=>{r in t&&n.push(new eZe(r,t[r]))}),t.on!=null&&(Jc(t.on)||(t.on=[t.on]),n.push(new e3(t.on,{locale:this.locale},this.parent))),n}passes(t){return this.validated?this.from&&t.dayIndex<=this.from.dayIndex||this.until&&t.dayIndex>=this.until.dayIndex?!1:this.type===i0.Any?this.rules.some(n=>n.passes(t)):this.rules.every(n=>n.passes(t)):!0}}function nZe(e){return ad(e)?e>=1&&e<=31:!1}function N5(e){return ad(e)?e>=1&&e<=7:!1}function rZe(e){return ad(e)?e>=-6&&e<=-1||e>=1&&e<=6:!1}function iZe(e){return ad(e)?e>=1&&e<=12:!1}function aq(e){return!(!ad(e)||e<-5||e>5||e===0)}const sZe={dateTime:["year","month","day","hours","minutes","seconds","milliseconds"],date:["year","month","day"],time:["hours","minutes","seconds","milliseconds"]},Na=7,oZe=6,koe=1e3,Loe=koe*60,Noe=Loe*60,xC=Noe*24,aZe=[31,28,31,30,31,30,31,31,30,31,30,31],lZe=["L","iso"],Fw={milliseconds:[0,999,3],seconds:[0,59,2],minutes:[0,59,2],hours:[0,23,2]},Foe=/d{1,2}|W{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|Z{1,4}|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,cZe=/\[([^]*?)\]/gm,lq={D(e){return e.day},DD(e){return fs(e.day,2)},d(e){return e.weekday-1},dd(e){return fs(e.weekday-1,2)},W(e,t){return t.dayNamesNarrow[e.weekday-1]},WW(e,t){return t.dayNamesShorter[e.weekday-1]},WWW(e,t){return t.dayNamesShort[e.weekday-1]},WWWW(e,t){return t.dayNames[e.weekday-1]},M(e){return e.month},MM(e){return fs(e.month,2)},MMM(e,t){return t.monthNamesShort[e.month-1]},MMMM(e,t){return t.monthNames[e.month-1]},YY(e){return String(e.year).substr(2)},YYYY(e){return fs(e.year,4)},h(e){return e.hours%12||12},hh(e){return fs(e.hours%12||12,2)},H(e){return e.hours},HH(e){return fs(e.hours,2)},m(e){return e.minutes},mm(e){return fs(e.minutes,2)},s(e){return e.seconds},ss(e){return fs(e.seconds,2)},S(e){return Math.round(e.milliseconds/100)},SS(e){return fs(Math.round(e.milliseconds/10),2)},SSS(e){return fs(e.milliseconds,3)},a(e,t){return e.hours<12?t.amPm[0]:t.amPm[1]},A(e,t){return e.hours<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},Z(){return"Z"},ZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${fs(Math.floor(Math.abs(t)/60),2)}`},ZZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${fs(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)}`},ZZZZ(e){const t=e.timezoneOffset;return`${t>0?"-":"+"}${fs(Math.floor(Math.abs(t)/60),2)}:${fs(Math.abs(t)%60,2)}`}},Lp=/\d\d?/,uZe=/\d{3}/,dZe=/\d{4}/,xw=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF/]+(\s*?[\u0600-\u06FF]+){1,2}/i,cq=()=>{},uq=e=>(t,n,r)=>{const s=r[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~s&&(t.month=s)},vs={D:[Lp,(e,t)=>{e.day=t}],Do:[new RegExp(Lp.source+xw.source),(e,t)=>{e.day=parseInt(t,10)}],d:[Lp,cq],W:[xw,cq],M:[Lp,(e,t)=>{e.month=t-1}],MMM:[xw,uq("monthNamesShort")],MMMM:[xw,uq("monthNames")],YY:[Lp,(e,t)=>{const r=+new Date().getFullYear().toString().substr(0,2);e.year=+`${t>68?r-1:r}${t}`}],YYYY:[dZe,(e,t)=>{e.year=t}],S:[/\d/,(e,t)=>{e.milliseconds=t*100}],SS:[/\d{2}/,(e,t)=>{e.milliseconds=t*10}],SSS:[uZe,(e,t)=>{e.milliseconds=t}],h:[Lp,(e,t)=>{e.hours=t}],m:[Lp,(e,t)=>{e.minutes=t}],s:[Lp,(e,t)=>{e.seconds=t}],a:[xw,(e,t,n)=>{const r=t.toLowerCase();r===n.amPm[0]?e.isPm=!1:r===n.amPm[1]&&(e.isPm=!0)}],Z:[/[^\s]*?[+-]\d\d:?\d\d|[^\s]*?Z?/,(e,t)=>{t==="Z"&&(t="+00:00");const n=`${t}`.match(/([+-]|\d\d)/gi);if(n){const r=+n[1]*60+parseInt(n[2],10);e.timezoneOffset=n[0]==="+"?r:-r}}]};vs.DD=vs.D;vs.dd=vs.d;vs.WWWW=vs.WWW=vs.WW=vs.W;vs.MM=vs.M;vs.mm=vs.m;vs.hh=vs.H=vs.HH=vs.h;vs.ss=vs.s;vs.A=vs.a;vs.ZZZZ=vs.ZZZ=vs.ZZ=vs.Z;function zoe(e,t){return(Yh(e)&&e||[Vd(e)&&e||"YYYY-MM-DD"]).map(n=>lZe.reduce((r,s)=>r.replace(s,t.masks[s]||""),n))}function Rz(e){return xf(e)&&"year"in e&&"month"in e&&"day"in e}function dq(e,t=1){const n=e.getDay()+1,r=n>=t?t-n:-(7-(t-n));return _l(e,r)}function Boe(e,t,n){const r=Date.UTC(e,t-1,n);return kz(new Date(0),new Date(r))}function kz(e,t){return Math.round((t.getTime()-e.getTime())/xC)}function hZe(e,t){return Math.ceil(kz(dq(e),dq(t))/7)}function $oe(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}function fZe(e,t){return $oe(e,t)*12+(t.getMonth()-e.getMonth())}function Voe(e,t=""){const n=new Date,{year:r=n.getFullYear(),month:s=n.getMonth()+1,day:o=n.getDate(),hours:c=0,minutes:i=0,seconds:f=0,milliseconds:g=0}=e;if(t){const x=`${fs(r,4)}-${fs(s,2)}-${fs(o,2)}T${fs(c,2)}:${fs(i,2)}:${fs(f,2)}.${fs(g,3)}`;return Hqe(x,{timeZone:t})}return new Date(r,s-1,o,c,i,f,g)}function pZe(e,t){let n=new Date(e.getTime());t.timezone&&(n=new Date(e.toLocaleString("en-US",{timeZone:t.timezone})),n.setMilliseconds(e.getMilliseconds()));const r=n.getMilliseconds(),s=n.getSeconds(),o=n.getMinutes(),c=n.getHours(),i=r+s*koe+o*Loe+c*Noe,f=n.getMonth()+1,g=n.getFullYear(),x=t.getMonthParts(f,g),w=n.getDate(),A=x.numDays-w+1,C=n.getDay()+1,F=Math.floor((w-1)/7+1),z=Math.floor((x.numDays-w)/7+1),j=Math.ceil((w+Math.abs(x.firstWeekday-x.firstDayOfWeek))/7),V=x.numWeeks-j+1,Y=x.weeknumbers[j],te=Boe(g,f,w);return{milliseconds:r,seconds:s,minutes:o,hours:c,time:i,day:w,dayFromEnd:A,weekday:C,weekdayOrdinal:F,weekdayOrdinalFromEnd:z,week:j,weekFromEnd:V,weeknumber:Y,month:f,year:g,date:n,dateTime:n.getTime(),dayIndex:te,timezoneOffset:0,isValid:!0}}function mZe(e,t,n){return`${t}-${e}-${n}`}function gZe(e,t,n){const r=t%4===0&&t%100!==0||t%400===0,s=new Date(t,e-1,1),o=s.getDay()+1,c=e===2&&r?29:aZe[e-1],i=n-1,f=rXe(s,{weekStartsOn:i}),g=[],x=[];for(let w=0;w<f;w++){const A=_l(s,w*7);g.push(aXe(A,{weekStartsOn:i})),x.push(dXe(A))}return{firstDayOfWeek:n,firstDayOfMonth:s,inLeapYear:r,firstWeekday:o,numDays:c,numWeeks:f,month:e,year:t,weeknumbers:g,isoWeeknumbers:x}}function _Ze(){const e=[];for(let s=0;s<Na;s++)e.push(Voe({year:2020,month:1,day:5+s,hours:12}));return e}function UR(e,t=void 0){const n=new Intl.DateTimeFormat(t,{weekday:e});return _Ze().map(r=>n.format(r))}function yZe(){const e=[];for(let t=0;t<=24;t++)e.push(new Date(2e3,0,1,t));return e}function vZe(e=void 0){const t=["second","minute","hour","day","week","month","quarter","year"],n=new Intl.RelativeTimeFormat(e);return t.reduce((r,s)=>{const o=n.formatToParts(100,s);return r[s]=o[1].unit,r},{})}function joe(){const e=[];for(let t=0;t<12;t++)e.push(new Date(2e3,t,15));return e}function hq(e,t=void 0){const n=new Intl.DateTimeFormat(t,{month:e,timeZone:"UTC"});return joe().map(r=>n.format(r))}function bZe(e,t,n){return ad(t)?t===e:Jc(t)?t.includes(e):Ay(t)?t(e,n):!(t.min!=null&&t.min>e||t.max!=null&&t.max<e||t.interval!=null&&e%t.interval!==0)}function zw(e,t,n){const r=[],[s,o,c]=t;for(let i=s;i<=o;i++)(n==null||bZe(i,n,e))&&r.push({value:i,label:fs(i,c)});return r}function xZe(e,t){return{milliseconds:zw(e,Fw.milliseconds,t.milliseconds),seconds:zw(e,Fw.seconds,t.seconds),minutes:zw(e,Fw.minutes,t.minutes),hours:zw(e,Fw.hours,t.hours)}}function wZe(e,t,n,r){const o=zw(e,t,r).reduce((c,i)=>{if(i.disabled)return c;if(isNaN(c))return i.value;const f=Math.abs(c-n);return Math.abs(i.value-n)<f?i.value:c},NaN);return isNaN(o)?n:o}function SZe(e,t){const n={...e};return Object.entries(t).forEach(([r,s])=>{const o=Fw[r],c=e[r];n[r]=wZe(e,o,c,s)}),n}function fq(e,t,n){return zoe(t,n).map(s=>{if(typeof s!="string")throw new Error("Invalid mask");let o=e;if(o.length>1e3)return!1;let c=!0;const i={};if(s.replace(Foe,x=>{if(vs[x]){const w=vs[x],A=o.search(w[0]);~A?o.replace(w[0],C=>(w[1](i,C,n),o=o.substr(A+C.length),C)):c=!1}return vs[x]?"":x.slice(1,x.length-1)}),!c)return!1;const f=new Date;i.hours!=null&&(i.isPm===!0&&+i.hours!=12?i.hours=+i.hours+12:i.isPm===!1&&+i.hours==12&&(i.hours=0));let g;return i.timezoneOffset!=null?(i.minutes=+(i.minutes||0)-+i.timezoneOffset,g=new Date(Date.UTC(i.year||f.getFullYear(),i.month||0,i.day||1,i.hours||0,i.minutes||0,i.seconds||0,i.milliseconds||0))):g=n.getDateFromParts({year:i.year||f.getFullYear(),month:(i.month||0)+1,day:i.day||1,hours:i.hours||0,minutes:i.minutes||0,seconds:i.seconds||0,milliseconds:i.milliseconds||0}),g}).find(s=>s)||new Date(e)}function EZe(e,t,n){if(e==null)return"";let r=zoe(t,n)[0];/Z$/.test(r)&&(n.timezone="utc");const s=[];r=r.replace(cZe,(c,i)=>(s.push(i),"??"));const o=n.getDateParts(e);return r=r.replace(Foe,c=>c in lq?lq[c](o,n):c.slice(1,c.length-1)),r.replace(/\?\?/g,()=>s.shift())}let TZe=0;class Uoe{constructor(t,n,r){Ar(this,"key",""),Ar(this,"hashcode",""),Ar(this,"highlight",null),Ar(this,"content",null),Ar(this,"dot",null),Ar(this,"bar",null),Ar(this,"event",null),Ar(this,"popover",null),Ar(this,"customData",null),Ar(this,"ranges"),Ar(this,"hasRanges",!1),Ar(this,"order",0),Ar(this,"pinPage",!1),Ar(this,"maxRepeatSpan",0),Ar(this,"locale");const{dates:s}=Object.assign(this,{hashcode:"",order:0,pinPage:!1},t);this.key||(this.key=++TZe),this.locale=r,n.normalizeGlyphs(this),this.ranges=r.ranges(s??[]),this.hasRanges=!!Yh(this.ranges),this.maxRepeatSpan=this.ranges.filter(o=>o.hasRepeat).map(o=>o.daySpan).reduce((o,c)=>Math.max(o,c),0)}intersectsRange({start:t,end:n}){if(t==null||n==null)return!1;const r=this.ranges.filter(c=>!c.hasRepeat);for(const c of r)if(c.intersectsDayRange(t.dayIndex,n.dayIndex))return!0;const s=this.ranges.filter(c=>c.hasRepeat);if(!s.length)return!1;let o=t;for(this.maxRepeatSpan>1&&(o=this.locale.getDateParts(_l(o.date,-this.maxRepeatSpan)));o.dayIndex<=n.dayIndex;){for(const c of s)if(c.startsOnDay(o))return!0;o=this.locale.getDateParts(_l(o.date,1))}return!1}}function F5(e){document&&document.dispatchEvent(new CustomEvent("show-popover",{detail:e}))}function _S(e){document&&document.dispatchEvent(new CustomEvent("hide-popover",{detail:e}))}function Hoe(e){document&&document.dispatchEvent(new CustomEvent("toggle-popover",{detail:e}))}function Woe(e){const{visibility:t}=e,n=t==="click",r=t==="hover",s=t==="hover-focus",o=t==="focus";e.autoHide=!n;let c=!1,i=!1;const f=F=>{n&&(Hoe({...e,target:e.target||F.currentTarget}),F.stopPropagation())},g=F=>{c||(c=!0,(r||s)&&F5({...e,target:e.target||F.currentTarget}))},x=()=>{c&&(c=!1,(r||s&&!i)&&_S(e))},w=F=>{i||(i=!0,(o||s)&&F5({...e,target:e.target||F.currentTarget}))},A=F=>{i&&!vC(F.currentTarget,F.relatedTarget)&&(i=!1,(o||s&&!c)&&_S(e))},C={};switch(e.visibility){case"click":C.click=f;break;case"hover":C.mousemove=g,C.mouseleave=x;break;case"focus":C.focusin=w,C.focusout=A;break;case"hover-focus":C.mousemove=g,C.mouseleave=x,C.focusin=w,C.focusout=A;break}return C}const pq=e=>{const t=YI(e);if(t==null)return;const n=t.popoverHandlers;!n||!n.length||(n.forEach(r=>r()),delete t.popoverHandlers)},mq=(e,t)=>{const n=YI(e);if(n==null)return;const r=[],s=Woe(t);Object.entries(s).forEach(([o,c])=>{r.push(am(n,o,c))}),n.popoverHandlers=r},Goe={mounted(e,t){const{value:n}=t;n&&mq(e,n)},updated(e,t){const{oldValue:n,value:r}=t,s=n?.visibility,o=r?.visibility;s!==o&&(s&&(pq(e),o||_S(n)),o&&mq(e,r))},unmounted(e){pq(e)}},MZe=(e,t,{maxSwipeTime:n,minHorizontalSwipeDistance:r,maxVerticalSwipeDistance:s})=>{if(!e||!e.addEventListener||!Ay(t))return null;let o=0,c=0,i=null,f=!1;function g(w){const A=w.changedTouches[0];o=A.screenX,c=A.screenY,i=new Date().getTime(),f=!0}function x(w){if(!f||!i)return;f=!1;const A=w.changedTouches[0],C=A.screenX-o,F=A.screenY-c;if(new Date().getTime()-i<n&&Math.abs(C)>=r&&Math.abs(F)<=s){const j={toLeft:!1,toRight:!1};C<0?j.toLeft=!0:j.toRight=!0,t(j)}}return am(e,"touchstart",g,{passive:!0}),am(e,"touchend",x,{passive:!0}),()=>{om(e,"touchstart",g),om(e,"touchend",x)}},wC={},AZe=(e,t=10)=>{wC[e]=Date.now()+t},CZe=(e,t)=>{if(e in wC){const n=wC[e];if(Date.now()<n)return;delete wC[e]}t()};function Yoe(){return typeof window<"u"}function IZe(e){return Yoe()&&e in window}function PZe(e){const t=yr(!1),n=Ct(()=>t.value?"dark":"light");let r,s;function o(C){t.value=C.matches}function c(){IZe("matchMedia")&&(r=window.matchMedia("(prefers-color-scheme: dark)"),r.addEventListener("change",o),t.value=r.matches)}function i(){const{selector:C=":root",darkClass:F="dark"}=e.value,z=document.querySelector(C);t.value=z.classList.contains(F)}function f(C){const{selector:F=":root",darkClass:z="dark"}=C;if(Yoe()&&F&&z){const j=document.querySelector(F);j&&(s=new MutationObserver(i),s.observe(j,{attributes:!0,attributeFilter:["class"]}),t.value=j.classList.contains(z))}}function g(){w();const C=typeof e.value;C==="string"&&e.value.toLowerCase()==="system"?c():C==="object"?f(e.value):t.value=!!e.value}const x=Hr(()=>e.value,()=>g(),{immediate:!0});function w(){r&&(r.removeEventListener("change",o),r=void 0),s&&(s.disconnect(),s=void 0)}function A(){w(),x()}return _y(()=>A()),{isDark:t,displayMode:n,cleanup:A}}const OZe=["base","start","end","startEnd"],DZe=["class","wrapperClass","contentClass","style","contentStyle","color","fillMode"],RZe={base:{},start:{},end:{}};function Lz(e,t,n=RZe){let r=e,s={};t===!0||Vd(t)?(r=Vd(t)?t:r,s={...n}):xf(t)&&(XY(t,OZe)?s={...t}:s={base:{...t},start:{...t},end:{...t}});const o=v1(s,{start:s.startEnd,end:s.startEnd},n);return Object.entries(o).forEach(([c,i])=>{let f=r;i===!0||Vd(i)?(f=Vd(i)?i:f,o[c]={color:f}):xf(i)&&(XY(i,DZe)?o[c]={...i}:o[c]={}),v1(o[c],{color:f})}),o}class kZe{constructor(){Ar(this,"type","highlight")}normalizeConfig(t,n){return Lz(t,n,{base:{fillMode:"light"},start:{fillMode:"solid"},end:{fillMode:"solid"}})}prepareRender(t){t.highlights=[],t.content||(t.content=[])}render({data:t,onStart:n,onEnd:r},s){const{key:o,highlight:c}=t;if(!c)return;const{highlights:i}=s,{base:f,start:g,end:x}=c;n&&r?i.push({...g,key:o,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${g.color}`,class:[`vc-highlight vc-highlight-bg-${g.fillMode}`,g.class],contentClass:[`vc-attr vc-highlight-content-${g.fillMode} vc-${g.color}`,g.contentClass]}):n?(i.push({...f,key:`${o}-base`,wrapperClass:`vc-day-layer vc-day-box-right-center vc-attr vc-${f.color}`,class:[`vc-highlight vc-highlight-base-start vc-highlight-bg-${f.fillMode}`,f.class]}),i.push({...g,key:o,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${g.color}`,class:[`vc-highlight vc-highlight-bg-${g.fillMode}`,g.class],contentClass:[`vc-attr vc-highlight-content-${g.fillMode} vc-${g.color}`,g.contentClass]})):r?(i.push({...f,key:`${o}-base`,wrapperClass:`vc-day-layer vc-day-box-left-center vc-attr vc-${f.color}`,class:[`vc-highlight vc-highlight-base-end vc-highlight-bg-${f.fillMode}`,f.class]}),i.push({...x,key:o,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${x.color}`,class:[`vc-highlight vc-highlight-bg-${x.fillMode}`,x.class],contentClass:[`vc-attr vc-highlight-content-${x.fillMode} vc-${x.color}`,x.contentClass]})):i.push({...f,key:`${o}-middle`,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${f.color}`,class:[`vc-highlight vc-highlight-base-middle vc-highlight-bg-${f.fillMode}`,f.class],contentClass:[`vc-attr vc-highlight-content-${f.fillMode} vc-${f.color}`,f.contentClass]})}}class Nz{constructor(t,n){Ar(this,"type",""),Ar(this,"collectionType",""),this.type=t,this.collectionType=n}normalizeConfig(t,n){return Lz(t,n)}prepareRender(t){t[this.collectionType]=[]}render({data:t,onStart:n,onEnd:r},s){const{key:o}=t,c=t[this.type];if(!o||!c)return;const i=s[this.collectionType],{base:f,start:g,end:x}=c;n?i.push({...g,key:o,class:[`vc-${this.type} vc-${this.type}-start vc-${g.color} vc-attr`,g.class]}):r?i.push({...x,key:o,class:[`vc-${this.type} vc-${this.type}-end vc-${x.color} vc-attr`,x.class]}):i.push({...f,key:o,class:[`vc-${this.type} vc-${this.type}-base vc-${f.color} vc-attr`,f.class]})}}class LZe extends Nz{constructor(){super("content","content")}normalizeConfig(t,n){return Lz("base",n)}}class NZe extends Nz{constructor(){super("dot","dots")}}class FZe extends Nz{constructor(){super("bar","bars")}}class zZe{constructor(t){Ar(this,"color"),Ar(this,"renderers",[new LZe,new kZe,new NZe,new FZe]),this.color=t}normalizeGlyphs(t){this.renderers.forEach(n=>{const r=n.type;t[r]!=null&&(t[r]=n.normalizeConfig(this.color,t[r]))})}prepareRender(t={}){return this.renderers.forEach(n=>{n.prepareRender(t)}),t}render(t,n){this.renderers.forEach(r=>{r.render(t,n)})}}const qoe=Symbol("__vc_base_context__"),Xoe={color:{type:String,default:()=>jm("color")},isDark:{type:[Boolean,String,Object],default:()=>jm("isDark")},firstDayOfWeek:Number,masks:Object,locale:[String,Object],timezone:String,minDate:null,maxDate:null,disabledDates:null};function Zoe(e){const t=Ct(()=>e.color??""),n=Ct(()=>e.isDark??!1),{displayMode:r}=PZe(n),s=Ct(()=>new zZe(t.value)),o=Ct(()=>{if(e.locale instanceof QI)return e.locale;const A=xf(e.locale)?e.locale:{id:e.locale,firstDayOfWeek:e.firstDayOfWeek,masks:e.masks};return new QI(A,e.timezone)}),c=Ct(()=>o.value.masks),i=Ct(()=>e.minDate),f=Ct(()=>e.maxDate),g=Ct(()=>{const A=e.disabledDates?[...e.disabledDates]:[];return i.value!=null&&A.push({start:null,end:_l(o.value.toDate(i.value),-1)}),f.value!=null&&A.push({start:_l(o.value.toDate(f.value),1),end:null}),o.value.ranges(A)}),x=Ct(()=>new Uoe({key:"disabled",dates:g.value,order:100},s.value,o.value)),w={color:t,isDark:n,displayMode:r,theme:s,locale:o,masks:c,minDate:i,maxDate:f,disabledDates:g,disabledAttribute:x};return Ko(qoe,w),w}function BZe(e){return bs(qoe,()=>Zoe(e),!0)}function Koe(e){return`__vc_slot_${e}__`}function Joe(e,t={}){Object.keys(e).forEach(n=>{Ko(Koe(t[n]??n),e[n])})}function Qoe(e){return bs(Koe(e),null)}const $Ze={...Xoe,view:{type:String,default:"monthly",validator(e){return["daily","weekly","monthly"].includes(e)}},rows:{type:Number,default:1},columns:{type:Number,default:1},step:Number,titlePosition:{type:String,default:()=>jm("titlePosition")},navVisibility:{type:String,default:()=>jm("navVisibility")},showWeeknumbers:[Boolean,String],showIsoWeeknumbers:[Boolean,String],expanded:Boolean,borderless:Boolean,transparent:Boolean,initialPage:Object,initialPagePosition:{type:Number,default:1},minPage:Object,maxPage:Object,transition:String,attributes:Array,trimWeeks:Boolean,disablePageSwipe:Boolean},VZe=["dayclick","daymouseenter","daymouseleave","dayfocusin","dayfocusout","daykeydown","weeknumberclick","transition-start","transition-end","did-move","update:view","update:pages"],eae=Symbol("__vc_calendar_context__");function jZe(e,{slots:t,emit:n}){const r=yr(null),s=yr(null),o=yr(new Date().getDate()),c=yr(!1),i=yr(Symbol()),f=yr(Symbol()),g=yr(e.view),x=yr([]),w=yr("");let A=null,C=null;Joe(t);const{theme:F,color:z,displayMode:j,locale:V,masks:Y,minDate:te,maxDate:J,disabledAttribute:ee,disabledDates:le}=BZe(e),oe=Ct(()=>e.rows*e.columns),ve=Ct(()=>e.step||oe.value),se=Ct(()=>woe(x.value)??null),ie=Ct(()=>g0(x.value)??null),pe=Ct(()=>e.minPage||(te.value?Ft(te.value):null)),be=Ct(()=>e.maxPage||(J.value?Ft(J.value):null)),Se=Ct(()=>e.navVisibility),Ce=Ct(()=>!!e.showWeeknumbers),Ee=Ct(()=>!!e.showIsoWeeknumbers),xe=Ct(()=>g.value==="monthly"),ke=Ct(()=>g.value==="weekly"),He=Ct(()=>g.value==="daily"),Ke=()=>{c.value=!0,n("transition-start")},Ge=()=>{c.value=!1,n("transition-end"),A&&(A.resolve(!0),A=null)},$t=(Te,ye,We=g.value)=>Ioe(Te,ye,We,V.value),Ft=Te=>Coe(Te,g.value,V.value),Lt=Te=>{!ee.value||!Kt.value||(Te.isDisabled=Kt.value.cellExists(ee.value.key,Te.dayIndex))},nn=Te=>{Te.isFocusable=Te.inMonth&&Te.day===o.value},mn=(Te,ye)=>{for(const We of Te)for(const ot of We.days)if(ye(ot)===!1)return},Xt=Ct(()=>x.value.reduce((Te,ye)=>(Te.push(...ye.viewDays),Te),[])),mt=Ct(()=>{const Te=[];return(e.attributes||[]).forEach((ye,We)=>{!ye||!ye.dates||Te.push(new Uoe({...ye,order:ye.order||0},F.value,V.value))}),ee.value&&Te.push(ee.value),Te}),Jt=Ct(()=>Yh(mt.value)),Kt=Ct(()=>{const Te=new wXe;return mt.value.forEach(ye=>{ye.ranges.forEach(We=>{Te.render(ye,We,Xt.value)})}),Te}),_e=Ct(()=>Xt.value.reduce((Te,ye)=>(Te[ye.dayIndex]={day:ye,cells:[]},Te[ye.dayIndex].cells.push(...Kt.value.getCells(ye)),Te),{})),bn=(Te,ye)=>{const We=e.showWeeknumbers||e.showIsoWeeknumbers;return We==null?"":GWe(We)?We?"left":"":We.startsWith("right")?ye>1?"right":We:Te>1?"left":We},On=()=>{var Te,ye;if(!Jt.value)return null;const We=mt.value.find(Vt=>Vt.pinPage)||mt.value[0];if(!We||!We.hasRanges)return null;const[ot]=We.ranges,At=((Te=ot.start)==null?void 0:Te.date)||((ye=ot.end)==null?void 0:ye.date);return At?Ft(At):null},je=()=>{if(jd(se.value))return se.value;const Te=On();return jd(Te)?Te:Ft(new Date)},ge=(Te,ye={})=>{const{view:We=g.value,position:ot=1,force:At}=ye,Vt=ot>0?1-ot:-(oe.value+ot);let an=$t(Te,Vt,We),xn=$t(an,oe.value-1,We);return At||(L5(an,pe.value)?an=pe.value:JI(xn,be.value)&&(an=$t(be.value,1-oe.value)),xn=$t(an,oe.value-1)),{fromPage:an,toPage:xn}},nt=(Te,ye,We="")=>{if(We==="none"||We==="fade")return We;if(Te?.view!==ye?.view)return"fade";const ot=JI(ye,Te),At=L5(ye,Te);return!ot&&!At?"fade":We==="slide-v"?At?"slide-down":"slide-up":At?"slide-right":"slide-left"},It=(Te={})=>new Promise((ye,We)=>{const{position:ot=1,force:At=!1,transition:Vt}=Te,an=jd(Te.page)?Te.page:je(),{fromPage:xn}=ge(an,{position:ot,force:At}),Hn=[];for(let Gn=0;Gn<oe.value;Gn++){const cr=$t(xn,Gn),yt=Gn+1,ue=Math.ceil(yt/e.columns),we=e.rows-ue+1,Re=yt%e.columns||e.columns,Xe=e.columns-Re+1,Ue=bn(Re,Xe);Hn.push(V.value.getPage({...cr,view:g.value,titlePosition:e.titlePosition,trimWeeks:e.trimWeeks,position:yt,row:ue,rowFromEnd:we,column:Re,columnFromEnd:Xe,showWeeknumbers:Ce.value,showIsoWeeknumbers:Ee.value,weeknumberPosition:Ue}))}w.value=nt(x.value[0],Hn[0],Vt),x.value=Hn,w.value&&w.value!=="none"?A={resolve:ye,reject:We}:ye(!0)}),ht=Te=>{const ye=se.value??Ft(new Date);return $t(ye,Te)},ut=(Te,ye={})=>{const We=jd(Te)?Te:Ft(Te);return Object.assign(ye,ge(We,{...ye,force:!0})),vXe(ye.fromPage,ye.toPage,g.value,V.value).map(At=>_Xe(At,pe.value,be.value)).some(At=>At)},Rt=(Te,ye={})=>ut(ht(Te),ye),ze=Ct(()=>Rt(-ve.value)),lt=Ct(()=>Rt(ve.value)),at=async(Te,ye={})=>!ye.force&&!ut(Te,ye)?!1:(ye.fromPage&&!yXe(ye.fromPage,se.value)&&(_S({id:i.value,hideDelay:0}),ye.view&&(AZe("view",10),g.value=ye.view),await It({...ye,page:ye.fromPage,position:1,force:!0}),n("did-move",x.value)),!0),Et=(Te,ye={})=>at(ht(Te),ye),$e=()=>Et(-ve.value),Mt=()=>Et(ve.value),tn=Te=>{const ye=xe.value?".in-month":"",We=`.id-${V.value.getDayId(Te)}${ye}`,ot=`${We}.vc-focusable, ${We} .vc-focusable`,At=r.value;if(At){const Vt=At.querySelector(ot);if(Vt)return Vt.focus(),!0}return!1},on=async(Te,ye={})=>tn(Te)?!0:(await at(Te,ye),tn(Te)),vn=(Te,ye)=>{o.value=Te.day,n("dayclick",Te,ye)},_t=(Te,ye)=>{n("daymouseenter",Te,ye)},wt=(Te,ye)=>{n("daymouseleave",Te,ye)},Ve=(Te,ye)=>{o.value=Te.day,s.value=Te,Te.isFocused=!0,n("dayfocusin",Te,ye)},qe=(Te,ye)=>{s.value=null,Te.isFocused=!1,n("dayfocusout",Te,ye)},Pt=(Te,ye)=>{n("daykeydown",Te,ye);const We=Te.noonDate;let ot=null;switch(ye.key){case"ArrowLeft":{ot=_l(We,-1);break}case"ArrowRight":{ot=_l(We,1);break}case"ArrowUp":{ot=_l(We,-7);break}case"ArrowDown":{ot=_l(We,7);break}case"Home":{ot=_l(We,-Te.weekdayPosition+1);break}case"End":{ot=_l(We,Te.weekdayPositionFromEnd);break}case"PageUp":{ye.altKey?ot=sq(We,-1):ot=KI(We,-1);break}case"PageDown":{ye.altKey?ot=sq(We,1):ot=KI(We,1);break}}ot&&(ye.preventDefault(),on(ot).catch())},Qt=Te=>{const ye=s.value;ye!=null&&Pt(ye,Te)},cn=(Te,ye)=>{n("weeknumberclick",Te,ye)};It({page:e.initialPage,position:e.initialPagePosition}),ua(()=>{!e.disablePageSwipe&&r.value&&(C=MZe(r.value,({toLeft:Te=!1,toRight:ye=!1})=>{Te?Mt():ye&&$e()},jm("touch")))}),_y(()=>{x.value=[],C&&C()}),Hr(()=>V.value,()=>{It()}),Hr(()=>oe.value,()=>It()),Hr(()=>e.view,()=>g.value=e.view),Hr(()=>g.value,()=>{CZe("view",()=>{It()}),n("update:view",g.value)}),Hr(()=>o.value,()=>{mn(x.value,Te=>nn(Te))}),yy(()=>{n("update:pages",x.value),mn(x.value,Te=>{Lt(Te),nn(Te)})});const dn={emit:n,containerRef:r,focusedDay:s,inTransition:c,navPopoverId:i,dayPopoverId:f,view:g,pages:x,transitionName:w,theme:F,color:z,displayMode:j,locale:V,masks:Y,attributes:mt,disabledAttribute:ee,disabledDates:le,attributeContext:Kt,days:Xt,dayCells:_e,count:oe,step:ve,firstPage:se,lastPage:ie,canMovePrev:ze,canMoveNext:lt,minPage:pe,maxPage:be,isMonthly:xe,isWeekly:ke,isDaily:He,navVisibility:Se,showWeeknumbers:Ce,showIsoWeeknumbers:Ee,getDateAddress:Ft,canMove:ut,canMoveBy:Rt,move:at,moveBy:Et,movePrev:$e,moveNext:Mt,onTransitionBeforeEnter:Ke,onTransitionAfterEnter:Ge,tryFocusDate:tn,focusDate:on,onKeydown:Qt,onDayKeydown:Pt,onDayClick:vn,onDayMouseenter:_t,onDayMouseleave:wt,onDayFocusin:Ve,onDayFocusout:qe,onWeeknumberClick:cn};return Ko(eae,dn),dn}function Iy(){const e=bs(eae);if(e)return e;throw new Error("Calendar context missing. Please verify this component is nested within a valid context provider.")}const UZe=ki({inheritAttrs:!1,emits:["before-show","after-show","before-hide","after-hide"],props:{id:{type:[Number,String,Symbol],required:!0},showDelay:{type:Number,default:0},hideDelay:{type:Number,default:110},boundarySelector:{type:String}},setup(e,{emit:t}){let n;const r=yr();let s=null,o=null;const c=Bo({isVisible:!1,target:null,data:null,transition:"slide-fade",placement:"bottom",direction:"",positionFixed:!1,modifiers:[],isInteractive:!0,visibility:"click",isHovered:!1,isFocused:!1,autoHide:!1,force:!1});function i(Ge){Ge&&(c.direction=Ge.split("-")[0])}function f({placement:Ge,options:$t}){i(Ge||$t?.placement)}const g=Ct(()=>({placement:c.placement,strategy:c.positionFixed?"fixed":"absolute",boundary:"",modifiers:[{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:f},...c.modifiers||[]],onFirstUpdate:f})),x=Ct(()=>{const Ge=c.direction==="left"||c.direction==="right";let $t="";if(c.placement){const Ft=c.placement.split("-");Ft.length>1&&($t=Ft[1])}return["start","top","left"].includes($t)?Ge?"top":"left":["end","bottom","right"].includes($t)?Ge?"bottom":"right":Ge?"middle":"center"});function w(){o&&(o.destroy(),o=null)}function A(){es(()=>{const Ge=YI(c.target);!Ge||!r.value||(o&&o.state.elements.reference!==Ge&&w(),o?o.update():o=FBe(Ge,r.value,g.value))})}function C(Ge){Object.assign(c,Eoe(Ge,"force"))}function F(Ge,$t){clearTimeout(n),Ge>0?n=setTimeout($t,Ge):$t()}function z(Ge){return!Ge||!o?!1:YI(Ge)===o.state.elements.reference}async function j(Ge={}){c.force||(Ge.force&&(c.force=!0),F(Ge.showDelay??e.showDelay,()=>{c.isVisible&&(c.force=!1),C({...Ge,isVisible:!0}),A()}))}function V(Ge={}){o&&(Ge.target&&!z(Ge.target)||c.force||(Ge.force&&(c.force=!0),F(Ge.hideDelay??e.hideDelay,()=>{c.isVisible||(c.force=!1),c.isVisible=!1})))}function Y(Ge={}){Ge.target!=null&&(c.isVisible&&z(Ge.target)?V(Ge):j(Ge))}function te(Ge){if(!o)return;const $t=o.state.elements.reference;if(!r.value||!$t)return;const Ft=Ge.target;vC(r.value,Ft)||vC($t,Ft)||V({force:!0})}function J(Ge){(Ge.key==="Esc"||Ge.key==="Escape")&&V()}function ee({detail:Ge}){!Ge.id||Ge.id!==e.id||j(Ge)}function le({detail:Ge}){!Ge.id||Ge.id!==e.id||V(Ge)}function oe({detail:Ge}){!Ge.id||Ge.id!==e.id||Y(Ge)}function ve(){am(document,"keydown",J),am(document,"click",te),am(document,"show-popover",ee),am(document,"hide-popover",le),am(document,"toggle-popover",oe)}function se(){om(document,"keydown",J),om(document,"click",te),om(document,"show-popover",ee),om(document,"hide-popover",le),om(document,"toggle-popover",oe)}function ie(Ge){t("before-show",Ge)}function pe(Ge){c.force=!1,t("after-show",Ge)}function be(Ge){t("before-hide",Ge)}function Se(Ge){c.force=!1,w(),t("after-hide",Ge)}function Ce(Ge){Ge.stopPropagation()}function Ee(){c.isHovered=!0,c.isInteractive&&["hover","hover-focus"].includes(c.visibility)&&j()}function xe(){if(c.isHovered=!1,!o)return;const Ge=o.state.elements.reference;c.autoHide&&!c.isFocused&&(!Ge||Ge!==document.activeElement)&&["hover","hover-focus"].includes(c.visibility)&&V()}function ke(){c.isFocused=!0,c.isInteractive&&["focus","hover-focus"].includes(c.visibility)&&j()}function He(Ge){["focus","hover-focus"].includes(c.visibility)&&(!Ge.relatedTarget||!vC(r.value,Ge.relatedTarget))&&(c.isFocused=!1,!c.isHovered&&c.autoHide&&V())}function Ke(){s!=null&&(s.disconnect(),s=null)}return Hr(()=>r.value,Ge=>{Ke(),Ge&&(s=new ResizeObserver(()=>{o&&o.update()}),s.observe(Ge))}),Hr(()=>c.placement,i,{immediate:!0}),ua(()=>{ve()}),_y(()=>{w(),Ke(),se()}),{...I6(c),popoverRef:r,alignment:x,hide:V,setupPopper:A,beforeEnter:ie,afterEnter:pe,beforeLeave:be,afterLeave:Se,onClick:Ce,onMouseOver:Ee,onMouseLeave:xe,onFocusIn:ke,onFocusOut:He}}}),ag=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n};function HZe(e,t,n,r,s,o){return ln(),Nn("div",{class:Jn(["vc-popover-content-wrapper",{"is-interactive":e.isInteractive}]),ref:"popoverRef",onClick:t[0]||(t[0]=(...c)=>e.onClick&&e.onClick(...c)),onMouseover:t[1]||(t[1]=(...c)=>e.onMouseOver&&e.onMouseOver(...c)),onMouseleave:t[2]||(t[2]=(...c)=>e.onMouseLeave&&e.onMouseLeave(...c)),onFocusin:t[3]||(t[3]=(...c)=>e.onFocusIn&&e.onFocusIn(...c)),onFocusout:t[4]||(t[4]=(...c)=>e.onFocusOut&&e.onFocusOut(...c))},[Un(vy,{name:`vc-${e.transition}`,appear:"",onBeforeEnter:e.beforeEnter,onAfterEnter:e.afterEnter,onBeforeLeave:e.beforeLeave,onAfterLeave:e.afterLeave},{default:Dr(()=>[e.isVisible?(ln(),Nn("div",iu({key:0,tabindex:"-1",class:`vc-popover-content direction-${e.direction}`},e.$attrs),[Co(e.$slots,"default",{direction:e.direction,alignment:e.alignment,data:e.data,hide:e.hide},()=>[Rr(is(e.data),1)]),qn("span",{class:Jn(["vc-popover-caret",`direction-${e.direction}`,`align-${e.alignment}`])},null,2)],16)):fi("",!0)]),_:3},8,["name","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],34)}const qP=ag(UZe,[["render",HZe]]),WZe={class:"vc-day-popover-row"},GZe={key:0,class:"vc-day-popover-row-indicator"},YZe={class:"vc-day-popover-row-label"},tae=ki({__name:"PopoverRow",props:{attribute:null},setup(e){const t=e,n=Ct(()=>{const{content:r,highlight:s,dot:o,bar:c,popover:i}=t.attribute;return i&&i.hideIndicator?null:r?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${r.base.color}`}:s?{class:`vc-highlight-bg-solid vc-day-popover-row-highlight vc-attr vc-${s.base.color}`}:o?{class:`vc-dot vc-attr vc-${o.base.color}`}:c?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${c.base.color}`}:null});return(r,s)=>(ln(),Nn("div",WZe,[fn(n)?(ln(),Nn("div",GZe,[qn("span",{class:Jn(fn(n).class)},null,2)])):fi("",!0),qn("div",YZe,[Co(r.$slots,"default",{},()=>[Rr(is(e.attribute.popover?e.attribute.popover.label:"No content provided"),1)])])]))}}),qZe={inheritAttrs:!1},qc=ki({...qZe,__name:"CalendarSlot",props:{name:null},setup(e){const n=Qoe(e.name);return(r,s)=>fn(n)?(ln(),Zr(P1(fn(n)),ym(iu({key:0},r.$attrs)),null,16)):Co(r.$slots,"default",{key:1})}}),XZe={class:"vc-day-popover-container"},ZZe={key:0,class:"vc-day-popover-header"},KZe=ki({__name:"CalendarDayPopover",setup(e){const{dayPopoverId:t,displayMode:n,color:r,masks:s,locale:o}=Iy();function c(f,g){return o.value.formatDate(f,g)}function i(f){return o.value.formatDate(f.date,s.value.dayPopover)}return(f,g)=>(ln(),Zr(qP,{id:fn(t),class:Jn([`vc-${fn(r)}`,`vc-${fn(n)}`])},{default:Dr(({data:{day:x,attributes:w},hide:A})=>[Un(qc,{name:"day-popover",day:x,"day-title":i(x),attributes:w,format:c,masks:fn(s),hide:A},{default:Dr(()=>[qn("div",XZe,[fn(s).dayPopover?(ln(),Nn("div",ZZe,is(i(x)),1)):fi("",!0),(ln(!0),Nn(ei,null,So(w,C=>(ln(),Zr(tae,{key:C.key,attribute:C},null,8,["attribute"]))),128))])]),_:2},1032,["day","day-title","attributes","masks","hide"])]),_:1},8,["id","class"]))}}),JZe={},QZe={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},eKe=qn("polyline",{points:"9 18 15 12 9 6"},null,-1),tKe=[eKe];function nKe(e,t){return ln(),Nn("svg",QZe,tKe)}const rKe=ag(JZe,[["render",nKe]]),iKe={},sKe={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},oKe=qn("polyline",{points:"15 18 9 12 15 6"},null,-1),aKe=[oKe];function lKe(e,t){return ln(),Nn("svg",sKe,aKe)}const cKe=ag(iKe,[["render",lKe]]),uKe={},dKe={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},hKe=qn("polyline",{points:"6 9 12 15 18 9"},null,-1),fKe=[hKe];function pKe(e,t){return ln(),Nn("svg",dKe,fKe)}const mKe=ag(uKe,[["render",pKe]]),gKe={},_Ke={fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},yKe=qn("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),vKe=[yKe];function bKe(e,t){return ln(),Nn("svg",_Ke,vKe)}const xKe=ag(gKe,[["render",bKe]]),wKe=Object.freeze(Object.defineProperty({__proto__:null,IconChevronDown:mKe,IconChevronLeft:cKe,IconChevronRight:rKe,IconClock:xKe},Symbol.toStringTag,{value:"Module"})),b1=ki({__name:"BaseIcon",props:{name:{type:String,required:!0},width:{type:String},height:{type:String},size:{type:String,default:"26"},viewBox:{type:String}},setup(e){const t=e,n=Ct(()=>t.width||t.size),r=Ct(()=>t.height||t.size),s=Ct(()=>wKe[`Icon${t.name}`]);return(o,c)=>(ln(),Zr(P1(fn(s)),{width:fn(n),height:fn(r),class:"vc-base-icon"},null,8,["width","height"]))}}),SKe=["disabled"],EKe={key:1,class:"vc-title-wrapper"},TKe={type:"button",class:"vc-title"},MKe=["disabled"],nae=ki({__name:"CalendarHeader",props:{page:null,layout:null,isLg:{type:Boolean},isXl:{type:Boolean},is2xl:{type:Boolean},hideTitle:{type:Boolean},hideArrows:{type:Boolean}},setup(e){const t=e,{navPopoverId:n,navVisibility:r,canMovePrev:s,movePrev:o,canMoveNext:c,moveNext:i}=Iy(),f=Ct(()=>{switch(t.page.titlePosition){case"left":return"bottom-start";case"right":return"bottom-end";default:return"bottom"}}),g=Ct(()=>{const{page:z}=t;return{id:n.value,visibility:r.value,placement:f.value,modifiers:[{name:"flip",options:{fallbackPlacements:["bottom"]}}],data:{page:z},isInteractive:!0}}),x=Ct(()=>t.page.titlePosition.includes("left")),w=Ct(()=>t.page.titlePosition.includes("right")),A=Ct(()=>t.layout?t.layout:x.value?"tu-pn":w.value?"pn-tu":"p-tu-n;"),C=Ct(()=>({prev:A.value.includes("p")&&!t.hideArrows,title:A.value.includes("t")&&!t.hideTitle,next:A.value.includes("n")&&!t.hideArrows})),F=Ct(()=>({gridTemplateColumns:A.value.split("").map(j=>{switch(j){case"p":return"[prev] auto";case"n":return"[next] auto";case"t":return"[title] auto";case"-":return"1fr";default:return""}}).join(" ")}));return(z,j)=>(ln(),Nn("div",{class:Jn(["vc-header",{"is-lg":e.isLg,"is-xl":e.isXl,"is-2xl":e.is2xl}]),style:Ta(fn(F))},[fn(C).prev?(ln(),Nn("button",{key:0,type:"button",class:"vc-arrow vc-prev vc-focus",disabled:!fn(s),onClick:j[0]||(j[0]=(...V)=>fn(o)&&fn(o)(...V)),onKeydown:j[1]||(j[1]=QC((...V)=>fn(o)&&fn(o)(...V),["space","enter"]))},[Un(qc,{name:"header-prev-button",disabled:!fn(s)},{default:Dr(()=>[Un(b1,{name:"ChevronLeft",size:"24"})]),_:1},8,["disabled"])],40,SKe)):fi("",!0),fn(C).title?(ln(),Nn("div",EKe,[Un(qc,{name:"header-title-wrapper"},{default:Dr(()=>[k2((ln(),Nn("button",TKe,[Un(qc,{name:"header-title",title:e.page.title},{default:Dr(()=>[qn("span",null,is(e.page.title),1)]),_:1},8,["title"])])),[[fn(Goe),fn(g)]])]),_:1})])):fi("",!0),fn(C).next?(ln(),Nn("button",{key:2,type:"button",class:"vc-arrow vc-next vc-focus",disabled:!fn(c),onClick:j[2]||(j[2]=(...V)=>fn(i)&&fn(i)(...V)),onKeydown:j[3]||(j[3]=QC((...V)=>fn(i)&&fn(i)(...V),["space","enter"]))},[Un(qc,{name:"header-next-button",disabled:!fn(c)},{default:Dr(()=>[Un(b1,{name:"ChevronRight",size:"24"})]),_:1},8,["disabled"])],40,MKe)):fi("",!0)],6))}}),rae=Symbol("__vc_page_context__");function AKe(e){const{locale:t,getDateAddress:n,canMove:r}=Iy();function s(i,f){const{month:g,year:x}=n(new Date);return joe().map((w,A)=>{const C=A+1;return{month:C,year:i,id:gXe(C,i),label:t.value.formatDate(w,f),ariaLabel:t.value.formatDate(w,"MMMM"),isActive:C===e.value.month&&i===e.value.year,isCurrent:C===g&&i===x,isDisabled:!r({month:C,year:i},{position:e.value.position})}})}function o(i,f){const{year:g}=n(new Date),{position:x}=e.value,w=[];for(let A=i;A<=f;A+=1){const C=[...Array(12).keys()].some(F=>r({month:F+1,year:A},{position:x}));w.push({year:A,id:A.toString(),label:A.toString(),ariaLabel:A.toString(),isActive:A===e.value.year,isCurrent:A===g,isDisabled:!C})}return w}const c={page:e,getMonthItems:s,getYearItems:o};return Ko(rae,c),c}function iae(){const e=bs(rae);if(e)return e;throw new Error("Page context missing. Please verify this component is nested within a valid context provider.")}const CKe={class:"vc-nav-header"},IKe=["disabled"],PKe=["disabled"],OKe={class:"vc-nav-items"},DKe=["data-id","aria-label","disabled","onClick","onKeydown"],RKe=ki({__name:"CalendarNav",setup(e){const{masks:t,move:n}=Iy(),{page:r,getMonthItems:s,getYearItems:o}=iae(),c=yr(!0),i=12,f=yr(r.value.year),g=yr(A(r.value.year)),x=yr(null);function w(){setTimeout(()=>{if(x.value==null)return;const Ft=x.value.querySelector(".vc-nav-item:not(:disabled)");Ft&&Ft.focus()},10)}function A(Ft){return Math.floor(Ft/i)}function C(){c.value=!c.value}function F(Ft){return Ft*i}function z(Ft){return i*(Ft+1)-1}function j(){ke.value&&(c.value&&Y(),J())}function V(){He.value&&(c.value&&te(),ee())}function Y(){f.value--}function te(){f.value++}function J(){g.value--}function ee(){g.value++}const le=Ct(()=>s(f.value,t.value.navMonths).map(Ft=>({...Ft,click:()=>n({month:Ft.month,year:Ft.year},{position:r.value.position})}))),oe=Ct(()=>s(f.value-1,t.value.navMonths)),ve=Ct(()=>oe.value.some(Ft=>!Ft.isDisabled)),se=Ct(()=>s(f.value+1,t.value.navMonths)),ie=Ct(()=>se.value.some(Ft=>!Ft.isDisabled)),pe=Ct(()=>o(F(g.value),z(g.value)).map(Ft=>({...Ft,click:()=>{f.value=Ft.year,c.value=!0,w()}}))),be=Ct(()=>o(F(g.value-1),z(g.value-1))),Se=Ct(()=>be.value.some(Ft=>!Ft.isDisabled)),Ce=Ct(()=>o(F(g.value+1),z(g.value+1))),Ee=Ct(()=>Ce.value.some(Ft=>!Ft.isDisabled)),xe=Ct(()=>c.value?le.value:pe.value),ke=Ct(()=>c.value?ve.value:Se.value),He=Ct(()=>c.value?ie.value:Ee.value),Ke=Ct(()=>woe(pe.value.map(Ft=>Ft.year))),Ge=Ct(()=>g0(pe.value.map(Ft=>Ft.year))),$t=Ct(()=>c.value?f.value:`${Ke.value} - ${Ge.value}`);return yy(()=>{f.value=r.value.year,w()}),Hr(()=>f.value,Ft=>g.value=A(Ft)),ua(()=>w()),(Ft,Lt)=>(ln(),Nn("div",{class:"vc-nav-container",ref_key:"navContainer",ref:x},[qn("div",CKe,[qn("button",{type:"button",class:"vc-nav-arrow is-left vc-focus",disabled:!fn(ke),onClick:j,onKeydown:Lt[0]||(Lt[0]=nn=>fn(_A)(nn,j))},[Un(qc,{name:"nav-prev-button",move:j,disabled:!fn(ke)},{default:Dr(()=>[Un(b1,{name:"ChevronLeft",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,IKe),qn("button",{type:"button",class:"vc-nav-title vc-focus",onClick:C,onKeydown:Lt[1]||(Lt[1]=nn=>fn(_A)(nn,C))},is(fn($t)),33),qn("button",{type:"button",class:"vc-nav-arrow is-right vc-focus",disabled:!fn(He),onClick:V,onKeydown:Lt[2]||(Lt[2]=nn=>fn(_A)(nn,V))},[Un(qc,{name:"nav-next-button",move:V,disabled:!fn(He)},{default:Dr(()=>[Un(b1,{name:"ChevronRight",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,PKe)]),qn("div",OKe,[(ln(!0),Nn(ei,null,So(fn(xe),nn=>(ln(),Nn("button",{key:nn.label,type:"button","data-id":nn.id,"aria-label":nn.ariaLabel,class:Jn(["vc-nav-item vc-focus",[nn.isActive?"is-active":nn.isCurrent?"is-current":""]]),disabled:nn.isDisabled,onClick:nn.click,onKeydown:mn=>fn(_A)(mn,nn.click)},is(nn.label),43,DKe))),128))])],512))}}),sae=ki({__name:"CalendarPageProvider",props:{page:null},setup(e){return AKe(vl(e,"page")),(n,r)=>Co(n.$slots,"default")}}),kKe=ki({__name:"CalendarNavPopover",setup(e){const{navPopoverId:t,color:n,displayMode:r}=Iy();return(s,o)=>(ln(),Zr(qP,{id:fn(t),class:Jn(["vc-nav-popover-container",`vc-${fn(n)}`,`vc-${fn(r)}`])},{default:Dr(({data:c})=>[Un(sae,{page:c.page},{default:Dr(()=>[Un(qc,{name:"nav"},{default:Dr(()=>[Un(RKe)]),_:1})]),_:2},1032,["page"])]),_:1},8,["id","class"]))}}),LKe=ki({directives:{popover:Goe},components:{CalendarSlot:qc},props:{day:{type:Object,required:!0}},setup(e){const{locale:t,theme:n,attributeContext:r,dayPopoverId:s,onDayClick:o,onDayMouseenter:c,onDayMouseleave:i,onDayFocusin:f,onDayFocusout:g,onDayKeydown:x}=Iy(),w=Ct(()=>e.day),A=Ct(()=>r.value.getCells(w.value)),C=Ct(()=>A.value.map(Ee=>Ee.data)),F=Ct(()=>({...w.value,attributes:C.value,attributeCells:A.value}));function z({data:Ee},{popovers:xe}){const{key:ke,customData:He,popover:Ke}=Ee;if(!Ke)return;const Ge=VY({key:ke,customData:He,attribute:Ee},{...Ke},{visibility:Ke.label?"hover":"click",placement:"bottom",isInteractive:!Ke.label});xe.splice(0,0,Ge)}const j=Ct(()=>{const Ee={...n.value.prepareRender({}),popovers:[]};return A.value.forEach(xe=>{n.value.render(xe,Ee),z(xe,Ee)}),Ee}),V=Ct(()=>j.value.highlights),Y=Ct(()=>!!Yh(V.value)),te=Ct(()=>j.value.content),J=Ct(()=>j.value.dots),ee=Ct(()=>!!Yh(J.value)),le=Ct(()=>j.value.bars),oe=Ct(()=>!!Yh(le.value)),ve=Ct(()=>j.value.popovers),se=Ct(()=>ve.value.map(Ee=>Ee.attribute)),ie=Qoe("day-content"),pe=Ct(()=>["vc-day",...w.value.classes,{"vc-day-box-center-center":!ie},{"is-not-in-month":!e.day.inMonth}]),be=Ct(()=>{let Ee;w.value.isFocusable?Ee="0":Ee="-1";const xe=["vc-day-content vc-focusable vc-focus vc-attr",{"vc-disabled":w.value.isDisabled},T_(g0(V.value),"contentClass"),T_(g0(te.value),"class")||""],ke={...T_(g0(V.value),"contentStyle"),...T_(g0(te.value),"style")};return{class:xe,style:ke,tabindex:Ee,"aria-label":w.value.ariaLabel,"aria-disabled":!!w.value.isDisabled,role:"button"}}),Se=Ct(()=>({click(Ee){o(F.value,Ee)},mouseenter(Ee){c(F.value,Ee)},mouseleave(Ee){i(F.value,Ee)},focusin(Ee){f(F.value,Ee)},focusout(Ee){g(F.value,Ee)},keydown(Ee){x(F.value,Ee)}})),Ce=Ct(()=>Yh(ve.value)?VY({id:s.value,data:{day:w,attributes:se.value}},...ve.value):null);return{attributes:C,attributeCells:A,bars:le,dayClasses:pe,dayContentProps:be,dayContentEvents:Se,dayPopover:Ce,glyphs:j,dots:J,hasDots:ee,hasBars:oe,highlights:V,hasHighlights:Y,locale:t,popovers:ve}}}),NKe={key:0,class:"vc-highlights vc-day-layer"},FKe={key:1,class:"vc-day-layer vc-day-box-center-bottom"},zKe={class:"vc-dots"},BKe={key:2,class:"vc-day-layer vc-day-box-center-bottom"},$Ke={class:"vc-bars"};function VKe(e,t,n,r,s,o){const c=eo("CalendarSlot"),i=V6("popover");return ln(),Nn("div",{class:Jn(e.dayClasses)},[e.hasHighlights?(ln(),Nn("div",NKe,[(ln(!0),Nn(ei,null,So(e.highlights,({key:f,wrapperClass:g,class:x,style:w})=>(ln(),Nn("div",{key:f,class:Jn(g)},[qn("div",{class:Jn(x),style:Ta(w)},null,6)],2))),128))])):fi("",!0),Un(c,{name:"day-content",day:e.day,attributes:e.attributes,"attribute-cells":e.attributeCells,dayProps:e.dayContentProps,dayEvents:e.dayContentEvents,locale:e.locale},{default:Dr(()=>[k2((ln(),Nn("div",iu(e.dayContentProps,QZ(e.dayContentEvents,!0)),[Rr(is(e.day.label),1)],16)),[[i,e.dayPopover]])]),_:1},8,["day","attributes","attribute-cells","dayProps","dayEvents","locale"]),e.hasDots?(ln(),Nn("div",FKe,[qn("div",zKe,[(ln(!0),Nn(ei,null,So(e.dots,({key:f,class:g,style:x})=>(ln(),Nn("span",{key:f,class:Jn(g),style:Ta(x)},null,6))),128))])])):fi("",!0),e.hasBars?(ln(),Nn("div",BKe,[qn("div",$Ke,[(ln(!0),Nn(ei,null,So(e.bars,({key:f,class:g,style:x})=>(ln(),Nn("span",{key:f,class:Jn(g),style:Ta(x)},null,6))),128))])])):fi("",!0)],2)}const jKe=ag(LKe,[["render",VKe]]),UKe={class:"vc-weekdays"},HKe=["onClick"],WKe={inheritAttrs:!1},GKe=ki({...WKe,__name:"CalendarPage",setup(e){const{page:t}=iae(),{onWeeknumberClick:n}=Iy();return(r,s)=>(ln(),Nn("div",{class:Jn(["vc-pane",`row-${fn(t).row}`,`row-from-end-${fn(t).rowFromEnd}`,`column-${fn(t).column}`,`column-from-end-${fn(t).columnFromEnd}`]),ref:"pane"},[Un(nae,{page:fn(t),"is-lg":"","hide-arrows":""},null,8,["page"]),qn("div",{class:Jn(["vc-weeks",{[`vc-show-weeknumbers-${fn(t).weeknumberPosition}`]:fn(t).weeknumberPosition}])},[qn("div",UKe,[(ln(!0),Nn(ei,null,So(fn(t).weekdays,({weekday:o,label:c},i)=>(ln(),Nn("div",{key:i,class:Jn(`vc-weekday vc-weekday-${o}`)},is(c),3))),128))]),(ln(!0),Nn(ei,null,So(fn(t).viewWeeks,o=>(ln(),Nn("div",{key:`weeknumber-${o.weeknumber}`,class:"vc-week"},[fn(t).weeknumberPosition?(ln(),Nn("div",{key:0,class:Jn(["vc-weeknumber",`is-${fn(t).weeknumberPosition}`])},[qn("span",{class:Jn(["vc-weeknumber-content"]),onClick:c=>fn(n)(o,c)},is(o.weeknumberDisplay),9,HKe)],2)):fi("",!0),(ln(!0),Nn(ei,null,So(o.days,c=>(ln(),Zr(jKe,{key:c.id,day:c},null,8,["day"]))),128))]))),128))],2)],2))}}),YKe=ki({components:{CalendarHeader:nae,CalendarPage:GKe,CalendarNavPopover:kKe,CalendarDayPopover:KZe,CalendarPageProvider:sae,CalendarSlot:qc},props:$Ze,emit:VZe,setup(e,{emit:t,slots:n}){return jZe(e,{emit:t,slots:n})}}),qKe={class:"vc-pane-header-wrapper"};function XKe(e,t,n,r,s,o){const c=eo("CalendarHeader"),i=eo("CalendarPage"),f=eo("CalendarSlot"),g=eo("CalendarPageProvider"),x=eo("CalendarDayPopover"),w=eo("CalendarNavPopover");return ln(),Nn(ei,null,[qn("div",iu({"data-helptext":"Press the arrow keys to navigate by day, Home and End to navigate to week ends, PageUp and PageDown to navigate by month, Alt+PageUp and Alt+PageDown to navigate by year"},e.$attrs,{class:["vc-container",`vc-${e.view}`,`vc-${e.color}`,`vc-${e.displayMode}`,{"vc-expanded":e.expanded,"vc-bordered":!e.borderless,"vc-transparent":e.transparent}],onMouseup:t[0]||(t[0]=ZK(()=>{},["prevent"])),ref:"containerRef"}),[qn("div",{class:Jn(["vc-pane-container",{"in-transition":e.inTransition}])},[qn("div",qKe,[e.firstPage?(ln(),Zr(c,{key:0,page:e.firstPage,"is-lg":"","hide-title":""},null,8,["page"])):fi("",!0)]),Un(vy,{name:`vc-${e.transitionName}`,onBeforeEnter:e.onTransitionBeforeEnter,onAfterEnter:e.onTransitionAfterEnter},{default:Dr(()=>[(ln(),Nn("div",{key:e.pages[0].id,class:"vc-pane-layout",style:Ta({gridTemplateColumns:`repeat(${e.columns}, 1fr)`})},[(ln(!0),Nn(ei,null,So(e.pages,A=>(ln(),Zr(g,{key:A.id,page:A},{default:Dr(()=>[Un(f,{name:"page",page:A},{default:Dr(()=>[Un(i)]),_:2},1032,["page"])]),_:2},1032,["page"]))),128))],4))]),_:1},8,["name","onBeforeEnter","onAfterEnter"]),Un(f,{name:"footer"})],2)],16),Un(x),Un(w)],64)}const oae=ag(YKe,[["render",XKe]]),aae=Symbol("__vc_date_picker_context__"),ZKe={...Xoe,mode:{type:String,default:"date"},modelValue:{type:[Number,String,Date,Object]},modelModifiers:{type:Object,default:()=>({})},rules:[String,Object],is24hr:Boolean,hideTimeHeader:Boolean,timeAccuracy:{type:Number,default:2},isRequired:Boolean,isRange:Boolean,updateOnInput:{type:Boolean,default:()=>jm("datePicker.updateOnInput")},inputDebounce:{type:Number,default:()=>jm("datePicker.inputDebounce")},popover:{type:[Boolean,Object],default:!0},dragAttribute:Object,selectAttribute:Object,attributes:[Object,Array]},KKe=["update:modelValue","drag","dayclick","daykeydown","popover-will-show","popover-did-show","popover-will-hide","popover-did-hide"];function JKe(e,{emit:t,slots:n}){Joe(n,{footer:"dp-footer"});const r=Zoe(e),{locale:s,masks:o,disabledAttribute:c}=r,i=yr(!1),f=yr(Symbol()),g=yr(null),x=yr(null),w=yr(["",""]),A=yr(null),C=yr(null);let F,z,j=!0;const V=Ct(()=>e.isRange||e.modelModifiers.range===!0),Y=Ct(()=>V.value&&g.value!=null?g.value.start:null),te=Ct(()=>V.value&&g.value!=null?g.value.end:null),J=Ct(()=>e.mode.toLowerCase()==="date"),ee=Ct(()=>e.mode.toLowerCase()==="datetime"),le=Ct(()=>e.mode.toLowerCase()==="time"),oe=Ct(()=>!!x.value),ve=Ct(()=>{let ye="date";e.modelModifiers.number&&(ye="number"),e.modelModifiers.string&&(ye="string");const We=o.value.modelValue||"iso";return Lt({type:ye,mask:We})}),se=Ct(()=>Rt(x.value??g.value)),ie=Ct(()=>le.value?e.is24hr?o.value.inputTime24hr:o.value.inputTime:ee.value?e.is24hr?o.value.inputDateTime24hr:o.value.inputDateTime:o.value.input),pe=Ct(()=>/[Hh]/g.test(ie.value)),be=Ct(()=>/[dD]{1,2}|Do|W{1,4}|M{1,4}|YY(?:YY)?/g.test(ie.value)),Se=Ct(()=>{if(pe.value&&be.value)return"dateTime";if(be.value)return"date";if(pe.value)return"time"}),Ce=Ct(()=>{var ye;const We=((ye=A.value)==null?void 0:ye.$el.previousElementSibling)??void 0;return v1({},e.popover,jm("datePicker.popover"),{target:We})}),Ee=Ct(()=>Woe({...Ce.value,id:f.value})),xe=Ct(()=>V.value?{start:w.value[0],end:w.value[1]}:w.value[0]),ke=Ct(()=>{const ye=["start","end"].map(We=>({input:It(We),change:ht(We),keyup:ut,...e.popover&&Ee.value}));return V.value?{start:ye[0],end:ye[1]}:ye[0]}),He=Ct(()=>{if(!mt(g.value))return null;const ye={key:"select-drag",...e.selectAttribute,dates:g.value,pinPage:!0},{dot:We,bar:ot,highlight:At,content:Vt}=ye;return!We&&!ot&&!At&&!Vt&&(ye.highlight=!0),ye}),Ke=Ct(()=>{if(!V.value||!mt(x.value))return null;const ye={key:"select-drag",...e.dragAttribute,dates:x.value},{dot:We,bar:ot,highlight:At,content:Vt}=ye;return!We&&!ot&&!At&&!Vt&&(ye.highlight={startEnd:{fillMode:"outline"}}),ye}),Ge=Ct(()=>{const ye=Jc(e.attributes)?[...e.attributes]:[];return Ke.value?ye.unshift(Ke.value):He.value&&ye.unshift(He.value),ye}),$t=Ct(()=>Lt(e.rules==="auto"?Ft():e.rules??{}));function Ft(){const ye={ms:[0,999],sec:[0,59],min:[0,59],hr:[0,23]},We=J.value?0:e.timeAccuracy;return[0,1].map(ot=>{switch(We){case 0:return{hours:ye.hr[ot],minutes:ye.min[ot],seconds:ye.sec[ot],milliseconds:ye.ms[ot]};case 1:return{minutes:ye.min[ot],seconds:ye.sec[ot],milliseconds:ye.ms[ot]};case 3:return{milliseconds:ye.ms[ot]};case 4:return{};default:return{seconds:ye.sec[ot],milliseconds:ye.ms[ot]}}})}function Lt(ye){return Jc(ye)?ye.length===1?[ye[0],ye[0]]:ye:[ye,ye]}function nn(ye){return Lt(ye).map((We,ot)=>({...We,rules:$t.value[ot]}))}function mn(ye){return ye==null?!1:ad(ye)?!isNaN(ye):D0(ye)?!isNaN(ye.getTime()):Vd(ye)?ye!=="":Rz(ye)}function Xt(ye){return xf(ye)&&"start"in ye&&"end"in ye&&mn(ye.start??null)&&mn(ye.end??null)}function mt(ye){return Xt(ye)||mn(ye)}function Jt(ye,We){if(ye==null&&We==null)return!0;if(ye==null||We==null)return!1;const ot=D0(ye),At=D0(We);return ot&&At?ye.getTime()===We.getTime():ot||At?!1:Jt(ye.start,We.start)&&Jt(ye.end,We.end)}function Kt(ye){return!mt(ye)||!c.value?!1:c.value.intersectsRange(s.value.range(ye))}function _e(ye,We,ot,At){if(!mt(ye))return null;if(Xt(ye)){const Vt=s.value.toDate(ye.start,{...We[0],fillDate:Y.value??void 0,patch:ot}),an=s.value.toDate(ye.end,{...We[1],fillDate:te.value??void 0,patch:ot});return qe({start:Vt,end:an},At)}return s.value.toDateOrNull(ye,{...We[0],fillDate:g.value,patch:ot})}function bn(ye,We){return Xt(ye)?{start:s.value.fromDate(ye.start,We[0]),end:s.value.fromDate(ye.end,We[1])}:V.value?null:s.value.fromDate(ye,We[0])}function On(ye,We={}){return clearTimeout(F),new Promise(ot=>{const{debounce:At=0,...Vt}=We;At>0?F=window.setTimeout(()=>{ot(je(ye,Vt))},At):ot(je(ye,Vt))})}function je(ye,{config:We=ve.value,patch:ot="dateTime",clearIfEqual:At=!1,formatInput:Vt=!0,hidePopover:an=!1,dragging:xn=oe.value,targetPriority:Hn,moveToValue:Gn=!1}={}){const cr=nn(We);let yt=_e(ye,cr,ot,Hn);if(Kt(yt)){if(xn)return null;yt=g.value,an=!1}else yt==null&&e.isRequired?yt=g.value:yt!=null&&Jt(g.value,yt)&&At&&(yt=null);const we=xn?x:g,Re=!Jt(we.value,yt);we.value=yt,xn||(x.value=null);const Xe=bn(yt,ve.value);return Re&&(j=!1,t(xn?"drag":"update:modelValue",Xe),es(()=>j=!0)),an&&!xn&&wt(),Vt&&ge(),Gn&&es(()=>cn(Hn??"start")),Xe}function ge(){es(()=>{const ye=nn({type:"string",mask:ie.value}),We=bn(x.value??g.value,ye);V.value?w.value=[We&&We.start,We&&We.end]:w.value=[We,""]})}function nt(ye,We,ot){w.value.splice(We==="start"?0:1,1,ye);const At=V.value?{start:w.value[0],end:w.value[1]||w.value[0]}:ye,Vt={type:"string",mask:ie.value};On(At,{...ot,config:Vt,patch:Se.value,targetPriority:We,moveToValue:!0})}function It(ye){return We=>{e.updateOnInput&&nt(We.currentTarget.value,ye,{formatInput:!1,hidePopover:!1,debounce:e.inputDebounce})}}function ht(ye){return We=>{nt(We.currentTarget.value,ye,{formatInput:!0,hidePopover:!1})}}function ut(ye){ye.key==="Escape"&&On(g.value,{formatInput:!0,hidePopover:!0})}function Rt(ye){return V.value?[ye&&ye.start?s.value.getDateParts(ye.start):null,ye&&ye.end?s.value.getDateParts(ye.end):null]:[ye?s.value.getDateParts(ye):null]}function ze(){x.value=null,ge()}function lt(ye){t("popover-will-show",ye)}function at(ye){t("popover-did-show",ye)}function Et(ye){ze(),t("popover-will-hide",ye)}function $e(ye){t("popover-did-hide",ye)}function Mt(ye){const We={patch:"date",formatInput:!0,hidePopover:!0};if(V.value){const ot=!oe.value;ot?z={start:ye.startDate,end:ye.endDate}:z!=null&&(z.end=ye.date),On(z,{...We,dragging:ot})}else On(ye.date,{...We,clearIfEqual:!e.isRequired})}function tn(ye,We){Mt(ye),t("dayclick",ye,We)}function on(ye,We){switch(We.key){case" ":case"Enter":{Mt(ye),We.preventDefault();break}case"Escape":wt()}t("daykeydown",ye,We)}function vn(ye,We){!oe.value||z==null||(z.end=ye.date,On(qe(z),{patch:"date",formatInput:!0}))}function _t(ye={}){F5({...Ce.value,...ye,isInteractive:!0,id:f.value})}function wt(ye={}){_S({hideDelay:10,force:!0,...Ce.value,...ye,id:f.value})}function Ve(ye){Hoe({...Ce.value,...ye,isInteractive:!0,id:f.value})}function qe(ye,We){const{start:ot,end:At}=ye;if(ot>At)switch(We){case"start":return{start:ot,end:ot};case"end":return{start:At,end:At};default:return{start:At,end:ot}}return{start:ot,end:At}}async function Pt(ye,We={}){return C.value==null?!1:C.value.move(ye,We)}async function Qt(ye,We={}){return C.value==null?!1:C.value.moveBy(ye,We)}async function cn(ye,We={}){const ot=g.value;if(C.value==null||!mt(ot))return!1;const At=ye!=="end",Vt=At?1:-1,an=Xt(ot)?At?ot.start:ot.end:ot,xn=Coe(an,"monthly",s.value);return C.value.move(xn,{position:Vt,...We})}Hr(()=>e.isRange,ye=>{ye&&console.warn("The `is-range` prop will be deprecated in future releases. Please use the `range` modifier.")},{immediate:!0}),Hr(()=>V.value,()=>{je(null,{formatInput:!0})}),Hr(()=>ie.value,()=>ge()),Hr(()=>e.modelValue,ye=>{j&&je(ye,{formatInput:!0,hidePopover:!1})}),Hr(()=>$t.value,()=>{xf(e.rules)&&je(e.modelValue,{formatInput:!0,hidePopover:!1})}),Hr(()=>e.timezone,()=>{je(g.value,{formatInput:!0})});const dn=Lt(ve.value);g.value=_e(e.modelValue??null,dn,"dateTime"),ua(()=>{je(e.modelValue,{formatInput:!0,hidePopover:!1})}),es(()=>i.value=!0);const Te={...r,showCalendar:i,datePickerPopoverId:f,popoverRef:A,popoverEvents:Ee,calendarRef:C,isRange:V,isTimeMode:le,isDateTimeMode:ee,is24hr:vl(e,"is24hr"),hideTimeHeader:vl(e,"hideTimeHeader"),timeAccuracy:vl(e,"timeAccuracy"),isDragging:oe,inputValue:xe,inputEvents:ke,dateParts:se,attributes:Ge,rules:$t,move:Pt,moveBy:Qt,moveToValue:cn,updateValue:On,showPopover:_t,hidePopover:wt,togglePopover:Ve,onDayClick:tn,onDayKeydown:on,onDayMouseEnter:vn,onPopoverBeforeShow:lt,onPopoverAfterShow:at,onPopoverBeforeHide:Et,onPopoverAfterHide:$e};return Ko(aae,Te),Te}function Fz(){const e=bs(aae);if(e)return e;throw new Error("DatePicker context missing. Please verify this component is nested within a valid context provider.")}const QKe=[{value:0,label:"12"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"},{value:10,label:"10"},{value:11,label:"11"}],eJe=[{value:12,label:"12"},{value:13,label:"1"},{value:14,label:"2"},{value:15,label:"3"},{value:16,label:"4"},{value:17,label:"5"},{value:18,label:"6"},{value:19,label:"7"},{value:20,label:"8"},{value:21,label:"9"},{value:22,label:"10"},{value:23,label:"11"}];function tJe(e){const t=Fz(),{locale:n,isRange:r,isTimeMode:s,dateParts:o,rules:c,is24hr:i,hideTimeHeader:f,timeAccuracy:g,updateValue:x}=t;function w(be){be=Object.assign(C.value,be);let Se=null;if(r.value){const Ce=A.value?be:o.value[0],Ee=A.value?o.value[1]:be;Se={start:Ce,end:Ee}}else Se=be;x(Se,{patch:"time",targetPriority:A.value?"start":"end",moveToValue:!0})}const A=Ct(()=>e.position===0),C=Ct(()=>o.value[e.position]||{isValid:!1}),F=Ct(()=>Rz(C.value)),z=Ct(()=>!!C.value.isValid),j=Ct(()=>!f.value&&z.value),V=Ct(()=>{if(!F.value)return null;let be=n.value.toDate(C.value);return C.value.hours===24&&(be=new Date(be.getTime()-1)),be}),Y=Ct({get(){return C.value.hours},set(be){w({hours:be})}}),te=Ct({get(){return C.value.minutes},set(be){w({minutes:be})}}),J=Ct({get(){return C.value.seconds},set(be){w({seconds:be})}}),ee=Ct({get(){return C.value.milliseconds},set(be){w({milliseconds:be})}}),le=Ct({get(){return C.value.hours<12},set(be){be=String(be).toLowerCase()=="true";let Se=Y.value;be&&Se>=12?Se-=12:!be&&Se<12&&(Se+=12),w({hours:Se})}}),oe=Ct(()=>xZe(C.value,c.value[e.position])),ve=Ct(()=>QKe.filter(be=>oe.value.hours.some(Se=>Se.value===be.value))),se=Ct(()=>eJe.filter(be=>oe.value.hours.some(Se=>Se.value===be.value))),ie=Ct(()=>i.value?oe.value.hours:le.value?ve.value:se.value),pe=Ct(()=>{const be=[];return Yh(ve.value)&&be.push({value:!0,label:"AM"}),Yh(se.value)&&be.push({value:!1,label:"PM"}),be});return{...t,showHeader:j,timeAccuracy:g,parts:C,isValid:z,date:V,hours:Y,minutes:te,seconds:J,milliseconds:ee,options:oe,hourOptions:ie,isAM:le,isAMOptions:pe,is24hr:i}}const nJe=["value"],rJe=["value","disabled"],iJe={key:1,class:"vc-base-sizer","aria-hidden":"true"},sJe={inheritAttrs:!1},ww=ki({...sJe,__name:"BaseSelect",props:{options:null,modelValue:null,alignRight:{type:Boolean},alignLeft:{type:Boolean},showIcon:{type:Boolean},fitContent:{type:Boolean}},emits:["update:modelValue"],setup(e){const t=e,n=Ct(()=>{const r=t.options.find(s=>s.value===t.modelValue);return r?.label});return(r,s)=>(ln(),Nn("div",{class:Jn(["vc-base-select",{"vc-fit-content":e.fitContent,"vc-has-icon":e.showIcon}])},[qn("select",iu(r.$attrs,{value:e.modelValue,class:["vc-focus",{"vc-align-right":e.alignRight,"vc-align-left":e.alignLeft}],onChange:s[0]||(s[0]=o=>r.$emit("update:modelValue",o.target.value))}),[(ln(!0),Nn(ei,null,So(e.options,o=>(ln(),Nn("option",{key:o.value,value:o.value,disabled:o.disabled},is(o.label),9,rJe))),128))],16,nJe),e.showIcon?(ln(),Zr(b1,{key:0,name:"ChevronDown",size:"18"})):fi("",!0),e.fitContent?(ln(),Nn("div",iJe,is(fn(n)),1)):fi("",!0)],2))}}),oJe={key:0,class:"vc-time-header"},aJe={class:"vc-time-weekday"},lJe={class:"vc-time-month"},cJe={class:"vc-time-day"},uJe={class:"vc-time-year"},dJe={class:"vc-time-select-group"},hJe=qn("span",{class:"vc-time-colon"},":",-1),fJe=qn("span",{class:"vc-time-colon"},":",-1),pJe=qn("span",{class:"vc-time-decimal"},".",-1),gq=ki({__name:"TimePicker",props:{position:null},setup(e,{expose:t}){const r=tJe(e);t(r);const{locale:s,isValid:o,date:c,hours:i,minutes:f,seconds:g,milliseconds:x,options:w,hourOptions:A,isTimeMode:C,isAM:F,isAMOptions:z,is24hr:j,showHeader:V,timeAccuracy:Y}=r;return(te,J)=>(ln(),Nn("div",{class:Jn(["vc-time-picker",[{"vc-invalid":!fn(o),"vc-attached":!fn(C)}]])},[Un(qc,{name:"time-header"},{default:Dr(()=>[fn(V)&&fn(c)?(ln(),Nn("div",oJe,[qn("span",aJe,is(fn(s).formatDate(fn(c),"WWW")),1),qn("span",lJe,is(fn(s).formatDate(fn(c),"MMM")),1),qn("span",cJe,is(fn(s).formatDate(fn(c),"D")),1),qn("span",uJe,is(fn(s).formatDate(fn(c),"YYYY")),1)])):fi("",!0)]),_:1}),qn("div",dJe,[Un(b1,{name:"Clock",size:"17"}),Un(ww,{modelValue:fn(i),"onUpdate:modelValue":J[0]||(J[0]=ee=>Fi(i)?i.value=ee:null),modelModifiers:{number:!0},options:fn(A),class:"vc-time-select-hours","align-right":""},null,8,["modelValue","options"]),fn(Y)>1?(ln(),Nn(ei,{key:0},[hJe,Un(ww,{modelValue:fn(f),"onUpdate:modelValue":J[1]||(J[1]=ee=>Fi(f)?f.value=ee:null),modelModifiers:{number:!0},options:fn(w).minutes,class:"vc-time-select-minutes","align-left":fn(Y)===2},null,8,["modelValue","options","align-left"])],64)):fi("",!0),fn(Y)>2?(ln(),Nn(ei,{key:1},[fJe,Un(ww,{modelValue:fn(g),"onUpdate:modelValue":J[2]||(J[2]=ee=>Fi(g)?g.value=ee:null),modelModifiers:{number:!0},options:fn(w).seconds,class:"vc-time-select-seconds","align-left":fn(Y)===3},null,8,["modelValue","options","align-left"])],64)):fi("",!0),fn(Y)>3?(ln(),Nn(ei,{key:2},[pJe,Un(ww,{modelValue:fn(x),"onUpdate:modelValue":J[3]||(J[3]=ee=>Fi(x)?x.value=ee:null),modelModifiers:{number:!0},options:fn(w).milliseconds,class:"vc-time-select-milliseconds","align-left":""},null,8,["modelValue","options"])],64)):fi("",!0),fn(j)?fi("",!0):(ln(),Zr(ww,{key:3,modelValue:fn(F),"onUpdate:modelValue":J[4]||(J[4]=ee=>Fi(F)?F.value=ee:null),options:fn(z)},null,8,["modelValue","options"]))])],2))}}),lae=ki({__name:"DatePickerBase",setup(e){const{attributes:t,calendarRef:n,color:r,displayMode:s,isDateTimeMode:o,isTimeMode:c,isRange:i,onDayClick:f,onDayMouseEnter:g,onDayKeydown:x}=Fz(),w=i.value?[0,1]:[0];return(A,C)=>fn(c)?(ln(),Nn("div",{key:0,class:Jn(`vc-container vc-bordered vc-${fn(r)} vc-${fn(s)}`)},[(ln(!0),Nn(ei,null,So(fn(w),F=>(ln(),Zr(gq,{key:F,position:F},null,8,["position"]))),128))],2)):(ln(),Zr(oae,{key:1,attributes:fn(t),ref_key:"calendarRef",ref:n,onDayclick:fn(f),onDaymouseenter:fn(g),onDaykeydown:fn(x)},{footer:Dr(()=>[fn(o)?(ln(!0),Nn(ei,{key:0},So(fn(w),F=>(ln(),Zr(gq,{key:F,position:F},null,8,["position"]))),128)):fi("",!0),Un(qc,{name:"dp-footer"})]),_:1},8,["attributes","onDayclick","onDaymouseenter","onDaykeydown"]))}}),mJe={inheritAttrs:!1},gJe=ki({...mJe,__name:"DatePickerPopover",setup(e){const{datePickerPopoverId:t,color:n,displayMode:r,popoverRef:s,onPopoverBeforeShow:o,onPopoverAfterShow:c,onPopoverBeforeHide:i,onPopoverAfterHide:f}=Fz();return(g,x)=>(ln(),Zr(qP,{id:fn(t),placement:"bottom-start",class:Jn(`vc-date-picker-content vc-${fn(n)} vc-${fn(r)}`),ref_key:"popoverRef",ref:s,onBeforeShow:fn(o),onAfterShow:fn(c),onBeforeHide:fn(i),onAfterHide:fn(f)},{default:Dr(()=>[Un(lae,ym(B0(g.$attrs)),null,16)]),_:1},8,["id","class","onBeforeShow","onAfterShow","onBeforeHide","onAfterHide"]))}}),_Je=ki({inheritAttrs:!1,emits:KKe,props:ZKe,components:{DatePickerBase:lae,DatePickerPopover:gJe},setup(e,t){const n=JKe(e,t),r=Bo(Eoe(n,"calendarRef","popoverRef"));return{...n,slotCtx:r}}});function yJe(e,t,n,r,s,o){const c=eo("DatePickerPopover"),i=eo("DatePickerBase");return e.$slots.default?(ln(),Nn(ei,{key:0},[Co(e.$slots,"default",ym(B0(e.slotCtx))),Un(c,ym(B0(e.$attrs)),null,16)],64)):(ln(),Zr(i,ym(iu({key:1},e.$attrs)),null,16))}const vJe=ag(_Je,[["render",yJe]]),_q=Object.freeze(Object.defineProperty({__proto__:null,Calendar:oae,DatePicker:vJe,Popover:qP,PopoverRow:tae},Symbol.toStringTag,{value:"Module"})),bJe=(e,t={})=>{e.use(HXe,t);const n=e.config.globalProperties.$VCalendar.componentPrefix;for(const r in _q){const s=_q[r];e.component(`${n}${r}`,s)}},xJe={install:bJe},wJe=xs(e=>{e.vueApp.use(xJe)});/**
  * vee-validate v4.15.0
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function sa(e){return typeof e=="function"}function cae(e){return e==null}const ay=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function zz(e){return Number(e)>=0}function SJe(e){const t=parseFloat(e);return isNaN(t)?e:t}function EJe(e){return typeof e=="object"&&e!==null}function TJe(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function yq(e){if(!EJe(e)||TJe(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function yS(e,t){return Object.keys(t).forEach(n=>{if(yq(t[n])&&yq(e[n])){e[n]||(e[n]={}),yS(e[n],t[n]);return}e[n]=t[n]}),e}function Bw(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let r=1;r<t.length;r++){if(zz(t[r])){n+=`[${t[r]}]`;continue}n+=`.${t[r]}`}return n}const uae={};function HR(e,t){AJe(e,t),uae[e]=t}function MJe(e){return uae[e]}function AJe(e,t){if(!sa(t))throw new Error(`Extension Error: The validator '${e}' must be a function.`)}function vq(e,t,n){typeof n.value=="object"&&(n.value=ts(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function ts(e){if(typeof e!="object")return e;var t=0,n,r,s,o=Object.prototype.toString.call(e);if(o==="[object Object]"?s=Object.create(e.__proto__||null):o==="[object Array]"?s=Array(e.length):o==="[object Set]"?(s=new Set,e.forEach(function(c){s.add(ts(c))})):o==="[object Map]"?(s=new Map,e.forEach(function(c,i){s.set(ts(i),ts(c))})):o==="[object Date]"?s=new Date(+e):o==="[object RegExp]"?s=new RegExp(e.source,e.flags):o==="[object DataView]"?s=new e.constructor(ts(e.buffer)):o==="[object ArrayBuffer]"?s=e.slice(0):o.slice(-6)==="Array]"&&(s=new e.constructor(e)),s){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)vq(s,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(s,n=r[t])&&s[n]===e[n]||vq(s,n,Object.getOwnPropertyDescriptor(e,n))}return s||e}const Bz=Symbol("vee-validate-form"),CJe=Symbol("vee-validate-form-context"),IJe=Symbol("vee-validate-field-instance"),t3=Symbol("Default empty value"),PJe=typeof window<"u";function z5(e){return sa(e)&&!!e.__locatorRef}function Xu(e){return!!e&&sa(e.parse)&&e.__type==="VVTypedSchema"}function n3(e){return!!e&&sa(e.validate)}function sE(e){return e==="checkbox"||e==="radio"}function OJe(e){return ay(e)||Array.isArray(e)}function DJe(e){return Array.isArray(e)?e.length===0:ay(e)&&Object.keys(e).length===0}function XP(e){return/^\[.+\]$/i.test(e)}function RJe(e){return dae(e)&&e.multiple}function dae(e){return e.tagName==="SELECT"}function kJe(e,t){const n=![!1,null,void 0,0].includes(t.multiple)&&!Number.isNaN(t.multiple);return e==="select"&&"multiple"in t&&n}function LJe(e,t){return!kJe(e,t)&&t.type!=="file"&&!sE(t.type)}function hae(e){return $z(e)&&e.target&&"submit"in e.target}function $z(e){return e?!!(typeof Event<"u"&&sa(Event)&&e instanceof Event||e&&e.srcElement):!1}function bq(e,t){return t in e&&e[t]!==t3}function Al(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Al(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Al(r[1],t.get(r[0])))return!1;return!0}if(wq(e)&&wq(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length-xq(e,s),n!==Object.keys(t).length-xq(t,Object.keys(t)))return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){var o=s[r];if(!Al(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function xq(e,t){let n=0;for(let s=t.length;s--!==0;){var r=t[s];e[r]===void 0&&n++}return n}function wq(e){return PJe?e instanceof File:!1}function Vz(e){return XP(e)?e.replace(/\[|\]/gi,""):e}function Jl(e,t,n){return e?XP(t)?e[Vz(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((s,o)=>OJe(s)&&o in s?s[o]:n,e):n}function Oh(e,t,n){if(XP(t)){e[Vz(t)]=n;return}const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let s=e;for(let o=0;o<r.length;o++){if(o===r.length-1){s[r[o]]=n;return}(!(r[o]in s)||cae(s[r[o]]))&&(s[r[o]]=zz(r[o+1])?[]:{}),s=s[r[o]]}}function WR(e,t){if(Array.isArray(e)&&zz(t)){e.splice(Number(t),1);return}ay(e)&&delete e[t]}function Sq(e,t){if(XP(t)){delete e[Vz(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let o=0;o<n.length;o++){if(o===n.length-1){WR(r,n[o]);break}if(!(n[o]in r)||cae(r[n[o]]))break;r=r[n[o]]}const s=n.map((o,c)=>Jl(e,n.slice(0,c).join(".")));for(let o=s.length-1;o>=0;o--)if(DJe(s[o])){if(o===0){WR(e,n[0]);continue}WR(s[o-1],n[o-1])}}function yc(e){return Object.keys(e)}function fae(e,t=void 0){const n=zs();return n?.provides[e]||bs(e,t)}function Eq(e,t,n){if(Array.isArray(e)){const r=[...e],s=r.findIndex(o=>Al(o,t));return s>=0?r.splice(s,1):r.push(t),r}return Al(e,t)?n:t}function Tq(e,t=0){let n=null,r=[];return function(...s){return n&&clearTimeout(n),n=setTimeout(()=>{const o=e(...s);r.forEach(c=>c(o)),r=[]},t),new Promise(o=>r.push(o))}}function NJe(e,t){return ay(t)&&t.number?SJe(e):e}function B5(e,t){let n;return async function(...s){const o=e(...s);n=o;const c=await o;return o!==n?c:(n=void 0,t(c,s))}}function $5(e){return Array.isArray(e)?e:e?[e]:[]}function yA(e,t){const n={};for(const r in e)t.includes(r)||(n[r]=e[r]);return n}function FJe(e){let t=null,n=[];return function(...r){const s=es(()=>{if(t!==s)return;const o=e(...r);n.forEach(c=>c(o)),n=[],t=null});return t=s,new Promise(o=>n.push(o))}}function pae(e,t,n){return t.slots.default?typeof e=="string"||!e?t.slots.default(n()):{default:()=>{var r,s;return(s=(r=t.slots).default)===null||s===void 0?void 0:s.call(r,n())}}:t.slots.default}function GR(e){if(mae(e))return e._value}function mae(e){return"_value"in e}function zJe(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function r3(e){if(!$z(e))return e;const t=e.target;if(sE(t.type)&&mae(t))return GR(t);if(t.type==="file"&&t.files){const n=Array.from(t.files);return t.multiple?n:n[0]}if(RJe(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map(GR);if(dae(t)){const n=Array.from(t.options).find(r=>r.selected);return n?GR(n):t.value}return zJe(t)}function gae(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ay(e)&&e._$$isNormalized?e:ay(e)?Object.keys(e).reduce((n,r)=>{const s=BJe(e[r]);return e[r]!==!1&&(n[r]=Mq(s)),n},t):typeof e!="string"?t:e.split("|").reduce((n,r)=>{const s=$Je(r);return s.name&&(n[s.name]=Mq(s.params)),n},t):t}function BJe(e){return e===!0?[]:Array.isArray(e)||ay(e)?e:[e]}function Mq(e){const t=n=>typeof n=="string"&&n[0]==="@"?VJe(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,r)=>(n[r]=t(e[r]),n),{})}const $Je=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function VJe(e){const t=n=>{var r;return(r=Jl(n,e))!==null&&r!==void 0?r:n[e]};return t.__locatorRef=e,t}function jJe(e){return Array.isArray(e)?e.filter(z5):yc(e).filter(t=>z5(e[t])).map(t=>e[t])}const UJe={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let V5=Object.assign({},UJe);const M_=()=>V5,HJe=e=>{V5=Object.assign(Object.assign({},V5),e)},WJe=HJe;async function _ae(e,t,n={}){const r=n?.bails,s={name:n?.name||"{field}",rules:t,label:n?.label,bails:r??!0,formData:n?.values||{}},o=await GJe(s,e);return Object.assign(Object.assign({},o),{valid:!o.errors.length})}async function GJe(e,t){const n=e.rules;if(Xu(n)||n3(n))return qJe(t,Object.assign(Object.assign({},e),{rules:n}));if(sa(n)||Array.isArray(n)){const i={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},f=Array.isArray(n)?n:[n],g=f.length,x=[];for(let w=0;w<g;w++){const A=f[w],C=await A(t,i);if(!(typeof C!="string"&&!Array.isArray(C)&&C)){if(Array.isArray(C))x.push(...C);else{const z=typeof C=="string"?C:vae(i);x.push(z)}if(e.bails)return{errors:x}}}return{errors:x}}const r=Object.assign(Object.assign({},e),{rules:gae(n)}),s=[],o=Object.keys(r.rules),c=o.length;for(let i=0;i<c;i++){const f=o[i],g=await XJe(r,t,{name:f,params:r.rules[f]});if(g.error&&(s.push(g.error),e.bails))return{errors:s}}return{errors:s}}function YJe(e){return!!e&&e.name==="ValidationError"}function yae(e){return{__type:"VVTypedSchema",async parse(n,r){var s;try{return{output:await e.validate(n,{abortEarly:!1,context:r?.formData||{}}),errors:[]}}catch(o){if(!YJe(o))throw o;if(!(!((s=o.inner)===null||s===void 0)&&s.length)&&o.errors.length)return{errors:[{path:o.path,errors:o.errors}]};const c=o.inner.reduce((i,f)=>{const g=f.path||"";return i[g]||(i[g]={errors:[],path:g}),i[g].errors.push(...f.errors),i},{});return{errors:Object.values(c)}}}}}async function qJe(e,t){const r=await(Xu(t.rules)?t.rules:yae(t.rules)).parse(e,{formData:t.formData}),s=[];for(const o of r.errors)o.errors.length&&s.push(...o.errors);return{value:r.value,errors:s}}async function XJe(e,t,n){const r=MJe(n.name);if(!r)throw new Error(`No such validator '${n.name}' exists.`);const s=ZJe(n.params,e.formData),o={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:s})},c=await r(t,s,o);return typeof c=="string"?{error:c}:{error:c?void 0:vae(o)}}function vae(e){const t=M_().generateMessage;return t?t(e):"Field is invalid"}function ZJe(e,t){const n=r=>z5(r)?r(t):r;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((r,s)=>(r[s]=n(e[s]),r),{})}async function KJe(e,t){const r=await(Xu(e)?e:yae(e)).parse(ts(t),{formData:ts(t)}),s={},o={};for(const c of r.errors){const i=c.errors,f=(c.path||"").replace(/\["(\d+)"\]/g,(g,x)=>`[${x}]`);s[f]={valid:!i.length,errors:i},i.length&&(o[f]=i[0])}return{valid:!r.errors.length,results:s,errors:o,values:r.value,source:"schema"}}async function JJe(e,t,n){const s=yc(e).map(async g=>{var x,w,A;const C=(x=n?.names)===null||x===void 0?void 0:x[g],F=await _ae(Jl(t,g),e[g],{name:C?.name||g,label:C?.label,values:t,bails:(A=(w=n?.bailsMap)===null||w===void 0?void 0:w[g])!==null&&A!==void 0?A:!0});return Object.assign(Object.assign({},F),{path:g})});let o=!0;const c=await Promise.all(s),i={},f={};for(const g of c)i[g.path]={valid:g.valid,errors:g.errors},g.valid||(o=!1,f[g.path]=g.errors[0]);return{valid:o,results:i,errors:f,source:"schema"}}let Aq=0;function QJe(e,t){const{value:n,initialValue:r,setInitialValue:s}=eQe(e,t.modelValue,t.form);if(!t.form){let f=function(C){var F;"value"in C&&(n.value=C.value),"errors"in C&&x(C.errors),"touched"in C&&(A.touched=(F=C.touched)!==null&&F!==void 0?F:A.touched),"initialValue"in C&&s(C.initialValue)};const{errors:g,setErrors:x}=rQe(),w=Aq>=Number.MAX_SAFE_INTEGER?0:++Aq,A=nQe(n,r,g,t.schema);return{id:w,path:e,value:n,initialValue:r,meta:A,flags:{pendingUnmount:{[w]:!1},pendingReset:!1},errors:g,setState:f}}const o=t.form.createPathState(e,{bails:t.bails,label:t.label,type:t.type,validate:t.validate,schema:t.schema}),c=Ct(()=>o.errors);function i(f){var g,x,w;"value"in f&&(n.value=f.value),"errors"in f&&((g=t.form)===null||g===void 0||g.setFieldError(fn(e),f.errors)),"touched"in f&&((x=t.form)===null||x===void 0||x.setFieldTouched(fn(e),(w=f.touched)!==null&&w!==void 0?w:!1)),"initialValue"in f&&s(f.initialValue)}return{id:Array.isArray(o.id)?o.id[o.id.length-1]:o.id,path:e,value:n,errors:c,meta:o,initialValue:r,flags:o.__flags,setState:i}}function eQe(e,t,n){const r=yr(fn(t));function s(){return n?Jl(n.initialValues.value,fn(e),fn(r)):fn(r)}function o(g){if(!n){r.value=g;return}n.setFieldInitialValue(fn(e),g,!0)}const c=Ct(s);if(!n)return{value:yr(s()),initialValue:c,setInitialValue:o};const i=tQe(t,n,c,e);return n.stageInitialValue(fn(e),i,!0),{value:Ct({get(){return Jl(n.values,fn(e))},set(g){n.setFieldValue(fn(e),g,!1)}}),initialValue:c,setInitialValue:o}}function tQe(e,t,n,r){return Fi(e)?fn(e):e!==void 0?e:Jl(t.values,fn(r),fn(n))}function nQe(e,t,n,r){const s=Ct(()=>{var c,i,f;return(f=(i=(c=Xn(r))===null||c===void 0?void 0:c.describe)===null||i===void 0?void 0:i.call(c).required)!==null&&f!==void 0?f:!1}),o=Bo({touched:!1,pending:!1,valid:!0,required:s,validated:!!fn(n).length,initialValue:Ct(()=>fn(t)),dirty:Ct(()=>!Al(fn(e),fn(t)))});return Hr(n,c=>{o.valid=!c.length},{immediate:!0,flush:"sync"}),o}function rQe(){const e=yr([]);return{errors:e,setErrors:t=>{e.value=$5(t)}}}function iQe(e,t,n){return sE(n?.type)?oQe(e,t,n):bae(e,t,n)}function bae(e,t,n){const{initialValue:r,validateOnMount:s,bails:o,type:c,checkedValue:i,label:f,validateOnValueUpdate:g,uncheckedValue:x,controlled:w,keepValueOnUnmount:A,syncVModel:C,form:F}=sQe(n),z=w?fae(Bz):void 0,j=F||z,V=Ct(()=>Bw(Xn(e))),Y=Ct(()=>{if(Xn(j?.schema))return;const mt=fn(t);return n3(mt)||Xu(mt)||sa(mt)||Array.isArray(mt)?mt:gae(mt)}),te=!sa(Y.value)&&Xu(Xn(t)),{id:J,value:ee,initialValue:le,meta:oe,setState:ve,errors:se,flags:ie}=QJe(V,{modelValue:r,form:j,bails:o,label:f,type:c,validate:Y.value?xe:void 0,schema:te?t:void 0}),pe=Ct(()=>se.value[0]);C&&aQe({value:ee,prop:C,handleChange:ke,shouldValidate:()=>g&&!ie.pendingReset});const be=(Xt,mt=!1)=>{oe.touched=!0,mt&&Ce()};async function Se(Xt){var mt,Jt;if(j?.validateSchema){const{results:Kt}=await j.validateSchema(Xt);return(mt=Kt[Xn(V)])!==null&&mt!==void 0?mt:{valid:!0,errors:[]}}return Y.value?_ae(ee.value,Y.value,{name:Xn(V),label:Xn(f),values:(Jt=j?.values)!==null&&Jt!==void 0?Jt:{},bails:o}):{valid:!0,errors:[]}}const Ce=B5(async()=>(oe.pending=!0,oe.validated=!0,Se("validated-only")),Xt=>(ie.pendingUnmount[nn.id]||(ve({errors:Xt.errors}),oe.pending=!1,oe.valid=Xt.valid),Xt)),Ee=B5(async()=>Se("silent"),Xt=>(oe.valid=Xt.valid,Xt));function xe(Xt){return Xt?.mode==="silent"?Ee():Ce()}function ke(Xt,mt=!0){const Jt=r3(Xt);$t(Jt,mt)}ua(()=>{if(s)return Ce();(!j||!j.validateSchema)&&Ee()});function He(Xt){oe.touched=Xt}function Ke(Xt){var mt;const Jt=Xt&&"value"in Xt?Xt.value:le.value;ve({value:ts(Jt),initialValue:ts(Jt),touched:(mt=Xt?.touched)!==null&&mt!==void 0?mt:!1,errors:Xt?.errors||[]}),oe.pending=!1,oe.validated=!1,Ee()}const Ge=zs();function $t(Xt,mt=!0){ee.value=Ge&&C?NJe(Xt,Ge.props.modelModifiers):Xt,(mt?Ce:Ee)()}function Ft(Xt){ve({errors:Array.isArray(Xt)?Xt:[Xt]})}const Lt=Ct({get(){return ee.value},set(Xt){$t(Xt,g)}}),nn={id:J,name:V,label:f,value:Lt,meta:oe,errors:se,errorMessage:pe,type:c,checkedValue:i,uncheckedValue:x,bails:o,keepValueOnUnmount:A,resetField:Ke,handleReset:()=>Ke(),validate:xe,handleChange:ke,handleBlur:be,setState:ve,setTouched:He,setErrors:Ft,setValue:$t};if(Ko(IJe,nn),Fi(t)&&typeof fn(t)!="function"&&Hr(t,(Xt,mt)=>{Al(Xt,mt)||(oe.validated?Ce():Ee())},{deep:!0}),!j)return nn;const mn=Ct(()=>{const Xt=Y.value;return!Xt||sa(Xt)||n3(Xt)||Xu(Xt)||Array.isArray(Xt)?{}:Object.keys(Xt).reduce((mt,Jt)=>{const Kt=jJe(Xt[Jt]).map(_e=>_e.__locatorRef).reduce((_e,bn)=>{const On=Jl(j.values,bn)||j.values[bn];return On!==void 0&&(_e[bn]=On),_e},{});return Object.assign(mt,Kt),mt},{})});return Hr(mn,(Xt,mt)=>{if(!Object.keys(Xt).length)return;!Al(Xt,mt)&&(oe.validated?Ce():Ee())}),Mf(()=>{var Xt;const mt=(Xt=Xn(nn.keepValueOnUnmount))!==null&&Xt!==void 0?Xt:Xn(j.keepValuesOnUnmount),Jt=Xn(V);if(mt||!j||ie.pendingUnmount[nn.id]){j?.removePathState(Jt,J);return}ie.pendingUnmount[nn.id]=!0;const Kt=j.getPathState(Jt);if(Array.isArray(Kt?.id)&&Kt?.multiple?Kt?.id.includes(nn.id):Kt?.id===nn.id){if(Kt?.multiple&&Array.isArray(Kt.value)){const bn=Kt.value.findIndex(On=>Al(On,Xn(nn.checkedValue)));if(bn>-1){const On=[...Kt.value];On.splice(bn,1),j.setFieldValue(Jt,On)}Array.isArray(Kt.id)&&Kt.id.splice(Kt.id.indexOf(nn.id),1)}else j.unsetPathValue(Xn(V));j.removePathState(Jt,J)}}),nn}function sQe(e){const t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),n=!!e?.syncVModel,r=typeof e?.syncVModel=="string"?e.syncVModel:e?.modelPropName||"modelValue",s=n&&!("initialValue"in(e||{}))?j5(zs(),r):e?.initialValue;if(!e)return Object.assign(Object.assign({},t()),{initialValue:s});const o="valueProp"in e?e.valueProp:e.checkedValue,c="standalone"in e?!e.standalone:e.controlled,i=e?.modelPropName||e?.syncVModel||!1;return Object.assign(Object.assign(Object.assign({},t()),e||{}),{initialValue:s,controlled:c??!0,checkedValue:o,syncVModel:i})}function oQe(e,t,n){const r=n?.standalone?void 0:fae(Bz),s=n?.checkedValue,o=n?.uncheckedValue;function c(i){const f=i.handleChange,g=Ct(()=>{const w=Xn(i.value),A=Xn(s);return Array.isArray(w)?w.findIndex(C=>Al(C,A))>=0:Al(A,w)});function x(w,A=!0){var C,F;if(g.value===((C=w?.target)===null||C===void 0?void 0:C.checked)){A&&i.validate();return}const z=Xn(e),j=r?.getPathState(z),V=r3(w);let Y=(F=Xn(s))!==null&&F!==void 0?F:V;r&&j?.multiple&&j.type==="checkbox"?Y=Eq(Jl(r.values,z)||[],Y,void 0):n?.type==="checkbox"&&(Y=Eq(Xn(i.value),Y,Xn(o))),f(Y,A)}return Object.assign(Object.assign({},i),{checked:g,checkedValue:s,uncheckedValue:o,handleChange:x})}return c(bae(e,t,n))}function aQe({prop:e,value:t,handleChange:n,shouldValidate:r}){const s=zs();if(!s||!e)return;const o=typeof e=="string"?e:"modelValue",c=`update:${o}`;o in s.props&&(Hr(t,i=>{Al(i,j5(s,o))||s.emit(c,i)}),Hr(()=>j5(s,o),i=>{if(i===t3&&t.value===void 0)return;const f=i===t3?void 0:i;Al(f,t.value)||n(f,r())}))}function j5(e,t){if(e)return e.props[t]}const lQe=ki({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>M_().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:t3},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(e,t){const n=vl(e,"rules"),r=vl(e,"name"),s=vl(e,"label"),o=vl(e,"uncheckedValue"),c=vl(e,"keepValue"),{errors:i,value:f,errorMessage:g,validate:x,handleChange:w,handleBlur:A,setTouched:C,resetField:F,handleReset:z,meta:j,checked:V,setErrors:Y,setValue:te}=iQe(r,n,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:t.attrs.type,initialValue:uQe(e,t),checkedValue:t.attrs.value,uncheckedValue:o,label:s,validateOnValueUpdate:e.validateOnModelUpdate,keepValueOnUnmount:c,syncVModel:!0}),J=function(ie,pe=!0){w(ie,pe)},ee=Ct(()=>{const{validateOnInput:se,validateOnChange:ie,validateOnBlur:pe,validateOnModelUpdate:be}=cQe(e);function Se(ke){A(ke,pe),sa(t.attrs.onBlur)&&t.attrs.onBlur(ke)}function Ce(ke){J(ke,se),sa(t.attrs.onInput)&&t.attrs.onInput(ke)}function Ee(ke){J(ke,ie),sa(t.attrs.onChange)&&t.attrs.onChange(ke)}const xe={name:e.name,onBlur:Se,onInput:Ce,onChange:Ee};return xe["onUpdate:modelValue"]=ke=>J(ke,be),xe}),le=Ct(()=>{const se=Object.assign({},ee.value);sE(t.attrs.type)&&V&&(se.checked=V.value);const ie=Cq(e,t);return LJe(ie,t.attrs)&&(se.value=f.value),se}),oe=Ct(()=>Object.assign(Object.assign({},ee.value),{modelValue:f.value}));function ve(){return{field:le.value,componentField:oe.value,value:f.value,meta:j,errors:i.value,errorMessage:g.value,validate:x,resetField:F,handleChange:J,handleInput:se=>J(se,!1),handleReset:z,handleBlur:ee.value.onBlur,setTouched:C,setErrors:Y,setValue:te}}return t.expose({value:f,meta:j,errors:i,errorMessage:g,setErrors:Y,setTouched:C,setValue:te,reset:F,validate:x,handleChange:w}),()=>{const se=P1(Cq(e,t)),ie=pae(se,t,ve);return se?Hs(se,Object.assign(Object.assign({},t.attrs),le.value),ie):ie}}});function Cq(e,t){let n=e.as||"";return!e.as&&!t.slots.default&&(n="input"),n}function cQe(e){var t,n,r,s;const{validateOnInput:o,validateOnChange:c,validateOnBlur:i,validateOnModelUpdate:f}=M_();return{validateOnInput:(t=e.validateOnInput)!==null&&t!==void 0?t:o,validateOnChange:(n=e.validateOnChange)!==null&&n!==void 0?n:c,validateOnBlur:(r=e.validateOnBlur)!==null&&r!==void 0?r:i,validateOnModelUpdate:(s=e.validateOnModelUpdate)!==null&&s!==void 0?s:f}}function uQe(e,t){return sE(t.attrs.type)?bq(e,"modelValue")?e.modelValue:void 0:bq(e,"modelValue")?e.modelValue:t.attrs.value}const Kut=lQe;let dQe=0;const vA=["bails","fieldsCount","id","multiple","type","validate"];function xae(e){const t=e?.initialValues||{},n=Object.assign({},Xn(t)),r=fn(e?.validationSchema);return r&&Xu(r)&&sa(r.cast)?ts(r.cast(n)||{}):ts(n)}function hQe(e){var t;const n=dQe++,r=e?.name||"Form";let s=0;const o=yr(!1),c=yr(!1),i=yr(0),f=[],g=Bo(xae(e)),x=yr([]),w=yr({}),A=yr({}),C=FJe(()=>{A.value=x.value.reduce((Ve,qe)=>(Ve[Bw(Xn(qe.path))]=qe,Ve),{})});function F(Ve,qe){const Pt=ke(Ve);if(!Pt){typeof Ve=="string"&&(w.value[Bw(Ve)]=$5(qe));return}if(typeof Ve=="string"){const Qt=Bw(Ve);w.value[Qt]&&delete w.value[Qt]}Pt.errors=$5(qe),Pt.valid=!Pt.errors.length}function z(Ve){yc(Ve).forEach(qe=>{F(qe,Ve[qe])})}e?.initialErrors&&z(e.initialErrors);const j=Ct(()=>{const Ve=x.value.reduce((qe,Pt)=>(Pt.errors.length&&(qe[Xn(Pt.path)]=Pt.errors),qe),{});return Object.assign(Object.assign({},w.value),Ve)}),V=Ct(()=>yc(j.value).reduce((Ve,qe)=>{const Pt=j.value[qe];return Pt?.length&&(Ve[qe]=Pt[0]),Ve},{})),Y=Ct(()=>x.value.reduce((Ve,qe)=>(Ve[Xn(qe.path)]={name:Xn(qe.path)||"",label:qe.label||""},Ve),{})),te=Ct(()=>x.value.reduce((Ve,qe)=>{var Pt;return Ve[Xn(qe.path)]=(Pt=qe.bails)!==null&&Pt!==void 0?Pt:!0,Ve},{})),J=Object.assign({},e?.initialErrors||{}),ee=(t=e?.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:le,originalInitialValues:oe,setInitialValues:ve}=pQe(x,g,e),se=fQe(x,g,oe,V),ie=Ct(()=>x.value.reduce((Ve,qe)=>{const Pt=Jl(g,Xn(qe.path));return Oh(Ve,Xn(qe.path),Pt),Ve},{})),pe=e?.validationSchema;function be(Ve,qe){var Pt,Qt;const cn=Ct(()=>Jl(le.value,Xn(Ve))),dn=A.value[Xn(Ve)],Te=qe?.type==="checkbox"||qe?.type==="radio";if(dn&&Te){dn.multiple=!0;const xn=s++;return Array.isArray(dn.id)?dn.id.push(xn):dn.id=[dn.id,xn],dn.fieldsCount++,dn.__flags.pendingUnmount[xn]=!1,dn}const ye=Ct(()=>Jl(g,Xn(Ve))),We=Xn(Ve),ot=Ke.findIndex(xn=>xn===We);ot!==-1&&Ke.splice(ot,1);const At=Ct(()=>{var xn,Hn,Gn,cr;const yt=Xn(pe);if(Xu(yt))return(Hn=(xn=yt.describe)===null||xn===void 0?void 0:xn.call(yt,Xn(Ve)).required)!==null&&Hn!==void 0?Hn:!1;const ue=Xn(qe?.schema);return Xu(ue)&&(cr=(Gn=ue.describe)===null||Gn===void 0?void 0:Gn.call(ue).required)!==null&&cr!==void 0?cr:!1}),Vt=s++,an=Bo({id:Vt,path:Ve,touched:!1,pending:!1,valid:!0,validated:!!(!((Pt=J[We])===null||Pt===void 0)&&Pt.length),required:At,initialValue:cn,errors:mo([]),bails:(Qt=qe?.bails)!==null&&Qt!==void 0?Qt:!1,label:qe?.label,type:qe?.type||"default",value:ye,multiple:!1,__flags:{pendingUnmount:{[Vt]:!1},pendingReset:!1},fieldsCount:1,validate:qe?.validate,dirty:Ct(()=>!Al(fn(ye),fn(cn)))});return x.value.push(an),A.value[We]=an,C(),V.value[We]&&!J[We]&&es(()=>{ze(We,{mode:"silent"})}),Fi(Ve)&&Hr(Ve,xn=>{C();const Hn=ts(ye.value);A.value[xn]=an,es(()=>{Oh(g,xn,Hn)})}),an}const Se=Tq($e,5),Ce=Tq($e,5),Ee=B5(async Ve=>await(Ve==="silent"?Se():Ce()),(Ve,[qe])=>{const Pt=yc(mt.errorBag.value),cn=[...new Set([...yc(Ve.results),...x.value.map(dn=>dn.path),...Pt])].sort().reduce((dn,Te)=>{var ye;const We=Te,ot=ke(We)||He(We),At=((ye=Ve.results[We])===null||ye===void 0?void 0:ye.errors)||[],Vt=Xn(ot?.path)||We,an=mQe({errors:At,valid:!At.length},dn.results[Vt]);return dn.results[Vt]=an,an.valid||(dn.errors[Vt]=an.errors[0]),ot&&w.value[Vt]&&delete w.value[Vt],ot?(ot.valid=an.valid,qe==="silent"||qe==="validated-only"&&!ot.validated||F(ot,an.errors),dn):(F(Vt,At),dn)},{valid:Ve.valid,results:{},errors:{},source:Ve.source});return Ve.values&&(cn.values=Ve.values,cn.source=Ve.source),yc(cn.results).forEach(dn=>{var Te;const ye=ke(dn);ye&&qe!=="silent"&&(qe==="validated-only"&&!ye.validated||F(ye,(Te=cn.results[dn])===null||Te===void 0?void 0:Te.errors))}),cn});function xe(Ve){x.value.forEach(Ve)}function ke(Ve){const qe=typeof Ve=="string"?Bw(Ve):Ve;return typeof qe=="string"?A.value[qe]:qe}function He(Ve){return x.value.filter(Pt=>Ve.startsWith(Xn(Pt.path))).reduce((Pt,Qt)=>Pt?Qt.path.length>Pt.path.length?Qt:Pt:Qt,void 0)}let Ke=[],Ge;function $t(Ve){return Ke.push(Ve),Ge||(Ge=es(()=>{[...Ke].sort().reverse().forEach(Pt=>{Sq(g,Pt)}),Ke=[],Ge=null})),Ge}function Ft(Ve){return function(Pt,Qt){return function(dn){return dn instanceof Event&&(dn.preventDefault(),dn.stopPropagation()),xe(Te=>Te.touched=!0),o.value=!0,i.value++,Rt().then(Te=>{const ye=ts(g);if(Te.valid&&typeof Pt=="function"){const We=ts(ie.value);let ot=Ve?We:ye;return Te.values&&(ot=Te.source==="schema"?Te.values:Object.assign({},ot,Te.values)),Pt(ot,{evt:dn,controlledValues:We,setErrors:z,setFieldError:F,setTouched:It,setFieldTouched:On,setValues:_e,setFieldValue:Jt,resetForm:ut,resetField:ht})}!Te.valid&&typeof Qt=="function"&&Qt({values:ye,evt:dn,errors:Te.errors,results:Te.results})}).then(Te=>(o.value=!1,Te),Te=>{throw o.value=!1,Te})}}}const nn=Ft(!1);nn.withControlled=Ft(!0);function mn(Ve,qe){const Pt=x.value.findIndex(cn=>cn.path===Ve&&(Array.isArray(cn.id)?cn.id.includes(qe):cn.id===qe)),Qt=x.value[Pt];if(!(Pt===-1||!Qt)){if(es(()=>{ze(Ve,{mode:"silent",warn:!1})}),Qt.multiple&&Qt.fieldsCount&&Qt.fieldsCount--,Array.isArray(Qt.id)){const cn=Qt.id.indexOf(qe);cn>=0&&Qt.id.splice(cn,1),delete Qt.__flags.pendingUnmount[qe]}(!Qt.multiple||Qt.fieldsCount<=0)&&(x.value.splice(Pt,1),lt(Ve),C(),delete A.value[Ve])}}function Xt(Ve){yc(A.value).forEach(qe=>{qe.startsWith(Ve)&&delete A.value[qe]}),x.value=x.value.filter(qe=>!qe.path.startsWith(Ve)),es(()=>{C()})}const mt={name:r,formId:n,values:g,controlledValues:ie,errorBag:j,errors:V,schema:pe,submitCount:i,meta:se,isSubmitting:o,isValidating:c,fieldArrays:f,keepValuesOnUnmount:ee,validateSchema:fn(pe)?Ee:void 0,validate:Rt,setFieldError:F,validateField:ze,setFieldValue:Jt,setValues:_e,setErrors:z,setFieldTouched:On,setTouched:It,resetForm:ut,resetField:ht,handleSubmit:nn,useFieldModel:on,defineInputBinds:vn,defineComponentBinds:_t,defineField:tn,stageInitialValue:at,unsetInitialValue:lt,setFieldInitialValue:Et,createPathState:be,getPathState:ke,unsetPathValue:$t,removePathState:mn,initialValues:le,getAllPathStates:()=>x.value,destroyPath:Xt,isFieldTouched:je,isFieldDirty:ge,isFieldValid:nt};function Jt(Ve,qe,Pt=!0){const Qt=ts(qe),cn=typeof Ve=="string"?Ve:Ve.path;ke(cn)||be(cn),Oh(g,cn,Qt),Pt&&ze(cn)}function Kt(Ve,qe=!0){yc(g).forEach(Pt=>{delete g[Pt]}),yc(Ve).forEach(Pt=>{Jt(Pt,Ve[Pt],!1)}),qe&&Rt()}function _e(Ve,qe=!0){yS(g,Ve),f.forEach(Pt=>Pt&&Pt.reset()),qe&&Rt()}function bn(Ve,qe){const Pt=ke(Xn(Ve))||be(Ve);return Ct({get(){return Pt.value},set(Qt){var cn;const dn=Xn(Ve);Jt(dn,Qt,(cn=Xn(qe))!==null&&cn!==void 0?cn:!1)}})}function On(Ve,qe){const Pt=ke(Ve);Pt&&(Pt.touched=qe)}function je(Ve){const qe=ke(Ve);return qe?qe.touched:x.value.filter(Pt=>Pt.path.startsWith(Ve)).some(Pt=>Pt.touched)}function ge(Ve){const qe=ke(Ve);return qe?qe.dirty:x.value.filter(Pt=>Pt.path.startsWith(Ve)).some(Pt=>Pt.dirty)}function nt(Ve){const qe=ke(Ve);return qe?qe.valid:x.value.filter(Pt=>Pt.path.startsWith(Ve)).every(Pt=>Pt.valid)}function It(Ve){if(typeof Ve=="boolean"){xe(qe=>{qe.touched=Ve});return}yc(Ve).forEach(qe=>{On(qe,!!Ve[qe])})}function ht(Ve,qe){var Pt;const Qt=qe&&"value"in qe?qe.value:Jl(le.value,Ve),cn=ke(Ve);cn&&(cn.__flags.pendingReset=!0),Et(Ve,ts(Qt),!0),Jt(Ve,Qt,!1),On(Ve,(Pt=qe?.touched)!==null&&Pt!==void 0?Pt:!1),F(Ve,qe?.errors||[]),es(()=>{cn&&(cn.__flags.pendingReset=!1)})}function ut(Ve,qe){let Pt=ts(Ve?.values?Ve.values:oe.value);Pt=qe?.force?Pt:yS(oe.value,Pt),Pt=Xu(pe)&&sa(pe.cast)?pe.cast(Pt):Pt,ve(Pt,{force:qe?.force}),xe(Qt=>{var cn;Qt.__flags.pendingReset=!0,Qt.validated=!1,Qt.touched=((cn=Ve?.touched)===null||cn===void 0?void 0:cn[Xn(Qt.path)])||!1,Jt(Xn(Qt.path),Jl(Pt,Xn(Qt.path)),!1),F(Xn(Qt.path),void 0)}),qe?.force?Kt(Pt,!1):_e(Pt,!1),z(Ve?.errors||{}),i.value=Ve?.submitCount||0,es(()=>{Rt({mode:"silent"}),xe(Qt=>{Qt.__flags.pendingReset=!1})})}async function Rt(Ve){const qe=Ve?.mode||"force";if(qe==="force"&&xe(Te=>Te.validated=!0),mt.validateSchema)return mt.validateSchema(qe);c.value=!0;const Pt=await Promise.all(x.value.map(Te=>Te.validate?Te.validate(Ve).then(ye=>({key:Xn(Te.path),valid:ye.valid,errors:ye.errors,value:ye.value})):Promise.resolve({key:Xn(Te.path),valid:!0,errors:[],value:void 0})));c.value=!1;const Qt={},cn={},dn={};for(const Te of Pt)Qt[Te.key]={valid:Te.valid,errors:Te.errors},Te.value&&Oh(dn,Te.key,Te.value),Te.errors.length&&(cn[Te.key]=Te.errors[0]);return{valid:Pt.every(Te=>Te.valid),results:Qt,errors:cn,values:dn,source:"fields"}}async function ze(Ve,qe){var Pt;const Qt=ke(Ve);if(Qt&&qe?.mode!=="silent"&&(Qt.validated=!0),pe){const{results:cn}=await Ee(qe?.mode||"validated-only");return cn[Ve]||{errors:[],valid:!0}}return Qt?.validate?Qt.validate(qe):(!Qt&&(Pt=qe?.warn),Promise.resolve({errors:[],valid:!0}))}function lt(Ve){Sq(le.value,Ve)}function at(Ve,qe,Pt=!1){Et(Ve,qe),Oh(g,Ve,qe),Pt&&!e?.initialValues&&Oh(oe.value,Ve,ts(qe))}function Et(Ve,qe,Pt=!1){Oh(le.value,Ve,ts(qe)),Pt&&Oh(oe.value,Ve,ts(qe))}async function $e(){const Ve=fn(pe);if(!Ve)return{valid:!0,results:{},errors:{},source:"none"};c.value=!0;const qe=n3(Ve)||Xu(Ve)?await KJe(Ve,g):await JJe(Ve,g,{names:Y.value,bailsMap:te.value});return c.value=!1,qe}const Mt=nn((Ve,{evt:qe})=>{hae(qe)&&qe.target.submit()});ua(()=>{if(e?.initialErrors&&z(e.initialErrors),e?.initialTouched&&It(e.initialTouched),e?.validateOnMount){Rt();return}mt.validateSchema&&mt.validateSchema("silent")}),Fi(pe)&&Hr(pe,()=>{var Ve;(Ve=mt.validateSchema)===null||Ve===void 0||Ve.call(mt,"validated-only")}),Ko(Bz,mt);function tn(Ve,qe){const Pt=sa(qe)?void 0:qe?.label,Qt=ke(Xn(Ve))||be(Ve,{label:Pt}),cn=()=>sa(qe)?qe(yA(Qt,vA)):qe||{};function dn(){var At;Qt.touched=!0,((At=cn().validateOnBlur)!==null&&At!==void 0?At:M_().validateOnBlur)&&ze(Xn(Qt.path))}function Te(){var At;((At=cn().validateOnInput)!==null&&At!==void 0?At:M_().validateOnInput)&&es(()=>{ze(Xn(Qt.path))})}function ye(){var At;((At=cn().validateOnChange)!==null&&At!==void 0?At:M_().validateOnChange)&&es(()=>{ze(Xn(Qt.path))})}const We=Ct(()=>{const At={onChange:ye,onInput:Te,onBlur:dn};return sa(qe)?Object.assign(Object.assign({},At),qe(yA(Qt,vA)).props||{}):qe?.props?Object.assign(Object.assign({},At),qe.props(yA(Qt,vA))):At});return[bn(Ve,()=>{var At,Vt,an;return(an=(At=cn().validateOnModelUpdate)!==null&&At!==void 0?At:(Vt=M_())===null||Vt===void 0?void 0:Vt.validateOnModelUpdate)!==null&&an!==void 0?an:!0}),We]}function on(Ve){return Array.isArray(Ve)?Ve.map(qe=>bn(qe,!0)):bn(Ve)}function vn(Ve,qe){const[Pt,Qt]=tn(Ve,qe);function cn(){Qt.value.onBlur()}function dn(ye){const We=r3(ye);Jt(Xn(Ve),We,!1),Qt.value.onInput()}function Te(ye){const We=r3(ye);Jt(Xn(Ve),We,!1),Qt.value.onChange()}return Ct(()=>Object.assign(Object.assign({},Qt.value),{onBlur:cn,onInput:dn,onChange:Te,value:Pt.value}))}function _t(Ve,qe){const[Pt,Qt]=tn(Ve,qe),cn=ke(Xn(Ve));function dn(Te){Pt.value=Te}return Ct(()=>{const Te=sa(qe)?qe(yA(cn,vA)):qe||{};return Object.assign({[Te.model||"modelValue"]:Pt.value,[`onUpdate:${Te.model||"modelValue"}`]:dn},Qt.value)})}const wt=Object.assign(Object.assign({},mt),{values:q_(g),handleReset:()=>ut(),submitForm:Mt});return Ko(CJe,wt),wt}function fQe(e,t,n,r){const s={touched:"some",pending:"some",valid:"every"},o=Ct(()=>!Al(t,fn(n)));function c(){const f=e.value;return yc(s).reduce((g,x)=>{const w=s[x];return g[x]=f[w](A=>A[x]),g},{})}const i=Bo(c());return yy(()=>{const f=c();i.touched=f.touched,i.valid=f.valid,i.pending=f.pending}),Ct(()=>Object.assign(Object.assign({initialValues:fn(n)},i),{valid:i.valid&&!yc(r.value).length,dirty:o.value}))}function pQe(e,t,n){const r=xae(n),s=yr(r),o=yr(ts(r));function c(i,f){f?.force?(s.value=ts(i),o.value=ts(i)):(s.value=yS(ts(s.value)||{},ts(i)),o.value=yS(ts(o.value)||{},ts(i))),f?.updateFields&&e.value.forEach(g=>{if(g.touched)return;const w=Jl(s.value,Xn(g.path));Oh(t,Xn(g.path),ts(w))})}return{initialValues:s,originalInitialValues:o,setInitialValues:c}}function mQe(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}const gQe=ki({name:"Form",inheritAttrs:!1,props:{as:{type:null,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1},name:{type:String,default:"Form"}},setup(e,t){const n=vl(e,"validationSchema"),r=vl(e,"keepValues"),{errors:s,errorBag:o,values:c,meta:i,isSubmitting:f,isValidating:g,submitCount:x,controlledValues:w,validate:A,validateField:C,handleReset:F,resetForm:z,handleSubmit:j,setErrors:V,setFieldError:Y,setFieldValue:te,setValues:J,setFieldTouched:ee,setTouched:le,resetField:oe}=hQe({validationSchema:n.value?n:void 0,initialValues:e.initialValues,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:r,name:e.name}),ve=j((xe,{evt:ke})=>{hae(ke)&&ke.target.submit()},e.onInvalidSubmit),se=e.onSubmit?j(e.onSubmit,e.onInvalidSubmit):ve;function ie(xe){$z(xe)&&xe.preventDefault(),F(),typeof t.attrs.onReset=="function"&&t.attrs.onReset()}function pe(xe,ke){return j(typeof xe=="function"&&!ke?xe:ke,e.onInvalidSubmit)(xe)}function be(){return ts(c)}function Se(){return ts(i.value)}function Ce(){return ts(s.value)}function Ee(){return{meta:i.value,errors:s.value,errorBag:o.value,values:c,isSubmitting:f.value,isValidating:g.value,submitCount:x.value,controlledValues:w.value,validate:A,validateField:C,handleSubmit:pe,handleReset:F,submitForm:ve,setErrors:V,setFieldError:Y,setFieldValue:te,setValues:J,setFieldTouched:ee,setTouched:le,resetForm:z,resetField:oe,getValues:be,getMeta:Se,getErrors:Ce}}return t.expose({setFieldError:Y,setErrors:V,setFieldValue:te,setValues:J,setFieldTouched:ee,setTouched:le,resetForm:z,validate:A,validateField:C,resetField:oe,getValues:be,getMeta:Se,getErrors:Ce,values:c,meta:i,errors:s}),function(){const ke=e.as==="form"?e.as:e.as?P1(e.as):null,He=pae(ke,t,Ee);return ke?Hs(ke,Object.assign(Object.assign(Object.assign({},ke==="form"?{novalidate:!0}:{}),t.attrs),{onSubmit:se,onReset:ie}),He):He}}}),Jut=gQe;/**
  * vee-validate v4.15.0
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function Iq(e){return typeof e=="function"}function _Qe(e){return typeof e=="object"&&e!==null}function yQe(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function Pq(e){if(!_Qe(e)||yQe(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function wae(e,t){return Object.keys(t).forEach(n=>{if(Pq(t[n])&&Pq(e[n])){e[n]||(e[n]={}),wae(e[n],t[n]);return}e[n]=t[n]}),e}function Oq(e,t,n){const{prefix:r,suffix:s}=n,o=vQe(r,s);return e.replace(o,function(c,i,f){if(!i||!t.params)return f in t?t[f]:t.params&&f in t.params?t.params[f]:`${r}${f}${s}`;if(!Array.isArray(t.params))return f in t.params?t.params[f]:`${r}${f}${s}`;const g=Number(i.replace(":",""));return g in t.params?t.params[g]:`${i}${r}${f}${s}`})}function Dq(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function vQe(e,t){const n=Dq(e),r=Dq(t);return new RegExp(`([0-9]:)?${n}((?:(?!${r}).)+)${r}`,"g")}class bQe{constructor(t,n,r={prefix:"{",suffix:"}"}){this.container={},this.locale=t,this.interpolateOptions=r,this.merge(n)}resolve(t,n){let r=this.format(this.locale,t,n);return!r&&this.fallbackLocale&&this.fallbackLocale!==this.locale&&(r=this.format(this.fallbackLocale,t,n)),r||this.getDefaultMessage(this.locale,t)}getDefaultMessage(t,n){const{label:r,name:s}=n;return`${this.resolveLabel(t,s,r)} is not valid`}getLocaleDefault(t,n){var r,s,o,c,i;return((o=(s=(r=this.container[t])===null||r===void 0?void 0:r.fields)===null||s===void 0?void 0:s[n])===null||o===void 0?void 0:o._default)||((i=(c=this.container[t])===null||c===void 0?void 0:c.messages)===null||i===void 0?void 0:i._default)}resolveLabel(t,n,r){var s,o,c,i;return r?((o=(s=this.container[t])===null||s===void 0?void 0:s.names)===null||o===void 0?void 0:o[r])||r:((i=(c=this.container[t])===null||c===void 0?void 0:c.names)===null||i===void 0?void 0:i[n])||n}format(t,n,r){var s,o,c,i,f;let g;const{rule:x,form:w,label:A,name:C}=n,F=this.resolveLabel(t,C,A);return x?(g=((c=(o=(s=this.container[t])===null||s===void 0?void 0:s.fields)===null||o===void 0?void 0:o[C])===null||c===void 0?void 0:c[x.name])||((f=(i=this.container[t])===null||i===void 0?void 0:i.messages)===null||f===void 0?void 0:f[x.name]),g||(g=this.getLocaleDefault(t,C)||""),Iq(g)?g(n):Oq(g,Object.assign(Object.assign({},w),{field:F,params:x.params}),r??this.interpolateOptions)):(g=this.getLocaleDefault(t,C)||"",Iq(g)?g(n):Oq(g,Object.assign(Object.assign({},w),{field:F}),r??this.interpolateOptions))}merge(t){wae(this.container,t)}}const YR=new bQe("en",{});function xQe(e,t,n){const r=s=>YR.resolve(s,n);return typeof e=="string"?(YR.locale=e,r):(YR.merge(e),r)}/**
  * vee-validate v4.15.0
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function wQe(e,t){return Array.isArray(e)?e[0]:e[t]}function Sae(e){return!!(e==null||e===""||Array.isArray(e)&&e.length===0)}const Rq=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,SQe=e=>Sae(e)?!0:Array.isArray(e)?e.every(t=>Rq.test(String(t))):Rq.test(String(e)),Eae=(e,t)=>{if(Sae(e))return!0;const n=wQe(t,"length");return Array.isArray(e)?e.every(r=>Eae(r,{length:n})):[...String(e)].length>=Number(n)};function EQe(e){return e==null}function TQe(e){return Array.isArray(e)&&e.length===0}const MQe=e=>EQe(e)||TQe(e)||e===!1?!1:!!String(e).trim().length,AQe="en",CQe={_default:"The {field} is not valid",alpha:"The {field} field may only contain alphabetic characters",alpha_num:"The {field} field may only contain alpha-numeric characters",alpha_dash:"The {field} field may contain alpha-numeric characters as well as dashes and underscores",alpha_spaces:"The {field} field may only contain alphabetic characters as well as spaces",between:"The {field} field must be between 0:{min} and 1:{max}",confirmed:"The {field} field confirmation does not match",digits:"The {field} field must be numeric and exactly contain 0:{length} digits",dimensions:"The {field} field must be 0:{width} pixels by 1:{height} pixels",email:"The {field} field must be a valid email",not_one_of:"The {field} field is not a valid value",ext:"The {field} field is not a valid file",image:"The {field} field must be an image",integer:"The {field} field must be an integer",length:"The {field} field must be 0:{length} long",max_value:"The {field} field must be 0:{max} or less",max:"The {field} field may not be greater than 0:{length} characters",mimes:"The {field} field must have a valid file type",min_value:"The {field} field must be 0:{min} or more",min:"The {field} field must be at least 0:{length} characters",numeric:"The {field} field may only contain numeric characters",one_of:"The {field} field is not a valid value",regex:"The {field} field format is invalid",required_if:"The {field} field is required",required:"The {field} field is required",size:"The {field} field size must be less than 0:{size}KB",url:"The {field} field is not a valid URL"},IQe={code:AQe,messages:CQe},PQe=xs(()=>{HR("required",MQe),HR("email",e=>SQe(e)?!0:"That doesn't look like a valid email address."),HR("min",Eae),WJe({generateMessage:xQe({en:IQe})})});var SC={exports:{}},qR={exports:{}},XR={};/**
* @vue/compiler-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const x1=Symbol(""),L0=Symbol(""),ZP=Symbol(""),vS=Symbol(""),jz=Symbol(""),Um=Symbol(""),Uz=Symbol(""),Hz=Symbol(""),KP=Symbol(""),JP=Symbol(""),K1=Symbol(""),QP=Symbol(""),Wz=Symbol(""),eO=Symbol(""),tO=Symbol(""),nO=Symbol(""),rO=Symbol(""),iO=Symbol(""),sO=Symbol(""),Gz=Symbol(""),Yz=Symbol(""),oE=Symbol(""),bS=Symbol(""),oO=Symbol(""),aO=Symbol(""),w1=Symbol(""),J1=Symbol(""),lO=Symbol(""),i3=Symbol(""),Tae=Symbol(""),s3=Symbol(""),xS=Symbol(""),Mae=Symbol(""),Aae=Symbol(""),cO=Symbol(""),Cae=Symbol(""),Iae=Symbol(""),uO=Symbol(""),qz=Symbol(""),ly={[x1]:"Fragment",[L0]:"Teleport",[ZP]:"Suspense",[vS]:"KeepAlive",[jz]:"BaseTransition",[Um]:"openBlock",[Uz]:"createBlock",[Hz]:"createElementBlock",[KP]:"createVNode",[JP]:"createElementVNode",[K1]:"createCommentVNode",[QP]:"createTextVNode",[Wz]:"createStaticVNode",[eO]:"resolveComponent",[tO]:"resolveDynamicComponent",[nO]:"resolveDirective",[rO]:"resolveFilter",[iO]:"withDirectives",[sO]:"renderList",[Gz]:"renderSlot",[Yz]:"createSlots",[oE]:"toDisplayString",[bS]:"mergeProps",[oO]:"normalizeClass",[aO]:"normalizeStyle",[w1]:"normalizeProps",[J1]:"guardReactiveProps",[lO]:"toHandlers",[i3]:"camelize",[Tae]:"capitalize",[s3]:"toHandlerKey",[xS]:"setBlockTracking",[Mae]:"pushScopeId",[Aae]:"popScopeId",[cO]:"withCtx",[Cae]:"unref",[Iae]:"isRef",[uO]:"withMemo",[qz]:"isMemoSame"};function Pae(e){Object.getOwnPropertySymbols(e).forEach(t=>{ly[t]=e[t]})}const OQe={HTML:0,0:"HTML",SVG:1,1:"SVG",MATH_ML:2,2:"MATH_ML"},DQe={ROOT:0,0:"ROOT",ELEMENT:1,1:"ELEMENT",TEXT:2,2:"TEXT",COMMENT:3,3:"COMMENT",SIMPLE_EXPRESSION:4,4:"SIMPLE_EXPRESSION",INTERPOLATION:5,5:"INTERPOLATION",ATTRIBUTE:6,6:"ATTRIBUTE",DIRECTIVE:7,7:"DIRECTIVE",COMPOUND_EXPRESSION:8,8:"COMPOUND_EXPRESSION",IF:9,9:"IF",IF_BRANCH:10,10:"IF_BRANCH",FOR:11,11:"FOR",TEXT_CALL:12,12:"TEXT_CALL",VNODE_CALL:13,13:"VNODE_CALL",JS_CALL_EXPRESSION:14,14:"JS_CALL_EXPRESSION",JS_OBJECT_EXPRESSION:15,15:"JS_OBJECT_EXPRESSION",JS_PROPERTY:16,16:"JS_PROPERTY",JS_ARRAY_EXPRESSION:17,17:"JS_ARRAY_EXPRESSION",JS_FUNCTION_EXPRESSION:18,18:"JS_FUNCTION_EXPRESSION",JS_CONDITIONAL_EXPRESSION:19,19:"JS_CONDITIONAL_EXPRESSION",JS_CACHE_EXPRESSION:20,20:"JS_CACHE_EXPRESSION",JS_BLOCK_STATEMENT:21,21:"JS_BLOCK_STATEMENT",JS_TEMPLATE_LITERAL:22,22:"JS_TEMPLATE_LITERAL",JS_IF_STATEMENT:23,23:"JS_IF_STATEMENT",JS_ASSIGNMENT_EXPRESSION:24,24:"JS_ASSIGNMENT_EXPRESSION",JS_SEQUENCE_EXPRESSION:25,25:"JS_SEQUENCE_EXPRESSION",JS_RETURN_STATEMENT:26,26:"JS_RETURN_STATEMENT"},RQe={ELEMENT:0,0:"ELEMENT",COMPONENT:1,1:"COMPONENT",SLOT:2,2:"SLOT",TEMPLATE:3,3:"TEMPLATE"},kQe={NOT_CONSTANT:0,0:"NOT_CONSTANT",CAN_SKIP_PATCH:1,1:"CAN_SKIP_PATCH",CAN_CACHE:2,2:"CAN_CACHE",CAN_STRINGIFY:3,3:"CAN_STRINGIFY"},ea={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function Oae(e,t=""){return{type:0,source:t,children:e,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:ea}}function S1(e,t,n,r,s,o,c,i=!1,f=!1,g=!1,x=ea){return e&&(i?(e.helper(Um),e.helper(dy(e.inSSR,g))):e.helper(uy(e.inSSR,g)),c&&e.helper(iO)),{type:13,tag:t,props:n,children:r,patchFlag:s,dynamicProps:o,directives:c,isBlock:i,disableTracking:f,isComponent:g,loc:x}}function Om(e,t=ea){return{type:17,loc:t,elements:e}}function Sc(e,t=ea){return{type:15,loc:t,properties:e}}function Ao(e,t){return{type:16,loc:ea,key:Kr(e)?ui(e,!0):e,value:t}}function ui(e,t=!1,n=ea,r=0){return{type:4,loc:n,content:e,isStatic:t,constType:t?3:r}}function LQe(e,t){return{type:5,loc:t,content:Kr(e)?ui(e,!1,t):e}}function Qc(e,t=ea){return{type:8,loc:t,children:e}}function zo(e,t=[],n=ea){return{type:14,loc:n,callee:e,arguments:t}}function cy(e,t=void 0,n=!1,r=!1,s=ea){return{type:18,params:e,returns:t,newline:n,isSlot:r,loc:s}}function o3(e,t,n,r=!0){return{type:19,test:e,consequent:t,alternate:n,newline:r,loc:ea}}function Dae(e,t,n=!1,r=!1){return{type:20,index:e,value:t,needPauseTracking:n,inVOnce:r,needArraySpread:!1,loc:ea}}function Rae(e){return{type:21,body:e,loc:ea}}function NQe(e){return{type:22,elements:e,loc:ea}}function FQe(e,t,n){return{type:23,test:e,consequent:t,alternate:n,loc:ea}}function zQe(e,t){return{type:24,left:e,right:t,loc:ea}}function BQe(e){return{type:25,expressions:e,loc:ea}}function $Qe(e){return{type:26,returns:e,loc:ea}}function uy(e,t){return e||t?KP:JP}function dy(e,t){return e||t?Uz:Hz}function dO(e,{helper:t,removeHelper:n,inSSR:r}){e.isBlock||(e.isBlock=!0,n(uy(r,e.isComponent)),t(Um),t(dy(r,e.isComponent)))}const kq=new Uint8Array([123,123]),Lq=new Uint8Array([125,125]);function Nq(e){return e>=97&&e<=122||e>=65&&e<=90}function vc(e){return e===32||e===10||e===9||e===12||e===13}function Np(e){return e===47||e===62||vc(e)}function a3(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}const ka={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class VQe{constructor(t,n){this.stack=t,this.cbs=n,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=kq,this.delimiterClose=Lq,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=kq,this.delimiterClose=Lq}getPos(t){let n=1,r=t+1;for(let s=this.newlines.length-1;s>=0;s--){const o=this.newlines[s];if(t>o){n=s+2,r=t-o;break}}return{column:r,line:n,offset:t}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(t){t===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&t===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(t))}stateInterpolationOpen(t){if(t===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const n=this.index+1-this.delimiterOpen.length;n>this.sectionStart&&this.cbs.ontext(this.sectionStart,n),this.state=3,this.sectionStart=n}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(t)):(this.state=1,this.stateText(t))}stateInterpolation(t){t===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(t))}stateInterpolationClose(t){t===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(t))}stateSpecialStartSequence(t){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?Np(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(t)}stateInRCDATA(t){if(this.sequenceIndex===this.currentSequence.length){if(t===62||vc(t)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const r=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=r}this.sectionStart=n+2,this.stateInClosingTagName(t),this.inRCDATA=!1;return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===ka.TitleEnd||this.currentSequence===ka.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&t===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(t)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===60)}stateCDATASequence(t){t===ka.Cdata[this.sequenceIndex]?++this.sequenceIndex===ka.Cdata.length&&(this.state=28,this.currentSequence=ka.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length;){const n=this.buffer.charCodeAt(this.index);if(n===10&&this.newlines.push(this.index),n===t)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===ka.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(t,n){this.enterRCDATA(t,n),this.state=31}enterRCDATA(t,n){this.inRCDATA=!0,this.currentSequence=t,this.sequenceIndex=n}stateBeforeTagName(t){t===33?(this.state=22,this.sectionStart=this.index+1):t===63?(this.state=24,this.sectionStart=this.index+1):Nq(t)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:t===116?this.state=30:this.state=t===115?29:6):t===47?this.state=8:(this.state=1,this.stateText(t))}stateInTagName(t){Np(t)&&this.handleTagName(t)}stateInSFCRootTagName(t){if(Np(t)){const n=this.buffer.slice(this.sectionStart,this.index);n!=="template"&&this.enterRCDATA(a3("</"+n),0),this.handleTagName(t)}}handleTagName(t){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(t)}stateBeforeClosingTagName(t){vc(t)||(t===62?(this.state=1,this.sectionStart=this.index+1):(this.state=Nq(t)?9:27,this.sectionStart=this.index))}stateInClosingTagName(t){(t===62||vc(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){t===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(t){t===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):t===47?this.state=7:t===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):vc(t)||this.handleAttrStart(t)}handleAttrStart(t){t===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):t===46||t===58||t===64||t===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):vc(t)||(this.state=11,this.stateBeforeAttrName(t))}stateInAttrName(t){(t===61||Np(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(t))}stateInDirName(t){t===61||Np(t)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):t===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(t){t===61||Np(t)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===91?this.state=15:t===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(t){t===93?this.state=14:(t===61||Np(t))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(t))}stateInDirModifier(t){t===61||Np(t)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(t){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(t)}stateAfterAttrName(t){t===61?this.state=18:t===47||t===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(t)):vc(t)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(t))}stateBeforeAttrValue(t){t===34?(this.state=19,this.sectionStart=this.index+1):t===39?(this.state=20,this.sectionStart=this.index+1):vc(t)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(t))}handleInAttrValue(t,n){(t===n||this.fastForwardTo(n))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(t){this.handleInAttrValue(t,34)}stateInAttrValueSingleQuotes(t){this.handleInAttrValue(t,39)}stateInAttrValueNoQuotes(t){vc(t)||t===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(t)):(t===39||t===60||t===61||t===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(t){t===91?(this.state=26,this.sequenceIndex=0):this.state=t===45?25:23}stateInDeclaration(t){(t===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(t){t===45?(this.state=28,this.currentSequence=ka.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(t){(t===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){t===ka.ScriptEnd[3]?this.startSpecial(ka.ScriptEnd,4):t===ka.StyleEnd[3]?this.startSpecial(ka.StyleEnd,4):(this.state=6,this.stateInTagName(t))}stateBeforeSpecialT(t){t===ka.TitleEnd[3]?this.startSpecial(ka.TitleEnd,4):t===ka.TextareaEnd[3]?this.startSpecial(ka.TextareaEnd,4):(this.state=6,this.stateInTagName(t))}startEntity(){}stateInEntity(){}parse(t){for(this.buffer=t;this.index<this.buffer.length;){const n=this.buffer.charCodeAt(this.index);switch(n===10&&this.state!==33&&this.newlines.push(this.index),this.state){case 1:{this.stateText(n);break}case 2:{this.stateInterpolationOpen(n);break}case 3:{this.stateInterpolation(n);break}case 4:{this.stateInterpolationClose(n);break}case 31:{this.stateSpecialStartSequence(n);break}case 32:{this.stateInRCDATA(n);break}case 26:{this.stateCDATASequence(n);break}case 19:{this.stateInAttrValueDoubleQuotes(n);break}case 12:{this.stateInAttrName(n);break}case 13:{this.stateInDirName(n);break}case 14:{this.stateInDirArg(n);break}case 15:{this.stateInDynamicDirArg(n);break}case 16:{this.stateInDirModifier(n);break}case 28:{this.stateInCommentLike(n);break}case 27:{this.stateInSpecialComment(n);break}case 11:{this.stateBeforeAttrName(n);break}case 6:{this.stateInTagName(n);break}case 34:{this.stateInSFCRootTagName(n);break}case 9:{this.stateInClosingTagName(n);break}case 5:{this.stateBeforeTagName(n);break}case 17:{this.stateAfterAttrName(n);break}case 20:{this.stateInAttrValueSingleQuotes(n);break}case 18:{this.stateBeforeAttrValue(n);break}case 8:{this.stateBeforeClosingTagName(n);break}case 10:{this.stateAfterClosingTagName(n);break}case 29:{this.stateBeforeSpecialS(n);break}case 30:{this.stateBeforeSpecialT(n);break}case 21:{this.stateInAttrValueNoQuotes(n);break}case 7:{this.stateInSelfClosingTag(n);break}case 23:{this.stateInDeclaration(n);break}case 22:{this.stateBeforeDeclaration(n);break}case 25:{this.stateBeforeComment(n);break}case 24:{this.stateInProcessingInstruction(n);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length;this.sectionStart>=t||(this.state===28?this.currentSequence===ka.CdataEnd?this.cbs.oncdata(this.sectionStart,t):this.cbs.oncomment(this.sectionStart,t):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,t))}emitCodePoint(t,n){}}const jQe={COMPILER_IS_ON_ELEMENT:"COMPILER_IS_ON_ELEMENT",COMPILER_V_BIND_SYNC:"COMPILER_V_BIND_SYNC",COMPILER_V_BIND_OBJECT_ORDER:"COMPILER_V_BIND_OBJECT_ORDER",COMPILER_V_ON_NATIVE:"COMPILER_V_ON_NATIVE",COMPILER_V_IF_V_FOR_PRECEDENCE:"COMPILER_V_IF_V_FOR_PRECEDENCE",COMPILER_NATIVE_TEMPLATE:"COMPILER_NATIVE_TEMPLATE",COMPILER_INLINE_TEMPLATE:"COMPILER_INLINE_TEMPLATE",COMPILER_FILTERS:"COMPILER_FILTERS"},UQe={COMPILER_IS_ON_ELEMENT:{message:'Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".',link:"https://v3-migration.vuejs.org/breaking-changes/custom-elements-interop.html"},COMPILER_V_BIND_SYNC:{message:e=>`.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${e}.sync\` should be changed to \`v-model:${e}\`.`,link:"https://v3-migration.vuejs.org/breaking-changes/v-model.html"},COMPILER_V_BIND_OBJECT_ORDER:{message:'v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.',link:"https://v3-migration.vuejs.org/breaking-changes/v-bind.html"},COMPILER_V_ON_NATIVE:{message:".native modifier for v-on has been removed as is no longer necessary.",link:"https://v3-migration.vuejs.org/breaking-changes/v-on-native-modifier-removed.html"},COMPILER_V_IF_V_FOR_PRECEDENCE:{message:"v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.",link:"https://v3-migration.vuejs.org/breaking-changes/v-if-v-for.html"},COMPILER_NATIVE_TEMPLATE:{message:"<template> with no special directives will render as a native template element instead of its inner content in Vue 3."},COMPILER_INLINE_TEMPLATE:{message:'"inline-template" has been removed in Vue 3.',link:"https://v3-migration.vuejs.org/breaking-changes/inline-template-attribute.html"},COMPILER_FILTERS:{message:'filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.',link:"https://v3-migration.vuejs.org/breaking-changes/filters.html"}};function U5(e,{compatConfig:t}){const n=t&&t[e];return e==="MODE"?n||3:n}function W_(e,t){const n=U5("MODE",t),r=U5(e,t);return n===3?r===!0:r!==!1}function E1(e,t,n,...r){return W_(e,t)}function HQe(e,t,n,...r){if(U5(e,t)==="suppress-warning")return;const{message:o,link:c}=UQe[e],i=`(deprecation ${e}) ${typeof o=="function"?o(...r):o}${c?`
  Details: ${c}`:""}`,f=new SyntaxError(i);f.code=e,n&&(f.loc=n),t.onWarn(f)}function Xz(e){throw e}function kae(e){}function Ns(e,t,n,r){const s=`https://vuejs.org/error-reference/#compiler-${e}`,o=new SyntaxError(String(s));return o.code=e,o.loc=t,o}const WQe={ABRUPT_CLOSING_OF_EMPTY_COMMENT:0,0:"ABRUPT_CLOSING_OF_EMPTY_COMMENT",CDATA_IN_HTML_CONTENT:1,1:"CDATA_IN_HTML_CONTENT",DUPLICATE_ATTRIBUTE:2,2:"DUPLICATE_ATTRIBUTE",END_TAG_WITH_ATTRIBUTES:3,3:"END_TAG_WITH_ATTRIBUTES",END_TAG_WITH_TRAILING_SOLIDUS:4,4:"END_TAG_WITH_TRAILING_SOLIDUS",EOF_BEFORE_TAG_NAME:5,5:"EOF_BEFORE_TAG_NAME",EOF_IN_CDATA:6,6:"EOF_IN_CDATA",EOF_IN_COMMENT:7,7:"EOF_IN_COMMENT",EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT:8,8:"EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT",EOF_IN_TAG:9,9:"EOF_IN_TAG",INCORRECTLY_CLOSED_COMMENT:10,10:"INCORRECTLY_CLOSED_COMMENT",INCORRECTLY_OPENED_COMMENT:11,11:"INCORRECTLY_OPENED_COMMENT",INVALID_FIRST_CHARACTER_OF_TAG_NAME:12,12:"INVALID_FIRST_CHARACTER_OF_TAG_NAME",MISSING_ATTRIBUTE_VALUE:13,13:"MISSING_ATTRIBUTE_VALUE",MISSING_END_TAG_NAME:14,14:"MISSING_END_TAG_NAME",MISSING_WHITESPACE_BETWEEN_ATTRIBUTES:15,15:"MISSING_WHITESPACE_BETWEEN_ATTRIBUTES",NESTED_COMMENT:16,16:"NESTED_COMMENT",UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME:17,17:"UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME",UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE:18,18:"UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE",UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME:19,19:"UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME",UNEXPECTED_NULL_CHARACTER:20,20:"UNEXPECTED_NULL_CHARACTER",UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME:21,21:"UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME",UNEXPECTED_SOLIDUS_IN_TAG:22,22:"UNEXPECTED_SOLIDUS_IN_TAG",X_INVALID_END_TAG:23,23:"X_INVALID_END_TAG",X_MISSING_END_TAG:24,24:"X_MISSING_END_TAG",X_MISSING_INTERPOLATION_END:25,25:"X_MISSING_INTERPOLATION_END",X_MISSING_DIRECTIVE_NAME:26,26:"X_MISSING_DIRECTIVE_NAME",X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END:27,27:"X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END",X_V_IF_NO_EXPRESSION:28,28:"X_V_IF_NO_EXPRESSION",X_V_IF_SAME_KEY:29,29:"X_V_IF_SAME_KEY",X_V_ELSE_NO_ADJACENT_IF:30,30:"X_V_ELSE_NO_ADJACENT_IF",X_V_FOR_NO_EXPRESSION:31,31:"X_V_FOR_NO_EXPRESSION",X_V_FOR_MALFORMED_EXPRESSION:32,32:"X_V_FOR_MALFORMED_EXPRESSION",X_V_FOR_TEMPLATE_KEY_PLACEMENT:33,33:"X_V_FOR_TEMPLATE_KEY_PLACEMENT",X_V_BIND_NO_EXPRESSION:34,34:"X_V_BIND_NO_EXPRESSION",X_V_ON_NO_EXPRESSION:35,35:"X_V_ON_NO_EXPRESSION",X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET:36,36:"X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET",X_V_SLOT_MIXED_SLOT_USAGE:37,37:"X_V_SLOT_MIXED_SLOT_USAGE",X_V_SLOT_DUPLICATE_SLOT_NAMES:38,38:"X_V_SLOT_DUPLICATE_SLOT_NAMES",X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN:39,39:"X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN",X_V_SLOT_MISPLACED:40,40:"X_V_SLOT_MISPLACED",X_V_MODEL_NO_EXPRESSION:41,41:"X_V_MODEL_NO_EXPRESSION",X_V_MODEL_MALFORMED_EXPRESSION:42,42:"X_V_MODEL_MALFORMED_EXPRESSION",X_V_MODEL_ON_SCOPE_VARIABLE:43,43:"X_V_MODEL_ON_SCOPE_VARIABLE",X_V_MODEL_ON_PROPS:44,44:"X_V_MODEL_ON_PROPS",X_INVALID_EXPRESSION:45,45:"X_INVALID_EXPRESSION",X_KEEP_ALIVE_INVALID_CHILDREN:46,46:"X_KEEP_ALIVE_INVALID_CHILDREN",X_PREFIX_ID_NOT_SUPPORTED:47,47:"X_PREFIX_ID_NOT_SUPPORTED",X_MODULE_MODE_NOT_SUPPORTED:48,48:"X_MODULE_MODE_NOT_SUPPORTED",X_CACHE_HANDLER_NOT_SUPPORTED:49,49:"X_CACHE_HANDLER_NOT_SUPPORTED",X_SCOPE_ID_NOT_SUPPORTED:50,50:"X_SCOPE_ID_NOT_SUPPORTED",X_VNODE_HOOKS:51,51:"X_VNODE_HOOKS",X_V_BIND_INVALID_SAME_NAME_ARGUMENT:52,52:"X_V_BIND_INVALID_SAME_NAME_ARGUMENT",__EXTEND_POINT__:53,53:"__EXTEND_POINT__"},GQe={0:"Illegal comment.",1:"CDATA section is allowed only in XML context.",2:"Duplicate attribute.",3:"End tag cannot have attributes.",4:"Illegal '/' in tags.",5:"Unexpected EOF in tag.",6:"Unexpected EOF in CDATA section.",7:"Unexpected EOF in comment.",8:"Unexpected EOF in script.",9:"Unexpected EOF in tag.",10:"Incorrectly closed comment.",11:"Incorrectly opened comment.",12:"Illegal tag name. Use '&lt;' to print '<'.",13:"Attribute value was expected.",14:"End tag name was expected.",15:"Whitespace was expected.",16:"Unexpected '<!--' in comment.",17:`Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,18:"Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",19:"Attribute name cannot start with '='.",21:"'<?' is allowed only in XML context.",20:"Unexpected null character.",22:"Illegal '/' in tags.",23:"Invalid end tag.",24:"Element is missing end tag.",25:"Interpolation end sign was not found.",27:"End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",26:"Legal directive name was expected.",28:"v-if/v-else-if is missing expression.",29:"v-if/else branches must use unique keys.",30:"v-else/v-else-if has no adjacent v-if or v-else-if.",31:"v-for is missing expression.",32:"v-for has invalid expression.",33:"<template v-for> key should be placed on the <template> tag.",34:"v-bind is missing expression.",52:"v-bind with same-name shorthand only allows static argument.",35:"v-on is missing expression.",36:"Unexpected custom directive on <slot> outlet.",37:"Mixed v-slot usage on both the component and nested <template>. When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.",38:"Duplicate slot names found. ",39:"Extraneous children found when component already has explicitly named default slot. These children will be ignored.",40:"v-slot can only be used on components or <template> tags.",41:"v-model is missing expression.",42:"v-model value must be a valid JavaScript member expression.",43:"v-model cannot be used on v-for or v-slot scope variables because they are not writable.",44:`v-model cannot be used on a prop, because local prop bindings are not writable.
Use a v-bind binding combined with a v-on listener that emits update:x event instead.`,45:"Error parsing JavaScript expression: ",46:"<KeepAlive> expects exactly one child component.",51:"@vnode-* hooks in templates are no longer supported. Use the vue: prefix instead. For example, @vnode-mounted should be changed to @vue:mounted. @vnode-* hooks support has been removed in 3.4.",47:'"prefixIdentifiers" option is not supported in this build of compiler.',48:"ES module mode is not supported in this build of compiler.",49:'"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.',50:'"scopeId" option is only supported in module mode.',53:""};function YQe(e,t,n=!1,r=[],s=Object.create(null)){}function qQe(e,t,n){return!1}function XQe(e,t){if(e&&(e.type==="ObjectProperty"||e.type==="ArrayPattern")){let n=t.length;for(;n--;){const r=t[n];if(r.type==="AssignmentExpression")return!0;if(r.type!=="ObjectProperty"&&!r.type.endsWith("Pattern"))break}}return!1}function ZQe(e){let t=e.length;for(;t--;){const n=e[t];if(n.type==="NewExpression")return!0;if(n.type!=="MemberExpression")break}return!1}function KQe(e,t){for(const n of e.params)for(const r of Fd(n))t(r)}function Lae(e,t){const n=e.type==="SwitchCase"?e.consequent:e.body;for(const r of n)if(r.type==="VariableDeclaration"){if(r.declare)continue;for(const s of r.declarations)for(const o of Fd(s.id))t(o)}else if(r.type==="FunctionDeclaration"||r.type==="ClassDeclaration"){if(r.declare||!r.id)continue;t(r.id)}else JQe(r)?QQe(r,!0,t):r.type==="SwitchStatement"&&eet(r,!0,t)}function JQe(e){return e.type==="ForOfStatement"||e.type==="ForInStatement"||e.type==="ForStatement"}function QQe(e,t,n){const r=e.type==="ForStatement"?e.init:e.left;if(r&&r.type==="VariableDeclaration"&&(r.kind==="var"?t:!t))for(const s of r.declarations)for(const o of Fd(s.id))n(o)}function eet(e,t,n){for(const r of e.cases){for(const s of r.consequent)if(s.type==="VariableDeclaration"&&(s.kind==="var"?t:!t))for(const o of s.declarations)for(const c of Fd(o.id))n(c);Lae(r,n)}}function Fd(e,t=[]){switch(e.type){case"Identifier":t.push(e);break;case"MemberExpression":let n=e;for(;n.type==="MemberExpression";)n=n.object;t.push(n);break;case"ObjectPattern":for(const r of e.properties)r.type==="RestElement"?Fd(r.argument,t):Fd(r.value,t);break;case"ArrayPattern":e.elements.forEach(r=>{r&&Fd(r,t)});break;case"RestElement":Fd(e.argument,t);break;case"AssignmentPattern":Fd(e.left,t);break}return t}const tet=e=>/Function(?:Expression|Declaration)$|Method$/.test(e.type),Nae=e=>e&&(e.type==="ObjectProperty"||e.type==="ObjectMethod")&&!e.computed,net=(e,t)=>Nae(t)&&t.key===e,Fae=["TSAsExpression","TSTypeAssertion","TSNonNullExpression","TSInstantiationExpression","TSSatisfiesExpression"];function zae(e){return Fae.includes(e.type)?zae(e.expression):e}const El=e=>e.type===4&&e.isStatic;function Zz(e){switch(e){case"Teleport":case"teleport":return L0;case"Suspense":case"suspense":return ZP;case"KeepAlive":case"keep-alive":return vS;case"BaseTransition":case"base-transition":return jz}}const ret=/^$|^\d|[^\$\w\xA0-\uFFFF]/,aE=e=>!ret.test(e),Kz=/[A-Za-z_$\xA0-\uFFFF]/,iet=/[\.\?\w$\xA0-\uFFFF]/,set=/\s+[.[]\s*|\s*[.[]\s+/g,Bae=e=>e.type===4?e.content:e.loc.source,$ae=e=>{const t=Bae(e).trim().replace(set,i=>i.trim());let n=0,r=[],s=0,o=0,c=null;for(let i=0;i<t.length;i++){const f=t.charAt(i);switch(n){case 0:if(f==="[")r.push(n),n=1,s++;else if(f==="(")r.push(n),n=2,o++;else if(!(i===0?Kz:iet).test(f))return!1;break;case 1:f==="'"||f==='"'||f==="`"?(r.push(n),n=3,c=f):f==="["?s++:f==="]"&&(--s||(n=r.pop()));break;case 2:if(f==="'"||f==='"'||f==="`")r.push(n),n=3,c=f;else if(f==="(")o++;else if(f===")"){if(i===t.length-1)return!1;--o||(n=r.pop())}break;case 3:f===c&&(n=r.pop(),c=null);break}}return!s&&!o},oet=oa,Jz=$ae,aet=/^\s*(?:async\s*)?(?:\([^)]*?\)|[\w$_]+)\s*(?::[^=]+)?=>|^\s*(?:async\s+)?function(?:\s+[\w$]+)?\s*\(/,Vae=e=>aet.test(Bae(e)),cet=oa,jae=Vae;function uet(e,t,n=t.length){return Uae({offset:e.offset,line:e.line,column:e.column},t,n)}function Uae(e,t,n=t.length){let r=0,s=-1;for(let o=0;o<n;o++)t.charCodeAt(o)===10&&(r++,s=o);return e.offset+=n,e.line+=r,e.column=s===-1?e.column+n:n-s,e}function det(e,t){if(!e)throw new Error(t||"unexpected compiler condition")}function yl(e,t,n=!1){for(let r=0;r<e.props.length;r++){const s=e.props[r];if(s.type===7&&(n||s.exp)&&(Kr(t)?s.name===t:t.test(s.name)))return s}}function lE(e,t,n=!1,r=!1){for(let s=0;s<e.props.length;s++){const o=e.props[s];if(o.type===6){if(n)continue;if(o.name===t&&(o.value||r))return o}else if(o.name==="bind"&&(o.exp||r)&&gm(o.arg,t))return o}}function gm(e,t){return!!(e&&El(e)&&e.content===t)}function Hae(e){return e.props.some(t=>t.type===7&&t.name==="bind"&&(!t.arg||t.arg.type!==4||!t.arg.isStatic))}function EC(e){return e.type===5||e.type===2}function H5(e){return e.type===7&&e.name==="pre"}function Qz(e){return e.type===7&&e.name==="slot"}function T1(e){return e.type===1&&e.tagType===3}function wS(e){return e.type===1&&e.tagType===2}const het=new Set([w1,J1]);function Wae(e,t=[]){if(e&&!Kr(e)&&e.type===14){const n=e.callee;if(!Kr(n)&&het.has(n))return Wae(e.arguments[0],t.concat(e))}return[e,t]}function SS(e,t,n){let r,s=e.type===13?e.props:e.arguments[2],o=[],c;if(s&&!Kr(s)&&s.type===14){const i=Wae(s);s=i[0],o=i[1],c=o[o.length-1]}if(s==null||Kr(s))r=Sc([t]);else if(s.type===14){const i=s.arguments[0];!Kr(i)&&i.type===15?Fq(t,i)||i.properties.unshift(t):s.callee===lO?r=zo(n.helper(bS),[Sc([t]),s]):s.arguments.unshift(Sc([t])),!r&&(r=s)}else s.type===15?(Fq(t,s)||s.properties.unshift(t),r=s):(r=zo(n.helper(bS),[Sc([t]),s]),c&&c.callee===J1&&(c=o[o.length-2]));e.type===13?c?c.arguments[0]=r:e.props=r:c?c.arguments[0]=r:e.arguments[2]=r}function Fq(e,t){let n=!1;if(e.key.type===4){const r=e.key.content;n=t.properties.some(s=>s.key.type===4&&s.key.content===r)}return n}function M1(e,t){return`_${t}_${e.replace(/[^\w]/g,(n,r)=>n==="-"?"_":e.charCodeAt(r).toString())}`}function Nu(e,t){if(!e||Object.keys(t).length===0)return!1;switch(e.type){case 1:for(let n=0;n<e.props.length;n++){const r=e.props[n];if(r.type===7&&(Nu(r.arg,t)||Nu(r.exp,t)))return!0}return e.children.some(n=>Nu(n,t));case 11:return Nu(e.source,t)?!0:e.children.some(n=>Nu(n,t));case 9:return e.branches.some(n=>Nu(n,t));case 10:return Nu(e.condition,t)?!0:e.children.some(n=>Nu(n,t));case 4:return!e.isStatic&&aE(e.content)&&!!t[e.content];case 8:return e.children.some(n=>qi(n)&&Nu(n,t));case 5:case 12:return Nu(e.content,t);case 2:case 3:case 20:return!1;default:return!1}}function Gae(e){return e.type===14&&e.callee===uO?e.arguments[1].returns:e}const Yae=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,qae={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:v_,isPreTag:v_,isIgnoreNewlineTag:v_,isCustomElement:v_,onError:Xz,onWarn:kae,comments:!1,prefixIdentifiers:!1};let ns=qae,ES=null,Qh="",za=null,Pi=null,Wl="",Dh=-1,m_=-1,eB=0,rm=!1,W5=null;const js=[],fo=new VQe(js,{onerr:Mh,ontext(e,t){bA(ya(e,t),e,t)},ontextentity(e,t,n){bA(e,t,n)},oninterpolation(e,t){if(rm)return bA(ya(e,t),e,t);let n=e+fo.delimiterOpen.length,r=t-fo.delimiterClose.length;for(;vc(Qh.charCodeAt(n));)n++;for(;vc(Qh.charCodeAt(r-1));)r--;let s=ya(n,r);s.includes("&")&&(s=ns.decodeEntities(s,!1)),G5({type:5,content:MC(s,!1,wo(n,r)),loc:wo(e,t)})},onopentagname(e,t){const n=ya(e,t);za={type:1,tag:n,ns:ns.getNamespace(n,js[0],ns.ns),tagType:0,props:[],children:[],loc:wo(e-1,t),codegenNode:void 0}},onopentagend(e){Bq(e)},onclosetag(e,t){const n=ya(e,t);if(!ns.isVoidTag(n)){let r=!1;for(let s=0;s<js.length;s++)if(js[s].tag.toLowerCase()===n.toLowerCase()){r=!0,s>0&&Mh(24,js[0].loc.start.offset);for(let c=0;c<=s;c++){const i=js.shift();TC(i,t,c<s)}break}r||Mh(23,Xae(e,60))}},onselfclosingtag(e){const t=za.tag;za.isSelfClosing=!0,Bq(e),js[0]&&js[0].tag===t&&TC(js.shift(),e)},onattribname(e,t){Pi={type:6,name:ya(e,t),nameLoc:wo(e,t),value:void 0,loc:wo(e)}},ondirname(e,t){const n=ya(e,t),r=n==="."||n===":"?"bind":n==="@"?"on":n==="#"?"slot":n.slice(2);if(!rm&&r===""&&Mh(26,e),rm||r==="")Pi={type:6,name:n,nameLoc:wo(e,t),value:void 0,loc:wo(e)};else if(Pi={type:7,name:r,rawName:n,exp:void 0,arg:void 0,modifiers:n==="."?[ui("prop")]:[],loc:wo(e)},r==="pre"){rm=fo.inVPre=!0,W5=za;const s=za.props;for(let o=0;o<s.length;o++)s[o].type===7&&(s[o]=Eet(s[o]))}},ondirarg(e,t){if(e===t)return;const n=ya(e,t);if(rm&&!H5(Pi))Pi.name+=n,A_(Pi.nameLoc,t);else{const r=n[0]!=="[";Pi.arg=MC(r?n:n.slice(1,-1),r,wo(e,t),r?3:0)}},ondirmodifier(e,t){const n=ya(e,t);if(rm&&!H5(Pi))Pi.name+="."+n,A_(Pi.nameLoc,t);else if(Pi.name==="slot"){const r=Pi.arg;r&&(r.content+="."+n,A_(r.loc,t))}else{const r=ui(n,!0,wo(e,t));Pi.modifiers.push(r)}},onattribdata(e,t){Wl+=ya(e,t),Dh<0&&(Dh=e),m_=t},onattribentity(e,t,n){Wl+=e,Dh<0&&(Dh=t),m_=n},onattribnameend(e){const t=Pi.loc.start.offset,n=ya(t,e);Pi.type===7&&(Pi.rawName=n),za.props.some(r=>(r.type===7?r.rawName:r.name)===n)&&Mh(2,t)},onattribend(e,t){if(za&&Pi){if(A_(Pi.loc,t),e!==0)if(Wl.includes("&")&&(Wl=ns.decodeEntities(Wl,!0)),Pi.type===6)Pi.name==="class"&&(Wl=Kae(Wl).trim()),e===1&&!Wl&&Mh(13,t),Pi.value={type:2,content:Wl,loc:e===1?wo(Dh,m_):wo(Dh-1,m_+1)},fo.inSFCRoot&&za.tag==="template"&&Pi.name==="lang"&&Wl&&Wl!=="html"&&fo.enterRCDATA(a3("</template"),0);else{let n=0;Pi.exp=MC(Wl,!1,wo(Dh,m_),0,n),Pi.name==="for"&&(Pi.forParseResult=pet(Pi.exp));let r=-1;Pi.name==="bind"&&(r=Pi.modifiers.findIndex(s=>s.content==="sync"))>-1&&E1("COMPILER_V_BIND_SYNC",ns,Pi.loc,Pi.arg.loc.source)&&(Pi.name="model",Pi.modifiers.splice(r,1))}(Pi.type!==7||Pi.name!=="pre")&&za.props.push(Pi)}Wl="",Dh=m_=-1},oncomment(e,t){ns.comments&&G5({type:3,content:ya(e,t),loc:wo(e-4,t+3)})},onend(){const e=Qh.length;for(let t=0;t<js.length;t++)TC(js[t],e-1),Mh(24,js[t].loc.start.offset)},oncdata(e,t){js[0].ns!==0?bA(ya(e,t),e,t):Mh(1,e-9)},onprocessinginstruction(e){(js[0]?js[0].ns:ns.ns)===0&&Mh(21,e-1)}}),zq=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,fet=/^\(|\)$/g;function pet(e){const t=e.loc,n=e.content,r=n.match(Yae);if(!r)return;const[,s,o]=r,c=(w,A,C=!1)=>{const F=t.start.offset+A,z=F+w.length;return MC(w,!1,wo(F,z),0,C?1:0)},i={source:c(o.trim(),n.indexOf(o,s.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let f=s.trim().replace(fet,"").trim();const g=s.indexOf(f),x=f.match(zq);if(x){f=f.replace(zq,"").trim();const w=x[1].trim();let A;if(w&&(A=n.indexOf(w,g+f.length),i.key=c(w,A,!0)),x[2]){const C=x[2].trim();C&&(i.index=c(C,n.indexOf(C,i.key?A+w.length:g+f.length),!0))}}return f&&(i.value=c(f,g,!0)),i}function ya(e,t){return Qh.slice(e,t)}function Bq(e){fo.inSFCRoot&&(za.innerLoc=wo(e+1,e+1)),G5(za);const{tag:t,ns:n}=za;n===0&&ns.isPreTag(t)&&eB++,ns.isVoidTag(t)?TC(za,e):(js.unshift(za),(n===1||n===2)&&(fo.inXML=!0)),za=null}function bA(e,t,n){{const o=js[0]&&js[0].tag;o!=="script"&&o!=="style"&&e.includes("&")&&(e=ns.decodeEntities(e,!1))}const r=js[0]||ES,s=r.children[r.children.length-1];s&&s.type===2?(s.content+=e,A_(s.loc,n)):r.children.push({type:2,content:e,loc:wo(t,n)})}function TC(e,t,n=!1){n?A_(e.loc,Xae(t,60)):A_(e.loc,met(t,62)+1),fo.inSFCRoot&&(e.children.length?e.innerLoc.end=Mi({},e.children[e.children.length-1].loc.end):e.innerLoc.end=Mi({},e.innerLoc.start),e.innerLoc.source=ya(e.innerLoc.start.offset,e.innerLoc.end.offset));const{tag:r,ns:s,children:o}=e;if(rm||(r==="slot"?e.tagType=2:$q(e)?e.tagType=3:_et(e)&&(e.tagType=1)),fo.inRCDATA||(e.children=Zae(o)),s===0&&ns.isIgnoreNewlineTag(r)){const c=o[0];c&&c.type===2&&(c.content=c.content.replace(/^\r?\n/,""))}s===0&&ns.isPreTag(r)&&eB--,W5===e&&(rm=fo.inVPre=!1,W5=null),fo.inXML&&(js[0]?js[0].ns:ns.ns)===0&&(fo.inXML=!1);{const c=e.props;if(!fo.inSFCRoot&&W_("COMPILER_NATIVE_TEMPLATE",ns)&&e.tag==="template"&&!$q(e)){const f=js[0]||ES,g=f.children.indexOf(e);f.children.splice(g,1,...e.children)}const i=c.find(f=>f.type===6&&f.name==="inline-template");i&&E1("COMPILER_INLINE_TEMPLATE",ns,i.loc)&&e.children.length&&(i.value={type:2,content:ya(e.children[0].loc.start.offset,e.children[e.children.length-1].loc.end.offset),loc:i.loc})}}function met(e,t){let n=e;for(;Qh.charCodeAt(n)!==t&&n<Qh.length-1;)n++;return n}function Xae(e,t){let n=e;for(;Qh.charCodeAt(n)!==t&&n>=0;)n--;return n}const get=new Set(["if","else","else-if","for","slot"]);function $q({tag:e,props:t}){if(e==="template"){for(let n=0;n<t.length;n++)if(t[n].type===7&&get.has(t[n].name))return!0}return!1}function _et({tag:e,props:t}){if(ns.isCustomElement(e))return!1;if(e==="component"||yet(e.charCodeAt(0))||Zz(e)||ns.isBuiltInComponent&&ns.isBuiltInComponent(e)||ns.isNativeTag&&!ns.isNativeTag(e))return!0;for(let n=0;n<t.length;n++){const r=t[n];if(r.type===6){if(r.name==="is"&&r.value){if(r.value.content.startsWith("vue:"))return!0;if(E1("COMPILER_IS_ON_ELEMENT",ns,r.loc))return!0}}else if(r.name==="bind"&&gm(r.arg,"is")&&E1("COMPILER_IS_ON_ELEMENT",ns,r.loc))return!0}return!1}function yet(e){return e>64&&e<91}const vet=/\r\n/g;function Zae(e){const t=ns.whitespace!=="preserve";let n=!1;for(let r=0;r<e.length;r++){const s=e[r];if(s.type===2)if(eB)s.content=s.content.replace(vet,`
`);else if(bet(s.content)){const o=e[r-1]&&e[r-1].type,c=e[r+1]&&e[r+1].type;!o||!c||t&&(o===3&&(c===3||c===1)||o===1&&(c===3||c===1&&xet(s.content)))?(n=!0,e[r]=null):s.content=" "}else t&&(s.content=Kae(s.content))}return n?e.filter(Boolean):e}function bet(e){for(let t=0;t<e.length;t++)if(!vc(e.charCodeAt(t)))return!1;return!0}function xet(e){for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n===10||n===13)return!0}return!1}function Kae(e){let t="",n=!1;for(let r=0;r<e.length;r++)vc(e.charCodeAt(r))?n||(t+=" ",n=!0):(t+=e[r],n=!1);return t}function G5(e){(js[0]||ES).children.push(e)}function wo(e,t){return{start:fo.getPos(e),end:t==null?t:fo.getPos(t),source:t==null?t:ya(e,t)}}function wet(e){return wo(e.start.offset,e.end.offset)}function A_(e,t){e.end=fo.getPos(t),e.source=ya(e.start.offset,t)}function Eet(e){const t={type:6,name:e.rawName,nameLoc:wo(e.loc.start.offset,e.loc.start.offset+e.rawName.length),value:void 0,loc:e.loc};if(e.exp){const n=e.exp.loc;n.end.offset<e.loc.end.offset&&(n.start.offset--,n.start.column--,n.end.offset++,n.end.column++),t.value={type:2,content:e.exp.content,loc:n}}return t}function MC(e,t=!1,n,r=0,s=0){return ui(e,t,n,r)}function Mh(e,t,n){ns.onError(Ns(e,wo(t,t)))}function Tet(){fo.reset(),za=null,Pi=null,Wl="",Dh=-1,m_=-1,js.length=0}function tB(e,t){if(Tet(),Qh=e,ns=Mi({},qae),t){let s;for(s in t)t[s]!=null&&(ns[s]=t[s])}fo.mode=ns.parseMode==="html"?1:ns.parseMode==="sfc"?2:0,fo.inXML=ns.ns===1||ns.ns===2;const n=t&&t.delimiters;n&&(fo.delimiterOpen=a3(n[0]),fo.delimiterClose=a3(n[1]));const r=ES=Oae([],e);return fo.parse(Qh),r.loc=wo(0,e.length),r.children=Zae(r.children),ES=null,r}function Met(e,t){AC(e,void 0,t,!!Jae(e))}function Jae(e){const t=e.children.filter(n=>n.type!==3);return t.length===1&&t[0].type===1&&!wS(t[0])?t[0]:null}function AC(e,t,n,r=!1,s=!1){const{children:o}=e,c=[];for(let x=0;x<o.length;x++){const w=o[x];if(w.type===1&&w.tagType===0){const A=r?0:ec(w,n);if(A>0){if(A>=2){w.codegenNode.patchFlag=-1,c.push(w);continue}}else{const C=w.codegenNode;if(C.type===13){const F=C.patchFlag;if((F===void 0||F===512||F===1)&&ele(w,n)>=2){const z=tle(w);z&&(C.props=n.hoist(z))}C.dynamicProps&&(C.dynamicProps=n.hoist(C.dynamicProps))}}}else if(w.type===12&&(r?0:ec(w,n))>=2){w.codegenNode.type===14&&w.codegenNode.arguments.length>0&&w.codegenNode.arguments.push("-1"),c.push(w);continue}if(w.type===1){const A=w.tagType===1;A&&n.scopes.vSlot++,AC(w,e,n,!1,s),A&&n.scopes.vSlot--}else if(w.type===11)AC(w,e,n,w.children.length===1,!0);else if(w.type===9)for(let A=0;A<w.branches.length;A++)AC(w.branches[A],e,n,w.branches[A].children.length===1,s)}let i=!1;if(c.length===o.length&&e.type===1){if(e.tagType===0&&e.codegenNode&&e.codegenNode.type===13&&ir(e.codegenNode.children))e.codegenNode.children=f(Om(e.codegenNode.children)),i=!0;else if(e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!ir(e.codegenNode.children)&&e.codegenNode.children.type===15){const x=g(e.codegenNode,"default");x&&(x.returns=f(Om(x.returns)),i=!0)}else if(e.tagType===3&&t&&t.type===1&&t.tagType===1&&t.codegenNode&&t.codegenNode.type===13&&t.codegenNode.children&&!ir(t.codegenNode.children)&&t.codegenNode.children.type===15){const x=yl(e,"slot",!0),w=x&&x.arg&&g(t.codegenNode,x.arg);w&&(w.returns=f(Om(w.returns)),i=!0)}}if(!i)for(const x of c)x.codegenNode=n.cache(x.codegenNode);function f(x){const w=n.cache(x);return w.needArraySpread=!0,w}function g(x,w){if(x.children&&!ir(x.children)&&x.children.type===15){const A=x.children.properties.find(C=>C.key===w||C.key.content===w);return A&&A.value}}c.length&&n.transformHoist&&n.transformHoist(o,n,e)}function ec(e,t){const{constantCache:n}=t;switch(e.type){case 1:if(e.tagType!==0)return 0;const r=n.get(e);if(r!==void 0)return r;const s=e.codegenNode;if(s.type!==13||s.isBlock&&e.tag!=="svg"&&e.tag!=="foreignObject"&&e.tag!=="math")return 0;if(s.patchFlag===void 0){let c=3;const i=ele(e,t);if(i===0)return n.set(e,0),0;i<c&&(c=i);for(let f=0;f<e.children.length;f++){const g=ec(e.children[f],t);if(g===0)return n.set(e,0),0;g<c&&(c=g)}if(c>1)for(let f=0;f<e.props.length;f++){const g=e.props[f];if(g.type===7&&g.name==="bind"&&g.exp){const x=ec(g.exp,t);if(x===0)return n.set(e,0),0;x<c&&(c=x)}}if(s.isBlock){for(let f=0;f<e.props.length;f++)if(e.props[f].type===7)return n.set(e,0),0;t.removeHelper(Um),t.removeHelper(dy(t.inSSR,s.isComponent)),s.isBlock=!1,t.helper(uy(t.inSSR,s.isComponent))}return n.set(e,c),c}else return n.set(e,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return ec(e.content,t);case 4:return e.constType;case 8:let o=3;for(let c=0;c<e.children.length;c++){const i=e.children[c];if(Kr(i)||Cl(i))continue;const f=ec(i,t);if(f===0)return 0;f<o&&(o=f)}return o;case 20:return 2;default:return 0}}const Aet=new Set([oO,aO,w1,J1]);function Qae(e,t){if(e.type===14&&!Kr(e.callee)&&Aet.has(e.callee)){const n=e.arguments[0];if(n.type===4)return ec(n,t);if(n.type===14)return Qae(n,t)}return 0}function ele(e,t){let n=3;const r=tle(e);if(r&&r.type===15){const{properties:s}=r;for(let o=0;o<s.length;o++){const{key:c,value:i}=s[o],f=ec(c,t);if(f===0)return f;f<n&&(n=f);let g;if(i.type===4?g=ec(i,t):i.type===14?g=Qae(i,t):g=0,g===0)return g;g<n&&(n=g)}}return n}function tle(e){const t=e.codegenNode;if(t.type===13)return t.props}function nle(e,{filename:t="",prefixIdentifiers:n=!1,hoistStatic:r=!1,hmr:s=!1,cacheHandlers:o=!1,nodeTransforms:c=[],directiveTransforms:i={},transformHoist:f=null,isBuiltInComponent:g=oa,isCustomElement:x=oa,expressionPlugins:w=[],scopeId:A=null,slotted:C=!0,ssr:F=!1,inSSR:z=!1,ssrCssVars:j="",bindingMetadata:V=Ii,inline:Y=!1,isTS:te=!1,onError:J=Xz,onWarn:ee=kae,compatConfig:le}){const oe=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),ve={filename:t,selfName:oe&&Xm(Is(oe[1])),prefixIdentifiers:n,hoistStatic:r,hmr:s,cacheHandlers:o,nodeTransforms:c,directiveTransforms:i,transformHoist:f,isBuiltInComponent:g,isCustomElement:x,expressionPlugins:w,scopeId:A,slotted:C,ssr:F,inSSR:z,ssrCssVars:j,bindingMetadata:V,inline:Y,isTS:te,onError:J,onWarn:ee,compatConfig:le,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(se){const ie=ve.helpers.get(se)||0;return ve.helpers.set(se,ie+1),se},removeHelper(se){const ie=ve.helpers.get(se);if(ie){const pe=ie-1;pe?ve.helpers.set(se,pe):ve.helpers.delete(se)}},helperString(se){return`_${ly[ve.helper(se)]}`},replaceNode(se){ve.parent.children[ve.childIndex]=ve.currentNode=se},removeNode(se){const ie=ve.parent.children,pe=se?ie.indexOf(se):ve.currentNode?ve.childIndex:-1;!se||se===ve.currentNode?(ve.currentNode=null,ve.onNodeRemoved()):ve.childIndex>pe&&(ve.childIndex--,ve.onNodeRemoved()),ve.parent.children.splice(pe,1)},onNodeRemoved:oa,addIdentifiers(se){},removeIdentifiers(se){},hoist(se){Kr(se)&&(se=ui(se)),ve.hoists.push(se);const ie=ui(`_hoisted_${ve.hoists.length}`,!1,se.loc,2);return ie.hoisted=se,ie},cache(se,ie=!1,pe=!1){const be=Dae(ve.cached.length,se,ie,pe);return ve.cached.push(be),be}};return ve.filters=new Set,ve}function rle(e,t){const n=nle(e,t);cE(e,n),t.hoistStatic&&Met(e,n),t.ssr||Cet(e,n),e.helpers=new Set([...n.helpers.keys()]),e.components=[...n.components],e.directives=[...n.directives],e.imports=n.imports,e.hoists=n.hoists,e.temps=n.temps,e.cached=n.cached,e.transformed=!0,e.filters=[...n.filters]}function Cet(e,t){const{helper:n}=t,{children:r}=e;if(r.length===1){const s=Jae(e);if(s&&s.codegenNode){const o=s.codegenNode;o.type===13&&dO(o,t),e.codegenNode=o}else e.codegenNode=r[0]}else if(r.length>1){let s=64;e.codegenNode=S1(t,n(x1),void 0,e.children,s,void 0,void 0,!0,void 0,!1)}}function Iet(e,t){let n=0;const r=()=>{n--};for(;n<e.children.length;n++){const s=e.children[n];Kr(s)||(t.grandParent=t.parent,t.parent=e,t.childIndex=n,t.onNodeRemoved=r,cE(s,t))}}function cE(e,t){t.currentNode=e;const{nodeTransforms:n}=t,r=[];for(let o=0;o<n.length;o++){const c=n[o](e,t);if(c&&(ir(c)?r.push(...c):r.push(c)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper(K1);break;case 5:t.ssr||t.helper(oE);break;case 9:for(let o=0;o<e.branches.length;o++)cE(e.branches[o],t);break;case 10:case 11:case 1:case 0:Iet(e,t);break}t.currentNode=e;let s=r.length;for(;s--;)r[s]()}function nB(e,t){const n=Kr(e)?r=>r===e:r=>e.test(r);return(r,s)=>{if(r.type===1){const{props:o}=r;if(r.tagType===3&&o.some(Qz))return;const c=[];for(let i=0;i<o.length;i++){const f=o[i];if(f.type===7&&n(f.name)){o.splice(i,1),i--;const g=t(r,f,s);g&&c.push(g)}}return c}}}const hO="/*@__PURE__*/",ile=e=>`${ly[e]}: _${ly[e]}`;function Pet(e,{mode:t="function",prefixIdentifiers:n=t==="module",sourceMap:r=!1,filename:s="template.vue.html",scopeId:o=null,optimizeImports:c=!1,runtimeGlobalName:i="Vue",runtimeModuleName:f="vue",ssrRuntimeModuleName:g="vue/server-renderer",ssr:x=!1,isTS:w=!1,inSSR:A=!1}){const C={mode:t,prefixIdentifiers:n,sourceMap:r,filename:s,scopeId:o,optimizeImports:c,runtimeGlobalName:i,runtimeModuleName:f,ssrRuntimeModuleName:g,ssr:x,isTS:w,inSSR:A,source:e.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(z){return`_${ly[z]}`},push(z,j=-2,V){C.code+=z},indent(){F(++C.indentLevel)},deindent(z=!1){z?--C.indentLevel:F(--C.indentLevel)},newline(){F(C.indentLevel)}};function F(z){C.push(`
`+"  ".repeat(z),0)}return C}function sle(e,t={}){const n=Pet(e,t);t.onContextCreated&&t.onContextCreated(n);const{mode:r,push:s,prefixIdentifiers:o,indent:c,deindent:i,newline:f,scopeId:g,ssr:x}=n,w=Array.from(e.helpers),A=w.length>0,C=!o&&r!=="module";Oet(e,n);const z=x?"ssrRender":"render",V=(x?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(s(`function ${z}(${V}) {`),c(),C&&(s("with (_ctx) {"),c(),A&&(s(`const { ${w.map(ile).join(", ")} } = _Vue
`,-1),f())),e.components.length&&(ZR(e.components,"component",n),(e.directives.length||e.temps>0)&&f()),e.directives.length&&(ZR(e.directives,"directive",n),e.temps>0&&f()),e.filters&&e.filters.length&&(f(),ZR(e.filters,"filter",n),f()),e.temps>0){s("let ");for(let Y=0;Y<e.temps;Y++)s(`${Y>0?", ":""}_temp${Y}`)}return(e.components.length||e.directives.length||e.temps)&&(s(`
`,0),f()),x||s("return "),e.codegenNode?qa(e.codegenNode,n):s("null"),C&&(i(),s("}")),i(),s("}"),{ast:e,code:n.code,preamble:"",map:n.map?n.map.toJSON():void 0}}function Oet(e,t){const{ssr:n,prefixIdentifiers:r,push:s,newline:o,runtimeModuleName:c,runtimeGlobalName:i,ssrRuntimeModuleName:f}=t,g=i,x=Array.from(e.helpers);if(x.length>0&&(s(`const _Vue = ${g}
`,-1),e.hoists.length)){const w=[KP,JP,K1,QP,Wz].filter(A=>x.includes(A)).map(ile).join(", ");s(`const { ${w} } = _Vue
`,-1)}Det(e.hoists,t),o(),s("return ")}function ZR(e,t,{helper:n,push:r,newline:s,isTS:o}){const c=n(t==="filter"?rO:t==="component"?eO:nO);for(let i=0;i<e.length;i++){let f=e[i];const g=f.endsWith("__self");g&&(f=f.slice(0,-6)),r(`const ${M1(f,t)} = ${c}(${JSON.stringify(f)}${g?", true":""})${o?"!":""}`),i<e.length-1&&s()}}function Det(e,t){if(!e.length)return;t.pure=!0;const{push:n,newline:r}=t;r();for(let s=0;s<e.length;s++){const o=e[s];o&&(n(`const _hoisted_${s+1} = `),qa(o,t),r())}t.pure=!1}function rB(e,t){const n=e.length>3||!1;t.push("["),n&&t.indent(),uE(e,t,n),n&&t.deindent(),t.push("]")}function uE(e,t,n=!1,r=!0){const{push:s,newline:o}=t;for(let c=0;c<e.length;c++){const i=e[c];Kr(i)?s(i,-3):ir(i)?rB(i,t):qa(i,t),c<e.length-1&&(n?(r&&s(","),o()):r&&s(", "))}}function qa(e,t){if(Kr(e)){t.push(e,-3);return}if(Cl(e)){t.push(t.helper(e));return}switch(e.type){case 1:case 9:case 11:qa(e.codegenNode,t);break;case 2:Ret(e,t);break;case 4:ole(e,t);break;case 5:ket(e,t);break;case 12:qa(e.codegenNode,t);break;case 8:ale(e,t);break;case 3:Net(e,t);break;case 13:Fet(e,t);break;case 14:Bet(e,t);break;case 15:$et(e,t);break;case 17:Vet(e,t);break;case 18:jet(e,t);break;case 19:Uet(e,t);break;case 20:Het(e,t);break;case 21:uE(e.body,t,!0,!1);break}}function Ret(e,t){t.push(JSON.stringify(e.content),-3,e)}function ole(e,t){const{content:n,isStatic:r}=e;t.push(r?JSON.stringify(n):n,-3,e)}function ket(e,t){const{push:n,helper:r,pure:s}=t;s&&n(hO),n(`${r(oE)}(`),qa(e.content,t),n(")")}function ale(e,t){for(let n=0;n<e.children.length;n++){const r=e.children[n];Kr(r)?t.push(r,-3):qa(r,t)}}function Let(e,t){const{push:n}=t;if(e.type===8)n("["),ale(e,t),n("]");else if(e.isStatic){const r=aE(e.content)?e.content:JSON.stringify(e.content);n(r,-2,e)}else n(`[${e.content}]`,-3,e)}function Net(e,t){const{push:n,helper:r,pure:s}=t;s&&n(hO),n(`${r(K1)}(${JSON.stringify(e.content)})`,-3,e)}function Fet(e,t){const{push:n,helper:r,pure:s}=t,{tag:o,props:c,children:i,patchFlag:f,dynamicProps:g,directives:x,isBlock:w,disableTracking:A,isComponent:C}=e;let F;f&&(F=String(f)),x&&n(r(iO)+"("),w&&n(`(${r(Um)}(${A?"true":""}), `),s&&n(hO);const z=w?dy(t.inSSR,C):uy(t.inSSR,C);n(r(z)+"(",-2,e),uE(zet([o,c,i,F,g]),t),n(")"),w&&n(")"),x&&(n(", "),qa(x,t),n(")"))}function zet(e){let t=e.length;for(;t--&&e[t]==null;);return e.slice(0,t+1).map(n=>n||"null")}function Bet(e,t){const{push:n,helper:r,pure:s}=t,o=Kr(e.callee)?e.callee:r(e.callee);s&&n(hO),n(o+"(",-2,e),uE(e.arguments,t),n(")")}function $et(e,t){const{push:n,indent:r,deindent:s,newline:o}=t,{properties:c}=e;if(!c.length){n("{}",-2,e);return}const i=c.length>1||!1;n(i?"{":"{ "),i&&r();for(let f=0;f<c.length;f++){const{key:g,value:x}=c[f];Let(g,t),n(": "),qa(x,t),f<c.length-1&&(n(","),o())}i&&s(),n(i?"}":" }")}function Vet(e,t){rB(e.elements,t)}function jet(e,t){const{push:n,indent:r,deindent:s}=t,{params:o,returns:c,body:i,newline:f,isSlot:g}=e;g&&n(`_${ly[cO]}(`),n("(",-2,e),ir(o)?uE(o,t):o&&qa(o,t),n(") => "),(f||i)&&(n("{"),r()),c?(f&&n("return "),ir(c)?rB(c,t):qa(c,t)):i&&qa(i,t),(f||i)&&(s(),n("}")),g&&(e.isNonScopedSlot&&n(", undefined, true"),n(")"))}function Uet(e,t){const{test:n,consequent:r,alternate:s,newline:o}=e,{push:c,indent:i,deindent:f,newline:g}=t;if(n.type===4){const w=!aE(n.content);w&&c("("),ole(n,t),w&&c(")")}else c("("),qa(n,t),c(")");o&&i(),t.indentLevel++,o||c(" "),c("? "),qa(r,t),t.indentLevel--,o&&g(),o||c(" "),c(": ");const x=s.type===19;x||t.indentLevel++,qa(s,t),x||t.indentLevel--,o&&f(!0)}function Het(e,t){const{push:n,helper:r,indent:s,deindent:o,newline:c}=t,{needPauseTracking:i,needArraySpread:f}=e;f&&n("[...("),n(`_cache[${e.index}] || (`),i&&(s(),n(`${r(xS)}(-1`),e.inVOnce&&n(", true"),n("),"),c(),n("(")),n(`_cache[${e.index}] = `),qa(e.value,t),i&&(n(`).cacheIndex = ${e.index},`),c(),n(`${r(xS)}(1),`),c(),n(`_cache[${e.index}]`),o()),n(")"),f&&n(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const Wet=(e,t)=>{if(e.type===5)e.content=CC(e.content,t);else if(e.type===1){const n=yl(e,"memo");for(let r=0;r<e.props.length;r++){const s=e.props[r];if(s.type===7&&s.name!=="for"){const o=s.exp,c=s.arg;o&&o.type===4&&!(s.name==="on"&&c)&&!(n&&c&&c.type===4&&c.content==="key")&&(s.exp=CC(o,t,s.name==="slot")),c&&c.type===4&&!c.isStatic&&(s.arg=CC(c,t))}}}};function CC(e,t,n=!1,r=!1,s=Object.create(t.identifiers)){return e}function lle(e){return Kr(e)?e:e.type===4?e.content:e.children.map(lle).join("")}const Get=nB(/^(?:if|else|else-if)$/,(e,t,n)=>cle(e,t,n,(r,s,o)=>{const c=n.parent.children;let i=c.indexOf(r),f=0;for(;i-->=0;){const g=c[i];g&&g.type===9&&(f+=g.branches.length)}return()=>{if(o)r.codegenNode=jq(s,f,n);else{const g=Yet(r.codegenNode);g.alternate=jq(s,f+r.branches.length-1,n)}}}));function cle(e,t,n,r){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const s=t.exp?t.exp.loc:e.loc;n.onError(Ns(28,t.loc)),t.exp=ui("true",!1,s)}if(t.name==="if"){const s=Vq(e,t),o={type:9,loc:wet(e.loc),branches:[s]};if(n.replaceNode(o),r)return r(o,s,!0)}else{const s=n.parent.children;let o=s.indexOf(e);for(;o-->=-1;){const c=s[o];if(c&&c.type===3){n.removeNode(c);continue}if(c&&c.type===2&&!c.content.trim().length){n.removeNode(c);continue}if(c&&c.type===9){(t.name==="else-if"||t.name==="else")&&c.branches[c.branches.length-1].condition===void 0&&n.onError(Ns(30,e.loc)),n.removeNode();const i=Vq(e,t);c.branches.push(i);const f=r&&r(c,i,!1);cE(i,n),f&&f(),n.currentNode=null}else n.onError(Ns(30,e.loc));break}}}function Vq(e,t){const n=e.tagType===3;return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:n&&!yl(e,"for")?e.children:[e],userKey:lE(e,"key"),isTemplateIf:n}}function jq(e,t,n){return e.condition?o3(e.condition,Uq(e,t,n),zo(n.helper(K1),['""',"true"])):Uq(e,t,n)}function Uq(e,t,n){const{helper:r}=n,s=Ao("key",ui(`${t}`,!1,ea,2)),{children:o}=e,c=o[0];if(o.length!==1||c.type!==1)if(o.length===1&&c.type===11){const f=c.codegenNode;return SS(f,s,n),f}else return S1(n,r(x1),Sc([s]),o,64,void 0,void 0,!0,!1,!1,e.loc);else{const f=c.codegenNode,g=Gae(f);return g.type===13&&dO(g,n),SS(g,s,n),f}}function Yet(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}const qet=nB("for",(e,t,n)=>{const{helper:r,removeHelper:s}=n;return ule(e,t,n,o=>{const c=zo(r(sO),[o.source]),i=T1(e),f=yl(e,"memo"),g=lE(e,"key",!1,!0);g&&g.type;let x=g&&(g.type===6?g.value?ui(g.value.content,!0):void 0:g.exp);const w=g&&x?Ao("key",x):null,A=o.source.type===4&&o.source.constType>0,C=A?64:g?128:256;return o.codegenNode=S1(n,r(x1),void 0,c,C,void 0,void 0,!0,!A,!1,e.loc),()=>{let F;const{children:z}=o,j=z.length!==1||z[0].type!==1,V=wS(e)?e:i&&e.children.length===1&&wS(e.children[0])?e.children[0]:null;if(V?(F=V.codegenNode,i&&w&&SS(F,w,n)):j?F=S1(n,r(x1),w?Sc([w]):void 0,e.children,64,void 0,void 0,!0,void 0,!1):(F=z[0].codegenNode,i&&w&&SS(F,w,n),F.isBlock!==!A&&(F.isBlock?(s(Um),s(dy(n.inSSR,F.isComponent))):s(uy(n.inSSR,F.isComponent))),F.isBlock=!A,F.isBlock?(r(Um),r(dy(n.inSSR,F.isComponent))):r(uy(n.inSSR,F.isComponent))),f){const Y=cy(l3(o.parseResult,[ui("_cached")]));Y.body=Rae([Qc(["const _memo = (",f.exp,")"]),Qc(["if (_cached",...x?[" && _cached.key === ",x]:[],` && ${n.helperString(qz)}(_cached, _memo)) return _cached`]),Qc(["const _item = ",F]),ui("_item.memo = _memo"),ui("return _item")]),c.arguments.push(Y,ui("_cache"),ui(String(n.cached.length))),n.cached.push(null)}else c.arguments.push(cy(l3(o.parseResult),F,!0))}})});function ule(e,t,n,r){if(!t.exp){n.onError(Ns(31,t.loc));return}const s=t.forParseResult;if(!s){n.onError(Ns(32,t.loc));return}iB(s);const{addIdentifiers:o,removeIdentifiers:c,scopes:i}=n,{source:f,value:g,key:x,index:w}=s,A={type:11,loc:t.loc,source:f,valueAlias:g,keyAlias:x,objectIndexAlias:w,parseResult:s,children:T1(e)?e.children:[e]};n.replaceNode(A),i.vFor++;const C=r&&r(A);return()=>{i.vFor--,C&&C()}}function iB(e,t){e.finalized||(e.finalized=!0)}function l3({value:e,key:t,index:n},r=[]){return Xet([e,t,n,...r])}function Xet(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((n,r)=>n||ui("_".repeat(r+1),!1))}const Hq=ui("undefined",!1),dle=(e,t)=>{if(e.type===1&&(e.tagType===1||e.tagType===3)){const n=yl(e,"slot");if(n)return n.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},Zet=(e,t)=>{let n;if(T1(e)&&e.props.some(Qz)&&(n=yl(e,"for"))){const r=n.forParseResult;if(r){iB(r);const{value:s,key:o,index:c}=r,{addIdentifiers:i,removeIdentifiers:f}=t;return s&&i(s),o&&i(o),c&&i(c),()=>{s&&f(s),o&&f(o),c&&f(c)}}}},Ket=(e,t,n,r)=>cy(e,n,!1,!0,n.length?n[0].loc:r);function hle(e,t,n=Ket){t.helper(cO);const{children:r,loc:s}=e,o=[],c=[];let i=t.scopes.vSlot>0||t.scopes.vFor>0;const f=yl(e,"slot",!0);if(f){const{arg:j,exp:V}=f;j&&!El(j)&&(i=!0),o.push(Ao(j||ui("default",!0),n(V,void 0,r,s)))}let g=!1,x=!1;const w=[],A=new Set;let C=0;for(let j=0;j<r.length;j++){const V=r[j];let Y;if(!T1(V)||!(Y=yl(V,"slot",!0))){V.type!==3&&w.push(V);continue}if(f){t.onError(Ns(37,Y.loc));break}g=!0;const{children:te,loc:J}=V,{arg:ee=ui("default",!0),exp:le,loc:oe}=Y;let ve;El(ee)?ve=ee?ee.content:"default":i=!0;const se=yl(V,"for"),ie=n(le,se,te,J);let pe,be;if(pe=yl(V,"if"))i=!0,c.push(o3(pe.exp,xA(ee,ie,C++),Hq));else if(be=yl(V,/^else(?:-if)?$/,!0)){let Se=j,Ce;for(;Se--&&(Ce=r[Se],!(Ce.type!==3&&Y5(Ce))););if(Ce&&T1(Ce)&&yl(Ce,/^(?:else-)?if$/)){let Ee=c[c.length-1];for(;Ee.alternate.type===19;)Ee=Ee.alternate;Ee.alternate=be.exp?o3(be.exp,xA(ee,ie,C++),Hq):xA(ee,ie,C++)}else t.onError(Ns(30,be.loc))}else if(se){i=!0;const Se=se.forParseResult;Se?(iB(Se),c.push(zo(t.helper(sO),[Se.source,cy(l3(Se),xA(ee,ie),!0)]))):t.onError(Ns(32,se.loc))}else{if(ve){if(A.has(ve)){t.onError(Ns(38,oe));continue}A.add(ve),ve==="default"&&(x=!0)}o.push(Ao(ee,ie))}}if(!f){const j=(V,Y)=>{const te=n(V,void 0,Y,s);return t.compatConfig&&(te.isNonScopedSlot=!0),Ao("default",te)};g?w.length&&w.some(V=>Y5(V))&&(x?t.onError(Ns(39,w[0].loc)):o.push(j(void 0,w))):o.push(j(void 0,r))}const F=i?2:IC(e.children)?3:1;let z=Sc(o.concat(Ao("_",ui(F+"",!1))),s);return c.length&&(z=zo(t.helper(Yz),[z,Om(c)])),{slots:z,hasDynamicSlots:i}}function xA(e,t,n){const r=[Ao("name",e),Ao("fn",t)];return n!=null&&r.push(Ao("key",ui(String(n),!0))),Sc(r)}function IC(e){for(let t=0;t<e.length;t++){const n=e[t];switch(n.type){case 1:if(n.tagType===2||IC(n.children))return!0;break;case 9:if(IC(n.branches))return!0;break;case 10:case 11:if(IC(n.children))return!0;break}}return!1}function Y5(e){return e.type!==2&&e.type!==12?!0:e.type===2?!!e.content.trim():Y5(e.content)}const fle=new WeakMap,ple=(e,t)=>function(){if(e=t.currentNode,!(e.type===1&&(e.tagType===0||e.tagType===1)))return;const{tag:r,props:s}=e,o=e.tagType===1;let c=o?mle(e,t):`"${r}"`;const i=qi(c)&&c.callee===tO;let f,g,x=0,w,A,C,F=i||c===L0||c===ZP||!o&&(r==="svg"||r==="foreignObject"||r==="math");if(s.length>0){const z=sB(e,t,void 0,o,i);f=z.props,x=z.patchFlag,A=z.dynamicPropNames;const j=z.directives;C=j&&j.length?Om(j.map(V=>gle(V,t))):void 0,z.shouldUseBlock&&(F=!0)}if(e.children.length>0)if(c===vS&&(F=!0,x|=1024),o&&c!==L0&&c!==vS){const{slots:j,hasDynamicSlots:V}=hle(e,t);g=j,V&&(x|=1024)}else if(e.children.length===1&&c!==L0){const j=e.children[0],V=j.type,Y=V===5||V===8;Y&&ec(j,t)===0&&(x|=1),Y||V===2?g=j:g=e.children}else g=e.children;A&&A.length&&(w=Qet(A)),e.codegenNode=S1(t,c,f,g,x===0?void 0:x,w,C,!!F,!1,o,e.loc)};function mle(e,t,n=!1){let{tag:r}=e;const s=q5(r),o=lE(e,"is",!1,!0);if(o)if(s||W_("COMPILER_IS_ON_ELEMENT",t)){let i;if(o.type===6?i=o.value&&ui(o.value.content,!0):(i=o.exp,i||(i=ui("is",!1,o.arg.loc))),i)return zo(t.helper(tO),[i])}else o.type===6&&o.value.content.startsWith("vue:")&&(r=o.value.content.slice(4));const c=Zz(r)||t.isBuiltInComponent(r);return c?(n||t.helper(c),c):(t.helper(eO),t.components.add(r),M1(r,"component"))}function sB(e,t,n=e.props,r,s,o=!1){const{tag:c,loc:i,children:f}=e;let g=[];const x=[],w=[],A=f.length>0;let C=!1,F=0,z=!1,j=!1,V=!1,Y=!1,te=!1,J=!1;const ee=[],le=ie=>{g.length&&(x.push(Sc(Wq(g),i)),g=[]),ie&&x.push(ie)},oe=()=>{t.scopes.vFor>0&&g.push(Ao(ui("ref_for",!0),ui("true")))},ve=({key:ie,value:pe})=>{if(El(ie)){const be=ie.content,Se=Ym(be);if(Se&&(!r||s)&&be.toLowerCase()!=="onclick"&&be!=="onUpdate:modelValue"&&!qh(be)&&(Y=!0),Se&&qh(be)&&(J=!0),Se&&pe.type===14&&(pe=pe.arguments[0]),pe.type===20||(pe.type===4||pe.type===8)&&ec(pe,t)>0)return;be==="ref"?z=!0:be==="class"?j=!0:be==="style"?V=!0:be!=="key"&&!ee.includes(be)&&ee.push(be),r&&(be==="class"||be==="style")&&!ee.includes(be)&&ee.push(be)}else te=!0};for(let ie=0;ie<n.length;ie++){const pe=n[ie];if(pe.type===6){const{loc:be,name:Se,nameLoc:Ce,value:Ee}=pe;let xe=!0;if(Se==="ref"&&(z=!0,oe()),Se==="is"&&(q5(c)||Ee&&Ee.content.startsWith("vue:")||W_("COMPILER_IS_ON_ELEMENT",t)))continue;g.push(Ao(ui(Se,!0,Ce),ui(Ee?Ee.content:"",xe,Ee?Ee.loc:be)))}else{const{name:be,arg:Se,exp:Ce,loc:Ee,modifiers:xe}=pe,ke=be==="bind",He=be==="on";if(be==="slot"){r||t.onError(Ns(40,Ee));continue}if(be==="once"||be==="memo"||be==="is"||ke&&gm(Se,"is")&&(q5(c)||W_("COMPILER_IS_ON_ELEMENT",t))||He&&o)continue;if((ke&&gm(Se,"key")||He&&A&&gm(Se,"vue:before-update"))&&(C=!0),ke&&gm(Se,"ref")&&oe(),!Se&&(ke||He)){if(te=!0,Ce)if(ke){if(le(),W_("COMPILER_V_BIND_OBJECT_ORDER",t)){x.unshift(Ce);continue}oe(),le(),x.push(Ce)}else le({type:14,loc:Ee,callee:t.helper(lO),arguments:r?[Ce]:[Ce,"true"]});else t.onError(Ns(ke?34:35,Ee));continue}ke&&xe.some(Ge=>Ge.content==="prop")&&(F|=32);const Ke=t.directiveTransforms[be];if(Ke){const{props:Ge,needRuntime:$t}=Ke(pe,e,t);!o&&Ge.forEach(ve),He&&Se&&!El(Se)?le(Sc(Ge,i)):g.push(...Ge),$t&&(w.push(pe),Cl($t)&&fle.set(pe,$t))}else tZ(be)||(w.push(pe),A&&(C=!0))}}let se;if(x.length?(le(),x.length>1?se=zo(t.helper(bS),x,i):se=x[0]):g.length&&(se=Sc(Wq(g),i)),te?F|=16:(j&&!r&&(F|=2),V&&!r&&(F|=4),ee.length&&(F|=8),Y&&(F|=32)),!C&&(F===0||F===32)&&(z||J||w.length>0)&&(F|=512),!t.inSSR&&se)switch(se.type){case 15:let ie=-1,pe=-1,be=!1;for(let Ee=0;Ee<se.properties.length;Ee++){const xe=se.properties[Ee].key;El(xe)?xe.content==="class"?ie=Ee:xe.content==="style"&&(pe=Ee):xe.isHandlerKey||(be=!0)}const Se=se.properties[ie],Ce=se.properties[pe];be?se=zo(t.helper(w1),[se]):(Se&&!El(Se.value)&&(Se.value=zo(t.helper(oO),[Se.value])),Ce&&(V||Ce.value.type===4&&Ce.value.content.trim()[0]==="["||Ce.value.type===17)&&(Ce.value=zo(t.helper(aO),[Ce.value])));break;case 14:break;default:se=zo(t.helper(w1),[zo(t.helper(J1),[se])]);break}return{props:se,directives:w,patchFlag:F,dynamicPropNames:ee,shouldUseBlock:C}}function Wq(e){const t=new Map,n=[];for(let r=0;r<e.length;r++){const s=e[r];if(s.key.type===8||!s.key.isStatic){n.push(s);continue}const o=s.key.content,c=t.get(o);c?(o==="style"||o==="class"||Ym(o))&&Jet(c,s):(t.set(o,s),n.push(s))}return n}function Jet(e,t){e.value.type===17?e.value.elements.push(t.value):e.value=Om([e.value,t.value],e.loc)}function gle(e,t){const n=[],r=fle.get(e);r?n.push(t.helperString(r)):(t.helper(nO),t.directives.add(e.name),n.push(M1(e.name,"directive")));const{loc:s}=e;if(e.exp&&n.push(e.exp),e.arg&&(e.exp||n.push("void 0"),n.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||n.push("void 0"),n.push("void 0"));const o=ui("true",!1,s);n.push(Sc(e.modifiers.map(c=>Ao(c,o)),s))}return Om(n,e.loc)}function Qet(e){let t="[";for(let n=0,r=e.length;n<r;n++)t+=JSON.stringify(e[n]),n<r-1&&(t+=", ");return t+"]"}function q5(e){return e==="component"||e==="Component"}const ett=(e,t)=>{if(wS(e)){const{children:n,loc:r}=e,{slotName:s,slotProps:o}=_le(e,t),c=[t.prefixIdentifiers?"_ctx.$slots":"$slots",s,"{}","undefined","true"];let i=2;o&&(c[2]=o,i=3),n.length&&(c[3]=cy([],n,!1,!1,r),i=4),t.scopeId&&!t.slotted&&(i=5),c.splice(i),e.codegenNode=zo(t.helper(Gz),c,r)}};function _le(e,t){let n='"default"',r;const s=[];for(let o=0;o<e.props.length;o++){const c=e.props[o];if(c.type===6)c.value&&(c.name==="name"?n=JSON.stringify(c.value.content):(c.name=Is(c.name),s.push(c)));else if(c.name==="bind"&&gm(c.arg,"name")){if(c.exp)n=c.exp;else if(c.arg&&c.arg.type===4){const i=Is(c.arg.content);n=c.exp=ui(i,!1,c.arg.loc)}}else c.name==="bind"&&c.arg&&El(c.arg)&&(c.arg.content=Is(c.arg.content)),s.push(c)}if(s.length>0){const{props:o,directives:c}=sB(e,t,s,!1,!1);r=o,c.length&&t.onError(Ns(36,c[0].loc))}return{slotName:n,slotProps:r}}const oB=(e,t,n,r)=>{const{loc:s,modifiers:o,arg:c}=e;!e.exp&&!o.length&&n.onError(Ns(35,s));let i;if(c.type===4)if(c.isStatic){let w=c.content;w.startsWith("vue:")&&(w=`vnode-${w.slice(4)}`);const A=t.tagType!==0||w.startsWith("vnode")||!/[A-Z]/.test(w)?O_(Is(w)):`on:${w}`;i=ui(A,!0,c.loc)}else i=Qc([`${n.helperString(s3)}(`,c,")"]);else i=c,i.children.unshift(`${n.helperString(s3)}(`),i.children.push(")");let f=e.exp;f&&!f.content.trim()&&(f=void 0);let g=n.cacheHandlers&&!f&&!n.inVOnce;if(f){const w=Jz(f),A=!(w||jae(f)),C=f.content.includes(";");(A||g&&w)&&(f=Qc([`${A?"$event":"(...args)"} => ${C?"{":"("}`,f,C?"}":")"]))}let x={props:[Ao(i,f||ui("() => {}",!1,s))]};return r&&(x=r(x)),g&&(x.props[0].value=n.cache(x.props[0].value)),x.props.forEach(w=>w.key.isHandlerKey=!0),x},yle=(e,t,n)=>{const{modifiers:r,loc:s}=e,o=e.arg;let{exp:c}=e;return c&&c.type===4&&!c.content.trim()&&(c=void 0),o.type!==4?(o.children.unshift("("),o.children.push(') || ""')):o.isStatic||(o.content=o.content?`${o.content} || ""`:'""'),r.some(i=>i.content==="camel")&&(o.type===4?o.isStatic?o.content=Is(o.content):o.content=`${n.helperString(i3)}(${o.content})`:(o.children.unshift(`${n.helperString(i3)}(`),o.children.push(")"))),n.inSSR||(r.some(i=>i.content==="prop")&&Gq(o,"."),r.some(i=>i.content==="attr")&&Gq(o,"^")),{props:[Ao(o,c)]}},Gq=(e,t)=>{e.type===4?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},ttt=(e,t)=>{if(e.type===0||e.type===1||e.type===11||e.type===10)return()=>{const n=e.children;let r,s=!1;for(let o=0;o<n.length;o++){const c=n[o];if(EC(c)){s=!0;for(let i=o+1;i<n.length;i++){const f=n[i];if(EC(f))r||(r=n[o]=Qc([c],c.loc)),r.children.push(" + ",f),n.splice(i,1),i--;else{r=void 0;break}}}}if(!(!s||n.length===1&&(e.type===0||e.type===1&&e.tagType===0&&!e.props.find(o=>o.type===7&&!t.directiveTransforms[o.name])&&e.tag!=="template")))for(let o=0;o<n.length;o++){const c=n[o];if(EC(c)||c.type===8){const i=[];(c.type!==2||c.content!==" ")&&i.push(c),!t.ssr&&ec(c,t)===0&&i.push("1"),n[o]={type:12,content:c,loc:c.loc,codegenNode:zo(t.helper(QP),i)}}}}},Yq=new WeakSet,ntt=(e,t)=>{if(e.type===1&&yl(e,"once",!0))return Yq.has(e)||t.inVOnce||t.inSSR?void 0:(Yq.add(e),t.inVOnce=!0,t.helper(xS),()=>{t.inVOnce=!1;const n=t.currentNode;n.codegenNode&&(n.codegenNode=t.cache(n.codegenNode,!0,!0))})},aB=(e,t,n)=>{const{exp:r,arg:s}=e;if(!r)return n.onError(Ns(41,e.loc)),wA();const o=r.loc.source.trim(),c=r.type===4?r.content:o,i=n.bindingMetadata[o];if(i==="props"||i==="props-aliased")return n.onError(Ns(44,r.loc)),wA();if(!c.trim()||!Jz(r))return n.onError(Ns(42,r.loc)),wA();const f=s||ui("modelValue",!0),g=s?El(s)?`onUpdate:${Is(s.content)}`:Qc(['"onUpdate:" + ',s]):"onUpdate:modelValue";let x;const w=n.isTS?"($event: any)":"$event";x=Qc([`${w} => ((`,r,") = $event)"]);const A=[Ao(f,e.exp),Ao(g,x)];if(e.modifiers.length&&t.tagType===1){const C=e.modifiers.map(z=>z.content).map(z=>(aE(z)?z:JSON.stringify(z))+": true").join(", "),F=s?El(s)?`${s.content}Modifiers`:Qc([s,' + "Modifiers"']):"modelModifiers";A.push(Ao(F,ui(`{ ${C} }`,!1,e.loc,2)))}return wA(A)};function wA(e=[]){return{props:e}}const rtt=/[\w).+\-_$\]]/,itt=(e,t)=>{W_("COMPILER_FILTERS",t)&&(e.type===5?c3(e.content,t):e.type===1&&e.props.forEach(n=>{n.type===7&&n.name!=="for"&&n.exp&&c3(n.exp,t)}))};function c3(e,t){if(e.type===4)qq(e,t);else for(let n=0;n<e.children.length;n++){const r=e.children[n];typeof r=="object"&&(r.type===4?qq(r,t):r.type===8?c3(e,t):r.type===5&&c3(r.content,t))}}function qq(e,t){const n=e.content;let r=!1,s=!1,o=!1,c=!1,i=0,f=0,g=0,x=0,w,A,C,F,z=[];for(C=0;C<n.length;C++)if(A=w,w=n.charCodeAt(C),r)w===39&&A!==92&&(r=!1);else if(s)w===34&&A!==92&&(s=!1);else if(o)w===96&&A!==92&&(o=!1);else if(c)w===47&&A!==92&&(c=!1);else if(w===124&&n.charCodeAt(C+1)!==124&&n.charCodeAt(C-1)!==124&&!i&&!f&&!g)F===void 0?(x=C+1,F=n.slice(0,C).trim()):j();else{switch(w){case 34:s=!0;break;case 39:r=!0;break;case 96:o=!0;break;case 40:g++;break;case 41:g--;break;case 91:f++;break;case 93:f--;break;case 123:i++;break;case 125:i--;break}if(w===47){let V=C-1,Y;for(;V>=0&&(Y=n.charAt(V),Y===" ");V--);(!Y||!rtt.test(Y))&&(c=!0)}}F===void 0?F=n.slice(0,C).trim():x!==0&&j();function j(){z.push(n.slice(x,C).trim()),x=C+1}if(z.length){for(C=0;C<z.length;C++)F=stt(F,z[C],t);e.content=F,e.ast=void 0}}function stt(e,t,n){n.helper(rO);const r=t.indexOf("(");if(r<0)return n.filters.add(t),`${M1(t,"filter")}(${e})`;{const s=t.slice(0,r),o=t.slice(r+1);return n.filters.add(s),`${M1(s,"filter")}(${e}${o!==")"?","+o:o}`}}const Xq=new WeakSet,ott=(e,t)=>{if(e.type===1){const n=yl(e,"memo");return!n||Xq.has(e)||t.inSSR?void 0:(Xq.add(e),()=>{const r=e.codegenNode||t.currentNode.codegenNode;r&&r.type===13&&(e.tagType!==1&&dO(r,t),e.codegenNode=zo(t.helper(uO),[n.exp,cy(void 0,r),"_cache",String(t.cached.length)]),t.cached.push(null))})}},vle=(e,t)=>{if(e.type===1){for(const n of e.props)if(n.type===7&&n.name==="bind"&&!n.exp){const r=n.arg;if(r.type!==4||!r.isStatic)t.onError(Ns(52,r.loc)),n.exp=ui("",!0,r.loc);else{const s=Is(r.content);(Kz.test(s[0])||s[0]==="-")&&(n.exp=ui(s,!1,r.loc))}}}};function ble(e){return[[vle,ntt,Get,ott,qet,itt,ett,ple,dle,ttt],{on:oB,bind:yle,model:aB}]}function xle(e,t={}){const n=t.onError||Xz,r=t.mode==="module";t.prefixIdentifiers===!0?n(Ns(47)):r&&n(Ns(48));const s=!1;t.cacheHandlers&&n(Ns(49)),t.scopeId&&!r&&n(Ns(50));const o=Mi({},t,{prefixIdentifiers:s}),c=Kr(e)?tB(e,o):e,[i,f]=ble();return rle(c,Mi({},o,{nodeTransforms:[...i,...t.nodeTransforms||[]],directiveTransforms:Mi({},f,t.directiveTransforms||{})})),sle(c,o)}const att={DATA:"data",PROPS:"props",PROPS_ALIASED:"props-aliased",SETUP_LET:"setup-let",SETUP_CONST:"setup-const",SETUP_REACTIVE_CONST:"setup-reactive-const",SETUP_MAYBE_REF:"setup-maybe-ref",SETUP_REF:"setup-ref",OPTIONS:"options",LITERAL_CONST:"literal-const"},wle=()=>({props:[]});/**
* @vue/compiler-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const lB=Symbol(""),cB=Symbol(""),uB=Symbol(""),dB=Symbol(""),u3=Symbol(""),hB=Symbol(""),fB=Symbol(""),pB=Symbol(""),mB=Symbol(""),gB=Symbol("");Pae({[lB]:"vModelRadio",[cB]:"vModelCheckbox",[uB]:"vModelText",[dB]:"vModelSelect",[u3]:"vModelDynamic",[hB]:"withModifiers",[fB]:"withKeys",[pB]:"vShow",[mB]:"Transition",[gB]:"TransitionGroup"});let Xv;function ltt(e,t=!1){return Xv||(Xv=document.createElement("div")),t?(Xv.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,Xv.children[0].getAttribute("foo")):(Xv.innerHTML=e,Xv.textContent)}const _B={parseMode:"html",isVoidTag:oZ,isNativeTag:e=>rZ(e)||iZ(e)||sZ(e),isPreTag:e=>e==="pre",isIgnoreNewlineTag:e=>e==="pre"||e==="textarea",decodeEntities:ltt,isBuiltInComponent:e=>{if(e==="Transition"||e==="transition")return mB;if(e==="TransitionGroup"||e==="transition-group")return gB},getNamespace(e,t,n){let r=t?t.ns:n;if(t&&r===2)if(t.tag==="annotation-xml"){if(e==="svg")return 1;t.props.some(s=>s.type===6&&s.name==="encoding"&&s.value!=null&&(s.value.content==="text/html"||s.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&e!=="mglyph"&&e!=="malignmark"&&(r=0);else t&&r===1&&(t.tag==="foreignObject"||t.tag==="desc"||t.tag==="title")&&(r=0);if(r===0){if(e==="svg")return 1;if(e==="math")return 2}return r}},Sle=e=>{e.type===1&&e.props.forEach((t,n)=>{t.type===6&&t.name==="style"&&t.value&&(e.props[n]={type:7,name:"bind",arg:ui("style",!0,t.loc),exp:ctt(t.value.content,t.loc),modifiers:[],loc:t.loc})})},ctt=(e,t)=>{const n=w6(e);return ui(JSON.stringify(n),!1,t,3)};function ef(e,t){return Ns(e,t)}const utt={X_V_HTML_NO_EXPRESSION:53,53:"X_V_HTML_NO_EXPRESSION",X_V_HTML_WITH_CHILDREN:54,54:"X_V_HTML_WITH_CHILDREN",X_V_TEXT_NO_EXPRESSION:55,55:"X_V_TEXT_NO_EXPRESSION",X_V_TEXT_WITH_CHILDREN:56,56:"X_V_TEXT_WITH_CHILDREN",X_V_MODEL_ON_INVALID_ELEMENT:57,57:"X_V_MODEL_ON_INVALID_ELEMENT",X_V_MODEL_ARG_ON_ELEMENT:58,58:"X_V_MODEL_ARG_ON_ELEMENT",X_V_MODEL_ON_FILE_INPUT_ELEMENT:59,59:"X_V_MODEL_ON_FILE_INPUT_ELEMENT",X_V_MODEL_UNNECESSARY_VALUE:60,60:"X_V_MODEL_UNNECESSARY_VALUE",X_V_SHOW_NO_EXPRESSION:61,61:"X_V_SHOW_NO_EXPRESSION",X_TRANSITION_INVALID_CHILDREN:62,62:"X_TRANSITION_INVALID_CHILDREN",X_IGNORED_SIDE_EFFECT_TAG:63,63:"X_IGNORED_SIDE_EFFECT_TAG",__EXTEND_POINT__:64,64:"__EXTEND_POINT__"},dtt={53:"v-html is missing expression.",54:"v-html will override element children.",55:"v-text is missing expression.",56:"v-text will override element children.",57:"v-model can only be used on <input>, <textarea> and <select> elements.",58:"v-model argument is not supported on plain elements.",59:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",60:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",61:"v-show is missing expression.",62:"<Transition> expects exactly one child element or component.",63:"Tags with side effect (<script> and <style>) are ignored in client component templates."},htt=(e,t,n)=>{const{exp:r,loc:s}=e;return r||n.onError(ef(53,s)),t.children.length&&(n.onError(ef(54,s)),t.children.length=0),{props:[Ao(ui("innerHTML",!0,s),r||ui("",!0))]}},ftt=(e,t,n)=>{const{exp:r,loc:s}=e;return r||n.onError(ef(55,s)),t.children.length&&(n.onError(ef(56,s)),t.children.length=0),{props:[Ao(ui("textContent",!0),r?ec(r,n)>0?r:zo(n.helperString(oE),[r],s):ui("",!0))]}},ptt=(e,t,n)=>{const r=aB(e,t,n);if(!r.props.length||t.tagType===1)return r;e.arg&&n.onError(ef(58,e.arg.loc));const{tag:s}=t,o=n.isCustomElement(s);if(s==="input"||s==="textarea"||s==="select"||o){let c=uB,i=!1;if(s==="input"||o){const f=lE(t,"type");if(f){if(f.type===7)c=u3;else if(f.value)switch(f.value.content){case"radio":c=lB;break;case"checkbox":c=cB;break;case"file":i=!0,n.onError(ef(59,e.loc));break}}else Hae(t)&&(c=u3)}else s==="select"&&(c=dB);i||(r.needRuntime=n.helper(c))}else n.onError(ef(57,e.loc));return r.props=r.props.filter(c=>!(c.key.type===4&&c.key.content==="modelValue")),r},mtt=ca("passive,once,capture"),gtt=ca("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),_tt=ca("left,right"),Ele=ca("onkeyup,onkeydown,onkeypress"),ytt=(e,t,n,r)=>{const s=[],o=[],c=[];for(let i=0;i<t.length;i++){const f=t[i].content;f==="native"&&E1("COMPILER_V_ON_NATIVE",n)||mtt(f)?c.push(f):_tt(f)?El(e)?Ele(e.content.toLowerCase())?s.push(f):o.push(f):(s.push(f),o.push(f)):gtt(f)?o.push(f):s.push(f)}return{keyModifiers:s,nonKeyModifiers:o,eventOptionModifiers:c}},Zq=(e,t)=>El(e)&&e.content.toLowerCase()==="onclick"?ui(t,!0):e.type!==4?Qc(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e,vtt=(e,t,n)=>oB(e,t,n,r=>{const{modifiers:s}=e;if(!s.length)return r;let{key:o,value:c}=r.props[0];const{keyModifiers:i,nonKeyModifiers:f,eventOptionModifiers:g}=ytt(o,s,n,e.loc);if(f.includes("right")&&(o=Zq(o,"onContextmenu")),f.includes("middle")&&(o=Zq(o,"onMouseup")),f.length&&(c=zo(n.helper(hB),[c,JSON.stringify(f)])),i.length&&(!El(o)||Ele(o.content.toLowerCase()))&&(c=zo(n.helper(fB),[c,JSON.stringify(i)])),g.length){const x=g.map(Xm).join("");o=El(o)?ui(`${o.content}${x}`,!0):Qc(["(",o,`) + "${x}"`])}return{props:[Ao(o,c)]}}),btt=(e,t,n)=>{const{exp:r,loc:s}=e;return r||n.onError(ef(61,s)),{props:[],needRuntime:n.helper(pB)}},xtt=(e,t)=>{e.type===1&&e.tagType===0&&(e.tag==="script"||e.tag==="style")&&t.removeNode()},Tle=[Sle],Mle={cloak:wle,html:htt,text:ftt,model:ptt,on:vtt,show:btt};function wtt(e,t={}){return xle(e,Mi({},_B,t,{nodeTransforms:[xtt,...Tle,...t.nodeTransforms||[]],directiveTransforms:Mi({},Mle,t.directiveTransforms||{}),transformHoist:null}))}function Stt(e,t={}){return tB(e,Mi({},_B,t))}const Ett=Object.freeze(Object.defineProperty({__proto__:null,BASE_TRANSITION:jz,BindingTypes:att,CAMELIZE:i3,CAPITALIZE:Tae,CREATE_BLOCK:Uz,CREATE_COMMENT:K1,CREATE_ELEMENT_BLOCK:Hz,CREATE_ELEMENT_VNODE:JP,CREATE_SLOTS:Yz,CREATE_STATIC:Wz,CREATE_TEXT:QP,CREATE_VNODE:KP,CompilerDeprecationTypes:jQe,ConstantTypes:kQe,DOMDirectiveTransforms:Mle,DOMErrorCodes:utt,DOMErrorMessages:dtt,DOMNodeTransforms:Tle,ElementTypes:RQe,ErrorCodes:WQe,FRAGMENT:x1,GUARD_REACTIVE_PROPS:J1,IS_MEMO_SAME:qz,IS_REF:Iae,KEEP_ALIVE:vS,MERGE_PROPS:bS,NORMALIZE_CLASS:oO,NORMALIZE_PROPS:w1,NORMALIZE_STYLE:aO,Namespaces:OQe,NodeTypes:DQe,OPEN_BLOCK:Um,POP_SCOPE_ID:Aae,PUSH_SCOPE_ID:Mae,RENDER_LIST:sO,RENDER_SLOT:Gz,RESOLVE_COMPONENT:eO,RESOLVE_DIRECTIVE:nO,RESOLVE_DYNAMIC_COMPONENT:tO,RESOLVE_FILTER:rO,SET_BLOCK_TRACKING:xS,SUSPENSE:ZP,TELEPORT:L0,TO_DISPLAY_STRING:oE,TO_HANDLERS:lO,TO_HANDLER_KEY:s3,TRANSITION:mB,TRANSITION_GROUP:gB,TS_NODE_TYPES:Fae,UNREF:Cae,V_MODEL_CHECKBOX:cB,V_MODEL_DYNAMIC:u3,V_MODEL_RADIO:lB,V_MODEL_SELECT:dB,V_MODEL_TEXT:uB,V_ON_WITH_KEYS:fB,V_ON_WITH_MODIFIERS:hB,V_SHOW:pB,WITH_CTX:cO,WITH_DIRECTIVES:iO,WITH_MEMO:uO,advancePositionWithClone:uet,advancePositionWithMutation:Uae,assert:det,baseCompile:xle,baseParse:tB,buildDirectiveArgs:gle,buildProps:sB,buildSlots:hle,checkCompatEnabled:E1,compile:wtt,convertToBlock:dO,createArrayExpression:Om,createAssignmentExpression:zQe,createBlockStatement:Rae,createCacheExpression:Dae,createCallExpression:zo,createCompilerError:Ns,createCompoundExpression:Qc,createConditionalExpression:o3,createDOMCompilerError:ef,createForLoopParams:l3,createFunctionExpression:cy,createIfStatement:FQe,createInterpolation:LQe,createObjectExpression:Sc,createObjectProperty:Ao,createReturnStatement:$Qe,createRoot:Oae,createSequenceExpression:BQe,createSimpleExpression:ui,createStructuralDirectiveTransform:nB,createTemplateLiteral:NQe,createTransformContext:nle,createVNodeCall:S1,errorMessages:GQe,extractIdentifiers:Fd,findDir:yl,findProp:lE,forAliasRE:Yae,generate:sle,generateCodeFrame:nZ,getBaseTransformPreset:ble,getConstantType:ec,getMemoedVNodeCall:Gae,getVNodeBlockHelper:dy,getVNodeHelper:uy,hasDynamicKeyVBind:Hae,hasScopeRef:Nu,helperNameMap:ly,injectProp:SS,isCoreComponent:Zz,isFnExpression:jae,isFnExpressionBrowser:Vae,isFnExpressionNode:cet,isFunctionType:tet,isInDestructureAssignment:XQe,isInNewExpression:ZQe,isMemberExpression:Jz,isMemberExpressionBrowser:$ae,isMemberExpressionNode:oet,isReferencedIdentifier:qQe,isSimpleIdentifier:aE,isSlotOutlet:wS,isStaticArgOf:gm,isStaticExp:El,isStaticProperty:Nae,isStaticPropertyKey:net,isTemplateNode:T1,isText:EC,isVPre:H5,isVSlot:Qz,locStub:ea,noopDirectiveTransform:wle,parse:Stt,parserOptions:_B,processExpression:CC,processFor:ule,processIf:cle,processSlotOutlet:_le,registerRuntimeHelpers:Pae,resolveComponentType:mle,stringifyExpression:lle,toValidAssetId:M1,trackSlotScopes:dle,trackVForSlotScopes:Zet,transform:rle,transformBind:yle,transformElement:ple,transformExpression:Wet,transformModel:aB,transformOn:oB,transformStyle:Sle,transformVBindShorthand:vle,traverseNode:cE,unwrapTSNode:zae,validFirstIdentCharRE:Kz,walkBlockDeclarations:Lae,walkFunctionParams:KQe,walkIdentifiers:YQe,warnDeprecation:HQe},Symbol.toStringTag,{value:"Module"})),Ttt=G3(Ett),Mtt=G3(Pge),Att=G3(Tfe);/**
* vue v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/var Kq;function Ctt(){return Kq||(Kq=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ttt,n=Mtt,r=Att;function s(f){var g=Object.create(null);if(f)for(var x in f)g[x]=f[x];return g.default=f,Object.freeze(g)}var o=s(n);const c=Object.create(null);function i(f,g){if(!r.isString(f))if(f.nodeType)f=f.innerHTML;else return r.NOOP;const x=r.genCacheKey(f,g),w=c[x];if(w)return w;if(f[0]==="#"){const z=document.querySelector(f);f=z?z.innerHTML:""}const A=r.extend({hoistStatic:!0,onError:void 0,onWarn:r.NOOP},g);!A.isCustomElement&&typeof customElements<"u"&&(A.isCustomElement=z=>!!customElements.get(z));const{code:C}=t.compile(f,A),F=new Function("Vue",C)(o);return F._rc=!0,c[x]=F}n.registerRuntimeCompiler(i),e.compile=i,Object.keys(n).forEach(function(f){f!=="default"&&!Object.prototype.hasOwnProperty.call(e,f)&&(e[f]=n[f])})})(XR)),XR}var Jq;function Ale(){return Jq||(Jq=1,qR.exports=Ctt()),qR.exports}/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Qq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function rh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qq(Object(n),!0).forEach(function(r){Itt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qq(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PC(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?PC=function(t){return typeof t}:PC=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PC(e)}function Itt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ru(){return ru=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ru.apply(this,arguments)}function Ptt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Ott(e,t){if(e==null)return{};var n=Ptt(e,t),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Dtt(e){return Rtt(e)||ktt(e)||Ltt(e)||Ntt()}function Rtt(e){if(Array.isArray(e))return X5(e)}function ktt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ltt(e,t){if(e){if(typeof e=="string")return X5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X5(e,t)}}function X5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ntt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ftt="1.14.0";function tf(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Df=tf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),dE=tf(/Edge/i),eX=tf(/firefox/i),v2=tf(/safari/i)&&!tf(/chrome/i)&&!tf(/android/i),Cle=tf(/iP(ad|od|hone)/i),ztt=tf(/chrome/i)&&tf(/android/i),Ile={capture:!1,passive:!1};function Di(e,t,n){e.addEventListener(t,n,!Df&&Ile)}function Ei(e,t,n){e.removeEventListener(t,n,!Df&&Ile)}function d3(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Btt(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Vu(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&d3(e,t):d3(e,t))||r&&e===n)return e;if(e===n)break}while(e=Btt(e))}return null}var tX=/\s+/g;function Js(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(tX," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(tX," ")}}function _r(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function G_(e,t){var n="";if(typeof e=="string")n=e;else do{var r=_r(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function Ple(e,t,n){if(e){var r=e.getElementsByTagName(t),s=0,o=r.length;if(n)for(;s<o;s++)n(r[s],s);return r}return[]}function Xd(){var e=document.scrollingElement;return e||document.documentElement}function Us(e,t,n,r,s){if(!(!e.getBoundingClientRect&&e!==window)){var o,c,i,f,g,x,w;if(e!==window&&e.parentNode&&e!==Xd()?(o=e.getBoundingClientRect(),c=o.top,i=o.left,f=o.bottom,g=o.right,x=o.height,w=o.width):(c=0,i=0,f=window.innerHeight,g=window.innerWidth,x=window.innerHeight,w=window.innerWidth),(t||n)&&e!==window&&(s=s||e.parentNode,!Df))do if(s&&s.getBoundingClientRect&&(_r(s,"transform")!=="none"||n&&_r(s,"position")!=="static")){var A=s.getBoundingClientRect();c-=A.top+parseInt(_r(s,"border-top-width")),i-=A.left+parseInt(_r(s,"border-left-width")),f=c+o.height,g=i+o.width;break}while(s=s.parentNode);if(r&&e!==window){var C=G_(s||e),F=C&&C.a,z=C&&C.d;C&&(c/=z,i/=F,w/=F,x/=z,f=c+x,g=i+w)}return{top:c,left:i,bottom:f,right:g,width:w,height:x}}}function nX(e,t,n){for(var r=_m(e,!0),s=Us(e)[t];r;){var o=Us(r)[n],c=void 0;if(c=s>=o,!c)return r;if(r===Xd())break;r=_m(r,!1)}return!1}function A1(e,t,n,r){for(var s=0,o=0,c=e.children;o<c.length;){if(c[o].style.display!=="none"&&c[o]!==Vr.ghost&&(r||c[o]!==Vr.dragged)&&Vu(c[o],n.draggable,e,!1)){if(s===t)return c[o];s++}o++}return null}function yB(e,t){for(var n=e.lastElementChild;n&&(n===Vr.ghost||_r(n,"display")==="none"||t&&!d3(n,t));)n=n.previousElementSibling;return n||null}function ho(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Vr.clone&&(!t||d3(e,t))&&n++;return n}function rX(e){var t=0,n=0,r=Xd();if(e)do{var s=G_(e),o=s.a,c=s.d;t+=e.scrollLeft*o,n+=e.scrollTop*c}while(e!==r&&(e=e.parentNode));return[t,n]}function $tt(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function _m(e,t){if(!e||!e.getBoundingClientRect)return Xd();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=_r(n);if(n.clientWidth<n.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Xd();if(r||t)return n;r=!0}}while(n=n.parentNode);return Xd()}function Vtt(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function KR(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var b2;function Ole(e,t){return function(){if(!b2){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),b2=setTimeout(function(){b2=void 0},t)}}}function jtt(){clearTimeout(b2),b2=void 0}function Dle(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function vB(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function iX(e,t){_r(e,"position","absolute"),_r(e,"top",t.top),_r(e,"left",t.left),_r(e,"width",t.width),_r(e,"height",t.height)}function JR(e){_r(e,"position",""),_r(e,"top",""),_r(e,"left",""),_r(e,"width",""),_r(e,"height","")}var Wa="Sortable"+new Date().getTime();function Utt(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(s){if(!(_r(s,"display")==="none"||s===Vr.ghost)){e.push({target:s,rect:Us(s)});var o=rh({},e[e.length-1].rect);if(s.thisAnimationDuration){var c=G_(s,!0);c&&(o.top-=c.f,o.left-=c.e)}s.fromRect=o}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice($tt(e,{target:r}),1)},animateAll:function(r){var s=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var o=!1,c=0;e.forEach(function(i){var f=0,g=i.target,x=g.fromRect,w=Us(g),A=g.prevFromRect,C=g.prevToRect,F=i.rect,z=G_(g,!0);z&&(w.top-=z.f,w.left-=z.e),g.toRect=w,g.thisAnimationDuration&&KR(A,w)&&!KR(x,w)&&(F.top-w.top)/(F.left-w.left)===(x.top-w.top)/(x.left-w.left)&&(f=Wtt(F,A,C,s.options)),KR(w,x)||(g.prevFromRect=x,g.prevToRect=w,f||(f=s.options.animation),s.animate(g,F,w,f)),f&&(o=!0,c=Math.max(c,f),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},f),g.thisAnimationDuration=f)}),clearTimeout(t),o?t=setTimeout(function(){typeof r=="function"&&r()},c):typeof r=="function"&&r(),e=[]},animate:function(r,s,o,c){if(c){_r(r,"transition",""),_r(r,"transform","");var i=G_(this.el),f=i&&i.a,g=i&&i.d,x=(s.left-o.left)/(f||1),w=(s.top-o.top)/(g||1);r.animatingX=!!x,r.animatingY=!!w,_r(r,"transform","translate3d("+x+"px,"+w+"px,0)"),this.forRepaintDummy=Htt(r),_r(r,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),_r(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){_r(r,"transition",""),_r(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},c)}}}}function Htt(e){return e.offsetWidth}function Wtt(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var Zv=[],QR={initializeByDefault:!0},hE={mount:function(t){for(var n in QR)QR.hasOwnProperty(n)&&!(n in t)&&(t[n]=QR[n]);Zv.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Zv.push(t)},pluginEvent:function(t,n,r){var s=this;this.eventCanceled=!1,r.cancel=function(){s.eventCanceled=!0};var o=t+"Global";Zv.forEach(function(c){n[c.pluginName]&&(n[c.pluginName][o]&&n[c.pluginName][o](rh({sortable:n},r)),n.options[c.pluginName]&&n[c.pluginName][t]&&n[c.pluginName][t](rh({sortable:n},r)))})},initializePlugins:function(t,n,r,s){Zv.forEach(function(i){var f=i.pluginName;if(!(!t.options[f]&&!i.initializeByDefault)){var g=new i(t,n,t.options);g.sortable=t,g.options=t.options,t[f]=g,ru(r,g.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var c=this.modifyOption(t,o,t.options[o]);typeof c<"u"&&(t.options[o]=c)}},getEventProperties:function(t,n){var r={};return Zv.forEach(function(s){typeof s.eventProperties=="function"&&ru(r,s.eventProperties.call(n[s.pluginName],t))}),r},modifyOption:function(t,n,r){var s;return Zv.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(s=o.optionListeners[n].call(t[o.pluginName],r))}),s}};function $w(e){var t=e.sortable,n=e.rootEl,r=e.name,s=e.targetEl,o=e.cloneEl,c=e.toEl,i=e.fromEl,f=e.oldIndex,g=e.newIndex,x=e.oldDraggableIndex,w=e.newDraggableIndex,A=e.originalEvent,C=e.putSortable,F=e.extraEventProperties;if(t=t||n&&n[Wa],!!t){var z,j=t.options,V="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Df&&!dE?z=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(z=document.createEvent("Event"),z.initEvent(r,!0,!0)),z.to=c||n,z.from=i||n,z.item=s||n,z.clone=o,z.oldIndex=f,z.newIndex=g,z.oldDraggableIndex=x,z.newDraggableIndex=w,z.originalEvent=A,z.pullMode=C?C.lastPutMode:void 0;var Y=rh(rh({},F),hE.getEventProperties(r,t));for(var te in Y)z[te]=Y[te];n&&n.dispatchEvent(z),j[V]&&j[V].call(t,z)}}var Gtt=["evt"],jl=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.evt,o=Ott(r,Gtt);hE.pluginEvent.bind(Vr)(t,n,rh({dragEl:Yn,parentEl:lo,ghostEl:mi,rootEl:Vs,nextEl:g_,lastDownEl:OC,cloneEl:co,cloneHidden:lm,dragStarted:Vw,putSortable:_a,activeSortable:Vr.active,originalEvent:s,oldIndex:_0,oldDraggableIndex:x2,newIndex:_c,newDraggableIndex:im,hideGhostForTarget:Nle,unhideGhostForTarget:Fle,cloneNowHidden:function(){lm=!0},cloneNowShown:function(){lm=!1},dispatchSortableEvent:function(i){ul({sortable:n,name:i,originalEvent:s})}},o))};function ul(e){$w(rh({putSortable:_a,cloneEl:co,targetEl:Yn,rootEl:Vs,oldIndex:_0,oldDraggableIndex:x2,newIndex:_c,newDraggableIndex:im},e))}var Yn,lo,mi,Vs,g_,OC,co,lm,_0,_c,x2,im,SA,_a,s0=!1,h3=!1,f3=[],c_,Ou,ek,tk,sX,oX,Vw,Kv,w2,S2=!1,EA=!1,DC,La,nk=[],Z5=!1,p3=[],fO=typeof document<"u",TA=Cle,aX=dE||Df?"cssFloat":"float",Ytt=fO&&!ztt&&!Cle&&"draggable"in document.createElement("div"),Rle=(function(){if(fO){if(Df)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}})(),kle=function(t,n){var r=_r(t),s=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=A1(t,0,n),c=A1(t,1,n),i=o&&_r(o),f=c&&_r(c),g=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+Us(o).width,x=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Us(c).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&i.float&&i.float!=="none"){var w=i.float==="left"?"left":"right";return c&&(f.clear==="both"||f.clear===w)?"vertical":"horizontal"}return o&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||g>=s&&r[aX]==="none"||c&&r[aX]==="none"&&g+x>s)?"vertical":"horizontal"},qtt=function(t,n,r){var s=r?t.left:t.top,o=r?t.right:t.bottom,c=r?t.width:t.height,i=r?n.left:n.top,f=r?n.right:n.bottom,g=r?n.width:n.height;return s===i||o===f||s+c/2===i+g/2},Xtt=function(t,n){var r;return f3.some(function(s){var o=s[Wa].options.emptyInsertThreshold;if(!(!o||yB(s))){var c=Us(s),i=t>=c.left-o&&t<=c.right+o,f=n>=c.top-o&&n<=c.bottom+o;if(i&&f)return r=s}}),r},Lle=function(t){function n(o,c){return function(i,f,g,x){var w=i.options.group.name&&f.options.group.name&&i.options.group.name===f.options.group.name;if(o==null&&(c||w))return!0;if(o==null||o===!1)return!1;if(c&&o==="clone")return o;if(typeof o=="function")return n(o(i,f,g,x),c)(i,f,g,x);var A=(c?i:f).options.group.name;return o===!0||typeof o=="string"&&o===A||o.join&&o.indexOf(A)>-1}}var r={},s=t.group;(!s||PC(s)!="object")&&(s={name:s}),r.name=s.name,r.checkPull=n(s.pull,!0),r.checkPut=n(s.put),r.revertClone=s.revertClone,t.group=r},Nle=function(){!Rle&&mi&&_r(mi,"display","none")},Fle=function(){!Rle&&mi&&_r(mi,"display","")};fO&&document.addEventListener("click",function(e){if(h3)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),h3=!1,!1},!0);var u_=function(t){if(Yn){t=t.touches?t.touches[0]:t;var n=Xtt(t.clientX,t.clientY);if(n){var r={};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Wa]._onDragOver(r)}}},Ztt=function(t){Yn&&Yn.parentNode[Wa]._isOutsideThisEl(t.target)};function Vr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ru({},t),e[Wa]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return kle(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,i){c.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Vr.supportPointer!==!1&&"PointerEvent"in window&&!v2,emptyInsertThreshold:5};hE.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);Lle(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:Ytt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Di(e,"pointerdown",this._onTapStart):(Di(e,"mousedown",this._onTapStart),Di(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Di(e,"dragover",this),Di(e,"dragenter",this)),f3.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ru(this,Utt())}Vr.prototype={constructor:Vr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Kv=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,Yn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,s=this.options,o=s.preventOnFilter,c=t.type,i=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,f=(i||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||f,x=s.filter;if(int(r),!Yn&&!(/mousedown|pointerdown/.test(c)&&t.button!==0||s.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&v2&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=Vu(f,s.draggable,r,!1),!(f&&f.animated)&&OC!==f)){if(_0=ho(f),x2=ho(f,s.draggable),typeof x=="function"){if(x.call(this,t,f,this)){ul({sortable:n,rootEl:g,name:"filter",targetEl:f,toEl:r,fromEl:r}),jl("filter",n,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(x&&(x=x.split(",").some(function(w){if(w=Vu(g,w.trim(),r,!1),w)return ul({sortable:n,rootEl:w,name:"filter",targetEl:f,fromEl:r,toEl:r}),jl("filter",n,{evt:t}),!0}),x)){o&&t.cancelable&&t.preventDefault();return}s.handle&&!Vu(g,s.handle,r,!1)||this._prepareDragStart(t,i,f)}}},_prepareDragStart:function(t,n,r){var s=this,o=s.el,c=s.options,i=o.ownerDocument,f;if(r&&!Yn&&r.parentNode===o){var g=Us(r);if(Vs=o,Yn=r,lo=Yn.parentNode,g_=Yn.nextSibling,OC=r,SA=c.group,Vr.dragged=Yn,c_={target:Yn,clientX:(n||t).clientX,clientY:(n||t).clientY},sX=c_.clientX-g.left,oX=c_.clientY-g.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,Yn.style["will-change"]="all",f=function(){if(jl("delayEnded",s,{evt:t}),Vr.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!eX&&s.nativeDraggable&&(Yn.draggable=!0),s._triggerDragStart(t,n),ul({sortable:s,name:"choose",originalEvent:t}),Js(Yn,c.chosenClass,!0)},c.ignore.split(",").forEach(function(x){Ple(Yn,x.trim(),rk)}),Di(i,"dragover",u_),Di(i,"mousemove",u_),Di(i,"touchmove",u_),Di(i,"mouseup",s._onDrop),Di(i,"touchend",s._onDrop),Di(i,"touchcancel",s._onDrop),eX&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Yn.draggable=!0),jl("delayStart",this,{evt:t}),c.delay&&(!c.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(dE||Df))){if(Vr.eventCanceled){this._onDrop();return}Di(i,"mouseup",s._disableDelayedDrag),Di(i,"touchend",s._disableDelayedDrag),Di(i,"touchcancel",s._disableDelayedDrag),Di(i,"mousemove",s._delayedDragTouchMoveHandler),Di(i,"touchmove",s._delayedDragTouchMoveHandler),c.supportPointer&&Di(i,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(f,c.delay)}else f()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Yn&&rk(Yn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Ei(t,"mouseup",this._disableDelayedDrag),Ei(t,"touchend",this._disableDelayedDrag),Ei(t,"touchcancel",this._disableDelayedDrag),Ei(t,"mousemove",this._delayedDragTouchMoveHandler),Ei(t,"touchmove",this._delayedDragTouchMoveHandler),Ei(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?Di(document,"pointermove",this._onTouchMove):n?Di(document,"touchmove",this._onTouchMove):Di(document,"mousemove",this._onTouchMove):(Di(Yn,"dragend",this),Di(Vs,"dragstart",this._onDragStart));try{document.selection?RC(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(s0=!1,Vs&&Yn){jl("dragStarted",this,{evt:n}),this.nativeDraggable&&Di(document,"dragover",Ztt);var r=this.options;!t&&Js(Yn,r.dragClass,!1),Js(Yn,r.ghostClass,!0),Vr.active=this,t&&this._appendGhost(),ul({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ou){this._lastX=Ou.clientX,this._lastY=Ou.clientY,Nle();for(var t=document.elementFromPoint(Ou.clientX,Ou.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ou.clientX,Ou.clientY),t!==n);)n=t;if(Yn.parentNode[Wa]._isOutsideThisEl(t),n)do{if(n[Wa]){var r=void 0;if(r=n[Wa]._onDragOver({clientX:Ou.clientX,clientY:Ou.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);Fle()}},_onTouchMove:function(t){if(c_){var n=this.options,r=n.fallbackTolerance,s=n.fallbackOffset,o=t.touches?t.touches[0]:t,c=mi&&G_(mi,!0),i=mi&&c&&c.a,f=mi&&c&&c.d,g=TA&&La&&rX(La),x=(o.clientX-c_.clientX+s.x)/(i||1)+(g?g[0]-nk[0]:0)/(i||1),w=(o.clientY-c_.clientY+s.y)/(f||1)+(g?g[1]-nk[1]:0)/(f||1);if(!Vr.active&&!s0){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(mi){c?(c.e+=x-(ek||0),c.f+=w-(tk||0)):c={a:1,b:0,c:0,d:1,e:x,f:w};var A="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");_r(mi,"webkitTransform",A),_r(mi,"mozTransform",A),_r(mi,"msTransform",A),_r(mi,"transform",A),ek=x,tk=w,Ou=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!mi){var t=this.options.fallbackOnBody?document.body:Vs,n=Us(Yn,!0,TA,!0,t),r=this.options;if(TA){for(La=t;_r(La,"position")==="static"&&_r(La,"transform")==="none"&&La!==document;)La=La.parentNode;La!==document.body&&La!==document.documentElement?(La===document&&(La=Xd()),n.top+=La.scrollTop,n.left+=La.scrollLeft):La=Xd(),nk=rX(La)}mi=Yn.cloneNode(!0),Js(mi,r.ghostClass,!1),Js(mi,r.fallbackClass,!0),Js(mi,r.dragClass,!0),_r(mi,"transition",""),_r(mi,"transform",""),_r(mi,"box-sizing","border-box"),_r(mi,"margin",0),_r(mi,"top",n.top),_r(mi,"left",n.left),_r(mi,"width",n.width),_r(mi,"height",n.height),_r(mi,"opacity","0.8"),_r(mi,"position",TA?"absolute":"fixed"),_r(mi,"zIndex","100000"),_r(mi,"pointerEvents","none"),Vr.ghost=mi,t.appendChild(mi),_r(mi,"transform-origin",sX/parseInt(mi.style.width)*100+"% "+oX/parseInt(mi.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,s=t.dataTransfer,o=r.options;if(jl("dragStart",this,{evt:t}),Vr.eventCanceled){this._onDrop();return}jl("setupClone",this),Vr.eventCanceled||(co=vB(Yn),co.draggable=!1,co.style["will-change"]="",this._hideClone(),Js(co,this.options.chosenClass,!1),Vr.clone=co),r.cloneId=RC(function(){jl("clone",r),!Vr.eventCanceled&&(r.options.removeCloneOnHide||Vs.insertBefore(co,Yn),r._hideClone(),ul({sortable:r,name:"clone"}))}),!n&&Js(Yn,o.dragClass,!0),n?(h3=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Ei(document,"mouseup",r._onDrop),Ei(document,"touchend",r._onDrop),Ei(document,"touchcancel",r._onDrop),s&&(s.effectAllowed="move",o.setData&&o.setData.call(r,s,Yn)),Di(document,"drop",r),_r(Yn,"transform","translateZ(0)")),s0=!0,r._dragStartId=RC(r._dragStarted.bind(r,n,t)),Di(document,"selectstart",r),Vw=!0,v2&&_r(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,s,o,c,i=this.options,f=i.group,g=Vr.active,x=SA===f,w=i.sort,A=_a||g,C,F=this,z=!1;if(Z5)return;function j(He,Ke){jl(He,F,rh({evt:t,isOwner:x,axis:C?"vertical":"horizontal",revert:c,dragRect:s,targetRect:o,canSort:w,fromSortable:A,target:r,completed:Y,onMove:function($t,Ft){return MA(Vs,n,Yn,s,$t,Us($t),t,Ft)},changed:te},Ke))}function V(){j("dragOverAnimationCapture"),F.captureAnimationState(),F!==A&&A.captureAnimationState()}function Y(He){return j("dragOverCompleted",{insertion:He}),He&&(x?g._hideClone():g._showClone(F),F!==A&&(Js(Yn,_a?_a.options.ghostClass:g.options.ghostClass,!1),Js(Yn,i.ghostClass,!0)),_a!==F&&F!==Vr.active?_a=F:F===Vr.active&&_a&&(_a=null),A===F&&(F._ignoreWhileAnimating=r),F.animateAll(function(){j("dragOverAnimationComplete"),F._ignoreWhileAnimating=null}),F!==A&&(A.animateAll(),A._ignoreWhileAnimating=null)),(r===Yn&&!Yn.animated||r===n&&!r.animated)&&(Kv=null),!i.dragoverBubble&&!t.rootEl&&r!==document&&(Yn.parentNode[Wa]._isOutsideThisEl(t.target),!He&&u_(t)),!i.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),z=!0}function te(){_c=ho(Yn),im=ho(Yn,i.draggable),ul({sortable:F,name:"change",toEl:n,newIndex:_c,newDraggableIndex:im,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=Vu(r,i.draggable,n,!0),j("dragOver"),Vr.eventCanceled)return z;if(Yn.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||F._ignoreWhileAnimating===r)return Y(!1);if(h3=!1,g&&!i.disabled&&(x?w||(c=lo!==Vs):_a===this||(this.lastPutMode=SA.checkPull(this,g,Yn,t))&&f.checkPut(this,g,Yn,t))){if(C=this._getDirection(t,r)==="vertical",s=Us(Yn),j("dragOverValid"),Vr.eventCanceled)return z;if(c)return lo=Vs,V(),this._hideClone(),j("revert"),Vr.eventCanceled||(g_?Vs.insertBefore(Yn,g_):Vs.appendChild(Yn)),Y(!0);var J=yB(n,i.draggable);if(!J||ent(t,C,this)&&!J.animated){if(J===Yn)return Y(!1);if(J&&n===t.target&&(r=J),r&&(o=Us(r)),MA(Vs,n,Yn,s,r,o,t,!!r)!==!1)return V(),n.appendChild(Yn),lo=n,te(),Y(!0)}else if(J&&Qtt(t,C,this)){var ee=A1(n,0,i,!0);if(ee===Yn)return Y(!1);if(r=ee,o=Us(r),MA(Vs,n,Yn,s,r,o,t,!1)!==!1)return V(),n.insertBefore(Yn,ee),lo=n,te(),Y(!0)}else if(r.parentNode===n){o=Us(r);var le=0,oe,ve=Yn.parentNode!==n,se=!qtt(Yn.animated&&Yn.toRect||s,r.animated&&r.toRect||o,C),ie=C?"top":"left",pe=nX(r,"top","top")||nX(Yn,"top","top"),be=pe?pe.scrollTop:void 0;Kv!==r&&(oe=o[ie],S2=!1,EA=!se&&i.invertSwap||ve),le=tnt(t,r,o,C,se?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,EA,Kv===r);var Se;if(le!==0){var Ce=ho(Yn);do Ce-=le,Se=lo.children[Ce];while(Se&&(_r(Se,"display")==="none"||Se===mi))}if(le===0||Se===r)return Y(!1);Kv=r,w2=le;var Ee=r.nextElementSibling,xe=!1;xe=le===1;var ke=MA(Vs,n,Yn,s,r,o,t,xe);if(ke!==!1)return(ke===1||ke===-1)&&(xe=ke===1),Z5=!0,setTimeout(Jtt,30),V(),xe&&!Ee?n.appendChild(Yn):r.parentNode.insertBefore(Yn,xe?Ee:r),pe&&Dle(pe,0,be-pe.scrollTop),lo=Yn.parentNode,oe!==void 0&&!EA&&(DC=Math.abs(oe-Us(r)[ie])),te(),Y(!0)}if(n.contains(Yn))return Y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ei(document,"mousemove",this._onTouchMove),Ei(document,"touchmove",this._onTouchMove),Ei(document,"pointermove",this._onTouchMove),Ei(document,"dragover",u_),Ei(document,"mousemove",u_),Ei(document,"touchmove",u_)},_offUpEvents:function(){var t=this.el.ownerDocument;Ei(t,"mouseup",this._onDrop),Ei(t,"touchend",this._onDrop),Ei(t,"pointerup",this._onDrop),Ei(t,"touchcancel",this._onDrop),Ei(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(_c=ho(Yn),im=ho(Yn,r.draggable),jl("drop",this,{evt:t}),lo=Yn&&Yn.parentNode,_c=ho(Yn),im=ho(Yn,r.draggable),Vr.eventCanceled){this._nulling();return}s0=!1,EA=!1,S2=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),K5(this.cloneId),K5(this._dragStartId),this.nativeDraggable&&(Ei(document,"drop",this),Ei(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),v2&&_r(document.body,"user-select",""),_r(Yn,"transform",""),t&&(Vw&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),mi&&mi.parentNode&&mi.parentNode.removeChild(mi),(Vs===lo||_a&&_a.lastPutMode!=="clone")&&co&&co.parentNode&&co.parentNode.removeChild(co),Yn&&(this.nativeDraggable&&Ei(Yn,"dragend",this),rk(Yn),Yn.style["will-change"]="",Vw&&!s0&&Js(Yn,_a?_a.options.ghostClass:this.options.ghostClass,!1),Js(Yn,this.options.chosenClass,!1),ul({sortable:this,name:"unchoose",toEl:lo,newIndex:null,newDraggableIndex:null,originalEvent:t}),Vs!==lo?(_c>=0&&(ul({rootEl:lo,name:"add",toEl:lo,fromEl:Vs,originalEvent:t}),ul({sortable:this,name:"remove",toEl:lo,originalEvent:t}),ul({rootEl:lo,name:"sort",toEl:lo,fromEl:Vs,originalEvent:t}),ul({sortable:this,name:"sort",toEl:lo,originalEvent:t})),_a&&_a.save()):_c!==_0&&_c>=0&&(ul({sortable:this,name:"update",toEl:lo,originalEvent:t}),ul({sortable:this,name:"sort",toEl:lo,originalEvent:t})),Vr.active&&((_c==null||_c===-1)&&(_c=_0,im=x2),ul({sortable:this,name:"end",toEl:lo,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){jl("nulling",this),Vs=Yn=lo=mi=g_=co=OC=lm=c_=Ou=Vw=_c=im=_0=x2=Kv=w2=_a=SA=Vr.dragged=Vr.ghost=Vr.clone=Vr.active=null,p3.forEach(function(t){t.checked=!0}),p3.length=ek=tk=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Yn&&(this._onDragOver(t),Ktt(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,s=0,o=r.length,c=this.options;s<o;s++)n=r[s],Vu(n,c.draggable,this.el,!1)&&t.push(n.getAttribute(c.dataIdAttr)||rnt(n));return t},sort:function(t,n){var r={},s=this.el;this.toArray().forEach(function(o,c){var i=s.children[c];Vu(i,this.options.draggable,s,!1)&&(r[o]=i)},this),n&&this.captureAnimationState(),t.forEach(function(o){r[o]&&(s.removeChild(r[o]),s.appendChild(r[o]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Vu(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var s=hE.modifyOption(this,t,n);typeof s<"u"?r[t]=s:r[t]=n,t==="group"&&Lle(r)},destroy:function(){jl("destroy",this);var t=this.el;t[Wa]=null,Ei(t,"mousedown",this._onTapStart),Ei(t,"touchstart",this._onTapStart),Ei(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ei(t,"dragover",this),Ei(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),f3.splice(f3.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!lm){if(jl("hideClone",this),Vr.eventCanceled)return;_r(co,"display","none"),this.options.removeCloneOnHide&&co.parentNode&&co.parentNode.removeChild(co),lm=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(lm){if(jl("showClone",this),Vr.eventCanceled)return;Yn.parentNode==Vs&&!this.options.group.revertClone?Vs.insertBefore(co,Yn):g_?Vs.insertBefore(co,g_):Vs.appendChild(co),this.options.group.revertClone&&this.animate(Yn,co),_r(co,"display",""),lm=!1}}};function Ktt(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function MA(e,t,n,r,s,o,c,i){var f,g=e[Wa],x=g.options.onMove,w;return window.CustomEvent&&!Df&&!dE?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=t,f.from=e,f.dragged=n,f.draggedRect=r,f.related=s||t,f.relatedRect=o||Us(t),f.willInsertAfter=i,f.originalEvent=c,e.dispatchEvent(f),x&&(w=x.call(g,f,c)),w}function rk(e){e.draggable=!1}function Jtt(){Z5=!1}function Qtt(e,t,n){var r=Us(A1(n.el,0,n.options,!0)),s=10;return t?e.clientX<r.left-s||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-s||e.clientY<r.bottom&&e.clientX<r.left}function ent(e,t,n){var r=Us(yB(n.el,n.options.draggable)),s=10;return t?e.clientX>r.right+s||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+s}function tnt(e,t,n,r,s,o,c,i){var f=r?e.clientY:e.clientX,g=r?n.height:n.width,x=r?n.top:n.left,w=r?n.bottom:n.right,A=!1;if(!c){if(i&&DC<g*s){if(!S2&&(w2===1?f>x+g*o/2:f<w-g*o/2)&&(S2=!0),S2)A=!0;else if(w2===1?f<x+DC:f>w-DC)return-w2}else if(f>x+g*(1-s)/2&&f<w-g*(1-s)/2)return nnt(t)}return A=A||c,A&&(f<x+g*o/2||f>w-g*o/2)?f>x+g/2?1:-1:0}function nnt(e){return ho(Yn)<ho(e)?1:-1}function rnt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function int(e){p3.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&p3.push(r)}}function RC(e){return setTimeout(e,0)}function K5(e){return clearTimeout(e)}fO&&Di(document,"touchmove",function(e){(Vr.active||s0)&&e.cancelable&&e.preventDefault()});Vr.utils={on:Di,off:Ei,css:_r,find:Ple,is:function(t,n){return!!Vu(t,n,t,!1)},extend:Vtt,throttle:Ole,closest:Vu,toggleClass:Js,clone:vB,index:ho,nextTick:RC,cancelNextTick:K5,detectDirection:kle,getChild:A1};Vr.get=function(e){return e[Wa]};Vr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Vr.utils=rh(rh({},Vr.utils),r.utils)),hE.mount(r)})};Vr.create=function(e,t){return new Vr(e,t)};Vr.version=Ftt;var Lo=[],jw,J5,Q5=!1,ik,sk,m3,Uw;function snt(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Di(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Di(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Di(document,"touchmove",this._handleFallbackAutoScroll):Di(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Ei(document,"dragover",this._handleAutoScroll):(Ei(document,"pointermove",this._handleFallbackAutoScroll),Ei(document,"touchmove",this._handleFallbackAutoScroll),Ei(document,"mousemove",this._handleFallbackAutoScroll)),lX(),kC(),jtt()},nulling:function(){m3=J5=jw=Q5=Uw=ik=sk=null,Lo.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var s=this,o=(n.touches?n.touches[0]:n).clientX,c=(n.touches?n.touches[0]:n).clientY,i=document.elementFromPoint(o,c);if(m3=n,r||this.options.forceAutoScrollFallback||dE||Df||v2){ok(n,this.options,i,r);var f=_m(i,!0);Q5&&(!Uw||o!==ik||c!==sk)&&(Uw&&lX(),Uw=setInterval(function(){var g=_m(document.elementFromPoint(o,c),!0);g!==f&&(f=g,kC()),ok(n,s.options,g,r)},10),ik=o,sk=c)}else{if(!this.options.bubbleScroll||_m(i,!0)===Xd()){kC();return}ok(n,this.options,_m(i,!1),!1)}}},ru(e,{pluginName:"scroll",initializeByDefault:!0})}function kC(){Lo.forEach(function(e){clearInterval(e.pid)}),Lo=[]}function lX(){clearInterval(Uw)}var ok=Ole(function(e,t,n,r){if(t.scroll){var s=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,i=t.scrollSpeed,f=Xd(),g=!1,x;J5!==n&&(J5=n,kC(),jw=t.scroll,x=t.scrollFn,jw===!0&&(jw=_m(n,!0)));var w=0,A=jw;do{var C=A,F=Us(C),z=F.top,j=F.bottom,V=F.left,Y=F.right,te=F.width,J=F.height,ee=void 0,le=void 0,oe=C.scrollWidth,ve=C.scrollHeight,se=_r(C),ie=C.scrollLeft,pe=C.scrollTop;C===f?(ee=te<oe&&(se.overflowX==="auto"||se.overflowX==="scroll"||se.overflowX==="visible"),le=J<ve&&(se.overflowY==="auto"||se.overflowY==="scroll"||se.overflowY==="visible")):(ee=te<oe&&(se.overflowX==="auto"||se.overflowX==="scroll"),le=J<ve&&(se.overflowY==="auto"||se.overflowY==="scroll"));var be=ee&&(Math.abs(Y-s)<=c&&ie+te<oe)-(Math.abs(V-s)<=c&&!!ie),Se=le&&(Math.abs(j-o)<=c&&pe+J<ve)-(Math.abs(z-o)<=c&&!!pe);if(!Lo[w])for(var Ce=0;Ce<=w;Ce++)Lo[Ce]||(Lo[Ce]={});(Lo[w].vx!=be||Lo[w].vy!=Se||Lo[w].el!==C)&&(Lo[w].el=C,Lo[w].vx=be,Lo[w].vy=Se,clearInterval(Lo[w].pid),(be!=0||Se!=0)&&(g=!0,Lo[w].pid=setInterval((function(){r&&this.layer===0&&Vr.active._onTouchMove(m3);var Ee=Lo[this.layer].vy?Lo[this.layer].vy*i:0,xe=Lo[this.layer].vx?Lo[this.layer].vx*i:0;typeof x=="function"&&x.call(Vr.dragged.parentNode[Wa],xe,Ee,e,m3,Lo[this.layer].el)!=="continue"||Dle(Lo[this.layer].el,xe,Ee)}).bind({layer:w}),24))),w++}while(t.bubbleScroll&&A!==f&&(A=_m(A,!1)));Q5=g}},30),zle=function(t){var n=t.originalEvent,r=t.putSortable,s=t.dragEl,o=t.activeSortable,c=t.dispatchSortableEvent,i=t.hideGhostForTarget,f=t.unhideGhostForTarget;if(n){var g=r||o;i();var x=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,w=document.elementFromPoint(x.clientX,x.clientY);f(),g&&!g.el.contains(w)&&(c("spill"),this.onSpill({dragEl:s,putSortable:r}))}};function bB(){}bB.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var s=A1(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(n,s):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:zle};ru(bB,{pluginName:"revertOnSpill"});function xB(){}xB.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,s=r||this.sortable;s.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),s.animateAll()},drop:zle};ru(xB,{pluginName:"removeOnSpill"});var jc;function ont(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var r=n.dragEl;jc=r},dragOverValid:function(n){var r=n.completed,s=n.target,o=n.onMove,c=n.activeSortable,i=n.changed,f=n.cancel;if(c.options.swap){var g=this.sortable.el,x=this.options;if(s&&s!==g){var w=jc;o(s)!==!1?(Js(s,x.swapClass,!0),jc=s):jc=null,w&&w!==jc&&Js(w,x.swapClass,!1)}i(),r(!0),f()}},drop:function(n){var r=n.activeSortable,s=n.putSortable,o=n.dragEl,c=s||this.sortable,i=this.options;jc&&Js(jc,i.swapClass,!1),jc&&(i.swap||s&&s.options.swap)&&o!==jc&&(c.captureAnimationState(),c!==r&&r.captureAnimationState(),ant(o,jc),c.animateAll(),c!==r&&r.animateAll())},nulling:function(){jc=null}},ru(e,{pluginName:"swap",eventProperties:function(){return{swapItem:jc}}})}function ant(e,t){var n=e.parentNode,r=t.parentNode,s,o;!n||!r||n.isEqualNode(t)||r.isEqualNode(e)||(s=ho(e),o=ho(t),n.isEqualNode(r)&&s<o&&o++,n.insertBefore(t,n.children[s]),r.insertBefore(e,r.children[o]))}var ci=[],gc=[],Sw,Du,Ew=!1,Ul=!1,Jv=!1,Ts,Tw,AA;function lnt(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.supportPointer?Di(document,"pointerup",this._deselectMultiDrag):(Di(document,"mouseup",this._deselectMultiDrag),Di(document,"touchend",this._deselectMultiDrag)),Di(document,"keydown",this._checkKeyDown),Di(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,o){var c="";ci.length&&Du===t?ci.forEach(function(i,f){c+=(f?", ":"")+i.textContent}):c=o.textContent,s.setData("Text",c)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;Ts=r},delayEnded:function(){this.isMultiDrag=~ci.indexOf(Ts)},setupClone:function(n){var r=n.sortable,s=n.cancel;if(this.isMultiDrag){for(var o=0;o<ci.length;o++)gc.push(vB(ci[o])),gc[o].sortableIndex=ci[o].sortableIndex,gc[o].draggable=!1,gc[o].style["will-change"]="",Js(gc[o],this.options.selectedClass,!1),ci[o]===Ts&&Js(gc[o],this.options.chosenClass,!1);r._hideClone(),s()}},clone:function(n){var r=n.sortable,s=n.rootEl,o=n.dispatchSortableEvent,c=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ci.length&&Du===r&&(cX(!0,s),o("clone"),c()))},showClone:function(n){var r=n.cloneNowShown,s=n.rootEl,o=n.cancel;this.isMultiDrag&&(cX(!1,s),gc.forEach(function(c){_r(c,"display","")}),r(),AA=!1,o())},hideClone:function(n){var r=this;n.sortable;var s=n.cloneNowHidden,o=n.cancel;this.isMultiDrag&&(gc.forEach(function(c){_r(c,"display","none"),r.options.removeCloneOnHide&&c.parentNode&&c.parentNode.removeChild(c)}),s(),AA=!0,o())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Du&&Du.multiDrag._deselectMultiDrag(),ci.forEach(function(r){r.sortableIndex=ho(r)}),ci=ci.sort(function(r,s){return r.sortableIndex-s.sortableIndex}),Jv=!0},dragStarted:function(n){var r=this,s=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){ci.forEach(function(c){c!==Ts&&_r(c,"position","absolute")});var o=Us(Ts,!1,!0,!0);ci.forEach(function(c){c!==Ts&&iX(c,o)}),Ul=!0,Ew=!0}s.animateAll(function(){Ul=!1,Ew=!1,r.options.animation&&ci.forEach(function(c){JR(c)}),r.options.sort&&CA()})}},dragOver:function(n){var r=n.target,s=n.completed,o=n.cancel;Ul&&~ci.indexOf(r)&&(s(!1),o())},revert:function(n){var r=n.fromSortable,s=n.rootEl,o=n.sortable,c=n.dragRect;ci.length>1&&(ci.forEach(function(i){o.addAnimationState({target:i,rect:Ul?Us(i):c}),JR(i),i.fromRect=c,r.removeAnimationState(i)}),Ul=!1,cnt(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(n){var r=n.sortable,s=n.isOwner,o=n.insertion,c=n.activeSortable,i=n.parentEl,f=n.putSortable,g=this.options;if(o){if(s&&c._hideClone(),Ew=!1,g.animation&&ci.length>1&&(Ul||!s&&!c.options.sort&&!f)){var x=Us(Ts,!1,!0,!0);ci.forEach(function(A){A!==Ts&&(iX(A,x),i.appendChild(A))}),Ul=!0}if(!s)if(Ul||CA(),ci.length>1){var w=AA;c._showClone(r),c.options.animation&&!AA&&w&&gc.forEach(function(A){c.addAnimationState({target:A,rect:Tw}),A.fromRect=Tw,A.thisAnimationDuration=null})}else c._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,s=n.isOwner,o=n.activeSortable;if(ci.forEach(function(i){i.thisAnimationDuration=null}),o.options.animation&&!s&&o.multiDrag.isMultiDrag){Tw=ru({},r);var c=G_(Ts,!0);Tw.top-=c.f,Tw.left-=c.e}},dragOverAnimationComplete:function(){Ul&&(Ul=!1,CA())},drop:function(n){var r=n.originalEvent,s=n.rootEl,o=n.parentEl,c=n.sortable,i=n.dispatchSortableEvent,f=n.oldIndex,g=n.putSortable,x=g||this.sortable;if(r){var w=this.options,A=o.children;if(!Jv)if(w.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Js(Ts,w.selectedClass,!~ci.indexOf(Ts)),~ci.indexOf(Ts))ci.splice(ci.indexOf(Ts),1),Sw=null,$w({sortable:c,rootEl:s,name:"deselect",targetEl:Ts});else{if(ci.push(Ts),$w({sortable:c,rootEl:s,name:"select",targetEl:Ts}),r.shiftKey&&Sw&&c.el.contains(Sw)){var C=ho(Sw),F=ho(Ts);if(~C&&~F&&C!==F){var z,j;for(F>C?(j=C,z=F):(j=F,z=C+1);j<z;j++)~ci.indexOf(A[j])||(Js(A[j],w.selectedClass,!0),ci.push(A[j]),$w({sortable:c,rootEl:s,name:"select",targetEl:A[j]}))}}else Sw=Ts;Du=x}if(Jv&&this.isMultiDrag){if(Ul=!1,(o[Wa].options.sort||o!==s)&&ci.length>1){var V=Us(Ts),Y=ho(Ts,":not(."+this.options.selectedClass+")");if(!Ew&&w.animation&&(Ts.thisAnimationDuration=null),x.captureAnimationState(),!Ew&&(w.animation&&(Ts.fromRect=V,ci.forEach(function(J){if(J.thisAnimationDuration=null,J!==Ts){var ee=Ul?Us(J):V;J.fromRect=ee,x.addAnimationState({target:J,rect:ee})}})),CA(),ci.forEach(function(J){A[Y]?o.insertBefore(J,A[Y]):o.appendChild(J),Y++}),f===ho(Ts))){var te=!1;ci.forEach(function(J){if(J.sortableIndex!==ho(J)){te=!0;return}}),te&&i("update")}ci.forEach(function(J){JR(J)}),x.animateAll()}Du=x}(s===o||g&&g.lastPutMode!=="clone")&&gc.forEach(function(J){J.parentNode&&J.parentNode.removeChild(J)})}},nullingGlobal:function(){this.isMultiDrag=Jv=!1,gc.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Ei(document,"pointerup",this._deselectMultiDrag),Ei(document,"mouseup",this._deselectMultiDrag),Ei(document,"touchend",this._deselectMultiDrag),Ei(document,"keydown",this._checkKeyDown),Ei(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Jv<"u"&&Jv)&&Du===this.sortable&&!(n&&Vu(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;ci.length;){var r=ci[0];Js(r,this.options.selectedClass,!1),ci.shift(),$w({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},ru(e,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[Wa];!r||!r.options.multiDrag||~ci.indexOf(n)||(Du&&Du!==r&&(Du.multiDrag._deselectMultiDrag(),Du=r),Js(n,r.options.selectedClass,!0),ci.push(n))},deselect:function(n){var r=n.parentNode[Wa],s=ci.indexOf(n);!r||!r.options.multiDrag||!~s||(Js(n,r.options.selectedClass,!1),ci.splice(s,1))}},eventProperties:function(){var n=this,r=[],s=[];return ci.forEach(function(o){r.push({multiDragElement:o,index:o.sortableIndex});var c;Ul&&o!==Ts?c=-1:Ul?c=ho(o,":not(."+n.options.selectedClass+")"):c=ho(o),s.push({multiDragElement:o,index:c})}),{items:Dtt(ci),clones:[].concat(gc),oldIndicies:r,newIndicies:s}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function cnt(e,t){ci.forEach(function(n,r){var s=t.children[n.sortableIndex+(e?Number(r):0)];s?t.insertBefore(n,s):t.appendChild(n)})}function cX(e,t){gc.forEach(function(n,r){var s=t.children[n.sortableIndex+(e?Number(r):0)];s?t.insertBefore(n,s):t.appendChild(n)})}function CA(){ci.forEach(function(e){e!==Ts&&e.parentNode&&e.parentNode.removeChild(e)})}Vr.mount(new snt);Vr.mount(xB,bB);const unt=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:lnt,Sortable:Vr,Swap:ont,default:Vr},Symbol.toStringTag,{value:"Module"})),dnt=G3(unt);var hnt=SC.exports,uX;function fnt(){return uX||(uX=1,(function(e,t){(function(r,s){e.exports=s(Ale(),dnt)})(typeof self<"u"?self:hnt,function(n,r){return(function(s){var o={};function c(i){if(o[i])return o[i].exports;var f=o[i]={i,l:!1,exports:{}};return s[i].call(f.exports,f,f.exports,c),f.l=!0,f.exports}return c.m=s,c.c=o,c.d=function(i,f,g){c.o(i,f)||Object.defineProperty(i,f,{enumerable:!0,get:g})},c.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},c.t=function(i,f){if(f&1&&(i=c(i)),f&8||f&4&&typeof i=="object"&&i&&i.__esModule)return i;var g=Object.create(null);if(c.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:i}),f&2&&typeof i!="string")for(var x in i)c.d(g,x,(function(w){return i[w]}).bind(null,x));return g},c.n=function(i){var f=i&&i.__esModule?function(){return i.default}:function(){return i};return c.d(f,"a",f),f},c.o=function(i,f){return Object.prototype.hasOwnProperty.call(i,f)},c.p="",c(c.s="fb15")})({"00ee":(function(s,o,c){var i=c("b622"),f=i("toStringTag"),g={};g[f]="z",s.exports=String(g)==="[object z]"}),"0366":(function(s,o,c){var i=c("1c0b");s.exports=function(f,g,x){if(i(f),g===void 0)return f;switch(x){case 0:return function(){return f.call(g)};case 1:return function(w){return f.call(g,w)};case 2:return function(w,A){return f.call(g,w,A)};case 3:return function(w,A,C){return f.call(g,w,A,C)}}return function(){return f.apply(g,arguments)}}}),"057f":(function(s,o,c){var i=c("fc6a"),f=c("241c").f,g={}.toString,x=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],w=function(A){try{return f(A)}catch{return x.slice()}};s.exports.f=function(C){return x&&g.call(C)=="[object Window]"?w(C):f(i(C))}}),"06cf":(function(s,o,c){var i=c("83ab"),f=c("d1e7"),g=c("5c6c"),x=c("fc6a"),w=c("c04e"),A=c("5135"),C=c("0cfb"),F=Object.getOwnPropertyDescriptor;o.f=i?F:function(j,V){if(j=x(j),V=w(V,!0),C)try{return F(j,V)}catch{}if(A(j,V))return g(!f.f.call(j,V),j[V])}}),"0cfb":(function(s,o,c){var i=c("83ab"),f=c("d039"),g=c("cc12");s.exports=!i&&!f(function(){return Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a!=7})}),"13d5":(function(s,o,c){var i=c("23e7"),f=c("d58f").left,g=c("a640"),x=c("ae40"),w=g("reduce"),A=x("reduce",{1:0});i({target:"Array",proto:!0,forced:!w||!A},{reduce:function(F){return f(this,F,arguments.length,arguments.length>1?arguments[1]:void 0)}})}),"14c3":(function(s,o,c){var i=c("c6b6"),f=c("9263");s.exports=function(g,x){var w=g.exec;if(typeof w=="function"){var A=w.call(g,x);if(typeof A!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return A}if(i(g)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(g,x)}}),"159b":(function(s,o,c){var i=c("da84"),f=c("fdbc"),g=c("17c2"),x=c("9112");for(var w in f){var A=i[w],C=A&&A.prototype;if(C&&C.forEach!==g)try{x(C,"forEach",g)}catch{C.forEach=g}}}),"17c2":(function(s,o,c){var i=c("b727").forEach,f=c("a640"),g=c("ae40"),x=f("forEach"),w=g("forEach");s.exports=!x||!w?function(C){return i(this,C,arguments.length>1?arguments[1]:void 0)}:[].forEach}),"1be4":(function(s,o,c){var i=c("d066");s.exports=i("document","documentElement")}),"1c0b":(function(s,o){s.exports=function(c){if(typeof c!="function")throw TypeError(String(c)+" is not a function");return c}}),"1c7e":(function(s,o,c){var i=c("b622"),f=i("iterator"),g=!1;try{var x=0,w={next:function(){return{done:!!x++}},return:function(){g=!0}};w[f]=function(){return this},Array.from(w,function(){throw 2})}catch{}s.exports=function(A,C){if(!C&&!g)return!1;var F=!1;try{var z={};z[f]=function(){return{next:function(){return{done:F=!0}}}},A(z)}catch{}return F}}),"1d80":(function(s,o){s.exports=function(c){if(c==null)throw TypeError("Can't call method on "+c);return c}}),"1dde":(function(s,o,c){var i=c("d039"),f=c("b622"),g=c("2d00"),x=f("species");s.exports=function(w){return g>=51||!i(function(){var A=[],C=A.constructor={};return C[x]=function(){return{foo:1}},A[w](Boolean).foo!==1})}}),"23cb":(function(s,o,c){var i=c("a691"),f=Math.max,g=Math.min;s.exports=function(x,w){var A=i(x);return A<0?f(A+w,0):g(A,w)}}),"23e7":(function(s,o,c){var i=c("da84"),f=c("06cf").f,g=c("9112"),x=c("6eeb"),w=c("ce4e"),A=c("e893"),C=c("94ca");s.exports=function(F,z){var j=F.target,V=F.global,Y=F.stat,te,J,ee,le,oe,ve;if(V?J=i:Y?J=i[j]||w(j,{}):J=(i[j]||{}).prototype,J)for(ee in z){if(oe=z[ee],F.noTargetGet?(ve=f(J,ee),le=ve&&ve.value):le=J[ee],te=C(V?ee:j+(Y?".":"#")+ee,F.forced),!te&&le!==void 0){if(typeof oe==typeof le)continue;A(oe,le)}(F.sham||le&&le.sham)&&g(oe,"sham",!0),x(J,ee,oe,F)}}}),"241c":(function(s,o,c){var i=c("ca84"),f=c("7839"),g=f.concat("length","prototype");o.f=Object.getOwnPropertyNames||function(w){return i(w,g)}}),"25f0":(function(s,o,c){var i=c("6eeb"),f=c("825a"),g=c("d039"),x=c("ad6d"),w="toString",A=RegExp.prototype,C=A[w],F=g(function(){return C.call({source:"a",flags:"b"})!="/a/b"}),z=C.name!=w;(F||z)&&i(RegExp.prototype,w,function(){var V=f(this),Y=String(V.source),te=V.flags,J=String(te===void 0&&V instanceof RegExp&&!("flags"in A)?x.call(V):te);return"/"+Y+"/"+J},{unsafe:!0})}),"2ca0":(function(s,o,c){var i=c("23e7"),f=c("06cf").f,g=c("50c4"),x=c("5a34"),w=c("1d80"),A=c("ab13"),C=c("c430"),F="".startsWith,z=Math.min,j=A("startsWith"),V=!C&&!j&&!!(function(){var Y=f(String.prototype,"startsWith");return Y&&!Y.writable})();i({target:"String",proto:!0,forced:!V&&!j},{startsWith:function(te){var J=String(w(this));x(te);var ee=g(z(arguments.length>1?arguments[1]:void 0,J.length)),le=String(te);return F?F.call(J,le,ee):J.slice(ee,ee+le.length)===le}})}),"2d00":(function(s,o,c){var i=c("da84"),f=c("342f"),g=i.process,x=g&&g.versions,w=x&&x.v8,A,C;w?(A=w.split("."),C=A[0]+A[1]):f&&(A=f.match(/Edge\/(\d+)/),(!A||A[1]>=74)&&(A=f.match(/Chrome\/(\d+)/),A&&(C=A[1]))),s.exports=C&&+C}),"342f":(function(s,o,c){var i=c("d066");s.exports=i("navigator","userAgent")||""}),"35a1":(function(s,o,c){var i=c("f5df"),f=c("3f8c"),g=c("b622"),x=g("iterator");s.exports=function(w){if(w!=null)return w[x]||w["@@iterator"]||f[i(w)]}}),"37e8":(function(s,o,c){var i=c("83ab"),f=c("9bf2"),g=c("825a"),x=c("df75");s.exports=i?Object.defineProperties:function(A,C){g(A);for(var F=x(C),z=F.length,j=0,V;z>j;)f.f(A,V=F[j++],C[V]);return A}}),"3bbe":(function(s,o,c){var i=c("861d");s.exports=function(f){if(!i(f)&&f!==null)throw TypeError("Can't set "+String(f)+" as a prototype");return f}}),"3ca3":(function(s,o,c){var i=c("6547").charAt,f=c("69f3"),g=c("7dd0"),x="String Iterator",w=f.set,A=f.getterFor(x);g(String,"String",function(C){w(this,{type:x,string:String(C),index:0})},function(){var F=A(this),z=F.string,j=F.index,V;return j>=z.length?{value:void 0,done:!0}:(V=i(z,j),F.index+=V.length,{value:V,done:!1})})}),"3f8c":(function(s,o){s.exports={}}),4160:(function(s,o,c){var i=c("23e7"),f=c("17c2");i({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})}),"428f":(function(s,o,c){var i=c("da84");s.exports=i}),"44ad":(function(s,o,c){var i=c("d039"),f=c("c6b6"),g="".split;s.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(x){return f(x)=="String"?g.call(x,""):Object(x)}:Object}),"44d2":(function(s,o,c){var i=c("b622"),f=c("7c73"),g=c("9bf2"),x=i("unscopables"),w=Array.prototype;w[x]==null&&g.f(w,x,{configurable:!0,value:f(null)}),s.exports=function(A){w[x][A]=!0}}),"44e7":(function(s,o,c){var i=c("861d"),f=c("c6b6"),g=c("b622"),x=g("match");s.exports=function(w){var A;return i(w)&&((A=w[x])!==void 0?!!A:f(w)=="RegExp")}}),4930:(function(s,o,c){var i=c("d039");s.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})}),"4d64":(function(s,o,c){var i=c("fc6a"),f=c("50c4"),g=c("23cb"),x=function(w){return function(A,C,F){var z=i(A),j=f(z.length),V=g(F,j),Y;if(w&&C!=C){for(;j>V;)if(Y=z[V++],Y!=Y)return!0}else for(;j>V;V++)if((w||V in z)&&z[V]===C)return w||V||0;return!w&&-1}};s.exports={includes:x(!0),indexOf:x(!1)}}),"4de4":(function(s,o,c){var i=c("23e7"),f=c("b727").filter,g=c("1dde"),x=c("ae40"),w=g("filter"),A=x("filter");i({target:"Array",proto:!0,forced:!w||!A},{filter:function(F){return f(this,F,arguments.length>1?arguments[1]:void 0)}})}),"4df4":(function(s,o,c){var i=c("0366"),f=c("7b0b"),g=c("9bdd"),x=c("e95a"),w=c("50c4"),A=c("8418"),C=c("35a1");s.exports=function(z){var j=f(z),V=typeof this=="function"?this:Array,Y=arguments.length,te=Y>1?arguments[1]:void 0,J=te!==void 0,ee=C(j),le=0,oe,ve,se,ie,pe,be;if(J&&(te=i(te,Y>2?arguments[2]:void 0,2)),ee!=null&&!(V==Array&&x(ee)))for(ie=ee.call(j),pe=ie.next,ve=new V;!(se=pe.call(ie)).done;le++)be=J?g(ie,te,[se.value,le],!0):se.value,A(ve,le,be);else for(oe=w(j.length),ve=new V(oe);oe>le;le++)be=J?te(j[le],le):j[le],A(ve,le,be);return ve.length=le,ve}}),"4fad":(function(s,o,c){var i=c("23e7"),f=c("6f53").entries;i({target:"Object",stat:!0},{entries:function(x){return f(x)}})}),"50c4":(function(s,o,c){var i=c("a691"),f=Math.min;s.exports=function(g){return g>0?f(i(g),9007199254740991):0}}),5135:(function(s,o){var c={}.hasOwnProperty;s.exports=function(i,f){return c.call(i,f)}}),5319:(function(s,o,c){var i=c("d784"),f=c("825a"),g=c("7b0b"),x=c("50c4"),w=c("a691"),A=c("1d80"),C=c("8aa5"),F=c("14c3"),z=Math.max,j=Math.min,V=Math.floor,Y=/\$([$&'`]|\d\d?|<[^>]*>)/g,te=/\$([$&'`]|\d\d?)/g,J=function(ee){return ee===void 0?ee:String(ee)};i("replace",2,function(ee,le,oe,ve){var se=ve.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,ie=ve.REPLACE_KEEPS_$0,pe=se?"$":"$0";return[function(Ce,Ee){var xe=A(this),ke=Ce?.[ee];return ke!==void 0?ke.call(Ce,xe,Ee):le.call(String(xe),Ce,Ee)},function(Se,Ce){if(!se&&ie||typeof Ce=="string"&&Ce.indexOf(pe)===-1){var Ee=oe(le,Se,this,Ce);if(Ee.done)return Ee.value}var xe=f(Se),ke=String(this),He=typeof Ce=="function";He||(Ce=String(Ce));var Ke=xe.global;if(Ke){var Ge=xe.unicode;xe.lastIndex=0}for(var $t=[];;){var Ft=F(xe,ke);if(Ft===null||($t.push(Ft),!Ke))break;var Lt=String(Ft[0]);Lt===""&&(xe.lastIndex=C(ke,x(xe.lastIndex),Ge))}for(var nn="",mn=0,Xt=0;Xt<$t.length;Xt++){Ft=$t[Xt];for(var mt=String(Ft[0]),Jt=z(j(w(Ft.index),ke.length),0),Kt=[],_e=1;_e<Ft.length;_e++)Kt.push(J(Ft[_e]));var bn=Ft.groups;if(He){var On=[mt].concat(Kt,Jt,ke);bn!==void 0&&On.push(bn);var je=String(Ce.apply(void 0,On))}else je=be(mt,ke,Jt,Kt,bn,Ce);Jt>=mn&&(nn+=ke.slice(mn,Jt)+je,mn=Jt+mt.length)}return nn+ke.slice(mn)}];function be(Se,Ce,Ee,xe,ke,He){var Ke=Ee+Se.length,Ge=xe.length,$t=te;return ke!==void 0&&(ke=g(ke),$t=Y),le.call(He,$t,function(Ft,Lt){var nn;switch(Lt.charAt(0)){case"$":return"$";case"&":return Se;case"`":return Ce.slice(0,Ee);case"'":return Ce.slice(Ke);case"<":nn=ke[Lt.slice(1,-1)];break;default:var mn=+Lt;if(mn===0)return Ft;if(mn>Ge){var Xt=V(mn/10);return Xt===0?Ft:Xt<=Ge?xe[Xt-1]===void 0?Lt.charAt(1):xe[Xt-1]+Lt.charAt(1):Ft}nn=xe[mn-1]}return nn===void 0?"":nn})}})}),5692:(function(s,o,c){var i=c("c430"),f=c("c6cd");(s.exports=function(g,x){return f[g]||(f[g]=x!==void 0?x:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})}),"56ef":(function(s,o,c){var i=c("d066"),f=c("241c"),g=c("7418"),x=c("825a");s.exports=i("Reflect","ownKeys")||function(A){var C=f.f(x(A)),F=g.f;return F?C.concat(F(A)):C}}),"5a34":(function(s,o,c){var i=c("44e7");s.exports=function(f){if(i(f))throw TypeError("The method doesn't accept regular expressions");return f}}),"5c6c":(function(s,o){s.exports=function(c,i){return{enumerable:!(c&1),configurable:!(c&2),writable:!(c&4),value:i}}}),"5db7":(function(s,o,c){var i=c("23e7"),f=c("a2bf"),g=c("7b0b"),x=c("50c4"),w=c("1c0b"),A=c("65f0");i({target:"Array",proto:!0},{flatMap:function(F){var z=g(this),j=x(z.length),V;return w(F),V=A(z,0),V.length=f(V,z,z,j,0,1,F,arguments.length>1?arguments[1]:void 0),V}})}),6547:(function(s,o,c){var i=c("a691"),f=c("1d80"),g=function(x){return function(w,A){var C=String(f(w)),F=i(A),z=C.length,j,V;return F<0||F>=z?x?"":void 0:(j=C.charCodeAt(F),j<55296||j>56319||F+1===z||(V=C.charCodeAt(F+1))<56320||V>57343?x?C.charAt(F):j:x?C.slice(F,F+2):(j-55296<<10)+(V-56320)+65536)}};s.exports={codeAt:g(!1),charAt:g(!0)}}),"65f0":(function(s,o,c){var i=c("861d"),f=c("e8b5"),g=c("b622"),x=g("species");s.exports=function(w,A){var C;return f(w)&&(C=w.constructor,typeof C=="function"&&(C===Array||f(C.prototype))?C=void 0:i(C)&&(C=C[x],C===null&&(C=void 0))),new(C===void 0?Array:C)(A===0?0:A)}}),"69f3":(function(s,o,c){var i=c("7f9a"),f=c("da84"),g=c("861d"),x=c("9112"),w=c("5135"),A=c("f772"),C=c("d012"),F=f.WeakMap,z,j,V,Y=function(se){return V(se)?j(se):z(se,{})},te=function(se){return function(ie){var pe;if(!g(ie)||(pe=j(ie)).type!==se)throw TypeError("Incompatible receiver, "+se+" required");return pe}};if(i){var J=new F,ee=J.get,le=J.has,oe=J.set;z=function(se,ie){return oe.call(J,se,ie),ie},j=function(se){return ee.call(J,se)||{}},V=function(se){return le.call(J,se)}}else{var ve=A("state");C[ve]=!0,z=function(se,ie){return x(se,ve,ie),ie},j=function(se){return w(se,ve)?se[ve]:{}},V=function(se){return w(se,ve)}}s.exports={set:z,get:j,has:V,enforce:Y,getterFor:te}}),"6eeb":(function(s,o,c){var i=c("da84"),f=c("9112"),g=c("5135"),x=c("ce4e"),w=c("8925"),A=c("69f3"),C=A.get,F=A.enforce,z=String(String).split("String");(s.exports=function(j,V,Y,te){var J=te?!!te.unsafe:!1,ee=te?!!te.enumerable:!1,le=te?!!te.noTargetGet:!1;if(typeof Y=="function"&&(typeof V=="string"&&!g(Y,"name")&&f(Y,"name",V),F(Y).source=z.join(typeof V=="string"?V:"")),j===i){ee?j[V]=Y:x(V,Y);return}else J?!le&&j[V]&&(ee=!0):delete j[V];ee?j[V]=Y:f(j,V,Y)})(Function.prototype,"toString",function(){return typeof this=="function"&&C(this).source||w(this)})}),"6f53":(function(s,o,c){var i=c("83ab"),f=c("df75"),g=c("fc6a"),x=c("d1e7").f,w=function(A){return function(C){for(var F=g(C),z=f(F),j=z.length,V=0,Y=[],te;j>V;)te=z[V++],(!i||x.call(F,te))&&Y.push(A?[te,F[te]]:F[te]);return Y}};s.exports={entries:w(!0),values:w(!1)}}),"73d9":(function(s,o,c){var i=c("44d2");i("flatMap")}),7418:(function(s,o){o.f=Object.getOwnPropertySymbols}),"746f":(function(s,o,c){var i=c("428f"),f=c("5135"),g=c("e538"),x=c("9bf2").f;s.exports=function(w){var A=i.Symbol||(i.Symbol={});f(A,w)||x(A,w,{value:g.f(w)})}}),7839:(function(s,o){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),"7b0b":(function(s,o,c){var i=c("1d80");s.exports=function(f){return Object(i(f))}}),"7c73":(function(s,o,c){var i=c("825a"),f=c("37e8"),g=c("7839"),x=c("d012"),w=c("1be4"),A=c("cc12"),C=c("f772"),F=">",z="<",j="prototype",V="script",Y=C("IE_PROTO"),te=function(){},J=function(se){return z+V+F+se+z+"/"+V+F},ee=function(se){se.write(J("")),se.close();var ie=se.parentWindow.Object;return se=null,ie},le=function(){var se=A("iframe"),ie="java"+V+":",pe;return se.style.display="none",w.appendChild(se),se.src=String(ie),pe=se.contentWindow.document,pe.open(),pe.write(J("document.F=Object")),pe.close(),pe.F},oe,ve=function(){try{oe=document.domain&&new ActiveXObject("htmlfile")}catch{}ve=oe?ee(oe):le();for(var se=g.length;se--;)delete ve[j][g[se]];return ve()};x[Y]=!0,s.exports=Object.create||function(ie,pe){var be;return ie!==null?(te[j]=i(ie),be=new te,te[j]=null,be[Y]=ie):be=ve(),pe===void 0?be:f(be,pe)}}),"7dd0":(function(s,o,c){var i=c("23e7"),f=c("9ed3"),g=c("e163"),x=c("d2bb"),w=c("d44e"),A=c("9112"),C=c("6eeb"),F=c("b622"),z=c("c430"),j=c("3f8c"),V=c("ae93"),Y=V.IteratorPrototype,te=V.BUGGY_SAFARI_ITERATORS,J=F("iterator"),ee="keys",le="values",oe="entries",ve=function(){return this};s.exports=function(se,ie,pe,be,Se,Ce,Ee){f(pe,ie,be);var xe=function(Xt){if(Xt===Se&&$t)return $t;if(!te&&Xt in Ke)return Ke[Xt];switch(Xt){case ee:return function(){return new pe(this,Xt)};case le:return function(){return new pe(this,Xt)};case oe:return function(){return new pe(this,Xt)}}return function(){return new pe(this)}},ke=ie+" Iterator",He=!1,Ke=se.prototype,Ge=Ke[J]||Ke["@@iterator"]||Se&&Ke[Se],$t=!te&&Ge||xe(Se),Ft=ie=="Array"&&Ke.entries||Ge,Lt,nn,mn;if(Ft&&(Lt=g(Ft.call(new se)),Y!==Object.prototype&&Lt.next&&(!z&&g(Lt)!==Y&&(x?x(Lt,Y):typeof Lt[J]!="function"&&A(Lt,J,ve)),w(Lt,ke,!0,!0),z&&(j[ke]=ve))),Se==le&&Ge&&Ge.name!==le&&(He=!0,$t=function(){return Ge.call(this)}),(!z||Ee)&&Ke[J]!==$t&&A(Ke,J,$t),j[ie]=$t,Se)if(nn={values:xe(le),keys:Ce?$t:xe(ee),entries:xe(oe)},Ee)for(mn in nn)(te||He||!(mn in Ke))&&C(Ke,mn,nn[mn]);else i({target:ie,proto:!0,forced:te||He},nn);return nn}}),"7f9a":(function(s,o,c){var i=c("da84"),f=c("8925"),g=i.WeakMap;s.exports=typeof g=="function"&&/native code/.test(f(g))}),"825a":(function(s,o,c){var i=c("861d");s.exports=function(f){if(!i(f))throw TypeError(String(f)+" is not an object");return f}}),"83ab":(function(s,o,c){var i=c("d039");s.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})}),8418:(function(s,o,c){var i=c("c04e"),f=c("9bf2"),g=c("5c6c");s.exports=function(x,w,A){var C=i(w);C in x?f.f(x,C,g(0,A)):x[C]=A}}),"861d":(function(s,o){s.exports=function(c){return typeof c=="object"?c!==null:typeof c=="function"}}),8875:(function(s,o,c){var i,f,g;(function(x,w){f=[],i=w,g=typeof i=="function"?i.apply(o,f):i,g!==void 0&&(s.exports=g)})(typeof self<"u"?self:this,function(){function x(){var w=Object.getOwnPropertyDescriptor(document,"currentScript");if(!w&&"currentScript"in document&&document.currentScript||w&&w.get!==x&&document.currentScript)return document.currentScript;try{throw new Error}catch(oe){var A=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,C=/@([^@]*):(\d+):(\d+)\s*$/ig,F=A.exec(oe.stack)||C.exec(oe.stack),z=F&&F[1]||!1,j=F&&F[2]||!1,V=document.location.href.replace(document.location.hash,""),Y,te,J,ee=document.getElementsByTagName("script");z===V&&(Y=document.documentElement.outerHTML,te=new RegExp("(?:[^\\n]+?\\n){0,"+(j-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),J=Y.replace(te,"$1").trim());for(var le=0;le<ee.length;le++)if(ee[le].readyState==="interactive"||ee[le].src===z||z===V&&ee[le].innerHTML&&ee[le].innerHTML.trim()===J)return ee[le];return null}}return x})}),8925:(function(s,o,c){var i=c("c6cd"),f=Function.toString;typeof i.inspectSource!="function"&&(i.inspectSource=function(g){return f.call(g)}),s.exports=i.inspectSource}),"8aa5":(function(s,o,c){var i=c("6547").charAt;s.exports=function(f,g,x){return g+(x?i(f,g).length:1)}}),"8bbf":(function(s,o){s.exports=n}),"90e3":(function(s,o){var c=0,i=Math.random();s.exports=function(f){return"Symbol("+String(f===void 0?"":f)+")_"+(++c+i).toString(36)}}),9112:(function(s,o,c){var i=c("83ab"),f=c("9bf2"),g=c("5c6c");s.exports=i?function(x,w,A){return f.f(x,w,g(1,A))}:function(x,w,A){return x[w]=A,x}}),9263:(function(s,o,c){var i=c("ad6d"),f=c("9f7f"),g=RegExp.prototype.exec,x=String.prototype.replace,w=g,A=(function(){var j=/a/,V=/b*/g;return g.call(j,"a"),g.call(V,"a"),j.lastIndex!==0||V.lastIndex!==0})(),C=f.UNSUPPORTED_Y||f.BROKEN_CARET,F=/()??/.exec("")[1]!==void 0,z=A||F||C;z&&(w=function(V){var Y=this,te,J,ee,le,oe=C&&Y.sticky,ve=i.call(Y),se=Y.source,ie=0,pe=V;return oe&&(ve=ve.replace("y",""),ve.indexOf("g")===-1&&(ve+="g"),pe=String(V).slice(Y.lastIndex),Y.lastIndex>0&&(!Y.multiline||Y.multiline&&V[Y.lastIndex-1]!==`
`)&&(se="(?: "+se+")",pe=" "+pe,ie++),J=new RegExp("^(?:"+se+")",ve)),F&&(J=new RegExp("^"+se+"$(?!\\s)",ve)),A&&(te=Y.lastIndex),ee=g.call(oe?J:Y,pe),oe?ee?(ee.input=ee.input.slice(ie),ee[0]=ee[0].slice(ie),ee.index=Y.lastIndex,Y.lastIndex+=ee[0].length):Y.lastIndex=0:A&&ee&&(Y.lastIndex=Y.global?ee.index+ee[0].length:te),F&&ee&&ee.length>1&&x.call(ee[0],J,function(){for(le=1;le<arguments.length-2;le++)arguments[le]===void 0&&(ee[le]=void 0)}),ee}),s.exports=w}),"94ca":(function(s,o,c){var i=c("d039"),f=/#|\.prototype\./,g=function(F,z){var j=w[x(F)];return j==C?!0:j==A?!1:typeof z=="function"?i(z):!!z},x=g.normalize=function(F){return String(F).replace(f,".").toLowerCase()},w=g.data={},A=g.NATIVE="N",C=g.POLYFILL="P";s.exports=g}),"99af":(function(s,o,c){var i=c("23e7"),f=c("d039"),g=c("e8b5"),x=c("861d"),w=c("7b0b"),A=c("50c4"),C=c("8418"),F=c("65f0"),z=c("1dde"),j=c("b622"),V=c("2d00"),Y=j("isConcatSpreadable"),te=9007199254740991,J="Maximum allowed index exceeded",ee=V>=51||!f(function(){var se=[];return se[Y]=!1,se.concat()[0]!==se}),le=z("concat"),oe=function(se){if(!x(se))return!1;var ie=se[Y];return ie!==void 0?!!ie:g(se)},ve=!ee||!le;i({target:"Array",proto:!0,forced:ve},{concat:function(ie){var pe=w(this),be=F(pe,0),Se=0,Ce,Ee,xe,ke,He;for(Ce=-1,xe=arguments.length;Ce<xe;Ce++)if(He=Ce===-1?pe:arguments[Ce],oe(He)){if(ke=A(He.length),Se+ke>te)throw TypeError(J);for(Ee=0;Ee<ke;Ee++,Se++)Ee in He&&C(be,Se,He[Ee])}else{if(Se>=te)throw TypeError(J);C(be,Se++,He)}return be.length=Se,be}})}),"9bdd":(function(s,o,c){var i=c("825a");s.exports=function(f,g,x,w){try{return w?g(i(x)[0],x[1]):g(x)}catch(C){var A=f.return;throw A!==void 0&&i(A.call(f)),C}}}),"9bf2":(function(s,o,c){var i=c("83ab"),f=c("0cfb"),g=c("825a"),x=c("c04e"),w=Object.defineProperty;o.f=i?w:function(C,F,z){if(g(C),F=x(F,!0),g(z),f)try{return w(C,F,z)}catch{}if("get"in z||"set"in z)throw TypeError("Accessors not supported");return"value"in z&&(C[F]=z.value),C}}),"9ed3":(function(s,o,c){var i=c("ae93").IteratorPrototype,f=c("7c73"),g=c("5c6c"),x=c("d44e"),w=c("3f8c"),A=function(){return this};s.exports=function(C,F,z){var j=F+" Iterator";return C.prototype=f(i,{next:g(1,z)}),x(C,j,!1,!0),w[j]=A,C}}),"9f7f":(function(s,o,c){var i=c("d039");function f(g,x){return RegExp(g,x)}o.UNSUPPORTED_Y=i(function(){var g=f("a","y");return g.lastIndex=2,g.exec("abcd")!=null}),o.BROKEN_CARET=i(function(){var g=f("^r","gy");return g.lastIndex=2,g.exec("str")!=null})}),a2bf:(function(s,o,c){var i=c("e8b5"),f=c("50c4"),g=c("0366"),x=function(w,A,C,F,z,j,V,Y){for(var te=z,J=0,ee=V?g(V,Y,3):!1,le;J<F;){if(J in C){if(le=ee?ee(C[J],J,A):C[J],j>0&&i(le))te=x(w,A,le,f(le.length),te,j-1)-1;else{if(te>=9007199254740991)throw TypeError("Exceed the acceptable array length");w[te]=le}te++}J++}return te};s.exports=x}),a352:(function(s,o){s.exports=r}),a434:(function(s,o,c){var i=c("23e7"),f=c("23cb"),g=c("a691"),x=c("50c4"),w=c("7b0b"),A=c("65f0"),C=c("8418"),F=c("1dde"),z=c("ae40"),j=F("splice"),V=z("splice",{ACCESSORS:!0,0:0,1:2}),Y=Math.max,te=Math.min,J=9007199254740991,ee="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!j||!V},{splice:function(oe,ve){var se=w(this),ie=x(se.length),pe=f(oe,ie),be=arguments.length,Se,Ce,Ee,xe,ke,He;if(be===0?Se=Ce=0:be===1?(Se=0,Ce=ie-pe):(Se=be-2,Ce=te(Y(g(ve),0),ie-pe)),ie+Se-Ce>J)throw TypeError(ee);for(Ee=A(se,Ce),xe=0;xe<Ce;xe++)ke=pe+xe,ke in se&&C(Ee,xe,se[ke]);if(Ee.length=Ce,Se<Ce){for(xe=pe;xe<ie-Ce;xe++)ke=xe+Ce,He=xe+Se,ke in se?se[He]=se[ke]:delete se[He];for(xe=ie;xe>ie-Ce+Se;xe--)delete se[xe-1]}else if(Se>Ce)for(xe=ie-Ce;xe>pe;xe--)ke=xe+Ce-1,He=xe+Se-1,ke in se?se[He]=se[ke]:delete se[He];for(xe=0;xe<Se;xe++)se[xe+pe]=arguments[xe+2];return se.length=ie-Ce+Se,Ee}})}),a4d3:(function(s,o,c){var i=c("23e7"),f=c("da84"),g=c("d066"),x=c("c430"),w=c("83ab"),A=c("4930"),C=c("fdbf"),F=c("d039"),z=c("5135"),j=c("e8b5"),V=c("861d"),Y=c("825a"),te=c("7b0b"),J=c("fc6a"),ee=c("c04e"),le=c("5c6c"),oe=c("7c73"),ve=c("df75"),se=c("241c"),ie=c("057f"),pe=c("7418"),be=c("06cf"),Se=c("9bf2"),Ce=c("d1e7"),Ee=c("9112"),xe=c("6eeb"),ke=c("5692"),He=c("f772"),Ke=c("d012"),Ge=c("90e3"),$t=c("b622"),Ft=c("e538"),Lt=c("746f"),nn=c("d44e"),mn=c("69f3"),Xt=c("b727").forEach,mt=He("hidden"),Jt="Symbol",Kt="prototype",_e=$t("toPrimitive"),bn=mn.set,On=mn.getterFor(Jt),je=Object[Kt],ge=f.Symbol,nt=g("JSON","stringify"),It=be.f,ht=Se.f,ut=ie.f,Rt=Ce.f,ze=ke("symbols"),lt=ke("op-symbols"),at=ke("string-to-symbol-registry"),Et=ke("symbol-to-string-registry"),$e=ke("wks"),Mt=f.QObject,tn=!Mt||!Mt[Kt]||!Mt[Kt].findChild,on=w&&F(function(){return oe(ht({},"a",{get:function(){return ht(this,"a",{value:7}).a}})).a!=7})?function(ye,We,ot){var At=It(je,We);At&&delete je[We],ht(ye,We,ot),At&&ye!==je&&ht(je,We,At)}:ht,vn=function(ye,We){var ot=ze[ye]=oe(ge[Kt]);return bn(ot,{type:Jt,tag:ye,description:We}),w||(ot.description=We),ot},_t=C?function(ye){return typeof ye=="symbol"}:function(ye){return Object(ye)instanceof ge},wt=function(We,ot,At){We===je&&wt(lt,ot,At),Y(We);var Vt=ee(ot,!0);return Y(At),z(ze,Vt)?(At.enumerable?(z(We,mt)&&We[mt][Vt]&&(We[mt][Vt]=!1),At=oe(At,{enumerable:le(0,!1)})):(z(We,mt)||ht(We,mt,le(1,{})),We[mt][Vt]=!0),on(We,Vt,At)):ht(We,Vt,At)},Ve=function(We,ot){Y(We);var At=J(ot),Vt=ve(At).concat(dn(At));return Xt(Vt,function(an){(!w||Pt.call(At,an))&&wt(We,an,At[an])}),We},qe=function(We,ot){return ot===void 0?oe(We):Ve(oe(We),ot)},Pt=function(We){var ot=ee(We,!0),At=Rt.call(this,ot);return this===je&&z(ze,ot)&&!z(lt,ot)?!1:At||!z(this,ot)||!z(ze,ot)||z(this,mt)&&this[mt][ot]?At:!0},Qt=function(We,ot){var At=J(We),Vt=ee(ot,!0);if(!(At===je&&z(ze,Vt)&&!z(lt,Vt))){var an=It(At,Vt);return an&&z(ze,Vt)&&!(z(At,mt)&&At[mt][Vt])&&(an.enumerable=!0),an}},cn=function(We){var ot=ut(J(We)),At=[];return Xt(ot,function(Vt){!z(ze,Vt)&&!z(Ke,Vt)&&At.push(Vt)}),At},dn=function(We){var ot=We===je,At=ut(ot?lt:J(We)),Vt=[];return Xt(At,function(an){z(ze,an)&&(!ot||z(je,an))&&Vt.push(ze[an])}),Vt};if(A||(ge=function(){if(this instanceof ge)throw TypeError("Symbol is not a constructor");var We=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ot=Ge(We),At=function(Vt){this===je&&At.call(lt,Vt),z(this,mt)&&z(this[mt],ot)&&(this[mt][ot]=!1),on(this,ot,le(1,Vt))};return w&&tn&&on(je,ot,{configurable:!0,set:At}),vn(ot,We)},xe(ge[Kt],"toString",function(){return On(this).tag}),xe(ge,"withoutSetter",function(ye){return vn(Ge(ye),ye)}),Ce.f=Pt,Se.f=wt,be.f=Qt,se.f=ie.f=cn,pe.f=dn,Ft.f=function(ye){return vn($t(ye),ye)},w&&(ht(ge[Kt],"description",{configurable:!0,get:function(){return On(this).description}}),x||xe(je,"propertyIsEnumerable",Pt,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:ge}),Xt(ve($e),function(ye){Lt(ye)}),i({target:Jt,stat:!0,forced:!A},{for:function(ye){var We=String(ye);if(z(at,We))return at[We];var ot=ge(We);return at[We]=ot,Et[ot]=We,ot},keyFor:function(We){if(!_t(We))throw TypeError(We+" is not a symbol");if(z(Et,We))return Et[We]},useSetter:function(){tn=!0},useSimple:function(){tn=!1}}),i({target:"Object",stat:!0,forced:!A,sham:!w},{create:qe,defineProperty:wt,defineProperties:Ve,getOwnPropertyDescriptor:Qt}),i({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:cn,getOwnPropertySymbols:dn}),i({target:"Object",stat:!0,forced:F(function(){pe.f(1)})},{getOwnPropertySymbols:function(We){return pe.f(te(We))}}),nt){var Te=!A||F(function(){var ye=ge();return nt([ye])!="[null]"||nt({a:ye})!="{}"||nt(Object(ye))!="{}"});i({target:"JSON",stat:!0,forced:Te},{stringify:function(We,ot,At){for(var Vt=[We],an=1,xn;arguments.length>an;)Vt.push(arguments[an++]);if(xn=ot,!(!V(ot)&&We===void 0||_t(We)))return j(ot)||(ot=function(Hn,Gn){if(typeof xn=="function"&&(Gn=xn.call(this,Hn,Gn)),!_t(Gn))return Gn}),Vt[1]=ot,nt.apply(null,Vt)}})}ge[Kt][_e]||Ee(ge[Kt],_e,ge[Kt].valueOf),nn(ge,Jt),Ke[mt]=!0}),a630:(function(s,o,c){var i=c("23e7"),f=c("4df4"),g=c("1c7e"),x=!g(function(w){Array.from(w)});i({target:"Array",stat:!0,forced:x},{from:f})}),a640:(function(s,o,c){var i=c("d039");s.exports=function(f,g){var x=[][f];return!!x&&i(function(){x.call(null,g||function(){throw 1},1)})}}),a691:(function(s,o){var c=Math.ceil,i=Math.floor;s.exports=function(f){return isNaN(f=+f)?0:(f>0?i:c)(f)}}),ab13:(function(s,o,c){var i=c("b622"),f=i("match");s.exports=function(g){var x=/./;try{"/./"[g](x)}catch{try{return x[f]=!1,"/./"[g](x)}catch{}}return!1}}),ac1f:(function(s,o,c){var i=c("23e7"),f=c("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})}),ad6d:(function(s,o,c){var i=c("825a");s.exports=function(){var f=i(this),g="";return f.global&&(g+="g"),f.ignoreCase&&(g+="i"),f.multiline&&(g+="m"),f.dotAll&&(g+="s"),f.unicode&&(g+="u"),f.sticky&&(g+="y"),g}}),ae40:(function(s,o,c){var i=c("83ab"),f=c("d039"),g=c("5135"),x=Object.defineProperty,w={},A=function(C){throw C};s.exports=function(C,F){if(g(w,C))return w[C];F||(F={});var z=[][C],j=g(F,"ACCESSORS")?F.ACCESSORS:!1,V=g(F,0)?F[0]:A,Y=g(F,1)?F[1]:void 0;return w[C]=!!z&&!f(function(){if(j&&!i)return!0;var te={length:-1};j?x(te,1,{enumerable:!0,get:A}):te[1]=1,z.call(te,V,Y)})}}),ae93:(function(s,o,c){var i=c("e163"),f=c("9112"),g=c("5135"),x=c("b622"),w=c("c430"),A=x("iterator"),C=!1,F=function(){return this},z,j,V;[].keys&&(V=[].keys(),"next"in V?(j=i(i(V)),j!==Object.prototype&&(z=j)):C=!0),z==null&&(z={}),!w&&!g(z,A)&&f(z,A,F),s.exports={IteratorPrototype:z,BUGGY_SAFARI_ITERATORS:C}}),b041:(function(s,o,c){var i=c("00ee"),f=c("f5df");s.exports=i?{}.toString:function(){return"[object "+f(this)+"]"}}),b0c0:(function(s,o,c){var i=c("83ab"),f=c("9bf2").f,g=Function.prototype,x=g.toString,w=/^\s*function ([^ (]*)/,A="name";i&&!(A in g)&&f(g,A,{configurable:!0,get:function(){try{return x.call(this).match(w)[1]}catch{return""}}})}),b622:(function(s,o,c){var i=c("da84"),f=c("5692"),g=c("5135"),x=c("90e3"),w=c("4930"),A=c("fdbf"),C=f("wks"),F=i.Symbol,z=A?F:F&&F.withoutSetter||x;s.exports=function(j){return g(C,j)||(w&&g(F,j)?C[j]=F[j]:C[j]=z("Symbol."+j)),C[j]}}),b64b:(function(s,o,c){var i=c("23e7"),f=c("7b0b"),g=c("df75"),x=c("d039"),w=x(function(){g(1)});i({target:"Object",stat:!0,forced:w},{keys:function(C){return g(f(C))}})}),b727:(function(s,o,c){var i=c("0366"),f=c("44ad"),g=c("7b0b"),x=c("50c4"),w=c("65f0"),A=[].push,C=function(F){var z=F==1,j=F==2,V=F==3,Y=F==4,te=F==6,J=F==5||te;return function(ee,le,oe,ve){for(var se=g(ee),ie=f(se),pe=i(le,oe,3),be=x(ie.length),Se=0,Ce=ve||w,Ee=z?Ce(ee,be):j?Ce(ee,0):void 0,xe,ke;be>Se;Se++)if((J||Se in ie)&&(xe=ie[Se],ke=pe(xe,Se,se),F)){if(z)Ee[Se]=ke;else if(ke)switch(F){case 3:return!0;case 5:return xe;case 6:return Se;case 2:A.call(Ee,xe)}else if(Y)return!1}return te?-1:V||Y?Y:Ee}};s.exports={forEach:C(0),map:C(1),filter:C(2),some:C(3),every:C(4),find:C(5),findIndex:C(6)}}),c04e:(function(s,o,c){var i=c("861d");s.exports=function(f,g){if(!i(f))return f;var x,w;if(g&&typeof(x=f.toString)=="function"&&!i(w=x.call(f))||typeof(x=f.valueOf)=="function"&&!i(w=x.call(f))||!g&&typeof(x=f.toString)=="function"&&!i(w=x.call(f)))return w;throw TypeError("Can't convert object to primitive value")}}),c430:(function(s,o){s.exports=!1}),c6b6:(function(s,o){var c={}.toString;s.exports=function(i){return c.call(i).slice(8,-1)}}),c6cd:(function(s,o,c){var i=c("da84"),f=c("ce4e"),g="__core-js_shared__",x=i[g]||f(g,{});s.exports=x}),c740:(function(s,o,c){var i=c("23e7"),f=c("b727").findIndex,g=c("44d2"),x=c("ae40"),w="findIndex",A=!0,C=x(w);w in[]&&Array(1)[w](function(){A=!1}),i({target:"Array",proto:!0,forced:A||!C},{findIndex:function(z){return f(this,z,arguments.length>1?arguments[1]:void 0)}}),g(w)}),c8ba:(function(s,o){var c;c=(function(){return this})();try{c=c||new Function("return this")()}catch{typeof window=="object"&&(c=window)}s.exports=c}),c975:(function(s,o,c){var i=c("23e7"),f=c("4d64").indexOf,g=c("a640"),x=c("ae40"),w=[].indexOf,A=!!w&&1/[1].indexOf(1,-0)<0,C=g("indexOf"),F=x("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:A||!C||!F},{indexOf:function(j){return A?w.apply(this,arguments)||0:f(this,j,arguments.length>1?arguments[1]:void 0)}})}),ca84:(function(s,o,c){var i=c("5135"),f=c("fc6a"),g=c("4d64").indexOf,x=c("d012");s.exports=function(w,A){var C=f(w),F=0,z=[],j;for(j in C)!i(x,j)&&i(C,j)&&z.push(j);for(;A.length>F;)i(C,j=A[F++])&&(~g(z,j)||z.push(j));return z}}),caad:(function(s,o,c){var i=c("23e7"),f=c("4d64").includes,g=c("44d2"),x=c("ae40"),w=x("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!w},{includes:function(C){return f(this,C,arguments.length>1?arguments[1]:void 0)}}),g("includes")}),cc12:(function(s,o,c){var i=c("da84"),f=c("861d"),g=i.document,x=f(g)&&f(g.createElement);s.exports=function(w){return x?g.createElement(w):{}}}),ce4e:(function(s,o,c){var i=c("da84"),f=c("9112");s.exports=function(g,x){try{f(i,g,x)}catch{i[g]=x}return x}}),d012:(function(s,o){s.exports={}}),d039:(function(s,o){s.exports=function(c){try{return!!c()}catch{return!0}}}),d066:(function(s,o,c){var i=c("428f"),f=c("da84"),g=function(x){return typeof x=="function"?x:void 0};s.exports=function(x,w){return arguments.length<2?g(i[x])||g(f[x]):i[x]&&i[x][w]||f[x]&&f[x][w]}}),d1e7:(function(s,o,c){var i={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,g=f&&!i.call({1:2},1);o.f=g?function(w){var A=f(this,w);return!!A&&A.enumerable}:i}),d28b:(function(s,o,c){var i=c("746f");i("iterator")}),d2bb:(function(s,o,c){var i=c("825a"),f=c("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var g=!1,x={},w;try{w=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,w.call(x,[]),g=x instanceof Array}catch{}return function(C,F){return i(C),f(F),g?w.call(C,F):C.__proto__=F,C}})():void 0)}),d3b7:(function(s,o,c){var i=c("00ee"),f=c("6eeb"),g=c("b041");i||f(Object.prototype,"toString",g,{unsafe:!0})}),d44e:(function(s,o,c){var i=c("9bf2").f,f=c("5135"),g=c("b622"),x=g("toStringTag");s.exports=function(w,A,C){w&&!f(w=C?w:w.prototype,x)&&i(w,x,{configurable:!0,value:A})}}),d58f:(function(s,o,c){var i=c("1c0b"),f=c("7b0b"),g=c("44ad"),x=c("50c4"),w=function(A){return function(C,F,z,j){i(F);var V=f(C),Y=g(V),te=x(V.length),J=A?te-1:0,ee=A?-1:1;if(z<2)for(;;){if(J in Y){j=Y[J],J+=ee;break}if(J+=ee,A?J<0:te<=J)throw TypeError("Reduce of empty array with no initial value")}for(;A?J>=0:te>J;J+=ee)J in Y&&(j=F(j,Y[J],J,V));return j}};s.exports={left:w(!1),right:w(!0)}}),d784:(function(s,o,c){c("ac1f");var i=c("6eeb"),f=c("d039"),g=c("b622"),x=c("9263"),w=c("9112"),A=g("species"),C=!f(function(){var Y=/./;return Y.exec=function(){var te=[];return te.groups={a:"7"},te},"".replace(Y,"$<a>")!=="7"}),F=(function(){return"a".replace(/./,"$0")==="$0"})(),z=g("replace"),j=(function(){return/./[z]?/./[z]("a","$0")==="":!1})(),V=!f(function(){var Y=/(?:)/,te=Y.exec;Y.exec=function(){return te.apply(this,arguments)};var J="ab".split(Y);return J.length!==2||J[0]!=="a"||J[1]!=="b"});s.exports=function(Y,te,J,ee){var le=g(Y),oe=!f(function(){var Se={};return Se[le]=function(){return 7},""[Y](Se)!=7}),ve=oe&&!f(function(){var Se=!1,Ce=/a/;return Y==="split"&&(Ce={},Ce.constructor={},Ce.constructor[A]=function(){return Ce},Ce.flags="",Ce[le]=/./[le]),Ce.exec=function(){return Se=!0,null},Ce[le](""),!Se});if(!oe||!ve||Y==="replace"&&!(C&&F&&!j)||Y==="split"&&!V){var se=/./[le],ie=J(le,""[Y],function(Se,Ce,Ee,xe,ke){return Ce.exec===x?oe&&!ke?{done:!0,value:se.call(Ce,Ee,xe)}:{done:!0,value:Se.call(Ee,Ce,xe)}:{done:!1}},{REPLACE_KEEPS_$0:F,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:j}),pe=ie[0],be=ie[1];i(String.prototype,Y,pe),i(RegExp.prototype,le,te==2?function(Se,Ce){return be.call(Se,this,Ce)}:function(Se){return be.call(Se,this)})}ee&&w(RegExp.prototype[le],"sham",!0)}}),d81d:(function(s,o,c){var i=c("23e7"),f=c("b727").map,g=c("1dde"),x=c("ae40"),w=g("map"),A=x("map");i({target:"Array",proto:!0,forced:!w||!A},{map:function(F){return f(this,F,arguments.length>1?arguments[1]:void 0)}})}),da84:(function(s,o,c){(function(i){var f=function(g){return g&&g.Math==Math&&g};s.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof i=="object"&&i)||Function("return this")()}).call(this,c("c8ba"))}),dbb4:(function(s,o,c){var i=c("23e7"),f=c("83ab"),g=c("56ef"),x=c("fc6a"),w=c("06cf"),A=c("8418");i({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(F){for(var z=x(F),j=w.f,V=g(z),Y={},te=0,J,ee;V.length>te;)ee=j(z,J=V[te++]),ee!==void 0&&A(Y,J,ee);return Y}})}),dbf1:(function(s,o,c){(function(i){c.d(o,"a",function(){return g});function f(){return typeof window<"u"?window.console:i.console}var g=f()}).call(this,c("c8ba"))}),ddb0:(function(s,o,c){var i=c("da84"),f=c("fdbc"),g=c("e260"),x=c("9112"),w=c("b622"),A=w("iterator"),C=w("toStringTag"),F=g.values;for(var z in f){var j=i[z],V=j&&j.prototype;if(V){if(V[A]!==F)try{x(V,A,F)}catch{V[A]=F}if(V[C]||x(V,C,z),f[z]){for(var Y in g)if(V[Y]!==g[Y])try{x(V,Y,g[Y])}catch{V[Y]=g[Y]}}}}}),df75:(function(s,o,c){var i=c("ca84"),f=c("7839");s.exports=Object.keys||function(x){return i(x,f)}}),e01a:(function(s,o,c){var i=c("23e7"),f=c("83ab"),g=c("da84"),x=c("5135"),w=c("861d"),A=c("9bf2").f,C=c("e893"),F=g.Symbol;if(f&&typeof F=="function"&&(!("description"in F.prototype)||F().description!==void 0)){var z={},j=function(){var le=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),oe=this instanceof j?new F(le):le===void 0?F():F(le);return le===""&&(z[oe]=!0),oe};C(j,F);var V=j.prototype=F.prototype;V.constructor=j;var Y=V.toString,te=String(F("test"))=="Symbol(test)",J=/^Symbol\((.*)\)[^)]+$/;A(V,"description",{configurable:!0,get:function(){var le=w(this)?this.valueOf():this,oe=Y.call(le);if(x(z,le))return"";var ve=te?oe.slice(7,-1):oe.replace(J,"$1");return ve===""?void 0:ve}}),i({global:!0,forced:!0},{Symbol:j})}}),e163:(function(s,o,c){var i=c("5135"),f=c("7b0b"),g=c("f772"),x=c("e177"),w=g("IE_PROTO"),A=Object.prototype;s.exports=x?Object.getPrototypeOf:function(C){return C=f(C),i(C,w)?C[w]:typeof C.constructor=="function"&&C instanceof C.constructor?C.constructor.prototype:C instanceof Object?A:null}}),e177:(function(s,o,c){var i=c("d039");s.exports=!i(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})}),e260:(function(s,o,c){var i=c("fc6a"),f=c("44d2"),g=c("3f8c"),x=c("69f3"),w=c("7dd0"),A="Array Iterator",C=x.set,F=x.getterFor(A);s.exports=w(Array,"Array",function(z,j){C(this,{type:A,target:i(z),index:0,kind:j})},function(){var z=F(this),j=z.target,V=z.kind,Y=z.index++;return!j||Y>=j.length?(z.target=void 0,{value:void 0,done:!0}):V=="keys"?{value:Y,done:!1}:V=="values"?{value:j[Y],done:!1}:{value:[Y,j[Y]],done:!1}},"values"),g.Arguments=g.Array,f("keys"),f("values"),f("entries")}),e439:(function(s,o,c){var i=c("23e7"),f=c("d039"),g=c("fc6a"),x=c("06cf").f,w=c("83ab"),A=f(function(){x(1)}),C=!w||A;i({target:"Object",stat:!0,forced:C,sham:!w},{getOwnPropertyDescriptor:function(z,j){return x(g(z),j)}})}),e538:(function(s,o,c){var i=c("b622");o.f=i}),e893:(function(s,o,c){var i=c("5135"),f=c("56ef"),g=c("06cf"),x=c("9bf2");s.exports=function(w,A){for(var C=f(A),F=x.f,z=g.f,j=0;j<C.length;j++){var V=C[j];i(w,V)||F(w,V,z(A,V))}}}),e8b5:(function(s,o,c){var i=c("c6b6");s.exports=Array.isArray||function(g){return i(g)=="Array"}}),e95a:(function(s,o,c){var i=c("b622"),f=c("3f8c"),g=i("iterator"),x=Array.prototype;s.exports=function(w){return w!==void 0&&(f.Array===w||x[g]===w)}}),f5df:(function(s,o,c){var i=c("00ee"),f=c("c6b6"),g=c("b622"),x=g("toStringTag"),w=f((function(){return arguments})())=="Arguments",A=function(C,F){try{return C[F]}catch{}};s.exports=i?f:function(C){var F,z,j;return C===void 0?"Undefined":C===null?"Null":typeof(z=A(F=Object(C),x))=="string"?z:w?f(F):(j=f(F))=="Object"&&typeof F.callee=="function"?"Arguments":j}}),f772:(function(s,o,c){var i=c("5692"),f=c("90e3"),g=i("keys");s.exports=function(x){return g[x]||(g[x]=f(x))}}),fb15:(function(s,o,c){if(c.r(o),typeof window<"u"){var i=window.document.currentScript;{var f=c("8875");i=f(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:f})}var g=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);g&&(c.p=g[1])}c("99af"),c("4de4"),c("4160"),c("c975"),c("d81d"),c("a434"),c("159b"),c("a4d3"),c("e439"),c("dbb4"),c("b64b");function x(_t,wt,Ve){return wt in _t?Object.defineProperty(_t,wt,{value:Ve,enumerable:!0,configurable:!0,writable:!0}):_t[wt]=Ve,_t}function w(_t,wt){var Ve=Object.keys(_t);if(Object.getOwnPropertySymbols){var qe=Object.getOwnPropertySymbols(_t);wt&&(qe=qe.filter(function(Pt){return Object.getOwnPropertyDescriptor(_t,Pt).enumerable})),Ve.push.apply(Ve,qe)}return Ve}function A(_t){for(var wt=1;wt<arguments.length;wt++){var Ve=arguments[wt]!=null?arguments[wt]:{};wt%2?w(Object(Ve),!0).forEach(function(qe){x(_t,qe,Ve[qe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_t,Object.getOwnPropertyDescriptors(Ve)):w(Object(Ve)).forEach(function(qe){Object.defineProperty(_t,qe,Object.getOwnPropertyDescriptor(Ve,qe))})}return _t}function C(_t){if(Array.isArray(_t))return _t}c("e01a"),c("d28b"),c("e260"),c("d3b7"),c("3ca3"),c("ddb0");function F(_t,wt){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_t)))){var Ve=[],qe=!0,Pt=!1,Qt=void 0;try{for(var cn=_t[Symbol.iterator](),dn;!(qe=(dn=cn.next()).done)&&(Ve.push(dn.value),!(wt&&Ve.length===wt));qe=!0);}catch(Te){Pt=!0,Qt=Te}finally{try{!qe&&cn.return!=null&&cn.return()}finally{if(Pt)throw Qt}}return Ve}}c("a630"),c("fb6a"),c("b0c0"),c("25f0");function z(_t,wt){(wt==null||wt>_t.length)&&(wt=_t.length);for(var Ve=0,qe=new Array(wt);Ve<wt;Ve++)qe[Ve]=_t[Ve];return qe}function j(_t,wt){if(_t){if(typeof _t=="string")return z(_t,wt);var Ve=Object.prototype.toString.call(_t).slice(8,-1);if(Ve==="Object"&&_t.constructor&&(Ve=_t.constructor.name),Ve==="Map"||Ve==="Set")return Array.from(_t);if(Ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ve))return z(_t,wt)}}function V(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y(_t,wt){return C(_t)||F(_t,wt)||j(_t,wt)||V()}function te(_t){if(Array.isArray(_t))return z(_t)}function J(_t){if(typeof Symbol<"u"&&Symbol.iterator in Object(_t))return Array.from(_t)}function ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(_t){return te(_t)||J(_t)||j(_t)||ee()}var oe=c("a352"),ve=c.n(oe);function se(_t){_t.parentElement!==null&&_t.parentElement.removeChild(_t)}function ie(_t,wt,Ve){var qe=Ve===0?_t.children[0]:_t.children[Ve-1].nextSibling;_t.insertBefore(wt,qe)}var pe=c("dbf1");c("13d5"),c("4fad"),c("ac1f"),c("5319");function be(_t){var wt=Object.create(null);return function(qe){var Pt=wt[qe];return Pt||(wt[qe]=_t(qe))}}var Se=/-(\w)/g,Ce=be(function(_t){return _t.replace(Se,function(wt,Ve){return Ve.toUpperCase()})});c("5db7"),c("73d9");var Ee=["Start","Add","Remove","Update","End"],xe=["Choose","Unchoose","Sort","Filter","Clone"],ke=["Move"],He=[ke,Ee,xe].flatMap(function(_t){return _t}).map(function(_t){return"on".concat(_t)}),Ke={manage:ke,manageAndEmit:Ee,emit:xe};function Ge(_t){return He.indexOf(_t)!==-1}c("caad"),c("2ca0");var $t=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Ft(_t){return $t.includes(_t)}function Lt(_t){return["transition-group","TransitionGroup"].includes(_t)}function nn(_t){return["id","class","role","style"].includes(_t)||_t.startsWith("data-")||_t.startsWith("aria-")||_t.startsWith("on")}function mn(_t){return _t.reduce(function(wt,Ve){var qe=Y(Ve,2),Pt=qe[0],Qt=qe[1];return wt[Pt]=Qt,wt},{})}function Xt(_t){var wt=_t.$attrs,Ve=_t.componentData,qe=Ve===void 0?{}:Ve,Pt=mn(Object.entries(wt).filter(function(Qt){var cn=Y(Qt,2),dn=cn[0];return cn[1],nn(dn)}));return A(A({},Pt),qe)}function mt(_t){var wt=_t.$attrs,Ve=_t.callBackBuilder,qe=mn(Jt(wt));Object.entries(Ve).forEach(function(Qt){var cn=Y(Qt,2),dn=cn[0],Te=cn[1];Ke[dn].forEach(function(ye){qe["on".concat(ye)]=Te(ye)})});var Pt="[data-draggable]".concat(qe.draggable||"");return A(A({},qe),{},{draggable:Pt})}function Jt(_t){return Object.entries(_t).filter(function(wt){var Ve=Y(wt,2),qe=Ve[0];return Ve[1],!nn(qe)}).map(function(wt){var Ve=Y(wt,2),qe=Ve[0],Pt=Ve[1];return[Ce(qe),Pt]}).filter(function(wt){var Ve=Y(wt,2),qe=Ve[0];return Ve[1],!Ge(qe)})}c("c740");function Kt(_t,wt){if(!(_t instanceof wt))throw new TypeError("Cannot call a class as a function")}function _e(_t,wt){for(var Ve=0;Ve<wt.length;Ve++){var qe=wt[Ve];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(_t,qe.key,qe)}}function bn(_t,wt,Ve){return wt&&_e(_t.prototype,wt),_t}var On=function(wt){var Ve=wt.el;return Ve},je=function(wt,Ve){return wt.__draggable_context=Ve},ge=function(wt){return wt.__draggable_context},nt=(function(){function _t(wt){var Ve=wt.nodes,qe=Ve.header,Pt=Ve.default,Qt=Ve.footer,cn=wt.root,dn=wt.realList;Kt(this,_t),this.defaultNodes=Pt,this.children=[].concat(le(qe),le(Pt),le(Qt)),this.externalComponent=cn.externalComponent,this.rootTransition=cn.transition,this.tag=cn.tag,this.realList=dn}return bn(_t,[{key:"render",value:function(Ve,qe){var Pt=this.tag,Qt=this.children,cn=this._isRootComponent,dn=cn?{default:function(){return Qt}}:Qt;return Ve(Pt,qe,dn)}},{key:"updated",value:function(){var Ve=this.defaultNodes,qe=this.realList;Ve.forEach(function(Pt,Qt){je(On(Pt),{element:qe[Qt],index:Qt})})}},{key:"getUnderlyingVm",value:function(Ve){return ge(Ve)}},{key:"getVmIndexFromDomIndex",value:function(Ve,qe){var Pt=this.defaultNodes,Qt=Pt.length,cn=qe.children,dn=cn.item(Ve);if(dn===null)return Qt;var Te=ge(dn);if(Te)return Te.index;if(Qt===0)return 0;var ye=On(Pt[0]),We=le(cn).findIndex(function(ot){return ot===ye});return Ve<We?0:Qt}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),_t})(),It=c("8bbf");function ht(_t,wt){var Ve=_t[wt];return Ve?Ve():[]}function ut(_t){var wt=_t.$slots,Ve=_t.realList,qe=_t.getKey,Pt=Ve||[],Qt=["header","footer"].map(function(ot){return ht(wt,ot)}),cn=Y(Qt,2),dn=cn[0],Te=cn[1],ye=wt.item;if(!ye)throw new Error("draggable element must have an item slot");var We=Pt.flatMap(function(ot,At){return ye({element:ot,index:At}).map(function(Vt){return Vt.key=qe(ot),Vt.props=A(A({},Vt.props||{}),{},{"data-draggable":!0}),Vt})});if(We.length!==Pt.length)throw new Error("Item slot must have only one child");return{header:dn,footer:Te,default:We}}function Rt(_t){var wt=Lt(_t),Ve=!Ft(_t)&&!wt;return{transition:wt,externalComponent:Ve,tag:Ve?Object(It.resolveComponent)(_t):wt?It.TransitionGroup:_t}}function ze(_t){var wt=_t.$slots,Ve=_t.tag,qe=_t.realList,Pt=_t.getKey,Qt=ut({$slots:wt,realList:qe,getKey:Pt}),cn=Rt(Ve);return new nt({nodes:Qt,root:cn,realList:qe})}function lt(_t,wt){var Ve=this;Object(It.nextTick)(function(){return Ve.$emit(_t.toLowerCase(),wt)})}function at(_t){var wt=this;return function(Ve,qe){if(wt.realList!==null)return wt["onDrag".concat(_t)](Ve,qe)}}function Et(_t){var wt=this,Ve=at.call(this,_t);return function(qe,Pt){Ve.call(wt,qe,Pt),lt.call(wt,_t,qe)}}var $e=null,Mt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(wt){return wt}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},tn=["update:modelValue","change"].concat(le([].concat(le(Ke.manageAndEmit),le(Ke.emit)).map(function(_t){return _t.toLowerCase()}))),on=Object(It.defineComponent)({name:"draggable",inheritAttrs:!1,props:Mt,emits:tn,data:function(){return{error:!1}},render:function(){try{this.error=!1;var wt=this.$slots,Ve=this.$attrs,qe=this.tag,Pt=this.componentData,Qt=this.realList,cn=this.getKey,dn=ze({$slots:wt,tag:qe,realList:Qt,getKey:cn});this.componentStructure=dn;var Te=Xt({$attrs:Ve,componentData:Pt});return dn.render(It.h,Te)}catch(ye){return this.error=!0,Object(It.h)("pre",{style:{color:"red"}},ye.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&pe.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var wt=this;if(!this.error){var Ve=this.$attrs,qe=this.$el,Pt=this.componentStructure;Pt.updated();var Qt=mt({$attrs:Ve,callBackBuilder:{manageAndEmit:function(Te){return Et.call(wt,Te)},emit:function(Te){return lt.bind(wt,Te)},manage:function(Te){return at.call(wt,Te)}}}),cn=qe.nodeType===1?qe:qe.parentElement;this._sortable=new ve.a(cn,Qt),this.targetDomElement=cn,cn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var wt=this.list;return wt||this.modelValue},getKey:function(){var wt=this.itemKey;return typeof wt=="function"?wt:function(Ve){return Ve[wt]}}},watch:{$attrs:{handler:function(wt){var Ve=this._sortable;Ve&&Jt(wt).forEach(function(qe){var Pt=Y(qe,2),Qt=Pt[0],cn=Pt[1];Ve.option(Qt,cn)})},deep:!0}},methods:{getUnderlyingVm:function(wt){return this.componentStructure.getUnderlyingVm(wt)||null},getUnderlyingPotencialDraggableComponent:function(wt){return wt.__draggable_component__},emitChanges:function(wt){var Ve=this;Object(It.nextTick)(function(){return Ve.$emit("change",wt)})},alterList:function(wt){if(this.list){wt(this.list);return}var Ve=le(this.modelValue);wt(Ve),this.$emit("update:modelValue",Ve)},spliceList:function(){var wt=arguments,Ve=function(Pt){return Pt.splice.apply(Pt,le(wt))};this.alterList(Ve)},updatePosition:function(wt,Ve){var qe=function(Qt){return Qt.splice(Ve,0,Qt.splice(wt,1)[0])};this.alterList(qe)},getRelatedContextFromMoveEvent:function(wt){var Ve=wt.to,qe=wt.related,Pt=this.getUnderlyingPotencialDraggableComponent(Ve);if(!Pt)return{component:Pt};var Qt=Pt.realList,cn={list:Qt,component:Pt};if(Ve!==qe&&Qt){var dn=Pt.getUnderlyingVm(qe)||{};return A(A({},dn),cn)}return cn},getVmIndexFromDomIndex:function(wt){return this.componentStructure.getVmIndexFromDomIndex(wt,this.targetDomElement)},onDragStart:function(wt){this.context=this.getUnderlyingVm(wt.item),wt.item._underlying_vm_=this.clone(this.context.element),$e=wt.item},onDragAdd:function(wt){var Ve=wt.item._underlying_vm_;if(Ve!==void 0){se(wt.item);var qe=this.getVmIndexFromDomIndex(wt.newIndex);this.spliceList(qe,0,Ve);var Pt={element:Ve,newIndex:qe};this.emitChanges({added:Pt})}},onDragRemove:function(wt){if(ie(this.$el,wt.item,wt.oldIndex),wt.pullMode==="clone"){se(wt.clone);return}var Ve=this.context,qe=Ve.index,Pt=Ve.element;this.spliceList(qe,1);var Qt={element:Pt,oldIndex:qe};this.emitChanges({removed:Qt})},onDragUpdate:function(wt){se(wt.item),ie(wt.from,wt.item,wt.oldIndex);var Ve=this.context.index,qe=this.getVmIndexFromDomIndex(wt.newIndex);this.updatePosition(Ve,qe);var Pt={element:this.context.element,oldIndex:Ve,newIndex:qe};this.emitChanges({moved:Pt})},computeFutureIndex:function(wt,Ve){if(!wt.element)return 0;var qe=le(Ve.to.children).filter(function(dn){return dn.style.display!=="none"}),Pt=qe.indexOf(Ve.related),Qt=wt.component.getVmIndexFromDomIndex(Pt),cn=qe.indexOf($e)!==-1;return cn||!Ve.willInsertAfter?Qt:Qt+1},onDragMove:function(wt,Ve){var qe=this.move,Pt=this.realList;if(!qe||!Pt)return!0;var Qt=this.getRelatedContextFromMoveEvent(wt),cn=this.computeFutureIndex(Qt,wt),dn=A(A({},this.context),{},{futureIndex:cn}),Te=A(A({},wt),{},{relatedContext:Qt,draggedContext:dn});return qe(Te,Ve)},onDragEnd:function(){$e=null}}}),vn=on;o.default=vn}),fb6a:(function(s,o,c){var i=c("23e7"),f=c("861d"),g=c("e8b5"),x=c("23cb"),w=c("50c4"),A=c("fc6a"),C=c("8418"),F=c("b622"),z=c("1dde"),j=c("ae40"),V=z("slice"),Y=j("slice",{ACCESSORS:!0,0:0,1:2}),te=F("species"),J=[].slice,ee=Math.max;i({target:"Array",proto:!0,forced:!V||!Y},{slice:function(oe,ve){var se=A(this),ie=w(se.length),pe=x(oe,ie),be=x(ve===void 0?ie:ve,ie),Se,Ce,Ee;if(g(se)&&(Se=se.constructor,typeof Se=="function"&&(Se===Array||g(Se.prototype))?Se=void 0:f(Se)&&(Se=Se[te],Se===null&&(Se=void 0)),Se===Array||Se===void 0))return J.call(se,pe,be);for(Ce=new(Se===void 0?Array:Se)(ee(be-pe,0)),Ee=0;pe<be;pe++,Ee++)pe in se&&C(Ce,Ee,se[pe]);return Ce.length=Ee,Ce}})}),fc6a:(function(s,o,c){var i=c("44ad"),f=c("1d80");s.exports=function(g){return i(f(g))}}),fdbc:(function(s,o){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),fdbf:(function(s,o,c){var i=c("4930");s.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"})}).default})})(SC)),SC.exports}var pnt=fnt();const mnt=ih(pnt),gnt=xs(e=>{e.vueApp.component("draggable",mnt)});/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function _nt(e,t,n){return(t=vnt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dX(Object(n),!0).forEach(function(r){_nt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dX(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ynt(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vnt(e){var t=ynt(e,"string");return typeof t=="symbol"?t:t+""}const hX=()=>{};let wB={},Ble={},$le=null,Vle={mark:hX,measure:hX};try{typeof window<"u"&&(wB=window),typeof document<"u"&&(Ble=document),typeof MutationObserver<"u"&&($le=MutationObserver),typeof performance<"u"&&(Vle=performance)}catch{}const{userAgent:fX=""}=wB.navigator||{},Hm=wB,Fs=Ble,pX=$le,IA=Vle;Hm.document;const Rf=!!Fs.documentElement&&!!Fs.head&&typeof Fs.addEventListener=="function"&&typeof Fs.createElement=="function",jle=~fX.indexOf("MSIE")||~fX.indexOf("Trident/");var bnt=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,xnt=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,Ule={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},wnt={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},Hle=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Xa="classic",pO="duotone",Snt="sharp",Ent="sharp-duotone",Wle=[Xa,pO,Snt,Ent],Tnt={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},Mnt={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},Ant=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),Cnt={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},Int=["fak","fa-kit","fakd","fa-kit-duotone"],mX={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},Pnt=["kit"],Ont={kit:{"fa-kit":"fak"}},Dnt=["fak","fakd"],Rnt={kit:{fak:"fa-kit"}},gX={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},PA={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},knt=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Lnt=["fak","fa-kit","fakd","fa-kit-duotone"],Nnt={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},Fnt={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},znt={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},e6={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},Bnt=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],t6=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...knt,...Bnt],$nt=["solid","regular","light","thin","duotone","brands"],Gle=[1,2,3,4,5,6,7,8,9,10],Vnt=Gle.concat([11,12,13,14,15,16,17,18,19,20]),jnt=[...Object.keys(znt),...$nt,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",PA.GROUP,PA.SWAP_OPACITY,PA.PRIMARY,PA.SECONDARY].concat(Gle.map(e=>"".concat(e,"x"))).concat(Vnt.map(e=>"w-".concat(e))),Unt={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Sf="___FONT_AWESOME___",n6=16,Yle="fa",qle="svg-inline--fa",hy="data-fa-i2svg",r6="data-fa-pseudo-element",Hnt="data-fa-pseudo-element-pending",SB="data-prefix",EB="data-icon",_X="fontawesome-i2svg",Wnt="async",Gnt=["HTML","HEAD","STYLE","SCRIPT"],Xle=(()=>{try{return!0}catch{return!1}})();function fE(e){return new Proxy(e,{get(t,n){return n in t?t[n]:t[Xa]}})}const Zle=Fn({},Ule);Zle[Xa]=Fn(Fn(Fn(Fn({},{"fa-duotone":"duotone"}),Ule[Xa]),mX.kit),mX["kit-duotone"]);const Ynt=fE(Zle),i6=Fn({},Cnt);i6[Xa]=Fn(Fn(Fn(Fn({},{duotone:"fad"}),i6[Xa]),gX.kit),gX["kit-duotone"]);const yX=fE(i6),s6=Fn({},e6);s6[Xa]=Fn(Fn({},s6[Xa]),Rnt.kit);const TB=fE(s6),o6=Fn({},Fnt);o6[Xa]=Fn(Fn({},o6[Xa]),Ont.kit);fE(o6);const qnt=bnt,Kle="fa-layers-text",Xnt=xnt,Znt=Fn({},Tnt);fE(Znt);const Knt=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],ak=wnt,Jnt=[...Pnt,...jnt],E2=Hm.FontAwesomeConfig||{};function Qnt(e){var t=Fs.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function ert(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}Fs&&typeof Fs.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(t=>{let[n,r]=t;const s=ert(Qnt(n));s!=null&&(E2[r]=s)});const Jle={styleDefault:"solid",familyDefault:Xa,cssPrefix:Yle,replacementClass:qle,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};E2.familyPrefix&&(E2.cssPrefix=E2.familyPrefix);const C1=Fn(Fn({},Jle),E2);C1.autoReplaceSvg||(C1.observeMutations=!1);const wr={};Object.keys(Jle).forEach(e=>{Object.defineProperty(wr,e,{enumerable:!0,set:function(t){C1[e]=t,T2.forEach(n=>n(wr))},get:function(){return C1[e]}})});Object.defineProperty(wr,"familyPrefix",{enumerable:!0,set:function(e){C1.cssPrefix=e,T2.forEach(t=>t(wr))},get:function(){return C1.cssPrefix}});Hm.FontAwesomeConfig=wr;const T2=[];function trt(e){return T2.push(e),()=>{T2.splice(T2.indexOf(e),1)}}const Fp=n6,Ud={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function nrt(e){if(!e||!Rf)return;const t=Fs.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=Fs.head.childNodes;let r=null;for(let s=n.length-1;s>-1;s--){const o=n[s],c=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(c)>-1&&(r=o)}return Fs.head.insertBefore(t,r),e}const rrt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function TS(){let e=12,t="";for(;e-- >0;)t+=rrt[Math.random()*62|0];return t}function Q1(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function MB(e){return e.classList?Q1(e.classList):(e.getAttribute("class")||"").split(" ").filter(t=>t)}function Qle(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function irt(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,'="').concat(Qle(e[n]),'" '),"").trim()}function mO(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";"),"")}function AB(e){return e.size!==Ud.size||e.x!==Ud.x||e.y!==Ud.y||e.rotate!==Ud.rotate||e.flipX||e.flipY}function srt(e){let{transform:t,containerWidth:n,iconWidth:r}=e;const s={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(t.x*32,", ").concat(t.y*32,") "),c="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),i="rotate(".concat(t.rotate," 0 0)"),f={transform:"".concat(o," ").concat(c," ").concat(i)},g={transform:"translate(".concat(r/2*-1," -256)")};return{outer:s,inner:f,path:g}}function ort(e){let{transform:t,width:n=n6,height:r=n6,startCentered:s=!1}=e,o="";return s&&jle?o+="translate(".concat(t.x/Fp-n/2,"em, ").concat(t.y/Fp-r/2,"em) "):s?o+="translate(calc(-50% + ".concat(t.x/Fp,"em), calc(-50% + ").concat(t.y/Fp,"em)) "):o+="translate(".concat(t.x/Fp,"em, ").concat(t.y/Fp,"em) "),o+="scale(".concat(t.size/Fp*(t.flipX?-1:1),", ").concat(t.size/Fp*(t.flipY?-1:1),") "),o+="rotate(".concat(t.rotate,"deg) "),o}var art=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function ece(){const e=Yle,t=qle,n=wr.cssPrefix,r=wr.replacementClass;let s=art;if(n!==e||r!==t){const o=new RegExp("\\.".concat(e,"\\-"),"g"),c=new RegExp("\\--".concat(e,"\\-"),"g"),i=new RegExp("\\.".concat(t),"g");s=s.replace(o,".".concat(n,"-")).replace(c,"--".concat(n,"-")).replace(i,".".concat(r))}return s}let vX=!1;function lk(){wr.autoAddCss&&!vX&&(nrt(ece()),vX=!0)}var lrt={mixout(){return{dom:{css:ece,insertCss:lk}}},hooks(){return{beforeDOMElementCreation(){lk()},beforeI2svg(){lk()}}}};const Ef=Hm||{};Ef[Sf]||(Ef[Sf]={});Ef[Sf].styles||(Ef[Sf].styles={});Ef[Sf].hooks||(Ef[Sf].hooks={});Ef[Sf].shims||(Ef[Sf].shims=[]);var Hd=Ef[Sf];const tce=[],nce=function(){Fs.removeEventListener("DOMContentLoaded",nce),g3=1,tce.map(e=>e())};let g3=!1;Rf&&(g3=(Fs.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Fs.readyState),g3||Fs.addEventListener("DOMContentLoaded",nce));function crt(e){Rf&&(g3?setTimeout(e,0):tce.push(e))}function pE(e){const{tag:t,attributes:n={},children:r=[]}=e;return typeof e=="string"?Qle(e):"<".concat(t," ").concat(irt(n),">").concat(r.map(pE).join(""),"</").concat(t,">")}function bX(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var ck=function(t,n,r,s){var o=Object.keys(t),c=o.length,i=n,f,g,x;for(r===void 0?(f=1,x=t[o[0]]):(f=0,x=r);f<c;f++)g=o[f],x=i(x,t[g],g,t);return x};function urt(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const o=e.charCodeAt(n++);(o&64512)==56320?t.push(((s&1023)<<10)+(o&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}function a6(e){const t=urt(e);return t.length===1?t[0].toString(16):null}function drt(e,t){const n=e.length;let r=e.charCodeAt(t),s;return r>=55296&&r<=56319&&n>t+1&&(s=e.charCodeAt(t+1),s>=56320&&s<=57343)?(r-55296)*1024+s-56320+65536:r}function xX(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t},{})}function l6(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=n,s=xX(t);typeof Hd.hooks.addPack=="function"&&!r?Hd.hooks.addPack(e,xX(t)):Hd.styles[e]=Fn(Fn({},Hd.styles[e]||{}),s),e==="fas"&&l6("fa",t)}const{styles:MS,shims:hrt}=Hd,rce=Object.keys(TB),frt=rce.reduce((e,t)=>(e[t]=Object.keys(TB[t]),e),{});let CB=null,ice={},sce={},oce={},ace={},lce={};function prt(e){return~Jnt.indexOf(e)}function mrt(e,t){const n=t.split("-"),r=n[0],s=n.slice(1).join("-");return r===e&&s!==""&&!prt(s)?s:null}const cce=()=>{const e=r=>ck(MS,(s,o,c)=>(s[c]=ck(o,r,{}),s),{});ice=e((r,s,o)=>(s[3]&&(r[s[3]]=o),s[2]&&s[2].filter(i=>typeof i=="number").forEach(i=>{r[i.toString(16)]=o}),r)),sce=e((r,s,o)=>(r[o]=o,s[2]&&s[2].filter(i=>typeof i=="string").forEach(i=>{r[i]=o}),r)),lce=e((r,s,o)=>{const c=s[2];return r[o]=o,c.forEach(i=>{r[i]=o}),r});const t="far"in MS||wr.autoFetchSvg,n=ck(hrt,(r,s)=>{const o=s[0];let c=s[1];const i=s[2];return c==="far"&&!t&&(c="fas"),typeof o=="string"&&(r.names[o]={prefix:c,iconName:i}),typeof o=="number"&&(r.unicodes[o.toString(16)]={prefix:c,iconName:i}),r},{names:{},unicodes:{}});oce=n.names,ace=n.unicodes,CB=gO(wr.styleDefault,{family:wr.familyDefault})};trt(e=>{CB=gO(e.styleDefault,{family:wr.familyDefault})});cce();function IB(e,t){return(ice[e]||{})[t]}function grt(e,t){return(sce[e]||{})[t]}function C_(e,t){return(lce[e]||{})[t]}function uce(e){return oce[e]||{prefix:null,iconName:null}}function _rt(e){const t=ace[e],n=IB("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Wm(){return CB}const dce=()=>({prefix:null,iconName:null,rest:[]});function yrt(e){let t=Xa;const n=rce.reduce((r,s)=>(r[s]="".concat(wr.cssPrefix,"-").concat(s),r),{});return Wle.forEach(r=>{(e.includes(n[r])||e.some(s=>frt[r].includes(s)))&&(t=r)}),t}function gO(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=Xa}=t,r=Ynt[n][e];if(n===pO&&!e)return"fad";const s=yX[n][e]||yX[n][r],o=e in Hd.styles?e:null;return s||o||null}function vrt(e){let t=[],n=null;return e.forEach(r=>{const s=mrt(wr.cssPrefix,r);s?n=s:r&&t.push(r)}),{iconName:n,rest:t}}function wX(e){return e.sort().filter((t,n,r)=>r.indexOf(t)===n)}function _O(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=t;let r=null;const s=t6.concat(Lnt),o=wX(e.filter(w=>s.includes(w))),c=wX(e.filter(w=>!t6.includes(w))),i=o.filter(w=>(r=w,!Hle.includes(w))),[f=null]=i,g=yrt(o),x=Fn(Fn({},vrt(c)),{},{prefix:gO(f,{family:g})});return Fn(Fn(Fn({},x),Srt({values:e,family:g,styles:MS,config:wr,canonical:x,givenPrefix:r})),brt(n,r,x))}function brt(e,t,n){let{prefix:r,iconName:s}=n;if(e||!r||!s)return{prefix:r,iconName:s};const o=t==="fa"?uce(s):{},c=C_(r,s);return s=o.iconName||c||s,r=o.prefix||r,r==="far"&&!MS.far&&MS.fas&&!wr.autoFetchSvg&&(r="fas"),{prefix:r,iconName:s}}const xrt=Wle.filter(e=>e!==Xa||e!==pO),wrt=Object.keys(e6).filter(e=>e!==Xa).map(e=>Object.keys(e6[e])).flat();function Srt(e){const{values:t,family:n,canonical:r,givenPrefix:s="",styles:o={},config:c={}}=e,i=n===pO,f=t.includes("fa-duotone")||t.includes("fad"),g=c.familyDefault==="duotone",x=r.prefix==="fad"||r.prefix==="fa-duotone";if(!i&&(f||g||x)&&(r.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(r.prefix="fab"),!r.prefix&&xrt.includes(n)&&(Object.keys(o).find(A=>wrt.includes(A))||c.autoFetchSvg)){const A=Ant.get(n).defaultShortPrefixId;r.prefix=A,r.iconName=C_(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||s==="fa")&&(r.prefix=Wm()||"fas"),r}class Ert{constructor(){this.definitions={}}add(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const s=n.reduce(this._pullDefinitions,{});Object.keys(s).forEach(o=>{this.definitions[o]=Fn(Fn({},this.definitions[o]||{}),s[o]),l6(o,s[o]);const c=TB[Xa][o];c&&l6(c,s[o]),cce()})}reset(){this.definitions={}}_pullDefinitions(t,n){const r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map(s=>{const{prefix:o,iconName:c,icon:i}=r[s],f=i[2];t[o]||(t[o]={}),f.length>0&&f.forEach(g=>{typeof g=="string"&&(t[o][g]=i)}),t[o][c]=i}),t}}let SX=[],y0={};const N0={},Trt=Object.keys(N0);function Mrt(e,t){let{mixoutsTo:n}=t;return SX=e,y0={},Object.keys(N0).forEach(r=>{Trt.indexOf(r)===-1&&delete N0[r]}),SX.forEach(r=>{const s=r.mixout?r.mixout():{};if(Object.keys(s).forEach(o=>{typeof s[o]=="function"&&(n[o]=s[o]),typeof s[o]=="object"&&Object.keys(s[o]).forEach(c=>{n[o]||(n[o]={}),n[o][c]=s[o][c]})}),r.hooks){const o=r.hooks();Object.keys(o).forEach(c=>{y0[c]||(y0[c]=[]),y0[c].push(o[c])})}r.provides&&r.provides(N0)}),n}function c6(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return(y0[e]||[]).forEach(c=>{t=c.apply(null,[t,...r])}),t}function fy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(y0[e]||[]).forEach(o=>{o.apply(null,n)})}function Gm(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return N0[e]?N0[e].apply(null,t):void 0}function u6(e){e.prefix==="fa"&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||Wm();if(t)return t=C_(n,t)||t,bX(hce.definitions,n,t)||bX(Hd.styles,n,t)}const hce=new Ert,Art=()=>{wr.autoReplaceSvg=!1,wr.observeMutations=!1,fy("noAuto")},Crt={i2svg:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Rf?(fy("beforeI2svg",e),Gm("pseudoElements2svg",e),Gm("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;wr.autoReplaceSvg===!1&&(wr.autoReplaceSvg=!0),wr.observeMutations=!0,crt(()=>{Prt({autoReplaceSvgRoot:t}),fy("watch",e)})}},Irt={icon:e=>{if(e===null)return null;if(typeof e=="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:C_(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){const t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],n=gO(e[0]);return{prefix:n,iconName:C_(n,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(wr.cssPrefix,"-"))>-1||e.match(qnt))){const t=_O(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||Wm(),iconName:C_(t.prefix,t.iconName)||t.iconName}}if(typeof e=="string"){const t=Wm();return{prefix:t,iconName:C_(t,e)||e}}}},Ic={noAuto:Art,config:wr,dom:Crt,parse:Irt,library:hce,findIconDefinition:u6,toHtml:pE},Prt=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t=Fs}=e;(Object.keys(Hd.styles).length>0||wr.autoFetchSvg)&&Rf&&wr.autoReplaceSvg&&Ic.dom.i2svg({node:t})};function yO(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(n=>pE(n))}}),Object.defineProperty(e,"node",{get:function(){if(!Rf)return;const n=Fs.createElement("div");return n.innerHTML=e.html,n.children}}),e}function Ort(e){let{children:t,main:n,mask:r,attributes:s,styles:o,transform:c}=e;if(AB(c)&&n.found&&!r.found){const{width:i,height:f}=n,g={x:i/f/2,y:.5};s.style=mO(Fn(Fn({},o),{},{"transform-origin":"".concat(g.x+c.x/16,"em ").concat(g.y+c.y/16,"em")}))}return[{tag:"svg",attributes:s,children:t}]}function Drt(e){let{prefix:t,iconName:n,children:r,attributes:s,symbol:o}=e;const c=o===!0?"".concat(t,"-").concat(wr.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Fn(Fn({},s),{},{id:c}),children:r}]}]}function PB(e){const{icons:{main:t,mask:n},prefix:r,iconName:s,transform:o,symbol:c,title:i,maskId:f,titleId:g,extra:x,watchable:w=!1}=e,{width:A,height:C}=n.found?n:t,F=Dnt.includes(r),z=[wr.replacementClass,s?"".concat(wr.cssPrefix,"-").concat(s):""].filter(ee=>x.classes.indexOf(ee)===-1).filter(ee=>ee!==""||!!ee).concat(x.classes).join(" ");let j={children:[],attributes:Fn(Fn({},x.attributes),{},{"data-prefix":r,"data-icon":s,class:z,role:x.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(A," ").concat(C)})};const V=F&&!~x.classes.indexOf("fa-fw")?{width:"".concat(A/C*16*.0625,"em")}:{};w&&(j.attributes[hy]=""),i&&(j.children.push({tag:"title",attributes:{id:j.attributes["aria-labelledby"]||"title-".concat(g||TS())},children:[i]}),delete j.attributes.title);const Y=Fn(Fn({},j),{},{prefix:r,iconName:s,main:t,mask:n,maskId:f,transform:o,symbol:c,styles:Fn(Fn({},V),x.styles)}),{children:te,attributes:J}=n.found&&t.found?Gm("generateAbstractMask",Y)||{children:[],attributes:{}}:Gm("generateAbstractIcon",Y)||{children:[],attributes:{}};return Y.children=te,Y.attributes=J,c?Drt(Y):Ort(Y)}function EX(e){const{content:t,width:n,height:r,transform:s,title:o,extra:c,watchable:i=!1}=e,f=Fn(Fn(Fn({},c.attributes),o?{title:o}:{}),{},{class:c.classes.join(" ")});i&&(f[hy]="");const g=Fn({},c.styles);AB(s)&&(g.transform=ort({transform:s,startCentered:!0,width:n,height:r}),g["-webkit-transform"]=g.transform);const x=mO(g);x.length>0&&(f.style=x);const w=[];return w.push({tag:"span",attributes:f,children:[t]}),o&&w.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),w}function Rrt(e){const{content:t,title:n,extra:r}=e,s=Fn(Fn(Fn({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=mO(r.styles);o.length>0&&(s.style=o);const c=[];return c.push({tag:"span",attributes:s,children:[t]}),n&&c.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),c}const{styles:uk}=Hd;function d6(e){const t=e[0],n=e[1],[r]=e.slice(4);let s=null;return Array.isArray(r)?s={tag:"g",attributes:{class:"".concat(wr.cssPrefix,"-").concat(ak.GROUP)},children:[{tag:"path",attributes:{class:"".concat(wr.cssPrefix,"-").concat(ak.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(wr.cssPrefix,"-").concat(ak.PRIMARY),fill:"currentColor",d:r[1]}}]}:s={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:n,icon:s}}const krt={found:!1,width:512,height:512};function Lrt(e,t){!Xle&&!wr.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function h6(e,t){let n=t;return t==="fa"&&wr.styleDefault!==null&&(t=Wm()),new Promise((r,s)=>{if(n==="fa"){const o=uce(e)||{};e=o.iconName||e,t=o.prefix||t}if(e&&t&&uk[t]&&uk[t][e]){const o=uk[t][e];return r(d6(o))}Lrt(e,t),r(Fn(Fn({},krt),{},{icon:wr.showMissingIcons&&e?Gm("missingIconAbstract")||{}:{}}))})}const TX=()=>{},f6=wr.measurePerformance&&IA&&IA.mark&&IA.measure?IA:{mark:TX,measure:TX},Hw='FA "6.7.2"',Nrt=e=>(f6.mark("".concat(Hw," ").concat(e," begins")),()=>fce(e)),fce=e=>{f6.mark("".concat(Hw," ").concat(e," ends")),f6.measure("".concat(Hw," ").concat(e),"".concat(Hw," ").concat(e," begins"),"".concat(Hw," ").concat(e," ends"))};var OB={begin:Nrt,end:fce};const LC=()=>{};function MX(e){return typeof(e.getAttribute?e.getAttribute(hy):null)=="string"}function Frt(e){const t=e.getAttribute?e.getAttribute(SB):null,n=e.getAttribute?e.getAttribute(EB):null;return t&&n}function zrt(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(wr.replacementClass)}function Brt(){return wr.autoReplaceSvg===!0?NC.replace:NC[wr.autoReplaceSvg]||NC.replace}function $rt(e){return Fs.createElementNS("http://www.w3.org/2000/svg",e)}function Vrt(e){return Fs.createElement(e)}function pce(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=e.tag==="svg"?$rt:Vrt}=t;if(typeof e=="string")return Fs.createTextNode(e);const r=n(e.tag);return Object.keys(e.attributes||[]).forEach(function(o){r.setAttribute(o,e.attributes[o])}),(e.children||[]).forEach(function(o){r.appendChild(pce(o,{ceFn:n}))}),r}function jrt(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}const NC={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(n=>{t.parentNode.insertBefore(pce(n),t)}),t.getAttribute(hy)===null&&wr.keepOriginalSource){let n=Fs.createComment(jrt(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~MB(t).indexOf(wr.replacementClass))return NC.replace(e);const r=new RegExp("".concat(wr.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const o=n[0].attributes.class.split(" ").reduce((c,i)=>(i===wr.replacementClass||i.match(r)?c.toSvg.push(i):c.toNode.push(i),c),{toNode:[],toSvg:[]});n[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",o.toNode.join(" "))}const s=n.map(o=>pE(o)).join(`
`);t.setAttribute(hy,""),t.innerHTML=s}};function AX(e){e()}function mce(e,t){const n=typeof t=="function"?t:LC;if(e.length===0)n();else{let r=AX;wr.mutateApproach===Wnt&&(r=Hm.requestAnimationFrame||AX),r(()=>{const s=Brt(),o=OB.begin("mutate");e.map(s),o(),n()})}}let DB=!1;function gce(){DB=!0}function p6(){DB=!1}let _3=null;function CX(e){if(!pX||!wr.observeMutations)return;const{treeCallback:t=LC,nodeCallback:n=LC,pseudoElementsCallback:r=LC,observeMutationsRoot:s=Fs}=e;_3=new pX(o=>{if(DB)return;const c=Wm();Q1(o).forEach(i=>{if(i.type==="childList"&&i.addedNodes.length>0&&!MX(i.addedNodes[0])&&(wr.searchPseudoElements&&r(i.target),t(i.target)),i.type==="attributes"&&i.target.parentNode&&wr.searchPseudoElements&&r(i.target.parentNode),i.type==="attributes"&&MX(i.target)&&~Knt.indexOf(i.attributeName))if(i.attributeName==="class"&&Frt(i.target)){const{prefix:f,iconName:g}=_O(MB(i.target));i.target.setAttribute(SB,f||c),g&&i.target.setAttribute(EB,g)}else zrt(i.target)&&n(i.target)})}),Rf&&_3.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Urt(){_3&&_3.disconnect()}function Hrt(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce((r,s)=>{const o=s.split(":"),c=o[0],i=o.slice(1);return c&&i.length>0&&(r[c]=i.join(":").trim()),r},{})),n}function Wrt(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=e.innerText!==void 0?e.innerText.trim():"";let s=_O(MB(e));return s.prefix||(s.prefix=Wm()),t&&n&&(s.prefix=t,s.iconName=n),s.iconName&&s.prefix||(s.prefix&&r.length>0&&(s.iconName=grt(s.prefix,e.innerText)||IB(s.prefix,a6(e.innerText))),!s.iconName&&wr.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=e.firstChild.data)),s}function Grt(e){const t=Q1(e.attributes).reduce((s,o)=>(s.name!=="class"&&s.name!=="style"&&(s[o.name]=o.value),s),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return wr.autoA11y&&(n?t["aria-labelledby"]="".concat(wr.replacementClass,"-title-").concat(r||TS()):(t["aria-hidden"]="true",t.focusable="false")),t}function Yrt(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ud,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function IX(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:s}=Wrt(e),o=Grt(e),c=c6("parseNodeAttributes",{},e);let i=t.styleParser?Hrt(e):[];return Fn({iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:Ud,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:i,attributes:o}},c)}const{styles:qrt}=Hd;function _ce(e){const t=wr.autoReplaceSvg==="nest"?IX(e,{styleParser:!1}):IX(e);return~t.extra.classes.indexOf(Kle)?Gm("generateLayersText",e,t):Gm("generateSvgReplacementMutation",e,t)}function Xrt(){return[...Int,...t6]}function PX(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Rf)return Promise.resolve();const n=Fs.documentElement.classList,r=x=>n.add("".concat(_X,"-").concat(x)),s=x=>n.remove("".concat(_X,"-").concat(x)),o=wr.autoFetchSvg?Xrt():Hle.concat(Object.keys(qrt));o.includes("fa")||o.push("fa");const c=[".".concat(Kle,":not([").concat(hy,"])")].concat(o.map(x=>".".concat(x,":not([").concat(hy,"])"))).join(", ");if(c.length===0)return Promise.resolve();let i=[];try{i=Q1(e.querySelectorAll(c))}catch{}if(i.length>0)r("pending"),s("complete");else return Promise.resolve();const f=OB.begin("onTree"),g=i.reduce((x,w)=>{try{const A=_ce(w);A&&x.push(A)}catch(A){Xle||A.name==="MissingIcon"&&console.error(A)}return x},[]);return new Promise((x,w)=>{Promise.all(g).then(A=>{mce(A,()=>{r("active"),r("complete"),s("pending"),typeof t=="function"&&t(),f(),x()})}).catch(A=>{f(),w(A)})})}function Zrt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;_ce(e).then(n=>{n&&mce([n],t)})}function Krt(e){return function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(t||{}).icon?t:u6(t||{});let{mask:s}=n;return s&&(s=(s||{}).icon?s:u6(s||{})),e(r,Fn(Fn({},n),{},{mask:s}))}}const Jrt=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Ud,symbol:r=!1,mask:s=null,maskId:o=null,title:c=null,titleId:i=null,classes:f=[],attributes:g={},styles:x={}}=t;if(!e)return;const{prefix:w,iconName:A,icon:C}=e;return yO(Fn({type:"icon"},e),()=>(fy("beforeDOMElementCreation",{iconDefinition:e,params:t}),wr.autoA11y&&(c?g["aria-labelledby"]="".concat(wr.replacementClass,"-title-").concat(i||TS()):(g["aria-hidden"]="true",g.focusable="false")),PB({icons:{main:d6(C),mask:s?d6(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:A,transform:Fn(Fn({},Ud),n),symbol:r,title:c,maskId:o,titleId:i,extra:{attributes:g,styles:x,classes:f}})))};var Qrt={mixout(){return{icon:Krt(Jrt)}},hooks(){return{mutationObserverCallbacks(e){return e.treeCallback=PX,e.nodeCallback=Zrt,e}}},provides(e){e.i2svg=function(t){const{node:n=Fs,callback:r=()=>{}}=t;return PX(n,r)},e.generateSvgReplacementMutation=function(t,n){const{iconName:r,title:s,titleId:o,prefix:c,transform:i,symbol:f,mask:g,maskId:x,extra:w}=n;return new Promise((A,C)=>{Promise.all([h6(r,c),g.iconName?h6(g.iconName,g.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(F=>{let[z,j]=F;A([t,PB({icons:{main:z,mask:j},prefix:c,iconName:r,transform:i,symbol:f,maskId:x,title:s,titleId:o,extra:w,watchable:!0})])}).catch(C)})},e.generateAbstractIcon=function(t){let{children:n,attributes:r,main:s,transform:o,styles:c}=t;const i=mO(c);i.length>0&&(r.style=i);let f;return AB(o)&&(f=Gm("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),n.push(f||s.icon),{children:n,attributes:r}}}},eit={mixout(){return{layer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=t;return yO({type:"layer"},()=>{fy("beforeDOMElementCreation",{assembler:e,params:t});let r=[];return e(s=>{Array.isArray(s)?s.map(o=>{r=r.concat(o.abstract)}):r=r.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(wr.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}}}},tit={mixout(){return{counter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:r=[],attributes:s={},styles:o={}}=t;return yO({type:"counter",content:e},()=>(fy("beforeDOMElementCreation",{content:e,params:t}),Rrt({content:e.toString(),title:n,extra:{attributes:s,styles:o,classes:["".concat(wr.cssPrefix,"-layers-counter"),...r]}})))}}}},nit={mixout(){return{text(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Ud,title:r=null,classes:s=[],attributes:o={},styles:c={}}=t;return yO({type:"text",content:e},()=>(fy("beforeDOMElementCreation",{content:e,params:t}),EX({content:e,transform:Fn(Fn({},Ud),n),title:r,extra:{attributes:o,styles:c,classes:["".concat(wr.cssPrefix,"-layers-text"),...s]}})))}}},provides(e){e.generateLayersText=function(t,n){const{title:r,transform:s,extra:o}=n;let c=null,i=null;if(jle){const f=parseInt(getComputedStyle(t).fontSize,10),g=t.getBoundingClientRect();c=g.width/f,i=g.height/f}return wr.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,EX({content:t.innerHTML,width:c,height:i,transform:s,title:r,extra:o,watchable:!0})])}}};const rit=new RegExp('"',"ug"),OX=[1105920,1112319],DX=Fn(Fn(Fn(Fn({},{FontAwesome:{normal:"fas",400:"fas"}}),Mnt),Unt),Nnt),m6=Object.keys(DX).reduce((e,t)=>(e[t.toLowerCase()]=DX[t],e),{}),iit=Object.keys(m6).reduce((e,t)=>{const n=m6[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e},{});function sit(e){const t=e.replace(rit,""),n=drt(t,0),r=n>=OX[0]&&n<=OX[1],s=t.length===2?t[0]===t[1]:!1;return{value:a6(s?t[0]:t),isSecondary:r||s}}function oit(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(t),s=isNaN(r)?"normal":r;return(m6[n]||{})[s]||iit[n]}function RX(e,t){const n="".concat(Hnt).concat(t.replace(":","-"));return new Promise((r,s)=>{if(e.getAttribute(n)!==null)return r();const c=Q1(e.children).filter(A=>A.getAttribute(r6)===t)[0],i=Hm.getComputedStyle(e,t),f=i.getPropertyValue("font-family"),g=f.match(Xnt),x=i.getPropertyValue("font-weight"),w=i.getPropertyValue("content");if(c&&!g)return e.removeChild(c),r();if(g&&w!=="none"&&w!==""){const A=i.getPropertyValue("content");let C=oit(f,x);const{value:F,isSecondary:z}=sit(A),j=g[0].startsWith("FontAwesome");let V=IB(C,F),Y=V;if(j){const te=_rt(F);te.iconName&&te.prefix&&(V=te.iconName,C=te.prefix)}if(V&&!z&&(!c||c.getAttribute(SB)!==C||c.getAttribute(EB)!==Y)){e.setAttribute(n,Y),c&&e.removeChild(c);const te=Yrt(),{extra:J}=te;J.attributes[r6]=t,h6(V,C).then(ee=>{const le=PB(Fn(Fn({},te),{},{icons:{main:ee,mask:dce()},prefix:C,iconName:Y,extra:J,watchable:!0})),oe=Fs.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(oe,e.firstChild):e.appendChild(oe),oe.outerHTML=le.map(ve=>pE(ve)).join(`
`),e.removeAttribute(n),r()}).catch(s)}else r()}else r()})}function ait(e){return Promise.all([RX(e,"::before"),RX(e,"::after")])}function lit(e){return e.parentNode!==document.head&&!~Gnt.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(r6)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function kX(e){if(Rf)return new Promise((t,n)=>{const r=Q1(e.querySelectorAll("*")).filter(lit).map(ait),s=OB.begin("searchPseudoElements");gce(),Promise.all(r).then(()=>{s(),p6(),t()}).catch(()=>{s(),p6(),n()})})}var cit={hooks(){return{mutationObserverCallbacks(e){return e.pseudoElementsCallback=kX,e}}},provides(e){e.pseudoElements2svg=function(t){const{node:n=Fs}=t;wr.searchPseudoElements&&kX(n)}}};let LX=!1;var uit={mixout(){return{dom:{unwatch(){gce(),LX=!0}}}},hooks(){return{bootstrap(){CX(c6("mutationObserverCallbacks",{}))},noAuto(){Urt()},watch(e){const{observeMutationsRoot:t}=e;LX?p6():CX(c6("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}};const NX=e=>{let t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce((n,r)=>{const s=r.toLowerCase().split("-"),o=s[0];let c=s.slice(1).join("-");if(o&&c==="h")return n.flipX=!0,n;if(o&&c==="v")return n.flipY=!0,n;if(c=parseFloat(c),isNaN(c))return n;switch(o){case"grow":n.size=n.size+c;break;case"shrink":n.size=n.size-c;break;case"left":n.x=n.x-c;break;case"right":n.x=n.x+c;break;case"up":n.y=n.y-c;break;case"down":n.y=n.y+c;break;case"rotate":n.rotate=n.rotate+c;break}return n},t)};var dit={mixout(){return{parse:{transform:e=>NX(e)}}},hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=NX(n)),e}}},provides(e){e.generateAbstractTransformGrouping=function(t){let{main:n,transform:r,containerWidth:s,iconWidth:o}=t;const c={transform:"translate(".concat(s/2," 256)")},i="translate(".concat(r.x*32,", ").concat(r.y*32,") "),f="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),g="rotate(".concat(r.rotate," 0 0)"),x={transform:"".concat(i," ").concat(f," ").concat(g)},w={transform:"translate(".concat(o/2*-1," -256)")},A={outer:c,inner:x,path:w};return{tag:"g",attributes:Fn({},A.outer),children:[{tag:"g",attributes:Fn({},A.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:Fn(Fn({},n.icon.attributes),A.path)}]}]}}}};const dk={x:0,y:0,width:"100%",height:"100%"};function FX(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function hit(e){return e.tag==="g"?e.children:[e]}var fit={hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),r=n?_O(n.split(" ").map(s=>s.trim())):dce();return r.prefix||(r.prefix=Wm()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides(e){e.generateAbstractMask=function(t){let{children:n,attributes:r,main:s,mask:o,maskId:c,transform:i}=t;const{width:f,icon:g}=s,{width:x,icon:w}=o,A=srt({transform:i,containerWidth:x,iconWidth:f}),C={tag:"rect",attributes:Fn(Fn({},dk),{},{fill:"white"})},F=g.children?{children:g.children.map(FX)}:{},z={tag:"g",attributes:Fn({},A.inner),children:[FX(Fn({tag:g.tag,attributes:Fn(Fn({},g.attributes),A.path)},F))]},j={tag:"g",attributes:Fn({},A.outer),children:[z]},V="mask-".concat(c||TS()),Y="clip-".concat(c||TS()),te={tag:"mask",attributes:Fn(Fn({},dk),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[C,j]},J={tag:"defs",children:[{tag:"clipPath",attributes:{id:Y},children:hit(w)},te]};return n.push(J,{tag:"rect",attributes:Fn({fill:"currentColor","clip-path":"url(#".concat(Y,")"),mask:"url(#".concat(V,")")},dk)}),{children:n,attributes:r}}}},pit={provides(e){let t=!1;Hm.matchMedia&&(t=Hm.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const n=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:Fn(Fn({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const o=Fn(Fn({},s),{},{attributeName:"opacity"}),c={tag:"circle",attributes:Fn(Fn({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||c.children.push({tag:"animate",attributes:Fn(Fn({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Fn(Fn({},o),{},{values:"1;0;1;1;0;1;"})}),n.push(c),n.push({tag:"path",attributes:Fn(Fn({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Fn(Fn({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||n.push({tag:"path",attributes:Fn(Fn({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Fn(Fn({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},mit={hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),r=n===null?!1:n===""?!0:n;return e.symbol=r,e}}}},git=[lrt,Qrt,eit,tit,nit,cit,uit,dit,fit,pit,mit];Mrt(git,{mixoutsTo:Ic});Ic.noAuto;const _it=Ic.config,yit=Ic.library;Ic.dom;const g6=Ic.parse;Ic.findIconDefinition;Ic.toHtml;const vit=Ic.icon;Ic.layer;Ic.text;Ic.counter;function zX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Hh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zX(Object(n),!0).forEach(function(r){Yl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zX(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bit(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xit(e){var t=bit(e,"string");return typeof t=="symbol"?t:t+""}function y3(e){"@babel/helpers - typeof";return y3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y3(e)}function Yl(e,t,n){return t=xit(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wit(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Sit(e,t){if(e==null)return{};var n=wit(e,t),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Eit=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yce={exports:{}};(function(e){(function(t){var n=function(V,Y,te){if(!g(Y)||w(Y)||A(Y)||C(Y)||f(Y))return Y;var J,ee=0,le=0;if(x(Y))for(J=[],le=Y.length;ee<le;ee++)J.push(n(V,Y[ee],te));else{J={};for(var oe in Y)Object.prototype.hasOwnProperty.call(Y,oe)&&(J[V(oe,te)]=n(V,Y[oe],te))}return J},r=function(V,Y){Y=Y||{};var te=Y.separator||"_",J=Y.split||/(?=[A-Z])/;return V.split(J).join(te)},s=function(V){return F(V)?V:(V=V.replace(/[\-_\s]+(.)?/g,function(Y,te){return te?te.toUpperCase():""}),V.substr(0,1).toLowerCase()+V.substr(1))},o=function(V){var Y=s(V);return Y.substr(0,1).toUpperCase()+Y.substr(1)},c=function(V,Y){return r(V,Y).toLowerCase()},i=Object.prototype.toString,f=function(V){return typeof V=="function"},g=function(V){return V===Object(V)},x=function(V){return i.call(V)=="[object Array]"},w=function(V){return i.call(V)=="[object Date]"},A=function(V){return i.call(V)=="[object RegExp]"},C=function(V){return i.call(V)=="[object Boolean]"},F=function(V){return V=V-0,V===V},z=function(V,Y){var te=Y&&"process"in Y?Y.process:Y;return typeof te!="function"?V:function(J,ee){return te(J,V,ee)}},j={camelize:s,decamelize:c,pascalize:o,depascalize:c,camelizeKeys:function(V,Y){return n(z(s,Y),V)},decamelizeKeys:function(V,Y){return n(z(c,Y),V,Y)},pascalizeKeys:function(V,Y){return n(z(o,Y),V)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};e.exports?e.exports=j:t.humps=j})(Eit)})(yce);var Tit=yce.exports,Mit=["class","style"];function Ait(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,n){var r=n.indexOf(":"),s=Tit.camelize(n.slice(0,r)),o=n.slice(r+1).trim();return t[s]=o,t},{})}function Cit(e){return e.split(/\s+/).reduce(function(t,n){return t[n]=!0,t},{})}function vce(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(f){return vce(f)}),s=Object.keys(e.attributes||{}).reduce(function(f,g){var x=e.attributes[g];switch(g){case"class":f.class=Cit(x);break;case"style":f.style=Ait(x);break;default:f.attrs[g]=x}return f},{attrs:{},class:{},style:{}});n.class;var o=n.style,c=o===void 0?{}:o,i=Sit(n,Mit);return Hs(e.tag,Hh(Hh(Hh({},t),{},{class:s.class,style:Hh(Hh({},s.style),c)},s.attrs),i),r)}var bce=!1;try{bce=!0}catch{}function Iit(){if(!bce&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function hk(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Yl({},e,t):{}}function Pit(e){var t,n=(t={"fa-spin":e.spin,"fa-pulse":e.pulse,"fa-fw":e.fixedWidth,"fa-border":e.border,"fa-li":e.listItem,"fa-inverse":e.inverse,"fa-flip":e.flip===!0,"fa-flip-horizontal":e.flip==="horizontal"||e.flip==="both","fa-flip-vertical":e.flip==="vertical"||e.flip==="both"},Yl(Yl(Yl(Yl(Yl(Yl(Yl(Yl(Yl(Yl(t,"fa-".concat(e.size),e.size!==null),"fa-rotate-".concat(e.rotation),e.rotation!==null),"fa-pull-".concat(e.pull),e.pull!==null),"fa-swap-opacity",e.swapOpacity),"fa-bounce",e.bounce),"fa-shake",e.shake),"fa-beat",e.beat),"fa-fade",e.fade),"fa-beat-fade",e.beatFade),"fa-flash",e.flash),Yl(Yl(t,"fa-spin-pulse",e.spinPulse),"fa-spin-reverse",e.spinReverse));return Object.keys(n).map(function(r){return n[r]?r:null}).filter(function(r){return r})}function BX(e){if(e&&y3(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(g6.icon)return g6.icon(e);if(e===null)return null;if(y3(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}var Oit=ki({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(t){return[!0,!1,"horizontal","vertical","both"].indexOf(t)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(t){return["right","left"].indexOf(t)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(t){return[90,180,270].indexOf(Number.parseInt(t,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(t){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(t)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(t,n){var r=n.attrs,s=Ct(function(){return BX(t.icon)}),o=Ct(function(){return hk("classes",Pit(t))}),c=Ct(function(){return hk("transform",typeof t.transform=="string"?g6.transform(t.transform):t.transform)}),i=Ct(function(){return hk("mask",BX(t.mask))}),f=Ct(function(){return vit(s.value,Hh(Hh(Hh(Hh({},o.value),c.value),i.value),{},{symbol:t.symbol,title:t.title,titleId:t.titleId,maskId:t.maskId}))});Hr(f,function(x){if(!x)return Iit("Could not find one or more icon(s)",s.value,i.value)},{immediate:!0});var g=Ct(function(){return f.value?vce(f.value.abstract[0],{},r):null});return function(){return g.value}}});/*!
 * Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license (Commercial License)
 * Copyright 2024 Fonticons, Inc.
 */const Dit={prefix:"fad",iconName:"camera-movie",icon:[576,512,[127909,127910],"f8a9",["M0 288c0 17.7 14.3 32 32 32l32 0 0 128c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-16 0-96 0-16c0-35.3-28.7-64-64-64l-32 0-224 0-64 0-32 0c-17.7 0-32 14.3-32 32z","M128 64a64 64 0 1 0 0 128 64 64 0 1 0 0-128zM352 256l-224 0C57.3 256 0 198.7 0 128S57.3 0 128 0c48.2 0 90.2 26.6 112 66C261.8 26.6 303.8 0 352 0c70.7 0 128 57.3 128 128s-57.3 128-128 128zm0-192a64 64 0 1 0 0 128 64 64 0 1 0 0-128zM558.3 259.4c10.8 5.4 17.7 16.5 17.7 28.6l0 192c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48L448 448l0-16 0-96 0-16 12.8-9.6 64-48c9.7-7.3 22.7-8.4 33.5-3z"]]},Rit={prefix:"fad",iconName:"users",icon:[640,512,[],"f0c0",["M0 298.7C0 310.4 9.6 320 21.3 320l213.3 0c.2 0 .4 0 .7 0c-26.6-23.5-43.3-57.8-43.3-96c0-7.6 .7-15 1.9-22.3c-13.6-6.3-28.7-9.7-44.6-9.7l-42.7 0C47.8 192 0 239.8 0 298.7zM64 80a80 80 0 1 0 160 0A80 80 0 1 0 64 80zM404.7 320c.2 0 .4 0 .7 0l213.3 0c11.8 0 21.3-9.6 21.3-21.3C640 239.8 592.2 192 533.3 192l-42.7 0c-15.9 0-31 3.5-44.6 9.7c1.3 7.2 1.9 14.7 1.9 22.3c0 38.2-16.8 72.5-43.3 96zM432 80a80 80 0 1 0 160 0A80 80 0 1 0 432 80z","M320 320a96 96 0 1 0 0-192 96 96 0 1 0 0 192zm-58.7 32C187.7 352 128 411.7 128 485.3c0 14.7 11.9 26.7 26.7 26.7l330.7 0c14.7 0 26.7-11.9 26.7-26.7C512 411.7 452.3 352 378.7 352l-117.3 0z"]]},kit={prefix:"fad",iconName:"bell-on",icon:[640,512,[128365],"f8fa",["M96 384c0 4.4 .9 8.9 2.8 13.1C104 408.6 115.4 416 128 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C497.3 319.2 480 273.9 480 226.8l0-18.8c0-77.4-55-142-128-156.8L352 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 19.2C215 66 160 130.6 160 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-5.3 6-8.1 13.6-8.1 21.3z","M586.7 53.5c11.9-5.9 16.7-20.3 10.7-32.2s-20.3-16.7-32.2-10.7l-64 32c-11.9 5.9-16.7 20.3-10.7 32.2s20.3 16.7 32.2 10.7l64-32zM0 200c0 13.3 10.7 24 24 24l80 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-80 0c-13.3 0-24 10.7-24 24zm512 0c0 13.3 10.7 24 24 24l80 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-80 0c-13.3 0-24 10.7-24 24zM42.5 21.3c-5.9 11.9-1.1 26.3 10.7 32.2l64 32c11.9 5.9 26.3 1.1 32.2-10.7s1.1-26.3-10.7-32.2l-64-32C62.9 4.6 48.5 9.4 42.5 21.3zm322.7 472c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]]},Lit={prefix:"fad",iconName:"map-location-dot",icon:[576,512,["map-marked-alt"],"f5a0",["M0 209.6L0 480.4c0 17 17.1 28.6 32.9 22.3L160 451.8l0-251.4c-3.5-6.9-6.7-13.8-9.6-20.6c-5.6-13.2-10.4-27.4-12.8-41.5l-122.6 49C6 191 0 199.8 0 209.6zM192 255l0 194.4 192 54.9L384 255c-20.5 31.3-42.3 59.6-56.2 77c-20.5 25.6-59.1 25.6-79.6 0c-13.9-17.4-35.7-45.7-56.2-77zm224-54.6L416 503l144.9-58c9.1-3.6 15.1-12.5 15.1-22.3L576 152c0-17-17.1-28.6-32.9-22.3l-116 46.4c-.5 1.2-1 2.5-1.5 3.7c-2.9 6.8-6.1 13.7-9.6 20.6z","M302.8 312C334.9 271.9 408 174.6 408 120C408 53.7 354.3 0 288 0S168 53.7 168 120c0 54.6 73.1 151.9 105.2 192c7.7 9.6 22 9.6 29.6 0zM288 72a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"]]},Nit={prefix:"fad",iconName:"id-badge",icon:[384,512,[],"f2c1",["M0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0C28.7 0 0 28.7 0 64zM80 400c0-44.2 35.8-80 80-80l64 0c44.2 0 80 35.8 80 80c0 8.8-7.2 16-16 16L96 416c-8.8 0-16-7.2-16-16zM128 80c0-8.8 7.2-16 16-16l96 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-96 0c-8.8 0-16-7.2-16-16zM256 224a64 64 0 1 1 -128 0 64 64 0 1 1 128 0z","M192 288a64 64 0 1 0 0-128 64 64 0 1 0 0 128zm-32 32c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16l192 0c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80l-64 0z"]]},Fit={prefix:"fad",iconName:"mountain",icon:[512,512,[127956],"f6fc",["M135.7 191.7l59.5 79.3c.4 .5 .8 1 1.3 1.5s.9 .9 1.4 1.3c1 .8 2 1.5 3.1 2c.6 .3 1.1 .5 1.7 .7s1.2 .4 1.7 .5c1.2 .3 2.4 .4 3.6 .4c4.8 0 9.6-2.1 12.8-6.4c8.5-11.4 17.1-22.8 25.6-34.1c6-8.1 15.5-12.8 25.6-12.8l124.6 0L286.8 49c-6.6-10.6-18.3-17-30.8-17s-24.1 6.4-30.8 17L135.7 191.7z","M396.6 224L272 224c-10.1 0-19.6 4.7-25.6 12.8l-25.6 34.1c-6.4 8.5-19.2 8.5-25.6 0l-59.5-79.3L8.6 394.4C3 403.3 0 413.6 0 424.1C0 455 25 480 55.9 480l400.2 0c30.9 0 55.9-25 55.9-55.9c0-10.5-3-20.8-8.6-29.7L396.6 224z"]]},zit={prefix:"fad",iconName:"earth-americas",icon:[512,512,[127758,"earth","earth-america","globe-americas"],"f57d",["M0 256C0 397.4 114.6 512 256 512c125.5 0 229.9-90.3 251.8-209.4c-25.5-8.5-51.1-17-76.6-25.5c-9.6-3.2-17.1-10.7-20.2-20.2c-5.9-17.6-11.8-35.2-17.6-52.9c-5.3-15.8 2.5-33 17.8-39.5c23.4-10 46.8-20.1 70.2-30.1C438 54.3 353.3 0 256 0c-4.9 0-9.7 .1-14.6 .4c9.4 17.4 18.8 34.8 28.1 52.3c6.3 11.6 4.7 26-3.9 36c-5.4 6.3-10.7 12.5-16.1 18.8c-10.2 11.9-10.3 29.3-.3 41.3c4.5 5.4 9 10.8 13.6 16.3c5.4 6.5 5.9 15.8 1.2 22.8c-4.8 7.2-13.8 10.2-21.9 7.5L219 187.7c-7-2.3-14.7-1.8-21.3 1.5c-2 1-4 2-5.9 3c-9 4.5-13.3 15-10.2 24.5c1.6 4.7 4.8 8.7 9.2 11.2c11.5 6.6 23 13.2 34.5 19.7c9.7 5.5 20.6 8.4 31.8 8.4c14.4 0 28.7 0 43.1 0c12.7 0 24.9 5.1 33.9 14.1c1.3 1.3 2.6 2.6 3.9 3.9c9 9 14.1 21.2 14.1 33.9l0 8.3c0 17.2-9.2 33.1-24.2 41.7l-8.1 4.6c-15.1 8.7-26.1 23.1-30.3 40c-.9 3.7-1.9 7.5-2.8 11.2c-4.1 16.3-16.5 29.1-32.7 33.8c-15 4.3-29.9-7-29.9-22.6c0-13 0-26 0-39c0-.9 0-1.5-.1-2c0-.7-.1-1.3-.2-2c-.2-1.3-.5-2.7-.8-3.9c-.7-2.6-1.8-5-3.2-7.2c-2.8-4.5-6.8-8.2-11.7-10.7c-9.8-4.9-16-14.9-16-25.9c0-13.3 0-26.6 0-39.9c0-.1 0-.2 0-.3c0-.3 0-.8 0-1.3c0-.6-.1-1.1-.1-1.6c-.1-1.1-.2-2.2-.4-3.3c-.4-2.2-.9-4.2-1.6-6.3c-1.4-4.1-3.4-7.8-5.9-11.2c-5.1-6.8-12.4-11.9-20.9-14.4l-60.4-17.2c-14.6-4.2-27.2-13.4-35.7-26L23.9 147.8C8.6 180.7 0 217.4 0 256z","M241.4 .4C144.9 5.8 62.7 64.7 23.9 147.8l43.1 64.6c8.4 12.6 21.1 21.9 35.7 26L163 255.7c17.2 4.9 29 20.6 29 38.5l0 39.9c0 11 6.2 21 16 25.9s16 14.9 16 25.9l0 39c0 15.6 14.9 26.9 29.9 22.6c16.1-4.6 28.6-17.5 32.7-33.8l2.8-11.2c4.2-16.9 15.2-31.4 30.3-40l8.1-4.6c15-8.5 24.2-24.5 24.2-41.7l0-8.3c0-12.7-5.1-24.9-14.1-33.9l-3.9-3.9c-9-9-21.2-14.1-33.9-14.1L257 256c-11.1 0-22.1-2.9-31.8-8.4l-34.5-19.7c-4.3-2.5-7.6-6.5-9.2-11.2c-3.2-9.6 1.1-20 10.2-24.5l5.9-3c6.6-3.3 14.3-3.9 21.3-1.5l23.2 7.7c8.2 2.7 17.2-.4 21.9-7.5c4.7-7 4.2-16.3-1.2-22.8l-13.6-16.3c-10-12-9.9-29.5 .3-41.3l16.1-18.8c8.6-10 10.2-24.3 3.9-36L241.4 .4zM481.3 134.3l-70.2 30.1c-15.3 6.6-23 23.7-17.8 39.5l17.6 52.9c3.2 9.6 10.7 17.1 20.2 20.2l76.6 25.5c2.8-15.1 4.2-30.7 4.2-46.6c0-44-11.1-85.5-30.7-121.7z"]]},Bit={prefix:"fad",iconName:"tower-cell",icon:[576,512,[],"e585",["M0 128c0 38.1 7.4 74.6 20.9 108c6.6 16.4 25.3 24.3 41.7 17.7S86.9 228.4 80.3 212C69.8 186.1 64 157.8 64 128s5.8-58.1 16.3-84C86.9 27.6 79 9 62.6 2.3S27.6 3.6 20.9 20C7.4 53.4 0 89.9 0 128zm104 0c0 26.1 5.5 51 15.3 73.6c5.3 12.1 19.5 17.7 31.6 12.4s17.7-19.5 12.4-31.6C156 165.8 152 147.4 152 128s4-37.8 11.3-54.4c5.3-12.1-.2-26.3-12.4-31.6s-26.3 .2-31.6 12.4C109.5 77 104 101.9 104 128zM412.7 73.6C420 90.2 424 108.6 424 128s-4 37.8-11.3 54.4c-5.3 12.1 .2 26.3 12.4 31.6s26.3-.2 31.6-12.4C466.5 179 472 154.1 472 128s-5.5-51-15.3-73.6c-5.3-12.1-19.5-17.7-31.6-12.4s-17.7 19.5-12.4 31.6zm83-29.6C506.2 69.9 512 98.2 512 128s-5.8 58.1-16.3 84c-6.6 16.4 1.3 35 17.7 41.7s35-1.3 41.7-17.7c13.5-33.4 20.9-69.9 20.9-108s-7.4-74.6-20.9-108C548.4 3.6 529.8-4.3 513.4 2.3S489.1 27.6 495.7 44z","M340.1 165.2c7.5-10.5 11.9-23.3 11.9-37.2c0-35.3-28.7-64-64-64s-64 28.7-64 64c0 13.9 4.4 26.7 11.9 37.2L98.9 466.8c-7.3 16.1-.2 35.1 15.9 42.4s35.1 .2 42.4-15.9L177.7 448l220.6 0 20.6 45.2c7.3 16.1 26.3 23.2 42.4 15.9s23.2-26.3 15.9-42.4L340.1 165.2zM369.2 384l-162.4 0 14.5-32 133.3 0 14.5 32zM288 205.3L325.6 288l-75.2 0L288 205.3z"]]},$it={prefix:"fad",iconName:"paper-plane",icon:[512,512,[61913],"f1d8",["M0 288c0 .7 0 1.3 .1 2c.8 12.2 8.4 22.9 19.6 27.6l112 46.7L160 376l0-8c0-4.2 1.7-8.3 4.7-11.3l13-13c59.6-59.6 119.2-119.2 178.8-178.7c.1-.1 .2-.2 .2-.3c3-3 6.8-4.5 10.7-4.7s7.9 1.1 11 3.9c3.7 3.3 5.6 7.7 5.6 12.1c0 3.4-1.1 6.8-3.3 9.7L224 389.4l0 13.2c20 8.3 40 16.7 60 25c39.9 16.6 79.8 33.2 119.7 49.9c9.1 3.8 19.4 3.2 28-1.6s14.5-13.3 16-23l64-416c1.9-12.1-3.4-24.3-13.5-31.2C492.7 1.9 486.4 0 480 0c-5.5 0-10.9 1.4-15.9 4.2l-448 256C6.1 265.9 0 276.6 0 288z","M380.7 185.8c5.1-6.7 4.2-16.2-2.1-21.8s-15.9-5.3-21.9 .7l-179 179-13 13c-3 3-4.7 7.1-4.7 11.3l0 8 0 56 0 48c0 13.2 8.1 25 20.3 29.8s26.2 1.6 35.2-8.1L284 427.7l-60-25 0-13.2L380.7 185.8z"]]};/*!
 * Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license (Commercial License)
 * Copyright 2024 Fonticons, Inc.
 */const Vit={prefix:"fal",iconName:"users",icon:[640,512,[],"f0c0","M96 80a48 48 0 1 1 96 0A48 48 0 1 1 96 80zm128 0A80 80 0 1 0 64 80a80 80 0 1 0 160 0zm96 80a64 64 0 1 1 0 128 64 64 0 1 1 0-128zm0 160a96 96 0 1 0 0-192 96 96 0 1 0 0 192zm-58.7 64l117.3 0c54.2 0 98.4 42.5 101.2 96l-319.7 0c2.8-53.5 47-96 101.2-96zm0-32C187.7 352 128 411.7 128 485.3c0 14.7 11.9 26.7 26.7 26.7l330.7 0c14.7 0 26.7-11.9 26.7-26.7C512 411.7 452.3 352 378.7 352l-117.3 0zM512 32a48 48 0 1 1 0 96 48 48 0 1 1 0-96zm0 128A80 80 0 1 0 512 0a80 80 0 1 0 0 160zm16 64c44.2 0 80 35.8 80 80c0 8.8 7.2 16 16 16s16-7.2 16-16c0-61.9-50.1-112-112-112l-84 0c2.6 10.2 4 21 4 32l80 0zm-336 0c0-11 1.4-21.8 4-32l-84 0C50.1 192 0 242.1 0 304c0 8.8 7.2 16 16 16s16-7.2 16-16c0-44.2 35.8-80 80-80l80 0z"]},jit={prefix:"fal",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM363.3 203.3c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L224 297.4l-52.7-52.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6l64 64c6.2 6.2 16.4 6.2 22.6 0l128-128z"]},Uit=jit,Hit={prefix:"fal",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM180.7 180.7c-6.2 6.2-6.2 16.4 0 22.6L233.4 256l-52.7 52.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L256 278.6l52.7 52.7c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L278.6 256l52.7-52.7c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L256 233.4l-52.7-52.7c-6.2-6.2-16.4-6.2-22.6 0z"]},Wit=Hit;/*!
 * Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license (Commercial License)
 * Copyright 2024 Fonticons, Inc.
 */const Git={prefix:"far",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 88C0 74.7 10.7 64 24 64l400 0c13.3 0 24 10.7 24 24s-10.7 24-24 24L24 112C10.7 112 0 101.3 0 88zM0 248c0-13.3 10.7-24 24-24l400 0c13.3 0 24 10.7 24 24s-10.7 24-24 24L24 272c-13.3 0-24-10.7-24-24zM448 408c0 13.3-10.7 24-24 24L24 432c-13.3 0-24-10.7-24-24s10.7-24 24-24l400 0c13.3 0 24 10.7 24 24z"]},Yit={prefix:"far",iconName:"circle-chevron-down",icon:[512,512,["chevron-circle-down"],"f13a","M256 464a208 208 0 1 1 0-416 208 208 0 1 1 0 416zM256 0a256 256 0 1 0 0 512A256 256 0 1 0 256 0zM135 241L239 345c9.4 9.4 24.6 9.4 33.9 0L377 241c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-87 87-87-87c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9z"]},qit=Yit,Xit={prefix:"far",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152L0 424c0 48.6 39.4 88 88 88l272 0c48.6 0 88-39.4 88-88l0-112c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 112c0 22.1-17.9 40-40 40L88 464c-22.1 0-40-17.9-40-40l0-272c0-22.1 17.9-40 40-40l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 64z"]},Zit=Xit,Kit={prefix:"far",iconName:"lightbulb-on",icon:[640,512,[],"f672","M69.3 4C58.3-3.3 43.4-.3 36 10.7s-4.4 25.9 6.7 33.3l48 32c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L69.3 4zM597.3 44c11-7.4 14-22.3 6.7-33.3s-22.3-14-33.3-6.7l-48 32c-11 7.4-14 22.3-6.7 33.3s22.3 14 33.3 6.7l48-32zM24 160c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0zm528 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0zM117.3 332c11-7.4 14-22.3 6.7-33.3s-22.3-14-33.3-6.7l-48 32c-11 7.4-14 22.3-6.7 33.3s22.3 14 33.3 6.7l48-32zm432-39.9c-11-7.4-25.9-4.4-33.3 6.7s-4.4 25.9 6.7 33.3l48 32c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3l-48-32zM448 176c0 27.2-8.4 52.3-22.8 72.9c-3.7 5.3-8 11.3-12.7 17.7c0 0 0 0 0 0s0 0 0 0s0 0 0 0s0 0 0 0c-12.9 17.7-28.3 38.9-39.8 59.8c-10.4 19-15.7 38.8-18.3 57.5l48.6 0c2.2-12 5.9-23.7 11.8-34.5c9.9-18 22.2-34.9 34.5-51.8c0 0 0 0 0 0s0 0 0 0s0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C496 78.8 417.2 0 320 0S144 78.8 144 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0s0 0 0 0c12.3 16.8 24.6 33.7 34.5 51.8c5.9 10.8 9.6 22.5 11.8 34.5l48.6 0c-2.6-18.7-7.9-38.6-18.3-57.5c-11.5-20.9-26.9-42.1-39.8-59.8c0 0 0 0 0 0s0 0 0 0c-4.7-6.4-9-12.4-12.8-17.7C200.4 228.3 192 203.2 192 176c0-70.7 57.3-128 128-128s128 57.3 128 128zm-176 0c0-26.5 21.5-48 48-48c8.8 0 16-7.2 16-16s-7.2-16-16-16c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16s16-7.2 16-16zM400 432l0-16-160 0 0 16c0 44.2 35.8 80 80 80s80-35.8 80-80z"]},Jit={prefix:"far",iconName:"sparkles",icon:[512,512,[10024],"f890","M327.5 85.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 128l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 128l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 64 426.8 7.5C425.1 3 420.8 0 416 0s-9.1 3-10.8 7.5L384 64 327.5 85.2zM9.3 240C3.6 242.6 0 248.3 0 254.6s3.6 11.9 9.3 14.5L26.3 277l8.1 3.7 .6 .3 88.3 40.8L164.1 410l.3 .6 3.7 8.1 7.9 17.1c2.6 5.7 8.3 9.3 14.5 9.3s11.9-3.6 14.5-9.3l7.9-17.1 3.7-8.1 .3-.6 40.8-88.3L346 281l.6-.3 8.1-3.7 17.1-7.9c5.7-2.6 9.3-8.3 9.3-14.5s-3.6-11.9-9.3-14.5l-17.1-7.9-8.1-3.7-.6-.3-88.3-40.8L217 99.1l-.3-.6L213 90.3l-7.9-17.1c-2.6-5.7-8.3-9.3-14.5-9.3s-11.9 3.6-14.5 9.3l-7.9 17.1-3.7 8.1-.3 .6-40.8 88.3L35.1 228.1l-.6 .3-8.1 3.7L9.3 240zm83 14.5l51.2-23.6c10.4-4.8 18.7-13.1 23.5-23.5l23.6-51.2 23.6 51.2c4.8 10.4 13.1 18.7 23.5 23.5l51.2 23.6-51.2 23.6c-10.4 4.8-18.7 13.1-23.5 23.5l-23.6 51.2-23.6-51.2c-4.8-10.4-13.1-18.7-23.5-23.5L92.3 254.6zM384 384l-56.5 21.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 448l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 448l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 384l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L384 384z"]},Qit={prefix:"far",iconName:"star",icon:[576,512,[11088,61446],"f005","M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z"]},est={prefix:"far",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-111 111-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L369 209z"]},tst=est,nst={prefix:"far",iconName:"tag",icon:[448,512,[127991],"f02b","M197.5 32c17 0 33.3 6.7 45.3 18.7l176 176c25 25 25 65.5 0 90.5L285.3 450.7c-25 25-65.5 25-90.5 0l-176-176C6.7 262.7 0 246.5 0 229.5L0 80C0 53.5 21.5 32 48 32l149.5 0zM48 229.5c0 4.2 1.7 8.3 4.7 11.3l176 176c6.2 6.2 16.4 6.2 22.6 0L384.8 283.3c6.2-6.2 6.2-16.4 0-22.6l-176-176c-3-3-7.1-4.7-11.3-4.7L48 80l0 149.5zM112 112a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},rst={prefix:"far",iconName:"mountain",icon:[512,512,[127956],"f6fc","M464 424.1c0 4.4-3.5 7.9-7.9 7.9L55.9 432c-4.4 0-7.9-3.5-7.9-7.9c0-1.5 .4-2.9 1.2-4.2L149.6 260l39.5 50.8c4.6 5.9 11.7 9.3 19.2 9.3s14.5-3.6 19-9.6L268 256l92 0L462.8 419.9c.8 1.3 1.2 2.7 1.2 4.2zM329.8 208L256 208c-7.6 0-14.7 3.6-19.2 9.6l-29.1 38.9-30.9-39.8L256 90.3 329.8 208zM55.9 480l400.2 0c30.9 0 55.9-25 55.9-55.9c0-10.5-3-20.8-8.6-29.7L286.8 49c-6.6-10.6-18.3-17-30.8-17s-24.1 6.4-30.8 17L8.6 394.4C3 403.3 0 413.6 0 424.1C0 455 25 480 55.9 480z"]},ist={prefix:"far",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336c-13.3 0-24 10.7-24 24s10.7 24 24 24l80 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-8 0 0-88c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l24 0 0 64-24 0zm40-144a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},sst=ist,ost={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},ast={prefix:"far",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 25.4c0 45.4-15.5 89.5-43.8 124.9L5.3 377c-5.8 7.2-6.9 17.1-2.9 25.4S14.8 416 24 416l400 0c9.2 0 17.6-5.3 21.6-13.6s2.9-18.2-2.9-25.4l-14.9-18.6C399.5 322.9 384 278.8 384 233.4l0-25.4c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm0 96c61.9 0 112 50.1 112 112l0 25.4c0 47.9 13.9 94.6 39.7 134.6L72.3 368C98.1 328 112 281.3 112 233.4l0-25.4c0-61.9 50.1-112 112-112zm64 352l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7s18.7-28.3 18.7-45.3z"]},lst={prefix:"far",iconName:"location-dot",icon:[384,512,["map-marker-alt"],"f3c5","M336 192c0-79.5-64.5-144-144-144S48 112.5 48 192c0 12.4 4.5 31.6 15.3 57.2c10.5 24.8 25.4 52.2 42.5 79.9c28.5 46.2 61.5 90.8 86.2 122.6c24.8-31.8 57.8-76.4 86.2-122.6c17.1-27.7 32-55.1 42.5-79.9C331.5 223.6 336 204.4 336 192zm48 0c0 87.4-117 243-168.3 307.2c-12.3 15.3-35.1 15.3-47.4 0C117 435 0 279.4 0 192C0 86 86 0 192 0S384 86 384 192zm-160 0a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm-112 0a80 80 0 1 1 160 0 80 80 0 1 1 -160 0z"]},cst={prefix:"far",iconName:"link",icon:[640,512,[128279,"chain"],"f0c1","M580.3 267.2c56.2-56.2 56.2-147.3 0-203.5C526.8 10.2 440.9 7.3 383.9 57.2l-6.1 5.4c-10 8.7-11 23.9-2.3 33.9s23.9 11 33.9 2.3l6.1-5.4c38-33.2 95.2-31.3 130.9 4.4c37.4 37.4 37.4 98.1 0 135.6L433.1 346.6c-37.4 37.4-98.2 37.4-135.6 0c-35.7-35.7-37.6-92.9-4.4-130.9l4.7-5.4c8.7-10 7.7-25.1-2.3-33.9s-25.1-7.7-33.9 2.3l-4.7 5.4c-49.8 57-46.9 142.9 6.6 196.4c56.2 56.2 147.3 56.2 203.5 0L580.3 267.2zM59.7 244.8C3.5 301 3.5 392.1 59.7 448.2c53.6 53.6 139.5 56.4 196.5 6.5l6.1-5.4c10-8.7 11-23.9 2.3-33.9s-23.9-11-33.9-2.3l-6.1 5.4c-38 33.2-95.2 31.3-130.9-4.4c-37.4-37.4-37.4-98.1 0-135.6L207 165.4c37.4-37.4 98.1-37.4 135.6 0c35.7 35.7 37.6 92.9 4.4 130.9l-5.4 6.1c-8.7 10-7.7 25.1 2.3 33.9s25.1 7.7 33.9-2.3l5.4-6.1c49.9-57 47-142.9-6.5-196.5c-56.2-56.2-147.3-56.2-203.5 0L59.7 244.8z"]},ust={prefix:"far",iconName:"map",icon:[576,512,[128506,62072],"f279","M565.6 36.2C572.1 40.7 576 48.1 576 56l0 336c0 10-6.2 18.9-15.5 22.4l-168 64c-5.2 2-10.9 2.1-16.1 .3L192.5 417.5l-160 61c-7.4 2.8-15.7 1.8-22.2-2.7S0 463.9 0 456L0 120c0-10 6.1-18.9 15.5-22.4l168-64c5.2-2 10.9-2.1 16.1-.3L383.5 94.5l160-61c7.4-2.8 15.7-1.8 22.2 2.7zM48 136.5l0 284.6 120-45.7 0-284.6L48 136.5zM360 422.7l0-285.4-144-48 0 285.4 144 48zm48-1.5l120-45.7 0-284.6L408 136.5l0 284.6z"]},dst={prefix:"far",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c-9.4 9.4-9.4 24.6 0 33.9l47 47-47 47c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l47-47 47 47c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-47-47 47-47c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-47 47-47-47c-9.4-9.4-24.6-9.4-33.9 0z"]},hst=dst,fst={prefix:"far",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M208 48a160 160 0 1 1 0 320 160 160 0 1 1 0-320zm0 368c48.8 0 93.7-16.8 129.1-44.9L471 505c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L371.1 337.1C399.2 301.7 416 256.8 416 208C416 93.1 322.9 0 208 0S0 93.1 0 208S93.1 416 208 416zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"]},pst={prefix:"far",iconName:"magnifying-glass-minus",icon:[512,512,["search-minus"],"f010","M208 48a160 160 0 1 1 0 320 160 160 0 1 1 0-320zm0 368c48.8 0 93.7-16.8 129.1-44.9L471 505c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L371.1 337.1C399.2 301.7 416 256.8 416 208C416 93.1 322.9 0 208 0S0 93.1 0 208S93.1 416 208 416zM136 184c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"]},mst={prefix:"far",iconName:"video",icon:[576,512,["video-camera"],"f03d","M64 112c-8.8 0-16 7.2-16 16l0 256c0 8.8 7.2 16 16 16l256 0c8.8 0 16-7.2 16-16l0-256c0-8.8-7.2-16-16-16L64 112zM0 128C0 92.7 28.7 64 64 64l256 0c35.3 0 64 28.7 64 64l0 33 0 190 0 33c0 35.3-28.7 64-64 64L64 448c-35.3 0-64-28.7-64-64L0 128zM528 363.4l0-214.7L416 199l0-52.6L520.3 99.5c5.1-2.3 10.6-3.5 16.2-3.5c21.8 0 39.5 17.7 39.5 39.5l0 241c0 21.8-17.7 39.5-39.5 39.5c-5.6 0-11.1-1.2-16.2-3.5L416 365.6l0-52.6 112 50.4z"]};/*!
 * Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license (Commercial License)
 * Copyright 2024 Fonticons, Inc.
 */const gst={prefix:"fas",iconName:"circle-minus",icon:[512,512,["minus-circle"],"f056","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM184 232l144 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-144 0c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},_st=gst,yst={prefix:"fas",iconName:"pencil",icon:[512,512,[9999,61504,"pencil-alt"],"f303","M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"]},vst=yst,bst={prefix:"fas",iconName:"compass",icon:[512,512,[129517],"f14e","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm50.7-186.9L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},xst={prefix:"fas",iconName:"circle-exclamation",icon:[512,512,["exclamation-circle"],"f06a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},wst=xst,Sst={prefix:"fas",iconName:"arrow-right-from-bracket",icon:[512,512,["sign-out"],"f08b","M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"]},Est={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"]},Tst={prefix:"fas",iconName:"lock",icon:[448,512,[128274],"f023","M144 144l0 48 160 0 0-48c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192l0-48C80 64.5 144.5 0 224 0s144 64.5 144 144l0 48 16 0c35.3 0 64 28.7 64 64l0 192c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 256c0-35.3 28.7-64 64-64l16 0z"]},Mst={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"]},Ast={prefix:"fas",iconName:"chevron-up",icon:[512,512,[],"f077","M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},Cst={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},Ist={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},Pst={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},Ost=Pst,Dst={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},Rst={prefix:"fas",iconName:"snowflake",icon:[448,512,[10052,10054],"f2dc","M224 0c17.7 0 32 14.3 32 32l0 30.1 15-15c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-49 49 0 70.3 61.4-35.8 17.7-66.1c3.4-12.8 16.6-20.4 29.4-17s20.4 16.6 17 29.4l-5.2 19.3 23.6-13.8c15.3-8.9 34.9-3.7 43.8 11.5s3.8 34.9-11.5 43.8l-25.3 14.8 21.7 5.8c12.8 3.4 20.4 16.6 17 29.4s-16.6 20.4-29.4 17l-67.7-18.1L287.5 256l60.9 35.5 67.7-18.1c12.8-3.4 26 4.2 29.4 17s-4.2 26-17 29.4l-21.7 5.8 25.3 14.8c15.3 8.9 20.4 28.5 11.5 43.8s-28.5 20.4-43.8 11.5l-23.6-13.8 5.2 19.3c3.4 12.8-4.2 26-17 29.4s-26-4.2-29.4-17l-17.7-66.1L256 311.7l0 70.3 49 49c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-15-15 0 30.1c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-30.1-15 15c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l49-49 0-70.3-61.4 35.8-17.7 66.1c-3.4 12.8-16.6 20.4-29.4 17s-20.4-16.6-17-29.4l5.2-19.3L48.1 395.6c-15.3 8.9-34.9 3.7-43.8-11.5s-3.7-34.9 11.5-43.8l25.3-14.8-21.7-5.8c-12.8-3.4-20.4-16.6-17-29.4s16.6-20.4 29.4-17l67.7 18.1L160.5 256 99.6 220.5 31.9 238.6c-12.8 3.4-26-4.2-29.4-17s4.2-26 17-29.4l21.7-5.8L15.9 171.6C.6 162.7-4.5 143.1 4.4 127.9s28.5-20.4 43.8-11.5l23.6 13.8-5.2-19.3c-3.4-12.8 4.2-26 17-29.4s26 4.2 29.4 17l17.7 66.1L192 200.3l0-70.3L143 81c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l15 15L192 32c0-17.7 14.3-32 32-32z"]},kst={prefix:"fas",iconName:"newspaper",icon:[512,512,[128240],"f1ea","M96 96c0-35.3 28.7-64 64-64l288 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L80 480c-44.2 0-80-35.8-80-80L0 128c0-17.7 14.3-32 32-32s32 14.3 32 32l0 272c0 8.8 7.2 16 16 16s16-7.2 16-16L96 96zm64 24l0 80c0 13.3 10.7 24 24 24l112 0c13.3 0 24-10.7 24-24l0-80c0-13.3-10.7-24-24-24L184 96c-13.3 0-24 10.7-24 24zm208-8c0 8.8 7.2 16 16 16l48 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-48 0c-8.8 0-16 7.2-16 16zm0 96c0 8.8 7.2 16 16 16l48 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-48 0c-8.8 0-16 7.2-16 16zM160 304c0 8.8 7.2 16 16 16l256 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-256 0c-8.8 0-16 7.2-16 16zm0 96c0 8.8 7.2 16 16 16l256 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-256 0c-8.8 0-16 7.2-16 16z"]},Lst={prefix:"fas",iconName:"question",icon:[320,512,[10067,10068,61736],"3f","M80 160c0-35.3 28.7-64 64-64l32 0c35.3 0 64 28.7 64 64l0 3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74l0 1.4c0 17.7 14.3 32 32 32s32-14.3 32-32l0-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7l0-3.6c0-70.7-57.3-128-128-128l-32 0C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},Nst={prefix:"fas",iconName:"arrow-up-right-from-square",icon:[512,512,["external-link"],"f08e","M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z"]},Fst={prefix:"fas",iconName:"circle-right",icon:[512,512,[61838,"arrow-alt-circle-right"],"f35a","M0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zm395.3 11.3l-112 112c-4.6 4.6-11.5 5.9-17.4 3.5s-9.9-8.3-9.9-14.8l0-64-96 0c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32l96 0 0-64c0-6.5 3.9-12.3 9.9-14.8s12.9-1.1 17.4 3.5l112 112c6.2 6.2 6.2 16.4 0 22.6z"]},zst=Fst,Bst={prefix:"fas",iconName:"lock-keyhole",icon:[448,512,["lock-alt"],"f30d","M224 64c44.2 0 80 35.8 80 80l0 48-160 0 0-48c0-44.2 35.8-80 80-80zM80 144l0 48-16 0c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-192c0-35.3-28.7-64-64-64l-16 0 0-48C368 64.5 303.5 0 224 0S80 64.5 80 144zM256 320l0 64c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32s32 14.3 32 32z"]},$st={prefix:"fas",iconName:"mobile-screen-button",icon:[384,512,["mobile-alt"],"f3cd","M16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM224 448a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM304 64L80 64l0 320 224 0 0-320z"]},Vst=$st,jst={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},Ust={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},Hst=Ust,Wst={prefix:"fas",iconName:"circle-left",icon:[512,512,[61840,"arrow-alt-circle-left"],"f359","M512 256A256 256 0 1 0 0 256a256 256 0 1 0 512 0zM116.7 244.7l112-112c4.6-4.6 11.5-5.9 17.4-3.5s9.9 8.3 9.9 14.8l0 64 96 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32l-96 0 0 64c0 6.5-3.9 12.3-9.9 14.8s-12.9 1.1-17.4-3.5l-112-112c-6.2-6.2-6.2-16.4 0-22.6z"]},Gst=Wst,Yst={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},qst=Yst,Xst={prefix:"fas",iconName:"arrows-maximize",icon:[512,512,["expand-arrows"],"f31d","M320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l50.7 0L256 210.7 141.3 96 192 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L64 32C46.3 32 32 46.3 32 64l0 128c0 17.7 14.3 32 32 32s32-14.3 32-32l0-50.7L210.7 256 96 370.7 96 320c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 128c0 17.7 14.3 32 32 32l128 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-50.7 0L256 301.3 370.7 416 320 416c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 50.7L301.3 256 416 141.3l0 50.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-128c0-17.7-14.3-32-32-32L320 32z"]},Zst=Xst,Kst={prefix:"fas",iconName:"credit-card",icon:[576,512,[128179,62083,"credit-card-alt"],"f09d","M64 32C28.7 32 0 60.7 0 96l0 32 576 0 0-32c0-35.3-28.7-64-64-64L64 32zM576 224L0 224 0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-192zM112 352l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm112 16c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16z"]},Jst={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},Qst={prefix:"fas",iconName:"earth-americas",icon:[512,512,[127758,"earth","earth-america","globe-americas"],"f57d","M57.7 193l9.4 16.4c8.3 14.5 21.9 25.2 38 29.8L163 255.7c17.2 4.9 29 20.6 29 38.5l0 39.9c0 11 6.2 21 16 25.9s16 14.9 16 25.9l0 39c0 15.6 14.9 26.9 29.9 22.6c16.1-4.6 28.6-17.5 32.7-33.8l2.8-11.2c4.2-16.9 15.2-31.4 30.3-40l8.1-4.6c15-8.5 24.2-24.5 24.2-41.7l0-8.3c0-12.7-5.1-24.9-14.1-33.9l-3.9-3.9c-9-9-21.2-14.1-33.9-14.1L257 256c-11.1 0-22.1-2.9-31.8-8.4l-34.5-19.7c-4.3-2.5-7.6-6.5-9.2-11.2c-3.2-9.6 1.1-20 10.2-24.5l5.9-3c6.6-3.3 14.3-3.9 21.3-1.5l23.2 7.7c8.2 2.7 17.2-.4 21.9-7.5c4.7-7 4.2-16.3-1.2-22.8l-13.6-16.3c-10-12-9.9-29.5 .3-41.3l15.7-18.3c8.8-10.3 10.2-25 3.5-36.7l-2.4-4.2c-3.5-.2-6.9-.3-10.4-.3C163.1 48 84.4 108.9 57.7 193zM464 256c0-36.8-9.6-71.4-26.4-101.5L412 164.8c-15.7 6.3-23.8 23.8-18.5 39.8l16.9 50.7c3.5 10.4 12 18.3 22.6 20.9l29.1 7.3c1.2-9 1.8-18.2 1.8-27.5zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"]},eot=Qst,tot={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},not={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},rot=not,iot={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},sot={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},oot={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},aot={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},lot=aot,cot={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},uot=cot,dot={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"]},hot=dot,fot={prefix:"fas",iconName:"video",icon:[576,512,["video-camera"],"f03d","M0 128C0 92.7 28.7 64 64 64l256 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 448c-35.3 0-64-28.7-64-64L0 128zM559.1 99.8c10.4 5.6 16.9 16.4 16.9 28.2l0 256c0 11.8-6.5 22.6-16.9 28.2s-23 5-32.9-1.6l-96-64L416 337.1l0-17.1 0-128 0-17.1 14.2-9.5 96-64c9.8-6.5 22.4-7.2 32.9-1.6z"]},pot=()=>{_it.autoAddCss=!1,yit.add(Gst,zst,Sst,Nst,Git,ast,kit,Dit,Ost,qit,sot,oot,Ast,ost,qst,bst,Kst,zit,Zit,wst,lot,Zst,jst,Mst,eot,Nit,sst,Kit,cst,Est,lst,Tst,Bst,pst,fst,ust,Lit,_st,Vst,rst,kst,$it,Dst,vst,tot,iot,Lst,rot,hot,Rst,Jit,Ist,nst,uot,Bit,Cst,Vit,mst,Fit,Rit,Uit,tst,Wit,hst,Qit,Jst,Hst,fot)},mot=xs(e=>{pot(),e.vueApp.component("font-awesome-icon",Oit,{})});var FC={exports:{}},got=FC.exports,$X;function _ot(){return $X||($X=1,(function(e,t){(function(r,s){e.exports=s(Ale())})(got,n=>(()=>{var r={113:((ve,se)=>{Object.defineProperty(se,"__esModule",{value:!0}),se.default=(ie,pe)=>{const be=ie.__vccOpts||ie;for(const[Se,Ce]of pe)be[Se]=Ce;return be}}),594:(ve=>{ve.exports=n})},s={};function o(ve){var se=s[ve];if(se!==void 0)return se.exports;var ie=s[ve]={exports:{}};return r[ve](ie,ie.exports,o),ie.exports}o.d=(ve,se)=>{for(var ie in se)o.o(se,ie)&&!o.o(ve,ie)&&Object.defineProperty(ve,ie,{enumerable:!0,get:se[ie]})},o.o=(ve,se)=>Object.prototype.hasOwnProperty.call(ve,se),o.r=ve=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ve,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ve,"__esModule",{value:!0})};var c={};o.r(c),o.d(c,{ToastComponent:()=>J,ToastPlugin:()=>le,ToastPositions:()=>C,default:()=>oe,useToast:()=>ee});var i=o(594);const f=["innerHTML"];function g(ve,se,ie,pe,be,Se){return(0,i.openBlock)(),(0,i.createBlock)(i.Transition,{"enter-active-class":ve.transition.enter,"leave-active-class":ve.transition.leave},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)("div",{ref:"root",role:"alert",class:(0,i.normalizeClass)(["v-toast__item",[`v-toast__item--${ve.type}`,`v-toast__item--${ve.position}`]]),onMouseover:se[0]||(se[0]=Ce=>ve.toggleTimer(!0)),onMouseleave:se[1]||(se[1]=Ce=>ve.toggleTimer(!1)),onClick:se[2]||(se[2]=function(){return ve.whenClicked&&ve.whenClicked(...arguments)})},[se[3]||(se[3]=(0,i.createElementVNode)("div",{class:"v-toast__icon"},null,-1)),(0,i.createElementVNode)("p",{class:"v-toast__text",innerHTML:ve.message},null,8,f)],34),[[i.vShow,ve.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function x(ve){typeof ve.remove<"u"?ve.remove():ve.parentNode?.removeChild(ve)}function w(ve,se,ie){let pe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const be=(0,i.h)(ve,se,pe),Se=document.createElement("div");return Se.classList.add("v-toast--pending"),ie.appendChild(Se),(0,i.render)(be,Se),be.component}class A{constructor(se,ie){this.startedAt=Date.now(),this.callback=se,this.delay=ie,this.timer=setTimeout(se,ie)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const C=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function F(ve){return{all:ve=ve||new Map,on:function(se,ie){var pe=ve.get(se);pe?pe.push(ie):ve.set(se,[ie])},off:function(se,ie){var pe=ve.get(se);pe&&(ie?pe.splice(pe.indexOf(ie)>>>0,1):ve.set(se,[]))},emit:function(se,ie){var pe=ve.get(se);pe&&pe.slice().map(function(be){be(ie)}),(pe=ve.get("*"))&&pe.slice().map(function(be){be(se,ie)})}}}const j=F(),V=(0,i.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:C.BOTTOM_RIGHT,validator(ve){return Object.values(C).includes(ve)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),j.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const ve=document.body;ve.appendChild(this.parentTop),ve.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const ve=this.$refs.root;(0,i.render)(null,ve),x(ve)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const ve=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),x(ve),this.isActive=!0,this.duration&&(this.timer=new A(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(ve){!this.pauseOnHover||!this.timer||(ve?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case C.TOP:case C.TOP_RIGHT:case C.TOP_LEFT:return this.parentTop;case C.BOTTOM:case C.BOTTOM_RIGHT:case C.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case C.TOP:case C.TOP_RIGHT:case C.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case C.BOTTOM:case C.BOTTOM_RIGHT:case C.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){j.off("toast-clear",this.dismiss)}});var Y=o(113);const J=(0,Y.default)(V,[["render",g]]),ee=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(se){let ie=null;typeof se=="string"&&(ie=se);const be=Object.assign({},{message:ie},ve,se);return{dismiss:w(J,be,document.body).ctx.dismiss}},clear(){j.emit("toast-clear")},success(se){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:se,type:"success"},ie))},error(se){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:se,type:"error"},ie))},info(se){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:se,type:"info"},ie))},warning(se){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:se,type:"warning"},ie))},default(se){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:se,type:"default"},ie))}}},le={install:function(ve){let se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie=ee(se);ve.config.globalProperties.$toast=ie,ve.provide("$toast",ie)}},oe=le;return c})())})(FC)),FC.exports}var yot=_ot();const vot=xs(()=>({provide:{toast:yot.useToast({dismissible:!0,position:"top-right"})}})),bot=[jye,Yye,gxe,_xe,yxe,vxe,bxe,Sxe,Exe,Txe,Twe,Gwe,DRe,RRe,YRe,ZRe,oze,uze,Tze,Mze,Aze,Oze,wJe,PQe,gnt,mot,vot],xot="LoadingIndicator__container",wot="LoadingIndicator__spinner",Sot="LoadingIndicator__rotate",Eot="LoadingIndicator__path",Tot="LoadingIndicator__dash",Mot={container:xot,spinner:wot,rotate:Sot,path:Eot,dash:Tot},Aot={name:"LoadingIndicator"};function Cot(e,t,n,r,s,o){return ln(),Nn("div",{class:Jn(e.$style.container)},[(ln(),Nn("svg",{class:Jn(e.$style.spinner),viewBox:"0 0 50 50"},[qn("circle",{class:Jn(e.$style.path),cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"3"},null,2)],2))],2)}const Iot={$style:Mot},Pot=Object.assign(Qo(Aot,[["render",Cot],["__cssModules",Iot],["__file","LoadingIndicator.vue"]]),{__name:"LoadingIndicator"}),Oot="Loading__fadeEnterTransition",Dot="Loading__fadeLeaveTransition",Rot="Loading__fadeOut",kot="Loading__container",Lot={fadeEnterTransition:Oot,fadeLeaveTransition:Dot,fadeOut:Rot,container:kot},Not={__name:"Loading",props:{useOpaqueBackground:{type:Boolean,default:!1}},setup(e,{expose:t}){t();const n=th(),r=yr(!1);let s,o;const c=()=>{r.value=!0,s=Date.now()};n.loading&&c();const i=()=>{window.clearTimeout(o),o=window.setTimeout(c,200)},f=()=>{if(window.clearTimeout(o),o=null,!s)return;const x=625,w=Date.now()-s;w>=x?(r.value=!1,s=null):window.setTimeout(()=>f(),x-w)};Hr(()=>n.loading,()=>{n.loading?i():f()});const g={uiStore:n,showLoading:r,get startTime(){return s},set startTime(x){s=x},get timeoutId(){return o},set timeoutId(x){o=x},startLoading:c,start:i,finish:f,get useUiStore(){return th}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}};function Fot(e,t,n,r,s,o){const c=Pot;return ln(),Zr(vy,{"enter-active-class":e.$style.fadeEnterTransition,"enter-from-class":e.$style.fadeOut,"leave-active-class":e.$style.fadeLeaveTransition,"leave-to-class":e.$style.fadeOut},{default:Dr(()=>[r.showLoading?(ln(),Nn("div",{key:0,class:Jn([e.$style.container,n.useOpaqueBackground?"view-background-color":"loading-background-color"])},[Un(c)],2)):fi("",!0)]),_:1},8,["enter-active-class","enter-from-class","leave-active-class","leave-to-class"])}const zot={$style:Lot},Bot=Qo(Not,[["render",Fot],["__cssModules",zot],["__file","Loading.vue"]]),xce=(e="RouteProvider")=>ki({name:e,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(t){const n=t.renderKey,r=t.route,s={};for(const o in t.route)Object.defineProperty(s,o,{get:()=>n===t.renderKey?t.route[o]:r[o],enumerable:!0});return Ko(Kd,Yu(s)),()=>t.vnode?Hs(t.vnode,{ref:t.vnodeRef}):t.vnode}}),$ot=xce(),VX=new WeakMap,Vot=ki({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:t,slots:n,expose:r}){const s=Wn(),o=yr(),c=bs(Kd,null);let i;r({pageRef:o});const f=bs(mJ,null);let g;const x=s.deferHydration();if(s.isHydrating){const A=s.hooks.hookOnce("app:error",x);aa().beforeEach(A)}e.pageKey&&Hr(()=>e.pageKey,(A,C)=>{A!==C&&s.callHook("page:loading:start")});let w=!1;{const A=aa().beforeResolve(()=>{w=!1});Mf(()=>{A()})}return()=>Hs(JJ,{name:e.name,route:e.route,...t},{default:A=>{const C=Uot(c,A.route,A.Component),F=c&&c.matched.length===A.route.matched.length;if(!A.Component){if(g&&!F)return g;x();return}if(g&&f&&!f.isCurrent(A.route))return g;if(C&&c&&(!f||f?.isCurrent(c)))return F?g:null;const z=Qk(A,e.pageKey),j=Hot(c,A.route,A.Component);!s.isHydrating&&i===z&&!j&&es(()=>{w=!0,s.callHook("page:loading:end")}),i=z;const V=!!(e.transition??A.route.meta.pageTransition??oj),Y=V&&jot([e.transition,A.route.meta.pageTransition,oj,{onAfterLeave(){delete s._runningTransition,s.callHook("page:transition:finish",A.Component)}}]),te=e.keepalive??A.route.meta.keepalive??N_e;return g=eQ(V&&Y,x0e(te,Hs($3,{suspensible:!0,onPending:()=>{V&&(s._runningTransition=!0),s.callHook("page:start",A.Component)},onResolve:()=>{es(()=>s.callHook("page:finish",A.Component).then(()=>{if(delete s._runningTransition,!w&&!j)return w=!0,s.callHook("page:loading:end")}).finally(x))}},{default:()=>{const J={key:z||void 0,vnode:n.default?Wot(n.default,A):A.Component,route:A.route,renderKey:z||void 0,trackRootNodes:V,vnodeRef:o};if(!te)return Hs($ot,J);const ee=A.Component.type,le=ee;let oe=VX.get(le);return oe||(oe=xce(ee.name||ee.__name),VX.set(le,oe)),Hs(oe,J)}}))).default(),g}})}});function jot(e){const t=[];for(const n of e)n&&t.push({...n,onAfterLeave:n.onAfterLeave?cN(n.onAfterLeave):void 0});return q_e(...t)}function Uot(e,t,n){if(!e)return!1;const r=t.matched.findIndex(s=>s.components?.default===n?.type);return!r||r===-1?!1:t.matched.slice(0,r).some((s,o)=>s.components?.default!==e.matched[o]?.components?.default)||n&&Qk({route:t,Component:n})!==Qk({route:e,Component:n})}function Hot(e,t,n){return e?t.matched.findIndex(s=>s.components?.default===n?.type)<t.matched.length-1:!1}function Wot(e,t){const n=e(t);return n.length===1?Hs(n[0]):Hs(ei,void 0,n)}const Got=ki({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(e,t){return()=>Hs(um[e.name],e.layoutProps,t.slots)}}),Yot={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},qot=ki({name:"NuxtLayout",inheritAttrs:!1,props:Yot,setup(e,t){const n=Wn(),r=bs(Kd),o=!r||r===Tc()?QJ():r,c=Ct(()=>{let x=fn(e.name)??o?.meta.layout??"default";return x&&!(x in um)&&e.fallback&&(x=fn(e.fallback)),x}),i=mo();t.expose({layoutRef:i});const f=n.deferHydration();if(n.isHydrating){const x=n.hooks.hookOnce("app:error",f);aa().beforeEach(x)}let g;return()=>{const x=c.value&&c.value in um,w=o?.meta.layoutTransition??L_e,A=g;return g=c.value,eQ(x&&w,{default:()=>Hs($3,{suspensible:!0,onResolve:()=>{es(f)}},{default:()=>Hs(Xot,{layoutProps:iu(t.attrs,{ref:i}),key:c.value||void 0,name:c.value,shouldProvide:!e.name,isRenderingNewLayout:C=>C!==A&&C===c.value,hasTransition:!!w},t.slots)})}).default()}}}),Xot=ki({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(e,t){const n=e.name;e.shouldProvide&&Ko(mJ,{isCurrent:o=>n===(o.meta.layout??"default")});const r=bs(Kd);if(r&&r===Tc()){const o=QJ(),c={};for(const i in o){const f=i;Object.defineProperty(c,f,{enumerable:!0,get:()=>e.isRenderingNewLayout(e.name)?o[f]:r[f]})}Ko(Kd,Yu(c))}return()=>!n||typeof n=="string"&&!(n in um)?t.slots.default?.():Hs(Got,{key:n,layoutProps:e.layoutProps,name:n},t.slots)}}),Zot={__name:"app",setup(e,{expose:t}){t();const n=Tc(),r=th(),s=yr(!1);n1e(()=>{n.path==="/"&&(s.value=!0,r.setLoading(!0))},{mode:"navigation"},"$JtZLuzHLEP");const o={route:n,uiStore:r,useOpaqueBackground:s,get useUiStore(){return th}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}};function Kot(e,t,n,r,s,o){const c=Bot,i=Vot,f=qot;return ln(),Nn(ei,null,[Un(c,{"use-opaque-background":r.useOpaqueBackground},null,8,["use-opaque-background"]),t[0]||(t[0]=Rr()),Un(f,null,{default:Dr(()=>[Un(i)]),_:1})],64)}const Jot=Qo(Zot,[["render",Kot],["__file","app.vue"]]),v3=()=>{const e=Tc();return{inAppView:Ct(()=>e?.query?.in_app_view==="true")}},Qot=""+new URL("OpenSnowError.CT6G_AY3.jpg",import.meta.url).href,eat={__name:"ErrorPage",props:{error:{type:Object,required:!0}},setup(e,{expose:t}){t();const n=e,r=_s(),s=n.error?.cause?.data,o=Ct(()=>n.error?.statusCode===401&&s?.user_logged_out&&r.user);o.value&&(r.setBanner({banner:{message:s.messages.join(" "),type:pl.error,is_dismissable:!1},saveToSessionStorage:!0}),L_("/user/logout"));const{fullPath:c}=Tc(),i=no().public,f=Ct(()=>c.startsWith("/stories")),g=Ct(()=>n.error&&n.error.statusCode===404),x=Ct(()=>`${g.value?"Page Not Found":"Something Broke"} | ${i.siteName}`),w=Ct(()=>g.value?"Sorry, we couldn't find that page.":"We are having an issue loading this page. Try again later!"),{inAppView:A}=v3(),C=!A.value;f.value||(kye({title:x}),If(n.error));const z={props:n,userStore:r,errorResponse:s,isForcedLogout:o,fullPath:c,config:i,isInStory:f,is404:g,title:x,details:w,inAppView:A,showButton:C,handleGoBack:()=>{_J(),window.history?.state?.back?window.location.href=window.history.state.back:window.history.go(-1)},get Sentry(){return ORe},ButtonTypes:Tr,bannerTypes:pl,get useInAppView(){return v3},get useUserStore(){return _s}};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}},tat={key:0,class:Jn(["tw-flex tw-flex-col","tw-my-6 tw-mx-auto","tw-max-w-4xl"])},nat={class:Jn(["tw-relative","tw-h-48 md:tw-h-64 lg:tw-h-80","tw-aspect-4/3","tw-rounded-md tw-overflow-hidden"])},rat={class:Jn(["tw-absolute tw-bottom-0","tw-flex tw-items-center tw-justify-center","tw-w-full tw-h-1/5 tw-px-2 lg:tw-px-4","tw-text-white background-color-saturated-blue"])},iat={class:"tw-text-sm lg:tw-text-base tw-text-center tw-font-medium"};function sat(e,t,n,r,s,o){const c=RS;return r.isForcedLogout?fi("",!0):(ln(),Nn("div",tat,[t[3]||(t[3]=qn("h3",{class:"page-title heading-color tw-mb-4 tw-text-center"},`
      Yard Sale!
    `,-1)),t[4]||(t[4]=Rr()),qn("div",nat,[t[0]||(t[0]=qn("img",{alt:"Yard sale on the slopes",class:"tw-w-full tw-h-full tw-object-cover tw-cursor-pointer",loading:"lazy",src:Qot},null,-1)),t[1]||(t[1]=Rr()),qn("div",rat,[qn("span",iat,is(r.details),1)])]),t[5]||(t[5]=Rr()),r.showButton?(ln(),Zr(c,{key:0,"additional-class-names":"tw-w-full",class:"tw-mt-4 tw-text-lg","display-block":!0,type:r.ButtonTypes.secondaryCard,onClick:r.handleGoBack},{default:Dr(()=>[...t[2]||(t[2]=[Rr(`
      Go Back
    `,-1)])]),_:1},8,["type"])):fi("",!0)]))}const oat=Qo(eat,[["render",sat],["__file","ErrorPage.vue"]]),aat={__name:"ErrorLogging",props:{error:{type:Object,required:!0}},setup(e,{expose:t}){t();const n=e,r=no().public;window.console.error(`${r.siteName} Error: message = ${n.error.message}, statusCode = ${n.error.statusCode}`),window.console.error(n.error);const s={props:n,config:r};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};function lat(e,t,n,r,s,o){return ln(),Nn("div")}const cat=Qo(aat,[["render",lat],["__file","ErrorLogging.vue"]]),uat="Card__body",dat="Card__noBodyStyles",hat="Card__relativeFullHeight",fat={body:uat,noBodyStyles:dat,relativeFullHeight:hat},pat={name:"Card",props:{cardBackgroundColor:{type:String,default:"card-background-color"},cardClassNames:{type:String,default:null},cardCloseButtonClass:{type:String,default:void 0},cardCloseSize:{type:String,default:void 0},hasBodyPadding:{type:Boolean,default:!1},hasBodyPaddingResponsive:{type:Boolean,default:!1},hasBodyPaddingSmall:{type:Boolean,default:!1},hasBodyShadow:{type:Boolean,default:!1},headerClassNames:{type:String,default:"tw-flex tw-justify-flex-start tw-px-2 tw-py-4"},isFullHeight:{type:Boolean,default:!1},isRelativeFullHeight:{type:Boolean,default:!1},noBodyStyles:{type:Boolean,default:!1},overflowClass:{type:String,default:"tw-overflow-hidden"},showCloseButton:{type:Boolean,default:!1}},emits:["close-button-click"],computed:{hasHeaderSlot(){return this.$slots.header}}};function mat(e,t,n,r,s,o){const c=sQ;return ln(),Nn("section",{class:Jn({"tw-h-full":n.isFullHeight})},[o.hasHeaderSlot?(ln(),Nn("header",{key:0,class:Jn(n.headerClassNames)},[Co(e.$slots,"header")],2)):fi("",!0),t[2]||(t[2]=Rr()),qn("div",{class:Jn([e.$style.body,n.overflowClass,{"tw-h-full":n.isFullHeight,"tw-p-2.5 lg:tw-p-6":n.hasBodyPaddingResponsive,"tw-p-6":n.hasBodyPadding,"tw-p-2.5":n.hasBodyPaddingSmall,"tw-shadow":n.hasBodyShadow,[e.$style.noBodyStyles]:n.noBodyStyles,[e.$style.relativeFullHeight]:n.isRelativeFullHeight},"tw-relative",n.cardBackgroundColor,n.cardClassNames])},[n.showCloseButton?(ln(),Zr(c,{key:0,"button-class":n.cardCloseButtonClass,"has-body-padding-small":n.hasBodyPaddingSmall,size:n.cardCloseSize,class:"tw-z-10",onClick:t[0]||(t[0]=i=>e.$emit("close-button-click"))},null,8,["button-class","has-body-padding-small","size"])):fi("",!0),t[1]||(t[1]=Rr()),Co(e.$slots,"body")],2)],2)}const gat={$style:fat},_at=Object.assign(Qo(pat,[["render",mat],["__cssModules",gat],["__file","Card.vue"]]),{__name:"Card"}),yat="DropdownMenu__backgroundEnterTransition",vat="DropdownMenu__background",bat="DropdownMenu__hideMenu",xat="DropdownMenu__slideTransition",wat="DropdownMenu__showMenu",Sat={backgroundEnterTransition:yat,background:vat,hideMenu:bat,slideTransition:xat,showMenu:wat},Eat={__name:"DropdownMenu",props:{additionalDropdownClass:{type:String,default:""},buttonType:{type:String,default:Tr.secondary},cardProps:{type:Object,default(){return{hasBodyPaddingSmall:!0}}},closeOnClickAway:{type:Boolean,default:!0},isActive:{type:Boolean,default:void 0},isDropdownAbsolute:{type:Boolean,default:!1},isMenuFullWidth:{type:Boolean,default:!1},menuStyle:{type:Function,default(){return null}},position:{type:String,default:"left"},showBackgroundBlur:{type:Boolean,default:!1},showMenu:{type:Boolean,default:!1},zIndex:{type:String,default:"tw-z-20"}},emits:["close","open"],setup(e,{expose:t,emit:n}){t();const r=e,s=n,o=LA("button"),c=LA("dropdown"),i=eK(),f=j0(),g=yr(!1),x=Ct(()=>`tw-fixed tw-inset-0 tw-z-20 ${f.background}`),w=Ct(()=>`${r.isDropdownAbsolute?"tw-absolute":"tw-relative"} ${r.zIndex} tw-overflow-visible ${r.additionalDropdownClass}`),A=Ct(()=>!!i.anchor?.()),C=Ct(()=>!!i.button?.()),F=Ct(()=>{let J="tw-left-0";return r.position==="right"?J="tw-right-0":r.position&&r.position!=="right"&&r.position!=="left"&&(J=r.position),["tw-absolute tw-top-full",r.zIndex,J,r.isMenuFullWidth?"tw-w-full":null,"tw-mt-1",g.value?f.showMenu:f.hideMenu,f.slideTransition,r.showBackgroundBlur&&g.value?"tw-delay-300":null]}),z=()=>g.value=!1,j=J=>{r.closeOnClickAway&&(J.dropdownMenuClosed=c.value,z())},V=()=>{g.value=!g.value};let Y=null;Hr(()=>g.value,J=>{J?(s("open"),Y=aU(c,j)):(s("close"),Y&&(Y(),Y=null)),r.showButton&&o.value.blur()}),Hr(()=>r.showMenu,(J,ee)=>{J&&!ee?g.value=!0:!J&&ee&&(g.value=!1)},{immediate:!0});const te={props:r,$emit:s,button:o,dropdown:c,slots:i,$style:f,isMenuOpen:g,backgroundClassNames:x,dropdownClass:w,showAnchor:A,showButton:C,menuClass:F,closeMenu:z,handleClickAway:j,toggleMenu:V,get stop(){return Y},set stop(J){Y=J},get onClickOutside(){return aU},useTemplateRef:LA,ButtonTypes:Tr};return Object.defineProperty(te,"__isScriptSetup",{enumerable:!1,value:!0}),te}};function Tat(e,t,n,r,s,o){const c=RS,i=_at;return ln(),Nn("div",{ref:"dropdown",class:Jn(r.dropdownClass)},[r.showAnchor?(ln(),Nn("a",{key:0,class:"link-color-brand",href:"javascript:void(0)",onClick:r.toggleMenu},[Co(e.$slots,"anchor")])):fi("",!0),t[0]||(t[0]=Rr()),r.showButton?(ln(),Zr(c,{key:1,ref:"button",active:r.isMenuOpen||n.isActive,"can-show-chip-active-icon":!1,type:n.buttonType,onClick:r.toggleMenu},{default:Dr(()=>[Co(e.$slots,"button")]),_:3},8,["active","type"])):fi("",!0),t[1]||(t[1]=Rr()),Un(vy,{"enter-from-class":"fade-out","enter-active-class":r.$style.backgroundEnterTransition,"leave-active-class":"fade-leave-transition","leave-to-class":"fade-out"},{default:Dr(()=>[r.isMenuOpen&&n.showBackgroundBlur?(ln(),Nn("div",{key:0,id:"dropdownMenuBackgroundBlur",class:Jn(r.backgroundClassNames),onClick:r.closeMenu},null,2)):fi("",!0)]),_:1},8,["enter-active-class"]),t[2]||(t[2]=Rr()),Un(i,iu({ref:"menu",class:r.menuClass,style:n.menuStyle()},n.cardProps),{body:Dr(()=>[Co(e.$slots,"menu")]),_:3},16,["class","style"])],2)}const Mat={$style:Sat},wce=Qo(Eat,[["render",Tat],["__cssModules",Mat],["__file","DropdownMenu.vue"]]),Aat="SiteNavBar__menu",Cat="SiteNavBar__menuCollapsed",Iat="SiteNavBar__menuExpanded",Pat={menu:Aat,menuCollapsed:Cat,menuExpanded:Iat},Oat={name:"SiteNavBar",data(){return{isMenuCollapsed:!0}},computed:{...Nbe(th,["shouldCollapseNav"]),menuClass(){return["lg:tw-flex lg:tw-justify-end lg:tw-items-center","tw-flex-grow",this.$style.menu,this.isMenuCollapsed?this.$style.menuCollapsed:this.$style.menuExpanded]},navClass(){return["tw-flex tw-flex-wrap tw-items-center tw-justify-between lg:tw-justify-start","tw-w-full tw-px-4 tw-py-2 lg:tw-py-1.5","brand-color"]}},watch:{shouldCollapseNav(e){e&&(this.handleCollapse(),this.setShouldCollapseNav(!1))}},methods:{...HA(th,["setShouldCollapseNav"]),handleCollapse(){this.isMenuCollapsed=!0},handleToggleButtonClick(){this.isMenuCollapsed=!this.isMenuCollapsed}}},Dat={class:"tw-h-11 tw-py-1.5 lg:tw-mr-4"};function Rat(e,t,n,r,s,o){const c=eo("font-awesome-icon");return ln(),Nn("nav",{class:Jn(o.navClass)},[qn("div",Dat,[Co(e.$slots,"brand",{},()=>[t[1]||(t[1]=qn("h1",null,"OpenSnow",-1))])]),t[2]||(t[2]=Rr()),qn("button",{class:"lg:tw-hidden tw-h-11 tw-text-xl",onClick:t[0]||(t[0]=(...i)=>o.handleToggleButtonClick&&o.handleToggleButtonClick(...i))},[Un(c,{icon:["far","bars"]})]),t[3]||(t[3]=Rr()),qn("div",{class:Jn(o.menuClass)},[Co(e.$slots,"menu")],2)],2)}const kat={$style:Pat},Lat=Object.assign(Qo(Oat,[["render",Rat],["__cssModules",kat],["__file","SiteNavBar.vue"]]),{__name:"SiteNavBar"}),Sce=function(){return document.ontouchstart!==null?"click":"touchstart"},b3="__vue_click_away__",Ece=function(e,t,n){Tce(e);let r=n.context,s=t.value,o=!1;setTimeout(function(){o=!0},0),e[b3]=function(c){if((!e||!e.contains(c.target))&&s&&o&&typeof s=="function")return s.call(r,c)},document.addEventListener(Sce(),e[b3],!1)},Tce=function(e){document.removeEventListener(Sce(),e[b3],!1),delete e[b3]},Nat=function(e,t,n){t.value!==t.oldValue&&Ece(e,t,n)},Fat={mounted:Ece,updated:Nat,unmounted:Tce},zat={directives:{ClickAway:Fat}};var fk,jX;function Bat(){if(jX)return fk;jX=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,i=parseInt,f=typeof vM=="object"&&vM&&vM.Object===Object&&vM,g=typeof self=="object"&&self&&self.Object===Object&&self,x=f||g||Function("return this")(),w=Object.prototype,A=w.toString,C=Math.max,F=Math.min,z=function(){return x.Date.now()};function j(ee,le,oe){var ve,se,ie,pe,be,Se,Ce=0,Ee=!1,xe=!1,ke=!0;if(typeof ee!="function")throw new TypeError(e);le=J(le)||0,V(oe)&&(Ee=!!oe.leading,xe="maxWait"in oe,ie=xe?C(J(oe.maxWait)||0,le):ie,ke="trailing"in oe?!!oe.trailing:ke);function He(mt){var Jt=ve,Kt=se;return ve=se=void 0,Ce=mt,pe=ee.apply(Kt,Jt),pe}function Ke(mt){return Ce=mt,be=setTimeout(Ft,le),Ee?He(mt):pe}function Ge(mt){var Jt=mt-Se,Kt=mt-Ce,_e=le-Jt;return xe?F(_e,ie-Kt):_e}function $t(mt){var Jt=mt-Se,Kt=mt-Ce;return Se===void 0||Jt>=le||Jt<0||xe&&Kt>=ie}function Ft(){var mt=z();if($t(mt))return Lt(mt);be=setTimeout(Ft,Ge(mt))}function Lt(mt){return be=void 0,ke&&ve?He(mt):(ve=se=void 0,pe)}function nn(){be!==void 0&&clearTimeout(be),Ce=0,ve=Se=se=be=void 0}function mn(){return be===void 0?pe:Lt(z())}function Xt(){var mt=z(),Jt=$t(mt);if(ve=arguments,se=this,Se=mt,Jt){if(be===void 0)return Ke(Se);if(xe)return be=setTimeout(Ft,le),He(Se)}return be===void 0&&(be=setTimeout(Ft,le)),pe}return Xt.cancel=nn,Xt.flush=mn,Xt}function V(ee){var le=typeof ee;return!!ee&&(le=="object"||le=="function")}function Y(ee){return!!ee&&typeof ee=="object"}function te(ee){return typeof ee=="symbol"||Y(ee)&&A.call(ee)==n}function J(ee){if(typeof ee=="number")return ee;if(te(ee))return t;if(V(ee)){var le=typeof ee.valueOf=="function"?ee.valueOf():ee;ee=V(le)?le+"":le}if(typeof ee!="string")return ee===0?ee:+ee;ee=ee.replace(r,"");var oe=o.test(ee);return oe||c.test(ee)?i(ee.slice(2),oe?2:8):s.test(ee)?t:+ee}return fk=j,fk}var $at=Bat();const _6=ih($at),Mce=e=>e.match(/.*\/weather$/),Vat=e=>e.match(/.*\/weather-stations$/),Ace=e=>e.match(/.*\/snow-report$/),mE=e=>e.startsWith("/explore")||e.startsWith("/user/favorites/locations"),Cce=e=>e?.group==="forecast",Ice=e=>e?.group==="history",Pce=e=>e?.group==="snow-report",Oce=e=>mE(e)&&Mce(e),Dce=e=>mE(e)&&e.match(/.*\/snow-summary$/),Rce=e=>mE(e)&&e.match(/.*\/snow-forecast$/),kce=e=>mE(e)&&e.match(/.*\/all-cams$/),Lce=e=>mE(e)&&Ace(e),gE=e=>e.startsWith("/location"),Nce=e=>gE(e)&&Mce(e),jat=e=>gE(e)&&Vat(e),Fce=e=>gE(e)&&e.match(/.*\/snow-summary$/),zce=e=>gE(e)&&Ace(e),Bce=e=>gE(e)&&e.match(/.*\/cams$/),Qut=(e,t={})=>{const{compareField:n,filter:r}=t,s={};return n&&(s.compare=n.field),r?.countries?.length&&(s.countries=r.countries.map(o=>o.code)),r?.locationTypes?.length&&(s.locations=r.locationTypes.map(o=>o.id)),dN(e,s)},OA=(e,t={})=>{const{currentPath:n="",compareField:r}=t;let s;return(Oce(n)||Nce(n))&&(s="weather"),(Cce(r)||Ice(r)||Dce(n)||Fce(n))&&(s="snow-summary"),Rce(n)&&(s="snow-forecast"),(kce(n)||Bce(n))&&(s="all-cams"),(Pce(r)||Lce(n)||zce(n))&&(s="snow-report"),s?`${e}/${s}`:e},Uat=(e,t={})=>{const{currentPath:n="",compareField:r}=t;let s;return(Oce(n)||Nce(n))&&(s="weather"),jat(n)&&(s="weather-stations"),(Cce(r)||Ice(r)||Dce(n)||Rce(n)||Fce(n))&&(s="snow-summary"),(Pce(r)||Lce(n)||zce(n))&&(s="snow-report"),(kce(n)||Bce(n))&&(s="cams"),s?`${e}/${s}`:e},edt=(e,t,n)=>{const r=t.find(s=>s.field===e);return r&&(!r.isAllAccess||n)?r:null};var mc=63710088e-1,Hat={centimeters:mc*100,centimetres:mc*100,degrees:360/(2*Math.PI),feet:mc*3.28084,inches:mc*39.37,kilometers:mc/1e3,kilometres:mc/1e3,meters:mc,metres:mc,miles:mc/1609.344,millimeters:mc*1e3,millimetres:mc*1e3,nauticalmiles:mc/1852,radians:1,yards:mc*1.0936};function RB(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function y6(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!UX(e[0])||!UX(e[1]))throw new Error("coordinates must contain numbers");return RB({type:"Point",coordinates:e},t,n)}function tdt(e,t,n={}){return Wat(e.map(r=>y6(r,t)),n)}function ndt(e,t,n={}){for(const s of e){if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(s[s.length-1].length!==s[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}return RB({type:"Polygon",coordinates:e},t,n)}function Wat(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function rdt(e,t,n={}){return RB({type:"MultiPolygon",coordinates:e},t,n)}function idt(e,t="kilometers"){const n=Hat[t];if(!n)throw new Error(t+" units is invalid");return e/n}function sdt(e){return e%(2*Math.PI)*180/Math.PI}function odt(e){return e%360*Math.PI/180}function UX(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}var Hl=63710088e-1,Gat={centimeters:Hl*100,centimetres:Hl*100,degrees:Hl/111325,feet:Hl*3.28084,inches:Hl*39.37,kilometers:Hl/1e3,kilometres:Hl/1e3,meters:Hl,metres:Hl,miles:Hl/1609.344,millimeters:Hl*1e3,millimetres:Hl*1e3,nauticalmiles:Hl/1852,radians:1,yards:Hl*1.0936};function Yat(e,t){t===void 0&&(t="kilometers");var n=Gat[t];if(!n)throw new Error(t+" units is invalid");return e*n}function DA(e){var t=e%360;return t*Math.PI/180}function HX(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qat(e,t,n){n===void 0&&(n={});var r=HX(e),s=HX(t),o=DA(s[1]-r[1]),c=DA(s[0]-r[0]),i=DA(r[1]),f=DA(s[1]),g=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(i)*Math.cos(f);return Yat(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),n.units)}const adt=(e,t,n)=>t.includes(e)?e==="Closest"?!!n:!0:!1,Xat=(e,t,n)=>{if(Array.isArray(e)!==!1){if(t==="Last Updated")e.sort((r,s)=>{const o=new Date(r.post.posted_at).getTime();return new Date(s.post.posted_at).getTime()-o});else if(t==="A-Z")e.sort((r,s)=>r.name.localeCompare(s.name));else if(t==="Forecaster")e.sort((r,s)=>r.post.author.name.localeCompare(s.post.author.name));else if(t==="Closest"){const r=e.reduce((s,o)=>{const{name:c}=o,i=y6(n),f=y6(o.coordinates.point);return s[c]=qat(i,f),s},{});e.sort((s,o)=>r[s.name]-r[o.name])}}},ldt=(e={})=>{const{showRecommended:t=!1,showClosest:n=!1}=e;return[t?"Recommended":null,"Last Updated","A-Z",n?"Closest":null,"Forecaster"].filter(r=>r!==null)},ma=(e={})=>{const{is_custom:t,path:n,payload:r={}}=e,{$api:s}=Wn(),o=_s(),c=t?o?.user?.cache_key:null;return s.get(n,{...r,cache_key:c})},ga=(e,t={})=>{const{coordinates:n,slug:r}=t;return`/location/${n?n.map(o=>o.toFixed(4)).join(","):r}${e}`},WX=Jm("location",{state:()=>({agentForecastSummaryTimeframe:null}),actions:{async fetchAvalanche(e){const{is_custom:t}=e,{location:n}=await ma({is_custom:t,path:ga("/avalanche",e)});return n},async fetchCams(e={}){const{is_custom:t,units:n="imperial"}=e,{location:r}=await ma({is_custom:t,payload:{units:n},path:ga("/cams",e)});return r},async fetchDailyReads(e={}){const{is_custom:t,sort:n,units:r="imperial"}=e,{location:s}=await ma({is_custom:t,payload:{units:r},path:ga("/daily-reads",e)});return Xat(s.daily_reads,n),s},async fetchForecastCurrent(e={}){const{is_custom:t,units:n="imperial",with_geocode:r=!1}=e,{location:s}=await ma({is_custom:t,payload:{units:n,with_geocode:r},path:ga("/forecast/current",e)});return s},async fetchForecastDetail(e={}){const{days:t=15,is_custom:n,units:r="imperial"}=e,{location:s}=await ma({is_custom:n,payload:{days:t,units:r},path:ga("/forecast/detail",e)});return s},async fetchForecastMembers(e={}){const{days:t=10,is_custom:n,units:r="imperial"}=e,{location:s}=await ma({is_custom:n,payload:{days:t,units:r},path:ga("/forecast/members",e)});return s},async fetchForecastDetailMyLocation(e={}){const{days:t=15,is_custom:n,units:r="imperial"}=e,{location:s}=await ma({is_custom:n,payload:{days:t,units:r},path:ga("/forecast/detail/my-location",e)});return s},async fetchForecastSnowDetail(e={}){const{days:t=15,is_custom:n,units:r="imperial",with_weather_stations:s=!0}=e,{location:o}=await ma({is_custom:n,payload:{days:t,units:r,with_weather_stations:s},path:ga("/forecast/snow-detail",e)});return o},async fetchForecastSnowSummary(e){const{is_custom:t,units:n="imperial"}=e,{location:r}=await ma({is_custom:t,payload:{units:n},path:ga("/forecast/snow-summary",e)});return r},async fetchForecastSummary(e){const{is_custom:t,units:n="imperial"}=e,{location:r}=await ma({is_custom:t,payload:{units:n},path:ga("/forecast/summary",e)});return r},async fetchHistorySnowDaily(e={}){const{month:t,units:n="imperial",year:r}=e,{location:s}=await ma({payload:{month:t,units:n,year:r},path:ga("/history/snow-daily",e)});return s},async fetchHistorySnowDetail(e={}){const{days:t=15,is_custom:n,units:r="imperial"}=e,{location:s}=await ma({is_custom:n,payload:{days:t,units:r},path:ga("/history/snow-detail",e)});return s},async fetchInfo(e={}){const{is_custom:t,units:n="imperial"}=e,{location:r}=await ma({is_custom:t,payload:{units:n},path:ga("/info",e)});return r},async fetchLocation(e={}){const{is_custom:t}=e,{location:n}=await ma({is_custom:t,path:ga("",e)});return n},async fetchSnowReport(e={}){const{is_custom:t,units:n="imperial",with_weather_stations:r=!0}=e,{location:s}=await ma({is_custom:t,payload:{units:n,with_weather_stations:r},path:ga("/snow-report",e)});return s},async fetchTrailMaps(e={}){const{is_custom:t,units:n="imperial"}=e,{location:r}=await ma({is_custom:t,payload:{units:n},path:ga("/trail-maps",e)});return r},async fetchWeatherStations(e={}){const{is_custom:t,units:n="imperial"}=e,{location:r}=await ma({is_custom:t,path:ga("/weather-stations",e),payload:{units:n}});return r}}}),Zat={airqual:"airqual",airqualf:"airqualf",avalanche:"avalanche",clouds:"clouds",drrf:"drrf",fallcolors:"fall-colors",hail:"hail-size",lightningRisk:"ltng-risk",opensnowLocationsCompare:"opensnow-locations-compare",parcels:"parcels",precipType:"ptype-ecmwf",publicLands:"public-lands",radarGlobal:"radar-global-p",rala:"rala",smokeHigh:"smoke-high",smokeHighHighRes:"smoke-high-hr",smokeLow:"smoke-low",smokeLowHighRes:"smoke-low-hr",snow12h:"c9-snowfall-12h",snow24h:"c9-snowfall-24h",snow6h:"c9-snowfall-6h",snowdepth:"snowdepth",snowfall24h:"snowfall-24h",snowfallSeason:"snowfall-season",snowTotal:"c9-snowfall-total",stormNet:"storm-net",temps:"temps",weatherStations:"weather-stations",wildfire:"wildfire",wind:"wind"},v0={textColorLight:"#ffffff",textHaloColorLight:"#000000",textColorDark:"#ffffff",textHaloColorDark:"#000000"},RA={avalancheForecast:"avalancheForecast",locationForecast:"locationForecast",removeCustomLocationDialog:"removeCustomLocationDialog",saveCustomLocation:"saveCustomLocation",selectFavoriteList:"selectFavoriteList"},GX=(e,t)=>t.reduce((n,r)=>{const s=e.find(o=>o.id===r.category_id);return n[r.short_name]={...r,computed_sort_weight:s.sort_weight*100+r.sort_weight},n},{}),YX=()=>({data:{baseMaps:null,categories:null,sources:null},style:{maskColor:"#000000",maskOpacity:.2,textColor:v0.textColorLight,textFont:["Open Sans Bold","Open Sans Regular","Arial Unicode MS Regular"],textHaloBlur:0,textHaloColor:v0.textHaloColorLight,textHaloWidth:1,textLetterSpacing:.0625,textLineHeight:1.2,textPadding:20,textSize:13},ui:{bearing:0,canSaveMapState:!0,controlsToShow:["Compass","Toggle3D","Geolocate","Navigation","Opacity","StormNet"],center:null,compareId:null,compareType:null,currentBaseMap:null,currentFrame:0,currentOverlay:null,currentTimestamp:null,isFavorites:null,isForecast:null,isFullScreen:!0,isLayerDrawerOpen:!1,isMapIdle:null,mapCard:null,mapLocation:null,maskMessage:null,numberOfFrames:0,opacity:null,overlayCoverageBbox:null,overlayFieldControlOptions:null,overlayFieldControlValue:null,pitch:0,resetCurrentFrame:!0,selectedLayerDrawerTab:0,shouldReset3D:!1,showAnimationControl:!1,showLocations:!1,showMaskMessage:!1,showOpacity:!1,visibleFavoriteLists:[],visibleLocationTypes:[],zoom:null}}),v6=(e="map")=>Jm(e,{state:()=>YX(),actions:{async fetchMapSourcesMeta({noCommit:t=!1,sources:n}){const{$api:r}=Wn(),s=n.map(({short_name:g})=>g).join(","),c=await r.get("/maps/sources/meta",{short_names:s}),f={baseMaps:c.styles.reduce((g,x)=>(g[x.short_name]=x,g),{}),categories:c.categories,sources:GX(c.categories,c.sources)};if(t===!1){const{baseMaps:g,categories:x,sources:w}=f;this.data.baseMaps=g,this.data.categories=x,this.data.sources=w}return f},async fetchMapSourcesTiles({source:t}){const{short_name:n}=t,[r]=t.tile_types,{$api:s}=Wn(),o="/maps/sources/tiles",{sources:c}=await s.get(o,{sources:JSON.stringify([t])}),i=this.data.sources?.[n]?.tiles?.[r],f=i?.[i.length-1]?.source_timestamp,g=c[0].tiles[r],x=g[g.length-1].source_timestamp,w=!!(f&&f!==x);return(w||!f)&&(this.data.sources[n]=GX(this.data.categories,c)[n]),w},filterMapState(t={}){const n=LS(),{isAllAccess:r=!1,mapState:s={}}=t,{bearing:o,center:c,currentBaseMap:i,currentOverlay:f,isFullScreen:g,overlayFieldControlValue:x,pitch:w,shortname:A,showLocations:C,visibleFavoriteLists:F,visibleLocationTypes:z,zoom:j}=s,V={bearing:o,center:c,currentBaseMap:i,currentOverlay:f,isFullScreen:g,overlayFieldControlValue:x,pitch:w,shortname:A,showLocations:C,visibleFavoriteLists:F,visibleLocationTypes:z,zoom:j},{baseMaps:Y,sources:te}=this.data;(typeof o!="number"||Number.isNaN(o))&&delete V.bearing,(!c||typeof c!="object"||typeof c.lat!="number"||typeof c.lng!="number"||c.lat<-90||c.lat>90||c.lng<-180||c.lng>180)&&delete V.center,(!i||!Y?.[i]||!r&&Y?.[i].is_all_access)&&delete V.currentBaseMap,(!f||!te[f]||!r&&te[f].is_all_access)&&delete V.currentOverlay,typeof g!="boolean"&&delete V.isFullScreen,typeof x!="string"&&delete V.overlayFieldControlValue,(typeof w!="number"||Number.isNaN(w))&&delete V.pitch,typeof A!="string"&&delete V.shortname,typeof C!="boolean"&&delete V.showLocations,(Array.isArray(F)&&!F.every(ee=>typeof ee=="number")||F!==null)&&delete V.visibleFavoriteLists;const J=n.location_types_maps.map(({slug:ee})=>ee);return(!Array.isArray(z)||!z.every(ee=>J.includes(ee)))&&delete V.visibleLocationTypes,(typeof j!="number"||j<0||j>20)&&delete V.zoom,V},getMapStateFromUrl({$route:t}){let n={};try{let r=null,s=null,o=null,c,i,f=null;const{basemap:g,latlngzoom:x,overlay:w}=t?.params||{};if(g||x||w){if(g&&(s=g),w&&(o=Object.values(this.data.sources??{}).find(A=>A.slug.toLowerCase()===w.toLowerCase()),o=o?o.short_name:null),x){const A=x.replace(/^@/,"").replace(/z$/,"").split(",");A?.length===3&&([c,i,f]=A,r={lng:Number(i),lat:Number(c)},f=Number(f))}n={center:r,currentBaseMap:s,currentOverlay:o,zoom:f}}}catch{}if(t?.hash&&(n.shortname=t.hash.replace(/^#/,"")),t?.query?.weather_stations_field&&(n.overlayFieldControlValue=t.query.weather_stations_field),typeof t?.query?.bearing<"u"){const r=parseInt(t?.query?.bearing,10);Number.isNaN(r)||(n.bearing=r)}if(typeof t?.query?.pitch<"u"){const r=parseInt(t?.query?.pitch,10);Number.isNaN(r)||(n.pitch=r)}return n},getSavedMapState(){try{const t=Qw.getItem(this.savedMapStateKeyName);if(!t)return{};const{bearing:n,center:r,compareId:s,compareType:o,overlay:c,overlayFieldControlValue:i,pitch:f,visibleFavoriteLists:g,zoom:x}=t,w=t.style,A=t.isFullScreen,C=t.pointsVisible,F=t.visibleTypes,z=Object.keys(this.data.sources??{}).find(j=>j===c)||null;return{bearing:n,center:r,compareId:s,compareType:o,currentBaseMap:w,currentOverlay:z,isFullScreen:A,overlayFieldControlValue:i,pitch:f,showLocations:C,visibleFavoriteLists:g,visibleLocationTypes:F,zoom:x}}catch{return{}}},resetState(){const t=YX();Object.keys(t).forEach(n=>this[n]=t[n])},saveMapState(){if(this.ui.canSaveMapState===!1)return;const{savedMapStateKeyName:t}=this,{bearing:n,compareId:r,compareType:s,currentBaseMap:o,currentOverlay:c,isFavorites:i,isFullScreen:f,overlayFieldControlValue:g,pitch:x,showLocations:w,visibleFavoriteLists:A,visibleLocationTypes:C}=this.ui,F=Object.assign({},this.ui.center);F.lat=d_(F.lat,4),F.lng=d_(F.lng,4);const z=d_(this.ui.zoom,4);let j;r&&s?j={center:F,compareId:r,compareType:s,zoom:z}:i?j={center:F,zoom:z}:j={bearing:n,center:F,isFullScreen:f,overlay:c||"none",overlayFieldControlValue:g,pitch:x,pointsVisible:w,style:o,visibleFavoriteLists:A,visibleTypes:C,zoom:z},Qw.setItem(t,j)},async setAvalancheCard(t){const{$api:n}=Wn(),{forecast_id:r,id:s,shortname:o}=t,c=`/avalanche/${s||o}${r?`/forecasts/${r}`:""}`,{avalanche:i}=await n.get(c),f={data:{forecast:i},type:RA.avalancheForecast};this.setMapCard(f)},setCurrentBaseMap(t,n=!1){this.ui.currentBaseMap=t,t==="dark"||t==="satellite"?(this.style.textColor=v0.textColorDark,this.style.textHaloColor=v0.textHaloColorDark):(this.style.textColor=v0.textColorLight,this.style.textHaloColor=v0.textHaloColorLight),n&&this.saveMapState()},setIsLayerDrawerOpen(t){t&&(this.ui.showOpacity=!1),this.ui.isLayerDrawerOpen=t},setCanToggle3D(t){t&&!this.ui.controlsToShow.includes("Toggle3D")&&this.ui.controlsToShow.push("Toggle3D"),!t&&this.ui.controlsToShow.includes("Toggle3D")&&(this.ui.controlsToShow=this.ui.controlsToShow.filter(n=>n!=="Toggle3D"))},setMapCard({type:t,data:n}){this.setMapUiProperty({key:"mapCard",value:{type:t,data:n}})},async setMapCustomLocation(t){const n=WX(),r=_s(),{coordinates:s}=t,{units:o}=r.preferences,c={coordinates:s,units:o,with_geocode:!0},i={data:{coordinates:s},type:RA.locationForecast};this.setMapCard(i);const f=await n.fetchForecastCurrent(c,{root:!0});i.data.location=f,this.setMapCard(i)},async setMapLocation(t){const n=WX(),r=_s(),{lat:s,lng:o,shortname:c,updateCoords:i=!0}=t;let f;if(c){const{units:g}=r.preferences,x={slug:c,units:g};f=await n.fetchForecastCurrent(x,{root:!0})}if(i&&f&&(!s||!o)){let g,x;f.coordinates?[x,g]=f.coordinates.point:{latitude:g,longitude:x}=f,this.setMapUiProperty({key:"mapLocation",value:{lat:g,lng:x}})}else i&&s&&o&&this.setMapUiProperty({key:"mapLocation",value:{lat:s,lng:o}});if(!(c&&this.ui.mapCard?.data?.location?.slug===c)&&c){const g={data:{location:f,shortname:c},type:RA.locationForecast};this.setMapCard(g)}},setMapUiProperties(t={},n=!1){Object.entries(t).forEach(([r,s])=>this.setMapUiProperty({key:r,value:s})),n&&this.saveMapState()},setShowAnimationControl(t){this.ui.showAnimationControl=t},setShowMaskMessage(t){this.ui.showMaskMessage=t},setMaskMessage(t){this.ui.maskMessage=t},setOverlayCoverageBbox(t){this.ui.overlayCoverageBbox=t},setMapUiProperty({key:t,value:n}){this.ui[t]=n},setShowOpacity(t){t&&(this.ui.isLayerDrawerOpen=!1),this.ui.showOpacity=t}},getters:{currentBaseMap(){const{currentBaseMap:t}=this.ui,{baseMaps:n}=this.data;return n&&n[t]},currentOverlay(){const{currentOverlay:t}=this.ui,{sources:n}=this.data;return n&&n[t]},currentOverlayLegend(){const{overlayFieldControlValue:t}=this.ui,{legends:n}=this?.currentOverlay||{},r=n?.findIndex(({fields:s})=>s.includes(t));return r>=0?n[r]:null},getStormNetUrl(){const t=this;return n=>{const{web_url:r}=t.data.sources[Zat.stormNet],s=new URL(r);return s.searchParams.set("basemap",t.currentBaseMap.short_name),s.searchParams.set("center",n.getCenter().toArray().map(o=>o.toFixed(3)).join(",")),s.searchParams.set("zoom",n.getZoom().toFixed(2)),s.toString()}},is3D(){return this.ui.pitch!==0},controlsToShow(){return this.ui.controlsToShow},savedMapStateKeyName(){return this.ui.compareId&&this.ui.compareType?"mapState-compare":this.ui.isFavorites?"mapState-favorites":"mapState-explore"},shouldShowOverlayFieldControl(){return!!(this.ui.overlayFieldControlOptions&&this.ui.overlayFieldControlValue)},url(){const{bearing:t,center:n,compareId:r,compareType:s,currentBaseMap:o,isFavorites:c,mapCard:i,overlayFieldControlValue:f,pitch:g,zoom:x}=this.ui,{avalancheForecast:w,locationForecast:A}=RA,C=()=>{let V,Y;return Array.isArray(n)?[Y,V]=n:{lng:Y,lat:V}=n,{lat:V,lng:Y}},F=(V,Y,te)=>`@${d_(V,4)},${d_(Y,4)},${d_(te,4)}z`,{baseUrl:z}=no().public;let j;if(c&&n&&x){const{lat:V,lng:Y}=C(),te=`/user/favorites/map/${F(V,Y,x)}`;j=new URL(te,z)}else if(r&&s&&n&&x){const{lat:V,lng:Y}=C(),te=`/explore/${s}/${r}/map/${F(V,Y,x)}`;j=new URL(te,z)}else if(o&&n&&x){const{lat:V,lng:Y}=C(),te=`/map/${o}/${this.currentOverlay?.slug??"none"}/${F(V,Y,x)}`;j=new URL(te,z),f&&this.currentOverlay?.slug==="weather-stations"&&j.searchParams.set("weather_stations_field",f),typeof t=="number"&&t!==0&&j.searchParams.set("bearing",parseInt(t,10)),typeof g=="number"&&g!==0&&j.searchParams.set("pitch",parseInt(g,10)),i?.type===w?j.hash=`avy-${i.data.forecast.slug}`:i?.type===A&&i?.data?.shortname?j.hash=`${i.data.shortname}`:i?.type===A&&i?.data?.location?.slug&&(j.hash=`${i.data.location.slug}`)}return j?j.toString().replace(z,""):""},visibleCategories(){return this.data.categories?Object.values(this.data.categories).filter(t=>t.visible):[]},visibleOverlays(){const t=this.visibleCategories.map(n=>n.id);return this.data.sources?Object.values(this.data.sources).filter(n=>t.includes(n.category_id)).sort((n,r)=>n.computed_sort_weight-r.computed_sort_weight):[]}}}),Kat=Jm("search",{state:()=>({}),actions:{async searchAll(e={}){const{$api:t}=Wn(),{limit:n=20,q:r=""}=e,s=["country","daily-read","location","region","season-pass","state"].join(","),{results:o}=await t.get("/search",{limit:n,q:r,search_types:s});return o},async searchLocations(e={}){const{$api:t}=Wn(),{limit:n=20,q:r="",skip:s=0,with_geocode:o=!0}=e,{locations:c}=await t.get("/search/locations",{limit:n,q:r,skip:s,with_geocode:o});return c}}}),Jat="SiteHeaderSearch__inputContainer",Qat="SiteHeaderSearch__input",elt="SiteHeaderSearch__resultsContainer",tlt="SiteHeaderSearch__listItemActive",nlt="SiteHeaderSearch__locationTypeIcon",rlt={inputContainer:Jat,input:Qat,resultsContainer:elt,listItemActive:tlt,locationTypeIcon:nlt},ilt={name:"SiteHeaderSearch",mixins:[zat],data(){return{activeResult:null,ignoreMousemove:!1,listItems:[],noResults:!1,query:"",results:[],showMenu:!1,timeout:null}},computed:{cardProps(){return{cardClassNames:`tw-w-full tw-overflow-auto ${this.$style.resultsContainer}`,hasBodyPadding:!1,hasBodyShadow:!0}},inputClass(){return["tw-inline-block tw-h-10 tw-py-1.5 lg:tw-py-2 tw-border-none","focus:tw-outline-none focus:tw-shadow-none",this.$style.input]},inputContainerClass(){return["tw-flex tw-items-center tw-w-full tw-px-4","tw-text-white tw-text-base lg:tw-text-sm",this.$style.inputContainer]},locationTypeIconClass(){return["tw-block tw-w-8 tw-h-8 tw-p-1 tw-rounded-sm tw-mr-2.5","tw-flex-grow-0 tw-flex-shrink-0",this.$style.locationTypeIcon]}},methods:{...HA(v6(),["setMapLocation"]),...HA(Kat,["searchAll"]),...HA(th,["setShouldCollapseNav"]),getListItemClass(e){return["tw-flex tw-items-start lg:tw-items-center","tw-py-2 tw-px-3","tw-border-b last:tw-border-0 border-color","tw-cursor-pointer",this.$style.listItem,this.activeResult===e?this.$style.listItemActive:null]},getListItemKey(e,t){return`${e}-${t.slug}-${t.type}`},getLocationTypeIconStyle(e){return String(e).match(/\.png$/)?{backgroundImage:`url(${e})`,backgroundPosition:"center",backgroundSize:"contain"}:{backgroundColor:"var(--text-darkest)",...e0(e)}},getSearchResults:_6(async function(){try{const t=String(this.query).trim();if(!t){this.reset();return}if(t.length<3)return;document.removeEventListener("keydown",this.handleKeyDown),this.activeResult=null,this.ignoreMousemove=!0,this.listItems=[],this.$refs?.list?.parentElement&&this.$refs.list.parentElement.scrollTo(0,0),this.results=await this.searchAll({q:t}),this.noResults=!this.results.length,this.ignoreMousemove=!1,this.showMenu=!0,document.addEventListener("keydown",this.handleKeyDown)}catch{}},500),handleClickAway(){this.reset()},handleDropdownClose(){this.reset()},handleKeyDown(e){let t=!1;if(e.key==="ArrowDown"?this.activeResult===null?(this.activeResult=0,t=!0):this.activeResult+1<this.results.length&&(this.activeResult+=1,t=!0):e.key==="ArrowUp"?this.activeResult-1>=0&&(this.activeResult-=1,t=!0):e.key==="Enter"&&this.activeResult!==null&&this.selectResult(this.results[this.activeResult]),t){const n=this.$refs.list.parentElement.getBoundingClientRect(),r=this.listItems[this.activeResult].getBoundingClientRect();if(r.left<n.left||r.right>n.right||r.top<n.top||r.bottom>n.bottom){this.ignoreMousemove=!0;const o={block:"end",inline:"center"};this.listItems[this.activeResult].scrollIntoView(o),window.setTimeout(()=>this.ignoreMousemove=!1,250)}}},handleMouseEnter(e){this.ignoreMousemove||(this.activeResult=e)},handleMouseLeave(){this.activeResult=null},reset(){window.clearTimeout(this.timeout),this.showMenu=!1,this.timeout=window.setTimeout(()=>{document.removeEventListener("keydown",this.handleKeyDown),this.activeResult=null,this.ignoreMousemove=!1,this.listItems=[],this.noResults=!1,this.query="",this.results=[],this.timeout=null},250)},async selectResult(e){const t=(this._.provides[Kd]||this.$route).fullPath;let n="";if(this.reset(),await this.$nextTick(),(this._.provides[Kd]||this.$route).path.match(/^\/map/)&&e.type==="location"){const[o,c]=e.coordinates.point,i=e.slug;this.setMapLocation({lat:c,lng:o,shortname:i})}else{const{slug:o,type:c}=e;switch(c){case"avalanche-region":n=`/avalanche/${o}`;break;case"country":n=OA(`/explore/countries/${o}`,{currentPath:t});break;case"daily-read":n=`/dailysnow/${o}`;break;case"region":n=OA(`/explore/regions/${o}`,{currentPath:t});break;case"season-pass":n=OA(`/explore/season-passes/${o}`,{currentPath:t});break;case"state":n=OA(`/explore/states/${o}`,{currentPath:t});break;default:n=Uat(`/location/${o}`,{currentPath:t}),n===`/location/${o}`&&(n=new URL(e.url).pathname);break}}this.setShouldCollapseNav(!0),aa().push(n)},setListItemRef(e,t){t?this.listItems[e]=t:this.listItems.splice(e,1)}}},slt={key:0,class:"tw-py-5 tw-px-2.5 text-darkest-color"},olt={key:1,ref:"list"},alt=["onClick","onMouseenter"],llt={class:"tw-block tw-text-base text-darkest-color"},clt={class:"tw-block tw-text-xs text-regular-color"};function ult(e,t,n,r,s,o){const c=eo("font-awesome-icon"),i=wce,f=V6("click-away");return k2((ln(),Nn("div",{class:Jn([e.$style.container,"tw-min-w-full","tw-relative"])},[qn("div",{class:Jn(o.inputContainerClass)},[Un(c,{class:"tw-w-4 tw-h-8 tw-mr-2",icon:"search"}),t[2]||(t[2]=Rr()),k2(qn("input",{"onUpdate:modelValue":t[0]||(t[0]=g=>s.query=g),autocomplete:"new-search-query",class:Jn(o.inputClass),"disable-password-manager":!0,placeholder:"Search for ski resorts, cities & more...",type:"search",onInput:t[1]||(t[1]=(...g)=>o.getSearchResults&&o.getSearchResults(...g))},null,34),[[z2,s.query]])],2),t[5]||(t[5]=Rr()),Un(i,{"card-props":o.cardProps,class:"tw-w-full","close-on-click-away":!1,"is-menu-full-width":!0,"show-menu":s.showMenu,onClose:o.handleDropdownClose,onMouseleave:o.handleMouseLeave},{menu:Dr(()=>[s.noResults?(ln(),Nn("p",slt,`
          No results for "`+is(s.query)+`".
        `,1)):(ln(),Nn("ul",olt,[(ln(!0),Nn(ei,null,So(s.results,(g,x)=>(ln(),Nn("li",{key:o.getListItemKey(x,g),ref_for:!0,ref:w=>o.setListItemRef(x,w),class:Jn(o.getListItemClass(x)),onClick:()=>o.selectResult(g),onMouseenter:w=>o.handleMouseEnter(x)},[qn("div",{class:Jn(o.locationTypeIconClass)},[qn("div",{class:"tw-h-full tw-w-full",style:Ta(o.getLocationTypeIconStyle(g.icon_url))},null,4)],2),t[4]||(t[4]=Rr()),qn("div",null,[qn("strong",llt,is(g.label),1),t[3]||(t[3]=Rr()),qn("span",clt,is(g.detail),1)])],42,alt))),128))],512))]),_:1},8,["card-props","show-menu","onClose","onMouseleave"])],2)),[[f,o.handleClickAway]])}const dlt={$style:rlt},hlt=Object.assign(Qo(ilt,[["render",ult],["__cssModules",dlt],["__file","SiteHeaderSearch.vue"]]),{__name:"SiteHeaderSearch"}),qX="Create Free Account",XX=()=>{const e=LS(),t=Ct(()=>e.pricing?.default_trial),n=Ct(()=>t.value?.trial_title||qX),r=Ct(()=>t.value?.trial_button_text||qX);return{defaultTrial:t,defaultTrialTitle:n,registerButtonText:r}},flt=""+new URL("OpenSnowLogo.C2udtJgf.png",import.meta.url).href,plt="SiteHeader__allAccessBadge",mlt="SiteHeader__showAllAccess",glt="SiteHeader__userLinks",_lt="SiteHeader__hideAuthContent",ylt="SiteHeader__accountDropdownFreeUser",vlt="SiteHeader__accountDropdownListItem",blt="SiteHeader__container",xlt={allAccessBadge:plt,showAllAccess:mlt,userLinks:glt,hideAuthContent:_lt,accountDropdownFreeUser:ylt,accountDropdownListItem:vlt,container:blt},wlt="tw-block lg:tw-inline-block tw-py-2 lg:tw-px-2 tw-cursor-pointer hover:tw-no-underline hover:tw-text-white",Slt="tw-inline-block lg:tw-block tw-w-6 tw-h-4 tw-mr-1.5 lg:tw-mb-1 lg:tw-mx-auto tw-fill-current",Elt={__name:"SiteHeader",setup(e,{expose:t}){t();const n=j0(),r=no().public,s=Tc(),o=th(),c=_s(),{registerButtonText:i}=XX(),f=Ct(()=>x.value===!1?!1:c.isAllAccess),g=Ct(()=>x.value===!1?!0:c.isGuest),x=yr(!1),w=yr(!1),A=Ct(()=>!f.value&&!g.value?n.accountDropdownFreeUser:"right"),C=Ct(()=>!g.value),F=()=>{const Ke=s?.query?.return_to||s?.fullPath;return typeof Ke!="string"?{}:Ke.includes("/user/login")||Ke.includes("/user/register")||Ke==="/"?{}:{return_to:Ke}},z=Ke=>{Ke?.dropdownMenuClosed||(Ke.preventDefault(),Ke.stopPropagation(),w.value=!w.value)},j=Ct(()=>g.value?"/":"/user/favorites"),V={icon:"user",onClick:z,text:"Account"},Y={icon:"arrow-right-from-bracket",text:"Log Out",to:"/user/logout"},te={icon:"cog",text:"Settings",to:"/user/settings/account"},J=Ct(()=>({external:!0,icon:g.value?null:"question",target:"_blank",text:"Help",to:"https://support.opensnow.com"})),ee=Ct(()=>{const Ke=F(),Ge="/user/login",$t="Log In",Ft=uU(Ge,Ke);return{text:$t,to:Ft}}),le={text:"Pricing",to:"/subscription"},oe=Ct(()=>[g.value?"lg:tw-block lg:tw-py-2":"","tw-text-base tw-font-normal",g.value?"lg:tw-text-sm":"lg:tw-text-xs","text-light-color tw-whitespace-nowrap"]),ve=[te,Y],se=[{icon:["far","location-dot"],text:"My Location",to:"/my-location"},{icon:["far","star"],text:"Favorites",to:"/user/favorites"},{icon:["far","map"],text:"Maps",to:"/map"},{icon:["fal","users"],text:"Experts",to:"/dailysnow"},{icon:["fas","search"],text:"Explore",to:"/explore"}],ie=Ct(()=>{const Ke=F(),Ge={isGuest:g.value,query:{...Ke,source:"snow_header"}},$t=["tw-text-base lg:tw-text-sm",g.value?"":"lg:tw-my-2","tw-w-full","tw-whitespace-nowrap"].join(" "),Ft=g.value?i.value:"Buy Now",Lt=dU(Ge);return{buttonClass:$t,text:Ft,to:Lt}}),pe=Ct(()=>g.value?[[le,J.value,ee.value,ie.value],[le,J.value,ee.value,ie.value]]:f.value?[[J.value,te,Y],[J.value,V]]:[[J.value,te,Y,ie.value],[J.value,V,ie.value]]),be=`lg:tw-order-3 tw-mt-1 lg:tw-mt-0 tw-pt-1 lg:tw-pt-0 tw-border-t lg:tw-border-t-0 ${n.userLinks}`,Se=Ke=>{const Ge=String(Ke.to);return s.path.startsWith(Ge)?"tw-text-white":null},Ce=()=>{w.value=!1},Ee=()=>{tU()||window.setTimeout(()=>{o.setShouldCollapseNav(!0)},250)},xe=(Ke,Ge)=>{w.value=!1,Ge.onClick&&Ge.onClick(Ke)},ke=(Ke,Ge)=>{Ge.onClick?Ge.onClick(Ke):Ee()};Hr(()=>s.path,(Ke,Ge)=>{Ke?.path!==Ge?.path&&Ee()}),ua(()=>{x.value=!0});const He={$style:n,config:r,route:s,uiStore:o,userStore:c,registerButtonText:i,isAllAccess:f,isGuest:g,isMounted:x,showAccountDropdown:w,accountDropdownPosition:A,canShowNavContent:C,getReturnToQuery:F,toggleAccountDropdown:z,brandLink:j,accountLink:V,logOutLink:Y,settingsLink:te,helpLink:J,logInLink:ee,pricingLink:le,navItemAnchorClass:wlt,navItemClass:oe,navItemIconClass:Slt,dropdownLinks:ve,pageLinks:se,startFreeTrialButton:ie,userLinkSets:pe,userLinksClass:be,getNavItemAnchorActiveClass:Se,handleAccountDropdownClose:Ce,handleCollapseNav:Ee,handleDropdownLinkClick:xe,handleUserLinkClick:ke,SiteHeaderSearch:hlt,get isScreenLg(){return tU},get addReturnTo(){return uU},get getStartFreeTrialUrl(){return dU},get useDefaultTrial(){return XX},get useUiStore(){return th},get useUserStore(){return _s}};return Object.defineProperty(He,"__isScriptSetup",{enumerable:!1,value:!0}),He}},Tlt=["alt"],Mlt={key:0,class:"tw-relative tw-flex-auto tw-my-4 tw-mx-0 lg:tw-my-0 lg:tw-mr-4 lg:tw-order-2"},Alt={key:1,class:"lg:tw-flex"};function Clt(e,t,n,r,s,o){const c=W3,i=eo("font-awesome-icon"),f=RS,g=wce,x=Lat;return ln(),Zr(x,{class:Jn(["lg:tw-sticky lg:tw-top-0 tw-z-30",r.$style.container])},{brand:Dr(()=>[Un(c,{to:r.brandLink},{default:Dr(()=>[qn("img",{alt:r.config.siteName,class:"tw-w-48 tw-inline",src:flt},null,8,Tlt)]),_:1},8,["to"])]),menu:Dr(()=>[r.isMounted&&r.canShowNavContent?(ln(),Nn("div",Mlt,[Un(r.SiteHeaderSearch)])):fi("",!0),t[0]||(t[0]=Rr()),r.isMounted&&r.canShowNavContent?(ln(),Nn("ul",Alt,[(ln(),Nn(ei,null,So(r.pageLinks,w=>qn("li",{key:w.text,class:Jn([r.navItemClass,"lg:tw-mr-4"])},[Un(c,{external:w.external,class:Jn([r.navItemAnchorClass,r.getNavItemAnchorActiveClass(w)]),to:w.to,onClick:r.handleCollapseNav},{default:Dr(()=>[w.icon?(ln(),Zr(i,{key:0,class:Jn(r.navItemIconClass),icon:w.icon},null,8,["icon"])):fi("",!0),Rr(" "+is(w.text),1)]),_:2},1032,["external","class","to"])],2)),64))])):fi("",!0),t[1]||(t[1]=Rr()),(ln(!0),Nn(ei,null,So(r.userLinkSets,(w,A)=>(ln(),Nn("ul",{key:A,class:Jn([r.userLinksClass,A===0?"lg:tw-hidden":"",A===1?"tw-hidden lg:tw-flex":""])},[(ln(!0),Nn(ei,null,So(w,C=>(ln(),Nn("li",{key:C.text,class:Jn([r.navItemClass,"lg:tw-ml-4"])},[C.buttonClass?(ln(),Zr(f,{key:0,"additional-class-names":C.buttonClass,"display-block":!0,to:C.to,type:C.type},{default:Dr(()=>[Rr(is(C.text),1)]),_:2},1032,["additional-class-names","to","type"])):(ln(),Zr(c,{key:1,class:Jn([r.navItemAnchorClass,r.getNavItemAnchorActiveClass(C)]),external:C.external,target:C.target,to:C.to,onClick:F=>r.handleUserLinkClick(F,C)},{default:Dr(()=>[C.icon?(ln(),Zr(i,{key:0,class:Jn(r.navItemIconClass),icon:C.icon},null,8,["icon"])):fi("",!0),Rr(" "+is(C.text),1)]),_:2},1032,["class","external","target","to","onClick"]))],2))),128))],2))),128)),t[2]||(t[2]=Rr()),Un(g,{"additional-dropdown-class":"tw-order-4 tw-top-8","card-props":{cardBackgroundColor:"",cardClassNames:"brand-color",hasBodyPaddingSmall:!0},position:r.accountDropdownPosition,"show-menu":r.showAccountDropdown,style:{"--dropdown-menu-show-menu-min-height":"2rem"},onClose:r.handleAccountDropdownClose},{menu:Dr(()=>[qn("ul",null,[(ln(),Nn(ei,null,So(r.dropdownLinks,w=>qn("li",{key:w.text,class:Jn(["tw-w-64 first:tw-border-b first:tw-pb-1","text-light-color hover:tw-text-white",r.$style.accountDropdownListItem])},[Un(c,{class:"tw-block tw-py-2 tw-cursor-pointer hover:tw-no-underline",external:w.external,to:w.to,onClick:A=>r.handleDropdownLinkClick(A,w)},{default:Dr(()=>[w.icon?(ln(),Zr(i,{key:0,class:"tw-inline-block tw-w-6 tw-h-4 tw-mr-1.5 tw-fill-current",icon:w.icon},null,8,["icon"])):fi("",!0),Rr(" "+is(w.text),1)]),_:2},1032,["external","to","onClick"])],2)),64))])]),_:1},8,["position","show-menu"])]),_:1},8,["class"])}const Ilt={$style:xlt},Plt=Qo(Elt,[["render",Clt],["__cssModules",Ilt],["__file","SiteHeader.vue"]]),Olt={xmlns:"http://www.w3.org/2000/svg",width:"119.664",height:"40"};function Dlt(e,t){return ln(),Nn("svg",Olt,[...t[0]||(t[0]=[q6('<path d="M110.135 0H9.535Q8.986 0 8.44.002q-.457.004-.919.013A13 13 0 0 0 5.517.19a6.7 6.7 0 0 0-1.9.627 6.4 6.4 0 0 0-1.62 1.18A6.3 6.3 0 0 0 .82 3.617a6.6 6.6 0 0 0-.625 1.903 13 13 0 0 0-.179 2.002c-.01.307-.01.615-.015.921V31.56c.005.31.006.61.015.921a13 13 0 0 0 .18 2.002 6.6 6.6 0 0 0 .624 1.905A6.2 6.2 0 0 0 1.998 38a6.3 6.3 0 0 0 1.618 1.179 6.7 6.7 0 0 0 1.901.63 13.5 13.5 0 0 0 2.004.177c.31.007.613.011.919.011.366.002.728.002 1.095.002h100.6c.36 0 .724 0 1.084-.002.304 0 .617-.004.922-.01a13 13 0 0 0 2-.178 6.8 6.8 0 0 0 1.908-.63A6.3 6.3 0 0 0 117.666 38a6.4 6.4 0 0 0 1.182-1.614 6.6 6.6 0 0 0 .619-1.905 13.5 13.5 0 0 0 .185-2.002c.004-.31.004-.61.004-.921.008-.364.008-.725.008-1.094V9.536q.002-.549-.008-1.092.001-.46-.004-.92a13.5 13.5 0 0 0-.185-2.003 6.6 6.6 0 0 0-.62-1.903 6.47 6.47 0 0 0-2.798-2.8 6.8 6.8 0 0 0-1.908-.627 13 13 0 0 0-2-.176c-.305-.005-.618-.011-.922-.013-.36-.002-.725-.002-1.084-.002Z" style="fill:#a6a6a6;"></path><path d="M8.445 39.125c-.305 0-.602-.004-.904-.01a13 13 0 0 1-1.87-.164 5.9 5.9 0 0 1-1.656-.548 5.4 5.4 0 0 1-1.397-1.016 5.3 5.3 0 0 1-1.02-1.397 5.7 5.7 0 0 1-.544-1.657 12.4 12.4 0 0 1-.166-1.875c-.007-.21-.015-.913-.015-.913v-23.1s.009-.692.015-.895a12.4 12.4 0 0 1 .165-1.872 5.8 5.8 0 0 1 .544-1.662 5.4 5.4 0 0 1 1.015-1.398 5.6 5.6 0 0 1 1.402-1.023 5.8 5.8 0 0 1 1.653-.544A12.6 12.6 0 0 1 7.543.887l.902-.012h102.769l.913.013a12.4 12.4 0 0 1 1.858.162 6 6 0 0 1 1.671.548 5.6 5.6 0 0 1 2.415 2.42 5.8 5.8 0 0 1 .535 1.649 13 13 0 0 1 .174 1.887c.003.283.003.588.003.89.008.375.008.732.008 1.092v20.929c0 .363 0 .718-.008 1.075 0 .325 0 .623-.004.93a13 13 0 0 1-.17 1.853 5.7 5.7 0 0 1-.54 1.67 5.5 5.5 0 0 1-1.016 1.386 5.4 5.4 0 0 1-1.4 1.022 5.9 5.9 0 0 1-1.668.55 12.5 12.5 0 0 1-1.869.163c-.293.007-.6.011-.897.011l-1.084.002Z"></path><g data-name="&lt;Group&gt;"><g data-name="&lt;Group&gt;"><path d="M24.769 20.3a4.95 4.95 0 0 1 2.356-4.151 5.07 5.07 0 0 0-3.99-2.158c-1.68-.176-3.308 1.005-4.164 1.005-.872 0-2.19-.988-3.608-.958a5.32 5.32 0 0 0-4.473 2.728c-1.934 3.348-.491 8.269 1.361 10.976.927 1.325 2.01 2.805 3.428 2.753 1.387-.058 1.905-.885 3.58-.885 1.658 0 2.144.885 3.59.852 1.489-.025 2.426-1.332 3.32-2.67a11 11 0 0 0 1.52-3.092 4.78 4.78 0 0 1-2.92-4.4M22.037 12.21a4.87 4.87 0 0 0 1.115-3.49 4.96 4.96 0 0 0-3.208 1.66A4.64 4.64 0 0 0 18.8 13.74a4.1 4.1 0 0 0 3.237-1.53" data-name="&lt;Path&gt;" style="fill:#fff;"></path></g><path d="M42.302 27.14H37.57l-1.137 3.356h-2.005l4.484-12.418h2.083l4.483 12.418h-2.039Zm-4.243-1.55h3.752l-1.85-5.446h-.051ZM55.16 25.97c0 2.813-1.506 4.62-3.779 4.62a3.07 3.07 0 0 1-2.848-1.583h-.043v4.484H46.63V21.442h1.8v1.506h.033a3.21 3.21 0 0 1 2.883-1.6c2.298 0 3.813 1.816 3.813 4.622m-1.91 0c0-1.833-.948-3.038-2.393-3.038-1.42 0-2.375 1.23-2.375 3.038 0 1.824.955 3.046 2.375 3.046 1.445 0 2.393-1.197 2.393-3.046M65.125 25.97c0 2.813-1.506 4.62-3.779 4.62a3.07 3.07 0 0 1-2.848-1.583h-.043v4.484h-1.859V21.442h1.799v1.506h.034a3.21 3.21 0 0 1 2.883-1.6c2.298 0 3.813 1.816 3.813 4.622m-1.91 0c0-1.833-.948-3.038-2.393-3.038-1.42 0-2.375 1.23-2.375 3.038 0 1.824.955 3.046 2.375 3.046 1.445 0 2.392-1.197 2.392-3.046M71.71 27.036c.138 1.232 1.334 2.04 2.97 2.04 1.566 0 2.693-.808 2.693-1.919 0-.964-.68-1.54-2.29-1.936l-1.609-.388c-2.28-.55-3.339-1.617-3.339-3.348 0-2.142 1.867-3.614 4.519-3.614 2.624 0 4.423 1.472 4.483 3.614h-1.876c-.112-1.239-1.136-1.987-2.634-1.987s-2.521.757-2.521 1.858c0 .878.654 1.395 2.255 1.79l1.368.336c2.548.603 3.606 1.626 3.606 3.443 0 2.323-1.85 3.778-4.793 3.778-2.754 0-4.614-1.42-4.734-3.667ZM83.346 19.3v2.142h1.722v1.472h-1.722v4.991c0 .776.345 1.137 1.102 1.137a6 6 0 0 0 .611-.043v1.463a5 5 0 0 1-1.032.086c-1.833 0-2.548-.689-2.548-2.445v-5.189h-1.316v-1.472h1.316V19.3ZM86.065 25.97c0-2.849 1.678-4.639 4.294-4.639 2.625 0 4.295 1.79 4.295 4.639 0 2.856-1.661 4.638-4.295 4.638s-4.294-1.782-4.294-4.638m6.695 0c0-1.954-.895-3.108-2.401-3.108s-2.4 1.162-2.4 3.108c0 1.962.894 3.106 2.4 3.106s2.401-1.144 2.401-3.106M96.186 21.442h1.773v1.541h.043a2.16 2.16 0 0 1 2.177-1.635 3 3 0 0 1 .637.069v1.738a2.6 2.6 0 0 0-.835-.112 1.873 1.873 0 0 0-1.937 2.083v5.37h-1.858ZM109.384 27.837c-.25 1.643-1.85 2.771-3.898 2.771-2.634 0-4.269-1.764-4.269-4.595 0-2.84 1.644-4.682 4.19-4.682 2.506 0 4.08 1.72 4.08 4.466v.637h-6.394v.112a2.358 2.358 0 0 0 2.436 2.564 2.05 2.05 0 0 0 2.09-1.273Zm-6.282-2.702h4.526a2.177 2.177 0 0 0-2.22-2.298 2.29 2.29 0 0 0-2.306 2.298" style="fill:#fff;"></path></g><g data-name="&lt;Group&gt;"><path d="M37.826 8.731a2.64 2.64 0 0 1 2.808 2.965c0 1.906-1.03 3.002-2.808 3.002h-2.155V8.73Zm-1.228 5.123h1.125a1.876 1.876 0 0 0 1.967-2.146 1.88 1.88 0 0 0-1.967-2.134h-1.125ZM41.68 12.444a2.133 2.133 0 1 1 4.248 0 2.134 2.134 0 1 1-4.247 0m3.334 0c0-.976-.439-1.547-1.208-1.547-.773 0-1.207.571-1.207 1.547 0 .984.434 1.55 1.207 1.55.77 0 1.208-.57 1.208-1.55M51.573 14.698h-.922l-.93-3.317h-.07l-.927 3.317h-.913l-1.242-4.503h.902l.806 3.436h.067l.926-3.436h.852l.926 3.436h.07l.803-3.436h.889ZM53.854 10.195h.855v.715h.066a1.35 1.35 0 0 1 1.344-.802 1.465 1.465 0 0 1 1.559 1.675v2.915h-.889v-2.692c0-.724-.314-1.084-.972-1.084a1.033 1.033 0 0 0-1.075 1.141v2.635h-.888ZM59.094 8.437h.888v6.26h-.888ZM61.218 12.444a2.133 2.133 0 1 1 4.247 0 2.134 2.134 0 1 1-4.247 0m3.333 0c0-.976-.439-1.547-1.208-1.547-.773 0-1.207.571-1.207 1.547 0 .984.434 1.55 1.207 1.55.77 0 1.208-.57 1.208-1.55M66.4 13.424c0-.81.604-1.278 1.676-1.344l1.22-.07v-.389c0-.475-.315-.744-.922-.744-.497 0-.84.182-.939.5h-.86c.09-.773.818-1.27 1.84-1.27 1.128 0 1.765.563 1.765 1.514v3.077h-.855v-.633h-.07a1.52 1.52 0 0 1-1.353.707 1.36 1.36 0 0 1-1.501-1.348m2.895-.384v-.377l-1.1.07c-.62.042-.9.253-.9.65 0 .405.351.64.834.64a1.06 1.06 0 0 0 1.166-.983M71.348 12.444c0-1.423.732-2.324 1.87-2.324a1.48 1.48 0 0 1 1.38.79h.067V8.437h.888v6.26h-.851v-.71h-.07a1.56 1.56 0 0 1-1.415.785c-1.145 0-1.869-.901-1.869-2.328m.918 0c0 .955.45 1.53 1.203 1.53.75 0 1.212-.583 1.212-1.526 0-.938-.468-1.53-1.212-1.53-.748 0-1.203.58-1.203 1.526M79.23 12.444a2.133 2.133 0 1 1 4.247 0 2.134 2.134 0 1 1-4.247 0m3.333 0c0-.976-.438-1.547-1.208-1.547-.772 0-1.207.571-1.207 1.547 0 .984.435 1.55 1.207 1.55.77 0 1.208-.57 1.208-1.55M84.67 10.195h.855v.715h.066a1.35 1.35 0 0 1 1.344-.802 1.465 1.465 0 0 1 1.559 1.675v2.915h-.889v-2.692c0-.724-.314-1.084-.972-1.084a1.033 1.033 0 0 0-1.075 1.141v2.635h-.889ZM93.515 9.074v1.141h.976v.749h-.976v2.315c0 .472.194.679.637.679a3 3 0 0 0 .339-.021v.74a3 3 0 0 1-.484.046c-.988 0-1.381-.348-1.381-1.216v-2.543h-.715v-.749h.715V9.074ZM95.705 8.437h.88v2.481h.07a1.39 1.39 0 0 1 1.374-.806 1.483 1.483 0 0 1 1.55 1.679v2.907h-.889V12.01c0-.72-.335-1.084-.963-1.084a1.052 1.052 0 0 0-1.134 1.142v2.63h-.888ZM104.761 13.482a1.83 1.83 0 0 1-1.95 1.303 2.045 2.045 0 0 1-2.081-2.325 2.077 2.077 0 0 1 2.076-2.352c1.253 0 2.009.856 2.009 2.27v.31h-3.18v.05a1.19 1.19 0 0 0 1.2 1.29 1.08 1.08 0 0 0 1.07-.546Zm-3.126-1.451h2.275a1.086 1.086 0 0 0-1.109-1.167 1.15 1.15 0 0 0-1.166 1.167" style="fill:#fff;"></path></g>',4)])])}const Rlt={render:Dlt},klt={xmlns:"http://www.w3.org/2000/svg",width:"119.664",height:"40"};function Llt(e,t){return ln(),Nn("svg",klt,[...t[0]||(t[0]=[q6('<path d="M110.135 0H9.535Q8.986 0 8.44.002q-.457.004-.919.013A13 13 0 0 0 5.517.19a6.7 6.7 0 0 0-1.9.627 6.4 6.4 0 0 0-1.62 1.18A6.3 6.3 0 0 0 .82 3.617a6.6 6.6 0 0 0-.625 1.903 13 13 0 0 0-.179 2.002c-.01.307-.01.615-.015.921V31.56c.005.31.006.61.015.921a13 13 0 0 0 .18 2.002 6.6 6.6 0 0 0 .624 1.905A6.2 6.2 0 0 0 1.998 38a6.3 6.3 0 0 0 1.618 1.179 6.7 6.7 0 0 0 1.901.63 13.5 13.5 0 0 0 2.004.177c.31.007.613.011.919.011.366.002.728.002 1.095.002h100.6c.36 0 .724 0 1.084-.002.304 0 .617-.004.922-.01a13 13 0 0 0 2-.178 6.8 6.8 0 0 0 1.908-.63A6.3 6.3 0 0 0 117.666 38a6.4 6.4 0 0 0 1.182-1.614 6.6 6.6 0 0 0 .619-1.905 13.5 13.5 0 0 0 .185-2.002c.004-.31.004-.61.004-.921.008-.364.008-.725.008-1.094V9.536q.002-.549-.008-1.092.001-.46-.004-.92a13.5 13.5 0 0 0-.185-2.003 6.6 6.6 0 0 0-.62-1.903 6.47 6.47 0 0 0-2.798-2.8 6.8 6.8 0 0 0-1.908-.627 13 13 0 0 0-2-.176c-.305-.005-.618-.011-.922-.013-.36-.002-.725-.002-1.084-.002Z"></path><path d="M8.445 39.125c-.305 0-.602-.004-.904-.01a13 13 0 0 1-1.87-.164 5.9 5.9 0 0 1-1.656-.548 5.4 5.4 0 0 1-1.397-1.016 5.3 5.3 0 0 1-1.02-1.397 5.7 5.7 0 0 1-.544-1.657 12.4 12.4 0 0 1-.166-1.875c-.007-.21-.015-.913-.015-.913v-23.1s.009-.692.015-.895a12.4 12.4 0 0 1 .165-1.872 5.8 5.8 0 0 1 .544-1.662 5.4 5.4 0 0 1 1.015-1.398 5.6 5.6 0 0 1 1.402-1.023 5.8 5.8 0 0 1 1.653-.544A12.6 12.6 0 0 1 7.543.887l.902-.012h102.769l.913.013a12.4 12.4 0 0 1 1.858.162 6 6 0 0 1 1.671.548 5.6 5.6 0 0 1 2.415 2.42 5.8 5.8 0 0 1 .535 1.649 13 13 0 0 1 .174 1.887c.003.283.003.588.003.89.008.375.008.732.008 1.092v20.929c0 .363 0 .718-.008 1.075 0 .325 0 .623-.004.93a13 13 0 0 1-.17 1.853 5.7 5.7 0 0 1-.54 1.67 5.5 5.5 0 0 1-1.016 1.386 5.4 5.4 0 0 1-1.4 1.022 5.9 5.9 0 0 1-1.668.55 12.5 12.5 0 0 1-1.869.163c-.293.007-.6.011-.897.011l-1.084.002Z" style="fill:#fff;"></path><g data-name="&lt;Group&gt;"><g data-name="&lt;Group&gt;"><path d="M24.997 19.89a5.15 5.15 0 0 1 2.45-4.318 5.27 5.27 0 0 0-4.15-2.244c-1.746-.183-3.44 1.045-4.33 1.045-.906 0-2.276-1.027-3.752-.997a5.53 5.53 0 0 0-4.65 2.837c-2.012 3.482-.512 8.6 1.415 11.414.963 1.378 2.09 2.918 3.564 2.863 1.442-.06 1.981-.92 3.722-.92 1.725 0 2.23.92 3.734.886 1.548-.026 2.523-1.385 3.453-2.776a11.4 11.4 0 0 0 1.58-3.216 4.97 4.97 0 0 1-3.036-4.575M22.156 11.477a5.07 5.07 0 0 0 1.16-3.63 5.16 5.16 0 0 0-3.336 1.726 4.82 4.82 0 0 0-1.19 3.495 4.26 4.26 0 0 0 3.366-1.591" data-name="&lt;Path&gt;"></path></g><path d="M42.302 27.14h-4.734l-1.136 3.356h-2.005l4.483-12.418h2.083l4.484 12.418h-2.04Zm-4.243-1.55h3.752l-1.85-5.446h-.052ZM55.16 25.97c0 2.813-1.507 4.62-3.78 4.62a3.07 3.07 0 0 1-2.848-1.583h-.043v4.484h-1.858V21.442h1.799v1.506h.034a3.21 3.21 0 0 1 2.883-1.6c2.298 0 3.812 1.816 3.812 4.622m-1.911 0c0-1.833-.947-3.038-2.393-3.038-1.42 0-2.375 1.23-2.375 3.038 0 1.824.956 3.046 2.375 3.046 1.446 0 2.393-1.197 2.393-3.046M65.125 25.97c0 2.813-1.507 4.62-3.78 4.62a3.07 3.07 0 0 1-2.848-1.583h-.043v4.484h-1.858V21.442h1.799v1.506h.034a3.21 3.21 0 0 1 2.883-1.6c2.297 0 3.813 1.816 3.813 4.622m-1.911 0c0-1.833-.947-3.038-2.393-3.038-1.42 0-2.375 1.23-2.375 3.038 0 1.824.955 3.046 2.375 3.046 1.446 0 2.393-1.197 2.393-3.046M71.71 27.036c.137 1.232 1.333 2.04 2.968 2.04 1.567 0 2.694-.808 2.694-1.919 0-.964-.68-1.54-2.29-1.936l-1.609-.388c-2.28-.55-3.339-1.617-3.339-3.348 0-2.142 1.867-3.614 4.518-3.614 2.625 0 4.424 1.472 4.484 3.614H77.26c-.112-1.239-1.136-1.987-2.634-1.987s-2.521.757-2.521 1.858c0 .878.654 1.395 2.255 1.79l1.368.336c2.548.603 3.605 1.626 3.605 3.443 0 2.323-1.85 3.778-4.793 3.778-2.753 0-4.613-1.42-4.733-3.667ZM83.346 19.3v2.142h1.722v1.472h-1.722v4.991c0 .776.345 1.137 1.102 1.137a6 6 0 0 0 .611-.043v1.463a5 5 0 0 1-1.032.086c-1.833 0-2.548-.689-2.548-2.445v-5.189h-1.316v-1.472h1.316V19.3ZM86.064 25.97c0-2.849 1.678-4.639 4.294-4.639 2.625 0 4.295 1.79 4.295 4.639 0 2.856-1.661 4.638-4.295 4.638s-4.294-1.782-4.294-4.638m6.695 0c0-1.954-.895-3.108-2.401-3.108s-2.401 1.162-2.401 3.108c0 1.962.895 3.106 2.4 3.106s2.402-1.144 2.402-3.106M96.185 21.442h1.773v1.541H98a2.16 2.16 0 0 1 2.177-1.635 3 3 0 0 1 .637.069v1.738a2.6 2.6 0 0 0-.835-.112 1.873 1.873 0 0 0-1.937 2.083v5.37h-1.858ZM109.383 27.837c-.25 1.643-1.85 2.771-3.898 2.771-2.634 0-4.269-1.764-4.269-4.595 0-2.84 1.644-4.682 4.19-4.682 2.506 0 4.08 1.72 4.08 4.466v.637h-6.394v.112a2.358 2.358 0 0 0 2.436 2.564 2.05 2.05 0 0 0 2.09-1.273Zm-6.282-2.702h4.526a2.177 2.177 0 0 0-2.22-2.298 2.29 2.29 0 0 0-2.306 2.298"></path></g><g data-name="&lt;Group&gt;"><path d="M37.826 8.731a2.64 2.64 0 0 1 2.808 2.965c0 1.906-1.03 3.002-2.808 3.002h-2.155V8.73Zm-1.228 5.123h1.125a1.876 1.876 0 0 0 1.967-2.146 1.88 1.88 0 0 0-1.967-2.134h-1.125ZM41.68 12.444a2.133 2.133 0 1 1 4.248 0 2.134 2.134 0 1 1-4.247 0m3.334 0c0-.976-.439-1.547-1.208-1.547-.773 0-1.207.571-1.207 1.547 0 .984.434 1.55 1.207 1.55.77 0 1.208-.57 1.208-1.55M51.573 14.698h-.922l-.93-3.317h-.07l-.927 3.317h-.913l-1.242-4.503h.902l.806 3.436h.067l.926-3.436h.852l.926 3.436h.07l.803-3.436h.889ZM53.854 10.195h.855v.715h.066a1.35 1.35 0 0 1 1.344-.802 1.465 1.465 0 0 1 1.559 1.675v2.915h-.889v-2.692c0-.724-.314-1.084-.972-1.084a1.033 1.033 0 0 0-1.075 1.141v2.635h-.888ZM59.094 8.437h.888v6.26h-.888ZM61.218 12.444a2.133 2.133 0 1 1 4.247 0 2.134 2.134 0 1 1-4.247 0m3.333 0c0-.976-.439-1.547-1.208-1.547-.773 0-1.207.571-1.207 1.547 0 .984.434 1.55 1.207 1.55.77 0 1.208-.57 1.208-1.55M66.4 13.424c0-.81.604-1.278 1.676-1.344l1.22-.07v-.389c0-.475-.315-.744-.922-.744-.497 0-.84.182-.939.5h-.86c.09-.773.818-1.27 1.84-1.27 1.128 0 1.765.563 1.765 1.514v3.077h-.855v-.633h-.07a1.52 1.52 0 0 1-1.353.707 1.36 1.36 0 0 1-1.501-1.348m2.895-.384v-.377l-1.1.07c-.62.042-.9.253-.9.65 0 .405.351.64.834.64a1.06 1.06 0 0 0 1.166-.983M71.348 12.444c0-1.423.732-2.324 1.87-2.324a1.48 1.48 0 0 1 1.38.79h.067V8.437h.888v6.26h-.851v-.71h-.07a1.56 1.56 0 0 1-1.415.785c-1.145 0-1.869-.901-1.869-2.328m.918 0c0 .955.45 1.53 1.203 1.53.75 0 1.212-.583 1.212-1.526 0-.938-.468-1.53-1.212-1.53-.748 0-1.203.58-1.203 1.526M79.23 12.444a2.133 2.133 0 1 1 4.247 0 2.134 2.134 0 1 1-4.247 0m3.333 0c0-.976-.438-1.547-1.208-1.547-.772 0-1.207.571-1.207 1.547 0 .984.435 1.55 1.207 1.55.77 0 1.208-.57 1.208-1.55M84.67 10.195h.855v.715h.066a1.35 1.35 0 0 1 1.344-.802 1.465 1.465 0 0 1 1.559 1.675v2.915h-.889v-2.692c0-.724-.314-1.084-.972-1.084a1.033 1.033 0 0 0-1.075 1.141v2.635h-.889ZM93.515 9.074v1.141h.976v.749h-.976v2.315c0 .472.194.679.637.679a3 3 0 0 0 .339-.021v.74a3 3 0 0 1-.484.046c-.988 0-1.381-.348-1.381-1.216v-2.543h-.715v-.749h.715V9.074ZM95.705 8.437h.88v2.481h.07a1.39 1.39 0 0 1 1.374-.806 1.483 1.483 0 0 1 1.55 1.679v2.907h-.889V12.01c0-.72-.335-1.084-.963-1.084a1.052 1.052 0 0 0-1.134 1.142v2.63h-.888ZM104.761 13.482a1.83 1.83 0 0 1-1.95 1.303 2.045 2.045 0 0 1-2.081-2.325 2.077 2.077 0 0 1 2.076-2.352c1.253 0 2.009.856 2.009 2.27v.31h-3.18v.05a1.19 1.19 0 0 0 1.2 1.29 1.08 1.08 0 0 0 1.07-.546Zm-3.126-1.451h2.275a1.086 1.086 0 0 0-1.109-1.167 1.15 1.15 0 0 0-1.166 1.167"></path></g>',4)])])}const Nlt={render:Llt},Flt=""+new URL("GetItOnGooglePlay.XvR5LaEp.png",import.meta.url).href,zlt="DownloadAppButtons__appStoreLightModeButton",Blt="DownloadAppButtons__appStoreDarkModeButton",$lt={appStoreLightModeButton:zlt,appStoreDarkModeButton:Blt},Vlt="https://apps.apple.com/us/app/opensnow-ski-forecasts-reports/id780890907?ls=1",jlt="https://play.google.com/store/apps/details?id=com.opensnow.android",Ult={__name:"DownloadAppButtons",props:{alwaysUseAppStoreDarkButton:{type:Boolean,default:!1},containerClass:{type:String,default:"tw-my-6 tw-text-center"}},setup(e,{expose:t}){t();const n=e,r=j0(),s=Ct(()=>n.alwaysUseAppStoreDarkButton?"tw-inline-block tw-mr-1":["tw-mr-1",r.appStoreLightModeButton]),o=Ct(()=>n.alwaysUseAppStoreDarkButton?"tw-hidden":["tw-mr-1",r.appStoreDarkModeButton]),c={props:n,appStoreUrl:Vlt,playStoreUrl:jlt,$style:r,appStoreDarkClass:s,appStoreLightClass:o,get AppStoreDark(){return Rlt},get AppStoreLight(){return Nlt}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}};function Hlt(e,t,n,r,s,o){return ln(),Nn("div",{class:Jn(n.containerClass)},[qn("a",{class:"hover:tw-no-underline",href:r.appStoreUrl,target:"_blank"},[Un(r.AppStoreDark,{class:Jn(r.appStoreDarkClass)},null,8,["class"]),t[0]||(t[0]=Rr()),Un(r.AppStoreLight,{class:Jn(r.appStoreLightClass)},null,8,["class"])]),t[2]||(t[2]=Rr()),qn("a",{href:r.playStoreUrl,target:"_blank"},[...t[1]||(t[1]=[qn("img",{alt:"Get it on Google Play",class:"tw-inline-block tw-h-10 tw-ml-1",src:Flt,loading:"lazy"},null,-1)])])],2)}const Wlt={$style:$lt},Glt=Qo(Ult,[["render",Hlt],["__cssModules",Wlt],["__file","DownloadAppButtons.vue"]]),Ylt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAC5NJREFUeNrsHe11nDgQ8vL/6OC4CrIdBFcQXMHhCoIrOFzB+irAVwFOBawrwK6AvQrWVwGHYpEQjJA0Gn0B8x7Pa7MWYr4/pFEQ7LDDDjvssMMOW4Rw7S/YdV1CPx76Kxrd+jT6/bW/Xkb3yO/P3xEUhqedAfwgdNz/SChhDzMEV4GBIZ4po5x6xjjvDGCX4IS4aX99poSPDU+BMADRDk/99dgzxOtuUAwQvb/y/mo696Chc4t2SuETPu2vqvMHyFzT3QSoq/isv75aUO+YZuLv/npw1USEjhI+p4Rfizp9pYxw7xojhI4Rv1gZ4WcZoWeCYmeAiY3vfxw9VvUQ03DbM8LjphmAxu4lDeNMwDOVwiWIaA7BBJAw8sZmTiG0SHxi5//SpO6H+Jwg9gzJ5lHmbA2Zhbt+jvebYADq5FXIUk8k+1vwlqE7cYgqamaILzIXyhG1/UKZF5tpr1edUCJ5+f66ICdeYlGJRnp2St9DB1xGtYvVET9HQlDZXwcg8yk/n441l4nM6NwwmCxfG/FLBMIXKmlWqgFUoaSEnkI7NnF0rqqMUK6B8AQZtU3Cz2gBkqZtgfPJGIQ9Mt5dlRFqb2sLFAGNorRFmueXUCJVAoQi94+MewfOc0pFXyfaEvEbW44QNRMpZYp6whQsTdZKaJ/GNSYIdRC//1EDkyl3JtOkNILIOF/7PVheb0Dy+7cSzyyAISQJda+cDhMVJN94+IPkFHbAiKRapTkAOnxWHB2ksLAFPjtTcQwx8fABM9QDZPdIndyWWjsH/LqAiFo2+X8EEudCRGCSJ3dg3jH17FVC1RgiLKtJFgFVaRY4CMSeU/UswxQlgOmwILGNsAiQ6HCS+BwGzznJoxhJ+iuA8xzZRE69ZuJLaLoSQfproINY20JI7qXNUnvno4oW4Eh/7A1uAaVV/wsbfJNXKkh/oegoXiDOqCnVXxtU0THnfqTZFMQA6W98wvOwScMpJ2WSfcw42clMoyk4LmgOackFONmpCQZoXQpTGBKZce6nCKagFWV4WlwC2W7JMLvVjexCYjKFRbt8GXL0DNt7geTwBQmTz3z3oqKyncC7pDpqDDtnxRKRefeRn9sK5P2lTaNEkU2P2ZXkwsQwAyyq5AXmVa6uMRy1w+h+hYEfSVNQ2JR+KyHfQgKlofPPdJRYGbgpRvfRiCMRGuJqAYnEhNXU5ELY1HDUaIVQQ7jMZPUSTOGQ1AI5JmJblxw/aLoWI50ryATV6G86xkeLCEKBB5OQSURCSG39D9tLliiiWbH+Q/C2FU0kDDyNPp/761/6edhfeJ7u6et+9in60TKG2vtobiNoN9/A6vPoK3GgtmH2WnkDqkSFyqr0S6SpZZxZ0WVaR15EMfJDqg5vdxQPKlVkRl6UJeUjllYTwlOEMA4bFunCWxImmjZ1rUvWmXNfV+EktvDMAImGSlx7cEj6eSGrDhVc82oM1DSVGrUPKCn3cQmRgdja/ude+p8dkv48YPcceKTaQcZc/egaGvzaUZQ4ia/TdyeO3dwWdeow3kxwOzh5v41wjd2ggkQPkbSGlliZkjsk/THHWTvwdiRBs5h07GYc8o3CzhaqJek7JZ3a7uoM8mDRrFPsEANUnGxgbSgbWM84oxi1B+h+ghLysFbVvjiSBLpQ6Ux0RDCM3VBHxpx0FaBwy8QSS5cLhxig4VQEW00VwXIpHJxxODEKUJB9BbEOVZM4QvxsKS5fsJ86VHIrQKxSo7lT9wM4q19/gONhXyZyX0PGsRA0TRnCe8skl44yg4ssRqwdYYBkiQi8JWMKz61FVS3juxjmR4YJapmBL77Y/xkJL2XuIztiJeP7qS4nWqJKeJEZ1KtdPlQd5yyfhHcfgHDpjOhCVHVEmFOGZrIlFh0kwQZhQeXWCkRKFOeERzPRwTZK/EIFuQtaoEUIDdEYIN8ZQFr114JjZCheOpwB3qXt58rBIpz4vDHiE8lZItCdyDhhGD4E7FJ1ThkEmloXock72n4EPux1zZIevFXjPgc/j59bgpNkN3LCLKxIZCgiTY+pE6m4gmjyMdgwdD+PnhvOGoQ4Y3cyXyZaoH/uVw5jRXQuyWiu35mNapAnqk20IKXyJQlkOJOGFsd3OB3KjoDkXYXlA6wBRNS7tE3V/H9jyDCe+yHYLmD4MTEwnfsZ4dknDCR83JKDN7HFzz3xrvuPXwL+gs3DguSmgKgo5Xjz3wSY9wGD6ecY4CUQ2zixBiYgawQfJ7Y0HpmHIRKIKGHmpJ0wUCEZZcQM4ozXA44jgBPSK7/sUcD7KGDw/sfEZtnPxxnhIAmiWOLkrz8Zf38c2fVf/BMaAQxh4VOAuBAXygCRxwTPRsSWSbqQ794ytCP5m+ipXynDnvNwOjBFNgkLB5MRYSFplangDtbU8l3oxagHNIJzYC21OxjaIyCUCl5rmveAICWDpJ/nzABQ+h8CcwdVPqOFgR6Wg88IY8T0upP07Fn2/5WalS/WHGEGcUVU/I22dKQ+M5AE4uneLwzJ/H5CCM2GjsciNYErzvOneL2jGoW1Wofc+08wr8B9r35+oSiivFkSppFZDktr7Gfu1wJjvlsDsFAiriTmKrKIV2pJWL2FeoACYqfdx4QWeE6WiA9L1ivGgtHYGr18WhZuKXI4KowZD6t/FvovFJJjgpeFfxDNGK3EEZTNFL4qOHysMc+jnbopw1m9lyC+KA1eZLm027ofMMJHq6MnAkP9Z5JjiO4VjDFe2tnNobqjBw1r+CIMv0pwTUMLmaB328M1M0GF6QQzmOogOYaopmZuhllKBD1JZMe2ALczSRwVmP7/A6DAI4r7JywVtVkzQHEynB7eIvkAx1GPoQjw/6JL2iLoBL1rEgV8z7Tz7IRuiQLSoqni1QL+EZzPV5+JH7x1Qj16NnVRnH9TQY6XjSIlpegi0ujRkwQVnvrnxKre5wS6+TMGLj5ENRKxf4XxsHSNWmDBv2lWJP0p1kPbNWkBgRzHcQXS32I+1PqBETQEq5DGMSc99qQ/t/XgUsOLHzA6k0huyXLOH+hsHRkjqXpQu4fMMB+ouVInf+KGU2seOpuHRgG0QIP43Ea1taviRtDCEQZorDvjneEDDDkqr5QYp+7UILFMfHcO7OwMHR0r6KxlikzUWZcqXNXfmpiQ9sOjJfLcvMOXsw4PagvEd+/waIBKrTW/dIMgOeCdNb7iWXVisSSRZOx1o2qjgR6/KBwM4biU1LSxafWUY0sP0F6XiB6/kJ3V7Q/owK0LKmrRaetgR6LUGjx+M0UWPL/FXq4CuOM2Q7LX7yQRyeO3JnUA4tsvwAGJlyn4E7PZQGSPHzQHw8S3np9QVd+5gr1ODXj8QhEIhgRC8edapaoEqnGlF9fs8WsvfmE4vi4xQW0S2QY8fmXnluM/QfDl7qZczQRpZpy+qnMDZHfzJkCthWJyfGSCywzxj51bINonqMASgK0wgQsevygcOVLfrJ74GpggAxaKbEE6gweV/IRW4mvrFUz3wJOeOSeFYcgY44YKxM663pmkpLmNiNbmSYk2A45FcHclffK3DJ1MhYgKSBgY4e+A3bjJNTgHby3pVCSXbBa90T3R0BRGaPzu2/YrW3DbE//exINCk29FU5dVsJ0zCSCa7hqxObRbDDA4RZQJkp3e7+z9tU57b9QJXHIOaUPF22AjZxMISD1R+VemiW9FA0y0AfHqyw1rAyL1NxKt5v3XABNtcKba4DrA6eXrC5ypur+ySXzrGmBGI5C4+euKncTv4WxP9MKVCYWuYYg6ifnKGGHIY9zbsPNeMcCEETLKCLHHqp4Q/sE1wnsFdDNK1fkDVedJuxnfGCGiy6caB4neDMvcfMJp6DMzBG+NEofDEkybiTMN40gTxkdfVXy4Iu0QU0YYDoLGOCNo7MSNT/M+2Q7fdgYQZ4yEfpwyxKfR76/Br+3UB4IHJvPyO+ywww477LDDDqbgfwEGAOCg3pPkfD11AAAAAElFTkSuQmCC",qlt=Object.freeze(Object.defineProperty({__proto__:null,default:Ylt},Symbol.toStringTag,{value:"Module"})),Xlt=/(^|[/\\])([^/\\]+?)(?=(\.[^.]+)?$)/;function ZX(e){return e.match(Xlt)?.[2]}const Zlt="SiteFooter__siteLogoImage",Klt="SiteFooter__footerLinksRow",Jlt="SiteFooter__footerLinkItem",Qlt={siteLogoImage:Zlt,footerLinksRow:Klt,footerLinkItem:Jlt},ect={__name:"SiteFooter",setup(e,{expose:t}){t();const n=no().public,r=Object.assign({"/assets/img/OpenSnowLogoMarkWhite.png":qlt}),s=Object.fromEntries(Object.entries(r).map(([w,A])=>[ZX(w),A.default])),o=Ct(()=>`${new Date().getFullYear()} ${n.siteName}. Cloudnine Weather, Inc. All Rights Reserved.`),c={appLink:{text:"App",to:"/app"},climateLink:{target:"_blank",text:"Climate",to:"https://climate.stripe.com/LSL8ND"},gettingStartedLink:{target:"_blank",text:"Getting Started",to:"https://support.opensnow.com/getting-started"},privacyPolicyLink:{target:"_blank",text:"Privacy Policy",to:"https://support.opensnow.com/legal/privacy"},shopLink:{target:"_blank",text:"Shop",to:"https://shop.opensnow.com"},supportLink:{target:"_blank",text:"Support",to:"https://support.opensnow.com/"},teamLink:{text:"Team",to:"/team"},termsOfUseLink:{target:"_blank",text:"Terms of Use",to:"https://support.opensnow.com/legal/terms"}},i=Ct(()=>{const w={text:"Subscription",to:"/subscription"},A={text:"What's New",to:"/news/company-updates"},C={target:"_blank",text:"Feature Guides",to:"https://support.opensnow.com/feature-guides"},F={target:"_blank",text:"Flakes Podcast",to:"https://open.spotify.com/show/2hDI6YOg6PLXUKYoOrWV1s?si=dVM_oEi6TfmqlyHmzLEqVw&nd=1"},z={text:"About",to:"/about"},j={target:"_blank",text:"Careers",to:"https://support.opensnow.com/legal/careers"},V={target:"_blank",text:"Contact",to:"https://support.opensnow.com/contact-us/contact"},Y={target:"_blank",text:"Advertise",to:"https://support.opensnow.com/contact-us/advertising-on-opensnow"},te={target:"_blank",text:"Partnership Policy",to:"https://support.opensnow.com/legal/partnerships"};return[[w,c.appLink,A],[c.gettingStartedLink,C,F],[z,c.teamLink,j,V,c.climateLink,c.shopLink,Y],[c.supportLink,c.termsOfUseLink,c.privacyPolicyLink,te]]}),f=Ct(()=>s[`${n.siteName}LogoMarkWhite`]),g=[{style:{backgroundColor:"currentColor",...e0("https://blizzard.opensnow.com/icons/fa/brands/facebook.svg")},url:"https://www.facebook.com/OpenSnow"},{style:{backgroundColor:"currentColor",...e0("https://blizzard.opensnow.com/icons/fa/brands/instagram.svg")},url:"https://www.instagram.com/opensnow/"},{style:{backgroundColor:"currentColor",...e0("https://blizzard.opensnow.com/icons/fa/brands/x-twitter.svg")},url:"https://x.com/OpenSnow"},{style:{backgroundColor:"currentColor",...e0("https://blizzard.opensnow.com/icons/fa/brands/youtube.svg")},url:"https://www.youtube.com/@Open-Snow"}],x={config:n,glob:r,images:s,copyrightMessage:o,links:c,listOfFooterLinks:i,siteLogoImageUrl:f,socialMediaLinks:g,get filename(){return ZX},get getMaskImageStyle(){return e0}};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},tct={class:"brand-color tw-py-8 tw-px-3.5"},nct={class:"tw-text-center"},rct=["alt","src"],ict={class:"tw-flex tw-flex-nowrap tw-justify-center"},sct={class:"tw-flex tw-justify-center tw-my-4"},oct=["href"],act={class:"tw-text-xs tw-p-6 tw-text-center"};function lct(e,t,n,r,s,o){const c=W3,i=Glt;return ln(),Nn("footer",tct,[qn("div",nct,[qn("img",{alt:r.config.siteName,class:Jn([e.$style.siteLogoImage,"tw-inline-block"]),src:r.siteLogoImageUrl,loading:"lazy"},null,10,rct)]),t[0]||(t[0]=Rr()),(ln(!0),Nn(ei,null,So(r.listOfFooterLinks,(f,g)=>(ln(),Nn("div",{key:g,class:Jn([e.$style.footerLinksRow,"tw-mx-auto","tw-my-4"])},[qn("ul",ict,[(ln(!0),Nn(ei,null,So(f,x=>(ln(),Nn("li",{key:x.text,class:Jn([e.$style.footerLinkItem,"tw-inline-block lg:tw-mx-3"])},[Un(c,{target:x.target,to:x.to},{default:Dr(()=>[Rr(is(x.text),1)]),_:2},1032,["target","to"])],2))),128))])],2))),128)),t[1]||(t[1]=Rr()),Un(i,{"always-use-app-store-dark-button":!0}),t[2]||(t[2]=Rr()),qn("ul",sct,[(ln(),Nn(ei,null,So(r.socialMediaLinks,f=>qn("li",{key:f.url,class:"tw-mx-4"},[qn("a",{href:f.url,target:"_blank"},[qn("span",{class:"tw-inline-block tw-w-8 tw-h-8 tw-align-middle",style:Ta(f.style)},null,4)],8,oct)])),64))]),t[3]||(t[3]=Rr()),qn("p",act,`
      `+is(r.copyrightMessage),1)])}const cct={$style:Qlt},uct=Qo(ect,[["render",lct],["__cssModules",cct],["__file","SiteFooter.vue"]]);function dct(e){window[`ga-disable-${e}`]=!0}function hct(e){const t=`ga-disable-${e}`;t in window&&delete window[t]}function $ce(){const e=no().public.gtag,t=EQ(e);let n;n=GA;const r=i=>{const f=[...t];let g=f.find(x=>x.id===i);return g||(i?(g={id:i},f.unshift(g)):g=f[0]),g||console.error("[nuxt-gtag] Missing Google tag ID"),{tag:g,tags:f}},s=i=>{{const{tag:f,tags:g}=r(i);if(!f)return;window.dataLayer||SQ({tags:g}),document.head.querySelector("script[data-gtag]")||iN({script:[{src:j2(e.url,{id:f.id}),"data-gtag":""}]})}};function o(i){{const{tag:f}=r(i);f&&dct(f.id)}}function c(i){{const{tag:f}=r(i);f&&hct(f.id)}}return{gtag:n,initialize:s,disableAnalytics:o,enableAnalytics:c}}const fct=()=>{const e=no().public,t=Tc(),n=_s();return!e.brazeSdkApiKey||!e.brazeSdkEndpoint?(console.log("Braze: Not loaded, missing API key or SDK endpoint"),!1):n.isGuest&&!e.brazeTrackGuests?(console.log("Braze: Not tracking guest users"),!1):n.isGuest&&Tc().path==="/"?(console.log("Braze: Not tracking guest users on home page"),!1):e.brazeDisallowPaths.includes(t.path)?(console.log("Braze: Not tracking users on disallowed paths"),!1):!0},pct=()=>{const{$braze:e}=Wn();return!!e},mct=async()=>{const e=no().public;if(!fct())return;const t=await Pn(()=>import("./DECJMCw4.js"),[],import.meta.url);t.enableSDK();const n=t.initialize(e.brazeSdkApiKey,{allowUserSuppliedJavascript:!0,baseUrl:e.brazeSdkEndpoint,enableLogging:e.isDev});return n?(Wn().provide("braze",t),console.log("Braze: Initialized successfully")):console.log("Braze: Unable to initialize Braze"),n},gct=async()=>{pct()||await mct();const{$braze:e}=Wn();if(!e)return;const t=_s();try{if(!t.isGuest){const n="changedBrazeUser";l0.getItem(n)||(console.log(`Braze: changing user to ${t.user.uuid}`),e.changeUser(t.user.uuid),l0.setItem(n,!0))}e.automaticallyShowInAppMessages(),console.log("Braze: opening session"),e.openSession()}catch{}},Vce=()=>{const{gtagId:e}=no().public;if(!e)return console.log("Gtag: Not loaded, missing gtagId!"),!1;const{enableAnalytics:t,initialize:n}=$ce();return t(e),n(e),console.log("Gtag: Initialized successfully"),!0},_ct=async()=>{const{isDev:e,isVitest:t,metaPixelId:n}=no().public;if(!n){console.log("Meta Pixel: Not loaded, missing Meta Pixel ID!");return}if(t){console.log("Meta Pixel: Not loaded, in Vitest!");return}if(e){console.log("Meta Pixel: Not loaded, in development");return}try{if(!window.fbq||typeof window.fbq!="function"){const r=`!function(f,b,e,v,n,t,s) {if(f.fbq)return;n=f.fbq=function(){n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments)}; if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0'; n.queue=[];t=b.createElement(e);t.async=!0; t.src=v;s=b.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t,s)}(window, document,'script', 'https://connect.facebook.net/en_US/fbevents.js'); fbq('init', '${n}');`;await lbe({innerText:r})}else window.fbq("consent","grant");window.fbq("track","PageView"),console.log("Meta Pixel: Initialized successfully")}catch(r){console.warn("Meta Pixel: Error initializing",r)}},yct=()=>{window.fbq&&typeof window.fbq=="function"&&window.fbq("consent","revoke")},vct=()=>{const{isDev:e,isVitest:t}=no().public;if(t){console.log("TTD: Not loaded, in Vitest!");return}if(e){console.log("TTD: Not loaded, in development");return}try{window.ttd_dom_ready(function(){typeof window.TTDUniversalPixelApi=="function"&&(new window.TTDUniversalPixelApi().init("eac6kka",["6g2ban0"],"https://insight.adsrvr.org/track/up"),console.log("TTD: Initialized"))})}catch(n){console.log("TTD: Error initializing universal pixel API!"),console.dir(n)}},jce=()=>{const{inAppView:e}=v3();if(e.value===!0)return console.log("Not tracking user, in app view"),!1;const t=_s();if(t.user?.privacy?.data_collection===!1)return console.log("Not tracking user, disabled by user"),!1;if(t.user?.privacy?.data_collection===!0)return!0;const n=Gc("cookienotice-accepted");return n.value===!1?(console.log("Not tracking user, disabled by guest user"),!1):n.value===!0?!0:(console.log("Not tracking user, consent not granted"),!1)},bct=()=>{const{gtagId:e}=no().public,{disableAnalytics:t}=$ce();t(e),document.querySelector('iframe[title="TTD Universal Pixel"]')?.remove(),yct()},xct=async()=>{let e=!1;try{await gct(),jce()&&(Vce(),vct(),_ct(),e=!0)}catch(t){If(t),console.warn("UserTrackingService.startTracking(): Unable to start tracking",t),e=!1}return e},pk={canTrackUser:jce,disableTracking:bct,initializeGtag:Vce,startTracking:xct},wct="CookieNotice__mapBottomPosition",Sct={mapBottomPosition:wct},Ect="tw-px-2 tw-text-sm tw-leading-normal tw-whitespace-nowrap",Tct={__name:"CookieNotice",setup(e,{expose:t}){t();const n=_s(),r=uxe("hasCookieNoticeBeenDisplayed"),s=yr(!!r.value),o=Gc("cookienotice"),c=Gc("cookienotice-accepted"),i=Tc(),f=Ct(()=>i.path.startsWith("/map")),g=async()=>{n.isGuest?c.value=!0:await n.updatePrivacy(!0),await es(),await pk.startTracking(),o.value=!0},x=async()=>{n.isGuest?c.value=!1:await n.updatePrivacy(!1),pk.disableTracking(),o.value=!0};ua(()=>window.setTimeout(()=>{s.value=!0,r.value=!0},1e3));const w={userStore:n,buttonClassNames:Ect,hasCookieNoticeBeenDisplayed:r,canShowCookieNotice:s,cookieNoticeCookie:o,cookieNoticeAcceptedCookie:c,route:i,isMapPage:f,handleAcceptCookiesClick:g,handleRejectCookiesClick:x,ButtonTypes:Tr,get useCookieWrapper(){return Gc},get useUserStore(){return _s},get UserTrackingService(){return pk}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}},Mct={class:"tw-text-sm"},Act={class:"tw-mt-4 tw-whitespace-nowrap"};function Cct(e,t,n,r,s,o){const c=W3,i=RS;return ln(),Zr(vy,{"enter-active-class":"fade-enter-transition","enter-from-class":"fade-out","leave-active-class":"fade-leave-transition","leave-to-class":"fade-out"},{default:Dr(()=>[r.canShowCookieNotice&&!r.cookieNoticeCookie?(ln(),Nn("div",{key:0,id:"cookieNotice",class:Jn(["tw-fixed tw-z-30",r.isMapPage?e.$style.mapBottomPosition:"tw-bottom-3","tw-inset-x-8 lg:tw-right-auto lg:tw-left-3","lg:tw-w-2/5","tw-p-4","tw-flex tw-justify-between tw-items-start tw-flex-col","text-lightest-color text-darkest-background-color","tw-border tw-rounded-lg text-lightest-border-color"])},[qn("p",Mct,[t[1]||(t[1]=Rr(`
        We use cookies to understand how you use our service, to share relevant information, and to
        send anonymous data to a 3rd party advertising firm. Learn more in our
        `,-1)),Un(c,{class:"tw-font-bold link-color-brand",to:"https://support.opensnow.com/legal/privacy"},{default:Dr(()=>[...t[0]||(t[0]=[Rr(`
          Privacy Policy.
        `,-1)])]),_:1})]),t[5]||(t[5]=Rr()),qn("div",Act,[Un(i,{"additional-class-names":r.buttonClassNames,type:r.ButtonTypes.primary,onClick:r.handleAcceptCookiesClick},{default:Dr(()=>[...t[2]||(t[2]=[Rr(`
          Accept Cookies
        `,-1)])]),_:1},8,["type"]),t[4]||(t[4]=Rr()),Un(i,{"additional-class-names":r.buttonClassNames,"can-underline-on-hover":!0,type:r.ButtonTypes.none,onClick:r.handleRejectCookiesClick},{default:Dr(()=>[...t[3]||(t[3]=[Rr(`
          Reject Cookies
        `,-1)])]),_:1},8,["type"])])],2)):fi("",!0)]),_:1})}const Ict={$style:Sct},Pct=Qo(Tct,[["render",Cct],["__cssModules",Ict],["__file","CookieNotice.vue"]]),Oct="Main__container",Dct="Main__siteHeader",Rct="Main__siteContent",kct="Main__siteFooter",Lct={container:Oct,siteHeader:Dct,siteContent:Rct,siteFooter:kct},Nct={__name:"Main",setup(e,{expose:t}){t();const n=v6()(),r=_s(),{inAppView:s}=v3(),o=yr({"--vh":"1vh"}),c=iL(),i=Tc(),f=Ct(()=>!(n.ui.isFullScreen&&i.path.startsWith("/map")||s.value));iN({meta:s.value?[]:[{name:"apple-itunes-app",content:"app-id=780890907"}]});const g=()=>{let z;r.preferences.theme==="system"?(z=c.value==="dark"?"dark":"light",r.computedTheme=z):z=r.preferences.theme,document.documentElement.setAttribute("data-theme",z)},x=()=>{const z=document.createElement("div");z.style.cssText="overflow: scroll; visibility: hidden; position: absolute;",document.body.appendChild(z);const j=z.offsetWidth-z.clientWidth;z.remove(),o.value={...o.value,"--scrollbar-width":`${j}px`}},w=()=>{const z=window.innerHeight/100;o.value={...o.value,"--vh":`${z}px`}};let A;const C=()=>{A=_6(()=>{x(),w()},500),window.addEventListener("resize",A)};ua(()=>{const z=r.getTheme();r.setTheme(z),g(),r.getUnits(),x(),w(),C(),window.setTimeout(w,2500)}),Mf(()=>{window.removeEventListener("resize",A)}),Hr(()=>r.preferences.theme,g),Hr(c,g);const F={mapStore:n,userStore:r,inAppView:s,style:o,preferredColorScheme:c,route:i,showFooter:f,setColorTheme:g,setScrollBarWidth:x,setViewHeight:w,get handleResize(){return A},set handleResize(z){A=z},addResizeHandler:C,get usePreferredColorScheme(){return iL},get debounce(){return _6},watch:Hr,get useMapStore(){return v6},get useUserStore(){return _s}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}};function Fct(e,t,n,r,s,o){const c=Plt,i=uct,f=Pct,g=rQ;return ln(),Nn("main",{id:"root",class:Jn(e.$style.container),style:Ta(r.style)},[r.inAppView?fi("",!0):(ln(),Zr(c,{key:0,class:Jn(e.$style.siteHeader)},null,8,["class"])),t[2]||(t[2]=Rr()),qn("div",{class:Jn(e.$style.siteContent)},[Co(e.$slots,"default")],2),t[3]||(t[3]=Rr()),r.showFooter?(ln(),Zr(i,{key:1,class:Jn(e.$style.siteFooter)},null,8,["class"])):fi("",!0),t[4]||(t[4]=Rr()),Un(g,null,{default:Dr(()=>[r.inAppView?fi("",!0):(ln(),Zr(f,{key:0})),t[0]||(t[0]=Rr()),t[1]||(t[1]=qn("div",{id:"mapContainer",class:"tw-h-full tw-w-full tw-hidden"},null,-1))]),_:1})],6)}const zct={$style:Lct},Bct=Qo(Nct,[["render",Fct],["__cssModules",zct],["__file","Main.vue"]]),$ct={__name:"error",props:{error:Object},setup(e,{expose:t}){t();const n={};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}},Vct={class:"container page-content tw-overflow-hidden"};function jct(e,t,n,r,s,o){const c=oat,i=cat,f=rQ,g=Bct;return ln(),Zr(g,null,{default:Dr(()=>[qn("div",Vct,[Un(c,{error:n.error},null,8,["error"])]),t[0]||(t[0]=Rr()),Un(f,null,{default:Dr(()=>[Un(i,{error:n.error},null,8,["error"])]),_:1})]),_:1})}const Uct=Qo($ct,[["render",jct],["__file","error.vue"]]),Hct={__name:"nuxt-root",setup(e,{expose:t}){t();const n=()=>null,r=Wn(),s=r.deferHydration();if(r.isHydrating){const C=r.hooks.hookOnce("app:error",s);aa().beforeEach(C)}const o=window.location.pathname,c=!1;Ko(Kd,Tc());const i=r.hooks.callHookWith(C=>C.map(F=>F()),"vue:setup"),f=U2(),g=!1,x=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;HC((C,F,z)=>{if(r.hooks.callHook("vue:error",C,F,z).catch(j=>console.error("[nuxt] Error in `vue:error` hook",j)),x.test(navigator.userAgent))return r.hooks.callHook("app:error",C),console.error(`[nuxt] Not rendering error page for bot with user agent \`${navigator.userAgent}\`:`,C),!1;if(Hk(C)&&(C.fatal||C.unhandled))return r.runWithContext(()=>Yp(C)),!1});const A={IslandRenderer:n,nuxtApp:r,onResolve:s,url:o,SingleRenderer:c,results:i,error:f,abortRender:g,BOT_RE:x,islandContext:!1,defineAsyncComponent:sm,onErrorCaptured:HC,onServerPrefetch:B6,provide:Ko,get useNuxtApp(){return Wn},get isNuxtError(){return Hk},get showError(){return Yp},get useError(){return U2},get useRoute(){return Tc},get useRouter(){return aa},get PageRouteSymbol(){return Kd},get AppComponent(){return Jot},get ErrorComponent(){return Uct},get componentIslands(){return F_e}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},Wct={key:0};function Gct(e,t,n,r,s,o){return ln(),Zr($3,{onResolve:r.onResolve},{default:Dr(()=>[r.abortRender?(ln(),Nn("div",Wct)):r.error?(ln(),Zr(r.ErrorComponent,{key:1,error:r.error},null,8,["error"])):r.islandContext?(ln(),Zr(r.IslandRenderer,{key:2,context:r.islandContext},null,8,["context"])):r.SingleRenderer?(ln(),Zr(P1(r.SingleRenderer),{key:3})):(ln(),Zr(r.AppComponent,{key:4}))]),_:1},8,["onResolve"])}const KX=Qo(Hct,[["render",Gct],["__file","nuxt-root.vue"]]);let JX;{let e;JX=async function(){if(e)return e;const n=!!(window.__NUXT__?.serverRendered??document.getElementById("__NUXT_DATA__")?.dataset.ssr==="true"),r=n?J6(KX):B2(KX),s=j_e({vueApp:r});async function o(c){await s.callHook("app:error",c),s.payload.error||=N_(c)}r.config.errorHandler=o,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===o&&(r.config.errorHandler=void 0)}),!n&&aj.id&&s.hook("app:suspense:resolve",()=>{document.getElementById(aj.id)?.remove()});try{await W_e(s,bot)}catch(c){o(c)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount(B_e),await s.hooks.callHook("app:mounted",r),await es()}catch(c){o(c)}return r},e=JX().catch(t=>{throw console.error("Error while mounting app:",t),t})}export{X_ as $,kut as A,Tr as B,_s as C,k2 as D,z2 as E,ei as F,QC as G,P1 as H,Ct as I,fn as J,Hr as K,eo as L,Jd as M,iN as N,_y as O,$ce as P,Tc as Q,aa as R,LS as S,L_ as T,Pot as U,es as V,_at as W,HA as X,Nbe as Y,iu as Z,Qo as _,pEe as a,ndt as a$,Zat as a0,RA as a1,v6 as a2,Ko as a3,Gc as a4,kye as a5,vy as a6,$K as a7,rQ as a8,v3 as a9,adt as aA,Kd as aB,Gut as aC,dxe as aD,Wut as aE,edt as aF,LA as aG,Qut as aH,Jm as aI,qRe as aJ,ZX as aK,Yut as aL,pk as aM,iut as aN,tut as aO,Xct as aP,qX as aQ,Vut as aR,$ut as aS,th as aT,But as aU,cbe as aV,Eut as aW,l0 as aX,Mf as aY,qK as aZ,Kut as a_,ki as aa,qpe as ab,fme as ac,bs as ad,eK as ae,Bo as af,j0 as ag,Lut as ah,dN as ai,pl as aj,Fut as ak,ym as al,B0 as am,wce as an,yot as ao,lxe as ap,N_ as aq,oat as ar,Lat as as,W2 as at,WX as au,ege as av,XX as aw,Ype as ax,Zpe as ay,ldt as az,qn as b,Aut as b$,rdt as b0,Wat as b1,tdt as b2,fA as b3,eU as b4,Rut as b5,Cc as b6,Out as b7,Qct as b8,dU as b9,sdt as bA,cut as bB,Pze as bC,eut as bD,gi as bE,Fpe as bF,obe as bG,abe as bH,sut as bI,dut as bJ,uut as bK,put as bL,lut as bM,mut as bN,gut as bO,Tut as bP,nut as bQ,XRe as bR,OA as bS,Uat as bT,exe as bU,yut as bV,QZ as bW,Uut as bX,Cut as bY,Iut as bZ,xut as b_,zat as ba,V6 as bb,Qw as bc,vM as bd,q6 as be,zut as bf,e0 as bg,ibe as bh,rbe as bi,sbe as bj,qct as bk,sQ as bl,_6 as bm,tU as bn,Xn as bo,Yct as bp,zs as bq,XZ as br,e1e as bs,F0 as bt,mo as bu,vl as bv,my as bw,odt as bx,idt as by,y6 as bz,Zr as c,Kat as c0,ih as c1,Xat as c2,Hut as c3,jut as c4,Nut as c5,YZ as c6,hN as c7,hut as c8,Zct as c9,Pn as cA,Kct as ca,Mut as cb,oQ as cc,wut as cd,but as ce,Jct as cf,aU as cg,qut as ch,uU as ci,Dut as cj,_ut as ck,xpe as cl,Put as cm,Sut as cn,yge as co,tbe as cp,aut as cq,rut as cr,nbe as cs,out as ct,fut as cu,vut as cv,n1e as cw,Qj as cx,Bct as cy,flt as cz,Jn as d,Nn as e,Un as f,tF as g,Rr as h,DCe as i,Glt as j,Co as k,fi as l,RS as m,Ta as n,ln as o,Jut as p,ZK as q,So as r,W3 as s,is as t,no as u,Wn as v,Dr as w,yr as x,QJ as y,ua as z};
//# sourceMappingURL=DL8JB1iN.js.map
